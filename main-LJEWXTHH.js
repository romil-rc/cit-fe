var j4=Object.create;var z_=Object.defineProperty,V4=Object.defineProperties,z4=Object.getOwnPropertyDescriptor,U4=Object.getOwnPropertyDescriptors,$4=Object.getOwnPropertyNames,V_=Object.getOwnPropertySymbols,H4=Object.getPrototypeOf,k1=Object.prototype.hasOwnProperty,_O=Object.prototype.propertyIsEnumerable;var gO=(e,n,t)=>n in e?z_(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,it=(e,n)=>{for(var t in n||={})k1.call(n,t)&&gO(e,t,n[t]);if(V_)for(var t of V_(n))_O.call(n,t)&&gO(e,t,n[t]);return e},Pn=(e,n)=>V4(e,U4(n));var Vf=(e,n)=>{var t={};for(var i in e)k1.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&V_)for(var i of V_(e))n.indexOf(i)<0&&_O.call(e,i)&&(t[i]=e[i]);return t};var Oa=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),q4=(e,n)=>{for(var t in n)z_(e,t,{get:n[t],enumerable:!0})},G4=(e,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of $4(n))!k1.call(e,r)&&r!==t&&z_(e,r,{get:()=>n[r],enumerable:!(i=z4(n,r))||i.enumerable});return e};var Lo=(e,n,t)=>(t=e!=null?j4(H4(e)):{},G4(n||!e||!e.__esModule?z_(t,"default",{value:e,enumerable:!0}):t,e));var Zr=(e,n,t)=>new Promise((i,r)=>{var s=f=>{try{d(t.next(f))}catch(v){r(v)}},l=f=>{try{d(t.throw(f))}catch(v){r(v)}},d=f=>f.done?i(f.value):Promise.resolve(f.value).then(s,l);d((t=t.apply(e,n)).next())});var Gk=Oa((RM,FM)=>{"use strict";(function(e,n){typeof RM=="object"&&typeof FM<"u"?FM.exports=n():typeof define=="function"&&define.amd?define(n):(e=typeof globalThis<"u"?globalThis:e||self,e.maplibregl=n())})(RM,function(){"use strict";var e={},n={};function t(r,s,l){if(n[r]=l,r==="index"){var d="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",f={};return n.shared(f),n.index(e,f),typeof window<"u"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([d],{type:"text/javascript"}))),e}}t("shared",["exports"],function(r){"use strict";function s(c,a,u,p){return new(u||(u=Promise))(function(_,w){function C(E){try{S(p.next(E))}catch(k){w(k)}}function M(E){try{S(p.throw(E))}catch(k){w(k)}}function S(E){var k;E.done?_(E.value):(k=E.value,k instanceof u?k:new u(function(R){R(k)})).then(C,M)}S((p=p.apply(c,a||[])).next())})}function l(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var d=f;function f(c,a){this.x=c,this.y=a}f.prototype={clone:function(){return new f(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,a){return this.clone()._rotateAround(c,a)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var a=c.x-this.x,u=c.y-this.y;return a*a+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,a){return Math.atan2(this.x*a-this.y*c,this.x*c+this.y*a)},_matMult:function(c){var a=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=a,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var a=Math.cos(c),u=Math.sin(c),p=u*this.x+a*this.y;return this.x=a*this.x-u*this.y,this.y=p,this},_rotateAround:function(c,a){var u=Math.cos(c),p=Math.sin(c),_=a.y+p*(this.x-a.x)+u*(this.y-a.y);return this.x=a.x+u*(this.x-a.x)-p*(this.y-a.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(c){return c instanceof f?c:Array.isArray(c)?new f(c[0],c[1]):c};var v=l(d),x=O;function O(c,a,u,p){this.cx=3*c,this.bx=3*(u-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(p-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=a,this.p2x=u,this.p2y=p}O.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,a){if(a===void 0&&(a=1e-6),c<0)return 0;if(c>1)return 1;for(var u=c,p=0;p<8;p++){var _=this.sampleCurveX(u)-c;if(Math.abs(_)<a)return u;var w=this.sampleCurveDerivativeX(u);if(Math.abs(w)<1e-6)break;u-=_/w}var C=0,M=1;for(u=c,p=0;p<20&&(_=this.sampleCurveX(u),!(Math.abs(_-c)<a));p++)c>_?C=u:M=u,u=.5*(M-C)+C;return u},solve:function(c,a){return this.sampleCurveY(this.solveCurveX(c,a))}};var A=l(x);let L,U;function te(){return L==null&&(L=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),L}function ce(){if(U==null&&(U=!1,te())){let a=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(a){for(let p=0;p<5*5;p++){let _=4*p;a.fillStyle=`rgb(${_},${_+1},${_+2})`,a.fillRect(p%5,Math.floor(p/5),1,1)}let u=a.getImageData(0,0,5,5).data;for(let p=0;p<5*5*4;p++)if(p%4!=3&&u[p]!==p){U=!0;break}}}return U||!1}function fe(c,a,u,p){let _=new A(c,a,u,p);return function(w){return _.solve(w)}}let ye=fe(.25,.1,.25,1);function Re(c,a,u){return Math.min(u,Math.max(a,c))}function Ae(c,a,u){let p=u-a,_=((c-a)%p+p)%p+a;return _===a?u:_}function We(c,...a){for(let u of a)for(let p in u)c[p]=u[p];return c}let ft=1;function Et(c,a,u){let p={};for(let _ in c)p[_]=a.call(u||this,c[_],_,c);return p}function Pt(c,a,u){let p={};for(let _ in c)a.call(u||this,c[_],_,c)&&(p[_]=c[_]);return p}function rt(c){return Array.isArray(c)?c.map(rt):typeof c=="object"&&c?Et(c,rt):c}let nn={};function Qt(c){nn[c]||(typeof console<"u"&&console.warn(c),nn[c]=!0)}function st(c,a,u){return(u.y-c.y)*(a.x-c.x)>(a.y-c.y)*(u.x-c.x)}function Je(c){let a=0;for(let u,p,_=0,w=c.length,C=w-1;_<w;C=_++)u=c[_],p=c[C],a+=(p.x-u.x)*(u.y+p.y);return a}function Ye(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let lt=null;function Te(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}let Se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Pe(c,a,u,p,_){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");let w=new VideoFrame(c,{timestamp:0});try{let C=w?.format;if(!C||!C.startsWith("BGR")&&!C.startsWith("RGB"))throw new Error(`Unrecognized format ${C}`);let M=C.startsWith("BGR"),S=new Uint8ClampedArray(p*_*4);if(yield w.copyTo(S,function(E,k,R,j,$){let G=4*Math.max(-k,0),X=(Math.max(0,R)-R)*j*4+G,re=4*j,le=Math.max(0,k),xe=Math.max(0,R);return{rect:{x:le,y:xe,width:Math.min(E.width,k+j)-le,height:Math.min(E.height,R+$)-xe},layout:[{offset:X,stride:re}]}}(c,a,u,p,_)),M)for(let E=0;E<S.length;E+=4){let k=S[E];S[E]=S[E+2],S[E+2]=k}return S}finally{w.close()}})}let Ke,ut,yt="AbortError";function Yt(){return new Error(yt)}let Jt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function yn(c){return Jt.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}let bn="global-dispatcher";class In extends Error{constructor(a,u,p,_){super(`AJAXError: ${u} (${a}): ${p}`),this.status=a,this.statusText=u,this.url=p,this.body=_}}let $n=()=>Ye(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ln=function(c,a){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){let p=yn(c.url);if(p)return p(c,a);if(Ye(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:bn},a)}if(!(/^file:/.test(u=c.url)||/^file:/.test($n())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(p,_){return s(this,void 0,void 0,function*(){let w=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:$n(),signal:_.signal});p.type==="json"&&w.headers.set("Accept","application/json");let C=yield fetch(w);if(!C.ok){let E=yield C.blob();throw new In(C.status,C.statusText,p.url,E)}let M;M=p.type==="arrayBuffer"||p.type==="image"?C.arrayBuffer():p.type==="json"?C.json():C.text();let S=yield M;if(_.signal.aborted)throw Yt();return{data:S,cacheControl:C.headers.get("Cache-Control"),expires:C.headers.get("Expires")}})}(c,a);if(Ye(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:bn},a)}var u;return function(p,_){return new Promise((w,C)=>{let M=new XMLHttpRequest;M.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(M.responseType="arraybuffer");for(let S in p.headers)M.setRequestHeader(S,p.headers[S]);p.type==="json"&&(M.responseType="text",M.setRequestHeader("Accept","application/json")),M.withCredentials=p.credentials==="include",M.onerror=()=>{C(new Error(M.statusText))},M.onload=()=>{if(!_.signal.aborted)if((M.status>=200&&M.status<300||M.status===0)&&M.response!==null){let S=M.response;if(p.type==="json")try{S=JSON.parse(M.response)}catch(E){return void C(E)}w({data:S,cacheControl:M.getResponseHeader("Cache-Control"),expires:M.getResponseHeader("Expires")})}else{let S=new Blob([M.response],{type:M.getResponseHeader("Content-Type")});C(new In(M.status,M.statusText,p.url,S))}},_.signal.addEventListener("abort",()=>{M.abort(),C(Yt())}),M.send(p.body)})}(c,a)};function Nn(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;let a=new URL(c),u=window.location;return a.protocol===u.protocol&&a.host===u.host}function Ui(c,a,u){u[c]&&u[c].indexOf(a)!==-1||(u[c]=u[c]||[],u[c].push(a))}function Li(c,a,u){if(u&&u[c]){let p=u[c].indexOf(a);p!==-1&&u[c].splice(p,1)}}class Ci{constructor(a,u={}){We(this,u),this.type=a}}class js extends Ci{constructor(a,u={}){super("error",We({error:a},u))}}class Za{on(a,u){return this._listeners=this._listeners||{},Ui(a,u,this._listeners),this}off(a,u){return Li(a,u,this._listeners),Li(a,u,this._oneTimeListeners),this}once(a,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Ui(a,u,this._oneTimeListeners),this):new Promise(p=>this.once(a,p))}fire(a,u){typeof a=="string"&&(a=new Ci(a,u||{}));let p=a.type;if(this.listens(p)){a.target=this;let _=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(let M of _)M.call(this,a);let w=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(let M of w)Li(p,M,this._oneTimeListeners),M.call(this,a);let C=this._eventedParent;C&&(We(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(a))}else a instanceof js&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,u){return this._eventedParent=a,this._eventedParentData=u,this}}var Be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Ya=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Mo(c,a){let u={};for(let p in c)p!=="ref"&&(u[p]=c[p]);return Ya.forEach(p=>{p in a&&(u[p]=a[p])}),u}function Cn(c,a){if(Array.isArray(c)){if(!Array.isArray(a)||c.length!==a.length)return!1;for(let u=0;u<c.length;u++)if(!Cn(c[u],a[u]))return!1;return!0}if(typeof c=="object"&&c!==null&&a!==null){if(typeof a!="object"||Object.keys(c).length!==Object.keys(a).length)return!1;for(let u in c)if(!Cn(c[u],a[u]))return!1;return!0}return c===a}function $i(c,a){c.push(a)}function rs(c,a,u){$i(u,{command:"addSource",args:[c,a[c]]})}function ta(c,a,u){$i(a,{command:"removeSource",args:[c]}),u[c]=!0}function Ka(c,a,u,p){ta(c,u,p),rs(c,a,u)}function Qa(c,a,u){let p;for(p in c[u])if(Object.prototype.hasOwnProperty.call(c[u],p)&&p!=="data"&&!Cn(c[u][p],a[u][p]))return!1;for(p in a[u])if(Object.prototype.hasOwnProperty.call(a[u],p)&&p!=="data"&&!Cn(c[u][p],a[u][p]))return!1;return!0}function Vs(c,a,u,p,_,w){c=c||{},a=a||{};for(let C in c)Object.prototype.hasOwnProperty.call(c,C)&&(Cn(c[C],a[C])||u.push({command:w,args:[p,C,a[C],_]}));for(let C in a)Object.prototype.hasOwnProperty.call(a,C)&&!Object.prototype.hasOwnProperty.call(c,C)&&(Cn(c[C],a[C])||u.push({command:w,args:[p,C,a[C],_]}))}function tc(c){return c.id}function _a(c,a){return c[a.id]=a,c}class at{constructor(a,u,p,_){this.message=(a?`${a}: `:"")+p,_&&(this.identifier=_),u!=null&&u.__line__&&(this.line=u.__line__)}}function bs(c,...a){for(let u of a)for(let p in u)c[p]=u[p];return c}class ws extends Error{constructor(a,u){super(u),this.message=u,this.key=a}}class ql{constructor(a,u=[]){this.parent=a,this.bindings={};for(let[p,_]of u)this.bindings[p]=_}concat(a){return new ql(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}let Ir={kind:"null"},vt={kind:"number"},mn={kind:"string"},hn={kind:"boolean"},Ki={kind:"color"},va={kind:"object"},an={kind:"value"},nc={kind:"collator"},rr={kind:"formatted"},se={kind:"padding"},B={kind:"resolvedImage"},z={kind:"variableAnchorOffsetCollection"};function Z(c,a){return{kind:"array",itemType:c,N:a}}function ee(c){if(c.kind==="array"){let a=ee(c.itemType);return typeof c.N=="number"?`array<${a}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${a}>`}return c.kind}let me=[Ir,vt,mn,hn,Ki,rr,va,Z(an),se,B,z];function ge(c,a){if(a.kind==="error")return null;if(c.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!ge(c.itemType,a.itemType))&&(typeof c.N!="number"||c.N===a.N))return null}else{if(c.kind===a.kind)return null;if(c.kind==="value"){for(let u of me)if(!ge(u,a))return null}}return`Expected ${ee(c)} but found ${ee(a)} instead.`}function we(c,a){return a.some(u=>u.kind===c.kind)}function he(c,a){return a.some(u=>u==="null"?c===null:u==="array"?Array.isArray(c):u==="object"?c&&!Array.isArray(c)&&typeof c=="object":u===typeof c)}function Oe(c,a){return c.kind==="array"&&a.kind==="array"?c.itemType.kind===a.itemType.kind&&typeof c.N=="number":c.kind===a.kind}let qe=.96422,ze=.82521,$e=4/29,Ut=6/29,qt=3*Ut*Ut,on=Ut*Ut*Ut,en=Math.PI/180,Bn=180/Math.PI;function Xn(c){return(c%=360)<0&&(c+=360),c}function mi([c,a,u,p]){let _,w,C=pn((.2225045*(c=Qi(c))+.7168786*(a=Qi(a))+.0606169*(u=Qi(u)))/1);c===a&&a===u?_=w=C:(_=pn((.4360747*c+.3850649*a+.1430804*u)/qe),w=pn((.0139322*c+.0971045*a+.7141733*u)/ze));let M=116*C-16;return[M<0?0:M,500*(_-C),200*(C-w),p]}function Qi(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function pn(c){return c>on?Math.pow(c,1/3):c/qt+$e}function Ei([c,a,u,p]){let _=(c+16)/116,w=isNaN(a)?_:_+a/500,C=isNaN(u)?_:_-u/200;return _=1*zr(_),w=qe*zr(w),C=ze*zr(C),[sr(3.1338561*w-1.6168667*_-.4906146*C),sr(-.9787684*w+1.9161415*_+.033454*C),sr(.0719453*w-.2289914*_+1.4052427*C),p]}function sr(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function zr(c){return c>Ut?c*c*c:qt*(c-$e)}function ss(c){return parseInt(c.padEnd(2,c),16)/255}function _r(c,a){return ya(a?c/100:c,0,1)}function ya(c,a,u){return Math.min(Math.max(a,c),u)}function Fg(c){return!c.some(Number.isNaN)}let Sb={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Kn{constructor(a,u,p,_=1,w=!0){this.r=a,this.g=u,this.b=p,this.a=_,w||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[a,u,p,_]))}static parse(a){if(a instanceof Kn)return a;if(typeof a!="string")return;let u=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];let _=Sb[p];if(_){let[C,M,S]=_;return[C/255,M/255,S/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){let C=p.length<6?1:2,M=1;return[ss(p.slice(M,M+=C)),ss(p.slice(M,M+=C)),ss(p.slice(M,M+=C)),ss(p.slice(M,M+C)||"ff")]}if(p.startsWith("rgb")){let C=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){let[M,S,E,k,R,j,$,G,X,re,le,xe]=C,ue=[k||" ",$||" ",re].join("");if(ue==="  "||ue==="  /"||ue===",,"||ue===",,,"){let ve=[E,j,X].join(""),Ve=ve==="%%%"?100:ve===""?255:0;if(Ve){let He=[ya(+S/Ve,0,1),ya(+R/Ve,0,1),ya(+G/Ve,0,1),le?_r(+le,xe):1];if(Fg(He))return He}}return}}let w=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){let[C,M,S,E,k,R,j,$,G]=w,X=[S||" ",k||" ",j].join("");if(X==="  "||X==="  /"||X===",,"||X===",,,"){let re=[+M,ya(+E,0,100),ya(+R,0,100),$?_r(+$,G):1];if(Fg(re))return function([le,xe,ue,ve]){function Ve(He){let Tt=(He+le/30)%12,At=xe*Math.min(ue,1-ue);return ue-At*Math.max(-1,Math.min(Tt-3,9-Tt,1))}return le=Xn(le),xe/=100,ue/=100,[Ve(0),Ve(8),Ve(4),ve]}(re)}}}(a);return u?new Kn(...u,!1):void 0}get rgb(){let{r:a,g:u,b:p,a:_}=this,w=_||1/0;return this.overwriteGetter("rgb",[a/w,u/w,p/w,_])}get hcl(){return this.overwriteGetter("hcl",function(a){let[u,p,_,w]=mi(a),C=Math.sqrt(p*p+_*_);return[Math.round(1e4*C)?Xn(Math.atan2(_,p)*Bn):NaN,C,u,w]}(this.rgb))}get lab(){return this.overwriteGetter("lab",mi(this.rgb))}overwriteGetter(a,u){return Object.defineProperty(this,a,{value:u}),u}toString(){let[a,u,p,_]=this.rgb;return`rgba(${[a,u,p].map(w=>Math.round(255*w)).join(",")},${_})`}}Kn.black=new Kn(0,0,0,1),Kn.white=new Kn(1,1,1,1),Kn.transparent=new Kn(0,0,0,0),Kn.red=new Kn(1,0,0,1);class jp{constructor(a,u,p){this.sensitivity=a?u?"variant":"case":u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,u){return this.collator.compare(a,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Vp{constructor(a,u,p,_,w){this.text=a,this.image=u,this.scale=p,this.fontStack=_,this.textColor=w}}class Cs{constructor(a){this.sections=a}static fromString(a){return new Cs([new Vp(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof Cs?a:Cs.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class as{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof as)return a;if(typeof a=="number")return new as([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(let u of a)if(typeof u!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new as(a)}}toString(){return JSON.stringify(this.values)}}let Gl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class zs{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof zs)return a;if(Array.isArray(a)&&!(a.length<1)&&a.length%2==0){for(let u=0;u<a.length;u+=2){let p=a[u],_=a[u+1];if(typeof p!="string"||!Gl.has(p)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new zs(a)}}toString(){return JSON.stringify(this.values)}}class Us{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new Us({name:a,available:!1}):null}}function Wc(c,a,u,p){return typeof c=="number"&&c>=0&&c<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof u=="number"&&u>=0&&u<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[c,a,u,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[c,a,u,p]:[c,a,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function cd(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Kn||c instanceof jp||c instanceof Cs||c instanceof as||c instanceof zs||c instanceof Us)return!0;if(Array.isArray(c)){for(let a of c)if(!cd(a))return!1;return!0}if(typeof c=="object"){for(let a in c)if(!cd(c[a]))return!1;return!0}return!1}function Ji(c){if(c===null)return Ir;if(typeof c=="string")return mn;if(typeof c=="boolean")return hn;if(typeof c=="number")return vt;if(c instanceof Kn)return Ki;if(c instanceof jp)return nc;if(c instanceof Cs)return rr;if(c instanceof as)return se;if(c instanceof zs)return z;if(c instanceof Us)return B;if(Array.isArray(c)){let a=c.length,u;for(let p of c){let _=Ji(p);if(u){if(u===_)continue;u=an;break}u=_}return Z(u||an,a)}return va}function Wl(c){let a=typeof c;return c===null?"":a==="string"||a==="number"||a==="boolean"?String(c):c instanceof Kn||c instanceof Cs||c instanceof as||c instanceof zs||c instanceof Us?c.toString():JSON.stringify(c)}class Do{constructor(a,u){this.type=a,this.value=u}static parse(a,u){if(a.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!cd(a[1]))return u.error("invalid value");let p=a[1],_=Ji(p),w=u.expectedType;return _.kind!=="array"||_.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(_=w),new Do(_,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class xi{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}let ld={string:mn,number:vt,boolean:hn,object:va};class xs{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");let p,_=1,w=a[0];if(w==="array"){let M,S;if(a.length>2){let E=a[1];if(typeof E!="string"||!(E in ld)||E==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);M=ld[E],_++}else M=an;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return u.error('The length argument to "array" must be a positive integer literal',2);S=a[2],_++}p=Z(M,S)}else{if(!ld[w])throw new Error(`Types doesn't contain name = ${w}`);p=ld[w]}let C=[];for(;_<a.length;_++){let M=u.parse(a[_],_,an);if(!M)return null;C.push(M)}return new xs(p,C)}evaluate(a){for(let u=0;u<this.args.length;u++){let p=this.args[u].evaluate(a);if(!ge(this.type,Ji(p)))return p;if(u===this.args.length-1)throw new xi(`Expected value to be of type ${ee(this.type)}, but found ${ee(Ji(p))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}let ud={"to-boolean":hn,"to-color":Ki,"to-number":vt,"to-string":mn};class ba{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");let p=a[0];if(!ud[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&a.length!==2)return u.error("Expected one argument.");let _=ud[p],w=[];for(let C=1;C<a.length;C++){let M=u.parse(a[C],C,an);if(!M)return null;w.push(M)}return new ba(_,w)}evaluate(a){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(a);case"color":{let u,p;for(let _ of this.args){if(u=_.evaluate(a),p=null,u instanceof Kn)return u;if(typeof u=="string"){let w=a.parseColor(u);if(w)return w}else if(Array.isArray(u)&&(p=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Wc(u[0],u[1],u[2],u[3]),!p))return new Kn(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new xi(p||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(let p of this.args){u=p.evaluate(a);let _=as.parse(u);if(_)return _}throw new xi(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(let p of this.args){u=p.evaluate(a);let _=zs.parse(u);if(_)return _}throw new xi(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(let p of this.args){if(u=p.evaluate(a),u===null)return 0;let _=Number(u);if(!isNaN(_))return _}throw new xi(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return Cs.fromString(Wl(this.args[0].evaluate(a)));case"resolvedImage":return Us.fromString(Wl(this.args[0].evaluate(a)));default:return Wl(this.args[0].evaluate(a))}}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}let Zl=["Unknown","Point","LineString","Polygon"];class Qn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Zl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let u=this._parseColorCache[a];return u||(u=this._parseColorCache[a]=Kn.parse(a)),u}}class dd{constructor(a,u,p=[],_,w=new ql,C=[]){this.registry=a,this.path=p,this.key=p.map(M=>`[${M}]`).join(""),this.scope=w,this.errors=C,this.expectedType=_,this._isConstant=u}parse(a,u,p,_,w={}){return u?this.concat(u,p,_)._parse(a,w):this._parse(a,w)}_parse(a,u){function p(_,w,C){return C==="assert"?new xs(w,[_]):C==="coerce"?new ba(w,[_]):_}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let _=a[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let w=this.registry[_];if(w){let C=w.parse(a,this);if(!C)return null;if(this.expectedType){let M=this.expectedType,S=C.type;if(M.kind!=="string"&&M.kind!=="number"&&M.kind!=="boolean"&&M.kind!=="object"&&M.kind!=="array"||S.kind!=="value")if(M.kind!=="color"&&M.kind!=="formatted"&&M.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string")if(M.kind!=="padding"||S.kind!=="value"&&S.kind!=="number"&&S.kind!=="array")if(M.kind!=="variableAnchorOffsetCollection"||S.kind!=="value"&&S.kind!=="array"){if(this.checkSubtype(M,S))return null}else C=p(C,M,u.typeAnnotation||"coerce");else C=p(C,M,u.typeAnnotation||"coerce");else C=p(C,M,u.typeAnnotation||"coerce");else C=p(C,M,u.typeAnnotation||"assert")}if(!(C instanceof Do)&&C.type.kind!=="resolvedImage"&&this._isConstant(C)){let M=new Qn;try{C=new Do(C.type,C.evaluate(M))}catch(S){return this.error(S.message),null}}return C}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,u,p){let _=typeof a=="number"?this.path.concat(a):this.path,w=p?this.scope.concat(p):this.scope;return new dd(this.registry,this._isConstant,_,u||null,w,this.errors)}error(a,...u){let p=`${this.key}${u.map(_=>`[${_}]`).join("")}`;this.errors.push(new ws(p,a))}checkSubtype(a,u){let p=ge(a,u);return p&&this.error(p),p}}class Zc{constructor(a,u,p){this.type=nc,this.locale=p,this.caseSensitive=a,this.diacriticSensitive=u}static parse(a,u){if(a.length!==2)return u.error("Expected one argument.");let p=a[1];if(typeof p!="object"||Array.isArray(p))return u.error("Collator options argument must be an object.");let _=u.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,hn);if(!_)return null;let w=u.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,hn);if(!w)return null;let C=null;return p.locale&&(C=u.parse(p.locale,1,mn),!C)?null:new Zc(_,w,C)}evaluate(a){return new jp(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}let To=8192;function hd(c,a){c[0]=Math.min(c[0],a[0]),c[1]=Math.min(c[1],a[1]),c[2]=Math.max(c[2],a[0]),c[3]=Math.max(c[3],a[1])}function Yl(c,a){return!(c[0]<=a[0]||c[2]>=a[2]||c[1]<=a[1]||c[3]>=a[3])}function Ob(c,a){let u=(180+c[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,_=Math.pow(2,a.z);return[Math.round(u*_*To),Math.round(p*_*To)]}function Lg(c,a,u){let p=c[0]-a[0],_=c[1]-a[1],w=c[0]-u[0],C=c[1]-u[1];return p*C-w*_==0&&p*w<=0&&_*C<=0}function pd(c,a){let u=!1;for(let C=0,M=a.length;C<M;C++){let S=a[C];for(let E=0,k=S.length;E<k-1;E++){if(Lg(c,S[E],S[E+1]))return!1;(_=S[E])[1]>(p=c)[1]!=(w=S[E+1])[1]>p[1]&&p[0]<(w[0]-_[0])*(p[1]-_[1])/(w[1]-_[1])+_[0]&&(u=!u)}}var p,_,w;return u}function Ib(c,a){for(let u=0;u<a.length;u++)if(pd(c,a[u]))return!0;return!1}function Ng(c,a,u,p){let _=p[0]-u[0],w=p[1]-u[1],C=(c[0]-u[0])*w-_*(c[1]-u[1]),M=(a[0]-u[0])*w-_*(a[1]-u[1]);return C>0&&M<0||C<0&&M>0}function Eb(c,a,u){for(let E of u)for(let k=0;k<E.length-1;++k)if((M=[(C=E[k+1])[0]-(w=E[k])[0],C[1]-w[1]])[0]*(S=[(_=a)[0]-(p=c)[0],_[1]-p[1]])[1]-M[1]*S[0]!=0&&Ng(p,_,w,C)&&Ng(w,C,p,_))return!0;var p,_,w,C,M,S;return!1}function Bg(c,a){for(let u=0;u<c.length;++u)if(!pd(c[u],a))return!1;for(let u=0;u<c.length-1;++u)if(Eb(c[u],c[u+1],a))return!1;return!0}function jg(c,a){for(let u=0;u<a.length;u++)if(Bg(c,a[u]))return!0;return!1}function fd(c,a,u){let p=[];for(let _=0;_<c.length;_++){let w=[];for(let C=0;C<c[_].length;C++){let M=Ob(c[_][C],u);hd(a,M),w.push(M)}p.push(w)}return p}function Vg(c,a,u){let p=[];for(let _=0;_<c.length;_++){let w=fd(c[_],a,u);p.push(w)}return p}function zg(c,a,u,p){if(c[0]<u[0]||c[0]>u[2]){let _=.5*p,w=c[0]-u[0]>_?-p:u[0]-c[0]>_?p:0;w===0&&(w=c[0]-u[2]>_?-p:u[2]-c[0]>_?p:0),c[0]+=w}hd(a,c)}function md(c,a,u,p){let _=Math.pow(2,p.z)*To,w=[p.x*To,p.y*To],C=[];for(let M of c)for(let S of M){let E=[S.x+w[0],S.y+w[1]];zg(E,a,u,_),C.push(E)}return C}function Ug(c,a,u,p){let _=Math.pow(2,p.z)*To,w=[p.x*To,p.y*To],C=[];for(let S of c){let E=[];for(let k of S){let R=[k.x+w[0],k.y+w[1]];hd(a,R),E.push(R)}C.push(E)}if(a[2]-a[0]<=_/2){(M=a)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(let S of C)for(let E of S)zg(E,a,u,_)}var M;return C}class ic{constructor(a,u){this.type=hn,this.geojson=a,this.geometries=u}static parse(a,u){if(a.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(cd(a[1])){let p=a[1];if(p.type==="FeatureCollection"){let _=[];for(let w of p.features){let{type:C,coordinates:M}=w.geometry;C==="Polygon"&&_.push(M),C==="MultiPolygon"&&_.push(...M)}if(_.length)return new ic(p,{type:"MultiPolygon",coordinates:_})}else if(p.type==="Feature"){let _=p.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new ic(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new ic(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(u,p){let _=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],C=u.canonicalID();if(p.type==="Polygon"){let M=fd(p.coordinates,w,C),S=md(u.geometry(),_,w,C);if(!Yl(_,w))return!1;for(let E of S)if(!pd(E,M))return!1}if(p.type==="MultiPolygon"){let M=Vg(p.coordinates,w,C),S=md(u.geometry(),_,w,C);if(!Yl(_,w))return!1;for(let E of S)if(!Ib(E,M))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(u,p){let _=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],C=u.canonicalID();if(p.type==="Polygon"){let M=fd(p.coordinates,w,C),S=Ug(u.geometry(),_,w,C);if(!Yl(_,w))return!1;for(let E of S)if(!Bg(E,M))return!1}if(p.type==="MultiPolygon"){let M=Vg(p.coordinates,w,C),S=Ug(u.geometry(),_,w,C);if(!Yl(_,w))return!1;for(let E of S)if(!jg(E,M))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class gd{constructor(a,u){this.type=u.type,this.name=a,this.boundExpression=u}static parse(a,u){if(a.length!==2||typeof a[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");let p=a[1];return u.scope.has(p)?new gd(p,u.scope.get(p)):u.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class Ms{constructor(a,u,p,_){this.name=a,this.type=u,this._evaluate=p,this.args=_}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,u){let p=a[0],_=Ms.definitions[p];if(!_)return u.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);let w=Array.isArray(_)?_[0]:_.type,C=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,M=C.filter(([E])=>!Array.isArray(E)||E.length===a.length-1),S=null;for(let[E,k]of M){S=new dd(u.registry,Kl,u.path,null,u.scope);let R=[],j=!1;for(let $=1;$<a.length;$++){let G=a[$],X=Array.isArray(E)?E[$-1]:E.type,re=S.parse(G,1+R.length,X);if(!re){j=!0;break}R.push(re)}if(!j)if(Array.isArray(E)&&E.length!==R.length)S.error(`Expected ${E.length} arguments, but found ${R.length} instead.`);else{for(let $=0;$<R.length;$++){let G=Array.isArray(E)?E[$]:E.type,X=R[$];S.concat($+1).checkSubtype(G,X.type)}if(S.errors.length===0)return new Ms(p,w,k,R)}}if(M.length===1)u.errors.push(...S.errors);else{let E=(M.length?M:C).map(([R])=>{return j=R,Array.isArray(j)?`(${j.map(ee).join(", ")})`:`(${ee(j.type)}...)`;var j}).join(" | "),k=[];for(let R=1;R<a.length;R++){let j=u.parse(a[R],1+k.length);if(!j)return null;k.push(ee(j.type))}u.error(`Expected arguments of type ${E}, but found (${k.join(", ")}) instead.`)}return null}static register(a,u){Ms.definitions=u;for(let p in u)a[p]=Ms}}function Kl(c){if(c instanceof gd)return Kl(c.boundExpression);if(c instanceof Ms&&c.name==="error"||c instanceof Zc||c instanceof ic)return!1;let a=c instanceof ba||c instanceof xs,u=!0;return c.eachChild(p=>{u=a?u&&Kl(p):u&&p instanceof Do}),!!u&&_d(c)&&Jl(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function _d(c){if(c instanceof Ms&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof ic)return!1;let a=!0;return c.eachChild(u=>{a&&!_d(u)&&(a=!1)}),a}function Ql(c){if(c instanceof Ms&&c.name==="feature-state")return!1;let a=!0;return c.eachChild(u=>{a&&!Ql(u)&&(a=!1)}),a}function Jl(c,a){if(c instanceof Ms&&a.indexOf(c.name)>=0)return!1;let u=!0;return c.eachChild(p=>{u&&!Jl(p,a)&&(u=!1)}),u}function Xl(c,a){let u=c.length-1,p,_,w=0,C=u,M=0;for(;w<=C;)if(M=Math.floor((w+C)/2),p=c[M],_=c[M+1],p<=a){if(M===u||a<_)return M;w=M+1}else{if(!(p>a))throw new xi("Input is not a number.");C=M-1}return 0}class eu{constructor(a,u,p){this.type=a,this.input=u,this.labels=[],this.outputs=[];for(let[_,w]of p)this.labels.push(_),this.outputs.push(w)}static parse(a,u){if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");let p=u.parse(a[1],1,vt);if(!p)return null;let _=[],w=null;u.expectedType&&u.expectedType.kind!=="value"&&(w=u.expectedType);for(let C=1;C<a.length;C+=2){let M=C===1?-1/0:a[C],S=a[C+1],E=C,k=C+1;if(typeof M!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(_.length&&_[_.length-1][0]>=M)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',E);let R=u.parse(S,k,w);if(!R)return null;w=w||R.type,_.push([M,R])}return new eu(w,p,_)}evaluate(a){let u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(a);let _=this.input.evaluate(a);if(_<=u[0])return p[0].evaluate(a);let w=u.length;return _>=u[w-1]?p[w-1].evaluate(a):p[Xl(u,_)].evaluate(a)}eachChild(a){a(this.input);for(let u of this.outputs)a(u)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Pb(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var kb=$g;function $g(c,a,u,p){this.cx=3*c,this.bx=3*(u-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(p-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=a,this.p2x=u,this.p2y=p}$g.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,a){if(a===void 0&&(a=1e-6),c<0)return 0;if(c>1)return 1;for(var u=c,p=0;p<8;p++){var _=this.sampleCurveX(u)-c;if(Math.abs(_)<a)return u;var w=this.sampleCurveDerivativeX(u);if(Math.abs(w)<1e-6)break;u-=_/w}var C=0,M=1;for(u=c,p=0;p<20&&(_=this.sampleCurveX(u),!(Math.abs(_-c)<a));p++)c>_?C=u:M=u,u=.5*(M-C)+C;return u},solve:function(c,a){return this.sampleCurveY(this.solveCurveX(c,a))}};var Ab=Pb(kb);function rc(c,a,u){return c+u*(a-c)}function vd(c,a,u){return c.map((p,_)=>rc(p,a[_],u))}let Ur={number:rc,color:function(c,a,u,p="rgb"){switch(p){case"rgb":{let[_,w,C,M]=vd(c.rgb,a.rgb,u);return new Kn(_,w,C,M,!1)}case"hcl":{let[_,w,C,M]=c.hcl,[S,E,k,R]=a.hcl,j,$;if(isNaN(_)||isNaN(S))isNaN(_)?isNaN(S)?j=NaN:(j=S,C!==1&&C!==0||($=E)):(j=_,k!==1&&k!==0||($=w));else{let xe=S-_;S>_&&xe>180?xe-=360:S<_&&_-S>180&&(xe+=360),j=_+u*xe}let[G,X,re,le]=function([xe,ue,ve,Ve]){return xe=isNaN(xe)?0:xe*en,Ei([ve,Math.cos(xe)*ue,Math.sin(xe)*ue,Ve])}([j,$??rc(w,E,u),rc(C,k,u),rc(M,R,u)]);return new Kn(G,X,re,le,!1)}case"lab":{let[_,w,C,M]=Ei(vd(c.lab,a.lab,u));return new Kn(_,w,C,M,!1)}}},array:vd,padding:function(c,a,u){return new as(vd(c.values,a.values,u))},variableAnchorOffsetCollection:function(c,a,u){let p=c.values,_=a.values;if(p.length!==_.length)throw new xi(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${a.toString()}`);let w=[];for(let C=0;C<p.length;C+=2){if(p[C]!==_[C])throw new xi(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${p[C]}, to[${C}]: ${_[C]}`);w.push(p[C]);let[M,S]=p[C+1],[E,k]=_[C+1];w.push([rc(M,E,u),rc(S,k,u)])}return new zs(w)}};class Er{constructor(a,u,p,_,w){this.type=a,this.operator=u,this.interpolation=p,this.input=_,this.labels=[],this.outputs=[];for(let[C,M]of w)this.labels.push(C),this.outputs.push(M)}static interpolationFactor(a,u,p,_){let w=0;if(a.name==="exponential")w=Gn(u,a.base,p,_);else if(a.name==="linear")w=Gn(u,1,p,_);else if(a.name==="cubic-bezier"){let C=a.controlPoints;w=new Ab(C[0],C[1],C[2],C[3]).solve(Gn(u,1,p,_))}return w}static parse(a,u){let[p,_,w,...C]=a;if(!Array.isArray(_)||_.length===0)return u.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){let E=_[1];if(typeof E!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:E}}else{if(_[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(_[0])}`,1,0);{let E=_.slice(1);if(E.length!==4||E.some(k=>typeof k!="number"||k<0||k>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:E}}}if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(w=u.parse(w,2,vt),!w)return null;let M=[],S=null;p==="interpolate-hcl"||p==="interpolate-lab"?S=Ki:u.expectedType&&u.expectedType.kind!=="value"&&(S=u.expectedType);for(let E=0;E<C.length;E+=2){let k=C[E],R=C[E+1],j=E+3,$=E+4;if(typeof k!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(M.length&&M[M.length-1][0]>=k)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',j);let G=u.parse(R,$,S);if(!G)return null;S=S||G.type,M.push([k,G])}return Oe(S,vt)||Oe(S,Ki)||Oe(S,se)||Oe(S,z)||Oe(S,Z(vt))?new Er(S,p,_,w,M):u.error(`Type ${ee(S)} is not interpolatable.`)}evaluate(a){let u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(a);let _=this.input.evaluate(a);if(_<=u[0])return p[0].evaluate(a);let w=u.length;if(_>=u[w-1])return p[w-1].evaluate(a);let C=Xl(u,_),M=Er.interpolationFactor(this.interpolation,_,u[C],u[C+1]),S=p[C].evaluate(a),E=p[C+1].evaluate(a);switch(this.operator){case"interpolate":return Ur[this.type.kind](S,E,M);case"interpolate-hcl":return Ur.color(S,E,M,"hcl");case"interpolate-lab":return Ur.color(S,E,M,"lab")}}eachChild(a){a(this.input);for(let u of this.outputs)a(u)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Gn(c,a,u,p){let _=p-u,w=c-u;return _===0?0:a===1?w/_:(Math.pow(a,w)-1)/(Math.pow(a,_)-1)}class yd{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expectected at least one argument.");let p=null,_=u.expectedType;_&&_.kind!=="value"&&(p=_);let w=[];for(let M of a.slice(1)){let S=u.parse(M,1+w.length,p,void 0,{typeAnnotation:"omit"});if(!S)return null;p=p||S.type,w.push(S)}if(!p)throw new Error("No output type");let C=_&&w.some(M=>ge(_,M.type));return new yd(C?an:p,w)}evaluate(a){let u,p=null,_=0;for(let w of this.args)if(_++,p=w.evaluate(a),p&&p instanceof Us&&!p.available&&(u||(u=p.name),p=null,_===this.args.length&&(p=u)),p!==null)break;return p}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}class bd{constructor(a,u){this.type=u.type,this.bindings=[].concat(a),this.result=u}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(let u of this.bindings)a(u[1]);a(this.result)}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);let p=[];for(let w=1;w<a.length-1;w+=2){let C=a[w];if(typeof C!="string")return u.error(`Expected string, but found ${typeof C} instead.`,w);if(/[^a-zA-Z0-9_]/.test(C))return u.error("Variable names must contain only alphanumeric characters or '_'.",w);let M=u.parse(a[w+1],w+1);if(!M)return null;p.push([C,M])}let _=u.parse(a[a.length-1],a.length-1,u.expectedType,p);return _?new bd(p,_):null}outputDefined(){return this.result.outputDefined()}}class zp{constructor(a,u,p){this.type=a,this.index=u,this.input=p}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);let p=u.parse(a[1],1,vt),_=u.parse(a[2],2,Z(u.expectedType||an));return p&&_?new zp(_.type.itemType,p,_):null}evaluate(a){let u=this.index.evaluate(a),p=this.input.evaluate(a);if(u<0)throw new xi(`Array index out of bounds: ${u} < 0.`);if(u>=p.length)throw new xi(`Array index out of bounds: ${u} > ${p.length-1}.`);if(u!==Math.floor(u))throw new xi(`Array index must be an integer, but found ${u} instead.`);return p[u]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class Up{constructor(a,u){this.type=hn,this.needle=a,this.haystack=u}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);let p=u.parse(a[1],1,an),_=u.parse(a[2],2,an);return p&&_?we(p.type,[hn,mn,vt,Ir,an])?new Up(p,_):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ee(p.type)} instead`):null}evaluate(a){let u=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(!p)return!1;if(!he(u,["boolean","string","number","null"]))throw new xi(`Expected first argument to be of type boolean, string, number or null, but found ${ee(Ji(u))} instead.`);if(!he(p,["string","array"]))throw new xi(`Expected second argument to be of type array or string, but found ${ee(Ji(p))} instead.`);return p.indexOf(u)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class wd{constructor(a,u,p){this.type=vt,this.needle=a,this.haystack=u,this.fromIndex=p}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);let p=u.parse(a[1],1,an),_=u.parse(a[2],2,an);if(!p||!_)return null;if(!we(p.type,[hn,mn,vt,Ir,an]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ee(p.type)} instead`);if(a.length===4){let w=u.parse(a[3],3,vt);return w?new wd(p,_,w):null}return new wd(p,_)}evaluate(a){let u=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(!he(u,["boolean","string","number","null"]))throw new xi(`Expected first argument to be of type boolean, string, number or null, but found ${ee(Ji(u))} instead.`);if(!he(p,["string","array"]))throw new xi(`Expected second argument to be of type array or string, but found ${ee(Ji(p))} instead.`);if(this.fromIndex){let _=this.fromIndex.evaluate(a);return p.indexOf(u,_)}return p.indexOf(u)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class $p{constructor(a,u,p,_,w,C){this.inputType=a,this.type=u,this.input=p,this.cases=_,this.outputs=w,this.otherwise=C}static parse(a,u){if(a.length<5)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return u.error("Expected an even number of arguments.");let p,_;u.expectedType&&u.expectedType.kind!=="value"&&(_=u.expectedType);let w={},C=[];for(let E=2;E<a.length-1;E+=2){let k=a[E],R=a[E+1];Array.isArray(k)||(k=[k]);let j=u.concat(E);if(k.length===0)return j.error("Expected at least one branch label.");for(let G of k){if(typeof G!="number"&&typeof G!="string")return j.error("Branch labels must be numbers or strings.");if(typeof G=="number"&&Math.abs(G)>Number.MAX_SAFE_INTEGER)return j.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof G=="number"&&Math.floor(G)!==G)return j.error("Numeric branch labels must be integer values.");if(p){if(j.checkSubtype(p,Ji(G)))return null}else p=Ji(G);if(w[String(G)]!==void 0)return j.error("Branch labels must be unique.");w[String(G)]=C.length}let $=u.parse(R,E,_);if(!$)return null;_=_||$.type,C.push($)}let M=u.parse(a[1],1,an);if(!M)return null;let S=u.parse(a[a.length-1],a.length-1,_);return S?M.type.kind!=="value"&&u.concat(1).checkSubtype(p,M.type)?null:new $p(p,_,M,w,C,S):null}evaluate(a){let u=this.input.evaluate(a);return(Ji(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}}class Hp{constructor(a,u,p){this.type=a,this.branches=u,this.otherwise=p}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return u.error("Expected an odd number of arguments.");let p;u.expectedType&&u.expectedType.kind!=="value"&&(p=u.expectedType);let _=[];for(let C=1;C<a.length-1;C+=2){let M=u.parse(a[C],C,hn);if(!M)return null;let S=u.parse(a[C+1],C+1,p);if(!S)return null;_.push([M,S]),p=p||S.type}let w=u.parse(a[a.length-1],a.length-1,p);if(!w)return null;if(!p)throw new Error("Can't infer output type");return new Hp(p,_,w)}evaluate(a){for(let[u,p]of this.branches)if(u.evaluate(a))return p.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(let[u,p]of this.branches)a(u),a(p);a(this.otherwise)}outputDefined(){return this.branches.every(([a,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class Cd{constructor(a,u,p,_){this.type=a,this.input=u,this.beginIndex=p,this.endIndex=_}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);let p=u.parse(a[1],1,an),_=u.parse(a[2],2,vt);if(!p||!_)return null;if(!we(p.type,[Z(an),mn,an]))return u.error(`Expected first argument to be of type array or string, but found ${ee(p.type)} instead`);if(a.length===4){let w=u.parse(a[3],3,vt);return w?new Cd(p.type,p,_,w):null}return new Cd(p.type,p,_)}evaluate(a){let u=this.input.evaluate(a),p=this.beginIndex.evaluate(a);if(!he(u,["string","array"]))throw new xi(`Expected first argument to be of type array or string, but found ${ee(Ji(u))} instead.`);if(this.endIndex){let _=this.endIndex.evaluate(a);return u.slice(p,_)}return u.slice(p)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function Hg(c,a){return c==="=="||c==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function qg(c,a,u,p){return p.compare(a,u)===0}function Yc(c,a,u){let p=c!=="=="&&c!=="!=";return class qk{constructor(w,C,M){this.type=hn,this.lhs=w,this.rhs=C,this.collator=M,this.hasUntypedArgument=w.type.kind==="value"||C.type.kind==="value"}static parse(w,C){if(w.length!==3&&w.length!==4)return C.error("Expected two or three arguments.");let M=w[0],S=C.parse(w[1],1,an);if(!S)return null;if(!Hg(M,S.type))return C.concat(1).error(`"${M}" comparisons are not supported for type '${ee(S.type)}'.`);let E=C.parse(w[2],2,an);if(!E)return null;if(!Hg(M,E.type))return C.concat(2).error(`"${M}" comparisons are not supported for type '${ee(E.type)}'.`);if(S.type.kind!==E.type.kind&&S.type.kind!=="value"&&E.type.kind!=="value")return C.error(`Cannot compare types '${ee(S.type)}' and '${ee(E.type)}'.`);p&&(S.type.kind==="value"&&E.type.kind!=="value"?S=new xs(E.type,[S]):S.type.kind!=="value"&&E.type.kind==="value"&&(E=new xs(S.type,[E])));let k=null;if(w.length===4){if(S.type.kind!=="string"&&E.type.kind!=="string"&&S.type.kind!=="value"&&E.type.kind!=="value")return C.error("Cannot use collator to compare non-string types.");if(k=C.parse(w[3],3,nc),!k)return null}return new qk(S,E,k)}evaluate(w){let C=this.lhs.evaluate(w),M=this.rhs.evaluate(w);if(p&&this.hasUntypedArgument){let S=Ji(C),E=Ji(M);if(S.kind!==E.kind||S.kind!=="string"&&S.kind!=="number")throw new xi(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${S.kind}, ${E.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){let S=Ji(C),E=Ji(M);if(S.kind!=="string"||E.kind!=="string")return a(w,C,M)}return this.collator?u(w,C,M,this.collator.evaluate(w)):a(w,C,M)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}let Rb=Yc("==",function(c,a,u){return a===u},qg),Fb=Yc("!=",function(c,a,u){return a!==u},function(c,a,u,p){return!qg(0,a,u,p)}),Lb=Yc("<",function(c,a,u){return a<u},function(c,a,u,p){return p.compare(a,u)<0}),Nb=Yc(">",function(c,a,u){return a>u},function(c,a,u,p){return p.compare(a,u)>0}),Bb=Yc("<=",function(c,a,u){return a<=u},function(c,a,u,p){return p.compare(a,u)<=0}),jb=Yc(">=",function(c,a,u){return a>=u},function(c,a,u,p){return p.compare(a,u)>=0});class qp{constructor(a,u,p,_,w){this.type=mn,this.number=a,this.locale=u,this.currency=p,this.minFractionDigits=_,this.maxFractionDigits=w}static parse(a,u){if(a.length!==3)return u.error("Expected two arguments.");let p=u.parse(a[1],1,vt);if(!p)return null;let _=a[2];if(typeof _!="object"||Array.isArray(_))return u.error("NumberFormat options argument must be an object.");let w=null;if(_.locale&&(w=u.parse(_.locale,1,mn),!w))return null;let C=null;if(_.currency&&(C=u.parse(_.currency,1,mn),!C))return null;let M=null;if(_["min-fraction-digits"]&&(M=u.parse(_["min-fraction-digits"],1,vt),!M))return null;let S=null;return _["max-fraction-digits"]&&(S=u.parse(_["max-fraction-digits"],1,vt),!S)?null:new qp(p,w,C,M,S)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class xd{constructor(a){this.type=rr,this.sections=a}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");let p=a[1];if(!Array.isArray(p)&&typeof p=="object")return u.error("First argument must be an image or text section.");let _=[],w=!1;for(let C=1;C<=a.length-1;++C){let M=a[C];if(w&&typeof M=="object"&&!Array.isArray(M)){w=!1;let S=null;if(M["font-scale"]&&(S=u.parse(M["font-scale"],1,vt),!S))return null;let E=null;if(M["text-font"]&&(E=u.parse(M["text-font"],1,Z(mn)),!E))return null;let k=null;if(M["text-color"]&&(k=u.parse(M["text-color"],1,Ki),!k))return null;let R=_[_.length-1];R.scale=S,R.font=E,R.textColor=k}else{let S=u.parse(a[C],1,an);if(!S)return null;let E=S.type.kind;if(E!=="string"&&E!=="value"&&E!=="null"&&E!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,_.push({content:S,scale:null,font:null,textColor:null})}}return new xd(_)}evaluate(a){return new Cs(this.sections.map(u=>{let p=u.content.evaluate(a);return Ji(p)===B?new Vp("",p,null,null,null):new Vp(Wl(p),null,u.scale?u.scale.evaluate(a):null,u.font?u.font.evaluate(a).join(","):null,u.textColor?u.textColor.evaluate(a):null)}))}eachChild(a){for(let u of this.sections)a(u.content),u.scale&&a(u.scale),u.font&&a(u.font),u.textColor&&a(u.textColor)}outputDefined(){return!1}}class Gp{constructor(a){this.type=B,this.input=a}static parse(a,u){if(a.length!==2)return u.error("Expected two arguments.");let p=u.parse(a[1],1,mn);return p?new Gp(p):u.error("No image name provided.")}evaluate(a){let u=this.input.evaluate(a),p=Us.fromString(u);return p&&a.availableImages&&(p.available=a.availableImages.indexOf(u)>-1),p}eachChild(a){a(this.input)}outputDefined(){return!1}}class Wp{constructor(a){this.type=vt,this.input=a}static parse(a,u){if(a.length!==2)return u.error(`Expected 1 argument, but found ${a.length-1} instead.`);let p=u.parse(a[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${ee(p.type)} instead.`):new Wp(p):null}evaluate(a){let u=this.input.evaluate(a);if(typeof u=="string"||Array.isArray(u))return u.length;throw new xi(`Expected value to be of type string or array, but found ${ee(Ji(u))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}let Kc={"==":Rb,"!=":Fb,">":Nb,"<":Lb,">=":jb,"<=":Bb,array:xs,at:zp,boolean:xs,case:Hp,coalesce:yd,collator:Zc,format:xd,image:Gp,in:Up,"index-of":wd,interpolate:Er,"interpolate-hcl":Er,"interpolate-lab":Er,length:Wp,let:bd,literal:Do,match:$p,number:xs,"number-format":qp,object:xs,slice:Cd,step:eu,string:xs,"to-boolean":ba,"to-color":ba,"to-number":ba,"to-string":ba,var:gd,within:ic};function Gg(c,[a,u,p,_]){a=a.evaluate(c),u=u.evaluate(c),p=p.evaluate(c);let w=_?_.evaluate(c):1,C=Wc(a,u,p,w);if(C)throw new xi(C);return new Kn(a/255,u/255,p/255,w,!1)}function Wg(c,a){return c in a}function Zp(c,a){let u=a[c];return u===void 0?null:u}function sc(c){return{type:c}}function Zg(c){return{result:"success",value:c}}function Qc(c){return{result:"error",value:c}}function Jc(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function Yg(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Yp(c){return!!c.expression&&c.expression.interpolated}function zn(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Md(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function Vb(c){return c}function Kg(c,a){let u=a.type==="color",p=c.stops&&typeof c.stops[0][0]=="object",_=p||!(p||c.property!==void 0),w=c.type||(Yp(a)?"exponential":"interval");if(u||a.type==="padding"){let k=u?Kn.parse:as.parse;(c=bs({},c)).stops&&(c.stops=c.stops.map(R=>[R[0],k(R[1])])),c.default=k(c.default?c.default:a.default)}if(c.colorSpace&&(C=c.colorSpace)!=="rgb"&&C!=="hcl"&&C!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var C;let M,S,E;if(w==="exponential")M=jn;else if(w==="interval")M=zb;else if(w==="categorical"){M=Hi,S=Object.create(null);for(let k of c.stops)S[k[0]]=k[1];E=typeof c.stops[0][0]}else{if(w!=="identity")throw new Error(`Unknown function type "${w}"`);M=Kp}if(p){let k={},R=[];for(let G=0;G<c.stops.length;G++){let X=c.stops[G],re=X[0].zoom;k[re]===void 0&&(k[re]={zoom:re,type:c.type,property:c.property,default:c.default,stops:[]},R.push(re)),k[re].stops.push([X[0].value,X[1]])}let j=[];for(let G of R)j.push([k[G].zoom,Kg(k[G],a)]);let $={name:"linear"};return{kind:"composite",interpolationType:$,interpolationFactor:Er.interpolationFactor.bind(void 0,$),zoomStops:j.map(G=>G[0]),evaluate:({zoom:G},X)=>jn({stops:j,base:c.base},a,G).evaluate(G,X)}}if(_){let k=w==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:Er.interpolationFactor.bind(void 0,k),zoomStops:c.stops.map(R=>R[0]),evaluate:({zoom:R})=>M(c,a,R,S,E)}}return{kind:"source",evaluate(k,R){let j=R&&R.properties?R.properties[c.property]:void 0;return j===void 0?tu(c.default,a.default):M(c,a,j,S,E)}}}function tu(c,a,u){return c!==void 0?c:a!==void 0?a:u!==void 0?u:void 0}function Hi(c,a,u,p,_){return tu(typeof u===_?p[u]:void 0,c.default,a.default)}function zb(c,a,u){if(zn(u)!=="number")return tu(c.default,a.default);let p=c.stops.length;if(p===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[p-1][0])return c.stops[p-1][1];let _=Xl(c.stops.map(w=>w[0]),u);return c.stops[_][1]}function jn(c,a,u){let p=c.base!==void 0?c.base:1;if(zn(u)!=="number")return tu(c.default,a.default);let _=c.stops.length;if(_===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[_-1][0])return c.stops[_-1][1];let w=Xl(c.stops.map(k=>k[0]),u),C=function(k,R,j,$){let G=$-j,X=k-j;return G===0?0:R===1?X/G:(Math.pow(R,X)-1)/(Math.pow(R,G)-1)}(u,p,c.stops[w][0],c.stops[w+1][0]),M=c.stops[w][1],S=c.stops[w+1][1],E=Ur[a.type]||Vb;return typeof M.evaluate=="function"?{evaluate(...k){let R=M.evaluate.apply(void 0,k),j=S.evaluate.apply(void 0,k);if(R!==void 0&&j!==void 0)return E(R,j,C,c.colorSpace)}}:E(M,S,C,c.colorSpace)}function Kp(c,a,u){switch(a.type){case"color":u=Kn.parse(u);break;case"formatted":u=Cs.fromString(u.toString());break;case"resolvedImage":u=Us.fromString(u.toString());break;case"padding":u=as.parse(u);break;default:zn(u)===a.type||a.type==="enum"&&a.values[u]||(u=void 0)}return tu(u,c.default,a.default)}Ms.register(Kc,{error:[{kind:"error"},[mn],(c,[a])=>{throw new xi(a.evaluate(c))}],typeof:[mn,[an],(c,[a])=>ee(Ji(a.evaluate(c)))],"to-rgba":[Z(vt,4),[Ki],(c,[a])=>{let[u,p,_,w]=a.evaluate(c).rgb;return[255*u,255*p,255*_,w]}],rgb:[Ki,[vt,vt,vt],Gg],rgba:[Ki,[vt,vt,vt,vt],Gg],has:{type:hn,overloads:[[[mn],(c,[a])=>Wg(a.evaluate(c),c.properties())],[[mn,va],(c,[a,u])=>Wg(a.evaluate(c),u.evaluate(c))]]},get:{type:an,overloads:[[[mn],(c,[a])=>Zp(a.evaluate(c),c.properties())],[[mn,va],(c,[a,u])=>Zp(a.evaluate(c),u.evaluate(c))]]},"feature-state":[an,[mn],(c,[a])=>Zp(a.evaluate(c),c.featureState||{})],properties:[va,[],c=>c.properties()],"geometry-type":[mn,[],c=>c.geometryType()],id:[an,[],c=>c.id()],zoom:[vt,[],c=>c.globals.zoom],"heatmap-density":[vt,[],c=>c.globals.heatmapDensity||0],"line-progress":[vt,[],c=>c.globals.lineProgress||0],accumulated:[an,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[vt,sc(vt),(c,a)=>{let u=0;for(let p of a)u+=p.evaluate(c);return u}],"*":[vt,sc(vt),(c,a)=>{let u=1;for(let p of a)u*=p.evaluate(c);return u}],"-":{type:vt,overloads:[[[vt,vt],(c,[a,u])=>a.evaluate(c)-u.evaluate(c)],[[vt],(c,[a])=>-a.evaluate(c)]]},"/":[vt,[vt,vt],(c,[a,u])=>a.evaluate(c)/u.evaluate(c)],"%":[vt,[vt,vt],(c,[a,u])=>a.evaluate(c)%u.evaluate(c)],ln2:[vt,[],()=>Math.LN2],pi:[vt,[],()=>Math.PI],e:[vt,[],()=>Math.E],"^":[vt,[vt,vt],(c,[a,u])=>Math.pow(a.evaluate(c),u.evaluate(c))],sqrt:[vt,[vt],(c,[a])=>Math.sqrt(a.evaluate(c))],log10:[vt,[vt],(c,[a])=>Math.log(a.evaluate(c))/Math.LN10],ln:[vt,[vt],(c,[a])=>Math.log(a.evaluate(c))],log2:[vt,[vt],(c,[a])=>Math.log(a.evaluate(c))/Math.LN2],sin:[vt,[vt],(c,[a])=>Math.sin(a.evaluate(c))],cos:[vt,[vt],(c,[a])=>Math.cos(a.evaluate(c))],tan:[vt,[vt],(c,[a])=>Math.tan(a.evaluate(c))],asin:[vt,[vt],(c,[a])=>Math.asin(a.evaluate(c))],acos:[vt,[vt],(c,[a])=>Math.acos(a.evaluate(c))],atan:[vt,[vt],(c,[a])=>Math.atan(a.evaluate(c))],min:[vt,sc(vt),(c,a)=>Math.min(...a.map(u=>u.evaluate(c)))],max:[vt,sc(vt),(c,a)=>Math.max(...a.map(u=>u.evaluate(c)))],abs:[vt,[vt],(c,[a])=>Math.abs(a.evaluate(c))],round:[vt,[vt],(c,[a])=>{let u=a.evaluate(c);return u<0?-Math.round(-u):Math.round(u)}],floor:[vt,[vt],(c,[a])=>Math.floor(a.evaluate(c))],ceil:[vt,[vt],(c,[a])=>Math.ceil(a.evaluate(c))],"filter-==":[hn,[mn,an],(c,[a,u])=>c.properties()[a.value]===u.value],"filter-id-==":[hn,[an],(c,[a])=>c.id()===a.value],"filter-type-==":[hn,[mn],(c,[a])=>c.geometryType()===a.value],"filter-<":[hn,[mn,an],(c,[a,u])=>{let p=c.properties()[a.value],_=u.value;return typeof p==typeof _&&p<_}],"filter-id-<":[hn,[an],(c,[a])=>{let u=c.id(),p=a.value;return typeof u==typeof p&&u<p}],"filter->":[hn,[mn,an],(c,[a,u])=>{let p=c.properties()[a.value],_=u.value;return typeof p==typeof _&&p>_}],"filter-id->":[hn,[an],(c,[a])=>{let u=c.id(),p=a.value;return typeof u==typeof p&&u>p}],"filter-<=":[hn,[mn,an],(c,[a,u])=>{let p=c.properties()[a.value],_=u.value;return typeof p==typeof _&&p<=_}],"filter-id-<=":[hn,[an],(c,[a])=>{let u=c.id(),p=a.value;return typeof u==typeof p&&u<=p}],"filter->=":[hn,[mn,an],(c,[a,u])=>{let p=c.properties()[a.value],_=u.value;return typeof p==typeof _&&p>=_}],"filter-id->=":[hn,[an],(c,[a])=>{let u=c.id(),p=a.value;return typeof u==typeof p&&u>=p}],"filter-has":[hn,[an],(c,[a])=>a.value in c.properties()],"filter-has-id":[hn,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[hn,[Z(mn)],(c,[a])=>a.value.indexOf(c.geometryType())>=0],"filter-id-in":[hn,[Z(an)],(c,[a])=>a.value.indexOf(c.id())>=0],"filter-in-small":[hn,[mn,Z(an)],(c,[a,u])=>u.value.indexOf(c.properties()[a.value])>=0],"filter-in-large":[hn,[mn,Z(an)],(c,[a,u])=>function(p,_,w,C){for(;w<=C;){let M=w+C>>1;if(_[M]===p)return!0;_[M]>p?C=M-1:w=M+1}return!1}(c.properties()[a.value],u.value,0,u.value.length-1)],all:{type:hn,overloads:[[[hn,hn],(c,[a,u])=>a.evaluate(c)&&u.evaluate(c)],[sc(hn),(c,a)=>{for(let u of a)if(!u.evaluate(c))return!1;return!0}]]},any:{type:hn,overloads:[[[hn,hn],(c,[a,u])=>a.evaluate(c)||u.evaluate(c)],[sc(hn),(c,a)=>{for(let u of a)if(u.evaluate(c))return!0;return!1}]]},"!":[hn,[hn],(c,[a])=>!a.evaluate(c)],"is-supported-script":[hn,[mn],(c,[a])=>{let u=c.globals&&c.globals.isSupportedScript;return!u||u(a.evaluate(c))}],upcase:[mn,[mn],(c,[a])=>a.evaluate(c).toUpperCase()],downcase:[mn,[mn],(c,[a])=>a.evaluate(c).toLowerCase()],concat:[mn,sc(an),(c,a)=>a.map(u=>Wl(u.evaluate(c))).join("")],"resolved-locale":[mn,[nc],(c,[a])=>a.evaluate(c).resolvedLocale()]});class ai{constructor(a,u){var p;this.expression=a,this._warningHistory={},this._evaluator=new Qn,this._defaultValue=u?(p=u).type==="color"&&Md(p.default)?new Kn(0,0,0,0):p.type==="color"?Kn.parse(p.default)||null:p.type==="padding"?as.parse(p.default)||null:p.type==="variableAnchorOffsetCollection"?zs.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(a,u,p,_,w,C){return this._evaluator.globals=a,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=_,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)}evaluate(a,u,p,_,w,C){this._evaluator.globals=a,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=_,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=C||null;try{let M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new xi(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(M)} instead.`);return M}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console<"u"&&console.warn(M.message)),this._defaultValue}}}function ii(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Kc}function ac(c,a){let u=new dd(Kc,Kl,[],a?function(_){let w={color:Ki,string:mn,number:vt,enum:mn,boolean:hn,formatted:rr,padding:se,resolvedImage:B,variableAnchorOffsetCollection:z};return _.type==="array"?Z(w[_.value]||an,_.length):w[_.type]}(a):void 0),p=u.parse(c,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Zg(new ai(p,a)):Qc(u.errors)}class Dd{constructor(a,u){this.kind=a,this._styleExpression=u,this.isStateDependent=a!=="constant"&&!Ql(u.expression)}evaluateWithoutErrorHandling(a,u,p,_,w,C){return this._styleExpression.evaluateWithoutErrorHandling(a,u,p,_,w,C)}evaluate(a,u,p,_,w,C){return this._styleExpression.evaluate(a,u,p,_,w,C)}}class Qp{constructor(a,u,p,_){this.kind=a,this.zoomStops=p,this._styleExpression=u,this.isStateDependent=a!=="camera"&&!Ql(u.expression),this.interpolationType=_}evaluateWithoutErrorHandling(a,u,p,_,w,C){return this._styleExpression.evaluateWithoutErrorHandling(a,u,p,_,w,C)}evaluate(a,u,p,_,w,C){return this._styleExpression.evaluate(a,u,p,_,w,C)}interpolationFactor(a,u,p){return this.interpolationType?Er.interpolationFactor(this.interpolationType,a,u,p):0}}function Qg(c,a){let u=ac(c,a);if(u.result==="error")return u;let p=u.value.expression,_=_d(p);if(!_&&!Jc(a))return Qc([new ws("","data expressions not supported")]);let w=Jl(p,["zoom"]);if(!w&&!Yg(a))return Qc([new ws("","zoom expressions not supported")]);let C=Sd(p);return C||w?C instanceof ws?Qc([C]):C instanceof Er&&!Yp(a)?Qc([new ws("",'"interpolate" expressions cannot be used with this property')]):Zg(C?new Qp(_?"camera":"composite",u.value,C.labels,C instanceof Er?C.interpolation:void 0):new Dd(_?"constant":"source",u.value)):Qc([new ws("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Td{constructor(a,u){this._parameters=a,this._specification=u,bs(this,Kg(this._parameters,this._specification))}static deserialize(a){return new Td(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Sd(c){let a=null;if(c instanceof bd)a=Sd(c.result);else if(c instanceof yd){for(let u of c.args)if(a=Sd(u),a)break}else(c instanceof eu||c instanceof Er)&&c.input instanceof Ms&&c.input.name==="zoom"&&(a=c);return a instanceof ws||c.eachChild(u=>{let p=Sd(u);p instanceof ws?a=p:!a&&p?a=new ws("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&p&&a!==p&&(a=new ws("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function Od(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(let a of c.slice(1))if(!Od(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}let Jg={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Id(c){if(c==null)return{filter:()=>!0,needGeometry:!1};Od(c)||(c=Pd(c));let a=ac(c,Jg);if(a.result==="error")throw new Error(a.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,p,_)=>a.value.evaluate(u,p,{},_),needGeometry:Ed(c)}}function Xg(c,a){return c<a?-1:c>a?1:0}function Ed(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let a=1;a<c.length;a++)if(Ed(c[a]))return!0;return!1}function Pd(c){if(!c)return!0;let a=c[0];return c.length<=1?a!=="any":a==="=="?Jp(c[1],c[2],"=="):a==="!="?kd(Jp(c[1],c[2],"==")):a==="<"||a===">"||a==="<="||a===">="?Jp(c[1],c[2],a):a==="any"?(u=c.slice(1),["any"].concat(u.map(Pd))):a==="all"?["all"].concat(c.slice(1).map(Pd)):a==="none"?["all"].concat(c.slice(1).map(Pd).map(kd)):a==="in"?e_(c[1],c.slice(2)):a==="!in"?kd(e_(c[1],c.slice(2))):a==="has"?t_(c[1]):a==="!has"?kd(t_(c[1])):a!=="within"||c;var u}function Jp(c,a,u){switch(c){case"$type":return[`filter-type-${u}`,a];case"$id":return[`filter-id-${u}`,a];default:return[`filter-${u}`,c,a]}}function e_(c,a){if(a.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(u=>typeof u!=typeof a[0])?["filter-in-large",c,["literal",a.sort(Xg)]]:["filter-in-small",c,["literal",a]]}}function t_(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function kd(c){return["!",c]}function Xp(c){let a=typeof c;if(a==="number"||a==="boolean"||a==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let _="[";for(let w of c)_+=`${Xp(w)},`;return`${_}]`}let u=Object.keys(c).sort(),p="{";for(let _=0;_<u.length;_++)p+=`${JSON.stringify(u[_])}:${Xp(c[u[_]])},`;return`${p}}`}function Ub(c){let a="";for(let u of Ya)a+=`/${Xp(c[u])}`;return a}function n_(c){let a=c.value;return a?[new at(c.key,a,"constants have been deprecated as of v8")]:[]}function Pi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function So(c){if(Array.isArray(c))return c.map(So);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){let a={};for(let u in c)a[u]=So(c[u]);return a}return Pi(c)}function $r(c){let a=c.key,u=c.value,p=c.valueSpec||{},_=c.objectElementValidators||{},w=c.style,C=c.styleSpec,M=c.validateSpec,S=[],E=zn(u);if(E!=="object")return[new at(a,u,`object expected, ${E} found`)];for(let k in u){let R=k.split(".")[0],j=p[R]||p["*"],$;if(_[R])$=_[R];else if(p[R])$=M;else if(_["*"])$=_["*"];else{if(!p["*"]){S.push(new at(a,u[k],`unknown property "${k}"`));continue}$=M}S=S.concat($({key:(a&&`${a}.`)+k,value:u[k],valueSpec:j,style:w,styleSpec:C,object:u,objectKey:k,validateSpec:M},u))}for(let k in p)_[k]||p[k].required&&p[k].default===void 0&&u[k]===void 0&&S.push(new at(a,u,`missing required property "${k}"`));return S}function ef(c){let a=c.value,u=c.valueSpec,p=c.style,_=c.styleSpec,w=c.key,C=c.arrayElementValidator||c.validateSpec;if(zn(a)!=="array")return[new at(w,a,`array expected, ${zn(a)} found`)];if(u.length&&a.length!==u.length)return[new at(w,a,`array length ${u.length} expected, length ${a.length} found`)];if(u["min-length"]&&a.length<u["min-length"])return[new at(w,a,`array length at least ${u["min-length"]} expected, length ${a.length} found`)];let M={type:u.value,values:u.values};_.$version<7&&(M.function=u.function),zn(u.value)==="object"&&(M=u.value);let S=[];for(let E=0;E<a.length;E++)S=S.concat(C({array:a,arrayIndex:E,value:a[E],valueSpec:M,validateSpec:c.validateSpec,style:p,styleSpec:_,key:`${w}[${E}]`}));return S}function Ad(c){let a=c.key,u=c.value,p=c.valueSpec,_=zn(u);return _==="number"&&u!=u&&(_="NaN"),_!=="number"?[new at(a,u,`number expected, ${_} found`)]:"minimum"in p&&u<p.minimum?[new at(a,u,`${u} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&u>p.maximum?[new at(a,u,`${u} is greater than the maximum value ${p.maximum}`)]:[]}function i_(c){let a=c.valueSpec,u=Pi(c.value.type),p,_,w,C={},M=u!=="categorical"&&c.value.property===void 0,S=!M,E=zn(c.value.stops)==="array"&&zn(c.value.stops[0])==="array"&&zn(c.value.stops[0][0])==="object",k=$r({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function($){if(u==="identity")return[new at($.key,$.value,'identity function may not have a "stops" property')];let G=[],X=$.value;return G=G.concat(ef({key:$.key,value:X,valueSpec:$.valueSpec,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec,arrayElementValidator:R})),zn(X)==="array"&&X.length===0&&G.push(new at($.key,X,"array must have at least one stop")),G},default:function($){return $.validateSpec({key:$.key,value:$.value,valueSpec:a,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec})}}});return u==="identity"&&M&&k.push(new at(c.key,c.value,'missing required property "property"')),u==="identity"||c.value.stops||k.push(new at(c.key,c.value,'missing required property "stops"')),u==="exponential"&&c.valueSpec.expression&&!Yp(c.valueSpec)&&k.push(new at(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(S&&!Jc(c.valueSpec)?k.push(new at(c.key,c.value,"property functions not supported")):M&&!Yg(c.valueSpec)&&k.push(new at(c.key,c.value,"zoom functions not supported"))),u!=="categorical"&&!E||c.value.property!==void 0||k.push(new at(c.key,c.value,'"property" property is required')),k;function R($){let G=[],X=$.value,re=$.key;if(zn(X)!=="array")return[new at(re,X,`array expected, ${zn(X)} found`)];if(X.length!==2)return[new at(re,X,`array length 2 expected, length ${X.length} found`)];if(E){if(zn(X[0])!=="object")return[new at(re,X,`object expected, ${zn(X[0])} found`)];if(X[0].zoom===void 0)return[new at(re,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new at(re,X,"object stop key must have value")];if(w&&w>Pi(X[0].zoom))return[new at(re,X[0].zoom,"stop zoom values must appear in ascending order")];Pi(X[0].zoom)!==w&&(w=Pi(X[0].zoom),_=void 0,C={}),G=G.concat($r({key:`${re}[0]`,value:X[0],valueSpec:{zoom:{}},validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{zoom:Ad,value:j}}))}else G=G.concat(j({key:`${re}[0]`,value:X[0],valueSpec:{},validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec},X));return ii(So(X[1]))?G.concat([new at(`${re}[1]`,X[1],"expressions are not allowed in function stops.")]):G.concat($.validateSpec({key:`${re}[1]`,value:X[1],valueSpec:a,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec}))}function j($,G){let X=zn($.value),re=Pi($.value),le=$.value!==null?$.value:G;if(p){if(X!==p)return[new at($.key,le,`${X} stop domain type must match previous stop domain type ${p}`)]}else p=X;if(X!=="number"&&X!=="string"&&X!=="boolean")return[new at($.key,le,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&u!=="categorical"){let xe=`number expected, ${X} found`;return Jc(a)&&u===void 0&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new at($.key,le,xe)]}return u!=="categorical"||X!=="number"||isFinite(re)&&Math.floor(re)===re?u!=="categorical"&&X==="number"&&_!==void 0&&re<_?[new at($.key,le,"stop domain values must appear in ascending order")]:(_=re,u==="categorical"&&re in C?[new at($.key,le,"stop domain values must be unique")]:(C[re]=!0,[])):[new at($.key,le,`integer expected, found ${re}`)]}}function Oo(c){let a=(c.expressionContext==="property"?Qg:ac)(So(c.value),c.valueSpec);if(a.result==="error")return a.value.map(p=>new at(`${c.key}${p.key}`,c.value,p.message));let u=a.value.expression||a.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!u.outputDefined())return[new at(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Ql(u))return[new at(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Ql(u))return[new at(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Jl(u,["zoom","feature-state"]))return[new at(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!_d(u))return[new at(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Io(c){let a=c.key,u=c.value,p=c.valueSpec,_=[];return Array.isArray(p.values)?p.values.indexOf(Pi(u))===-1&&_.push(new at(a,u,`expected one of [${p.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(p.values).indexOf(Pi(u))===-1&&_.push(new at(a,u,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(u)} found`)),_}function Xc(c){return Od(So(c.value))?Oo(bs({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):tf(c)}function tf(c){let a=c.value,u=c.key;if(zn(a)!=="array")return[new at(u,a,`array expected, ${zn(a)} found`)];let p=c.styleSpec,_,w=[];if(a.length<1)return[new at(u,a,"filter array must have at least 1 element")];switch(w=w.concat(Io({key:`${u}[0]`,value:a[0],valueSpec:p.filter_operator,style:c.style,styleSpec:c.styleSpec})),Pi(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&Pi(a[1])==="$type"&&w.push(new at(u,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&w.push(new at(u,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(_=zn(a[1]),_!=="string"&&w.push(new at(`${u}[1]`,a[1],`string expected, ${_} found`)));for(let C=2;C<a.length;C++)_=zn(a[C]),Pi(a[1])==="$type"?w=w.concat(Io({key:`${u}[${C}]`,value:a[C],valueSpec:p.geometry_type,style:c.style,styleSpec:c.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&w.push(new at(`${u}[${C}]`,a[C],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let C=1;C<a.length;C++)w=w.concat(tf({key:`${u}[${C}]`,value:a[C],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":_=zn(a[1]),a.length!==2?w.push(new at(u,a,`filter array for "${a[0]}" operator must have 2 elements`)):_!=="string"&&w.push(new at(`${u}[1]`,a[1],`string expected, ${_} found`));break;case"within":_=zn(a[1]),a.length!==2?w.push(new at(u,a,`filter array for "${a[0]}" operator must have 2 elements`)):_!=="object"&&w.push(new at(`${u}[1]`,a[1],`object expected, ${_} found`))}return w}function Rd(c,a){let u=c.key,p=c.validateSpec,_=c.style,w=c.styleSpec,C=c.value,M=c.objectKey,S=w[`${a}_${c.layerType}`];if(!S)return[];let E=M.match(/^(.*)-transition$/);if(a==="paint"&&E&&S[E[1]]&&S[E[1]].transition)return p({key:u,value:C,valueSpec:w.transition,style:_,styleSpec:w});let k=c.valueSpec||S[M];if(!k)return[new at(u,C,`unknown property "${M}"`)];let R;if(zn(C)==="string"&&Jc(k)&&!k.tokens&&(R=/^{([^}]+)}$/.exec(C)))return[new at(u,C,`"${M}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(R[1])} }\`.`)];let j=[];return c.layerType==="symbol"&&(M==="text-field"&&_&&!_.glyphs&&j.push(new at(u,C,'use of "text-field" requires a style "glyphs" property')),M==="text-font"&&Md(So(C))&&Pi(C.type)==="identity"&&j.push(new at(u,C,'"text-font" does not support identity functions'))),j.concat(p({key:c.key,value:C,valueSpec:k,style:_,styleSpec:w,expressionContext:"property",propertyType:a,propertyKey:M}))}function nf(c){return Rd(c,"paint")}function rf(c){return Rd(c,"layout")}function nu(c){let a=[],u=c.value,p=c.key,_=c.style,w=c.styleSpec;u.type||u.ref||a.push(new at(p,u,'either "type" or "ref" is required'));let C=Pi(u.type),M=Pi(u.ref);if(u.id){let S=Pi(u.id);for(let E=0;E<c.arrayIndex;E++){let k=_.layers[E];Pi(k.id)===S&&a.push(new at(p,u.id,`duplicate layer id "${u.id}", previously used at line ${k.id.__line__}`))}}if("ref"in u){let S;["type","source","source-layer","filter","layout"].forEach(E=>{E in u&&a.push(new at(p,u[E],`"${E}" is prohibited for ref layers`))}),_.layers.forEach(E=>{Pi(E.id)===M&&(S=E)}),S?S.ref?a.push(new at(p,u.ref,"ref cannot reference another ref layer")):C=Pi(S.type):a.push(new at(p,u.ref,`ref layer "${M}" not found`))}else if(C!=="background")if(u.source){let S=_.sources&&_.sources[u.source],E=S&&Pi(S.type);S?E==="vector"&&C==="raster"?a.push(new at(p,u.source,`layer "${u.id}" requires a raster source`)):E!=="raster-dem"&&C==="hillshade"?a.push(new at(p,u.source,`layer "${u.id}" requires a raster-dem source`)):E==="raster"&&C!=="raster"?a.push(new at(p,u.source,`layer "${u.id}" requires a vector source`)):E!=="vector"||u["source-layer"]?E==="raster-dem"&&C!=="hillshade"?a.push(new at(p,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):C!=="line"||!u.paint||!u.paint["line-gradient"]||E==="geojson"&&S.lineMetrics||a.push(new at(p,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new at(p,u,`layer "${u.id}" must specify a "source-layer"`)):a.push(new at(p,u.source,`source "${u.source}" not found`))}else a.push(new at(p,u,'missing required property "source"'));return a=a.concat($r({key:p,value:u,valueSpec:w.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${p}.type`,value:u.type,valueSpec:w.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:u,objectKey:"type"}),filter:Xc,layout:S=>$r({layer:u,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":E=>rf(bs({layerType:C},E))}}),paint:S=>$r({layer:u,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":E=>nf(bs({layerType:C},E))}})}})),a}function oc(c){let a=c.value,u=c.key,p=zn(a);return p!=="string"?[new at(u,a,`string expected, ${p} found`)]:[]}let r_={promoteId:function({key:c,value:a}){if(zn(a)==="string")return oc({key:c,value:a});{let u=[];for(let p in a)u.push(...oc({key:`${c}.${p}`,value:a[p]}));return u}}};function s_(c){let a=c.value,u=c.key,p=c.styleSpec,_=c.style,w=c.validateSpec;if(!a.type)return[new at(u,a,'"type" is required')];let C=Pi(a.type),M;switch(C){case"vector":case"raster":return M=$r({key:u,value:a,valueSpec:p[`source_${C.replace("-","_")}`],style:c.style,styleSpec:p,objectElementValidators:r_,validateSpec:w}),M;case"raster-dem":return M=function(S){var E;let k=(E=S.sourceName)!==null&&E!==void 0?E:"",R=S.value,j=S.styleSpec,$=j.source_raster_dem,G=S.style,X=[],re=zn(R);if(R===void 0)return X;if(re!=="object")return X.push(new at("source_raster_dem",R,`object expected, ${re} found`)),X;let le=Pi(R.encoding)==="custom",xe=["redFactor","greenFactor","blueFactor","baseShift"],ue=S.value.encoding?`"${S.value.encoding}"`:"Default";for(let ve in R)!le&&xe.includes(ve)?X.push(new at(ve,R[ve],`In "${k}": "${ve}" is only valid when "encoding" is set to "custom". ${ue} encoding found`)):$[ve]?X=X.concat(S.validateSpec({key:ve,value:R[ve],valueSpec:$[ve],validateSpec:S.validateSpec,style:G,styleSpec:j})):X.push(new at(ve,R[ve],`unknown property "${ve}"`));return X}({sourceName:u,value:a,style:c.style,styleSpec:p,validateSpec:w}),M;case"geojson":if(M=$r({key:u,value:a,valueSpec:p.source_geojson,style:_,styleSpec:p,validateSpec:w,objectElementValidators:r_}),a.cluster)for(let S in a.clusterProperties){let[E,k]=a.clusterProperties[S],R=typeof E=="string"?[E,["accumulated"],["get",S]]:E;M.push(...Oo({key:`${u}.${S}.map`,value:k,validateSpec:w,expressionContext:"cluster-map"})),M.push(...Oo({key:`${u}.${S}.reduce`,value:R,validateSpec:w,expressionContext:"cluster-reduce"}))}return M;case"video":return $r({key:u,value:a,valueSpec:p.source_video,style:_,validateSpec:w,styleSpec:p});case"image":return $r({key:u,value:a,valueSpec:p.source_image,style:_,validateSpec:w,styleSpec:p});case"canvas":return[new at(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Io({key:`${u}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_,validateSpec:w,styleSpec:p})}}function a_(c){let a=c.value,u=c.styleSpec,p=u.light,_=c.style,w=[],C=zn(a);if(a===void 0)return w;if(C!=="object")return w=w.concat([new at("light",a,`object expected, ${C} found`)]),w;for(let M in a){let S=M.match(/^(.*)-transition$/);w=w.concat(S&&p[S[1]]&&p[S[1]].transition?c.validateSpec({key:M,value:a[M],valueSpec:u.transition,validateSpec:c.validateSpec,style:_,styleSpec:u}):p[M]?c.validateSpec({key:M,value:a[M],valueSpec:p[M],validateSpec:c.validateSpec,style:_,styleSpec:u}):[new at(M,a[M],`unknown property "${M}"`)])}return w}function o_(c){let a=c.value,u=c.styleSpec,p=u.sky,_=c.style,w=zn(a);if(a===void 0)return[];if(w!=="object")return[new at("sky",a,`object expected, ${w} found`)];let C=[];for(let M in a)C=C.concat(p[M]?wa({key:M,value:a[M],valueSpec:p[M],style:_,styleSpec:u}):[new at(M,a[M],`unknown property "${M}"`)]);return C}function iu(c){let a=c.value,u=c.styleSpec,p=u.terrain,_=c.style,w=[],C=zn(a);if(a===void 0)return w;if(C!=="object")return w=w.concat([new at("terrain",a,`object expected, ${C} found`)]),w;for(let M in a)w=w.concat(p[M]?c.validateSpec({key:M,value:a[M],valueSpec:p[M],validateSpec:c.validateSpec,style:_,styleSpec:u}):[new at(M,a[M],`unknown property "${M}"`)]);return w}function ru(c){let a=[],u=c.value,p=c.key;if(Array.isArray(u)){let _=[],w=[];for(let C in u)u[C].id&&_.includes(u[C].id)&&a.push(new at(p,u,`all the sprites' ids must be unique, but ${u[C].id} is duplicated`)),_.push(u[C].id),u[C].url&&w.includes(u[C].url)&&a.push(new at(p,u,`all the sprites' URLs must be unique, but ${u[C].url} is duplicated`)),w.push(u[C].url),a=a.concat($r({key:`${p}[${C}]`,value:u[C],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return a}return oc({key:p,value:u})}let os={"*":()=>[],array:ef,boolean:function(c){let a=c.value,u=c.key,p=zn(a);return p!=="boolean"?[new at(u,a,`boolean expected, ${p} found`)]:[]},number:Ad,color:function(c){let a=c.key,u=c.value,p=zn(u);return p!=="string"?[new at(a,u,`color expected, ${p} found`)]:Kn.parse(String(u))?[]:[new at(a,u,`color expected, "${u}" found`)]},constants:n_,enum:Io,filter:Xc,function:i_,layer:nu,object:$r,source:s_,light:a_,sky:o_,terrain:iu,string:oc,formatted:function(c){return oc(c).length===0?[]:Oo(c)},resolvedImage:function(c){return oc(c).length===0?[]:Oo(c)},padding:function(c){let a=c.key,u=c.value;if(zn(u)==="array"){if(u.length<1||u.length>4)return[new at(a,u,`padding requires 1 to 4 values; ${u.length} values found`)];let p={type:"number"},_=[];for(let w=0;w<u.length;w++)_=_.concat(c.validateSpec({key:`${a}[${w}]`,value:u[w],validateSpec:c.validateSpec,valueSpec:p}));return _}return Ad({key:a,value:u,valueSpec:{}})},variableAnchorOffsetCollection:function(c){let a=c.key,u=c.value,p=zn(u),_=c.styleSpec;if(p!=="array"||u.length<1||u.length%2!=0)return[new at(a,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let C=0;C<u.length;C+=2)w=w.concat(Io({key:`${a}[${C}]`,value:u[C],valueSpec:_.layout_symbol["text-anchor"]})),w=w.concat(ef({key:`${a}[${C+1}]`,value:u[C+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:_}));return w},sprite:ru};function wa(c){let a=c.value,u=c.valueSpec,p=c.styleSpec;return c.validateSpec=wa,u.expression&&Md(Pi(a))?i_(c):u.expression&&ii(So(a))?Oo(c):u.type&&os[u.type]?os[u.type](c):$r(bs({},c,{valueSpec:u.type?p[u.type]:u}))}function sf(c){let a=c.value,u=c.key,p=oc(c);return p.length||(a.indexOf("{fontstack}")===-1&&p.push(new at(u,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&p.push(new at(u,a,'"glyphs" url must include a "{range}" token'))),p}function na(c,a=Be){let u=[];return u=u.concat(wa({key:"",value:c,valueSpec:a.$root,styleSpec:a,style:c,validateSpec:wa,objectElementValidators:{glyphs:sf,"*":()=>[]}})),c.constants&&(u=u.concat(n_({key:"constants",value:c.constants,style:c,styleSpec:a,validateSpec:wa}))),el(u)}function Ca(c){return function(a){return c(Pn(it({},a),{validateSpec:wa}))}}function el(c){return[].concat(c).sort((a,u)=>a.line-u.line)}function ia(c){return function(...a){return el(c.apply(this,a))}}na.source=ia(Ca(s_)),na.sprite=ia(Ca(ru)),na.glyphs=ia(Ca(sf)),na.light=ia(Ca(a_)),na.sky=ia(Ca(o_)),na.terrain=ia(Ca(iu)),na.layer=ia(Ca(nu)),na.filter=ia(Ca(Xc)),na.paintProperty=ia(Ca(nf)),na.layoutProperty=ia(Ca(rf));let cc=na,$b=cc.light,af=cc.paintProperty,Hb=cc.layoutProperty;function tl(c,a){let u=!1;if(a&&a.length)for(let p of a)c.fire(new js(new Error(p.message))),u=!0;return u}class su{constructor(a,u,p){let _=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;let C=new Int32Array(this.arrayBuffer);a=C[0],this.d=(u=C[1])+2*(p=C[2]);for(let S=0;S<this.d*this.d;S++){let E=C[3+S],k=C[3+S+1];_.push(E===k?null:C.subarray(E,k))}let M=C[3+_.length+1];this.keys=C.subarray(C[3+_.length],M),this.bboxes=C.subarray(M),this.insert=this._insertReadonly}else{this.d=u+2*p;for(let C=0;C<this.d*this.d;C++)_.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=a,this.padding=p,this.scale=u/a,this.uid=0;let w=p/u*a;this.min=-w,this.max=a+w}insert(a,u,p,_,w){this._forEachCell(u,p,_,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,u,p,_,w,C){this.cells[w].push(C)}query(a,u,p,_,w){let C=this.min,M=this.max;if(a<=C&&u<=C&&M<=p&&M<=_&&!w)return Array.prototype.slice.call(this.keys);{let S=[];return this._forEachCell(a,u,p,_,this._queryCell,S,{},w),S}}_queryCell(a,u,p,_,w,C,M,S){let E=this.cells[w];if(E!==null){let k=this.keys,R=this.bboxes;for(let j=0;j<E.length;j++){let $=E[j];if(M[$]===void 0){let G=4*$;(S?S(R[G+0],R[G+1],R[G+2],R[G+3]):a<=R[G+2]&&u<=R[G+3]&&p>=R[G+0]&&_>=R[G+1])?(M[$]=!0,C.push(k[$])):M[$]=!1}}}}_forEachCell(a,u,p,_,w,C,M,S){let E=this._convertToCellCoord(a),k=this._convertToCellCoord(u),R=this._convertToCellCoord(p),j=this._convertToCellCoord(_);for(let $=E;$<=R;$++)for(let G=k;G<=j;G++){let X=this.d*G+$;if((!S||S(this._convertFromCellCoord($),this._convertFromCellCoord(G),this._convertFromCellCoord($+1),this._convertFromCellCoord(G+1)))&&w.call(this,a,u,p,_,X,C,M,S))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let a=this.cells,u=3+this.cells.length+1+1,p=0;for(let C=0;C<this.cells.length;C++)p+=this.cells[C].length;let _=new Int32Array(u+p+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let w=u;for(let C=0;C<a.length;C++){let M=a[C];_[3+C]=w,_.set(M,w),w+=M.length}return _[3+a.length]=w,_.set(this.keys,w),w+=this.keys.length,_[3+a.length+1]=w,_.set(this.bboxes,w),w+=this.bboxes.length,_.buffer}static serialize(a,u){let p=a.toArrayBuffer();return u&&u.push(p),{buffer:p}}static deserialize(a){return new su(a.buffer)}}let xa={};function Ot(c,a,u={}){if(xa[c])throw new Error(`${c} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:c,writeable:!1}),xa[c]={klass:a,omit:u.omit||[],shallow:u.shallow||[]}}Ot("Object",Object),Ot("TransferableGridIndex",su),Ot("Color",Kn),Ot("Error",Error),Ot("AJAXError",In),Ot("ResolvedImage",Us),Ot("StylePropertyFunction",Td),Ot("StyleExpression",ai,{omit:["_evaluator"]}),Ot("ZoomDependentExpression",Qp),Ot("ZoomConstantExpression",Dd),Ot("CompoundExpression",Ms,{omit:["_evaluate"]});for(let c in Kc)Kc[c]._classRegistryKey||Ot(`Expression_${c}`,Kc[c]);function Fd(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function nl(c,a){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error)return c;if(Fd(c)||Te(c))return a&&a.push(c),c;if(ArrayBuffer.isView(c)){let u=c;return a&&a.push(u.buffer),u}if(c instanceof ImageData)return a&&a.push(c.data.buffer),c;if(Array.isArray(c)){let u=[];for(let p of c)u.push(nl(p,a));return u}if(typeof c=="object"){let u=c.constructor,p=u._classRegistryKey;if(!p)throw new Error(`can't serialize object of unregistered class ${u.name}`);if(!xa[p])throw new Error(`${p} is not registered.`);let _=u.serialize?u.serialize(c,a):{};if(u.serialize){if(a&&_===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let w in c){if(!c.hasOwnProperty(w)||xa[p].omit.indexOf(w)>=0)continue;let C=c[w];_[w]=xa[p].shallow.indexOf(w)>=0?C:nl(C,a)}c instanceof Error&&(_.message=c.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(_.$name=p),_}throw new Error("can't serialize object of type "+typeof c)}function il(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||Fd(c)||Te(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(il);if(typeof c=="object"){let a=c.$name||"Object";if(!xa[a])throw new Error(`can't deserialize unregistered class ${a}`);let{klass:u}=xa[a];if(!u)throw new Error(`can't deserialize unregistered class ${a}`);if(u.deserialize)return u.deserialize(c);let p=Object.create(u.prototype);for(let _ of Object.keys(c)){if(_==="$name")continue;let w=c[_];p[_]=xa[a].shallow.indexOf(_)>=0?w:il(w)}return p}throw new Error("can't deserialize object of type "+typeof c)}class c_{constructor(){this.first=!0}update(a,u){let p=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=u),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=p,!0))}}let Mt={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function rl(c){for(let a of c)if(Ld(a.charCodeAt(0)))return!0;return!1}function l_(c){for(let a of c)if(!u_(a.charCodeAt(0)))return!1;return!0}function u_(c){return!(Mt.Arabic(c)||Mt["Arabic Supplement"](c)||Mt["Arabic Extended-A"](c)||Mt["Arabic Presentation Forms-A"](c)||Mt["Arabic Presentation Forms-B"](c))}function Ld(c){return!(c!==746&&c!==747&&(c<4352||!(Mt["Bopomofo Extended"](c)||Mt.Bopomofo(c)||Mt["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Mt["CJK Compatibility Ideographs"](c)||Mt["CJK Compatibility"](c)||Mt["CJK Radicals Supplement"](c)||Mt["CJK Strokes"](c)||!(!Mt["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Mt["CJK Unified Ideographs Extension A"](c)||Mt["CJK Unified Ideographs"](c)||Mt["Enclosed CJK Letters and Months"](c)||Mt["Hangul Compatibility Jamo"](c)||Mt["Hangul Jamo Extended-A"](c)||Mt["Hangul Jamo Extended-B"](c)||Mt["Hangul Jamo"](c)||Mt["Hangul Syllables"](c)||Mt.Hiragana(c)||Mt["Ideographic Description Characters"](c)||Mt.Kanbun(c)||Mt["Kangxi Radicals"](c)||Mt["Katakana Phonetic Extensions"](c)||Mt.Katakana(c)&&c!==12540||!(!Mt["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Mt["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Mt["Unified Canadian Aboriginal Syllabics"](c)||Mt["Unified Canadian Aboriginal Syllabics Extended"](c)||Mt["Vertical Forms"](c)||Mt["Yijing Hexagram Symbols"](c)||Mt["Yi Syllables"](c)||Mt["Yi Radicals"](c))))}function of(c){return!(Ld(c)||function(a){return!!(Mt["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||Mt["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||Mt["Letterlike Symbols"](a)||Mt["Number Forms"](a)||Mt["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||Mt["Control Pictures"](a)&&a!==9251||Mt["Optical Character Recognition"](a)||Mt["Enclosed Alphanumerics"](a)||Mt["Geometric Shapes"](a)||Mt["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||Mt["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||Mt["CJK Symbols and Punctuation"](a)||Mt.Katakana(a)||Mt["Private Use Area"](a)||Mt["CJK Compatibility Forms"](a)||Mt["Small Form Variants"](a)||Mt["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(c))}function Nd(c){return c>=1424&&c<=2303||Mt["Arabic Presentation Forms-A"](c)||Mt["Arabic Presentation Forms-B"](c)}function d_(c,a){return!(!a&&Nd(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Mt.Khmer(c))}function qb(c){for(let a of c)if(Nd(a.charCodeAt(0)))return!0;return!1}let Eo=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class gi{constructor(a,u){this.zoom=a,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new c_,this.transition={})}isSupportedScript(a){return function(u,p){for(let _ of u)if(!d_(_.charCodeAt(0),p))return!1;return!0}(a,Eo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let a=this.zoom,u=a-Math.floor(a),p=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*u}}}class au{constructor(a,u){this.property=a,this.value=u,this.expression=function(p,_){if(Md(p))return new Td(p,_);if(ii(p)){let w=Qg(p,_);if(w.result==="error")throw new Error(w.value.map(C=>`${C.key}: ${C.message}`).join(", "));return w.value}{let w=p;return _.type==="color"&&typeof p=="string"?w=Kn.parse(p):_.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(p)&&(w=zs.parse(p)):w=as.parse(p),{kind:"constant",evaluate:()=>w}}}(u===void 0?a.specification.default:u,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,u,p){return this.property.possiblyEvaluate(this,a,u,p)}}class Bd{constructor(a){this.property=a,this.value=new au(a,void 0)}transitioned(a,u){return new h_(this.property,this.value,u,We({},a.transition,this.transition),a.now)}untransitioned(){return new h_(this.property,this.value,null,{},0)}}class cf{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return rt(this._values[a].value.value)}setValue(a,u){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Bd(this._values[a].property)),this._values[a].value=new au(this._values[a].property,u===null?void 0:rt(u))}getTransition(a){return rt(this._values[a].transition)}setTransition(a,u){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Bd(this._values[a].property)),this._values[a].transition=rt(u)||void 0}serialize(){let a={};for(let u of Object.keys(this._values)){let p=this.getValue(u);p!==void 0&&(a[u]=p);let _=this.getTransition(u);_!==void 0&&(a[`${u}-transition`]=_)}return a}transitioned(a,u){let p=new p_(this._properties);for(let _ of Object.keys(this._values))p._values[_]=this._values[_].transitioned(a,u._values[_]);return p}untransitioned(){let a=new p_(this._properties);for(let u of Object.keys(this._values))a._values[u]=this._values[u].untransitioned();return a}}class h_{constructor(a,u,p,_,w){this.property=a,this.value=u,this.begin=w+_.delay||0,this.end=this.begin+_.duration||0,a.specification.transition&&(_.delay||_.duration)&&(this.prior=p)}possiblyEvaluate(a,u,p){let _=a.now||0,w=this.value.possiblyEvaluate(a,u,p),C=this.prior;if(C){if(_>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(_<this.begin)return C.possiblyEvaluate(a,u,p);{let M=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(a,u,p),w,function(S){if(S<=0)return 0;if(S>=1)return 1;let E=S*S,k=E*S;return 4*(S<.5?k:3*(S-E)+k-.75)}(M))}}return w}}class p_{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,u,p){let _=new ou(this._properties);for(let w of Object.keys(this._values))_._values[w]=this._values[w].possiblyEvaluate(a,u,p);return _}hasTransition(){for(let a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class f_{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}hasValue(a){return this._values[a].value!==void 0}getValue(a){return rt(this._values[a].value)}setValue(a,u){this._values[a]=new au(this._values[a].property,u===null?void 0:rt(u))}serialize(){let a={};for(let u of Object.keys(this._values)){let p=this.getValue(u);p!==void 0&&(a[u]=p)}return a}possiblyEvaluate(a,u,p){let _=new ou(this._properties);for(let w of Object.keys(this._values))_._values[w]=this._values[w].possiblyEvaluate(a,u,p);return _}}class ra{constructor(a,u,p){this.property=a,this.value=u,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,u,p,_){return this.property.evaluate(this.value,this.parameters,a,u,p,_)}}class ou{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Vt{constructor(a){this.specification=a}possiblyEvaluate(a,u){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(u)}interpolate(a,u,p){let _=Ur[this.specification.type];return _?_(a,u,p):a}}class Gt{constructor(a,u){this.specification=a,this.overrides=u}possiblyEvaluate(a,u,p,_){return new ra(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(u,null,{},p,_)}:a.expression,u)}interpolate(a,u,p){if(a.value.kind!=="constant"||u.value.kind!=="constant")return a;if(a.value.value===void 0||u.value.value===void 0)return new ra(this,{kind:"constant",value:void 0},a.parameters);let _=Ur[this.specification.type];if(_){let w=_(a.value.value,u.value.value,p);return new ra(this,{kind:"constant",value:w},a.parameters)}return a}evaluate(a,u,p,_,w,C){return a.kind==="constant"?a.value:a.evaluate(u,p,_,w,C)}}class jd extends Gt{possiblyEvaluate(a,u,p,_){if(a.value===void 0)return new ra(this,{kind:"constant",value:void 0},u);if(a.expression.kind==="constant"){let w=a.expression.evaluate(u,null,{},p,_),C=a.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,M=this._calculate(C,C,C,u);return new ra(this,{kind:"constant",value:M},u)}if(a.expression.kind==="camera"){let w=this._calculate(a.expression.evaluate({zoom:u.zoom-1}),a.expression.evaluate({zoom:u.zoom}),a.expression.evaluate({zoom:u.zoom+1}),u);return new ra(this,{kind:"constant",value:w},u)}return new ra(this,a.expression,u)}evaluate(a,u,p,_,w,C){if(a.kind==="source"){let M=a.evaluate(u,p,_,w,C);return this._calculate(M,M,M,u)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(u.zoom)-1},p,_),a.evaluate({zoom:Math.floor(u.zoom)},p,_),a.evaluate({zoom:Math.floor(u.zoom)+1},p,_),u):a.value}_calculate(a,u,p,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:a,to:u}:{from:p,to:u}}interpolate(a){return a}}class cu{constructor(a){this.specification=a}possiblyEvaluate(a,u,p,_){if(a.value!==void 0){if(a.expression.kind==="constant"){let w=a.expression.evaluate(u,null,{},p,_);return this._calculate(w,w,w,u)}return this._calculate(a.expression.evaluate(new gi(Math.floor(u.zoom-1),u)),a.expression.evaluate(new gi(Math.floor(u.zoom),u)),a.expression.evaluate(new gi(Math.floor(u.zoom+1),u)),u)}}_calculate(a,u,p,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:a,to:u}:{from:p,to:u}}interpolate(a){return a}}class lf{constructor(a){this.specification=a}possiblyEvaluate(a,u,p,_){return!!a.expression.evaluate(u,null,{},p,_)}interpolate(){return!1}}class cs{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let u in a){let p=a[u];p.specification.overridable&&this.overridableProperties.push(u);let _=this.defaultPropertyValues[u]=new au(p,void 0),w=this.defaultTransitionablePropertyValues[u]=new Bd(p);this.defaultTransitioningPropertyValues[u]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=_.possiblyEvaluate({})}}}Ot("DataDrivenProperty",Gt),Ot("DataConstantProperty",Vt),Ot("CrossFadedDataDrivenProperty",jd),Ot("CrossFadedProperty",cu),Ot("ColorRampProperty",lf);let uf="-transition";class sa extends Za{constructor(a,u){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),u.layout&&(this._unevaluatedLayout=new f_(u.layout)),u.paint)){this._transitionablePaint=new cf(u.paint);for(let p in a.paint)this.setPaintProperty(p,a.paint[p],{validate:!1});for(let p in a.layout)this.setLayoutProperty(p,a.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ou(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,u,p={}){u!=null&&this._validate(Hb,`layers.${this.id}.layout.${a}`,a,u,p)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,u):this.visibility=u)}getPaintProperty(a){return a.endsWith(uf)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,u,p={}){if(u!=null&&this._validate(af,`layers.${this.id}.paint.${a}`,a,u,p))return!1;if(a.endsWith(uf))return this._transitionablePaint.setTransition(a.slice(0,-11),u||void 0),!1;{let _=this._transitionablePaint._values[a],w=_.property.specification["property-type"]==="cross-faded-data-driven",C=_.value.isDataDriven(),M=_.value;this._transitionablePaint.setValue(a,u),this._handleSpecialPaintPropertyUpdate(a);let S=this._transitionablePaint._values[a].value;return S.isDataDriven()||C||w||this._handleOverridablePaintPropertyUpdate(a,M,S)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,u,p){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,u){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,u)}serialize(){let a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),Pt(a,(u,p)=>!(u===void 0||p==="layout"&&!Object.keys(u).length||p==="paint"&&!Object.keys(u).length))}_validate(a,u,p,_,w={}){return(!w||w.validate!==!1)&&tl(this,a.call(cc,{key:u,layerType:this.type,objectKey:p,value:_,styleSpec:Be,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let a in this.paint._values){let u=this.paint.get(a);if(u instanceof ra&&Jc(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}let m_={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class lu{constructor(a,u){this._structArray=a,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ki{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,u){return a._trim(),u&&(a.isTransferred=!0,u.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){let u=Object.create(this.prototype);return u.arrayBuffer=a.arrayBuffer,u.length=a.length,u.capacity=a.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function qi(c,a=1){let u=0,p=0;return{members:c.map(_=>{let w=m_[_.type].BYTES_PER_ELEMENT,C=u=g_(u,Math.max(a,w)),M=_.components||1;return p=Math.max(p,w),u+=w*M,{name:_.name,type:_.type,components:M,offset:C}}),size:g_(u,Math.max(p,a)),alignment:a}}function g_(c,a){return Math.ceil(c/a)*a}class uu extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u){let p=this.length;return this.resize(p+1),this.emplace(p,a,u)}emplace(a,u,p){let _=2*a;return this.int16[_+0]=u,this.int16[_+1]=p,a}}uu.prototype.bytesPerElement=4,Ot("StructArrayLayout2i4",uu);class Ja extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,p){let _=this.length;return this.resize(_+1),this.emplace(_,a,u,p)}emplace(a,u,p,_){let w=3*a;return this.int16[w+0]=u,this.int16[w+1]=p,this.int16[w+2]=_,a}}Ja.prototype.bytesPerElement=6,Ot("StructArrayLayout3i6",Ja);class df extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,p,_){let w=this.length;return this.resize(w+1),this.emplace(w,a,u,p,_)}emplace(a,u,p,_,w){let C=4*a;return this.int16[C+0]=u,this.int16[C+1]=p,this.int16[C+2]=_,this.int16[C+3]=w,a}}df.prototype.bytesPerElement=8,Ot("StructArrayLayout4i8",df);class hf extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,p,_,w,C){let M=this.length;return this.resize(M+1),this.emplace(M,a,u,p,_,w,C)}emplace(a,u,p,_,w,C,M){let S=6*a;return this.int16[S+0]=u,this.int16[S+1]=p,this.int16[S+2]=_,this.int16[S+3]=w,this.int16[S+4]=C,this.int16[S+5]=M,a}}hf.prototype.bytesPerElement=12,Ot("StructArrayLayout2i4i12",hf);class pf extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,p,_,w,C){let M=this.length;return this.resize(M+1),this.emplace(M,a,u,p,_,w,C)}emplace(a,u,p,_,w,C,M){let S=4*a,E=8*a;return this.int16[S+0]=u,this.int16[S+1]=p,this.uint8[E+4]=_,this.uint8[E+5]=w,this.uint8[E+6]=C,this.uint8[E+7]=M,a}}pf.prototype.bytesPerElement=8,Ot("StructArrayLayout2i4ub8",pf);class du extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u){let p=this.length;return this.resize(p+1),this.emplace(p,a,u)}emplace(a,u,p){let _=2*a;return this.float32[_+0]=u,this.float32[_+1]=p,a}}du.prototype.bytesPerElement=8,Ot("StructArrayLayout2f8",du);class Vd extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,p,_,w,C,M,S,E,k){let R=this.length;return this.resize(R+1),this.emplace(R,a,u,p,_,w,C,M,S,E,k)}emplace(a,u,p,_,w,C,M,S,E,k,R){let j=10*a;return this.uint16[j+0]=u,this.uint16[j+1]=p,this.uint16[j+2]=_,this.uint16[j+3]=w,this.uint16[j+4]=C,this.uint16[j+5]=M,this.uint16[j+6]=S,this.uint16[j+7]=E,this.uint16[j+8]=k,this.uint16[j+9]=R,a}}Vd.prototype.bytesPerElement=20,Ot("StructArrayLayout10ui20",Vd);class ff extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,p,_,w,C,M,S,E,k,R,j){let $=this.length;return this.resize($+1),this.emplace($,a,u,p,_,w,C,M,S,E,k,R,j)}emplace(a,u,p,_,w,C,M,S,E,k,R,j,$){let G=12*a;return this.int16[G+0]=u,this.int16[G+1]=p,this.int16[G+2]=_,this.int16[G+3]=w,this.uint16[G+4]=C,this.uint16[G+5]=M,this.uint16[G+6]=S,this.uint16[G+7]=E,this.int16[G+8]=k,this.int16[G+9]=R,this.int16[G+10]=j,this.int16[G+11]=$,a}}ff.prototype.bytesPerElement=24,Ot("StructArrayLayout4i4ui4i24",ff);class mf extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p){let _=this.length;return this.resize(_+1),this.emplace(_,a,u,p)}emplace(a,u,p,_){let w=3*a;return this.float32[w+0]=u,this.float32[w+1]=p,this.float32[w+2]=_,a}}mf.prototype.bytesPerElement=12,Ot("StructArrayLayout3f12",mf);class Xa extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){let u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint32[1*a+0]=u,a}}Xa.prototype.bytesPerElement=4,Ot("StructArrayLayout1ul4",Xa);class zd extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,p,_,w,C,M,S,E){let k=this.length;return this.resize(k+1),this.emplace(k,a,u,p,_,w,C,M,S,E)}emplace(a,u,p,_,w,C,M,S,E,k){let R=10*a,j=5*a;return this.int16[R+0]=u,this.int16[R+1]=p,this.int16[R+2]=_,this.int16[R+3]=w,this.int16[R+4]=C,this.int16[R+5]=M,this.uint32[j+3]=S,this.uint16[R+8]=E,this.uint16[R+9]=k,a}}zd.prototype.bytesPerElement=20,Ot("StructArrayLayout6i1ul2ui20",zd);class hu extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,p,_,w,C){let M=this.length;return this.resize(M+1),this.emplace(M,a,u,p,_,w,C)}emplace(a,u,p,_,w,C,M){let S=6*a;return this.int16[S+0]=u,this.int16[S+1]=p,this.int16[S+2]=_,this.int16[S+3]=w,this.int16[S+4]=C,this.int16[S+5]=M,a}}hu.prototype.bytesPerElement=12,Ot("StructArrayLayout2i2i2i12",hu);class Ud extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,p,_,w){let C=this.length;return this.resize(C+1),this.emplace(C,a,u,p,_,w)}emplace(a,u,p,_,w,C){let M=4*a,S=8*a;return this.float32[M+0]=u,this.float32[M+1]=p,this.float32[M+2]=_,this.int16[S+6]=w,this.int16[S+7]=C,a}}Ud.prototype.bytesPerElement=16,Ot("StructArrayLayout2f1f2i16",Ud);class pu extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_){let w=this.length;return this.resize(w+1),this.emplace(w,a,u,p,_)}emplace(a,u,p,_,w){let C=12*a,M=3*a;return this.uint8[C+0]=u,this.uint8[C+1]=p,this.float32[M+1]=_,this.float32[M+2]=w,a}}pu.prototype.bytesPerElement=12,Ot("StructArrayLayout2ub2f12",pu);class $d extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,p){let _=this.length;return this.resize(_+1),this.emplace(_,a,u,p)}emplace(a,u,p,_){let w=3*a;return this.uint16[w+0]=u,this.uint16[w+1]=p,this.uint16[w+2]=_,a}}$d.prototype.bytesPerElement=6,Ot("StructArrayLayout3ui6",$d);class sl extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,w,C,M,S,E,k,R,j,$,G,X,re,le){let xe=this.length;return this.resize(xe+1),this.emplace(xe,a,u,p,_,w,C,M,S,E,k,R,j,$,G,X,re,le)}emplace(a,u,p,_,w,C,M,S,E,k,R,j,$,G,X,re,le,xe){let ue=24*a,ve=12*a,Ve=48*a;return this.int16[ue+0]=u,this.int16[ue+1]=p,this.uint16[ue+2]=_,this.uint16[ue+3]=w,this.uint32[ve+2]=C,this.uint32[ve+3]=M,this.uint32[ve+4]=S,this.uint16[ue+10]=E,this.uint16[ue+11]=k,this.uint16[ue+12]=R,this.float32[ve+7]=j,this.float32[ve+8]=$,this.uint8[Ve+36]=G,this.uint8[Ve+37]=X,this.uint8[Ve+38]=re,this.uint32[ve+10]=le,this.int16[ue+22]=xe,a}}sl.prototype.bytesPerElement=48,Ot("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",sl);class lc extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,w,C,M,S,E,k,R,j,$,G,X,re,le,xe,ue,ve,Ve,He,Tt,At,Dt,bt,dt,It){let _t=this.length;return this.resize(_t+1),this.emplace(_t,a,u,p,_,w,C,M,S,E,k,R,j,$,G,X,re,le,xe,ue,ve,Ve,He,Tt,At,Dt,bt,dt,It)}emplace(a,u,p,_,w,C,M,S,E,k,R,j,$,G,X,re,le,xe,ue,ve,Ve,He,Tt,At,Dt,bt,dt,It,_t){let et=32*a,$t=16*a;return this.int16[et+0]=u,this.int16[et+1]=p,this.int16[et+2]=_,this.int16[et+3]=w,this.int16[et+4]=C,this.int16[et+5]=M,this.int16[et+6]=S,this.int16[et+7]=E,this.uint16[et+8]=k,this.uint16[et+9]=R,this.uint16[et+10]=j,this.uint16[et+11]=$,this.uint16[et+12]=G,this.uint16[et+13]=X,this.uint16[et+14]=re,this.uint16[et+15]=le,this.uint16[et+16]=xe,this.uint16[et+17]=ue,this.uint16[et+18]=ve,this.uint16[et+19]=Ve,this.uint16[et+20]=He,this.uint16[et+21]=Tt,this.uint16[et+22]=At,this.uint32[$t+12]=Dt,this.float32[$t+13]=bt,this.float32[$t+14]=dt,this.uint16[et+30]=It,this.uint16[et+31]=_t,a}}lc.prototype.bytesPerElement=64,Ot("StructArrayLayout8i15ui1ul2f2ui64",lc);class Hd extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){let u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.float32[1*a+0]=u,a}}Hd.prototype.bytesPerElement=4,Ot("StructArrayLayout1f4",Hd);class qd extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p){let _=this.length;return this.resize(_+1),this.emplace(_,a,u,p)}emplace(a,u,p,_){let w=3*a;return this.uint16[6*a+0]=u,this.float32[w+1]=p,this.float32[w+2]=_,a}}qd.prototype.bytesPerElement=12,Ot("StructArrayLayout1ui2f12",qd);class uc extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,p){let _=this.length;return this.resize(_+1),this.emplace(_,a,u,p)}emplace(a,u,p,_){let w=4*a;return this.uint32[2*a+0]=u,this.uint16[w+2]=p,this.uint16[w+3]=_,a}}uc.prototype.bytesPerElement=8,Ot("StructArrayLayout1ul2ui8",uc);class gf extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u){let p=this.length;return this.resize(p+1),this.emplace(p,a,u)}emplace(a,u,p){let _=2*a;return this.uint16[_+0]=u,this.uint16[_+1]=p,a}}gf.prototype.bytesPerElement=4,Ot("StructArrayLayout2ui4",gf);class _f extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){let u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint16[1*a+0]=u,a}}_f.prototype.bytesPerElement=2,Ot("StructArrayLayout1ui2",_f);class Gd extends ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_){let w=this.length;return this.resize(w+1),this.emplace(w,a,u,p,_)}emplace(a,u,p,_,w){let C=4*a;return this.float32[C+0]=u,this.float32[C+1]=p,this.float32[C+2]=_,this.float32[C+3]=w,a}}Gd.prototype.bytesPerElement=16,Ot("StructArrayLayout4f16",Gd);class __ extends lu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new v(this.anchorPointX,this.anchorPointY)}}__.prototype.size=20;class y extends zd{get(a){return new __(this,a)}}Ot("CollisionBoxArray",y);class o extends lu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}o.prototype.size=48;class h extends sl{get(a){return new o(this,a)}}Ot("PlacedSymbolArray",h);class m extends lu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}m.prototype.size=64;class g extends lc{get(a){return new m(this,a)}}Ot("SymbolInstanceArray",g);class b extends Hd{getoffsetX(a){return this.float32[1*a+0]}}Ot("GlyphOffsetArray",b);class D extends Ja{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}Ot("SymbolLineVertexArray",D);class T extends lu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}T.prototype.size=12;class I extends qd{get(a){return new T(this,a)}}Ot("TextAnchorOffsetArray",I);class P extends lu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}P.prototype.size=8;class F extends uc{get(a){return new P(this,a)}}Ot("FeatureIndexArray",F);class N extends uu{}class q extends uu{}class ie extends uu{}class ne extends hf{}class ae extends pf{}class J extends du{}class pe extends Vd{}class Ie extends ff{}class oe extends mf{}class be extends Xa{}class Ee extends hu{}class ke extends pu{}class Fe extends $d{}class Ze extends gf{}let Ge=qi([{name:"a_pos",components:2,type:"Int16"}],4),{members:ot}=Ge;class pt{constructor(a=[]){this.segments=a}prepareSegment(a,u,p,_){let w=this.segments[this.segments.length-1];return a>pt.MAX_VERTEX_ARRAY_LENGTH&&Qt(`Max vertices per segment is ${pt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!w||w.vertexLength+a>pt.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==_)&&(w={vertexOffset:u.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},_!==void 0&&(w.sortKey=_),this.segments.push(w)),w}get(){return this.segments}destroy(){for(let a of this.segments)for(let u in a.vaos)a.vaos[u].destroy()}static simpleSegment(a,u,p,_){return new pt([{vertexOffset:a,primitiveOffset:u,vertexLength:p,primitiveLength:_,vaos:{},sortKey:0}])}}function cn(c,a){return 256*(c=Re(Math.floor(c),0,255))+Re(Math.floor(a),0,255)}pt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ot("SegmentVector",pt);let gt=qi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Kt={exports:{}},ln={exports:{}};ln.exports=function(c,a){var u,p,_,w,C,M,S,E;for(p=c.length-(u=3&c.length),_=a,C=3432918353,M=461845907,E=0;E<p;)S=255&c.charCodeAt(E)|(255&c.charCodeAt(++E))<<8|(255&c.charCodeAt(++E))<<16|(255&c.charCodeAt(++E))<<24,++E,_=27492+(65535&(w=5*(65535&(_=(_^=S=(65535&(S=(S=(65535&S)*C+(((S>>>16)*C&65535)<<16)&4294967295)<<15|S>>>17))*M+(((S>>>16)*M&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(S=0,u){case 3:S^=(255&c.charCodeAt(E+2))<<16;case 2:S^=(255&c.charCodeAt(E+1))<<8;case 1:_^=S=(65535&(S=(S=(65535&(S^=255&c.charCodeAt(E)))*C+(((S>>>16)*C&65535)<<16)&4294967295)<<15|S>>>17))*M+(((S>>>16)*M&65535)<<16)&4294967295}return _^=c.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0};var Vn=ln.exports,Xt={exports:{}};Xt.exports=function(c,a){for(var u,p=c.length,_=a^p,w=0;p>=4;)u=1540483477*(65535&(u=255&c.charCodeAt(w)|(255&c.charCodeAt(++w))<<8|(255&c.charCodeAt(++w))<<16|(255&c.charCodeAt(++w))<<24))+((1540483477*(u>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),p-=4,++w;switch(p){case 3:_^=(255&c.charCodeAt(w+2))<<16;case 2:_^=(255&c.charCodeAt(w+1))<<8;case 1:_=1540483477*(65535&(_^=255&c.charCodeAt(w)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0};var fn=Vn,wn=Xt.exports;Kt.exports=fn,Kt.exports.murmur3=fn,Kt.exports.murmur2=wn;var Ai=l(Kt.exports);class Jn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,u,p,_){this.ids.push(Ds(a)),this.positions.push(u,p,_)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let u=Ds(a),p=0,_=this.ids.length-1;for(;p<_;){let C=p+_>>1;this.ids[C]>=u?_=C:p=C+1}let w=[];for(;this.ids[p]===u;)w.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return w}static serialize(a,u){let p=new Float64Array(a.ids),_=new Uint32Array(a.positions);return ar(p,_,0,p.length-1),u&&u.push(p.buffer,_.buffer),{ids:p,positions:_}}static deserialize(a){let u=new Jn;return u.ids=a.ids,u.positions=a.positions,u.indexed=!0,u}}function Ds(c){let a=+c;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:Ai(String(c))}function ar(c,a,u,p){for(;u<p;){let _=c[u+p>>1],w=u-1,C=p+1;for(;;){do w++;while(c[w]<_);do C--;while(c[C]>_);if(w>=C)break;Mi(c,w,C),Mi(a,3*w,3*C),Mi(a,3*w+1,3*C+1),Mi(a,3*w+2,3*C+2)}C-u<p-C?(ar(c,a,u,C),u=C+1):(ar(c,a,C+1,p),p=C)}}function Mi(c,a,u){let p=c[a];c[a]=c[u],c[u]=p}Ot("FeaturePositionMap",Jn);class or{constructor(a,u){this.gl=a.gl,this.location=u}}class Ts extends or{constructor(a,u){super(a,u),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Ma extends or{constructor(a,u){super(a,u),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class Po extends or{constructor(a,u){super(a,u),this.current=Kn.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}let fu=new Float32Array(16);function ko(c){return[cn(255*c.r,255*c.g),cn(255*c.b,255*c.a)]}class Da{constructor(a,u,p){this.value=a,this.uniformNames=u.map(_=>`u_${_}`),this.type=p}setUniform(a,u,p){a.set(p.constantOr(this.value))}getBinding(a,u,p){return this.type==="color"?new Po(a,u):new Ts(a,u)}}class Xi{constructor(a,u){this.uniformNames=u.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=a.tlbr}setUniform(a,u,p,_){let w=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&a.set(w)}getBinding(a,u,p){return p.substr(0,9)==="u_pattern"?new Ma(a,u):new Ts(a,u)}}class Di{constructor(a,u,p,_){this.expression=a,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map(w=>({name:`a_${w}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(a,u,p,_,w){let C=this.paintVertexArray.length,M=this.expression.evaluate(new gi(0),u,{},_,[],w);this.paintVertexArray.resize(a),this._setPaintValue(C,a,M)}updatePaintArray(a,u,p,_){let w=this.expression.evaluate({zoom:0},p,_);this._setPaintValue(a,u,w)}_setPaintValue(a,u,p){if(this.type==="color"){let _=ko(p);for(let w=a;w<u;w++)this.paintVertexArray.emplace(w,_[0],_[1])}else{for(let _=a;_<u;_++)this.paintVertexArray.emplace(_,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class _i{constructor(a,u,p,_,w,C){this.expression=a,this.uniformNames=u.map(M=>`u_${M}_t`),this.type=p,this.useIntegerZoom=_,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=u.map(M=>({name:`a_${M}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new C}populatePaintArray(a,u,p,_,w){let C=this.expression.evaluate(new gi(this.zoom),u,{},_,[],w),M=this.expression.evaluate(new gi(this.zoom+1),u,{},_,[],w),S=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(S,a,C,M)}updatePaintArray(a,u,p,_){let w=this.expression.evaluate({zoom:this.zoom},p,_),C=this.expression.evaluate({zoom:this.zoom+1},p,_);this._setPaintValue(a,u,w,C)}_setPaintValue(a,u,p,_){if(this.type==="color"){let w=ko(p),C=ko(_);for(let M=a;M<u;M++)this.paintVertexArray.emplace(M,w[0],w[1],C[0],C[1])}else{for(let w=a;w<u;w++)this.paintVertexArray.emplace(w,p,_);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(_))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,u){let p=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,_=Re(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);a.set(_)}getBinding(a,u,p){return new Ts(a,u)}}class $s{constructor(a,u,p,_,w,C){this.expression=a,this.type=u,this.useIntegerZoom=p,this.zoom=_,this.layerId=C,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(a,u,p){let _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(_,a,u.patterns&&u.patterns[this.layerId],p)}updatePaintArray(a,u,p,_,w){this._setPaintValues(a,u,p.patterns&&p.patterns[this.layerId],w)}_setPaintValues(a,u,p,_){if(!_||!p)return;let{min:w,mid:C,max:M}=p,S=_[w],E=_[C],k=_[M];if(S&&E&&k)for(let R=a;R<u;R++)this.zoomInPaintVertexArray.emplace(R,E.tl[0],E.tl[1],E.br[0],E.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],E.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(R,E.tl[0],E.tl[1],E.br[0],E.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],E.pixelRatio,k.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,gt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,gt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class er{constructor(a,u,p){this.binders={},this._buffers=[];let _=[];for(let w in a.paint._values){if(!p(w))continue;let C=a.paint.get(w);if(!(C instanceof ra&&Jc(C.property.specification)))continue;let M=Hs(w,a.type),S=C.value,E=C.property.specification.type,k=C.property.useIntegerZoom,R=C.property.specification["property-type"],j=R==="cross-faded"||R==="cross-faded-data-driven";if(S.kind==="constant")this.binders[w]=j?new Xi(S.value,M):new Da(S.value,M,E),_.push(`/u_${w}`);else if(S.kind==="source"||j){let $=tr(w,E,"source");this.binders[w]=j?new $s(S,E,k,u,$,a.id):new Di(S,M,E,$),_.push(`/a_${w}`)}else{let $=tr(w,E,"composite");this.binders[w]=new _i(S,M,E,k,u,$),_.push(`/z_${w}`)}}this.cacheKey=_.sort().join("")}getMaxValue(a){let u=this.binders[a];return u instanceof Di||u instanceof _i?u.maxValue:0}populatePaintArrays(a,u,p,_,w){for(let C in this.binders){let M=this.binders[C];(M instanceof Di||M instanceof _i||M instanceof $s)&&M.populatePaintArray(a,u,p,_,w)}}setConstantPatternPositions(a,u){for(let p in this.binders){let _=this.binders[p];_ instanceof Xi&&_.setConstantPatternPositions(a,u)}}updatePaintArrays(a,u,p,_,w){let C=!1;for(let M in a){let S=u.getPositions(M);for(let E of S){let k=p.feature(E.index);for(let R in this.binders){let j=this.binders[R];if((j instanceof Di||j instanceof _i||j instanceof $s)&&j.expression.isStateDependent===!0){let $=_.paint.get(R);j.expression=$.value,j.updatePaintArray(E.start,E.end,k,a[M],w),C=!0}}}}return C}defines(){let a=[];for(let u in this.binders){let p=this.binders[u];(p instanceof Da||p instanceof Xi)&&a.push(...p.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return a}getBinderAttributes(){let a=[];for(let u in this.binders){let p=this.binders[u];if(p instanceof Di||p instanceof _i)for(let _=0;_<p.paintVertexAttributes.length;_++)a.push(p.paintVertexAttributes[_].name);else if(p instanceof $s)for(let _=0;_<gt.members.length;_++)a.push(gt.members[_].name)}return a}getBinderUniforms(){let a=[];for(let u in this.binders){let p=this.binders[u];if(p instanceof Da||p instanceof Xi||p instanceof _i)for(let _ of p.uniformNames)a.push(_)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,u){let p=[];for(let _ in this.binders){let w=this.binders[_];if(w instanceof Da||w instanceof Xi||w instanceof _i){for(let C of w.uniformNames)if(u[C]){let M=w.getBinding(a,u[C],C);p.push({name:C,property:_,binding:M})}}}return p}setUniforms(a,u,p,_){for(let{name:w,property:C,binding:M}of u)this.binders[C].setUniform(M,_,p.get(C),w)}updatePaintBuffers(a){this._buffers=[];for(let u in this.binders){let p=this.binders[u];if(a&&p instanceof $s){let _=a.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(p instanceof Di||p instanceof _i)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(a){for(let u in this.binders){let p=this.binders[u];(p instanceof Di||p instanceof _i||p instanceof $s)&&p.upload(a)}this.updatePaintBuffers()}destroy(){for(let a in this.binders){let u=this.binders[a];(u instanceof Di||u instanceof _i||u instanceof $s)&&u.destroy()}}}class Ti{constructor(a,u,p=()=>!0){this.programConfigurations={};for(let _ of a)this.programConfigurations[_.id]=new er(_,u,p);this.needsUpload=!1,this._featureMap=new Jn,this._bufferOffset=0}populatePaintArrays(a,u,p,_,w,C){for(let M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(a,u,_,w,C);u.id!==void 0&&this._featureMap.add(u.id,p,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,u,p,_){for(let w of p)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(a,this._featureMap,u,w,_)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(let u in this.programConfigurations)this.programConfigurations[u].upload(a);this.needsUpload=!1}}destroy(){for(let a in this.programConfigurations)this.programConfigurations[a].destroy()}}function Hs(c,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${a}-`,"").replace(/-/g,"_")]}function tr(c,a,u){let p={color:{source:du,composite:Gd},number:{source:Hd,composite:du}},_=function(w){return{"line-pattern":{source:pe,composite:pe},"fill-pattern":{source:pe,composite:pe},"fill-extrusion-pattern":{source:pe,composite:pe}}[w]}(c);return _&&_[u]||p[a][u]}Ot("ConstantBinder",Da),Ot("CrossFadedConstantBinder",Xi),Ot("SourceExpressionBinder",Di),Ot("CrossFadedCompositeBinder",$s),Ot("CompositeExpressionBinder",_i),Ot("ProgramConfiguration",er,{omit:["_buffers"]}),Ot("ProgramConfigurationSet",Ti);let Ni=8192,vf=Math.pow(2,14)-1,v_=-vf-1;function dc(c){let a=Ni/c.extent,u=c.loadGeometry();for(let p=0;p<u.length;p++){let _=u[p];for(let w=0;w<_.length;w++){let C=_[w],M=Math.round(C.x*a),S=Math.round(C.y*a);C.x=Re(M,v_,vf),C.y=Re(S,v_,vf),(M<C.x||M>C.x+1||S<C.y||S>C.y+1)&&Qt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function hc(c,a){return{type:c.type,id:c.id,properties:c.properties,geometry:a?dc(c):[]}}function Wd(c,a,u,p,_){c.emplaceBack(2*a+(p+1)/2,2*u+(_+1)/2)}class Ao{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new q,this.indexArray=new Fe,this.segments=new pt,this.programConfigurations=new Ti(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,p){let _=this.layers[0],w=[],C=null,M=!1;_.type==="circle"&&(C=_.layout.get("circle-sort-key"),M=!C.isConstant());for(let{feature:S,id:E,index:k,sourceLayerIndex:R}of a){let j=this.layers[0]._featureFilter.needGeometry,$=hc(S,j);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),$,p))continue;let G=M?C.evaluate($,{},p):void 0,X={id:E,properties:S.properties,type:S.type,sourceLayerIndex:R,index:k,geometry:j?$.geometry:dc(S),patterns:{},sortKey:G};w.push(X)}M&&w.sort((S,E)=>S.sortKey-E.sortKey);for(let S of w){let{geometry:E,index:k,sourceLayerIndex:R}=S,j=a[k].feature;this.addFeature(S,E,k,p),u.featureIndex.insert(j,E,k,R,this.index)}}update(a,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,ot),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,u,p,_){for(let w of u)for(let C of w){let M=C.x,S=C.y;if(M<0||M>=Ni||S<0||S>=Ni)continue;let E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),k=E.vertexLength;Wd(this.layoutVertexArray,M,S,-1,-1),Wd(this.layoutVertexArray,M,S,1,-1),Wd(this.layoutVertexArray,M,S,1,1),Wd(this.layoutVertexArray,M,S,-1,1),this.indexArray.emplaceBack(k,k+1,k+2),this.indexArray.emplaceBack(k,k+3,k+2),E.vertexLength+=4,E.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,{},_)}}function yf(c,a){for(let u=0;u<c.length;u++)if(Yd(a,c[u]))return!0;for(let u=0;u<a.length;u++)if(Yd(c,a[u]))return!0;return!!Zd(c,a)}function y_(c,a,u){return!!Yd(c,a)||!!Gb(a,c,u)}function bf(c,a){if(c.length===1)return UT(a,c[0]);for(let u=0;u<a.length;u++){let p=a[u];for(let _=0;_<p.length;_++)if(Yd(c,p[_]))return!0}for(let u=0;u<c.length;u++)if(UT(a,c[u]))return!0;for(let u=0;u<a.length;u++)if(Zd(c,a[u]))return!0;return!1}function wf(c,a,u){if(c.length>1){if(Zd(c,a))return!0;for(let p=0;p<a.length;p++)if(Gb(a[p],c,u))return!0}for(let p=0;p<c.length;p++)if(Gb(c[p],a,u))return!0;return!1}function Zd(c,a){if(c.length===0||a.length===0)return!1;for(let u=0;u<c.length-1;u++){let p=c[u],_=c[u+1];for(let w=0;w<a.length-1;w++)if(Cf(p,_,a[w],a[w+1]))return!0}return!1}function Cf(c,a,u,p){return st(c,u,p)!==st(a,u,p)&&st(c,a,u)!==st(c,a,p)}function Gb(c,a,u){let p=u*u;if(a.length===1)return c.distSqr(a[0])<p;for(let _=1;_<a.length;_++)if(zT(c,a[_-1],a[_])<p)return!0;return!1}function zT(c,a,u){let p=a.distSqr(u);if(p===0)return c.distSqr(a);let _=((c.x-a.x)*(u.x-a.x)+(c.y-a.y)*(u.y-a.y))/p;return c.distSqr(_<0?a:_>1?u:u.sub(a)._mult(_)._add(a))}function UT(c,a){let u,p,_,w=!1;for(let C=0;C<c.length;C++){u=c[C];for(let M=0,S=u.length-1;M<u.length;S=M++)p=u[M],_=u[S],p.y>a.y!=_.y>a.y&&a.x<(_.x-p.x)*(a.y-p.y)/(_.y-p.y)+p.x&&(w=!w)}return w}function Yd(c,a){let u=!1;for(let p=0,_=c.length-1;p<c.length;_=p++){let w=c[p],C=c[_];w.y>a.y!=C.y>a.y&&a.x<(C.x-w.x)*(a.y-w.y)/(C.y-w.y)+w.x&&(u=!u)}return u}function Y3(c,a,u){let p=u[0],_=u[2];if(c.x<p.x&&a.x<p.x||c.x>_.x&&a.x>_.x||c.y<p.y&&a.y<p.y||c.y>_.y&&a.y>_.y)return!1;let w=st(c,a,u[0]);return w!==st(c,a,u[1])||w!==st(c,a,u[2])||w!==st(c,a,u[3])}function xf(c,a,u){let p=a.paint.get(c).value;return p.kind==="constant"?p.value:u.programConfigurations.get(a.id).getMaxValue(c)}function b_(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function w_(c,a,u,p,_){if(!a[0]&&!a[1])return c;let w=v.convert(a)._mult(_);u==="viewport"&&w._rotate(-p);let C=[];for(let M=0;M<c.length;M++)C.push(c[M].sub(w));return C}let $T,HT;Ot("CircleBucket",Ao,{omit:["layers"]});var K3={get paint(){return HT=HT||new cs({"circle-radius":new Gt(Be.paint_circle["circle-radius"]),"circle-color":new Gt(Be.paint_circle["circle-color"]),"circle-blur":new Gt(Be.paint_circle["circle-blur"]),"circle-opacity":new Gt(Be.paint_circle["circle-opacity"]),"circle-translate":new Vt(Be.paint_circle["circle-translate"]),"circle-translate-anchor":new Vt(Be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Vt(Be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Vt(Be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Gt(Be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Gt(Be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Gt(Be.paint_circle["circle-stroke-opacity"])})},get layout(){return $T=$T||new cs({"circle-sort-key":new Gt(Be.layout_circle["circle-sort-key"])})}},ls=1e-6,Kd=typeof Float32Array<"u"?Float32Array:Array;function Wb(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function qT(c,a,u){var p=a[0],_=a[1],w=a[2],C=a[3],M=a[4],S=a[5],E=a[6],k=a[7],R=a[8],j=a[9],$=a[10],G=a[11],X=a[12],re=a[13],le=a[14],xe=a[15],ue=u[0],ve=u[1],Ve=u[2],He=u[3];return c[0]=ue*p+ve*M+Ve*R+He*X,c[1]=ue*_+ve*S+Ve*j+He*re,c[2]=ue*w+ve*E+Ve*$+He*le,c[3]=ue*C+ve*k+Ve*G+He*xe,c[4]=(ue=u[4])*p+(ve=u[5])*M+(Ve=u[6])*R+(He=u[7])*X,c[5]=ue*_+ve*S+Ve*j+He*re,c[6]=ue*w+ve*E+Ve*$+He*le,c[7]=ue*C+ve*k+Ve*G+He*xe,c[8]=(ue=u[8])*p+(ve=u[9])*M+(Ve=u[10])*R+(He=u[11])*X,c[9]=ue*_+ve*S+Ve*j+He*re,c[10]=ue*w+ve*E+Ve*$+He*le,c[11]=ue*C+ve*k+Ve*G+He*xe,c[12]=(ue=u[12])*p+(ve=u[13])*M+(Ve=u[14])*R+(He=u[15])*X,c[13]=ue*_+ve*S+Ve*j+He*re,c[14]=ue*w+ve*E+Ve*$+He*le,c[15]=ue*C+ve*k+Ve*G+He*xe,c}Math.hypot||(Math.hypot=function(){for(var c=0,a=arguments.length;a--;)c+=arguments[a]*arguments[a];return Math.sqrt(c)});var Mf,Q3=qT;function C_(c,a,u){var p=a[0],_=a[1],w=a[2],C=a[3];return c[0]=u[0]*p+u[4]*_+u[8]*w+u[12]*C,c[1]=u[1]*p+u[5]*_+u[9]*w+u[13]*C,c[2]=u[2]*p+u[6]*_+u[10]*w+u[14]*C,c[3]=u[3]*p+u[7]*_+u[11]*w+u[15]*C,c}Mf=new Kd(4),Kd!=Float32Array&&(Mf[0]=0,Mf[1]=0,Mf[2]=0,Mf[3]=0);class J3 extends sa{constructor(a){super(a,K3)}createBucket(a){return new Ao(a)}queryRadius(a){let u=a;return xf("circle-radius",this,u)+xf("circle-stroke-width",this,u)+b_(this.paint.get("circle-translate"))}queryIntersectsFeature(a,u,p,_,w,C,M,S){let E=w_(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),C.angle,M),k=this.paint.get("circle-radius").evaluate(u,p)+this.paint.get("circle-stroke-width").evaluate(u,p),R=this.paint.get("circle-pitch-alignment")==="map",j=R?E:function(G,X){return G.map(re=>GT(re,X))}(E,S),$=R?k*M:k;for(let G of _)for(let X of G){let re=R?X:GT(X,S),le=$,xe=C_([],[X.x,X.y,0,1],S);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?le*=xe[3]/C.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(le*=C.cameraToCenterDistance/xe[3]),y_(j,re,le))return!0}return!1}}function GT(c,a){let u=C_([],[c.x,c.y,0,1],a);return new v(u[0]/u[3],u[1]/u[3])}class WT extends Ao{}let ZT;Ot("HeatmapBucket",WT,{omit:["layers"]});var X3={get paint(){return ZT=ZT||new cs({"heatmap-radius":new Gt(Be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Gt(Be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Vt(Be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new lf(Be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Vt(Be.paint_heatmap["heatmap-opacity"])})}};function Zb(c,{width:a,height:u},p,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==a*u*p)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${a*u*p}`)}else _=new Uint8Array(a*u*p);return c.width=a,c.height=u,c.data=_,c}function YT(c,{width:a,height:u},p){if(a===c.width&&u===c.height)return;let _=Zb({},{width:a,height:u},p);Yb(c,_,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,a),height:Math.min(c.height,u)},p),c.width=a,c.height=u,c.data=_.data}function Yb(c,a,u,p,_,w){if(_.width===0||_.height===0)return a;if(_.width>c.width||_.height>c.height||u.x>c.width-_.width||u.y>c.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>a.width||_.height>a.height||p.x>a.width-_.width||p.y>a.height-_.height)throw new RangeError("out of range destination coordinates for image copy");let C=c.data,M=a.data;if(C===M)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<_.height;S++){let E=((u.y+S)*c.width+u.x)*w,k=((p.y+S)*a.width+p.x)*w;for(let R=0;R<_.width*w;R++)M[k+R]=C[E+R]}return a}class Df{constructor(a,u){Zb(this,a,1,u)}resize(a){YT(this,a,1)}clone(){return new Df({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,p,_,w){Yb(a,u,p,_,w,1)}}class aa{constructor(a,u){Zb(this,a,4,u)}resize(a){YT(this,a,4)}replace(a,u){u?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new aa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,p,_,w){Yb(a,u,p,_,w,4)}}function KT(c){let a={},u=c.resolution||256,p=c.clips?c.clips.length:1,_=c.image||new aa({width:u,height:p});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);let w=(C,M,S)=>{a[c.evaluationKey]=S;let E=c.expression.evaluate(a);_.data[C+M+0]=Math.floor(255*E.r/E.a),_.data[C+M+1]=Math.floor(255*E.g/E.a),_.data[C+M+2]=Math.floor(255*E.b/E.a),_.data[C+M+3]=Math.floor(255*E.a)};if(c.clips)for(let C=0,M=0;C<p;++C,M+=4*u)for(let S=0,E=0;S<u;S++,E+=4){let k=S/(u-1),{start:R,end:j}=c.clips[C];w(M,E,R*(1-k)+j*k)}else for(let C=0,M=0;C<u;C++,M+=4)w(0,M,C/(u-1));return _}Ot("AlphaImage",Df),Ot("RGBAImage",aa);class eN extends sa{createBucket(a){return new WT(a)}constructor(a){super(a,X3),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=KT({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let QT;var tN={get paint(){return QT=QT||new cs({"hillshade-illumination-direction":new Vt(Be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Vt(Be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Vt(Be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Vt(Be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Vt(Be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Vt(Be.paint_hillshade["hillshade-accent-color"])})}};class nN extends sa{constructor(a){super(a,tN)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let iN=qi([{name:"a_pos",components:2,type:"Int16"}],4),{members:rN}=iN;var Kb={exports:{}};function x_(c,a,u){u=u||2;var p,_,w,C,M,S,E,k=a&&a.length,R=k?a[0]*u:c.length,j=JT(c,0,R,u,!0),$=[];if(!j||j.next===j.prev)return $;if(k&&(j=function(X,re,le,xe){var ue,ve,Ve,He=[];for(ue=0,ve=re.length;ue<ve;ue++)(Ve=JT(X,re[ue]*xe,ue<ve-1?re[ue+1]*xe:X.length,xe,!1))===Ve.next&&(Ve.steiner=!0),He.push(hN(Ve));for(He.sort(lN),ue=0;ue<He.length;ue++)le=uN(He[ue],le);return le}(c,a,j,u)),c.length>80*u){p=w=c[0],_=C=c[1];for(var G=u;G<R;G+=u)(M=c[G])<p&&(p=M),(S=c[G+1])<_&&(_=S),M>w&&(w=M),S>C&&(C=S);E=(E=Math.max(w-p,C-_))!==0?32767/E:0}return Tf(j,$,u,p,_,E,0),$}function JT(c,a,u,p,_){var w,C;if(_===Xb(c,a,u,p)>0)for(w=a;w<u;w+=p)C=tS(w,c[w],c[w+1],C);else for(w=u-p;w>=a;w-=p)C=tS(w,c[w],c[w+1],C);return C&&M_(C,C.next)&&(Of(C),C=C.next),C}function mu(c,a){if(!c)return c;a||(a=c);var u,p=c;do if(u=!1,p.steiner||!M_(p,p.next)&&Gi(p.prev,p,p.next)!==0)p=p.next;else{if(Of(p),(p=a=p.prev)===p.next)break;u=!0}while(u||p!==a);return a}function Tf(c,a,u,p,_,w,C){if(c){!C&&w&&function(k,R,j,$){var G=k;do G.z===0&&(G.z=Qb(G.x,G.y,R,j,$)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==k);G.prevZ.nextZ=null,G.prevZ=null,function(X){var re,le,xe,ue,ve,Ve,He,Tt,At=1;do{for(le=X,X=null,ve=null,Ve=0;le;){for(Ve++,xe=le,He=0,re=0;re<At&&(He++,xe=xe.nextZ);re++);for(Tt=At;He>0||Tt>0&&xe;)He!==0&&(Tt===0||!xe||le.z<=xe.z)?(ue=le,le=le.nextZ,He--):(ue=xe,xe=xe.nextZ,Tt--),ve?ve.nextZ=ue:X=ue,ue.prevZ=ve,ve=ue;le=xe}ve.nextZ=null,At*=2}while(Ve>1)}(G)}(c,p,_,w);for(var M,S,E=c;c.prev!==c.next;)if(M=c.prev,S=c.next,w?aN(c,p,_,w):sN(c))a.push(M.i/u|0),a.push(c.i/u|0),a.push(S.i/u|0),Of(c),c=S.next,E=S.next;else if((c=S)===E){C?C===1?Tf(c=oN(mu(c),a,u),a,u,p,_,w,2):C===2&&cN(c,a,u,p,_,w):Tf(mu(c),a,u,p,_,w,1);break}}}function sN(c){var a=c.prev,u=c,p=c.next;if(Gi(a,u,p)>=0)return!1;for(var _=a.x,w=u.x,C=p.x,M=a.y,S=u.y,E=p.y,k=_<w?_<C?_:C:w<C?w:C,R=M<S?M<E?M:E:S<E?S:E,j=_>w?_>C?_:C:w>C?w:C,$=M>S?M>E?M:E:S>E?S:E,G=p.next;G!==a;){if(G.x>=k&&G.x<=j&&G.y>=R&&G.y<=$&&Qd(_,M,w,S,C,E,G.x,G.y)&&Gi(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function aN(c,a,u,p){var _=c.prev,w=c,C=c.next;if(Gi(_,w,C)>=0)return!1;for(var M=_.x,S=w.x,E=C.x,k=_.y,R=w.y,j=C.y,$=M<S?M<E?M:E:S<E?S:E,G=k<R?k<j?k:j:R<j?R:j,X=M>S?M>E?M:E:S>E?S:E,re=k>R?k>j?k:j:R>j?R:j,le=Qb($,G,a,u,p),xe=Qb(X,re,a,u,p),ue=c.prevZ,ve=c.nextZ;ue&&ue.z>=le&&ve&&ve.z<=xe;){if(ue.x>=$&&ue.x<=X&&ue.y>=G&&ue.y<=re&&ue!==_&&ue!==C&&Qd(M,k,S,R,E,j,ue.x,ue.y)&&Gi(ue.prev,ue,ue.next)>=0||(ue=ue.prevZ,ve.x>=$&&ve.x<=X&&ve.y>=G&&ve.y<=re&&ve!==_&&ve!==C&&Qd(M,k,S,R,E,j,ve.x,ve.y)&&Gi(ve.prev,ve,ve.next)>=0))return!1;ve=ve.nextZ}for(;ue&&ue.z>=le;){if(ue.x>=$&&ue.x<=X&&ue.y>=G&&ue.y<=re&&ue!==_&&ue!==C&&Qd(M,k,S,R,E,j,ue.x,ue.y)&&Gi(ue.prev,ue,ue.next)>=0)return!1;ue=ue.prevZ}for(;ve&&ve.z<=xe;){if(ve.x>=$&&ve.x<=X&&ve.y>=G&&ve.y<=re&&ve!==_&&ve!==C&&Qd(M,k,S,R,E,j,ve.x,ve.y)&&Gi(ve.prev,ve,ve.next)>=0)return!1;ve=ve.nextZ}return!0}function oN(c,a,u){var p=c;do{var _=p.prev,w=p.next.next;!M_(_,w)&&XT(_,p,p.next,w)&&Sf(_,w)&&Sf(w,_)&&(a.push(_.i/u|0),a.push(p.i/u|0),a.push(w.i/u|0),Of(p),Of(p.next),p=c=w),p=p.next}while(p!==c);return mu(p)}function cN(c,a,u,p,_,w){var C=c;do{for(var M=C.next.next;M!==C.prev;){if(C.i!==M.i&&pN(C,M)){var S=eS(C,M);return C=mu(C,C.next),S=mu(S,S.next),Tf(C,a,u,p,_,w,0),void Tf(S,a,u,p,_,w,0)}M=M.next}C=C.next}while(C!==c)}function lN(c,a){return c.x-a.x}function uN(c,a){var u=function(_,w){var C,M=w,S=_.x,E=_.y,k=-1/0;do{if(E<=M.y&&E>=M.next.y&&M.next.y!==M.y){var R=M.x+(E-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(R<=S&&R>k&&(k=R,C=M.x<M.next.x?M:M.next,R===S))return C}M=M.next}while(M!==w);if(!C)return null;var j,$=C,G=C.x,X=C.y,re=1/0;M=C;do S>=M.x&&M.x>=G&&S!==M.x&&Qd(E<X?S:k,E,G,X,E<X?k:S,E,M.x,M.y)&&(j=Math.abs(E-M.y)/(S-M.x),Sf(M,_)&&(j<re||j===re&&(M.x>C.x||M.x===C.x&&dN(C,M)))&&(C=M,re=j)),M=M.next;while(M!==$);return C}(c,a);if(!u)return a;var p=eS(u,c);return mu(p,p.next),mu(u,u.next)}function dN(c,a){return Gi(c.prev,c,a.prev)<0&&Gi(a.next,c,c.next)<0}function Qb(c,a,u,p,_){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-u)*_|0)|c<<8))|c<<4))|c<<2))|c<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-p)*_|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function hN(c){var a=c,u=c;do(a.x<u.x||a.x===u.x&&a.y<u.y)&&(u=a),a=a.next;while(a!==c);return u}function Qd(c,a,u,p,_,w,C,M){return(_-C)*(a-M)>=(c-C)*(w-M)&&(c-C)*(p-M)>=(u-C)*(a-M)&&(u-C)*(w-M)>=(_-C)*(p-M)}function pN(c,a){return c.next.i!==a.i&&c.prev.i!==a.i&&!function(u,p){var _=u;do{if(_.i!==u.i&&_.next.i!==u.i&&_.i!==p.i&&_.next.i!==p.i&&XT(_,_.next,u,p))return!0;_=_.next}while(_!==u);return!1}(c,a)&&(Sf(c,a)&&Sf(a,c)&&function(u,p){var _=u,w=!1,C=(u.x+p.x)/2,M=(u.y+p.y)/2;do _.y>M!=_.next.y>M&&_.next.y!==_.y&&C<(_.next.x-_.x)*(M-_.y)/(_.next.y-_.y)+_.x&&(w=!w),_=_.next;while(_!==u);return w}(c,a)&&(Gi(c.prev,c,a.prev)||Gi(c,a.prev,a))||M_(c,a)&&Gi(c.prev,c,c.next)>0&&Gi(a.prev,a,a.next)>0)}function Gi(c,a,u){return(a.y-c.y)*(u.x-a.x)-(a.x-c.x)*(u.y-a.y)}function M_(c,a){return c.x===a.x&&c.y===a.y}function XT(c,a,u,p){var _=T_(Gi(c,a,u)),w=T_(Gi(c,a,p)),C=T_(Gi(u,p,c)),M=T_(Gi(u,p,a));return _!==w&&C!==M||!(_!==0||!D_(c,u,a))||!(w!==0||!D_(c,p,a))||!(C!==0||!D_(u,c,p))||!(M!==0||!D_(u,a,p))}function D_(c,a,u){return a.x<=Math.max(c.x,u.x)&&a.x>=Math.min(c.x,u.x)&&a.y<=Math.max(c.y,u.y)&&a.y>=Math.min(c.y,u.y)}function T_(c){return c>0?1:c<0?-1:0}function Sf(c,a){return Gi(c.prev,c,c.next)<0?Gi(c,a,c.next)>=0&&Gi(c,c.prev,a)>=0:Gi(c,a,c.prev)<0||Gi(c,c.next,a)<0}function eS(c,a){var u=new Jb(c.i,c.x,c.y),p=new Jb(a.i,a.x,a.y),_=c.next,w=a.prev;return c.next=a,a.prev=c,u.next=_,_.prev=u,p.next=u,u.prev=p,w.next=p,p.prev=w,p}function tS(c,a,u,p){var _=new Jb(c,a,u);return p?(_.next=p.next,_.prev=p,p.next.prev=_,p.next=_):(_.prev=_,_.next=_),_}function Of(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Jb(c,a,u){this.i=c,this.x=a,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Xb(c,a,u,p){for(var _=0,w=a,C=u-p;w<u;w+=p)_+=(c[C]-c[w])*(c[w+1]+c[C+1]),C=w;return _}Kb.exports=x_,Kb.exports.default=x_,x_.deviation=function(c,a,u,p){var _=a&&a.length,w=Math.abs(Xb(c,0,_?a[0]*u:c.length,u));if(_)for(var C=0,M=a.length;C<M;C++)w-=Math.abs(Xb(c,a[C]*u,C<M-1?a[C+1]*u:c.length,u));var S=0;for(C=0;C<p.length;C+=3){var E=p[C]*u,k=p[C+1]*u,R=p[C+2]*u;S+=Math.abs((c[E]-c[R])*(c[k+1]-c[E+1])-(c[E]-c[k])*(c[R+1]-c[E+1]))}return w===0&&S===0?0:Math.abs((S-w)/w)},x_.flatten=function(c){for(var a=c[0][0].length,u={vertices:[],holes:[],dimensions:a},p=0,_=0;_<c.length;_++){for(var w=0;w<c[_].length;w++)for(var C=0;C<a;C++)u.vertices.push(c[_][w][C]);_>0&&u.holes.push(p+=c[_-1].length)}return u};var nS=l(Kb.exports);function fN(c,a,u,p,_){iS(c,a,u||0,p||c.length-1,_||mN)}function iS(c,a,u,p,_){for(;p>u;){if(p-u>600){var w=p-u+1,C=a-u+1,M=Math.log(w),S=.5*Math.exp(2*M/3),E=.5*Math.sqrt(M*S*(w-S)/w)*(C-w/2<0?-1:1);iS(c,a,Math.max(u,Math.floor(a-C*S/w+E)),Math.min(p,Math.floor(a+(w-C)*S/w+E)),_)}var k=c[a],R=u,j=p;for(If(c,u,a),_(c[p],k)>0&&If(c,u,p);R<j;){for(If(c,R,j),R++,j--;_(c[R],k)<0;)R++;for(;_(c[j],k)>0;)j--}_(c[u],k)===0?If(c,u,j):If(c,++j,p),j<=a&&(u=j+1),a<=j&&(p=j-1)}}function If(c,a,u){var p=c[a];c[a]=c[u],c[u]=p}function mN(c,a){return c<a?-1:c>a?1:0}function e1(c,a){let u=c.length;if(u<=1)return[c];let p=[],_,w;for(let C=0;C<u;C++){let M=Je(c[C]);M!==0&&(c[C].area=Math.abs(M),w===void 0&&(w=M<0),w===M<0?(_&&p.push(_),_=[c[C]]):_.push(c[C]))}if(_&&p.push(_),a>1)for(let C=0;C<p.length;C++)p[C].length<=a||(fN(p[C],a,1,p[C].length-1,gN),p[C]=p[C].slice(0,a));return p}function gN(c,a){return a.area-c.area}function t1(c,a,u){let p=u.patternDependencies,_=!1;for(let w of a){let C=w.paint.get(`${c}-pattern`);C.isConstant()||(_=!0);let M=C.constantOr(null);M&&(_=!0,p[M.to]=!0,p[M.from]=!0)}return _}function n1(c,a,u,p,_){let w=_.patternDependencies;for(let C of a){let M=C.paint.get(`${c}-pattern`).value;if(M.kind!=="constant"){let S=M.evaluate({zoom:p-1},u,{},_.availableImages),E=M.evaluate({zoom:p},u,{},_.availableImages),k=M.evaluate({zoom:p+1},u,{},_.availableImages);S=S&&S.name?S.name:S,E=E&&E.name?E.name:E,k=k&&k.name?k.name:k,w[S]=!0,w[E]=!0,w[k]=!0,u.patterns[C.id]={min:S,mid:E,max:k}}}return u}class i1{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ie,this.indexArray=new Fe,this.indexArray2=new Ze,this.programConfigurations=new Ti(a.layers,a.zoom),this.segments=new pt,this.segments2=new pt,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,p){this.hasPattern=t1("fill",this.layers,u);let _=this.layers[0].layout.get("fill-sort-key"),w=!_.isConstant(),C=[];for(let{feature:M,id:S,index:E,sourceLayerIndex:k}of a){let R=this.layers[0]._featureFilter.needGeometry,j=hc(M,R);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),j,p))continue;let $=w?_.evaluate(j,{},p,u.availableImages):void 0,G={id:S,properties:M.properties,type:M.type,sourceLayerIndex:k,index:E,geometry:R?j.geometry:dc(M),patterns:{},sortKey:$};C.push(G)}w&&C.sort((M,S)=>M.sortKey-S.sortKey);for(let M of C){let{geometry:S,index:E,sourceLayerIndex:k}=M;if(this.hasPattern){let R=n1("fill",this.layers,M,this.zoom,u);this.patternFeatures.push(R)}else this.addFeature(M,S,E,p,{});u.featureIndex.insert(a[E].feature,S,E,k,this.index)}}update(a,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,p)}addFeatures(a,u,p){for(let _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,rN),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,u,p,_,w){for(let C of e1(u,500)){let M=0;for(let $ of C)M+=$.length;let S=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray),E=S.vertexLength,k=[],R=[];for(let $ of C){if($.length===0)continue;$!==C[0]&&R.push(k.length/2);let G=this.segments2.prepareSegment($.length,this.layoutVertexArray,this.indexArray2),X=G.vertexLength;this.layoutVertexArray.emplaceBack($[0].x,$[0].y),this.indexArray2.emplaceBack(X+$.length-1,X),k.push($[0].x),k.push($[0].y);for(let re=1;re<$.length;re++)this.layoutVertexArray.emplaceBack($[re].x,$[re].y),this.indexArray2.emplaceBack(X+re-1,X+re),k.push($[re].x),k.push($[re].y);G.vertexLength+=$.length,G.primitiveLength+=$.length}let j=nS(k,R);for(let $=0;$<j.length;$+=3)this.indexArray.emplaceBack(E+j[$],E+j[$+1],E+j[$+2]);S.vertexLength+=M,S.primitiveLength+=j.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,w,_)}}let rS,sS;Ot("FillBucket",i1,{omit:["layers","patternFeatures"]});var _N={get paint(){return sS=sS||new cs({"fill-antialias":new Vt(Be.paint_fill["fill-antialias"]),"fill-opacity":new Gt(Be.paint_fill["fill-opacity"]),"fill-color":new Gt(Be.paint_fill["fill-color"]),"fill-outline-color":new Gt(Be.paint_fill["fill-outline-color"]),"fill-translate":new Vt(Be.paint_fill["fill-translate"]),"fill-translate-anchor":new Vt(Be.paint_fill["fill-translate-anchor"]),"fill-pattern":new jd(Be.paint_fill["fill-pattern"])})},get layout(){return rS=rS||new cs({"fill-sort-key":new Gt(Be.layout_fill["fill-sort-key"])})}};class vN extends sa{constructor(a){super(a,_N)}recalculate(a,u){super.recalculate(a,u);let p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new i1(a)}queryRadius(){return b_(this.paint.get("fill-translate"))}queryIntersectsFeature(a,u,p,_,w,C,M){return bf(w_(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),C.angle,M),_)}isTileClipped(){return!0}}let yN=qi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),bN=qi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:wN}=yN;var al={},CN=d,aS=Jd;function Jd(c,a,u,p,_){this.properties={},this.extent=u,this.type=0,this._pbf=c,this._geometry=-1,this._keys=p,this._values=_,c.readFields(xN,this,a)}function xN(c,a,u){c==1?a.id=u.readVarint():c==2?function(p,_){for(var w=p.readVarint()+p.pos;p.pos<w;){var C=_._keys[p.readVarint()],M=_._values[p.readVarint()];_.properties[C]=M}}(u,a):c==3?a.type=u.readVarint():c==4&&(a._geometry=u.pos)}function MN(c){for(var a,u,p=0,_=0,w=c.length,C=w-1;_<w;C=_++)p+=((u=c[C]).x-(a=c[_]).x)*(a.y+u.y);return p}Jd.types=["Unknown","Point","LineString","Polygon"],Jd.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var a,u=c.readVarint()+c.pos,p=1,_=0,w=0,C=0,M=[];c.pos<u;){if(_<=0){var S=c.readVarint();p=7&S,_=S>>3}if(_--,p===1||p===2)w+=c.readSVarint(),C+=c.readSVarint(),p===1&&(a&&M.push(a),a=[]),a.push(new CN(w,C));else{if(p!==7)throw new Error("unknown command "+p);a&&a.push(a[0].clone())}}return a&&M.push(a),M},Jd.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var a=c.readVarint()+c.pos,u=1,p=0,_=0,w=0,C=1/0,M=-1/0,S=1/0,E=-1/0;c.pos<a;){if(p<=0){var k=c.readVarint();u=7&k,p=k>>3}if(p--,u===1||u===2)(_+=c.readSVarint())<C&&(C=_),_>M&&(M=_),(w+=c.readSVarint())<S&&(S=w),w>E&&(E=w);else if(u!==7)throw new Error("unknown command "+u)}return[C,S,M,E]},Jd.prototype.toGeoJSON=function(c,a,u){var p,_,w=this.extent*Math.pow(2,u),C=this.extent*c,M=this.extent*a,S=this.loadGeometry(),E=Jd.types[this.type];function k($){for(var G=0;G<$.length;G++){var X=$[G];$[G]=[360*(X.x+C)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(X.y+M)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var R=[];for(p=0;p<S.length;p++)R[p]=S[p][0];k(S=R);break;case 2:for(p=0;p<S.length;p++)k(S[p]);break;case 3:for(S=function($){var G=$.length;if(G<=1)return[$];for(var X,re,le=[],xe=0;xe<G;xe++){var ue=MN($[xe]);ue!==0&&(re===void 0&&(re=ue<0),re===ue<0?(X&&le.push(X),X=[$[xe]]):X.push($[xe]))}return X&&le.push(X),le}(S),p=0;p<S.length;p++)for(_=0;_<S[p].length;_++)k(S[p][_])}S.length===1?S=S[0]:E="Multi"+E;var j={type:"Feature",geometry:{type:E,coordinates:S},properties:this.properties};return"id"in this&&(j.id=this.id),j};var DN=aS,oS=cS;function cS(c,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(TN,this,a),this.length=this._features.length}function TN(c,a,u){c===15?a.version=u.readVarint():c===1?a.name=u.readString():c===5?a.extent=u.readVarint():c===2?a._features.push(u.pos):c===3?a._keys.push(u.readString()):c===4&&a._values.push(function(p){for(var _=null,w=p.readVarint()+p.pos;p.pos<w;){var C=p.readVarint()>>3;_=C===1?p.readString():C===2?p.readFloat():C===3?p.readDouble():C===4?p.readVarint64():C===5?p.readVarint():C===6?p.readSVarint():C===7?p.readBoolean():null}return _}(u))}cS.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var a=this._pbf.readVarint()+this._pbf.pos;return new DN(this._pbf,a,this.extent,this._keys,this._values)};var SN=oS;function ON(c,a,u){if(c===3){var p=new SN(u,u.readVarint()+u.pos);p.length&&(a[p.name]=p)}}al.VectorTile=function(c,a){this.layers=c.readFields(ON,{},a)},al.VectorTileFeature=aS,al.VectorTileLayer=oS;let IN=al.VectorTileFeature.types,r1=Math.pow(2,13);function Ef(c,a,u,p,_,w,C,M){c.emplaceBack(a,u,2*Math.floor(p*r1)+C,_*r1*2,w*r1*2,Math.round(M))}class s1{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new ne,this.centroidVertexArray=new N,this.indexArray=new Fe,this.programConfigurations=new Ti(a.layers,a.zoom),this.segments=new pt,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,p){this.features=[],this.hasPattern=t1("fill-extrusion",this.layers,u);for(let{feature:_,id:w,index:C,sourceLayerIndex:M}of a){let S=this.layers[0]._featureFilter.needGeometry,E=hc(_,S);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),E,p))continue;let k={id:w,sourceLayerIndex:M,index:C,geometry:S?E.geometry:dc(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(n1("fill-extrusion",this.layers,k,this.zoom,u)):this.addFeature(k,k.geometry,C,p,{}),u.featureIndex.insert(_,k.geometry,C,M,this.index,!0)}}addFeatures(a,u,p){for(let _ of this.features){let{geometry:w}=_;this.addFeature(_,w,_.index,u,p)}}update(a,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,wN),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,bN.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,u,p,_,w){let C={x:0,y:0,vertexCount:0};for(let M of e1(u,500)){let S=0;for(let G of M)S+=G.length;let E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let G of M){if(G.length===0||PN(G))continue;let X=0;for(let re=0;re<G.length;re++){let le=G[re];if(re>=1){let xe=G[re-1];if(!EN(le,xe)){E.vertexLength+4>pt.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let ue=le.sub(xe)._perp()._unit(),ve=xe.dist(le);X+ve>32768&&(X=0),Ef(this.layoutVertexArray,le.x,le.y,ue.x,ue.y,0,0,X),Ef(this.layoutVertexArray,le.x,le.y,ue.x,ue.y,0,1,X),C.x+=2*le.x,C.y+=2*le.y,C.vertexCount+=2,X+=ve,Ef(this.layoutVertexArray,xe.x,xe.y,ue.x,ue.y,0,0,X),Ef(this.layoutVertexArray,xe.x,xe.y,ue.x,ue.y,0,1,X),C.x+=2*xe.x,C.y+=2*xe.y,C.vertexCount+=2;let Ve=E.vertexLength;this.indexArray.emplaceBack(Ve,Ve+2,Ve+1),this.indexArray.emplaceBack(Ve+1,Ve+2,Ve+3),E.vertexLength+=4,E.primitiveLength+=2}}}}if(E.vertexLength+S>pt.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray)),IN[a.type]!=="Polygon")continue;let k=[],R=[],j=E.vertexLength;for(let G of M)if(G.length!==0){G!==M[0]&&R.push(k.length/2);for(let X=0;X<G.length;X++){let re=G[X];Ef(this.layoutVertexArray,re.x,re.y,0,0,1,1,0),C.x+=re.x,C.y+=re.y,C.vertexCount+=1,k.push(re.x),k.push(re.y)}}let $=nS(k,R);for(let G=0;G<$.length;G+=3)this.indexArray.emplaceBack(j+$[G],j+$[G+2],j+$[G+1]);E.primitiveLength+=$.length/3,E.vertexLength+=S}for(let M=0;M<C.vertexCount;M++)this.centroidVertexArray.emplaceBack(Math.floor(C.x/C.vertexCount),Math.floor(C.y/C.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,w,_)}}function EN(c,a){return c.x===a.x&&(c.x<0||c.x>Ni)||c.y===a.y&&(c.y<0||c.y>Ni)}function PN(c){return c.every(a=>a.x<0)||c.every(a=>a.x>Ni)||c.every(a=>a.y<0)||c.every(a=>a.y>Ni)}let lS;Ot("FillExtrusionBucket",s1,{omit:["layers","features"]});var kN={get paint(){return lS=lS||new cs({"fill-extrusion-opacity":new Vt(Be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Gt(Be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Vt(Be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Vt(Be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new jd(Be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Gt(Be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Gt(Be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Vt(Be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class AN extends sa{constructor(a){super(a,kN)}createBucket(a){return new s1(a)}queryRadius(){return b_(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(a,u,p,_,w,C,M,S){let E=w_(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),C.angle,M),k=this.paint.get("fill-extrusion-height").evaluate(u,p),R=this.paint.get("fill-extrusion-base").evaluate(u,p),j=function(G,X,re,le){let xe=[];for(let ue of G){let ve=[ue.x,ue.y,0,1];C_(ve,ve,X),xe.push(new v(ve[0]/ve[3],ve[1]/ve[3]))}return xe}(E,S),$=function(G,X,re,le){let xe=[],ue=[],ve=le[8]*X,Ve=le[9]*X,He=le[10]*X,Tt=le[11]*X,At=le[8]*re,Dt=le[9]*re,bt=le[10]*re,dt=le[11]*re;for(let It of G){let _t=[],et=[];for(let $t of It){let jt=$t.x,xn=$t.y,oi=le[0]*jt+le[4]*xn+le[12],vi=le[1]*jt+le[5]*xn+le[13],lr=le[2]*jt+le[6]*xn+le[14],qs=le[3]*jt+le[7]*xn+le[15],us=lr+He,nr=qs+Tt,xr=oi+At,kr=vi+Dt,ds=lr+bt,hs=qs+dt,ur=new v((oi+ve)/nr,(vi+Ve)/nr);ur.z=us/nr,_t.push(ur);let dr=new v(xr/hs,kr/hs);dr.z=ds/hs,et.push(dr)}xe.push(_t),ue.push(et)}return[xe,ue]}(_,R,k,S);return function(G,X,re){let le=1/0;bf(re,X)&&(le=uS(re,X[0]));for(let xe=0;xe<X.length;xe++){let ue=X[xe],ve=G[xe];for(let Ve=0;Ve<ue.length-1;Ve++){let He=ue[Ve],Tt=[He,ue[Ve+1],ve[Ve+1],ve[Ve],He];yf(re,Tt)&&(le=Math.min(le,uS(re,Tt)))}}return le!==1/0&&le}($[0],$[1],j)}}function Pf(c,a){return c.x*a.x+c.y*a.y}function uS(c,a){if(c.length===1){let u=0,p=a[u++],_;for(;!_||p.equals(_);)if(_=a[u++],!_)return 1/0;for(;u<a.length;u++){let w=a[u],C=c[0],M=_.sub(p),S=w.sub(p),E=C.sub(p),k=Pf(M,M),R=Pf(M,S),j=Pf(S,S),$=Pf(E,M),G=Pf(E,S),X=k*j-R*R,re=(j*$-R*G)/X,le=(k*G-R*$)/X,xe=p.z*(1-re-le)+_.z*re+w.z*le;if(isFinite(xe))return xe}return 1/0}{let u=1/0;for(let p of a)u=Math.min(u,p.z);return u}}let RN=qi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:FN}=RN,LN=qi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:NN}=LN,BN=al.VectorTileFeature.types,jN=Math.cos(Math.PI/180*37.5),dS=Math.pow(2,14)/.5;class a1{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new ae,this.layoutVertexArray2=new J,this.indexArray=new Fe,this.programConfigurations=new Ti(a.layers,a.zoom),this.segments=new pt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,p){this.hasPattern=t1("line",this.layers,u);let _=this.layers[0].layout.get("line-sort-key"),w=!_.isConstant(),C=[];for(let{feature:M,id:S,index:E,sourceLayerIndex:k}of a){let R=this.layers[0]._featureFilter.needGeometry,j=hc(M,R);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),j,p))continue;let $=w?_.evaluate(j,{},p):void 0,G={id:S,properties:M.properties,type:M.type,sourceLayerIndex:k,index:E,geometry:R?j.geometry:dc(M),patterns:{},sortKey:$};C.push(G)}w&&C.sort((M,S)=>M.sortKey-S.sortKey);for(let M of C){let{geometry:S,index:E,sourceLayerIndex:k}=M;if(this.hasPattern){let R=n1("line",this.layers,M,this.zoom,u);this.patternFeatures.push(R)}else this.addFeature(M,S,E,p,{});u.featureIndex.insert(a[E].feature,S,E,k,this.index)}}update(a,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,p)}addFeatures(a,u,p){for(let _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,NN)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,FN),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,u,p,_,w){let C=this.layers[0].layout,M=C.get("line-join").evaluate(a,{}),S=C.get("line-cap"),E=C.get("line-miter-limit"),k=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(let R of u)this.addLine(R,a,M,S,E,k);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,w,_)}addLine(a,u,p,_,w,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let le=0;le<a.length-1;le++)this.totalDistance+=a[le].dist(a[le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let M=BN[u.type]==="Polygon",S=a.length;for(;S>=2&&a[S-1].equals(a[S-2]);)S--;let E=0;for(;E<S-1&&a[E].equals(a[E+1]);)E++;if(S<(M?3:2))return;p==="bevel"&&(w=1.05);let k=this.overscaling<=16?15*Ni/(512*this.overscaling):0,R=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray),j,$,G,X,re;this.e1=this.e2=-1,M&&(j=a[S-2],re=a[E].sub(j)._unit()._perp());for(let le=E;le<S;le++){if(G=le===S-1?M?a[E+1]:void 0:a[le+1],G&&a[le].equals(G))continue;re&&(X=re),j&&($=j),j=a[le],re=G?G.sub(j)._unit()._perp():X,X=X||re;let xe=X.add(re);xe.x===0&&xe.y===0||xe._unit();let ue=X.x*re.x+X.y*re.y,ve=xe.x*re.x+xe.y*re.y,Ve=ve!==0?1/ve:1/0,He=2*Math.sqrt(2-2*ve),Tt=ve<jN&&$&&G,At=X.x*re.y-X.y*re.x>0;if(Tt&&le>E){let dt=j.dist($);if(dt>2*k){let It=j.sub(j.sub($)._mult(k/dt)._round());this.updateDistance($,It),this.addCurrentVertex(It,X,0,0,R),$=It}}let Dt=$&&G,bt=Dt?p:M?"butt":_;if(Dt&&bt==="round"&&(Ve<C?bt="miter":Ve<=2&&(bt="fakeround")),bt==="miter"&&Ve>w&&(bt="bevel"),bt==="bevel"&&(Ve>2&&(bt="flipbevel"),Ve<w&&(bt="miter")),$&&this.updateDistance($,j),bt==="miter")xe._mult(Ve),this.addCurrentVertex(j,xe,0,0,R);else if(bt==="flipbevel"){if(Ve>100)xe=re.mult(-1);else{let dt=Ve*X.add(re).mag()/X.sub(re).mag();xe._perp()._mult(dt*(At?-1:1))}this.addCurrentVertex(j,xe,0,0,R),this.addCurrentVertex(j,xe.mult(-1),0,0,R)}else if(bt==="bevel"||bt==="fakeround"){let dt=-Math.sqrt(Ve*Ve-1),It=At?dt:0,_t=At?0:dt;if($&&this.addCurrentVertex(j,X,It,_t,R),bt==="fakeround"){let et=Math.round(180*He/Math.PI/20);for(let $t=1;$t<et;$t++){let jt=$t/et;if(jt!==.5){let oi=jt-.5;jt+=jt*oi*(jt-1)*((1.0904+ue*(ue*(3.55645-1.43519*ue)-3.2452))*oi*oi+(.848013+ue*(.215638*ue-1.06021)))}let xn=re.sub(X)._mult(jt)._add(X)._unit()._mult(At?-1:1);this.addHalfVertex(j,xn.x,xn.y,!1,At,0,R)}}G&&this.addCurrentVertex(j,re,-It,-_t,R)}else if(bt==="butt")this.addCurrentVertex(j,xe,0,0,R);else if(bt==="square"){let dt=$?1:-1;this.addCurrentVertex(j,xe,dt,dt,R)}else bt==="round"&&($&&(this.addCurrentVertex(j,X,0,0,R),this.addCurrentVertex(j,X,1,1,R,!0)),G&&(this.addCurrentVertex(j,re,-1,-1,R,!0),this.addCurrentVertex(j,re,0,0,R)));if(Tt&&le<S-1){let dt=j.dist(G);if(dt>2*k){let It=j.add(G.sub(j)._mult(k/dt)._round());this.updateDistance(j,It),this.addCurrentVertex(It,re,0,0,R),j=It}}}}addCurrentVertex(a,u,p,_,w,C=!1){let M=u.y*_-u.x,S=-u.y-u.x*_;this.addHalfVertex(a,u.x+u.y*p,u.y-u.x*p,C,!1,p,w),this.addHalfVertex(a,M,S,C,!0,-_,w),this.distance>dS/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,u,p,_,w,C))}addHalfVertex({x:a,y:u},p,_,w,C,M,S){let E=.5*(this.lineClips?this.scaledDistance*(dS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(w?1:0),(u<<1)+(C?1:0),Math.round(63*p)+128,Math.round(63*_)+128,1+(M===0?0:M<0?-1:1)|(63&E)<<2,E>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let k=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,k),S.primitiveLength++),C?this.e2=k:this.e1=k}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,u){this.distance+=a.dist(u),this.updateScaledDistance()}}let hS,pS;Ot("LineBucket",a1,{omit:["layers","patternFeatures"]});var fS={get paint(){return pS=pS||new cs({"line-opacity":new Gt(Be.paint_line["line-opacity"]),"line-color":new Gt(Be.paint_line["line-color"]),"line-translate":new Vt(Be.paint_line["line-translate"]),"line-translate-anchor":new Vt(Be.paint_line["line-translate-anchor"]),"line-width":new Gt(Be.paint_line["line-width"]),"line-gap-width":new Gt(Be.paint_line["line-gap-width"]),"line-offset":new Gt(Be.paint_line["line-offset"]),"line-blur":new Gt(Be.paint_line["line-blur"]),"line-dasharray":new cu(Be.paint_line["line-dasharray"]),"line-pattern":new jd(Be.paint_line["line-pattern"]),"line-gradient":new lf(Be.paint_line["line-gradient"])})},get layout(){return hS=hS||new cs({"line-cap":new Vt(Be.layout_line["line-cap"]),"line-join":new Gt(Be.layout_line["line-join"]),"line-miter-limit":new Vt(Be.layout_line["line-miter-limit"]),"line-round-limit":new Vt(Be.layout_line["line-round-limit"]),"line-sort-key":new Gt(Be.layout_line["line-sort-key"])})}};class VN extends Gt{possiblyEvaluate(a,u){return u=new gi(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(a,u)}evaluate(a,u,p,_){return u=We({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(a,u,p,_)}}let S_;class zN extends sa{constructor(a){super(a,fS),this.gradientVersion=0,S_||(S_=new VN(fS.paint.properties["line-width"].specification),S_.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){let u=this.gradientExpression();this.stepInterpolant=!!function(p){return p._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof eu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,u){super.recalculate(a,u),this.paint._values["line-floorwidth"]=S_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new a1(a)}queryRadius(a){let u=a,p=mS(xf("line-width",this,u),xf("line-gap-width",this,u)),_=xf("line-offset",this,u);return p/2+Math.abs(_)+b_(this.paint.get("line-translate"))}queryIntersectsFeature(a,u,p,_,w,C,M){let S=w_(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),C.angle,M),E=M/2*mS(this.paint.get("line-width").evaluate(u,p),this.paint.get("line-gap-width").evaluate(u,p)),k=this.paint.get("line-offset").evaluate(u,p);return k&&(_=function(R,j){let $=[];for(let G=0;G<R.length;G++){let X=R[G],re=[];for(let le=0;le<X.length;le++){let xe=X[le-1],ue=X[le],ve=X[le+1],Ve=le===0?new v(0,0):ue.sub(xe)._unit()._perp(),He=le===X.length-1?new v(0,0):ve.sub(ue)._unit()._perp(),Tt=Ve._add(He)._unit(),At=Tt.x*He.x+Tt.y*He.y;At!==0&&Tt._mult(1/At),re.push(Tt._mult(j)._add(ue))}$.push(re)}return $}(_,k*M)),function(R,j,$){for(let G=0;G<j.length;G++){let X=j[G];if(R.length>=3){for(let re=0;re<X.length;re++)if(Yd(R,X[re]))return!0}if(wf(R,X,$))return!0}return!1}(S,_,E)}isTileClipped(){return!0}}function mS(c,a){return a>0?a+2*c:c}let UN=qi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$N=qi([{name:"a_projected_pos",components:3,type:"Float32"}],4);qi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let HN=qi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);qi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let gS=qi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),qN=qi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function GN(c,a,u){return c.sections.forEach(p=>{p.text=function(_,w,C){let M=w.layout.get("text-transform").evaluate(C,{});return M==="uppercase"?_=_.toLocaleUpperCase():M==="lowercase"&&(_=_.toLocaleLowerCase()),Eo.applyArabicShaping&&(_=Eo.applyArabicShaping(_)),_}(p.text,a,u)}),c}qi([{name:"triangle",components:3,type:"Uint16"}]),qi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),qi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),qi([{type:"Float32",name:"offsetX"}]),qi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),qi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let kf={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var cr=24,_S=ei,vS=function(c,a,u,p,_){var w,C,M=8*_-p-1,S=(1<<M)-1,E=S>>1,k=-7,R=u?_-1:0,j=u?-1:1,$=c[a+R];for(R+=j,w=$&(1<<-k)-1,$>>=-k,k+=M;k>0;w=256*w+c[a+R],R+=j,k-=8);for(C=w&(1<<-k)-1,w>>=-k,k+=p;k>0;C=256*C+c[a+R],R+=j,k-=8);if(w===0)w=1-E;else{if(w===S)return C?NaN:1/0*($?-1:1);C+=Math.pow(2,p),w-=E}return($?-1:1)*C*Math.pow(2,w-p)},yS=function(c,a,u,p,_,w){var C,M,S,E=8*w-_-1,k=(1<<E)-1,R=k>>1,j=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=p?0:w-1,G=p?1:-1,X=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(M=isNaN(a)?1:0,C=k):(C=Math.floor(Math.log(a)/Math.LN2),a*(S=Math.pow(2,-C))<1&&(C--,S*=2),(a+=C+R>=1?j/S:j*Math.pow(2,1-R))*S>=2&&(C++,S/=2),C+R>=k?(M=0,C=k):C+R>=1?(M=(a*S-1)*Math.pow(2,_),C+=R):(M=a*Math.pow(2,R-1)*Math.pow(2,_),C=0));_>=8;c[u+$]=255&M,$+=G,M/=256,_-=8);for(C=C<<_|M,E+=_;E>0;c[u+$]=255&C,$+=G,C/=256,E-=8);c[u+$-G]|=128*X};function ei(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}ei.Varint=0,ei.Fixed64=1,ei.Bytes=2,ei.Fixed32=5;var o1=4294967296,bS=1/o1,wS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function pc(c){return c.type===ei.Bytes?c.readVarint()+c.pos:c.pos+1}function Xd(c,a,u){return u?4294967296*a+(c>>>0):4294967296*(a>>>0)+(c>>>0)}function CS(c,a,u){var p=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));u.realloc(p);for(var _=u.pos-1;_>=c;_--)u.buf[_+p]=u.buf[_]}function WN(c,a){for(var u=0;u<c.length;u++)a.writeVarint(c[u])}function ZN(c,a){for(var u=0;u<c.length;u++)a.writeSVarint(c[u])}function YN(c,a){for(var u=0;u<c.length;u++)a.writeFloat(c[u])}function KN(c,a){for(var u=0;u<c.length;u++)a.writeDouble(c[u])}function QN(c,a){for(var u=0;u<c.length;u++)a.writeBoolean(c[u])}function JN(c,a){for(var u=0;u<c.length;u++)a.writeFixed32(c[u])}function XN(c,a){for(var u=0;u<c.length;u++)a.writeSFixed32(c[u])}function e4(c,a){for(var u=0;u<c.length;u++)a.writeFixed64(c[u])}function t4(c,a){for(var u=0;u<c.length;u++)a.writeSFixed64(c[u])}function O_(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+16777216*c[a+3]}function eh(c,a,u){c[u]=a,c[u+1]=a>>>8,c[u+2]=a>>>16,c[u+3]=a>>>24}function xS(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+(c[a+3]<<24)}ei.prototype={destroy:function(){this.buf=null},readFields:function(c,a,u){for(u=u||this.length;this.pos<u;){var p=this.readVarint(),_=p>>3,w=this.pos;this.type=7&p,c(_,a,this),this.pos===w&&this.skip(p)}return a},readMessage:function(c,a){return this.readFields(c,a,this.readVarint()+this.pos)},readFixed32:function(){var c=O_(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=xS(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=O_(this.buf,this.pos)+O_(this.buf,this.pos+4)*o1;return this.pos+=8,c},readSFixed64:function(){var c=O_(this.buf,this.pos)+xS(this.buf,this.pos+4)*o1;return this.pos+=8,c},readFloat:function(){var c=vS(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=vS(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var a,u,p=this.buf;return a=127&(u=p[this.pos++]),u<128?a:(a|=(127&(u=p[this.pos++]))<<7,u<128?a:(a|=(127&(u=p[this.pos++]))<<14,u<128?a:(a|=(127&(u=p[this.pos++]))<<21,u<128?a:function(_,w,C){var M,S,E=C.buf;if(M=(112&(S=E[C.pos++]))>>4,S<128||(M|=(127&(S=E[C.pos++]))<<3,S<128)||(M|=(127&(S=E[C.pos++]))<<10,S<128)||(M|=(127&(S=E[C.pos++]))<<17,S<128)||(M|=(127&(S=E[C.pos++]))<<24,S<128)||(M|=(1&(S=E[C.pos++]))<<31,S<128))return Xd(_,M,w);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(u=p[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,a=this.pos;return this.pos=c,c-a>=12&&wS?function(u,p,_){return wS.decode(u.subarray(p,_))}(this.buf,a,c):function(u,p,_){for(var w="",C=p;C<_;){var M,S,E,k=u[C],R=null,j=k>239?4:k>223?3:k>191?2:1;if(C+j>_)break;j===1?k<128&&(R=k):j===2?(192&(M=u[C+1]))==128&&(R=(31&k)<<6|63&M)<=127&&(R=null):j===3?(S=u[C+2],(192&(M=u[C+1]))==128&&(192&S)==128&&((R=(15&k)<<12|(63&M)<<6|63&S)<=2047||R>=55296&&R<=57343)&&(R=null)):j===4&&(S=u[C+2],E=u[C+3],(192&(M=u[C+1]))==128&&(192&S)==128&&(192&E)==128&&((R=(15&k)<<18|(63&M)<<12|(63&S)<<6|63&E)<=65535||R>=1114112)&&(R=null)),R===null?(R=65533,j=1):R>65535&&(R-=65536,w+=String.fromCharCode(R>>>10&1023|55296),R=56320|1023&R),w+=String.fromCharCode(R),C+=j}return w}(this.buf,a,c)},readBytes:function(){var c=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,c);return this.pos=c,a},readPackedVarint:function(c,a){if(this.type!==ei.Bytes)return c.push(this.readVarint(a));var u=pc(this);for(c=c||[];this.pos<u;)c.push(this.readVarint(a));return c},readPackedSVarint:function(c){if(this.type!==ei.Bytes)return c.push(this.readSVarint());var a=pc(this);for(c=c||[];this.pos<a;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==ei.Bytes)return c.push(this.readBoolean());var a=pc(this);for(c=c||[];this.pos<a;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==ei.Bytes)return c.push(this.readFloat());var a=pc(this);for(c=c||[];this.pos<a;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==ei.Bytes)return c.push(this.readDouble());var a=pc(this);for(c=c||[];this.pos<a;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==ei.Bytes)return c.push(this.readFixed32());var a=pc(this);for(c=c||[];this.pos<a;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==ei.Bytes)return c.push(this.readSFixed32());var a=pc(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==ei.Bytes)return c.push(this.readFixed64());var a=pc(this);for(c=c||[];this.pos<a;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==ei.Bytes)return c.push(this.readSFixed64());var a=pc(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed64());return c},skip:function(c){var a=7&c;if(a===ei.Varint)for(;this.buf[this.pos++]>127;);else if(a===ei.Bytes)this.pos=this.readVarint()+this.pos;else if(a===ei.Fixed32)this.pos+=4;else{if(a!==ei.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(c,a){this.writeVarint(c<<3|a)},realloc:function(c){for(var a=this.length||16;a<this.pos+c;)a*=2;if(a!==this.length){var u=new Uint8Array(a);u.set(this.buf),this.buf=u,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),eh(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),eh(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),eh(this.buf,-1&c,this.pos),eh(this.buf,Math.floor(c*bS),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),eh(this.buf,-1&c,this.pos),eh(this.buf,Math.floor(c*bS),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(a,u){var p,_;if(a>=0?(p=a%4294967296|0,_=a/4294967296|0):(_=~(-a/4294967296),4294967295^(p=~(-a%4294967296))?p=p+1|0:(p=0,_=_+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(w,C,M){M.buf[M.pos++]=127&w|128,w>>>=7,M.buf[M.pos++]=127&w|128,w>>>=7,M.buf[M.pos++]=127&w|128,w>>>=7,M.buf[M.pos++]=127&w|128,M.buf[M.pos]=127&(w>>>=7)}(p,0,u),function(w,C){var M=(7&w)<<4;C.buf[C.pos++]|=M|((w>>>=3)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w)))))}(_,u)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var a=this.pos;this.pos=function(p,_,w){for(var C,M,S=0;S<_.length;S++){if((C=_.charCodeAt(S))>55295&&C<57344){if(!M){C>56319||S+1===_.length?(p[w++]=239,p[w++]=191,p[w++]=189):M=C;continue}if(C<56320){p[w++]=239,p[w++]=191,p[w++]=189,M=C;continue}C=M-55296<<10|C-56320|65536,M=null}else M&&(p[w++]=239,p[w++]=191,p[w++]=189,M=null);C<128?p[w++]=C:(C<2048?p[w++]=C>>6|192:(C<65536?p[w++]=C>>12|224:(p[w++]=C>>18|240,p[w++]=C>>12&63|128),p[w++]=C>>6&63|128),p[w++]=63&C|128)}return w}(this.buf,c,this.pos);var u=this.pos-a;u>=128&&CS(a,u,this),this.pos=a-1,this.writeVarint(u),this.pos+=u},writeFloat:function(c){this.realloc(4),yS(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),yS(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var a=c.length;this.writeVarint(a),this.realloc(a);for(var u=0;u<a;u++)this.buf[this.pos++]=c[u]},writeRawMessage:function(c,a){this.pos++;var u=this.pos;c(a,this);var p=this.pos-u;p>=128&&CS(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p},writeMessage:function(c,a,u){this.writeTag(c,ei.Bytes),this.writeRawMessage(a,u)},writePackedVarint:function(c,a){a.length&&this.writeMessage(c,WN,a)},writePackedSVarint:function(c,a){a.length&&this.writeMessage(c,ZN,a)},writePackedBoolean:function(c,a){a.length&&this.writeMessage(c,QN,a)},writePackedFloat:function(c,a){a.length&&this.writeMessage(c,YN,a)},writePackedDouble:function(c,a){a.length&&this.writeMessage(c,KN,a)},writePackedFixed32:function(c,a){a.length&&this.writeMessage(c,JN,a)},writePackedSFixed32:function(c,a){a.length&&this.writeMessage(c,XN,a)},writePackedFixed64:function(c,a){a.length&&this.writeMessage(c,e4,a)},writePackedSFixed64:function(c,a){a.length&&this.writeMessage(c,t4,a)},writeBytesField:function(c,a){this.writeTag(c,ei.Bytes),this.writeBytes(a)},writeFixed32Field:function(c,a){this.writeTag(c,ei.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(c,a){this.writeTag(c,ei.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(c,a){this.writeTag(c,ei.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(c,a){this.writeTag(c,ei.Fixed64),this.writeSFixed64(a)},writeVarintField:function(c,a){this.writeTag(c,ei.Varint),this.writeVarint(a)},writeSVarintField:function(c,a){this.writeTag(c,ei.Varint),this.writeSVarint(a)},writeStringField:function(c,a){this.writeTag(c,ei.Bytes),this.writeString(a)},writeFloatField:function(c,a){this.writeTag(c,ei.Fixed32),this.writeFloat(a)},writeDoubleField:function(c,a){this.writeTag(c,ei.Fixed64),this.writeDouble(a)},writeBooleanField:function(c,a){this.writeVarintField(c,!!a)}};var c1=l(_S);let l1=3;function n4(c,a,u){c===1&&u.readMessage(i4,a)}function i4(c,a,u){if(c===3){let{id:p,bitmap:_,width:w,height:C,left:M,top:S,advance:E}=u.readMessage(r4,{});a.push({id:p,bitmap:new Df({width:w+2*l1,height:C+2*l1},_),metrics:{width:w,height:C,left:M,top:S,advance:E}})}}function r4(c,a,u){c===1?a.id=u.readVarint():c===2?a.bitmap=u.readBytes():c===3?a.width=u.readVarint():c===4?a.height=u.readVarint():c===5?a.left=u.readSVarint():c===6?a.top=u.readSVarint():c===7&&(a.advance=u.readVarint())}let MS=l1;function DS(c){let a=0,u=0;for(let C of c)a+=C.w*C.h,u=Math.max(u,C.w);c.sort((C,M)=>M.h-C.h);let p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),u),h:1/0}],_=0,w=0;for(let C of c)for(let M=p.length-1;M>=0;M--){let S=p[M];if(!(C.w>S.w||C.h>S.h)){if(C.x=S.x,C.y=S.y,w=Math.max(w,C.y+C.h),_=Math.max(_,C.x+C.w),C.w===S.w&&C.h===S.h){let E=p.pop();M<p.length&&(p[M]=E)}else C.h===S.h?(S.x+=C.w,S.w-=C.w):C.w===S.w?(S.y+=C.h,S.h-=C.h):(p.push({x:S.x+C.w,y:S.y,w:S.w-C.w,h:C.h}),S.y+=C.h,S.h-=C.h);break}}return{w:_,h:w,fill:a/(_*w)||0}}let Ss=1;class u1{constructor(a,{pixelRatio:u,version:p,stretchX:_,stretchY:w,content:C}){this.paddedRect=a,this.pixelRatio=u,this.stretchX=_,this.stretchY=w,this.content=C,this.version=p}get tl(){return[this.paddedRect.x+Ss,this.paddedRect.y+Ss]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ss,this.paddedRect.y+this.paddedRect.h-Ss]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ss)/this.pixelRatio,(this.paddedRect.h-2*Ss)/this.pixelRatio]}}class TS{constructor(a,u){let p={},_={};this.haveRenderCallbacks=[];let w=[];this.addImages(a,p,w),this.addImages(u,_,w);let{w:C,h:M}=DS(w),S=new aa({width:C||1,height:M||1});for(let E in a){let k=a[E],R=p[E].paddedRect;aa.copy(k.data,S,{x:0,y:0},{x:R.x+Ss,y:R.y+Ss},k.data)}for(let E in u){let k=u[E],R=_[E].paddedRect,j=R.x+Ss,$=R.y+Ss,G=k.data.width,X=k.data.height;aa.copy(k.data,S,{x:0,y:0},{x:j,y:$},k.data),aa.copy(k.data,S,{x:0,y:X-1},{x:j,y:$-1},{width:G,height:1}),aa.copy(k.data,S,{x:0,y:0},{x:j,y:$+X},{width:G,height:1}),aa.copy(k.data,S,{x:G-1,y:0},{x:j-1,y:$},{width:1,height:X}),aa.copy(k.data,S,{x:0,y:0},{x:j+G,y:$},{width:1,height:X})}this.image=S,this.iconPositions=p,this.patternPositions=_}addImages(a,u,p){for(let _ in a){let w=a[_],C={x:0,y:0,w:w.data.width+2*Ss,h:w.data.height+2*Ss};p.push(C),u[_]=new u1(C,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(a,u){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let p in a.updatedImages)this.patchUpdatedImage(this.iconPositions[p],a.getImage(p),u),this.patchUpdatedImage(this.patternPositions[p],a.getImage(p),u)}patchUpdatedImage(a,u,p){if(!a||!u||a.version===u.version)return;a.version=u.version;let[_,w]=a.tl;p.update(u.data,void 0,{x:_,y:w})}}var ol;Ot("ImagePosition",u1),Ot("ImageAtlas",TS),r.ah=void 0,(ol=r.ah||(r.ah={}))[ol.none=0]="none",ol[ol.horizontal=1]="horizontal",ol[ol.vertical=2]="vertical",ol[ol.horizontalOnly=3]="horizontalOnly";let Af=-17;class Rf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,u){let p=new Rf;return p.scale=a||1,p.fontStack=u,p}static forImage(a){let u=new Rf;return u.imageName=a,u}}class th{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,u){let p=new th;for(let _=0;_<a.sections.length;_++){let w=a.sections[_];w.image?p.addImageSection(w):p.addTextSection(w,u)}return p}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=function(a){let u="";for(let p=0;p<a.length;p++){let _=a.charCodeAt(p+1)||null,w=a.charCodeAt(p-1)||null;u+=_&&of(_)&&!kf[a[p+1]]||w&&of(w)&&!kf[a[p-1]]||!kf[a[p]]?a[p]:kf[a[p]]}return u}(this.text)}trim(){let a=0;for(let p=0;p<this.text.length&&E_[this.text.charCodeAt(p)];p++)a++;let u=this.text.length;for(let p=this.text.length-1;p>=0&&p>=a&&E_[this.text.charCodeAt(p)];p--)u--;this.text=this.text.substring(a,u),this.sectionIndex=this.sectionIndex.slice(a,u)}substring(a,u){let p=new th;return p.text=this.text.substring(a,u),p.sectionIndex=this.sectionIndex.slice(a,u),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,u)=>Math.max(a,this.sections[u].scale),0)}addTextSection(a,u){this.text+=a.text,this.sections.push(Rf.forText(a.scale,a.fontStack||u));let p=this.sections.length-1;for(let _=0;_<a.text.length;++_)this.sectionIndex.push(p)}addImageSection(a){let u=a.image?a.image.name:"";if(u.length===0)return void Qt("Can't add FormattedSection with an empty image.");let p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(Rf.forImage(u)),this.sectionIndex.push(this.sections.length-1)):Qt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function I_(c,a,u,p,_,w,C,M,S,E,k,R,j,$,G,X){let re=th.fromFeature(c,_),le;R===r.ah.vertical&&re.verticalizePunctuation();let{processBidirectionalText:xe,processStyledBidirectionalText:ue}=Eo;if(xe&&re.sections.length===1){le=[];let He=xe(re.toString(),d1(re,E,w,a,p,$,G));for(let Tt of He){let At=new th;At.text=Tt,At.sections=re.sections;for(let Dt=0;Dt<Tt.length;Dt++)At.sectionIndex.push(0);le.push(At)}}else if(ue){le=[];let He=ue(re.text,re.sectionIndex,d1(re,E,w,a,p,$,G));for(let Tt of He){let At=new th;At.text=Tt[0],At.sectionIndex=Tt[1],At.sections=re.sections,le.push(At)}}else le=function(He,Tt){let At=[],Dt=He.text,bt=0;for(let dt of Tt)At.push(He.substring(bt,dt)),bt=dt;return bt<Dt.length&&At.push(He.substring(bt,Dt.length)),At}(re,d1(re,E,w,a,p,$,G));let ve=[],Ve={positionedLines:ve,text:re.toString(),top:k[1],bottom:k[1],left:k[0],right:k[0],writingMode:R,iconsInText:!1,verticalizable:!1};return function(He,Tt,At,Dt,bt,dt,It,_t,et,$t,jt,xn){let oi=0,vi=Af,lr=0,qs=0,us=_t==="right"?1:_t==="left"?0:.5,nr=0;for(let ur of bt){ur.trim();let dr=ur.getMaxScale(),Hr=(dr-1)*cr,ps={positionedGlyphs:[],lineOffset:0};He.positionedLines[nr]=ps;let qr=ps.positionedGlyphs,Os=0;if(!ur.length()){vi+=dt,++nr;continue}for(let hr=0;hr<ur.length();hr++){let En=ur.getSection(hr),Gr=ur.getSectionIndex(hr),Ar=ur.getCharCode(hr),pr=0,Ta=null,eo=null,to=null,fc=cr,Sa=!(et===r.ah.horizontal||!jt&&!Ld(Ar)||jt&&(E_[Ar]||(xr=Ar,Mt.Arabic(xr)||Mt["Arabic Supplement"](xr)||Mt["Arabic Extended-A"](xr)||Mt["Arabic Presentation Forms-A"](xr)||Mt["Arabic Presentation Forms-B"](xr))));if(En.imageName){let ca=Dt[En.imageName];if(!ca)continue;to=En.imageName,He.iconsInText=He.iconsInText||!0,eo=ca.paddedRect;let Es=ca.displaySize;En.scale=En.scale*cr/xn,Ta={width:Es[0],height:Es[1],left:Ss,top:-MS,advance:Sa?Es[1]:Es[0]},pr=Hr+(cr-Es[1]*En.scale),fc=Ta.advance;let mc=Sa?Es[0]*En.scale-cr*dr:Es[1]*En.scale-cr*dr;mc>0&&mc>Os&&(Os=mc)}else{let ca=At[En.fontStack],Es=ca&&ca[Ar];if(Es&&Es.rect)eo=Es.rect,Ta=Es.metrics;else{let mc=Tt[En.fontStack],jf=mc&&mc[Ar];if(!jf)continue;Ta=jf.metrics}pr=(dr-En.scale)*cr}Sa?(He.verticalizable=!0,qr.push({glyph:Ar,imageName:to,x:oi,y:vi+pr,vertical:Sa,scale:En.scale,fontStack:En.fontStack,sectionIndex:Gr,metrics:Ta,rect:eo}),oi+=fc*En.scale+$t):(qr.push({glyph:Ar,imageName:to,x:oi,y:vi+pr,vertical:Sa,scale:En.scale,fontStack:En.fontStack,sectionIndex:Gr,metrics:Ta,rect:eo}),oi+=Ta.advance*En.scale+$t)}qr.length!==0&&(lr=Math.max(oi-$t,lr),o4(qr,0,qr.length-1,us,Os)),oi=0;let Is=dt*dr+Os;ps.lineOffset=Math.max(Os,Hr),vi+=Is,qs=Math.max(Is,qs),++nr}var xr;let kr=vi-Af,{horizontalAlign:ds,verticalAlign:hs}=h1(It);(function(ur,dr,Hr,ps,qr,Os,Is,hr,En){let Gr=(dr-Hr)*qr,Ar=0;Ar=Os!==Is?-hr*ps-Af:(-ps*En+.5)*Is;for(let pr of ur)for(let Ta of pr.positionedGlyphs)Ta.x+=Gr,Ta.y+=Ar})(He.positionedLines,us,ds,hs,lr,qs,dt,kr,bt.length),He.top+=-hs*kr,He.bottom=He.top+kr,He.left+=-ds*lr,He.right=He.left+lr}(Ve,a,u,p,le,C,M,S,R,E,j,X),!function(He){for(let Tt of He)if(Tt.positionedGlyphs.length!==0)return!1;return!0}(ve)&&Ve}let E_={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},s4={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function SS(c,a,u,p,_,w){if(a.imageName){let C=p[a.imageName];return C?C.displaySize[0]*a.scale*cr/w+_:0}{let C=u[a.fontStack],M=C&&C[c];return M?M.metrics.advance*a.scale+_:0}}function OS(c,a,u,p){let _=Math.pow(c-a,2);return p?c<a?_/2:2*_:_+Math.abs(u)*u}function a4(c,a,u){let p=0;return c===10&&(p-=1e4),u&&(p+=150),c!==40&&c!==65288||(p+=50),a!==41&&a!==65289||(p+=50),p}function IS(c,a,u,p,_,w){let C=null,M=OS(a,u,_,w);for(let S of p){let E=OS(a-S.x,u,_,w)+S.badness;E<=M&&(C=S,M=E)}return{index:c,x:a,priorBreak:C,badness:M}}function ES(c){return c?ES(c.priorBreak).concat(c.index):[]}function d1(c,a,u,p,_,w,C){if(w!=="point")return[];if(!c)return[];let M=[],S=function(j,$,G,X,re,le){let xe=0;for(let ue=0;ue<j.length();ue++){let ve=j.getSection(ue);xe+=SS(j.getCharCode(ue),ve,X,re,$,le)}return xe/Math.max(1,Math.ceil(xe/G))}(c,a,u,p,_,C),E=c.text.indexOf("\u200B")>=0,k=0;for(let j=0;j<c.length();j++){let $=c.getSection(j),G=c.getCharCode(j);if(E_[G]||(k+=SS(G,$,p,_,a,C)),j<c.length()-1){let X=!((R=G)<11904||!(Mt["Bopomofo Extended"](R)||Mt.Bopomofo(R)||Mt["CJK Compatibility Forms"](R)||Mt["CJK Compatibility Ideographs"](R)||Mt["CJK Compatibility"](R)||Mt["CJK Radicals Supplement"](R)||Mt["CJK Strokes"](R)||Mt["CJK Symbols and Punctuation"](R)||Mt["CJK Unified Ideographs Extension A"](R)||Mt["CJK Unified Ideographs"](R)||Mt["Enclosed CJK Letters and Months"](R)||Mt["Halfwidth and Fullwidth Forms"](R)||Mt.Hiragana(R)||Mt["Ideographic Description Characters"](R)||Mt["Kangxi Radicals"](R)||Mt["Katakana Phonetic Extensions"](R)||Mt.Katakana(R)||Mt["Vertical Forms"](R)||Mt["Yi Radicals"](R)||Mt["Yi Syllables"](R)));(s4[G]||X||$.imageName)&&M.push(IS(j+1,k,S,M,a4(G,c.getCharCode(j+1),X&&E),!1))}}var R;return ES(IS(c.length(),k,S,M,0,!0))}function h1(c){let a=.5,u=.5;switch(c){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:a,verticalAlign:u}}function o4(c,a,u,p,_){if(!p&&!_)return;let w=c[u],C=(c[u].x+w.metrics.advance*w.scale)*p;for(let M=a;M<=u;M++)c[M].x-=C,c[M].y+=_}function c4(c,a,u){let{horizontalAlign:p,verticalAlign:_}=h1(u),w=a[0]-c.displaySize[0]*p,C=a[1]-c.displaySize[1]*_;return{image:c,top:C,bottom:C+c.displaySize[1],left:w,right:w+c.displaySize[0]}}function PS(c,a,u,p,_,w){let C=c.image,M;if(C.content){let re=C.content,le=C.pixelRatio||1;M=[re[0]/le,re[1]/le,C.displaySize[0]-re[2]/le,C.displaySize[1]-re[3]/le]}let S=a.left*w,E=a.right*w,k,R,j,$;u==="width"||u==="both"?($=_[0]+S-p[3],R=_[0]+E+p[1]):($=_[0]+(S+E-C.displaySize[0])/2,R=$+C.displaySize[0]);let G=a.top*w,X=a.bottom*w;return u==="height"||u==="both"?(k=_[1]+G-p[0],j=_[1]+X+p[2]):(k=_[1]+(G+X-C.displaySize[1])/2,j=k+C.displaySize[1]),{image:C,top:k,right:R,bottom:j,left:$,collisionPadding:M}}let Ff=255,Ro=128,cl=Ff*Ro;function kS(c,a){let{expression:u}=a;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new gi(c+1))};if(u.kind==="source")return{kind:"source"};{let{zoomStops:p,interpolationType:_}=u,w=0;for(;w<p.length&&p[w]<=c;)w++;w=Math.max(0,w-1);let C=w;for(;C<p.length&&p[C]<c+1;)C++;C=Math.min(p.length-1,C);let M=p[w],S=p[C];return u.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:S,interpolationType:_}:{kind:"camera",minZoom:M,maxZoom:S,minSize:u.evaluate(new gi(M)),maxSize:u.evaluate(new gi(S)),interpolationType:_}}}function p1(c,a,u){let p="never",_=c.get(a);return _?p=_:c.get(u)&&(p="always"),p}let l4=al.VectorTileFeature.types,u4=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function P_(c,a,u,p,_,w,C,M,S,E,k,R,j){let $=M?Math.min(cl,Math.round(M[0])):0,G=M?Math.min(cl,Math.round(M[1])):0;c.emplaceBack(a,u,Math.round(32*p),Math.round(32*_),w,C,($<<1)+(S?1:0),G,16*E,16*k,256*R,256*j)}function f1(c,a,u){c.emplaceBack(a.x,a.y,u),c.emplaceBack(a.x,a.y,u),c.emplaceBack(a.x,a.y,u),c.emplaceBack(a.x,a.y,u)}function d4(c){for(let a of c.sections)if(qb(a.text))return!0;return!1}class m1{constructor(a){this.layoutVertexArray=new Ie,this.indexArray=new Fe,this.programConfigurations=a,this.segments=new pt,this.dynamicLayoutVertexArray=new oe,this.opacityVertexArray=new be,this.hasVisibleVertices=!1,this.placedSymbolArray=new h}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,u,p,_){this.isEmpty()||(p&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,UN.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,$N.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,u4,!0),this.opacityVertexBuffer.itemSize=1),(p||_)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ot("SymbolBuffers",m1);class g1{constructor(a,u,p){this.layoutVertexArray=new a,this.layoutAttributes=u,this.indexArray=new p,this.segments=new pt,this.collisionVertexArray=new ke}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,HN.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ot("CollisionBuffers",g1);class nh{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(C=>C.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Wb([]),this.placementViewportMatrix=Wb([]);let u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=kS(this.zoom,u["text-size"]),this.iconSizeData=kS(this.zoom,u["icon-size"]);let p=this.layers[0].layout,_=p.get("symbol-sort-key"),w=p.get("symbol-z-order");this.canOverlap=p1(p,"text-overlap","text-allow-overlap")!=="never"||p1(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(C=>r.ah[C])),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.sourceID=a.sourceID}createArrays(){this.text=new m1(new Ti(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new m1(new Ti(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new b,this.lineVertexArray=new D,this.symbolInstances=new g,this.textAnchorOffsets=new I}calculateGlyphDependencies(a,u,p,_,w){for(let C=0;C<a.length;C++)if(u[a.charCodeAt(C)]=!0,(p||_)&&w){let M=kf[a.charAt(C)];M&&(u[M.charCodeAt(0)]=!0)}}populate(a,u,p){let _=this.layers[0],w=_.layout,C=w.get("text-font"),M=w.get("text-field"),S=w.get("icon-image"),E=(M.value.kind!=="constant"||M.value.value instanceof Cs&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),k=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,R=w.get("symbol-sort-key");if(this.features=[],!E&&!k)return;let j=u.iconDependencies,$=u.glyphDependencies,G=u.availableImages,X=new gi(this.zoom);for(let{feature:re,id:le,index:xe,sourceLayerIndex:ue}of a){let ve=_._featureFilter.needGeometry,Ve=hc(re,ve);if(!_._featureFilter.filter(X,Ve,p))continue;let He,Tt;if(ve||(Ve.geometry=dc(re)),E){let Dt=_.getValueAndResolveTokens("text-field",Ve,p,G),bt=Cs.factory(Dt),dt=this.hasRTLText=this.hasRTLText||d4(bt);(!dt||Eo.getRTLTextPluginStatus()==="unavailable"||dt&&Eo.isParsed())&&(He=GN(bt,_,Ve))}if(k){let Dt=_.getValueAndResolveTokens("icon-image",Ve,p,G);Tt=Dt instanceof Us?Dt:Us.fromString(Dt)}if(!He&&!Tt)continue;let At=this.sortFeaturesByKey?R.evaluate(Ve,{},p):void 0;if(this.features.push({id:le,text:He,icon:Tt,index:xe,sourceLayerIndex:ue,geometry:Ve.geometry,properties:re.properties,type:l4[re.type],sortKey:At}),Tt&&(j[Tt.name]=!0),He){let Dt=C.evaluate(Ve,{},p).join(","),bt=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(r.ah.vertical)>=0;for(let dt of He.sections)if(dt.image)j[dt.image.name]=!0;else{let It=rl(He.toString()),_t=dt.fontStack||Dt,et=$[_t]=$[_t]||{};this.calculateGlyphDependencies(dt.text,et,bt,this.allowVerticalPlacement,It)}}}w.get("symbol-placement")==="line"&&(this.features=function(re){let le={},xe={},ue=[],ve=0;function Ve(Dt){ue.push(re[Dt]),ve++}function He(Dt,bt,dt){let It=xe[Dt];return delete xe[Dt],xe[bt]=It,ue[It].geometry[0].pop(),ue[It].geometry[0]=ue[It].geometry[0].concat(dt[0]),It}function Tt(Dt,bt,dt){let It=le[bt];return delete le[bt],le[Dt]=It,ue[It].geometry[0].shift(),ue[It].geometry[0]=dt[0].concat(ue[It].geometry[0]),It}function At(Dt,bt,dt){let It=dt?bt[0][bt[0].length-1]:bt[0][0];return`${Dt}:${It.x}:${It.y}`}for(let Dt=0;Dt<re.length;Dt++){let bt=re[Dt],dt=bt.geometry,It=bt.text?bt.text.toString():null;if(!It){Ve(Dt);continue}let _t=At(It,dt),et=At(It,dt,!0);if(_t in xe&&et in le&&xe[_t]!==le[et]){let $t=Tt(_t,et,dt),jt=He(_t,et,ue[$t].geometry);delete le[_t],delete xe[et],xe[At(It,ue[jt].geometry,!0)]=jt,ue[$t].geometry=null}else _t in xe?He(_t,et,dt):et in le?Tt(_t,et,dt):(Ve(Dt),le[_t]=ve-1,xe[et]=ve-1)}return ue.filter(Dt=>Dt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((re,le)=>re.sortKey-le.sortKey)}update(a,u,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,u,this.layers,p),this.icon.programConfigurations.updatePaintArrays(a,u,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,u){let p=this.lineVertexArray.length;if(a.segment!==void 0){let _=a.dist(u[a.segment+1]),w=a.dist(u[a.segment]),C={};for(let M=a.segment+1;M<u.length;M++)C[M]={x:u[M].x,y:u[M].y,tileUnitDistanceFromAnchor:_},M<u.length-1&&(_+=u[M+1].dist(u[M]));for(let M=a.segment||0;M>=0;M--)C[M]={x:u[M].x,y:u[M].y,tileUnitDistanceFromAnchor:w},M>0&&(w+=u[M-1].dist(u[M]));for(let M=0;M<u.length;M++){let S=C[M];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(a,u,p,_,w,C,M,S,E,k,R,j){let $=a.indexArray,G=a.layoutVertexArray,X=a.segments.prepareSegment(4*u.length,G,$,this.canOverlap?C.sortKey:void 0),re=this.glyphOffsetArray.length,le=X.vertexLength,xe=this.allowVerticalPlacement&&M===r.ah.vertical?Math.PI/2:0,ue=C.text&&C.text.sections;for(let ve=0;ve<u.length;ve++){let{tl:Ve,tr:He,bl:Tt,br:At,tex:Dt,pixelOffsetTL:bt,pixelOffsetBR:dt,minFontScaleX:It,minFontScaleY:_t,glyphOffset:et,isSDF:$t,sectionIndex:jt}=u[ve],xn=X.vertexLength,oi=et[1];P_(G,S.x,S.y,Ve.x,oi+Ve.y,Dt.x,Dt.y,p,$t,bt.x,bt.y,It,_t),P_(G,S.x,S.y,He.x,oi+He.y,Dt.x+Dt.w,Dt.y,p,$t,dt.x,bt.y,It,_t),P_(G,S.x,S.y,Tt.x,oi+Tt.y,Dt.x,Dt.y+Dt.h,p,$t,bt.x,dt.y,It,_t),P_(G,S.x,S.y,At.x,oi+At.y,Dt.x+Dt.w,Dt.y+Dt.h,p,$t,dt.x,dt.y,It,_t),f1(a.dynamicLayoutVertexArray,S,xe),$.emplaceBack(xn,xn+1,xn+2),$.emplaceBack(xn+1,xn+2,xn+3),X.vertexLength+=4,X.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(et[0]),ve!==u.length-1&&jt===u[ve+1].sectionIndex||a.programConfigurations.populatePaintArrays(G.length,C,C.index,{},j,ue&&ue[jt])}a.placedSymbolArray.emplaceBack(S.x,S.y,re,this.glyphOffsetArray.length-re,le,E,k,S.segment,p?p[0]:0,p?p[1]:0,_[0],_[1],M,0,!1,0,R)}_addCollisionDebugVertex(a,u,p,_,w,C){return u.emplaceBack(0,0),a.emplaceBack(p.x,p.y,_,w,Math.round(C.x),Math.round(C.y))}addCollisionDebugVertices(a,u,p,_,w,C,M){let S=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),E=S.vertexLength,k=w.layoutVertexArray,R=w.collisionVertexArray,j=M.anchorX,$=M.anchorY;this._addCollisionDebugVertex(k,R,C,j,$,new v(a,u)),this._addCollisionDebugVertex(k,R,C,j,$,new v(p,u)),this._addCollisionDebugVertex(k,R,C,j,$,new v(p,_)),this._addCollisionDebugVertex(k,R,C,j,$,new v(a,_)),S.vertexLength+=4;let G=w.indexArray;G.emplaceBack(E,E+1),G.emplaceBack(E+1,E+2),G.emplaceBack(E+2,E+3),G.emplaceBack(E+3,E),S.primitiveLength+=4}addDebugCollisionBoxes(a,u,p,_){for(let w=a;w<u;w++){let C=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,_?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new g1(Ee,gS.members,Ze),this.iconCollisionBox=new g1(Ee,gS.members,Ze);for(let a=0;a<this.symbolInstances.length;a++){let u=this.symbolInstances.get(a);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(a,u,p,_,w,C,M,S,E){let k={};for(let R=u;R<p;R++){let j=a.get(R);k.textBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},k.textFeatureIndex=j.featureIndex;break}for(let R=_;R<w;R++){let j=a.get(R);k.verticalTextBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},k.verticalTextFeatureIndex=j.featureIndex;break}for(let R=C;R<M;R++){let j=a.get(R);k.iconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},k.iconFeatureIndex=j.featureIndex;break}for(let R=S;R<E;R++){let j=a.get(R);k.verticalIconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},k.verticalIconFeatureIndex=j.featureIndex;break}return k}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){let p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,u){let p=a.placedSymbolArray.get(u),_=p.vertexStartIndex+4*p.numGlyphs;for(let w=p.vertexStartIndex;w<_;w+=4)a.indexArray.emplaceBack(w,w+1,w+2),a.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let u=Math.sin(a),p=Math.cos(a),_=[],w=[],C=[];for(let M=0;M<this.symbolInstances.length;++M){C.push(M);let S=this.symbolInstances.get(M);_.push(0|Math.round(u*S.anchorX+p*S.anchorY)),w.push(S.featureIndex)}return C.sort((M,S)=>_[M]-_[S]||w[S]-w[M]),C}addToSortKeyRanges(a,u){let p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let u of this.symbolInstanceIndexes){let p=this.symbolInstances.get(u);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((_,w,C)=>{_>=0&&C.indexOf(_)===w&&this.addIndicesForPlacedSymbol(this.text,_)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let AS,RS;Ot("SymbolBucket",nh,{omit:["layers","collisionBoxArray","features","compareText"]}),nh.MAX_GLYPHS=65535,nh.addDynamicAttributes=f1;var _1={get paint(){return RS=RS||new cs({"icon-opacity":new Gt(Be.paint_symbol["icon-opacity"]),"icon-color":new Gt(Be.paint_symbol["icon-color"]),"icon-halo-color":new Gt(Be.paint_symbol["icon-halo-color"]),"icon-halo-width":new Gt(Be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Gt(Be.paint_symbol["icon-halo-blur"]),"icon-translate":new Vt(Be.paint_symbol["icon-translate"]),"icon-translate-anchor":new Vt(Be.paint_symbol["icon-translate-anchor"]),"text-opacity":new Gt(Be.paint_symbol["text-opacity"]),"text-color":new Gt(Be.paint_symbol["text-color"],{runtimeType:Ki,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Gt(Be.paint_symbol["text-halo-color"]),"text-halo-width":new Gt(Be.paint_symbol["text-halo-width"]),"text-halo-blur":new Gt(Be.paint_symbol["text-halo-blur"]),"text-translate":new Vt(Be.paint_symbol["text-translate"]),"text-translate-anchor":new Vt(Be.paint_symbol["text-translate-anchor"])})},get layout(){return AS=AS||new cs({"symbol-placement":new Vt(Be.layout_symbol["symbol-placement"]),"symbol-spacing":new Vt(Be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Vt(Be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Gt(Be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Vt(Be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Vt(Be.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Vt(Be.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Vt(Be.layout_symbol["icon-ignore-placement"]),"icon-optional":new Vt(Be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Vt(Be.layout_symbol["icon-rotation-alignment"]),"icon-size":new Gt(Be.layout_symbol["icon-size"]),"icon-text-fit":new Vt(Be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Vt(Be.layout_symbol["icon-text-fit-padding"]),"icon-image":new Gt(Be.layout_symbol["icon-image"]),"icon-rotate":new Gt(Be.layout_symbol["icon-rotate"]),"icon-padding":new Gt(Be.layout_symbol["icon-padding"]),"icon-keep-upright":new Vt(Be.layout_symbol["icon-keep-upright"]),"icon-offset":new Gt(Be.layout_symbol["icon-offset"]),"icon-anchor":new Gt(Be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Vt(Be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Vt(Be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Vt(Be.layout_symbol["text-rotation-alignment"]),"text-field":new Gt(Be.layout_symbol["text-field"]),"text-font":new Gt(Be.layout_symbol["text-font"]),"text-size":new Gt(Be.layout_symbol["text-size"]),"text-max-width":new Gt(Be.layout_symbol["text-max-width"]),"text-line-height":new Vt(Be.layout_symbol["text-line-height"]),"text-letter-spacing":new Gt(Be.layout_symbol["text-letter-spacing"]),"text-justify":new Gt(Be.layout_symbol["text-justify"]),"text-radial-offset":new Gt(Be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Vt(Be.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Gt(Be.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Gt(Be.layout_symbol["text-anchor"]),"text-max-angle":new Vt(Be.layout_symbol["text-max-angle"]),"text-writing-mode":new Vt(Be.layout_symbol["text-writing-mode"]),"text-rotate":new Gt(Be.layout_symbol["text-rotate"]),"text-padding":new Vt(Be.layout_symbol["text-padding"]),"text-keep-upright":new Vt(Be.layout_symbol["text-keep-upright"]),"text-transform":new Gt(Be.layout_symbol["text-transform"]),"text-offset":new Gt(Be.layout_symbol["text-offset"]),"text-allow-overlap":new Vt(Be.layout_symbol["text-allow-overlap"]),"text-overlap":new Vt(Be.layout_symbol["text-overlap"]),"text-ignore-placement":new Vt(Be.layout_symbol["text-ignore-placement"]),"text-optional":new Vt(Be.layout_symbol["text-optional"])})}};class FS{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:Ir,this.defaultValue=a}evaluate(a){if(a.formattedSection){let u=this.defaultValue.property.overrides;if(u&&u.hasOverride(a.formattedSection))return u.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ot("FormatSectionOverride",FS,{omit:["defaultValue"]});class k_ extends sa{constructor(a){super(a,_1)}recalculate(a,u){if(super.recalculate(a,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let p=this.layout.get("text-writing-mode");if(p){let _=[];for(let w of p)_.indexOf(w)<0&&_.push(w);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,u,p,_){let w=this.layout.get(a).evaluate(u,{},p,_),C=this._unevaluatedLayout._values[a];return C.isDataDriven()||ii(C.value)||!w?w:function(M,S){return S.replace(/{([^{}]+)}/g,(E,k)=>M&&k in M?String(M[k]):"")}(u.properties,w)}createBucket(a){return new nh(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let a of _1.paint.overridableProperties){if(!k_.hasPaintOverride(this.layout,a))continue;let u=this.paint.get(a),p=new FS(u),_=new ai(p,u.property.specification),w=null;w=u.value.kind==="constant"||u.value.kind==="source"?new Dd("source",_):new Qp("composite",_,u.value.zoomStops),this.paint._values[a]=new ra(u.property,w,u.parameters)}}_handleOverridablePaintPropertyUpdate(a,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&k_.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,u){let p=a.get("text-field"),_=_1.paint.properties[u],w=!1,C=M=>{for(let S of M)if(_.overrides&&_.overrides.hasOverride(S))return void(w=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Cs)C(p.value.value.sections);else if(p.value.kind==="source"){let M=E=>{w||(E instanceof Do&&Ji(E.value)===rr?C(E.value.sections):E instanceof xd?C(E.sections):E.eachChild(M))},S=p.value;S._styleExpression&&M(S._styleExpression.expression)}return w}}let LS;var h4={get paint(){return LS=LS||new cs({"background-color":new Vt(Be.paint_background["background-color"]),"background-pattern":new cu(Be.paint_background["background-pattern"]),"background-opacity":new Vt(Be.paint_background["background-opacity"])})}};class p4 extends sa{constructor(a){super(a,h4)}}let NS;var f4={get paint(){return NS=NS||new cs({"raster-opacity":new Vt(Be.paint_raster["raster-opacity"]),"raster-hue-rotate":new Vt(Be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Vt(Be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Vt(Be.paint_raster["raster-brightness-max"]),"raster-saturation":new Vt(Be.paint_raster["raster-saturation"]),"raster-contrast":new Vt(Be.paint_raster["raster-contrast"]),"raster-resampling":new Vt(Be.paint_raster["raster-resampling"]),"raster-fade-duration":new Vt(Be.paint_raster["raster-fade-duration"])})}};class m4 extends sa{constructor(a){super(a,f4)}}class g4 extends sa{constructor(a){super(a,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class _4{constructor(a){this._methodToThrottle=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let v1=63710088e-1;class ll{constructor(a,u){if(isNaN(a)||isNaN(u))throw new Error(`Invalid LngLat object: (${a}, ${u})`);if(this.lng=+a,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ll(Ae(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){let u=Math.PI/180,p=this.lat*u,_=a.lat*u,w=Math.sin(p)*Math.sin(_)+Math.cos(p)*Math.cos(_)*Math.cos((a.lng-this.lng)*u);return v1*Math.acos(Math.min(w,1))}static convert(a){if(a instanceof ll)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new ll(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new ll(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let BS=2*Math.PI*v1;function jS(c){return BS*Math.cos(c*Math.PI/180)}function VS(c){return(180+c)/360}function zS(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function US(c,a){return c/jS(a)}function y1(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class A_{constructor(a,u,p=0){this.x=+a,this.y=+u,this.z=+p}static fromLngLat(a,u=0){let p=ll.convert(a);return new A_(VS(p.lng),zS(p.lat),US(u,p.lat))}toLngLat(){return new ll(360*this.x-180,y1(this.y))}toAltitude(){return this.z*jS(y1(this.y))}meterInMercatorCoordinateUnits(){return 1/BS*(a=y1(this.y),1/Math.cos(a*Math.PI/180));var a}}function $S(c,a,u){var p=2*Math.PI*6378137/256/Math.pow(2,u);return[c*p-2*Math.PI*6378137/2,a*p-2*Math.PI*6378137/2]}class b1{constructor(a,u,p){if(a<0||a>25||p<0||p>=Math.pow(2,a)||u<0||u>=Math.pow(2,a))throw new Error(`x=${u}, y=${p}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=u,this.y=p,this.key=Lf(0,a,a,u,p)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,u,p){let _=(C=this.y,M=this.z,S=$S(256*(w=this.x),256*(C=Math.pow(2,M)-C-1),M),E=$S(256*(w+1),256*(C+1),M),S[0]+","+S[1]+","+E[0]+","+E[1]);var w,C,M,S,E;let k=function(R,j,$){let G,X="";for(let re=R;re>0;re--)G=1<<re-1,X+=(j&G?1:0)+($&G?2:0);return X}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,k).replace(/{bbox-epsg-3857}/g,_)}isChildOf(a){let u=this.z-a.z;return u>0&&a.x===this.x>>u&&a.y===this.y>>u}getTilePoint(a){let u=Math.pow(2,this.z);return new v((a.x*u-this.x)*Ni,(a.y*u-this.y)*Ni)}toString(){return`${this.z}/${this.x}/${this.y}`}}class HS{constructor(a,u){this.wrap=a,this.canonical=u,this.key=Lf(a,u.z,u.z,u.x,u.y)}}class oa{constructor(a,u,p,_,w){if(a<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${p}`);this.overscaledZ=a,this.wrap=u,this.canonical=new b1(p,+_,+w),this.key=Lf(u,a,p,_,w)}clone(){return new oa(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);let u=this.canonical.z-a;return a>this.canonical.z?new oa(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new oa(a,this.wrap,a,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(a,u){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);let p=this.canonical.z-a;return a>this.canonical.z?Lf(this.wrap*+u,a,this.canonical.z,this.canonical.x,this.canonical.y):Lf(this.wrap*+u,a,a,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(a){if(a.wrap!==this.wrap)return!1;let u=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>u&&a.canonical.y===this.canonical.y>>u}children(a){if(this.overscaledZ>=a)return[new oa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let u=this.canonical.z+1,p=2*this.canonical.x,_=2*this.canonical.y;return[new oa(u,this.wrap,u,p,_),new oa(u,this.wrap,u,p+1,_),new oa(u,this.wrap,u,p,_+1),new oa(u,this.wrap,u,p+1,_+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new oa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new oa(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new HS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new A_(a.x-this.wrap,a.y))}}function Lf(c,a,u,p,_){(c*=2)<0&&(c=-1*c-1);let w=1<<u;return(w*w*c+w*_+p).toString(36)+u.toString(36)+a.toString(36)}Ot("CanonicalTileID",b1),Ot("OverscaledTileID",oa,{omit:["posMatrix"]});class qS{constructor(a,u,p,_=1,w=1,C=1,M=0){if(this.uid=a,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void Qt(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;let S=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=w,this.blueFactor=C,this.baseShift=M;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let E=0;E<S;E++)this.data[this._idx(-1,E)]=this.data[this._idx(0,E)],this.data[this._idx(S,E)]=this.data[this._idx(S-1,E)],this.data[this._idx(E,-1)]=this.data[this._idx(E,0)],this.data[this._idx(E,S)]=this.data[this._idx(E,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let E=0;E<S;E++)for(let k=0;k<S;k++){let R=this.get(E,k);R>this.max&&(this.max=R),R<this.min&&(this.min=R)}}get(a,u){let p=new Uint8Array(this.data.buffer),_=4*this._idx(a,u);return this.unpack(p[_],p[_+1],p[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(a,u){if(a<-1||a>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(a+1)}unpack(a,u,p){return a*this.redFactor+u*this.greenFactor+p*this.blueFactor-this.baseShift}getPixels(){return new aa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,u,p){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let _=u*this.dim,w=u*this.dim+this.dim,C=p*this.dim,M=p*this.dim+this.dim;switch(u){case-1:_=w-1;break;case 1:w=_+1}switch(p){case-1:C=M-1;break;case 1:M=C+1}let S=-u*this.dim,E=-p*this.dim;for(let k=C;k<M;k++)for(let R=_;R<w;R++)this.data[this._idx(R,k)]=a.data[this._idx(R+S,k+E)]}}Ot("DEMData",qS);class GS{constructor(a){this._stringToNumber={},this._numberToString=[];for(let u=0;u<a.length;u++){let p=a[u];this._stringToNumber[p]=u,this._numberToString[u]=p}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class WS{constructor(a,u,p,_,w){this.type="Feature",this._vectorTileFeature=a,a._z=u,a._x=p,a._y=_,this.properties=a.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){let a={geometry:this.geometry};for(let u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(a[u]=this[u]);return a}}class ZS{constructor(a,u){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new su(Ni,16,0),this.grid3D=new su(Ni,16,0),this.featureIndexArray=new F,this.promoteId=u}insert(a,u,p,_,w,C){let M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,_,w);let S=C?this.grid3D:this.grid;for(let E=0;E<u.length;E++){let k=u[E],R=[1/0,1/0,-1/0,-1/0];for(let j=0;j<k.length;j++){let $=k[j];R[0]=Math.min(R[0],$.x),R[1]=Math.min(R[1],$.y),R[2]=Math.max(R[2],$.x),R[3]=Math.max(R[3],$.y)}R[0]<Ni&&R[1]<Ni&&R[2]>=0&&R[3]>=0&&S.insert(M,R[0],R[1],R[2],R[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new al.VectorTile(new c1(this.rawTileData)).layers,this.sourceLayerCoder=new GS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,u,p,_){this.loadVTLayers();let w=a.params||{},C=Ni/a.tileSize/a.scale,M=Id(w.filter),S=a.queryGeometry,E=a.queryPadding*C,k=KS(S),R=this.grid.query(k.minX-E,k.minY-E,k.maxX+E,k.maxY+E),j=KS(a.cameraQueryGeometry),$=this.grid3D.query(j.minX-E,j.minY-E,j.maxX+E,j.maxY+E,(re,le,xe,ue)=>function(ve,Ve,He,Tt,At){for(let bt of ve)if(Ve<=bt.x&&He<=bt.y&&Tt>=bt.x&&At>=bt.y)return!0;let Dt=[new v(Ve,He),new v(Ve,At),new v(Tt,At),new v(Tt,He)];if(ve.length>2){for(let bt of Dt)if(Yd(ve,bt))return!0}for(let bt=0;bt<ve.length-1;bt++)if(Y3(ve[bt],ve[bt+1],Dt))return!0;return!1}(a.cameraQueryGeometry,re-E,le-E,xe+E,ue+E));for(let re of $)R.push(re);R.sort(v4);let G={},X;for(let re=0;re<R.length;re++){let le=R[re];if(le===X)continue;X=le;let xe=this.featureIndexArray.get(le),ue=null;this.loadMatchingFeature(G,xe.bucketIndex,xe.sourceLayerIndex,xe.featureIndex,M,w.layers,w.availableImages,u,p,_,(ve,Ve,He)=>(ue||(ue=dc(ve)),Ve.queryIntersectsFeature(S,ve,He,ue,this.z,a.transform,C,a.pixelPosMatrix)))}return G}loadMatchingFeature(a,u,p,_,w,C,M,S,E,k,R){let j=this.bucketLayerIDs[u];if(C&&!function(re,le){for(let xe=0;xe<re.length;xe++)if(le.indexOf(re[xe])>=0)return!0;return!1}(C,j))return;let $=this.sourceLayerCoder.decode(p),G=this.vtLayers[$].feature(_);if(w.needGeometry){let re=hc(G,!0);if(!w.filter(new gi(this.tileID.overscaledZ),re,this.tileID.canonical))return}else if(!w.filter(new gi(this.tileID.overscaledZ),G))return;let X=this.getId(G,$);for(let re=0;re<j.length;re++){let le=j[re];if(C&&C.indexOf(le)<0)continue;let xe=S[le];if(!xe)continue;let ue={};X&&k&&(ue=k.getState(xe.sourceLayer||"_geojsonTileLayer",X));let ve=We({},E[le]);ve.paint=YS(ve.paint,xe.paint,G,ue,M),ve.layout=YS(ve.layout,xe.layout,G,ue,M);let Ve=!R||R(G,xe,ue);if(!Ve)continue;let He=new WS(G,this.z,this.x,this.y,X);He.layer=ve;let Tt=a[le];Tt===void 0&&(Tt=a[le]=[]),Tt.push({featureIndex:_,feature:He,intersectionZ:Ve})}}lookupSymbolFeatures(a,u,p,_,w,C,M,S){let E={};this.loadVTLayers();let k=Id(w);for(let R of a)this.loadMatchingFeature(E,p,_,R,k,C,M,S,u);return E}hasLayer(a){for(let u of this.bucketLayerIDs)for(let p of u)if(a===p)return!0;return!1}getId(a,u){let p=a.id;return this.promoteId&&(p=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof p=="boolean"&&(p=Number(p))),p}}function YS(c,a,u,p,_){return Et(c,(w,C)=>{let M=a instanceof ou?a.get(C):null;return M&&M.evaluate?M.evaluate(u,p,_):M})}function KS(c){let a=1/0,u=1/0,p=-1/0,_=-1/0;for(let w of c)a=Math.min(a,w.x),u=Math.min(u,w.y),p=Math.max(p,w.x),_=Math.max(_,w.y);return{minX:a,minY:u,maxX:p,maxY:_}}function v4(c,a){return a-c}function QS(c,a,u,p,_){let w=[];for(let C=0;C<c.length;C++){let M=c[C],S;for(let E=0;E<M.length-1;E++){let k=M[E],R=M[E+1];k.x<a&&R.x<a||(k.x<a?k=new v(a,k.y+(a-k.x)/(R.x-k.x)*(R.y-k.y))._round():R.x<a&&(R=new v(a,k.y+(a-k.x)/(R.x-k.x)*(R.y-k.y))._round()),k.y<u&&R.y<u||(k.y<u?k=new v(k.x+(u-k.y)/(R.y-k.y)*(R.x-k.x),u)._round():R.y<u&&(R=new v(k.x+(u-k.y)/(R.y-k.y)*(R.x-k.x),u)._round()),k.x>=p&&R.x>=p||(k.x>=p?k=new v(p,k.y+(p-k.x)/(R.x-k.x)*(R.y-k.y))._round():R.x>=p&&(R=new v(p,k.y+(p-k.x)/(R.x-k.x)*(R.y-k.y))._round()),k.y>=_&&R.y>=_||(k.y>=_?k=new v(k.x+(_-k.y)/(R.y-k.y)*(R.x-k.x),_)._round():R.y>=_&&(R=new v(k.x+(_-k.y)/(R.y-k.y)*(R.x-k.x),_)._round()),S&&k.equals(S[S.length-1])||(S=[k],w.push(S)),S.push(R)))))}}return w}Ot("FeatureIndex",ZS,{omit:["rawTileData","sourceLayerCoder"]});class ul extends v{constructor(a,u,p,_){super(a,u),this.angle=p,_!==void 0&&(this.segment=_)}clone(){return new ul(this.x,this.y,this.angle,this.segment)}}function JS(c,a,u,p,_){if(a.segment===void 0||u===0)return!0;let w=a,C=a.segment+1,M=0;for(;M>-u/2;){if(C--,C<0)return!1;M-=c[C].dist(w),w=c[C]}M+=c[C].dist(c[C+1]),C++;let S=[],E=0;for(;M<u/2;){let k=c[C],R=c[C+1];if(!R)return!1;let j=c[C-1].angleTo(k)-k.angleTo(R);for(j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:M,angleDelta:j}),E+=j;M-S[0].distance>p;)E-=S.shift().angleDelta;if(E>_)return!1;C++,M+=k.dist(R)}return!0}function XS(c){let a=0;for(let u=0;u<c.length-1;u++)a+=c[u].dist(c[u+1]);return a}function eO(c,a,u){return c?.6*a*u:0}function tO(c,a){return Math.max(c?c.right-c.left:0,a?a.right-a.left:0)}function y4(c,a,u,p,_,w){let C=eO(u,_,w),M=tO(u,p)*w,S=0,E=XS(c)/2;for(let k=0;k<c.length-1;k++){let R=c[k],j=c[k+1],$=R.dist(j);if(S+$>E){let G=(E-S)/$,X=Ur.number(R.x,j.x,G),re=Ur.number(R.y,j.y,G),le=new ul(X,re,j.angleTo(R),k);return le._round(),!C||JS(c,le,M,C,a)?le:void 0}S+=$}}function b4(c,a,u,p,_,w,C,M,S){let E=eO(p,w,C),k=tO(p,_),R=k*C,j=c[0].x===0||c[0].x===S||c[0].y===0||c[0].y===S;return a-R<a/4&&(a=R+a/4),nO(c,j?a/2*M%a:(k/2+2*w)*C*M%a,a,E,u,R,j,!1,S)}function nO(c,a,u,p,_,w,C,M,S){let E=w/2,k=XS(c),R=0,j=a-u,$=[];for(let G=0;G<c.length-1;G++){let X=c[G],re=c[G+1],le=X.dist(re),xe=re.angleTo(X);for(;j+u<R+le;){j+=u;let ue=(j-R)/le,ve=Ur.number(X.x,re.x,ue),Ve=Ur.number(X.y,re.y,ue);if(ve>=0&&ve<S&&Ve>=0&&Ve<S&&j-E>=0&&j+E<=k){let He=new ul(ve,Ve,xe,G);He._round(),p&&!JS(c,He,w,p,_)||$.push(He)}}R+=le}return M||$.length||C||($=nO(c,R/2,u,p,_,w,C,!0,S)),$}Ot("Anchor",ul);let ih=Ss;function iO(c,a,u,p){let _=[],w=c.image,C=w.pixelRatio,M=w.paddedRect.w-2*ih,S=w.paddedRect.h-2*ih,E=c.right-c.left,k=c.bottom-c.top,R=w.stretchX||[[0,M]],j=w.stretchY||[[0,S]],$=(dt,It)=>dt+It[1]-It[0],G=R.reduce($,0),X=j.reduce($,0),re=M-G,le=S-X,xe=0,ue=G,ve=0,Ve=X,He=0,Tt=re,At=0,Dt=le;if(w.content&&p){let dt=w.content;xe=R_(R,0,dt[0]),ve=R_(j,0,dt[1]),ue=R_(R,dt[0],dt[2]),Ve=R_(j,dt[1],dt[3]),He=dt[0]-xe,At=dt[1]-ve,Tt=dt[2]-dt[0]-ue,Dt=dt[3]-dt[1]-Ve}let bt=(dt,It,_t,et)=>{let $t=F_(dt.stretch-xe,ue,E,c.left),jt=L_(dt.fixed-He,Tt,dt.stretch,G),xn=F_(It.stretch-ve,Ve,k,c.top),oi=L_(It.fixed-At,Dt,It.stretch,X),vi=F_(_t.stretch-xe,ue,E,c.left),lr=L_(_t.fixed-He,Tt,_t.stretch,G),qs=F_(et.stretch-ve,Ve,k,c.top),us=L_(et.fixed-At,Dt,et.stretch,X),nr=new v($t,xn),xr=new v(vi,xn),kr=new v(vi,qs),ds=new v($t,qs),hs=new v(jt/C,oi/C),ur=new v(lr/C,us/C),dr=a*Math.PI/180;if(dr){let qr=Math.sin(dr),Os=Math.cos(dr),Is=[Os,-qr,qr,Os];nr._matMult(Is),xr._matMult(Is),ds._matMult(Is),kr._matMult(Is)}let Hr=dt.stretch+dt.fixed,ps=It.stretch+It.fixed;return{tl:nr,tr:xr,bl:ds,br:kr,tex:{x:w.paddedRect.x+ih+Hr,y:w.paddedRect.y+ih+ps,w:_t.stretch+_t.fixed-Hr,h:et.stretch+et.fixed-ps},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:hs,pixelOffsetBR:ur,minFontScaleX:Tt/C/E,minFontScaleY:Dt/C/k,isSDF:u}};if(p&&(w.stretchX||w.stretchY)){let dt=rO(R,re,G),It=rO(j,le,X);for(let _t=0;_t<dt.length-1;_t++){let et=dt[_t],$t=dt[_t+1];for(let jt=0;jt<It.length-1;jt++)_.push(bt(et,It[jt],$t,It[jt+1]))}}else _.push(bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:S+1}));return _}function R_(c,a,u){let p=0;for(let _ of c)p+=Math.max(a,Math.min(u,_[1]))-Math.max(a,Math.min(u,_[0]));return p}function rO(c,a,u){let p=[{fixed:-ih,stretch:0}];for(let[_,w]of c){let C=p[p.length-1];p.push({fixed:_-C.stretch,stretch:C.stretch}),p.push({fixed:_-C.stretch,stretch:C.stretch+(w-_)})}return p.push({fixed:a+ih,stretch:u}),p}function F_(c,a,u,p){return c/a*u+p}function L_(c,a,u,p){return c-a*u/p}class N_{constructor(a,u,p,_,w,C,M,S,E,k){if(this.boxStartIndex=a.length,E){let R=C.top,j=C.bottom,$=C.collisionPadding;$&&(R-=$[1],j+=$[3]);let G=j-R;G>0&&(G=Math.max(10,G),this.circleDiameter=G)}else{let R=C.top*M-S[0],j=C.bottom*M+S[2],$=C.left*M-S[3],G=C.right*M+S[1],X=C.collisionPadding;if(X&&($-=X[0]*M,R-=X[1]*M,G+=X[2]*M,j+=X[3]*M),k){let re=new v($,R),le=new v(G,R),xe=new v($,j),ue=new v(G,j),ve=k*Math.PI/180;re._rotate(ve),le._rotate(ve),xe._rotate(ve),ue._rotate(ve),$=Math.min(re.x,le.x,xe.x,ue.x),G=Math.max(re.x,le.x,xe.x,ue.x),R=Math.min(re.y,le.y,xe.y,ue.y),j=Math.max(re.y,le.y,xe.y,ue.y)}a.emplaceBack(u.x,u.y,$,R,G,j,p,_,w)}this.boxEndIndex=a.length}}class w4{constructor(a=[],u=C4){if(this.data=a,this.length=this.data.length,this.compare=u,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;let a=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),a}peek(){return this.data[0]}_up(a){let{data:u,compare:p}=this,_=u[a];for(;a>0;){let w=a-1>>1,C=u[w];if(p(_,C)>=0)break;u[a]=C,a=w}u[a]=_}_down(a){let{data:u,compare:p}=this,_=this.length>>1,w=u[a];for(;a<_;){let C=1+(a<<1),M=u[C],S=C+1;if(S<this.length&&p(u[S],M)<0&&(C=S,M=u[S]),p(M,w)>=0)break;u[a]=M,a=C}u[a]=w}}function C4(c,a){return c<a?-1:c>a?1:0}function x4(c,a=1,u=!1){let p=1/0,_=1/0,w=-1/0,C=-1/0,M=c[0];for(let $=0;$<M.length;$++){let G=M[$];(!$||G.x<p)&&(p=G.x),(!$||G.y<_)&&(_=G.y),(!$||G.x>w)&&(w=G.x),(!$||G.y>C)&&(C=G.y)}let S=Math.min(w-p,C-_),E=S/2,k=new w4([],M4);if(S===0)return new v(p,_);for(let $=p;$<w;$+=S)for(let G=_;G<C;G+=S)k.push(new rh($+E,G+E,E,c));let R=function($){let G=0,X=0,re=0,le=$[0];for(let xe=0,ue=le.length,ve=ue-1;xe<ue;ve=xe++){let Ve=le[xe],He=le[ve],Tt=Ve.x*He.y-He.x*Ve.y;X+=(Ve.x+He.x)*Tt,re+=(Ve.y+He.y)*Tt,G+=3*Tt}return new rh(X/G,re/G,0,$)}(c),j=k.length;for(;k.length;){let $=k.pop();($.d>R.d||!R.d)&&(R=$,u&&console.log("found best %d after %d probes",Math.round(1e4*$.d)/1e4,j)),$.max-R.d<=a||(E=$.h/2,k.push(new rh($.p.x-E,$.p.y-E,E,c)),k.push(new rh($.p.x+E,$.p.y-E,E,c)),k.push(new rh($.p.x-E,$.p.y+E,E,c)),k.push(new rh($.p.x+E,$.p.y+E,E,c)),j+=4)}return u&&(console.log(`num probes: ${j}`),console.log(`best distance: ${R.d}`)),R.p}function M4(c,a){return a.max-c.max}function rh(c,a,u,p){this.p=new v(c,a),this.h=u,this.d=function(_,w){let C=!1,M=1/0;for(let S=0;S<w.length;S++){let E=w[S];for(let k=0,R=E.length,j=R-1;k<R;j=k++){let $=E[k],G=E[j];$.y>_.y!=G.y>_.y&&_.x<(G.x-$.x)*(_.y-$.y)/(G.y-$.y)+$.x&&(C=!C),M=Math.min(M,zT(_,$,G))}}return(C?1:-1)*Math.sqrt(M)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}var Pr;r.ap=void 0,(Pr=r.ap||(r.ap={}))[Pr.center=1]="center",Pr[Pr.left=2]="left",Pr[Pr.right=3]="right",Pr[Pr.top=4]="top",Pr[Pr.bottom=5]="bottom",Pr[Pr["top-left"]=6]="top-left",Pr[Pr["top-right"]=7]="top-right",Pr[Pr["bottom-left"]=8]="bottom-left",Pr[Pr["bottom-right"]=9]="bottom-right";let dl=7,w1=Number.POSITIVE_INFINITY;function sO(c,a){return a[1]!==w1?function(u,p,_){let w=0,C=0;switch(p=Math.abs(p),_=Math.abs(_),u){case"top-right":case"top-left":case"top":C=_-dl;break;case"bottom-right":case"bottom-left":case"bottom":C=-_+dl}switch(u){case"top-right":case"bottom-right":case"right":w=-p;break;case"top-left":case"bottom-left":case"left":w=p}return[w,C]}(c,a[0],a[1]):function(u,p){let _=0,w=0;p<0&&(p=0);let C=p/Math.SQRT2;switch(u){case"top-right":case"top-left":w=C-dl;break;case"bottom-right":case"bottom-left":w=-C+dl;break;case"bottom":w=-p+dl;break;case"top":w=p-dl}switch(u){case"top-right":case"bottom-right":_=-C;break;case"top-left":case"bottom-left":_=C;break;case"left":_=p;break;case"right":_=-p}return[_,w]}(c,a[0])}function aO(c,a,u){var p;let _=c.layout,w=(p=_.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(a,{},u);if(w){let M=w.values,S=[];for(let E=0;E<M.length;E+=2){let k=S[E]=M[E],R=M[E+1].map(j=>j*cr);k.startsWith("top")?R[1]-=dl:k.startsWith("bottom")&&(R[1]+=dl),S[E+1]=R}return new zs(S)}let C=_.get("text-variable-anchor");if(C){let M;M=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(a,{},u)*cr,w1]:_.get("text-offset").evaluate(a,{},u).map(E=>E*cr);let S=[];for(let E of C)S.push(E,sO(E,M));return new zs(S)}return null}function C1(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function D4(c,a,u,p,_,w,C,M,S,E,k){let R=w.textMaxSize.evaluate(a,{});R===void 0&&(R=C);let j=c.layers[0].layout,$=j.get("icon-offset").evaluate(a,{},k),G=cO(u.horizontal),X=C/24,re=c.tilePixelRatio*X,le=c.tilePixelRatio*R/24,xe=c.tilePixelRatio*M,ue=c.tilePixelRatio*j.get("symbol-spacing"),ve=j.get("text-padding")*c.tilePixelRatio,Ve=function(et,$t,jt,xn=1){let oi=et.get("icon-padding").evaluate($t,{},jt),vi=oi&&oi.values;return[vi[0]*xn,vi[1]*xn,vi[2]*xn,vi[3]*xn]}(j,a,k,c.tilePixelRatio),He=j.get("text-max-angle")/180*Math.PI,Tt=j.get("text-rotation-alignment")!=="viewport"&&j.get("symbol-placement")!=="point",At=j.get("icon-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",Dt=j.get("symbol-placement"),bt=ue/2,dt=j.get("icon-text-fit"),It;p&&dt!=="none"&&(c.allowVerticalPlacement&&u.vertical&&(It=PS(p,u.vertical,dt,j.get("icon-text-fit-padding"),$,X)),G&&(p=PS(p,G,dt,j.get("icon-text-fit-padding"),$,X)));let _t=(et,$t)=>{$t.x<0||$t.x>=Ni||$t.y<0||$t.y>=Ni||function(jt,xn,oi,vi,lr,qs,us,nr,xr,kr,ds,hs,ur,dr,Hr,ps,qr,Os,Is,hr,En,Gr,Ar,pr,Ta){let eo=jt.addToLineVertexArray(xn,oi),to,fc,Sa,ca,Es=0,mc=0,jf=0,hO=0,E1=-1,P1=-1,gc={},pO=Ai("");if(jt.allowVerticalPlacement&&vi.vertical){let Wr=nr.layout.get("text-rotate").evaluate(En,{},pr)+90;Sa=new N_(xr,xn,kr,ds,hs,vi.vertical,ur,dr,Hr,Wr),us&&(ca=new N_(xr,xn,kr,ds,hs,us,qr,Os,Hr,Wr))}if(lr){let Wr=nr.layout.get("icon-rotate").evaluate(En,{}),la=nr.layout.get("icon-text-fit")!=="none",gu=iO(lr,Wr,Ar,la),io=us?iO(us,Wr,Ar,la):void 0;fc=new N_(xr,xn,kr,ds,hs,lr,qr,Os,!1,Wr),Es=4*gu.length;let _u=jt.iconSizeData,Fo=null;_u.kind==="source"?(Fo=[Ro*nr.layout.get("icon-size").evaluate(En,{})],Fo[0]>cl&&Qt(`${jt.layerIds[0]}: Value for "icon-size" is >= ${Ff}. Reduce your "icon-size".`)):_u.kind==="composite"&&(Fo=[Ro*Gr.compositeIconSizes[0].evaluate(En,{},pr),Ro*Gr.compositeIconSizes[1].evaluate(En,{},pr)],(Fo[0]>cl||Fo[1]>cl)&&Qt(`${jt.layerIds[0]}: Value for "icon-size" is >= ${Ff}. Reduce your "icon-size".`)),jt.addSymbols(jt.icon,gu,Fo,hr,Is,En,r.ah.none,xn,eo.lineStartIndex,eo.lineLength,-1,pr),E1=jt.icon.placedSymbolArray.length-1,io&&(mc=4*io.length,jt.addSymbols(jt.icon,io,Fo,hr,Is,En,r.ah.vertical,xn,eo.lineStartIndex,eo.lineLength,-1,pr),P1=jt.icon.placedSymbolArray.length-1)}let fO=Object.keys(vi.horizontal);for(let Wr of fO){let la=vi.horizontal[Wr];if(!to){pO=Ai(la.text);let io=nr.layout.get("text-rotate").evaluate(En,{},pr);to=new N_(xr,xn,kr,ds,hs,la,ur,dr,Hr,io)}let gu=la.positionedLines.length===1;if(jf+=oO(jt,xn,la,qs,nr,Hr,En,ps,eo,vi.vertical?r.ah.horizontal:r.ah.horizontalOnly,gu?fO:[Wr],gc,E1,Gr,pr),gu)break}vi.vertical&&(hO+=oO(jt,xn,vi.vertical,qs,nr,Hr,En,ps,eo,r.ah.vertical,["vertical"],gc,P1,Gr,pr));let O4=to?to.boxStartIndex:jt.collisionBoxArray.length,I4=to?to.boxEndIndex:jt.collisionBoxArray.length,E4=Sa?Sa.boxStartIndex:jt.collisionBoxArray.length,P4=Sa?Sa.boxEndIndex:jt.collisionBoxArray.length,k4=fc?fc.boxStartIndex:jt.collisionBoxArray.length,A4=fc?fc.boxEndIndex:jt.collisionBoxArray.length,R4=ca?ca.boxStartIndex:jt.collisionBoxArray.length,F4=ca?ca.boxEndIndex:jt.collisionBoxArray.length,no=-1,j_=(Wr,la)=>Wr&&Wr.circleDiameter?Math.max(Wr.circleDiameter,la):la;no=j_(to,no),no=j_(Sa,no),no=j_(fc,no),no=j_(ca,no);let mO=no>-1?1:0;mO&&(no*=Ta/cr),jt.glyphOffsetArray.length>=nh.MAX_GLYPHS&&Qt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),En.sortKey!==void 0&&jt.addToSortKeyRanges(jt.symbolInstances.length,En.sortKey);let L4=aO(nr,En,pr),[N4,B4]=function(Wr,la){let gu=Wr.length,io=la?.values;if(io?.length>0)for(let _u=0;_u<io.length;_u+=2){let Fo=io[_u+1];Wr.emplaceBack(r.ap[io[_u]],Fo[0],Fo[1])}return[gu,Wr.length]}(jt.textAnchorOffsets,L4);jt.symbolInstances.emplaceBack(xn.x,xn.y,gc.right>=0?gc.right:-1,gc.center>=0?gc.center:-1,gc.left>=0?gc.left:-1,gc.vertical||-1,E1,P1,pO,O4,I4,E4,P4,k4,A4,R4,F4,kr,jf,hO,Es,mc,mO,0,ur,no,N4,B4)}(c,$t,et,u,p,_,It,c.layers[0],c.collisionBoxArray,a.index,a.sourceLayerIndex,c.index,re,[ve,ve,ve,ve],Tt,S,xe,Ve,At,$,a,w,E,k,C)};if(Dt==="line")for(let et of QS(a.geometry,0,0,Ni,Ni)){let $t=b4(et,ue,He,u.vertical||G,p,24,le,c.overscaling,Ni);for(let jt of $t)G&&T4(c,G.text,bt,jt)||_t(et,jt)}else if(Dt==="line-center"){for(let et of a.geometry)if(et.length>1){let $t=y4(et,He,u.vertical||G,p,24,le);$t&&_t(et,$t)}}else if(a.type==="Polygon")for(let et of e1(a.geometry,0)){let $t=x4(et,16);_t(et[0],new ul($t.x,$t.y,0))}else if(a.type==="LineString")for(let et of a.geometry)_t(et,new ul(et[0].x,et[0].y,0));else if(a.type==="Point")for(let et of a.geometry)for(let $t of et)_t([$t],new ul($t.x,$t.y,0))}function oO(c,a,u,p,_,w,C,M,S,E,k,R,j,$,G){let X=function(xe,ue,ve,Ve,He,Tt,At,Dt){let bt=Ve.layout.get("text-rotate").evaluate(Tt,{})*Math.PI/180,dt=[];for(let It of ue.positionedLines)for(let _t of It.positionedGlyphs){if(!_t.rect)continue;let et=_t.rect||{},$t=MS+1,jt=!0,xn=1,oi=0,vi=(He||Dt)&&_t.vertical,lr=_t.metrics.advance*_t.scale/2;if(Dt&&ue.verticalizable&&(oi=It.lineOffset/2-(_t.imageName?-(cr-_t.metrics.width*_t.scale)/2:(_t.scale-1)*cr)),_t.imageName){let hr=At[_t.imageName];jt=hr.sdf,xn=hr.pixelRatio,$t=Ss/xn}let qs=He?[_t.x+lr,_t.y]:[0,0],us=He?[0,0]:[_t.x+lr+ve[0],_t.y+ve[1]-oi],nr=[0,0];vi&&(nr=us,us=[0,0]);let xr=_t.metrics.isDoubleResolution?2:1,kr=(_t.metrics.left-$t)*_t.scale-lr+us[0],ds=(-_t.metrics.top-$t)*_t.scale+us[1],hs=kr+et.w/xr*_t.scale/xn,ur=ds+et.h/xr*_t.scale/xn,dr=new v(kr,ds),Hr=new v(hs,ds),ps=new v(kr,ur),qr=new v(hs,ur);if(vi){let hr=new v(-lr,lr-Af),En=-Math.PI/2,Gr=cr/2-lr,Ar=new v(5-Af-Gr,-(_t.imageName?Gr:0)),pr=new v(...nr);dr._rotateAround(En,hr)._add(Ar)._add(pr),Hr._rotateAround(En,hr)._add(Ar)._add(pr),ps._rotateAround(En,hr)._add(Ar)._add(pr),qr._rotateAround(En,hr)._add(Ar)._add(pr)}if(bt){let hr=Math.sin(bt),En=Math.cos(bt),Gr=[En,-hr,hr,En];dr._matMult(Gr),Hr._matMult(Gr),ps._matMult(Gr),qr._matMult(Gr)}let Os=new v(0,0),Is=new v(0,0);dt.push({tl:dr,tr:Hr,bl:ps,br:qr,tex:et,writingMode:ue.writingMode,glyphOffset:qs,sectionIndex:_t.sectionIndex,isSDF:jt,pixelOffsetTL:Os,pixelOffsetBR:Is,minFontScaleX:0,minFontScaleY:0})}return dt}(0,u,M,_,w,C,p,c.allowVerticalPlacement),re=c.textSizeData,le=null;re.kind==="source"?(le=[Ro*_.layout.get("text-size").evaluate(C,{})],le[0]>cl&&Qt(`${c.layerIds[0]}: Value for "text-size" is >= ${Ff}. Reduce your "text-size".`)):re.kind==="composite"&&(le=[Ro*$.compositeTextSizes[0].evaluate(C,{},G),Ro*$.compositeTextSizes[1].evaluate(C,{},G)],(le[0]>cl||le[1]>cl)&&Qt(`${c.layerIds[0]}: Value for "text-size" is >= ${Ff}. Reduce your "text-size".`)),c.addSymbols(c.text,X,le,M,w,C,E,a,S.lineStartIndex,S.lineLength,j,G);for(let xe of k)R[xe]=c.text.placedSymbolArray.length-1;return 4*X.length}function cO(c){for(let a in c)return c[a];return null}function T4(c,a,u,p){let _=c.compareText;if(a in _){let w=_[a];for(let C=w.length-1;C>=0;C--)if(p.dist(w[C])<u)return!0}else _[a]=[];return _[a].push(p),!1}let lO=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class x1{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[u,p]=new Uint8Array(a,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");let _=p>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);let w=lO[15&p];if(!w)throw new Error("Unrecognized array type.");let[C]=new Uint16Array(a,2,1),[M]=new Uint32Array(a,4,1);return new x1(M,C,w,a)}constructor(a,u=64,p=Float64Array,_){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=p,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;let w=lO.indexOf(this.ArrayType),C=2*a*this.ArrayType.BYTES_PER_ELEMENT,M=a*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-M%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${p}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+M+S,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+C+M+S),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+M+S,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=a)}add(a,u){let p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=a,this.coords[this._pos++]=u,p}finish(){let a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return M1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,u,p,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:w,coords:C,nodeSize:M}=this,S=[0,w.length-1,0],E=[];for(;S.length;){let k=S.pop()||0,R=S.pop()||0,j=S.pop()||0;if(R-j<=M){for(let re=j;re<=R;re++){let le=C[2*re],xe=C[2*re+1];le>=a&&le<=p&&xe>=u&&xe<=_&&E.push(w[re])}continue}let $=j+R>>1,G=C[2*$],X=C[2*$+1];G>=a&&G<=p&&X>=u&&X<=_&&E.push(w[$]),(k===0?a<=G:u<=X)&&(S.push(j),S.push($-1),S.push(1-k)),(k===0?p>=G:_>=X)&&(S.push($+1),S.push(R),S.push(1-k))}return E}within(a,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:_,coords:w,nodeSize:C}=this,M=[0,_.length-1,0],S=[],E=p*p;for(;M.length;){let k=M.pop()||0,R=M.pop()||0,j=M.pop()||0;if(R-j<=C){for(let re=j;re<=R;re++)dO(w[2*re],w[2*re+1],a,u)<=E&&S.push(_[re]);continue}let $=j+R>>1,G=w[2*$],X=w[2*$+1];dO(G,X,a,u)<=E&&S.push(_[$]),(k===0?a-p<=G:u-p<=X)&&(M.push(j),M.push($-1),M.push(1-k)),(k===0?a+p>=G:u+p>=X)&&(M.push($+1),M.push(R),M.push(1-k))}return S}}function M1(c,a,u,p,_,w){if(_-p<=u)return;let C=p+_>>1;uO(c,a,C,p,_,w),M1(c,a,u,p,C-1,1-w),M1(c,a,u,C+1,_,1-w)}function uO(c,a,u,p,_,w){for(;_>p;){if(_-p>600){let E=_-p+1,k=u-p+1,R=Math.log(E),j=.5*Math.exp(2*R/3),$=.5*Math.sqrt(R*j*(E-j)/E)*(k-E/2<0?-1:1);uO(c,a,u,Math.max(p,Math.floor(u-k*j/E+$)),Math.min(_,Math.floor(u+(E-k)*j/E+$)),w)}let C=a[2*u+w],M=p,S=_;for(Nf(c,a,p,u),a[2*_+w]>C&&Nf(c,a,p,_);M<S;){for(Nf(c,a,M,S),M++,S--;a[2*M+w]<C;)M++;for(;a[2*S+w]>C;)S--}a[2*p+w]===C?Nf(c,a,p,S):(S++,Nf(c,a,S,_)),S<=u&&(p=S+1),u<=S&&(_=S-1)}}function Nf(c,a,u,p){D1(c,u,p),D1(a,2*u,2*p),D1(a,2*u+1,2*p+1)}function D1(c,a,u){let p=c[a];c[a]=c[u],c[u]=p}function dO(c,a,u,p){let _=c-u,w=a-p;return _*_+w*w}var T1;r.bd=void 0,(T1=r.bd||(r.bd={})).create="create",T1.load="load",T1.fullLoad="fullLoad";let B_=null,Bf=[],S1=1e3/60,O1="loadTime",I1="fullLoadTime",S4={mark(c){performance.mark(c)},frame(c){let a=c;B_!=null&&Bf.push(a-B_),B_=a},clearMetrics(){B_=null,Bf=[],performance.clearMeasures(O1),performance.clearMeasures(I1);for(let c in r.bd)performance.clearMarks(r.bd[c])},getPerformanceMetrics(){performance.measure(O1,r.bd.create,r.bd.load),performance.measure(I1,r.bd.create,r.bd.fullLoad);let c=performance.getEntriesByName(O1)[0].duration,a=performance.getEntriesByName(I1)[0].duration,u=Bf.length,p=1/(Bf.reduce((w,C)=>w+C,0)/u/1e3),_=Bf.filter(w=>w>S1).reduce((w,C)=>w+(C-S1)/S1,0);return{loadTime:c,fullLoadTime:a,fps:p,percentDroppedFrames:_/(u+_)*100,totalFrames:u}}};r.$=pt,r.A=Kd,r.B=function(c){if(lt==null){let a=c.navigator?c.navigator.userAgent:null;lt=!!c.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return lt},r.C=class{constructor(c,a){this.target=c,this.mapId=a,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new _4(()=>this.process()),this.subscription=function(u,p,_,w){return u.addEventListener(p,_,!1),{unsubscribe:()=>{u.removeEventListener(p,_,!1)}}}(this.target,"message",u=>this.receive(u)),this.globalScope=Ye(self)?c:window}registerMessageHandler(c,a){this.messageHandlers[c]=a}sendAsync(c,a){return new Promise((u,p)=>{let _=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[_]={resolve:u,reject:p},a&&a.signal.addEventListener("abort",()=>{delete this.resolveRejects[_];let M={id:_,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(M)},{once:!0});let w=[],C=Object.assign(Object.assign({},c),{id:_,sourceMapId:this.mapId,origin:location.origin,data:nl(c.data,w)});this.target.postMessage(C,{transfer:w})})}receive(c){let a=c.data,u=a.id;if(!(a.origin!=="file://"&&location.origin!=="file://"&&a.origin!==location.origin||a.targetMapId&&this.mapId!==a.targetMapId)){if(a.type==="<cancel>"){delete this.tasks[u];let p=this.abortControllers[u];return delete this.abortControllers[u],void(p&&p.abort())}if(Ye(self)||a.mustQueue)return this.tasks[u]=a,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,a)}}process(){if(this.taskQueue.length===0)return;let c=this.taskQueue.shift(),a=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),a&&this.processTask(c,a)}processTask(c,a){return s(this,void 0,void 0,function*(){if(a.type==="<response>"){let _=this.resolveRejects[c];return delete this.resolveRejects[c],_?void(a.error?_.reject(il(a.error)):_.resolve(il(a.data))):void 0}if(!this.messageHandlers[a.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${a.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let u=il(a.data),p=new AbortController;this.abortControllers[c]=p;try{let _=yield this.messageHandlers[a.type](a.sourceMapId,u,p);this.completeTask(c,null,_)}catch(_){this.completeTask(c,_)}})}completeTask(c,a,u){let p=[];delete this.abortControllers[c];let _={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:a?nl(a):null,data:nl(u,p)};this.target.postMessage(_,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},r.D=Vt,r.E=Za,r.F=function(){var c=new Kd(16);return Kd!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},r.G=bn,r.H=function(c,a,u){var p,_,w,C,M,S,E,k,R,j,$,G,X=u[0],re=u[1],le=u[2];return a===c?(c[12]=a[0]*X+a[4]*re+a[8]*le+a[12],c[13]=a[1]*X+a[5]*re+a[9]*le+a[13],c[14]=a[2]*X+a[6]*re+a[10]*le+a[14],c[15]=a[3]*X+a[7]*re+a[11]*le+a[15]):(_=a[1],w=a[2],C=a[3],M=a[4],S=a[5],E=a[6],k=a[7],R=a[8],j=a[9],$=a[10],G=a[11],c[0]=p=a[0],c[1]=_,c[2]=w,c[3]=C,c[4]=M,c[5]=S,c[6]=E,c[7]=k,c[8]=R,c[9]=j,c[10]=$,c[11]=G,c[12]=p*X+M*re+R*le+a[12],c[13]=_*X+S*re+j*le+a[13],c[14]=w*X+E*re+$*le+a[14],c[15]=C*X+k*re+G*le+a[15]),c},r.I=u1,r.J=function(c,a,u){var p=u[0],_=u[1],w=u[2];return c[0]=a[0]*p,c[1]=a[1]*p,c[2]=a[2]*p,c[3]=a[3]*p,c[4]=a[4]*_,c[5]=a[5]*_,c[6]=a[6]*_,c[7]=a[7]*_,c[8]=a[8]*w,c[9]=a[9]*w,c[10]=a[10]*w,c[11]=a[11]*w,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},r.K=qT,r.L=function(c,a){let u={};for(let p=0;p<a.length;p++){let _=a[p];_ in c&&(u[_]=c[_])}return u},r.M=ll,r.N=VS,r.O=zS,r.P=v,r.Q=oa,r.R=aa,r.S=te,r.T=cf,r.U=ce,r.V=Pe,r.W=Ni,r.X=qi,r.Y=A_,r.Z=class extends df{},r._=s,r.a=Jt,r.a$=function(c,a,u){return c[0]=a[0]*u[0],c[1]=a[1]*u[1],c[2]=a[2]*u[2],c[3]=a[3]*u[3],c},r.a0=b1,r.a1=at,r.a2=c=>{let a=window.document.createElement("video");return a.muted=!0,new Promise(u=>{a.onloadstart=()=>{u(a)};for(let p of c){let _=window.document.createElement("source");Nn(p)||(a.crossOrigin="Anonymous"),_.src=p,a.appendChild(_)}})},r.a3=function(){return ft++},r.a4=y,r.a5=nh,r.a6=Id,r.a7=hc,r.a8=gi,r.a9=WS,r.aA=rt,r.aB=function(c,a){if(!c)return[{command:"setStyle",args:[a]}];let u=[];try{if(!Cn(c.version,a.version))return[{command:"setStyle",args:[a]}];Cn(c.center,a.center)||u.push({command:"setCenter",args:[a.center]}),Cn(c.zoom,a.zoom)||u.push({command:"setZoom",args:[a.zoom]}),Cn(c.bearing,a.bearing)||u.push({command:"setBearing",args:[a.bearing]}),Cn(c.pitch,a.pitch)||u.push({command:"setPitch",args:[a.pitch]}),Cn(c.sprite,a.sprite)||u.push({command:"setSprite",args:[a.sprite]}),Cn(c.glyphs,a.glyphs)||u.push({command:"setGlyphs",args:[a.glyphs]}),Cn(c.transition,a.transition)||u.push({command:"setTransition",args:[a.transition]}),Cn(c.light,a.light)||u.push({command:"setLight",args:[a.light]}),Cn(c.terrain,a.terrain)||u.push({command:"setTerrain",args:[a.terrain]}),Cn(c.sky,a.sky)||u.push({command:"setSky",args:[a.sky]});let p={},_=[];(function(C,M,S,E){let k;for(k in M=M||{},C=C||{})Object.prototype.hasOwnProperty.call(C,k)&&(Object.prototype.hasOwnProperty.call(M,k)||ta(k,S,E));for(k in M)Object.prototype.hasOwnProperty.call(M,k)&&(Object.prototype.hasOwnProperty.call(C,k)?Cn(C[k],M[k])||(C[k].type==="geojson"&&M[k].type==="geojson"&&Qa(C,M,k)?$i(S,{command:"setGeoJSONSourceData",args:[k,M[k].data]}):Ka(k,M,S,E)):rs(k,M,S))})(c.sources,a.sources,_,p);let w=[];c.layers&&c.layers.forEach(C=>{"source"in C&&p[C.source]?u.push({command:"removeLayer",args:[C.id]}):w.push(C)}),u=u.concat(_),function(C,M,S){M=M||[];let E=(C=C||[]).map(tc),k=M.map(tc),R=C.reduce(_a,{}),j=M.reduce(_a,{}),$=E.slice(),G=Object.create(null),X,re,le,xe,ue;for(let ve=0,Ve=0;ve<E.length;ve++)X=E[ve],Object.prototype.hasOwnProperty.call(j,X)?Ve++:($i(S,{command:"removeLayer",args:[X]}),$.splice($.indexOf(X,Ve),1));for(let ve=0,Ve=0;ve<k.length;ve++)X=k[k.length-1-ve],$[$.length-1-ve]!==X&&(Object.prototype.hasOwnProperty.call(R,X)?($i(S,{command:"removeLayer",args:[X]}),$.splice($.lastIndexOf(X,$.length-Ve),1)):Ve++,xe=$[$.length-ve],$i(S,{command:"addLayer",args:[j[X],xe]}),$.splice($.length-ve,0,X),G[X]=!0);for(let ve=0;ve<k.length;ve++)if(X=k[ve],re=R[X],le=j[X],!G[X]&&!Cn(re,le))if(Cn(re.source,le.source)&&Cn(re["source-layer"],le["source-layer"])&&Cn(re.type,le.type)){for(ue in Vs(re.layout,le.layout,S,X,null,"setLayoutProperty"),Vs(re.paint,le.paint,S,X,null,"setPaintProperty"),Cn(re.filter,le.filter)||$i(S,{command:"setFilter",args:[X,le.filter]}),Cn(re.minzoom,le.minzoom)&&Cn(re.maxzoom,le.maxzoom)||$i(S,{command:"setLayerZoomRange",args:[X,le.minzoom,le.maxzoom]}),re)Object.prototype.hasOwnProperty.call(re,ue)&&ue!=="layout"&&ue!=="paint"&&ue!=="filter"&&ue!=="metadata"&&ue!=="minzoom"&&ue!=="maxzoom"&&(ue.indexOf("paint.")===0?Vs(re[ue],le[ue],S,X,ue.slice(6),"setPaintProperty"):Cn(re[ue],le[ue])||$i(S,{command:"setLayerProperty",args:[X,ue,le[ue]]}));for(ue in le)Object.prototype.hasOwnProperty.call(le,ue)&&!Object.prototype.hasOwnProperty.call(re,ue)&&ue!=="layout"&&ue!=="paint"&&ue!=="filter"&&ue!=="metadata"&&ue!=="minzoom"&&ue!=="maxzoom"&&(ue.indexOf("paint.")===0?Vs(re[ue],le[ue],S,X,ue.slice(6),"setPaintProperty"):Cn(re[ue],le[ue])||$i(S,{command:"setLayerProperty",args:[X,ue,le[ue]]}))}else $i(S,{command:"removeLayer",args:[X]}),xe=$[$.lastIndexOf(X)+1],$i(S,{command:"addLayer",args:[le,xe]})}(w,a.layers,u)}catch(p){console.warn("Unable to compute style diff:",p),u=[{command:"setStyle",args:[a]}]}return u},r.aC=function(c){let a=[],u=c.id;return u===void 0&&a.push({message:`layers.${u}: missing required property "id"`}),c.render===void 0&&a.push({message:`layers.${u}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&a.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),a},r.aD=function c(a,u){if(Array.isArray(a)){if(!Array.isArray(u)||a.length!==u.length)return!1;for(let p=0;p<a.length;p++)if(!c(a[p],u[p]))return!1;return!0}if(typeof a=="object"&&a!==null&&u!==null){if(typeof u!="object"||Object.keys(a).length!==Object.keys(u).length)return!1;for(let p in a)if(!c(a[p],u[p]))return!1;return!0}return a===u},r.aE=Et,r.aF=Pt,r.aG=class extends or{constructor(c,a){super(c,a),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},r.aH=Ts,r.aI=class extends or{constructor(c,a){super(c,a),this.current=fu}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let a=1;a<16;a++)if(c[a]!==this.current[a]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},r.aJ=Ma,r.aK=class extends or{constructor(c,a){super(c,a),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},r.aL=class extends or{constructor(c,a){super(c,a),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},r.aM=Po,r.aN=function(c,a,u,p,_,w,C){var M=1/(a-u),S=1/(p-_),E=1/(w-C);return c[0]=-2*M,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*S,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*E,c[11]=0,c[12]=(a+u)*M,c[13]=(_+p)*S,c[14]=(C+w)*E,c[15]=1,c},r.aO=Kn,r.aP=Q3,r.aQ=class extends Ud{},r.aR=qN,r.aS=class extends $d{},r.aT=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},r.aU=KT,r.aV=N,r.aW=class extends _f{},r.aX=Fe,r.aY=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]&&c[4]===a[4]&&c[5]===a[5]&&c[6]===a[6]&&c[7]===a[7]&&c[8]===a[8]&&c[9]===a[9]&&c[10]===a[10]&&c[11]===a[11]&&c[12]===a[12]&&c[13]===a[13]&&c[14]===a[14]&&c[15]===a[15]},r.aZ=function(c,a){var u=c[0],p=c[1],_=c[2],w=c[3],C=c[4],M=c[5],S=c[6],E=c[7],k=c[8],R=c[9],j=c[10],$=c[11],G=c[12],X=c[13],re=c[14],le=c[15],xe=a[0],ue=a[1],ve=a[2],Ve=a[3],He=a[4],Tt=a[5],At=a[6],Dt=a[7],bt=a[8],dt=a[9],It=a[10],_t=a[11],et=a[12],$t=a[13],jt=a[14],xn=a[15];return Math.abs(u-xe)<=ls*Math.max(1,Math.abs(u),Math.abs(xe))&&Math.abs(p-ue)<=ls*Math.max(1,Math.abs(p),Math.abs(ue))&&Math.abs(_-ve)<=ls*Math.max(1,Math.abs(_),Math.abs(ve))&&Math.abs(w-Ve)<=ls*Math.max(1,Math.abs(w),Math.abs(Ve))&&Math.abs(C-He)<=ls*Math.max(1,Math.abs(C),Math.abs(He))&&Math.abs(M-Tt)<=ls*Math.max(1,Math.abs(M),Math.abs(Tt))&&Math.abs(S-At)<=ls*Math.max(1,Math.abs(S),Math.abs(At))&&Math.abs(E-Dt)<=ls*Math.max(1,Math.abs(E),Math.abs(Dt))&&Math.abs(k-bt)<=ls*Math.max(1,Math.abs(k),Math.abs(bt))&&Math.abs(R-dt)<=ls*Math.max(1,Math.abs(R),Math.abs(dt))&&Math.abs(j-It)<=ls*Math.max(1,Math.abs(j),Math.abs(It))&&Math.abs($-_t)<=ls*Math.max(1,Math.abs($),Math.abs(_t))&&Math.abs(G-et)<=ls*Math.max(1,Math.abs(G),Math.abs(et))&&Math.abs(X-$t)<=ls*Math.max(1,Math.abs(X),Math.abs($t))&&Math.abs(re-jt)<=ls*Math.max(1,Math.abs(re),Math.abs(jt))&&Math.abs(le-xn)<=ls*Math.max(1,Math.abs(le),Math.abs(xn))},r.a_=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},r.aa=function(c){let a={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,p,_,w)=>{let C=_||w;return a[p]=!C||C.toLowerCase(),""}),a["max-age"]){let u=parseInt(a["max-age"],10);isNaN(u)?delete a["max-age"]:a["max-age"]=u}return a},r.ab=function(c,a){let u=[];for(let p in c)p in a||u.push(p);return u},r.ac=Re,r.ad=function(c,a,u){var p=Math.sin(u),_=Math.cos(u),w=a[0],C=a[1],M=a[2],S=a[3],E=a[4],k=a[5],R=a[6],j=a[7];return a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[0]=w*_+E*p,c[1]=C*_+k*p,c[2]=M*_+R*p,c[3]=S*_+j*p,c[4]=E*_-w*p,c[5]=k*_-C*p,c[6]=R*_-M*p,c[7]=j*_-S*p,c},r.ae=function(c){var a=new Kd(16);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],a},r.af=C_,r.ag=function(c,a){let u=0,p=0;if(c.kind==="constant")p=c.layoutSize;else if(c.kind!=="source"){let{interpolationType:_,minZoom:w,maxZoom:C}=c,M=_?Re(Er.interpolationFactor(_,a,w,C),0,1):0;c.kind==="camera"?p=Ur.number(c.minSize,c.maxSize,M):u=M}return{uSizeT:u,uSize:p}},r.ai=function(c,{uSize:a,uSizeT:u},{lowerSize:p,upperSize:_}){return c.kind==="source"?p/Ro:c.kind==="composite"?Ur.number(p/Ro,_/Ro,u):a},r.aj=f1,r.ak=function(c,a,u,p){let _=a.y-c.y,w=a.x-c.x,C=p.y-u.y,M=p.x-u.x,S=C*w-M*_;if(S===0)return null;let E=(M*(c.y-u.y)-C*(c.x-u.x))/S;return new v(c.x+E*w,c.y+E*_)},r.al=QS,r.am=yf,r.an=Wb,r.ao=cr,r.aq=p1,r.ar=function(c,a){var u=a[0],p=a[1],_=a[2],w=a[3],C=a[4],M=a[5],S=a[6],E=a[7],k=a[8],R=a[9],j=a[10],$=a[11],G=a[12],X=a[13],re=a[14],le=a[15],xe=u*M-p*C,ue=u*S-_*C,ve=u*E-w*C,Ve=p*S-_*M,He=p*E-w*M,Tt=_*E-w*S,At=k*X-R*G,Dt=k*re-j*G,bt=k*le-$*G,dt=R*re-j*X,It=R*le-$*X,_t=j*le-$*re,et=xe*_t-ue*It+ve*dt+Ve*bt-He*Dt+Tt*At;return et?(c[0]=(M*_t-S*It+E*dt)*(et=1/et),c[1]=(_*It-p*_t-w*dt)*et,c[2]=(X*Tt-re*He+le*Ve)*et,c[3]=(j*He-R*Tt-$*Ve)*et,c[4]=(S*bt-C*_t-E*Dt)*et,c[5]=(u*_t-_*bt+w*Dt)*et,c[6]=(re*ve-G*Tt-le*ue)*et,c[7]=(k*Tt-j*ve+$*ue)*et,c[8]=(C*It-M*bt+E*At)*et,c[9]=(p*bt-u*It-w*At)*et,c[10]=(G*He-X*ve+le*xe)*et,c[11]=(R*ve-k*He-$*xe)*et,c[12]=(M*Dt-C*dt-S*At)*et,c[13]=(u*dt-p*Dt+_*At)*et,c[14]=(X*ue-G*Ve-re*xe)*et,c[15]=(k*Ve-R*ue+j*xe)*et,c):null},r.as=C1,r.at=h1,r.au=x1,r.av=function(){let c={},a=Be.$version;for(let u in Be.$root){let p=Be.$root[u];if(p.required){let _=null;_=u==="version"?a:p.type==="array"?[]:{},_!=null&&(c[u]=_)}}return c},r.aw=c_,r.ax=$n,r.ay=function(c){c=c.slice();let a=Object.create(null);for(let u=0;u<c.length;u++)a[c[u].id]=c[u];for(let u=0;u<c.length;u++)"ref"in c[u]&&(c[u]=Mo(c[u],a[c[u].ref]));return c},r.az=function(c){if(c.type==="custom")return new g4(c);switch(c.type){case"background":return new p4(c);case"circle":return new J3(c);case"fill":return new vN(c);case"fill-extrusion":return new AN(c);case"heatmap":return new eN(c);case"hillshade":return new nN(c);case"line":return new zN(c);case"raster":return new m4(c);case"symbol":return new k_(c)}},r.b=Te,r.b0=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]},r.b1=Ae,r.b2=HS,r.b3=US,r.b4=function(c,a,u,p,_){var w,C=1/Math.tan(a/2);return c[0]=C/u,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=C,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,_!=null&&_!==1/0?(c[10]=(_+p)*(w=1/(p-_)),c[14]=2*_*p*w):(c[10]=-1,c[14]=-2*p),c},r.b5=function(c,a,u){var p=Math.sin(u),_=Math.cos(u),w=a[4],C=a[5],M=a[6],S=a[7],E=a[8],k=a[9],R=a[10],j=a[11];return a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[4]=w*_+E*p,c[5]=C*_+k*p,c[6]=M*_+R*p,c[7]=S*_+j*p,c[8]=E*_-w*p,c[9]=k*_-C*p,c[10]=R*_-M*p,c[11]=j*_-S*p,c},r.b6=fe,r.b7=ye,r.b8=function(c){return c*Math.PI/180},r.b9=function(c,a){return c[0]=a[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=a[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=a[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},r.bA=Eo,r.ba=class extends Ja{},r.bb=v1,r.bc=S4,r.be=In,r.bf=function(c,a){Jt.REGISTERED_PROTOCOLS[c]=a},r.bg=function(c){delete Jt.REGISTERED_PROTOCOLS[c]},r.bh=function(c,a){let u={};for(let _=0;_<c.length;_++){let w=a&&a[c[_].id]||Ub(c[_]);a&&(a[c[_].id]=w);let C=u[w];C||(C=u[w]=[]),C.push(c[_])}let p=[];for(let _ in u)p.push(u[_]);return p},r.bi=Ot,r.bj=GS,r.bk=ZS,r.bl=TS,r.bm=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Ni/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;let a=c.bucket.layers[0],u=a.layout,p=a._unevaluatedLayout._values,_={layoutIconSize:p["icon-size"].possiblyEvaluate(new gi(c.bucket.zoom+1),c.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new gi(c.bucket.zoom+1),c.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new gi(18))};if(c.bucket.textSizeData.kind==="composite"){let{minZoom:E,maxZoom:k}=c.bucket.textSizeData;_.compositeTextSizes=[p["text-size"].possiblyEvaluate(new gi(E),c.canonical),p["text-size"].possiblyEvaluate(new gi(k),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){let{minZoom:E,maxZoom:k}=c.bucket.iconSizeData;_.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new gi(E),c.canonical),p["icon-size"].possiblyEvaluate(new gi(k),c.canonical)]}let w=u.get("text-line-height")*cr,C=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",M=u.get("text-keep-upright"),S=u.get("text-size");for(let E of c.bucket.features){let k=u.get("text-font").evaluate(E,{},c.canonical).join(","),R=S.evaluate(E,{},c.canonical),j=_.layoutTextSize.evaluate(E,{},c.canonical),$=_.layoutIconSize.evaluate(E,{},c.canonical),G={horizontal:{},vertical:void 0},X=E.text,re,le=[0,0];if(X){let ve=X.toString(),Ve=u.get("text-letter-spacing").evaluate(E,{},c.canonical)*cr,He=l_(ve)?Ve:0,Tt=u.get("text-anchor").evaluate(E,{},c.canonical),At=aO(a,E,c.canonical);if(!At){let _t=u.get("text-radial-offset").evaluate(E,{},c.canonical);le=_t?sO(Tt,[_t*cr,w1]):u.get("text-offset").evaluate(E,{},c.canonical).map(et=>et*cr)}let Dt=C?"center":u.get("text-justify").evaluate(E,{},c.canonical),bt=u.get("symbol-placement"),dt=bt==="point"?u.get("text-max-width").evaluate(E,{},c.canonical)*cr:0,It=()=>{c.bucket.allowVerticalPlacement&&rl(ve)&&(G.vertical=I_(X,c.glyphMap,c.glyphPositions,c.imagePositions,k,dt,w,Tt,"left",He,le,r.ah.vertical,!0,bt,j,R))};if(!C&&At){let _t=new Set;if(Dt==="auto")for(let $t=0;$t<At.values.length;$t+=2)_t.add(C1(At.values[$t]));else _t.add(Dt);let et=!1;for(let $t of _t)if(!G.horizontal[$t])if(et)G.horizontal[$t]=G.horizontal[0];else{let jt=I_(X,c.glyphMap,c.glyphPositions,c.imagePositions,k,dt,w,"center",$t,He,le,r.ah.horizontal,!1,bt,j,R);jt&&(G.horizontal[$t]=jt,et=jt.positionedLines.length===1)}It()}else{Dt==="auto"&&(Dt=C1(Tt));let _t=I_(X,c.glyphMap,c.glyphPositions,c.imagePositions,k,dt,w,Tt,Dt,He,le,r.ah.horizontal,!1,bt,j,R);_t&&(G.horizontal[Dt]=_t),It(),rl(ve)&&C&&M&&(G.vertical=I_(X,c.glyphMap,c.glyphPositions,c.imagePositions,k,dt,w,Tt,Dt,He,le,r.ah.vertical,!1,bt,j,R))}}let xe=!1;if(E.icon&&E.icon.name){let ve=c.imageMap[E.icon.name];ve&&(re=c4(c.imagePositions[E.icon.name],u.get("icon-offset").evaluate(E,{},c.canonical),u.get("icon-anchor").evaluate(E,{},c.canonical)),xe=!!ve.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=xe:c.bucket.sdfIcons!==xe&&Qt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ve.pixelRatio!==c.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}let ue=cO(G.horizontal)||G.vertical;c.bucket.iconsInText=!!ue&&ue.iconsInText,(ue||re)&&D4(c.bucket,E,G,re,c.imageMap,_,j,$,le,xe,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},r.bn=a1,r.bo=i1,r.bp=s1,r.bq=al,r.br=c1,r.bs=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},r.bt=function(c,a,u,p,_){return s(this,void 0,void 0,function*(){if(ce())try{return yield Pe(c,a,u,p,_)}catch{}return function(w,C,M,S,E){let k=w.width,R=w.height;Ke&&ut||(Ke=new OffscreenCanvas(k,R),ut=Ke.getContext("2d",{willReadFrequently:!0})),Ke.width=k,Ke.height=R,ut.drawImage(w,0,0,k,R);let j=ut.getImageData(C,M,S,E);return ut.clearRect(0,0,k,R),j.data}(c,a,u,p,_)})},r.bu=qS,r.bv=l,r.bw=d,r.bx=_S,r.by=ac,r.bz=function(c){return c.message===yt},r.c=Yt,r.d=c=>s(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));let a=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(a)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),r.e=We,r.f=c=>new Promise((a,u)=>{let p=new Image;p.onload=()=>{a(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame(()=>{p.src=Se})},p.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let _=new Blob([new Uint8Array(c)],{type:"image/png"});p.src=c.byteLength?URL.createObjectURL(_):Se}),r.g=yn,r.h=(c,a)=>Ln(We(c,{type:"json"}),a),r.i=Ye,r.j=js,r.k=Ci,r.l=(c,a)=>Ln(We(c,{type:"arrayBuffer"}),a),r.m=Ln,r.n=function(c){return new c1(c).readFields(n4,[])},r.o=Df,r.p=DS,r.q=cs,r.r=$b,r.s=Nn,r.t=tl,r.u=Mt,r.v=Be,r.w=Qt,r.x=cc,r.y=function([c,a,u]){return a+=90,a*=Math.PI/180,u*=Math.PI/180,{x:c*Math.cos(a)*Math.sin(u),y:c*Math.sin(a)*Math.sin(u),z:c*Math.cos(u)}},r.z=Ur}),t("worker",["./shared"],function(r){"use strict";class s{constructor(B){this.keyCache={},B&&this.replace(B)}replace(B){this._layerConfigs={},this._layers={},this.update(B,[])}update(B,z){for(let ee of B){this._layerConfigs[ee.id]=ee;let me=this._layers[ee.id]=r.az(ee);me._featureFilter=r.a6(me.filter),this.keyCache[ee.id]&&delete this.keyCache[ee.id]}for(let ee of z)delete this.keyCache[ee],delete this._layerConfigs[ee],delete this._layers[ee];this.familiesBySource={};let Z=r.bh(Object.values(this._layerConfigs),this.keyCache);for(let ee of Z){let me=ee.map(ze=>this._layers[ze.id]),ge=me[0];if(ge.visibility==="none")continue;let we=ge.source||"",he=this.familiesBySource[we];he||(he=this.familiesBySource[we]={});let Oe=ge.sourceLayer||"_geojsonTileLayer",qe=he[Oe];qe||(qe=he[Oe]=[]),qe.push(me)}}}class l{constructor(B){let z={},Z=[];for(let we in B){let he=B[we],Oe=z[we]={};for(let qe in he){let ze=he[+qe];if(!ze||ze.bitmap.width===0||ze.bitmap.height===0)continue;let $e={x:0,y:0,w:ze.bitmap.width+2,h:ze.bitmap.height+2};Z.push($e),Oe[qe]={rect:$e,metrics:ze.metrics}}}let{w:ee,h:me}=r.p(Z),ge=new r.o({width:ee||1,height:me||1});for(let we in B){let he=B[we];for(let Oe in he){let qe=he[+Oe];if(!qe||qe.bitmap.width===0||qe.bitmap.height===0)continue;let ze=z[we][Oe].rect;r.o.copy(qe.bitmap,ge,{x:0,y:0},{x:ze.x+1,y:ze.y+1},qe.bitmap)}}this.image=ge,this.positions=z}}r.bi("GlyphAtlas",l);class d{constructor(B){this.tileID=new r.Q(B.tileID.overscaledZ,B.tileID.wrap,B.tileID.canonical.z,B.tileID.canonical.x,B.tileID.canonical.y),this.uid=B.uid,this.zoom=B.zoom,this.pixelRatio=B.pixelRatio,this.tileSize=B.tileSize,this.source=B.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=B.showCollisionBoxes,this.collectResourceTiming=!!B.collectResourceTiming,this.returnDependencies=!!B.returnDependencies,this.promoteId=B.promoteId,this.inFlightDependencies=[]}parse(B,z,Z,ee){return r._(this,void 0,void 0,function*(){this.status="parsing",this.data=B,this.collisionBoxArray=new r.a4;let me=new r.bj(Object.keys(B.layers).sort()),ge=new r.bk(this.tileID,this.promoteId);ge.bucketLayerIDs=[];let we={},he={featureIndex:ge,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Z},Oe=z.familiesBySource[this.source];for(let pn in Oe){let Ei=B.layers[pn];if(!Ei)continue;Ei.version===1&&r.w(`Vector tile source "${this.source}" layer "${pn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let sr=me.encode(pn),zr=[];for(let ss=0;ss<Ei.length;ss++){let _r=Ei.feature(ss),ya=ge.getId(_r,pn);zr.push({feature:_r,id:ya,index:ss,sourceLayerIndex:sr})}for(let ss of Oe[pn]){let _r=ss[0];_r.source!==this.source&&r.w(`layer.source = ${_r.source} does not equal this.source = ${this.source}`),_r.minzoom&&this.zoom<Math.floor(_r.minzoom)||_r.maxzoom&&this.zoom>=_r.maxzoom||_r.visibility!=="none"&&(f(ss,this.zoom,Z),(we[_r.id]=_r.createBucket({index:ge.bucketLayerIDs.length,layers:ss,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:sr,sourceID:this.source})).populate(zr,he,this.tileID.canonical),ge.bucketLayerIDs.push(ss.map(ya=>ya.id)))}}let qe=r.aE(he.glyphDependencies,pn=>Object.keys(pn).map(Number));this.inFlightDependencies.forEach(pn=>pn?.abort()),this.inFlightDependencies=[];let ze=Promise.resolve({});if(Object.keys(qe).length){let pn=new AbortController;this.inFlightDependencies.push(pn),ze=ee.sendAsync({type:"GG",data:{stacks:qe,source:this.source,tileID:this.tileID,type:"glyphs"}},pn)}let $e=Object.keys(he.iconDependencies),Ut=Promise.resolve({});if($e.length){let pn=new AbortController;this.inFlightDependencies.push(pn),Ut=ee.sendAsync({type:"GI",data:{icons:$e,source:this.source,tileID:this.tileID,type:"icons"}},pn)}let qt=Object.keys(he.patternDependencies),on=Promise.resolve({});if(qt.length){let pn=new AbortController;this.inFlightDependencies.push(pn),on=ee.sendAsync({type:"GI",data:{icons:qt,source:this.source,tileID:this.tileID,type:"patterns"}},pn)}let[en,Bn,Xn]=yield Promise.all([ze,Ut,on]),mi=new l(en),Qi=new r.bl(Bn,Xn);for(let pn in we){let Ei=we[pn];Ei instanceof r.a5?(f(Ei.layers,this.zoom,Z),r.bm({bucket:Ei,glyphMap:en,glyphPositions:mi.positions,imageMap:Bn,imagePositions:Qi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ei.hasPattern&&(Ei instanceof r.bn||Ei instanceof r.bo||Ei instanceof r.bp)&&(f(Ei.layers,this.zoom,Z),Ei.addFeatures(he,this.tileID.canonical,Qi.patternPositions))}return this.status="done",{buckets:Object.values(we).filter(pn=>!pn.isEmpty()),featureIndex:ge,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mi.image,imageAtlas:Qi,glyphMap:this.returnDependencies?en:null,iconMap:this.returnDependencies?Bn:null,glyphPositions:this.returnDependencies?mi.positions:null}})}}function f(se,B,z){let Z=new r.a8(B);for(let ee of se)ee.recalculate(Z,z)}class v{constructor(B,z,Z){this.actor=B,this.layerIndex=z,this.availableImages=Z,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(B,z){return r._(this,void 0,void 0,function*(){let Z=yield r.l(B.request,z);try{return{vectorTile:new r.bq.VectorTile(new r.br(Z.data)),rawData:Z.data,cacheControl:Z.cacheControl,expires:Z.expires}}catch(ee){let me=new Uint8Array(Z.data),ge=`Unable to parse the tile at ${B.request.url}, `;throw ge+=me[0]===31&&me[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ee.messge}`,new Error(ge)}})}loadTile(B){return r._(this,void 0,void 0,function*(){let z=B.uid,Z=!!(B&&B.request&&B.request.collectResourceTiming)&&new r.bs(B.request),ee=new d(B);this.loading[z]=ee;let me=new AbortController;ee.abort=me;try{let ge=yield this.loadVectorTile(B,me);if(delete this.loading[z],!ge)return null;let we=ge.rawData,he={};ge.expires&&(he.expires=ge.expires),ge.cacheControl&&(he.cacheControl=ge.cacheControl);let Oe={};if(Z){let ze=Z.finish();ze&&(Oe.resourceTiming=JSON.parse(JSON.stringify(ze)))}ee.vectorTile=ge.vectorTile;let qe=ee.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[z]=ee,this.fetching[z]={rawTileData:we,cacheControl:he,resourceTiming:Oe};try{let ze=yield qe;return r.e({rawTileData:we.slice(0)},ze,he,Oe)}finally{delete this.fetching[z]}}catch(ge){throw delete this.loading[z],ee.status="done",this.loaded[z]=ee,ge}})}reloadTile(B){return r._(this,void 0,void 0,function*(){let z=B.uid;if(!this.loaded||!this.loaded[z])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let Z=this.loaded[z];if(Z.showCollisionBoxes=B.showCollisionBoxes,Z.status==="parsing"){let ee=yield Z.parse(Z.vectorTile,this.layerIndex,this.availableImages,this.actor),me;if(this.fetching[z]){let{rawTileData:ge,cacheControl:we,resourceTiming:he}=this.fetching[z];delete this.fetching[z],me=r.e({rawTileData:ge.slice(0)},ee,we,he)}else me=ee;return me}if(Z.status==="done"&&Z.vectorTile)return Z.parse(Z.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(B){return r._(this,void 0,void 0,function*(){let z=this.loading,Z=B.uid;z&&z[Z]&&z[Z].abort&&(z[Z].abort.abort(),delete z[Z])})}removeTile(B){return r._(this,void 0,void 0,function*(){this.loaded&&this.loaded[B.uid]&&delete this.loaded[B.uid]})}}class x{constructor(){this.loaded={}}loadTile(B){return r._(this,void 0,void 0,function*(){let{uid:z,encoding:Z,rawImageData:ee,redFactor:me,greenFactor:ge,blueFactor:we,baseShift:he}=B,Oe=ee.width+2,qe=ee.height+2,ze=r.b(ee)?new r.R({width:Oe,height:qe},yield r.bt(ee,-1,-1,Oe,qe)):ee,$e=new r.bu(z,ze,Z,me,ge,we,he);return this.loaded=this.loaded||{},this.loaded[z]=$e,$e})}removeTile(B){let z=this.loaded,Z=B.uid;z&&z[Z]&&delete z[Z]}}function O(se,B){if(se.length!==0){A(se[0],B);for(var z=1;z<se.length;z++)A(se[z],!B)}}function A(se,B){for(var z=0,Z=0,ee=0,me=se.length,ge=me-1;ee<me;ge=ee++){var we=(se[ee][0]-se[ge][0])*(se[ge][1]+se[ee][1]),he=z+we;Z+=Math.abs(z)>=Math.abs(we)?z-he+we:we-he+z,z=he}z+Z>=0!=!!B&&se.reverse()}var L=r.bv(function se(B,z){var Z,ee=B&&B.type;if(ee==="FeatureCollection")for(Z=0;Z<B.features.length;Z++)se(B.features[Z],z);else if(ee==="GeometryCollection")for(Z=0;Z<B.geometries.length;Z++)se(B.geometries[Z],z);else if(ee==="Feature")se(B.geometry,z);else if(ee==="Polygon")O(B.coordinates,z);else if(ee==="MultiPolygon")for(Z=0;Z<B.coordinates.length;Z++)O(B.coordinates[Z],z);return B});let U=r.bq.VectorTileFeature.prototype.toGeoJSON;var te={exports:{}},ce=r.bw,fe=r.bq.VectorTileFeature,ye=Re;function Re(se,B){this.options=B||{},this.features=se,this.length=se.length}function Ae(se,B){this.id=typeof se.id=="number"?se.id:void 0,this.type=se.type,this.rawGeometry=se.type===1?[se.geometry]:se.geometry,this.properties=se.tags,this.extent=B||4096}Re.prototype.feature=function(se){return new Ae(this.features[se],this.options.extent)},Ae.prototype.loadGeometry=function(){var se=this.rawGeometry;this.geometry=[];for(var B=0;B<se.length;B++){for(var z=se[B],Z=[],ee=0;ee<z.length;ee++)Z.push(new ce(z[ee][0],z[ee][1]));this.geometry.push(Z)}return this.geometry},Ae.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var se=this.geometry,B=1/0,z=-1/0,Z=1/0,ee=-1/0,me=0;me<se.length;me++)for(var ge=se[me],we=0;we<ge.length;we++){var he=ge[we];B=Math.min(B,he.x),z=Math.max(z,he.x),Z=Math.min(Z,he.y),ee=Math.max(ee,he.y)}return[B,Z,z,ee]},Ae.prototype.toGeoJSON=fe.prototype.toGeoJSON;var We=r.bx,ft=ye;function Et(se){var B=new We;return function(z,Z){for(var ee in z.layers)Z.writeMessage(3,Pt,z.layers[ee])}(se,B),B.finish()}function Pt(se,B){var z;B.writeVarintField(15,se.version||1),B.writeStringField(1,se.name||""),B.writeVarintField(5,se.extent||4096);var Z={keys:[],values:[],keycache:{},valuecache:{}};for(z=0;z<se.length;z++)Z.feature=se.feature(z),B.writeMessage(2,rt,Z);var ee=Z.keys;for(z=0;z<ee.length;z++)B.writeStringField(3,ee[z]);var me=Z.values;for(z=0;z<me.length;z++)B.writeMessage(4,Ye,me[z])}function rt(se,B){var z=se.feature;z.id!==void 0&&B.writeVarintField(1,z.id),B.writeMessage(2,nn,se),B.writeVarintField(3,z.type),B.writeMessage(4,Je,z)}function nn(se,B){var z=se.feature,Z=se.keys,ee=se.values,me=se.keycache,ge=se.valuecache;for(var we in z.properties){var he=z.properties[we],Oe=me[we];if(he!==null){Oe===void 0&&(Z.push(we),me[we]=Oe=Z.length-1),B.writeVarint(Oe);var qe=typeof he;qe!=="string"&&qe!=="boolean"&&qe!=="number"&&(he=JSON.stringify(he));var ze=qe+":"+he,$e=ge[ze];$e===void 0&&(ee.push(he),ge[ze]=$e=ee.length-1),B.writeVarint($e)}}}function Qt(se,B){return(B<<3)+(7&se)}function st(se){return se<<1^se>>31}function Je(se,B){for(var z=se.loadGeometry(),Z=se.type,ee=0,me=0,ge=z.length,we=0;we<ge;we++){var he=z[we],Oe=1;Z===1&&(Oe=he.length),B.writeVarint(Qt(1,Oe));for(var qe=Z===3?he.length-1:he.length,ze=0;ze<qe;ze++){ze===1&&Z!==1&&B.writeVarint(Qt(2,qe-1));var $e=he[ze].x-ee,Ut=he[ze].y-me;B.writeVarint(st($e)),B.writeVarint(st(Ut)),ee+=$e,me+=Ut}Z===3&&B.writeVarint(Qt(7,1))}}function Ye(se,B){var z=typeof se;z==="string"?B.writeStringField(1,se):z==="boolean"?B.writeBooleanField(7,se):z==="number"&&(se%1!=0?B.writeDoubleField(3,se):se<0?B.writeSVarintField(6,se):B.writeVarintField(5,se))}te.exports=Et,te.exports.fromVectorTileJs=Et,te.exports.fromGeojsonVt=function(se,B){B=B||{};var z={};for(var Z in se)z[Z]=new ft(se[Z].features,B),z[Z].name=Z,z[Z].version=B.version,z[Z].extent=B.extent;return Et({layers:z})},te.exports.GeoJSONWrapper=ft;var lt=r.bv(te.exports);let Te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:se=>se},Se=Math.fround||(Pe=new Float32Array(1),se=>(Pe[0]=+se,Pe[0]));var Pe;let Ke=3,ut=5,yt=6;class Yt{constructor(B){this.options=Object.assign(Object.create(Te),B),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(B){let{log:z,minZoom:Z,maxZoom:ee}=this.options;z&&console.time("total time");let me=`prepare ${B.length} points`;z&&console.time(me),this.points=B;let ge=[];for(let he=0;he<B.length;he++){let Oe=B[he];if(!Oe.geometry)continue;let[qe,ze]=Oe.geometry.coordinates,$e=Se(bn(qe)),Ut=Se(In(ze));ge.push($e,Ut,1/0,he,-1,1),this.options.reduce&&ge.push(0)}let we=this.trees[ee+1]=this._createTree(ge);z&&console.timeEnd(me);for(let he=ee;he>=Z;he--){let Oe=+Date.now();we=this.trees[he]=this._createTree(this._cluster(we,he)),z&&console.log("z%d: %d clusters in %dms",he,we.numItems,+Date.now()-Oe)}return z&&console.timeEnd("total time"),this}getClusters(B,z){let Z=((B[0]+180)%360+360)%360-180,ee=Math.max(-90,Math.min(90,B[1])),me=B[2]===180?180:((B[2]+180)%360+360)%360-180,ge=Math.max(-90,Math.min(90,B[3]));if(B[2]-B[0]>=360)Z=-180,me=180;else if(Z>me){let ze=this.getClusters([Z,ee,180,ge],z),$e=this.getClusters([-180,ee,me,ge],z);return ze.concat($e)}let we=this.trees[this._limitZoom(z)],he=we.range(bn(Z),In(ge),bn(me),In(ee)),Oe=we.data,qe=[];for(let ze of he){let $e=this.stride*ze;qe.push(Oe[$e+ut]>1?Jt(Oe,$e,this.clusterProps):this.points[Oe[$e+Ke]])}return qe}getChildren(B){let z=this._getOriginId(B),Z=this._getOriginZoom(B),ee="No cluster with the specified id.",me=this.trees[Z];if(!me)throw new Error(ee);let ge=me.data;if(z*this.stride>=ge.length)throw new Error(ee);let we=this.options.radius/(this.options.extent*Math.pow(2,Z-1)),he=me.within(ge[z*this.stride],ge[z*this.stride+1],we),Oe=[];for(let qe of he){let ze=qe*this.stride;ge[ze+4]===B&&Oe.push(ge[ze+ut]>1?Jt(ge,ze,this.clusterProps):this.points[ge[ze+Ke]])}if(Oe.length===0)throw new Error(ee);return Oe}getLeaves(B,z,Z){let ee=[];return this._appendLeaves(ee,B,z=z||10,Z=Z||0,0),ee}getTile(B,z,Z){let ee=this.trees[this._limitZoom(B)],me=Math.pow(2,B),{extent:ge,radius:we}=this.options,he=we/ge,Oe=(Z-he)/me,qe=(Z+1+he)/me,ze={features:[]};return this._addTileFeatures(ee.range((z-he)/me,Oe,(z+1+he)/me,qe),ee.data,z,Z,me,ze),z===0&&this._addTileFeatures(ee.range(1-he/me,Oe,1,qe),ee.data,me,Z,me,ze),z===me-1&&this._addTileFeatures(ee.range(0,Oe,he/me,qe),ee.data,-1,Z,me,ze),ze.features.length?ze:null}getClusterExpansionZoom(B){let z=this._getOriginZoom(B)-1;for(;z<=this.options.maxZoom;){let Z=this.getChildren(B);if(z++,Z.length!==1)break;B=Z[0].properties.cluster_id}return z}_appendLeaves(B,z,Z,ee,me){let ge=this.getChildren(z);for(let we of ge){let he=we.properties;if(he&&he.cluster?me+he.point_count<=ee?me+=he.point_count:me=this._appendLeaves(B,he.cluster_id,Z,ee,me):me<ee?me++:B.push(we),B.length===Z)break}return me}_createTree(B){let z=new r.au(B.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Z=0;Z<B.length;Z+=this.stride)z.add(B[Z],B[Z+1]);return z.finish(),z.data=B,z}_addTileFeatures(B,z,Z,ee,me,ge){for(let we of B){let he=we*this.stride,Oe=z[he+ut]>1,qe,ze,$e;if(Oe)qe=yn(z,he,this.clusterProps),ze=z[he],$e=z[he+1];else{let on=this.points[z[he+Ke]];qe=on.properties;let[en,Bn]=on.geometry.coordinates;ze=bn(en),$e=In(Bn)}let Ut={type:1,geometry:[[Math.round(this.options.extent*(ze*me-Z)),Math.round(this.options.extent*($e*me-ee))]],tags:qe},qt;qt=Oe||this.options.generateId?z[he+Ke]:this.points[z[he+Ke]].id,qt!==void 0&&(Ut.id=qt),ge.features.push(Ut)}}_limitZoom(B){return Math.max(this.options.minZoom,Math.min(Math.floor(+B),this.options.maxZoom+1))}_cluster(B,z){let{radius:Z,extent:ee,reduce:me,minPoints:ge}=this.options,we=Z/(ee*Math.pow(2,z)),he=B.data,Oe=[],qe=this.stride;for(let ze=0;ze<he.length;ze+=qe){if(he[ze+2]<=z)continue;he[ze+2]=z;let $e=he[ze],Ut=he[ze+1],qt=B.within(he[ze],he[ze+1],we),on=he[ze+ut],en=on;for(let Bn of qt){let Xn=Bn*qe;he[Xn+2]>z&&(en+=he[Xn+ut])}if(en>on&&en>=ge){let Bn,Xn=$e*on,mi=Ut*on,Qi=-1,pn=((ze/qe|0)<<5)+(z+1)+this.points.length;for(let Ei of qt){let sr=Ei*qe;if(he[sr+2]<=z)continue;he[sr+2]=z;let zr=he[sr+ut];Xn+=he[sr]*zr,mi+=he[sr+1]*zr,he[sr+4]=pn,me&&(Bn||(Bn=this._map(he,ze,!0),Qi=this.clusterProps.length,this.clusterProps.push(Bn)),me(Bn,this._map(he,sr)))}he[ze+4]=pn,Oe.push(Xn/en,mi/en,1/0,pn,-1,en),me&&Oe.push(Qi)}else{for(let Bn=0;Bn<qe;Bn++)Oe.push(he[ze+Bn]);if(en>1)for(let Bn of qt){let Xn=Bn*qe;if(!(he[Xn+2]<=z)){he[Xn+2]=z;for(let mi=0;mi<qe;mi++)Oe.push(he[Xn+mi])}}}}return Oe}_getOriginId(B){return B-this.points.length>>5}_getOriginZoom(B){return(B-this.points.length)%32}_map(B,z,Z){if(B[z+ut]>1){let ge=this.clusterProps[B[z+yt]];return Z?Object.assign({},ge):ge}let ee=this.points[B[z+Ke]].properties,me=this.options.map(ee);return Z&&me===ee?Object.assign({},me):me}}function Jt(se,B,z){return{type:"Feature",id:se[B+Ke],properties:yn(se,B,z),geometry:{type:"Point",coordinates:[(Z=se[B],360*(Z-.5)),$n(se[B+1])]}};var Z}function yn(se,B,z){let Z=se[B+ut],ee=Z>=1e4?`${Math.round(Z/1e3)}k`:Z>=1e3?Math.round(Z/100)/10+"k":Z,me=se[B+yt],ge=me===-1?{}:Object.assign({},z[me]);return Object.assign(ge,{cluster:!0,cluster_id:se[B+Ke],point_count:Z,point_count_abbreviated:ee})}function bn(se){return se/360+.5}function In(se){let B=Math.sin(se*Math.PI/180),z=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return z<0?0:z>1?1:z}function $n(se){let B=(180-360*se)*Math.PI/180;return 360*Math.atan(Math.exp(B))/Math.PI-90}function Ln(se,B,z,Z){for(var ee,me=Z,ge=z-B>>1,we=z-B,he=se[B],Oe=se[B+1],qe=se[z],ze=se[z+1],$e=B+3;$e<z;$e+=3){var Ut=Nn(se[$e],se[$e+1],he,Oe,qe,ze);if(Ut>me)ee=$e,me=Ut;else if(Ut===me){var qt=Math.abs($e-ge);qt<we&&(ee=$e,we=qt)}}me>Z&&(ee-B>3&&Ln(se,B,ee,Z),se[ee+2]=me,z-ee>3&&Ln(se,ee,z,Z))}function Nn(se,B,z,Z,ee,me){var ge=ee-z,we=me-Z;if(ge!==0||we!==0){var he=((se-z)*ge+(B-Z)*we)/(ge*ge+we*we);he>1?(z=ee,Z=me):he>0&&(z+=ge*he,Z+=we*he)}return(ge=se-z)*ge+(we=B-Z)*we}function Ui(se,B,z,Z){var ee={id:se===void 0?null:se,type:B,geometry:z,tags:Z,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(me){var ge=me.geometry,we=me.type;if(we==="Point"||we==="MultiPoint"||we==="LineString")Li(me,ge);else if(we==="Polygon"||we==="MultiLineString")for(var he=0;he<ge.length;he++)Li(me,ge[he]);else if(we==="MultiPolygon")for(he=0;he<ge.length;he++)for(var Oe=0;Oe<ge[he].length;Oe++)Li(me,ge[he][Oe])}(ee),ee}function Li(se,B){for(var z=0;z<B.length;z+=3)se.minX=Math.min(se.minX,B[z]),se.minY=Math.min(se.minY,B[z+1]),se.maxX=Math.max(se.maxX,B[z]),se.maxY=Math.max(se.maxY,B[z+1])}function Ci(se,B,z,Z){if(B.geometry){var ee=B.geometry.coordinates,me=B.geometry.type,ge=Math.pow(z.tolerance/((1<<z.maxZoom)*z.extent),2),we=[],he=B.id;if(z.promoteId?he=B.properties[z.promoteId]:z.generateId&&(he=Z||0),me==="Point")js(ee,we);else if(me==="MultiPoint")for(var Oe=0;Oe<ee.length;Oe++)js(ee[Oe],we);else if(me==="LineString")Za(ee,we,ge,!1);else if(me==="MultiLineString"){if(z.lineMetrics){for(Oe=0;Oe<ee.length;Oe++)Za(ee[Oe],we=[],ge,!1),se.push(Ui(he,"LineString",we,B.properties));return}Be(ee,we,ge,!1)}else if(me==="Polygon")Be(ee,we,ge,!0);else{if(me!=="MultiPolygon"){if(me==="GeometryCollection"){for(Oe=0;Oe<B.geometry.geometries.length;Oe++)Ci(se,{id:he,geometry:B.geometry.geometries[Oe],properties:B.properties},z,Z);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Oe=0;Oe<ee.length;Oe++){var qe=[];Be(ee[Oe],qe,ge,!0),we.push(qe)}}se.push(Ui(he,me,we,B.properties))}}function js(se,B){B.push(Ya(se[0])),B.push(Mo(se[1])),B.push(0)}function Za(se,B,z,Z){for(var ee,me,ge=0,we=0;we<se.length;we++){var he=Ya(se[we][0]),Oe=Mo(se[we][1]);B.push(he),B.push(Oe),B.push(0),we>0&&(ge+=Z?(ee*Oe-he*me)/2:Math.sqrt(Math.pow(he-ee,2)+Math.pow(Oe-me,2))),ee=he,me=Oe}var qe=B.length-3;B[2]=1,Ln(B,0,qe,z),B[qe+2]=1,B.size=Math.abs(ge),B.start=0,B.end=B.size}function Be(se,B,z,Z){for(var ee=0;ee<se.length;ee++){var me=[];Za(se[ee],me,z,Z),B.push(me)}}function Ya(se){return se/360+.5}function Mo(se){var B=Math.sin(se*Math.PI/180),z=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return z<0?0:z>1?1:z}function Cn(se,B,z,Z,ee,me,ge,we){if(Z/=B,me>=(z/=B)&&ge<Z)return se;if(ge<z||me>=Z)return null;for(var he=[],Oe=0;Oe<se.length;Oe++){var qe=se[Oe],ze=qe.geometry,$e=qe.type,Ut=ee===0?qe.minX:qe.minY,qt=ee===0?qe.maxX:qe.maxY;if(Ut>=z&&qt<Z)he.push(qe);else if(!(qt<z||Ut>=Z)){var on=[];if($e==="Point"||$e==="MultiPoint")$i(ze,on,z,Z,ee);else if($e==="LineString")rs(ze,on,z,Z,ee,!1,we.lineMetrics);else if($e==="MultiLineString")Ka(ze,on,z,Z,ee,!1);else if($e==="Polygon")Ka(ze,on,z,Z,ee,!0);else if($e==="MultiPolygon")for(var en=0;en<ze.length;en++){var Bn=[];Ka(ze[en],Bn,z,Z,ee,!0),Bn.length&&on.push(Bn)}if(on.length){if(we.lineMetrics&&$e==="LineString"){for(en=0;en<on.length;en++)he.push(Ui(qe.id,$e,on[en],qe.tags));continue}$e!=="LineString"&&$e!=="MultiLineString"||(on.length===1?($e="LineString",on=on[0]):$e="MultiLineString"),$e!=="Point"&&$e!=="MultiPoint"||($e=on.length===3?"Point":"MultiPoint"),he.push(Ui(qe.id,$e,on,qe.tags))}}}return he.length?he:null}function $i(se,B,z,Z,ee){for(var me=0;me<se.length;me+=3){var ge=se[me+ee];ge>=z&&ge<=Z&&(B.push(se[me]),B.push(se[me+1]),B.push(se[me+2]))}}function rs(se,B,z,Z,ee,me,ge){for(var we,he,Oe=ta(se),qe=ee===0?Vs:tc,ze=se.start,$e=0;$e<se.length-3;$e+=3){var Ut=se[$e],qt=se[$e+1],on=se[$e+2],en=se[$e+3],Bn=se[$e+4],Xn=ee===0?Ut:qt,mi=ee===0?en:Bn,Qi=!1;ge&&(we=Math.sqrt(Math.pow(Ut-en,2)+Math.pow(qt-Bn,2))),Xn<z?mi>z&&(he=qe(Oe,Ut,qt,en,Bn,z),ge&&(Oe.start=ze+we*he)):Xn>Z?mi<Z&&(he=qe(Oe,Ut,qt,en,Bn,Z),ge&&(Oe.start=ze+we*he)):Qa(Oe,Ut,qt,on),mi<z&&Xn>=z&&(he=qe(Oe,Ut,qt,en,Bn,z),Qi=!0),mi>Z&&Xn<=Z&&(he=qe(Oe,Ut,qt,en,Bn,Z),Qi=!0),!me&&Qi&&(ge&&(Oe.end=ze+we*he),B.push(Oe),Oe=ta(se)),ge&&(ze+=we)}var pn=se.length-3;Ut=se[pn],qt=se[pn+1],on=se[pn+2],(Xn=ee===0?Ut:qt)>=z&&Xn<=Z&&Qa(Oe,Ut,qt,on),pn=Oe.length-3,me&&pn>=3&&(Oe[pn]!==Oe[0]||Oe[pn+1]!==Oe[1])&&Qa(Oe,Oe[0],Oe[1],Oe[2]),Oe.length&&B.push(Oe)}function ta(se){var B=[];return B.size=se.size,B.start=se.start,B.end=se.end,B}function Ka(se,B,z,Z,ee,me){for(var ge=0;ge<se.length;ge++)rs(se[ge],B,z,Z,ee,me,!1)}function Qa(se,B,z,Z){se.push(B),se.push(z),se.push(Z)}function Vs(se,B,z,Z,ee,me){var ge=(me-B)/(Z-B);return se.push(me),se.push(z+(ee-z)*ge),se.push(1),ge}function tc(se,B,z,Z,ee,me){var ge=(me-z)/(ee-z);return se.push(B+(Z-B)*ge),se.push(me),se.push(1),ge}function _a(se,B){for(var z=[],Z=0;Z<se.length;Z++){var ee,me=se[Z],ge=me.type;if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")ee=at(me.geometry,B);else if(ge==="MultiLineString"||ge==="Polygon"){ee=[];for(var we=0;we<me.geometry.length;we++)ee.push(at(me.geometry[we],B))}else if(ge==="MultiPolygon")for(ee=[],we=0;we<me.geometry.length;we++){for(var he=[],Oe=0;Oe<me.geometry[we].length;Oe++)he.push(at(me.geometry[we][Oe],B));ee.push(he)}z.push(Ui(me.id,ge,ee,me.tags))}return z}function at(se,B){var z=[];z.size=se.size,se.start!==void 0&&(z.start=se.start,z.end=se.end);for(var Z=0;Z<se.length;Z+=3)z.push(se[Z]+B,se[Z+1],se[Z+2]);return z}function bs(se,B){if(se.transformed)return se;var z,Z,ee,me=1<<se.z,ge=se.x,we=se.y;for(z=0;z<se.features.length;z++){var he=se.features[z],Oe=he.geometry,qe=he.type;if(he.geometry=[],qe===1)for(Z=0;Z<Oe.length;Z+=2)he.geometry.push(ws(Oe[Z],Oe[Z+1],B,me,ge,we));else for(Z=0;Z<Oe.length;Z++){var ze=[];for(ee=0;ee<Oe[Z].length;ee+=2)ze.push(ws(Oe[Z][ee],Oe[Z][ee+1],B,me,ge,we));he.geometry.push(ze)}}return se.transformed=!0,se}function ws(se,B,z,Z,ee,me){return[Math.round(z*(se*Z-ee)),Math.round(z*(B*Z-me))]}function ql(se,B,z,Z,ee){for(var me=B===ee.maxZoom?0:ee.tolerance/((1<<B)*ee.extent),ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:z,y:Z,z:B,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},we=0;we<se.length;we++){ge.numFeatures++,Ir(ge,se[we],me,ee);var he=se[we].minX,Oe=se[we].minY,qe=se[we].maxX,ze=se[we].maxY;he<ge.minX&&(ge.minX=he),Oe<ge.minY&&(ge.minY=Oe),qe>ge.maxX&&(ge.maxX=qe),ze>ge.maxY&&(ge.maxY=ze)}return ge}function Ir(se,B,z,Z){var ee=B.geometry,me=B.type,ge=[];if(me==="Point"||me==="MultiPoint")for(var we=0;we<ee.length;we+=3)ge.push(ee[we]),ge.push(ee[we+1]),se.numPoints++,se.numSimplified++;else if(me==="LineString")vt(ge,ee,se,z,!1,!1);else if(me==="MultiLineString"||me==="Polygon")for(we=0;we<ee.length;we++)vt(ge,ee[we],se,z,me==="Polygon",we===0);else if(me==="MultiPolygon")for(var he=0;he<ee.length;he++){var Oe=ee[he];for(we=0;we<Oe.length;we++)vt(ge,Oe[we],se,z,!0,we===0)}if(ge.length){var qe=B.tags||null;if(me==="LineString"&&Z.lineMetrics){for(var ze in qe={},B.tags)qe[ze]=B.tags[ze];qe.mapbox_clip_start=ee.start/ee.size,qe.mapbox_clip_end=ee.end/ee.size}var $e={geometry:ge,type:me==="Polygon"||me==="MultiPolygon"?3:me==="LineString"||me==="MultiLineString"?2:1,tags:qe};B.id!==null&&($e.id=B.id),se.features.push($e)}}function vt(se,B,z,Z,ee,me){var ge=Z*Z;if(Z>0&&B.size<(ee?ge:Z))z.numPoints+=B.length/3;else{for(var we=[],he=0;he<B.length;he+=3)(Z===0||B[he+2]>ge)&&(z.numSimplified++,we.push(B[he]),we.push(B[he+1])),z.numPoints++;ee&&function(Oe,qe){for(var ze=0,$e=0,Ut=Oe.length,qt=Ut-2;$e<Ut;qt=$e,$e+=2)ze+=(Oe[$e]-Oe[qt])*(Oe[$e+1]+Oe[qt+1]);if(ze>0===qe)for($e=0,Ut=Oe.length;$e<Ut/2;$e+=2){var on=Oe[$e],en=Oe[$e+1];Oe[$e]=Oe[Ut-2-$e],Oe[$e+1]=Oe[Ut-1-$e],Oe[Ut-2-$e]=on,Oe[Ut-1-$e]=en}}(we,me),se.push(we)}}function mn(se,B){var z=(B=this.options=function(ee,me){for(var ge in me)ee[ge]=me[ge];return ee}(Object.create(this.options),B)).debug;if(z&&console.time("preprocess data"),B.maxZoom<0||B.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(B.promoteId&&B.generateId)throw new Error("promoteId and generateId cannot be used together.");var Z=function(ee,me){var ge=[];if(ee.type==="FeatureCollection")for(var we=0;we<ee.features.length;we++)Ci(ge,ee.features[we],me,we);else Ci(ge,ee.type==="Feature"?ee:{geometry:ee},me);return ge}(se,B);this.tiles={},this.tileCoords=[],z&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",B.indexMaxZoom,B.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Z=function(ee,me){var ge=me.buffer/me.extent,we=ee,he=Cn(ee,1,-1-ge,ge,0,-1,2,me),Oe=Cn(ee,1,1-ge,2+ge,0,-1,2,me);return(he||Oe)&&(we=Cn(ee,1,-ge,1+ge,0,-1,2,me)||[],he&&(we=_a(he,1).concat(we)),Oe&&(we=we.concat(_a(Oe,-1)))),we}(Z,B),Z.length&&this.splitTile(Z,0,0,0),z&&(Z.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function hn(se,B,z){return 32*((1<<se)*z+B)+se}function Ki(se,B){return B?se.properties[B]:se.id}function va(se,B){if(se==null)return!0;if(se.type==="Feature")return Ki(se,B)!=null;if(se.type==="FeatureCollection"){let z=new Set;for(let Z of se.features){let ee=Ki(Z,B);if(ee==null||z.has(ee))return!1;z.add(ee)}return!0}return!1}function an(se,B){let z=new Map;if(se!=null)if(se.type==="Feature")z.set(Ki(se,B),se);else for(let Z of se.features)z.set(Ki(Z,B),Z);return z}mn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},mn.prototype.splitTile=function(se,B,z,Z,ee,me,ge){for(var we=[se,B,z,Z],he=this.options,Oe=he.debug;we.length;){Z=we.pop(),z=we.pop(),B=we.pop(),se=we.pop();var qe=1<<B,ze=hn(B,z,Z),$e=this.tiles[ze];if(!$e&&(Oe>1&&console.time("creation"),$e=this.tiles[ze]=ql(se,B,z,Z,he),this.tileCoords.push({z:B,x:z,y:Z}),Oe)){Oe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",B,z,Z,$e.numFeatures,$e.numPoints,$e.numSimplified),console.timeEnd("creation"));var Ut="z"+B;this.stats[Ut]=(this.stats[Ut]||0)+1,this.total++}if($e.source=se,ee){if(B===he.maxZoom||B===ee)continue;var qt=1<<ee-B;if(z!==Math.floor(me/qt)||Z!==Math.floor(ge/qt))continue}else if(B===he.indexMaxZoom||$e.numPoints<=he.indexMaxPoints)continue;if($e.source=null,se.length!==0){Oe>1&&console.time("clipping");var on,en,Bn,Xn,mi,Qi,pn=.5*he.buffer/he.extent,Ei=.5-pn,sr=.5+pn,zr=1+pn;on=en=Bn=Xn=null,mi=Cn(se,qe,z-pn,z+sr,0,$e.minX,$e.maxX,he),Qi=Cn(se,qe,z+Ei,z+zr,0,$e.minX,$e.maxX,he),se=null,mi&&(on=Cn(mi,qe,Z-pn,Z+sr,1,$e.minY,$e.maxY,he),en=Cn(mi,qe,Z+Ei,Z+zr,1,$e.minY,$e.maxY,he),mi=null),Qi&&(Bn=Cn(Qi,qe,Z-pn,Z+sr,1,$e.minY,$e.maxY,he),Xn=Cn(Qi,qe,Z+Ei,Z+zr,1,$e.minY,$e.maxY,he),Qi=null),Oe>1&&console.timeEnd("clipping"),we.push(on||[],B+1,2*z,2*Z),we.push(en||[],B+1,2*z,2*Z+1),we.push(Bn||[],B+1,2*z+1,2*Z),we.push(Xn||[],B+1,2*z+1,2*Z+1)}}},mn.prototype.getTile=function(se,B,z){var Z=this.options,ee=Z.extent,me=Z.debug;if(se<0||se>24)return null;var ge=1<<se,we=hn(se,B=(B%ge+ge)%ge,z);if(this.tiles[we])return bs(this.tiles[we],ee);me>1&&console.log("drilling down to z%d-%d-%d",se,B,z);for(var he,Oe=se,qe=B,ze=z;!he&&Oe>0;)Oe--,qe=Math.floor(qe/2),ze=Math.floor(ze/2),he=this.tiles[hn(Oe,qe,ze)];return he&&he.source?(me>1&&console.log("found parent tile z%d-%d-%d",Oe,qe,ze),me>1&&console.time("drilling down"),this.splitTile(he.source,Oe,qe,ze,se,B,z),me>1&&console.timeEnd("drilling down"),this.tiles[we]?bs(this.tiles[we],ee):null):null};class nc extends v{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(B,z){return r._(this,void 0,void 0,function*(){let Z=B.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let ee=this._geoJSONIndex.getTile(Z.z,Z.x,Z.y);if(!ee)return null;let me=new class{constructor(we){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.W,this.length=we.length,this._features=we}feature(we){return new class{constructor(he){this._feature=he,this.extent=r.W,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){let he=[];for(let Oe of this._feature.geometry)he.push([new r.P(Oe[0],Oe[1])]);return he}{let he=[];for(let Oe of this._feature.geometry){let qe=[];for(let ze of Oe)qe.push(new r.P(ze[0],ze[1]));he.push(qe)}return he}}toGeoJSON(he,Oe,qe){return U.call(this,he,Oe,qe)}}(this._features[we])}}(ee.features),ge=lt(me);return ge.byteOffset===0&&ge.byteLength===ge.buffer.byteLength||(ge=new Uint8Array(ge)),{vectorTile:me,rawData:ge.buffer}})}loadData(B){return r._(this,void 0,void 0,function*(){var z;(z=this._pendingRequest)===null||z===void 0||z.abort();let Z=!!(B&&B.request&&B.request.collectResourceTiming)&&new r.bs(B.request);this._pendingRequest=new AbortController;try{let ee=yield this.loadGeoJSON(B,this._pendingRequest);if(delete this._pendingRequest,typeof ee!="object")throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`);if(L(ee,!0),B.filter){let ge=r.by(B.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ge.result==="error")throw new Error(ge.value.map(he=>`${he.key}: ${he.message}`).join(", "));ee={type:"FeatureCollection",features:ee.features.filter(he=>ge.value.evaluate({zoom:0},he))}}this._geoJSONIndex=B.cluster?new Yt(function({superclusterOptions:ge,clusterProperties:we}){if(!we||!ge)return ge;let he={},Oe={},qe={accumulated:null,zoom:0},ze={properties:null},$e=Object.keys(we);for(let Ut of $e){let[qt,on]=we[Ut],en=r.by(on),Bn=r.by(typeof qt=="string"?[qt,["accumulated"],["get",Ut]]:qt);he[Ut]=en.value,Oe[Ut]=Bn.value}return ge.map=Ut=>{ze.properties=Ut;let qt={};for(let on of $e)qt[on]=he[on].evaluate(qe,ze);return qt},ge.reduce=(Ut,qt)=>{ze.properties=qt;for(let on of $e)qe.accumulated=Ut[on],Ut[on]=Oe[on].evaluate(qe,ze)},ge}(B)).load(ee.features):function(ge,we){return new mn(ge,we)}(ee,B.geojsonVtOptions),this.loaded={};let me={};if(Z){let ge=Z.finish();ge&&(me.resourceTiming={},me.resourceTiming[B.source]=JSON.parse(JSON.stringify(ge)))}return me}catch(ee){if(delete this._pendingRequest,r.bz(ee))return{abandoned:!0};throw ee}})}reloadTile(B){let z=this.loaded;return z&&z[B.uid]?super.reloadTile(B):this.loadTile(B)}loadGeoJSON(B,z){return r._(this,void 0,void 0,function*(){let{promoteId:Z}=B;if(B.request){let ee=yield r.h(B.request,z);return this._dataUpdateable=va(ee.data,Z)?an(ee.data,Z):void 0,ee.data}if(typeof B.data=="string")try{let ee=JSON.parse(B.data);return this._dataUpdateable=va(ee,Z)?an(ee,Z):void 0,ee}catch{throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`)}if(!B.dataDiff)throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${B.source}`);return function(ee,me,ge){var we,he,Oe,qe;if(me.removeAll&&ee.clear(),me.remove)for(let ze of me.remove)ee.delete(ze);if(me.add)for(let ze of me.add){let $e=Ki(ze,ge);$e!=null&&ee.set($e,ze)}if(me.update)for(let ze of me.update){let $e=ee.get(ze.id);if($e==null)continue;let Ut=!ze.removeAllProperties&&(((we=ze.removeProperties)===null||we===void 0?void 0:we.length)>0||((he=ze.addOrUpdateProperties)===null||he===void 0?void 0:he.length)>0);if((ze.newGeometry||ze.removeAllProperties||Ut)&&($e=Object.assign({},$e),ee.set(ze.id,$e),Ut&&($e.properties=Object.assign({},$e.properties))),ze.newGeometry&&($e.geometry=ze.newGeometry),ze.removeAllProperties)$e.properties={};else if(((Oe=ze.removeProperties)===null||Oe===void 0?void 0:Oe.length)>0)for(let qt of ze.removeProperties)Object.prototype.hasOwnProperty.call($e.properties,qt)&&delete $e.properties[qt];if(((qe=ze.addOrUpdateProperties)===null||qe===void 0?void 0:qe.length)>0)for(let{key:qt,value:on}of ze.addOrUpdateProperties)$e.properties[qt]=on}}(this._dataUpdateable,B.dataDiff,Z),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(B){return r._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(B){return this._geoJSONIndex.getClusterExpansionZoom(B.clusterId)}getClusterChildren(B){return this._geoJSONIndex.getChildren(B.clusterId)}getClusterLeaves(B){return this._geoJSONIndex.getLeaves(B.clusterId,B.limit,B.offset)}}class rr{constructor(B){this.self=B,this.actor=new r.C(B),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(z,Z)=>{if(this.externalWorkerSourceTypes[z])throw new Error(`Worker source with name "${z}" already registered.`);this.externalWorkerSourceTypes[z]=Z},this.self.addProtocol=r.bf,this.self.removeProtocol=r.bg,this.self.registerRTLTextPlugin=z=>{if(r.bA.isParsed())throw new Error("RTL text plugin already registered.");r.bA.setMethods(z)},this.actor.registerMessageHandler("LDT",(z,Z)=>this._getDEMWorkerSource(z,Z.source).loadTile(Z)),this.actor.registerMessageHandler("RDT",(z,Z)=>r._(this,void 0,void 0,function*(){this._getDEMWorkerSource(z,Z.source).removeTile(Z)})),this.actor.registerMessageHandler("GCEZ",(z,Z)=>r._(this,void 0,void 0,function*(){return this._getWorkerSource(z,Z.type,Z.source).getClusterExpansionZoom(Z)})),this.actor.registerMessageHandler("GCC",(z,Z)=>r._(this,void 0,void 0,function*(){return this._getWorkerSource(z,Z.type,Z.source).getClusterChildren(Z)})),this.actor.registerMessageHandler("GCL",(z,Z)=>r._(this,void 0,void 0,function*(){return this._getWorkerSource(z,Z.type,Z.source).getClusterLeaves(Z)})),this.actor.registerMessageHandler("LD",(z,Z)=>this._getWorkerSource(z,Z.type,Z.source).loadData(Z)),this.actor.registerMessageHandler("LT",(z,Z)=>this._getWorkerSource(z,Z.type,Z.source).loadTile(Z)),this.actor.registerMessageHandler("RT",(z,Z)=>this._getWorkerSource(z,Z.type,Z.source).reloadTile(Z)),this.actor.registerMessageHandler("AT",(z,Z)=>this._getWorkerSource(z,Z.type,Z.source).abortTile(Z)),this.actor.registerMessageHandler("RMT",(z,Z)=>this._getWorkerSource(z,Z.type,Z.source).removeTile(Z)),this.actor.registerMessageHandler("RS",(z,Z)=>r._(this,void 0,void 0,function*(){if(!this.workerSources[z]||!this.workerSources[z][Z.type]||!this.workerSources[z][Z.type][Z.source])return;let ee=this.workerSources[z][Z.type][Z.source];delete this.workerSources[z][Z.type][Z.source],ee.removeSource!==void 0&&ee.removeSource(Z)})),this.actor.registerMessageHandler("RM",z=>r._(this,void 0,void 0,function*(){delete this.layerIndexes[z],delete this.availableImages[z],delete this.workerSources[z],delete this.demWorkerSources[z]})),this.actor.registerMessageHandler("SR",(z,Z)=>r._(this,void 0,void 0,function*(){this.referrer=Z})),this.actor.registerMessageHandler("SRPS",(z,Z)=>this._syncRTLPluginState(z,Z)),this.actor.registerMessageHandler("IS",(z,Z)=>r._(this,void 0,void 0,function*(){this.self.importScripts(Z)})),this.actor.registerMessageHandler("SI",(z,Z)=>this._setImages(z,Z)),this.actor.registerMessageHandler("UL",(z,Z)=>r._(this,void 0,void 0,function*(){this._getLayerIndex(z).update(Z.layers,Z.removedIds)})),this.actor.registerMessageHandler("SL",(z,Z)=>r._(this,void 0,void 0,function*(){this._getLayerIndex(z).replace(Z)}))}_setImages(B,z){return r._(this,void 0,void 0,function*(){this.availableImages[B]=z;for(let Z in this.workerSources[B]){let ee=this.workerSources[B][Z];for(let me in ee)ee[me].availableImages=z}})}_syncRTLPluginState(B,z){return r._(this,void 0,void 0,function*(){if(r.bA.isParsed())return r.bA.getState();if(z.pluginStatus!=="loading")return r.bA.setState(z),z;let Z=z.pluginURL;if(this.self.importScripts(Z),r.bA.isParsed()){let ee={pluginStatus:"loaded",pluginURL:Z};return r.bA.setState(ee),ee}throw r.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Z}`)})}_getAvailableImages(B){let z=this.availableImages[B];return z||(z=[]),z}_getLayerIndex(B){let z=this.layerIndexes[B];return z||(z=this.layerIndexes[B]=new s),z}_getWorkerSource(B,z,Z){if(this.workerSources[B]||(this.workerSources[B]={}),this.workerSources[B][z]||(this.workerSources[B][z]={}),!this.workerSources[B][z][Z]){let ee={sendAsync:(me,ge)=>(me.targetMapId=B,this.actor.sendAsync(me,ge))};switch(z){case"vector":this.workerSources[B][z][Z]=new v(ee,this._getLayerIndex(B),this._getAvailableImages(B));break;case"geojson":this.workerSources[B][z][Z]=new nc(ee,this._getLayerIndex(B),this._getAvailableImages(B));break;default:this.workerSources[B][z][Z]=new this.externalWorkerSourceTypes[z](ee,this._getLayerIndex(B),this._getAvailableImages(B))}}return this.workerSources[B][z][Z]}_getDEMWorkerSource(B,z){return this.demWorkerSources[B]||(this.demWorkerSources[B]={}),this.demWorkerSources[B][z]||(this.demWorkerSources[B][z]=new x),this.demWorkerSources[B][z]}}return r.i(self)&&(self.worker=new rr(self)),rr}),t("index",["exports","./shared"],function(r,s){"use strict";var l="4.1.3";let d,f,v={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((o,h)=>{let m=requestAnimationFrame(o);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(m),h(s.c())})}),getImageData(y,o=0){return this.getImageCanvasContext(y).getImageData(-o,-o,y.width+2*o,y.height+2*o)},getImageCanvasContext(y){let o=window.document.createElement("canvas"),h=o.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return o.width=y.width,o.height=y.height,h.drawImage(y,0,0,y.width,y.height),h},resolveURL:y=>(d||(d=document.createElement("a")),d.href=y,d.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(f==null&&(f=matchMedia("(prefers-reduced-motion: reduce)")),f.matches)}};class x{static testProp(o){if(!x.docStyle)return o[0];for(let h=0;h<o.length;h++)if(o[h]in x.docStyle)return o[h];return o[0]}static create(o,h,m){let g=window.document.createElement(o);return h!==void 0&&(g.className=h),m&&m.appendChild(g),g}static createNS(o,h){return window.document.createElementNS(o,h)}static disableDrag(){x.docStyle&&x.selectProp&&(x.userSelect=x.docStyle[x.selectProp],x.docStyle[x.selectProp]="none")}static enableDrag(){x.docStyle&&x.selectProp&&(x.docStyle[x.selectProp]=x.userSelect)}static setTransform(o,h){o.style[x.transformProp]=h}static addEventListener(o,h,m,g={}){o.addEventListener(h,m,"passive"in g?g:g.capture)}static removeEventListener(o,h,m,g={}){o.removeEventListener(h,m,"passive"in g?g:g.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",x.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",x.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",x.suppressClickInternal,!0)},0)}static getScale(o){let h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}static getPoint(o,h,m){let g=h.boundingClientRect;return new s.P((m.clientX-g.left)/h.x-o.clientLeft,(m.clientY-g.top)/h.y-o.clientTop)}static mousePos(o,h){let m=x.getScale(o);return x.getPoint(o,m,h)}static touchPos(o,h){let m=[],g=x.getScale(o);for(let b=0;b<h.length;b++)m.push(x.getPoint(o,g,h[b]));return m}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}}x.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,x.selectProp=x.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),x.transformProp=x.testProp(["transform","WebkitTransform"]);let O={supported:!1,testSupport:function(y){!U&&L&&(te?ce(y):A=y)}},A,L,U=!1,te=!1;function ce(y){let o=y.createTexture();y.bindTexture(y.TEXTURE_2D,o);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,L),y.isContextLost())return;O.supported=!0}catch{}y.deleteTexture(o),U=!0}var fe;typeof document<"u"&&(L=document.createElement("img"),L.onload=function(){A&&ce(A),A=null,te=!0},L.onerror=function(){U=!0,A=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let o,h,m,g;y.resetRequestQueue=()=>{o=[],h=0,m=0,g={}},y.addThrottleControl=I=>{let P=m++;return g[P]=I,P},y.removeThrottleControl=I=>{delete g[I],D()},y.getImage=(I,P,F=!0)=>new Promise((N,q)=>{O.supported&&(I.headers||(I.headers={}),I.headers.accept="image/webp,*/*"),s.e(I,{type:"image"}),o.push({abortController:P,requestParameters:I,supportImageRefresh:F,state:"queued",onError:ie=>{q(ie)},onSuccess:ie=>{N(ie)}}),D()});let b=I=>s._(this,void 0,void 0,function*(){I.state="running";let{requestParameters:P,supportImageRefresh:F,onError:N,onSuccess:q,abortController:ie}=I,ne=F===!1&&!s.i(self)&&!s.g(P.url)&&(!P.headers||Object.keys(P.headers).reduce((pe,Ie)=>pe&&Ie==="accept",!0));h++;let ae=ne?T(P,ie):s.m(P,ie);try{let pe=yield ae;delete I.abortController,I.state="completed",pe.data instanceof HTMLImageElement||s.b(pe.data)?q(pe):pe.data&&q({data:yield(J=pe.data,typeof createImageBitmap=="function"?s.d(J):s.f(J)),cacheControl:pe.cacheControl,expires:pe.expires})}catch(pe){delete I.abortController,N(pe)}finally{h--,D()}var J}),D=()=>{let I=(()=>{for(let P of Object.keys(g))if(g[P]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let P=h;P<I&&o.length>0;P++){let F=o.shift();F.abortController.signal.aborted?P--:b(F)}},T=(I,P)=>new Promise((F,N)=>{let q=new Image,ie=I.url,ne=I.credentials;ne&&ne==="include"?q.crossOrigin="use-credentials":(ne&&ne==="same-origin"||!s.s(ie))&&(q.crossOrigin="anonymous"),P.signal.addEventListener("abort",()=>{q.src="",N(s.c())}),q.fetchPriority="high",q.onload=()=>{q.onerror=q.onload=null,F({data:q})},q.onerror=()=>{q.onerror=q.onload=null,P.signal.aborted||N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},q.src=ie})}(fe||(fe={})),fe.resetRequestQueue();class ye{constructor(o){this._transformRequestFn=o}transformRequest(o,h){return this._transformRequestFn&&this._transformRequestFn(o,h)||{url:o}}normalizeSpriteURL(o,h,m){let g=function(b){let D=b.match(Re);if(!D)throw new Error(`Unable to parse URL "${b}"`);return{protocol:D[1],authority:D[2],path:D[3]||"/",params:D[4]?D[4].split("&"):[]}}(o);return g.path+=`${h}${m}`,function(b){let D=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${D}`}(g)}setTransformRequest(o){this._transformRequestFn=o}}let Re=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ae(y){var o=new s.A(3);return o[0]=y[0],o[1]=y[1],o[2]=y[2],o}var We,ft=function(y,o,h){return y[0]=o[0]-h[0],y[1]=o[1]-h[1],y[2]=o[2]-h[2],y};We=new s.A(3),s.A!=Float32Array&&(We[0]=0,We[1]=0,We[2]=0);var Et=function(y){var o=y[0],h=y[1];return o*o+h*h};function Pt(y){let o=[];if(typeof y=="string")o.push({id:"default",url:y});else if(y&&y.length>0){let h=[];for(let{id:m,url:g}of y){let b=`${m}${g}`;h.indexOf(b)===-1&&(h.push(b),o.push({id:m,url:g}))}}return o}(function(){var y=new s.A(2);s.A!=Float32Array&&(y[0]=0,y[1]=0)})();class rt{constructor(o,h,m,g){this.context=o,this.format=m,this.texture=o.gl.createTexture(),this.update(h,g)}update(o,h,m){let{width:g,height:b}=o,D=!(this.size&&this.size[0]===g&&this.size[1]===b||m),{context:T}=this,{gl:I}=T;if(this.useMipmap=!!(h&&h.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!h||h.premultiply!==!1)),D)this.size=[g,b],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||s.b(o)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,o):I.texImage2D(I.TEXTURE_2D,0,this.format,g,b,0,this.format,I.UNSIGNED_BYTE,o.data);else{let{x:P,y:F}=m||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||s.b(o)?I.texSubImage2D(I.TEXTURE_2D,0,P,F,I.RGBA,I.UNSIGNED_BYTE,o):I.texSubImage2D(I.TEXTURE_2D,0,P,F,g,b,I.RGBA,I.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(o,h,m){let{context:g}=this,{gl:b}=g;b.bindTexture(b.TEXTURE_2D,this.texture),m!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=b.LINEAR),o!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,o),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,m||o),this.filter=o),h!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,h),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}function nn(y){let{userImage:o}=y;return!!(o&&o.render&&o.render())&&(y.data.replace(new Uint8Array(o.data.buffer)),!0)}class Qt extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(let{ids:h,promiseResolve:m}of this.requestors)m(this._getImagesForIds(h));this.requestors=[]}}getImage(o){let h=this.images[o];if(h&&!h.data&&h.spriteData){let m=h.spriteData;h.data=new s.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),h.spriteData=null}return h}addImage(o,h){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,h)&&(this.images[o]=h)}_validate(o,h){let m=!0,g=h.data||h.spriteData;return this._validateStretch(h.stretchX,g&&g.width)||(this.fire(new s.j(new Error(`Image "${o}" has invalid "stretchX" value`))),m=!1),this._validateStretch(h.stretchY,g&&g.height)||(this.fire(new s.j(new Error(`Image "${o}" has invalid "stretchY" value`))),m=!1),this._validateContent(h.content,h)||(this.fire(new s.j(new Error(`Image "${o}" has invalid "content" value`))),m=!1),m}_validateStretch(o,h){if(!o)return!0;let m=0;for(let g of o){if(g[0]<m||g[1]<g[0]||h<g[1])return!1;m=g[1]}return!0}_validateContent(o,h){if(!o)return!0;if(o.length!==4)return!1;let m=h.spriteData,g=m&&m.width||h.data.width,b=m&&m.height||h.data.height;return!(o[0]<0||g<o[0]||o[1]<0||b<o[1]||o[2]<0||g<o[2]||o[3]<0||b<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,h,m=!0){let g=this.getImage(o);if(m&&(g.data.width!==h.data.width||g.data.height!==h.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=g.version+1,this.images[o]=h,this.updatedImages[o]=!0}removeImage(o){let h=this.images[o];delete this.images[o],delete this.patterns[o],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o){return new Promise((h,m)=>{let g=!0;if(!this.isLoaded())for(let b of o)this.images[b]||(g=!1);this.isLoaded()||g?h(this._getImagesForIds(o)):this.requestors.push({ids:o,promiseResolve:h})})}_getImagesForIds(o){let h={};for(let m of o){let g=this.getImage(m);g||(this.fire(new s.k("styleimagemissing",{id:m})),g=this.getImage(m)),g?h[m]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:s.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return h}getPixelSize(){let{width:o,height:h}=this.atlasImage;return{width:o,height:h}}getPattern(o){let h=this.patterns[o],m=this.getImage(o);if(!m)return null;if(h&&h.position.version===m.version)return h.position;if(h)h.position.version=m.version;else{let g={w:m.data.width+2,h:m.data.height+2,x:0,y:0},b=new s.I(g,m);this.patterns[o]={bin:g,position:b}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){let h=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new rt(o,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){let o=[];for(let b in this.patterns)o.push(this.patterns[b].bin);let{w:h,h:m}=s.p(o),g=this.atlasImage;g.resize({width:h||1,height:m||1});for(let b in this.patterns){let{bin:D}=this.patterns[b],T=D.x+1,I=D.y+1,P=this.getImage(b).data,F=P.width,N=P.height;s.R.copy(P,g,{x:0,y:0},{x:T,y:I},{width:F,height:N}),s.R.copy(P,g,{x:0,y:N-1},{x:T,y:I-1},{width:F,height:1}),s.R.copy(P,g,{x:0,y:0},{x:T,y:I+N},{width:F,height:1}),s.R.copy(P,g,{x:F-1,y:0},{x:T-1,y:I},{width:1,height:N}),s.R.copy(P,g,{x:0,y:0},{x:T+F,y:I},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(let h of o){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;let m=this.getImage(h);m||s.w(`Image with ID: "${h}" was not found`),nn(m)&&this.updateImage(h,m)}}}let st=1e20;function Je(y,o,h,m,g,b,D,T,I){for(let P=o;P<o+m;P++)Ye(y,h*b+P,b,g,D,T,I);for(let P=h;P<h+g;P++)Ye(y,P*b+o,1,m,D,T,I)}function Ye(y,o,h,m,g,b,D){b[0]=0,D[0]=-st,D[1]=st,g[0]=y[o];for(let T=1,I=0,P=0;T<m;T++){g[T]=y[o+T*h];let F=T*T;do{let N=b[I];P=(g[T]-g[N]+F-N*N)/(T-N)/2}while(P<=D[I]&&--I>-1);I++,b[I]=T,D[I]=P,D[I+1]=st}for(let T=0,I=0;T<m;T++){for(;D[I+1]<T;)I++;let P=b[I],F=T-P;y[o+T*h]=g[P]+F*F}}class lt{constructor(o,h){this.requestManager=o,this.localIdeographFontFamily=h,this.entries={}}setURL(o){this.url=o}getGlyphs(o){return s._(this,void 0,void 0,function*(){let h=[];for(let b in o)for(let D of o[b])h.push(this._getAndCacheGlyphsPromise(b,D));let m=yield Promise.all(h),g={};for(let{stack:b,id:D,glyph:T}of m)g[b]||(g[b]={}),g[b][D]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics};return g})}_getAndCacheGlyphsPromise(o,h){return s._(this,void 0,void 0,function*(){let m=this.entries[o];m||(m=this.entries[o]={glyphs:{},requests:{},ranges:{}});let g=m.glyphs[h];if(g!==void 0)return{stack:o,id:h,glyph:g};if(g=this._tinySDF(m,o,h),g)return m.glyphs[h]=g,{stack:o,id:h,glyph:g};let b=Math.floor(h/256);if(256*b>65535)throw new Error("glyphs > 65535 not supported");if(m.ranges[b])return{stack:o,id:h,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!m.requests[b]){let T=lt.loadGlyphRange(o,b,this.url,this.requestManager);m.requests[b]=T}let D=yield m.requests[b];for(let T in D)this._doesCharSupportLocalGlyph(+T)||(m.glyphs[+T]=D[+T]);return m.ranges[b]=!0,{stack:o,id:h,glyph:D[h]||null}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(s.u["CJK Unified Ideographs"](o)||s.u["Hangul Syllables"](o)||s.u.Hiragana(o)||s.u.Katakana(o))}_tinySDF(o,h,m){let g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(m))return;let b=o.tinySDF;if(!b){let T="400";/bold/i.test(h)?T="900":/medium/i.test(h)?T="500":/light/i.test(h)&&(T="200"),b=o.tinySDF=new lt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:T})}let D=b.draw(String.fromCharCode(m));return{id:m,bitmap:new s.o({width:D.width||60,height:D.height||60},D.data),metrics:{width:D.glyphWidth/2||24,height:D.glyphHeight/2||24,left:D.glyphLeft/2+.5||0,top:D.glyphTop/2-27.5||-8,advance:D.glyphAdvance/2||24,isDoubleResolution:!0}}}}lt.loadGlyphRange=function(y,o,h,m){return s._(this,void 0,void 0,function*(){let g=256*o,b=g+255,D=m.transformRequest(h.replace("{fontstack}",y).replace("{range}",`${g}-${b}`),"Glyphs"),T=yield s.l(D,new AbortController);if(!T||!T.data)throw new Error(`Could not load glyph range. range: ${o}, ${g}-${b}`);let I={};for(let P of s.n(T.data))I[P.id]=P;return I})},lt.TinySDF=class{constructor({fontSize:y=24,buffer:o=3,radius:h=8,cutoff:m=.25,fontFamily:g="sans-serif",fontWeight:b="normal",fontStyle:D="normal"}={}){this.buffer=o,this.cutoff=m,this.radius=h;let T=this.size=y+4*o,I=this._createCanvas(T),P=this.ctx=I.getContext("2d",{willReadFrequently:!0});P.font=`${D} ${b} ${y}px ${g}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(y){let o=document.createElement("canvas");return o.width=o.height=y,o}draw(y){let{width:o,actualBoundingBoxAscent:h,actualBoundingBoxDescent:m,actualBoundingBoxLeft:g,actualBoundingBoxRight:b}=this.ctx.measureText(y),D=Math.ceil(h),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-g))),I=Math.min(this.size-this.buffer,D+Math.ceil(m)),P=T+2*this.buffer,F=I+2*this.buffer,N=Math.max(P*F,0),q=new Uint8ClampedArray(N),ie={data:q,width:P,height:F,glyphWidth:T,glyphHeight:I,glyphTop:D,glyphLeft:0,glyphAdvance:o};if(T===0||I===0)return ie;let{ctx:ne,buffer:ae,gridInner:J,gridOuter:pe}=this;ne.clearRect(ae,ae,T,I),ne.fillText(y,ae,ae+D);let Ie=ne.getImageData(ae,ae,T,I);pe.fill(st,0,N),J.fill(0,0,N);for(let oe=0;oe<I;oe++)for(let be=0;be<T;be++){let Ee=Ie.data[4*(oe*T+be)+3]/255;if(Ee===0)continue;let ke=(oe+ae)*P+be+ae;if(Ee===1)pe[ke]=0,J[ke]=st;else{let Fe=.5-Ee;pe[ke]=Fe>0?Fe*Fe:0,J[ke]=Fe<0?Fe*Fe:0}}Je(pe,0,0,P,F,P,this.f,this.v,this.z),Je(J,ae,ae,T,I,P,this.f,this.v,this.z);for(let oe=0;oe<N;oe++){let be=Math.sqrt(pe[oe])-Math.sqrt(J[oe]);q[oe]=Math.round(255-255*(be/this.radius+this.cutoff))}return ie}};class Te{constructor(){this.specification=s.v.light.position}possiblyEvaluate(o,h){return s.y(o.expression.evaluate(h))}interpolate(o,h,m){return{x:s.z.number(o.x,h.x,m),y:s.z.number(o.y,h.y,m),z:s.z.number(o.z,h.z,m)}}}let Se;class Pe extends s.E{constructor(o){super(),Se=Se||new s.q({anchor:new s.D(s.v.light.anchor),position:new Te,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(Se),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,h={}){if(!this._validate(s.r,o,h))for(let m in o){let g=o[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),g):this._transitionable.setValue(m,g)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,h,m){return(!m||m.validate!==!1)&&s.t(this,o.call(s.x,{value:h,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}class Ke{constructor(o,h){this.width=o,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,h){let m=o.join(",")+String(h);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(o,h)),this.dashEntry[m]}getDashRanges(o,h,m){let g=[],b=o.length%2==1?-o[o.length-1]*m:0,D=o[0]*m,T=!0;g.push({left:b,right:D,isDash:T,zeroLength:o[0]===0});let I=o[0];for(let P=1;P<o.length;P++){T=!T;let F=o[P];b=I*m,I+=F,D=I*m,g.push({left:b,right:D,isDash:T,zeroLength:F===0})}return g}addRoundDash(o,h,m){let g=h/2;for(let b=-m;b<=m;b++){let D=this.width*(this.nextRow+m+b),T=0,I=o[T];for(let P=0;P<this.width;P++){P/I.right>1&&(I=o[++T]);let F=Math.abs(P-I.left),N=Math.abs(P-I.right),q=Math.min(F,N),ie,ne=b/m*(g+1);if(I.isDash){let ae=g-Math.abs(ne);ie=Math.sqrt(q*q+ae*ae)}else ie=g-Math.sqrt(q*q+ne*ne);this.data[D+P]=Math.max(0,Math.min(255,ie+128))}}}addRegularDash(o){for(let T=o.length-1;T>=0;--T){let I=o[T],P=o[T+1];I.zeroLength?o.splice(T,1):P&&P.isDash===I.isDash&&(P.left=I.left,o.splice(T,1))}let h=o[0],m=o[o.length-1];h.isDash===m.isDash&&(h.left=m.left-this.width,m.right=h.right+this.width);let g=this.width*this.nextRow,b=0,D=o[b];for(let T=0;T<this.width;T++){T/D.right>1&&(D=o[++b]);let I=Math.abs(T-D.left),P=Math.abs(T-D.right),F=Math.min(I,P);this.data[g+T]=Math.max(0,Math.min(255,(D.isDash?F:-F)+128))}}addDash(o,h){let m=h?7:0,g=2*m+1;if(this.nextRow+g>this.height)return s.w("LineAtlas out of space"),null;let b=0;for(let T=0;T<o.length;T++)b+=o[T];if(b!==0){let T=this.width/b,I=this.getDashRanges(o,this.width,T);h?this.addRoundDash(I,T,m):this.addRegularDash(I)}let D={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:b};return this.nextRow+=g,this.dirty=!0,D}bind(o){let h=o.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}let ut="maplibre_preloaded_worker_pool";class yt{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<yt.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ut]}numActive(){return Object.keys(this.active).length}}let Yt=Math.floor(v.hardwareConcurrency/2),Jt,yn;function bn(){return Jt||(Jt=new yt),Jt}yt.workerCount=s.B(globalThis)?Math.max(Math.min(Yt,3),1):1;class In{constructor(o,h){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=h;let m=this.workerPool.acquire(h);for(let g=0;g<m.length;g++){let b=new s.C(m[g],h);b.name=`Worker ${g}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,h){let m=[];for(let g of this.actors)m.push(g.sendAsync({type:o,data:h}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(h=>{h.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}registerMessageHandler(o,h){for(let m of this.actors)m.registerMessageHandler(o,h)}}function $n(){return yn||(yn=new In(bn(),s.G),yn.registerMessageHandler("GR",(y,o,h)=>s.m(o,h))),yn}function Ln(y,o){let h=s.F();return s.H(h,h,[1,1,0]),s.J(h,h,[.5*y.width,.5*y.height,1]),s.K(h,h,y.calculatePosMatrix(o.toUnwrapped()))}function Nn(y,o,h,m,g,b){let D=function(N,q,ie){if(N)for(let ne of N){let ae=q[ne];if(ae&&ae.source===ie&&ae.type==="fill-extrusion")return!0}else for(let ne in q){let ae=q[ne];if(ae.source===ie&&ae.type==="fill-extrusion")return!0}return!1}(g&&g.layers,o,y.id),T=b.maxPitchScaleFactor(),I=y.tilesIn(m,T,D);I.sort(Ui);let P=[];for(let N of I)P.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(o,h,y._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,g,b,T,Ln(y.transform,N.tileID))});let F=function(N){let q={},ie={};for(let ne of N){let ae=ne.queryResults,J=ne.wrappedTileID,pe=ie[J]=ie[J]||{};for(let Ie in ae){let oe=ae[Ie],be=pe[Ie]=pe[Ie]||{},Ee=q[Ie]=q[Ie]||[];for(let ke of oe)be[ke.featureIndex]||(be[ke.featureIndex]=!0,Ee.push(ke))}}return q}(P);for(let N in F)F[N].forEach(q=>{let ie=q.feature,ne=y.getFeatureState(ie.layer["source-layer"],ie.id);ie.source=ie.layer.source,ie.layer["source-layer"]&&(ie.sourceLayer=ie.layer["source-layer"]),ie.state=ne});return F}function Ui(y,o){let h=y.tileID,m=o.tileID;return h.overscaledZ-m.overscaledZ||h.canonical.y-m.canonical.y||h.wrap-m.wrap||h.canonical.x-m.canonical.x}function Li(y,o,h){return s._(this,void 0,void 0,function*(){let m=y;if(y.url?m=(yield s.h(o.transformRequest(y.url,"Source"),h)).data:yield v.frameAsync(h),!m)return null;let g=s.L(s.e(m,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(g.vectorLayerIds=m.vector_layers.map(b=>b.id)),g})}class Ci{constructor(o,h){o&&(h?this.setSouthWest(o).setNorthEast(h):Array.isArray(o)&&(o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof s.M?new s.M(o.lng,o.lat):s.M.convert(o),this}setSouthWest(o){return this._sw=o instanceof s.M?new s.M(o.lng,o.lat):s.M.convert(o),this}extend(o){let h=this._sw,m=this._ne,g,b;if(o instanceof s.M)g=o,b=o;else{if(!(o instanceof Ci))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Ci.convert(o)):this.extend(s.M.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(s.M.convert(o)):this;if(g=o._sw,b=o._ne,!g||!b)return this}return h||m?(h.lng=Math.min(g.lng,h.lng),h.lat=Math.min(g.lat,h.lat),m.lng=Math.max(b.lng,m.lng),m.lat=Math.max(b.lat,m.lat)):(this._sw=new s.M(g.lng,g.lat),this._ne=new s.M(b.lng,b.lat)),this}getCenter(){return new s.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.M(this.getWest(),this.getNorth())}getSouthEast(){return new s.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){let{lng:h,lat:m}=s.M.convert(o),g=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&g}static convert(o){return o instanceof Ci?o:o&&new Ci(o)}static fromLngLat(o,h=0){let m=360*h/40075017,g=m/Math.cos(Math.PI/180*o.lat);return new Ci(new s.M(o.lng-g,o.lat-m),new s.M(o.lng+g,o.lat+m))}}class js{constructor(o,h,m){this.bounds=Ci.convert(this.validateBounds(o)),this.minzoom=h||0,this.maxzoom=m||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){let h=Math.pow(2,o.z),m=Math.floor(s.N(this.bounds.getWest())*h),g=Math.floor(s.O(this.bounds.getNorth())*h),b=Math.ceil(s.N(this.bounds.getEast())*h),D=Math.ceil(s.O(this.bounds.getSouth())*h);return o.x>=m&&o.x<b&&o.y>=g&&o.y<D}}class Za extends s.E{constructor(o,h,m,g){if(super(),this.id=o,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.L(h,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let o=yield Li(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o&&(s.e(this,o),o.bounds&&(this.tileBounds=new js(o.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(o){this._tileJSONRequest=null,this.fire(new s.j(o))}})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.abort(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(o){return s._(this,void 0,void 0,function*(){let h=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(h,"Tile"),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};m.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(o.actor&&o.state!=="expired"){if(o.state==="loading")return new Promise((b,D)=>{o.reloadPromise={resolve:b,reject:D}})}else o.actor=this.dispatcher.getActor(),g="LT";o.abortController=new AbortController;try{let b=yield o.actor.sendAsync({type:g,data:m},o.abortController);if(delete o.abortController,o.aborted)return;this._afterTileLoadWorkerResponse(o,b)}catch(b){if(delete o.abortController,o.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(o,null)}})}_afterTileLoadWorkerResponse(o,h){if(h&&h.resourceTiming&&(o.resourceTiming=h.resourceTiming),h&&this.map._refreshExpiredTiles&&o.setExpiryData(h),o.loadVectorData(h,this.map.painter),o.reloadPromise){let m=o.reloadPromise;o.reloadPromise=null,this.loadTile(o).then(m.resolve).catch(m.reject)}}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.actor&&(yield o.actor.sendAsync({type:"AT",data:{uid:o.uid,type:this.type,source:this.id}}))})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.unloadVectorData(),o.actor&&(yield o.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Be extends s.E{constructor(o,h,m,g){super(),this.id=o,this.dispatcher=m,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},h),s.e(this,s.L(h,["url","scheme","tileSize"]))}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let o=yield Li(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(s.e(this,o),o.bounds&&(this.tileBounds=new js(o.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(o){this._tileJSONRequest=null,this.fire(new s.j(o))}})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(o){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}serialize(){return s.e({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o){return s._(this,void 0,void 0,function*(){let h=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.abortController=new AbortController;try{let m=yield fe.getImage(this.map._requestManager.transformRequest(h,"Tile"),o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&o.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});let g=this.map.painter.context,b=g.gl,D=m.data;o.texture=this.map.painter.getTileTexture(D.width),o.texture?o.texture.update(D,{useMipmap:!0}):(o.texture=new rt(g,D,b.RGBA,{useMipmap:!0}),o.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&b.texParameterf(b.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax)),o.state="loaded"}}catch(m){if(delete o.abortController,o.aborted)o.state="unloaded";else if(m)throw o.state="errored",m}})}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController)})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.texture&&this.map.painter.saveTileTexture(o.texture)})}hasTransition(){return!1}}class Ya extends Be{constructor(o,h,m,g){super(o,h,m,g),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(o){return s._(this,void 0,void 0,function*(){let h=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(h,"Tile");o.neighboringTiles=this._getNeighboringTiles(o.tileID),o.abortController=new AbortController;try{let g=yield fe.getImage(m,o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(g&&g.data){let b=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&o.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});let D=s.b(b)&&s.S()?b:yield this.readImageNow(b),T={type:this.type,uid:o.uid,source:this.id,rawImageData:D,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!o.actor||o.state==="expired"){o.actor=this.dispatcher.getActor();let I=yield o.actor.sendAsync({type:"LDT",data:T});o.dem=I,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded"}}}catch(g){if(delete o.abortController,o.aborted)o.state="unloaded";else if(g)throw o.state="errored",g}})}readImageNow(o){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.U()){let h=o.width+2,m=o.height+2;try{return new s.R({width:h,height:m},yield s.V(o,-1,-1,h,m))}catch{}}return v.getImageData(o,1)})}_getNeighboringTiles(o){let h=o.canonical,m=Math.pow(2,h.z),g=(h.x-1+m)%m,b=h.x===0?o.wrap-1:o.wrap,D=(h.x+1+m)%m,T=h.x+1===m?o.wrap+1:o.wrap,I={};return I[new s.Q(o.overscaledZ,b,h.z,g,h.y).key]={backfilled:!1},I[new s.Q(o.overscaledZ,T,h.z,D,h.y).key]={backfilled:!1},h.y>0&&(I[new s.Q(o.overscaledZ,b,h.z,g,h.y-1).key]={backfilled:!1},I[new s.Q(o.overscaledZ,o.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},I[new s.Q(o.overscaledZ,T,h.z,D,h.y-1).key]={backfilled:!1}),h.y+1<m&&(I[new s.Q(o.overscaledZ,b,h.z,g,h.y+1).key]={backfilled:!1},I[new s.Q(o.overscaledZ,o.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},I[new s.Q(o.overscaledZ,T,h.z,D,h.y+1).key]={backfilled:!1}),I}unloadTile(o){return s._(this,void 0,void 0,function*(){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&(yield o.actor.sendAsync({type:"RDT",data:{type:this.type,uid:o.uid,source:this.id}}))})}}class Mo extends s.E{constructor(o,h,m,g){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(g),this._data=h.data,this._options=s.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;let b=s.W/this.tileSize;this.workerOptions=s.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*b,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*b,extent:s.W,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:s.W,radius:(h.clusterRadius||50)*b,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._updateWorkerData(),this}updateData(o){return this._updateWorkerData(o),this}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(o.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=o.clusterRadius),o.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=o.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(o){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:o,source:this.id}})}getClusterChildren(o){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:o,source:this.id}})}getClusterLeaves(o,h,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:o,limit:h,offset:m}})}_updateWorkerData(o){return s._(this,void 0,void 0,function*(){let h=s.e({type:this.type},this.workerOptions);o?h.dataDiff=o:typeof this._data=="string"?(h.request=this.map._requestManager.transformRequest(v.resolveURL(this._data),"Source"),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.k("dataloading",{dataType:"source"}));try{let m=yield this.actor.sendAsync({type:"LD",data:h});if(this._pendingLoads--,this._removed||m.abandoned)return void this.fire(new s.k("dataabort",{dataType:"source"}));let g=null;m.resourceTiming&&m.resourceTiming[this.id]&&(g=m.resourceTiming[this.id].slice(0));let b={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&s.e(b,{resourceTiming:g}),this.fire(new s.k("data",Object.assign(Object.assign({},b),{sourceDataType:"metadata"}))),this.fire(new s.k("data",Object.assign(Object.assign({},b),{sourceDataType:"content"})))}catch(m){if(this._pendingLoads--,this._removed)return void this.fire(new s.k("dataabort",{dataType:"source"}));this.fire(new s.j(m))}})}loaded(){return this._pendingLoads===0}loadTile(o){return s._(this,void 0,void 0,function*(){let h=o.actor?"RT":"LT";o.actor=this.actor;let m={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.abortController=new AbortController;let g=yield this.actor.sendAsync({type:h,data:m},o.abortController);delete o.abortController,o.unloadVectorData(),o.aborted||o.loadVectorData(g,this.map.painter,h==="RT")})}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.aborted=!0})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Cn=s.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class $i extends s.E{constructor(o,h,m,g){super(),this.id=o,this.dispatcher=m,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=h}load(o){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let h=yield fe.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,h&&h.data&&(this.image=h.data,o&&(this.coordinates=o),this._finishLoading())}catch(h){this._request=null,this._loaded=!0,this.fire(new s.j(h))}})}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=o.url,this.load(o.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(o){this.coordinates=o;let h=o.map(s.Y.fromLngLat);this.tileID=function(g){let b=1/0,D=1/0,T=-1/0,I=-1/0;for(let q of g)b=Math.min(b,q.x),D=Math.min(D,q.y),T=Math.max(T,q.x),I=Math.max(I,q.y);let P=Math.max(T-b,I-D),F=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),N=Math.pow(2,F);return new s.a0(F,Math.floor((b+T)/2*N),Math.floor((D+I)/2*N))}(h),this.minzoom=this.maxzoom=this.tileID.z;let m=h.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new s.Z,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,s.W,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,s.W),this._boundsArray.emplaceBack(m[2].x,m[2].y,s.W,s.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let o=this.map.painter.context,h=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Cn.members)),this.boundsSegments||(this.boundsSegments=s.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new rt(o,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let m=!1;for(let g in this.tiles){let b=this.tiles[g];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,m=!0)}m&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(o){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={}):o.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class rs extends $i{constructor(o,h,m,g){super(o,h,m,g),this.roundZoom=!0,this.type="video",this.options=h}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;let o=this.options;this.urls=[];for(let h of o.urls)this.urls.push(this.map._requestManager.transformRequest(h,"Source").url);try{let h=yield s.a2(this.urls);if(this._loaded=!0,!h)return;this.video=h,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(h){this.fire(new s.j(h))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){let h=this.video.seekable;o<h.start(0)||o>h.end(0)?this.fire(new s.j(new s.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let o=this.map.painter.context,h=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Cn.members)),this.boundsSegments||(this.boundsSegments=s.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new rt(o,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let m=!1;for(let g in this.tiles){let b=this.tiles[g];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,m=!0)}m&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ta extends $i{constructor(o,h,m,g){super(o,h,m,g),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(D=>typeof D!="number"))||this.fire(new s.j(new s.a1(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.j(new s.a1(`sources.${o}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new s.j(new s.a1(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new s.j(new s.a1(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.j(new s.a1(`sources.${o}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let h=this.map.painter.context,m=h.gl;this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,Cn.members)),this.boundsSegments||(this.boundsSegments=s.$.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new rt(h,this.canvas,m.RGBA,{premultiply:!0});let g=!1;for(let b in this.tiles){let D=this.tiles[b];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,g=!0)}g&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}let Ka={},Qa=y=>{switch(y){case"geojson":return Mo;case"image":return $i;case"raster":return Be;case"raster-dem":return Ya;case"vector":return Za;case"video":return rs;case"canvas":return ta}return Ka[y]},Vs="RTLPluginLoaded";class tc extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=$n()}_syncState(o){return this.status=o,this.dispatcher.broadcast("SRPS",{pluginStatus:o,pluginURL:this.url}).catch(h=>{throw this.status="error",h})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(o){return s._(this,arguments,void 0,function*(h,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=v.resolveURL(h),!this.url)throw new Error(`requested url ${h} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.k(Vs))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let _a=null;function at(){return _a||(_a=new tc),_a}class bs{constructor(o,h){this.timeAdded=0,this.fadeEndTime=0,this.tileID=o,this.uid=s.a3(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){let h=o+this.timeAdded;h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,h,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(g,b){let D={};if(!b)return D;for(let T of g){let I=T.layerIds.map(P=>b.getLayer(P)).filter(Boolean);if(I.length!==0){T.layers=I,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(P=>I.filter(F=>F.id===P)[0]));for(let P of I)D[P.id]=T}}return D}(o.buckets,h.style),this.hasSymbolBuckets=!1;for(let g in this.buckets){let b=this.buckets[g];if(b instanceof s.a5){if(this.hasSymbolBuckets=!0,!m)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let g in this.buckets){let b=this.buckets[g];if(b instanceof s.a5&&b.hasRTLText){this.hasRTLText=!0,at().lazyLoad();break}}this.queryPadding=0;for(let g in this.buckets){let b=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(g).queryRadius(b))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new s.a4}unloadVectorData(){for(let o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(let m in this.buckets){let g=this.buckets[m];g.uploadPending()&&g.upload(o)}let h=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new rt(o,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new rt(o,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,h,m,g,b,D,T,I,P,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:b,scale:D,tileSize:this.tileSize,pixelPosMatrix:F,transform:I,params:T,queryPadding:this.queryPadding*P},o,h,m):{}}querySourceFeatures(o,h){let m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;let g=m.loadVTLayers(),b=h&&h.sourceLayer?h.sourceLayer:"",D=g._geojsonTileLayer||g[b];if(!D)return;let T=s.a6(h&&h.filter),{z:I,x:P,y:F}=this.tileID.canonical,N={z:I,x:P,y:F};for(let q=0;q<D.length;q++){let ie=D.feature(q);if(T.needGeometry){let J=s.a7(ie,!0);if(!T.filter(new s.a8(this.tileID.overscaledZ),J,this.tileID.canonical))continue}else if(!T.filter(new s.a8(this.tileID.overscaledZ),ie))continue;let ne=m.getId(ie,b),ae=new s.a9(ie,I,P,F,ne);ae.tile=N,o.push(ae)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){let h=this.expirationTime;if(o.cacheControl){let m=s.aa(o.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){let m=Date.now(),g=!1;if(this.expirationTime>m)g=!1;else if(h)if(this.expirationTime<h)g=!0;else{let b=this.expirationTime-h;b?this.expirationTime=m+Math.max(b,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;let m=this.latestFeatureIndex.loadVTLayers();for(let g in this.buckets){if(!h.style.hasLayer(g))continue;let b=this.buckets[g],D=b.layers[0].sourceLayer||"_geojsonTileLayer",T=m[D],I=o[D];if(!T||!I||Object.keys(I).length===0)continue;b.update(I,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});let P=h&&h.style&&h.style.getLayer(g);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<v.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=v.now()+o}setDependencies(o,h){let m={};for(let g of h)m[g]=!0;this.dependencies[o]=m}hasDependency(o,h){for(let m of o){let g=this.dependencies[m];if(g){for(let b of h)if(g[b])return!0}}return!1}}class ws{constructor(o,h){this.max=o,this.onRemove=h,this.reset()}reset(){for(let o in this.data)for(let h of this.data[o])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(o,h,m){let g=o.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);let b={value:h,timeout:void 0};if(m!==void 0&&(b.timeout=setTimeout(()=>{this.remove(o,b)},m)),this.data[g].push(b),this.order.push(g),this.order.length>this.max){let D=this._getAndRemoveByKey(this.order[0]);D&&this.onRemove(D)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){let h=this.data[o].shift();return h.timeout&&clearTimeout(h.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),h.value}getByKey(o){let h=this.data[o];return h?h[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,h){if(!this.has(o))return this;let m=o.wrapped().key,g=h===void 0?0:this.data[m].indexOf(h),b=this.data[m][g];return this.data[m].splice(g,1),b.timeout&&clearTimeout(b.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(b.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){let h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(o){let h=[];for(let m in this.data)for(let g of this.data[m])o(g.value)||h.push(g);for(let m of h)this.remove(m.value.tileID,m)}}class ql{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,h,m){let g=String(h);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][g]=this.stateChanges[o][g]||{},s.e(this.stateChanges[o][g],m),this.deletedStates[o]===null){this.deletedStates[o]={};for(let b in this.state[o])b!==g&&(this.deletedStates[o][b]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][g]===null){this.deletedStates[o][g]={};for(let b in this.state[o][g])m[b]||(this.deletedStates[o][g][b]=null)}else for(let b in m)this.deletedStates[o]&&this.deletedStates[o][g]&&this.deletedStates[o][g][b]===null&&delete this.deletedStates[o][g][b]}removeFeatureState(o,h,m){if(this.deletedStates[o]===null)return;let g=String(h);if(this.deletedStates[o]=this.deletedStates[o]||{},m&&h!==void 0)this.deletedStates[o][g]!==null&&(this.deletedStates[o][g]=this.deletedStates[o][g]||{},this.deletedStates[o][g][m]=null);else if(h!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][g])for(m in this.deletedStates[o][g]={},this.stateChanges[o][g])this.deletedStates[o][g][m]=null;else this.deletedStates[o][g]=null;else this.deletedStates[o]=null}getState(o,h){let m=String(h),g=s.e({},(this.state[o]||{})[m],(this.stateChanges[o]||{})[m]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){let b=this.deletedStates[o][h];if(b===null)return{};for(let D in b)delete g[D]}return g}initializeTileState(o,h){o.setFeatureState(this.state,h)}coalesceChanges(o,h){let m={};for(let g in this.stateChanges){this.state[g]=this.state[g]||{};let b={};for(let D in this.stateChanges[g])this.state[g][D]||(this.state[g][D]={}),s.e(this.state[g][D],this.stateChanges[g][D]),b[D]=this.state[g][D];m[g]=b}for(let g in this.deletedStates){this.state[g]=this.state[g]||{};let b={};if(this.deletedStates[g]===null)for(let D in this.state[g])b[D]={},this.state[g][D]={};else for(let D in this.deletedStates[g]){if(this.deletedStates[g][D]===null)this.state[g][D]={};else for(let T of Object.keys(this.deletedStates[g][D]))delete this.state[g][D][T];b[D]=this.state[g][D]}m[g]=m[g]||{},s.e(m[g],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(let g in o)o[g].setFeatureState(m,h)}}class Ir extends s.E{constructor(o,h,m){super(),this.id=o,this.dispatcher=m,this.on("data",g=>this._dataHandler(g)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,b,D,T)=>{let I=new(Qa(b.type))(g,b,D,T);if(I.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${I.id}`);return I})(o,h,m,this),this._tiles={},this._cache=new ws(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ql,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._maxTileCacheZoomLevels=o?o._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let o in this._tiles){let h=this._tiles[o];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,h,m){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(o),this._tileLoaded(o,h,m)}catch(g){o.state="errored",g.status!==404?this._source.fire(new s.j(g,{tile:o})):this.update(this.transform,this.terrain)}})}_unloadTile(o){this._source.unloadTile&&this._source.unloadTile(o)}_abortTile(o){this._source.abortTile&&this._source.abortTile(o),this._source.fire(new s.k("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let h in this._tiles){let m=this._tiles[h];m.upload(o),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(vt).map(o=>o.key)}getRenderableIds(o){let h=[];for(let m in this._tiles)this._isIdRenderable(m,o)&&h.push(this._tiles[m]);return o?h.sort((m,g)=>{let b=m.tileID,D=g.tileID,T=new s.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),I=new s.P(D.canonical.x,D.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-D.overscaledZ||I.y-T.y||I.x-T.x}).map(m=>m.tileID.key):h.map(m=>m.tileID).sort(vt).map(m=>m.key)}hasRenderableParent(o){let h=this.findLoadedParent(o,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(o,h){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(h||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(o,h){return s._(this,void 0,void 0,function*(){let m=this._tiles[o];m&&(m.state!=="loading"&&(m.state=h),yield this._loadTile(m,o,h))})}_tileLoaded(o,h,m){o.timeAdded=v.now(),m==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(h,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new s.k("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){let h=this.getRenderableIds();for(let g=0;g<h.length;g++){let b=h[g];if(o.neighboringTiles&&o.neighboringTiles[b]){let D=this.getTileByID(b);m(o,D),m(D,o)}}function m(g,b){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let D=b.tileID.canonical.x-g.tileID.canonical.x,T=b.tileID.canonical.y-g.tileID.canonical.y,I=Math.pow(2,g.tileID.canonical.z),P=b.tileID.key;D===0&&T===0||Math.abs(T)>1||(Math.abs(D)>1&&(Math.abs(D+I)===1?D+=I:Math.abs(D-I)===1&&(D-=I)),b.dem&&g.dem&&(g.dem.backfillBorder(b.dem,D,T),g.neighboringTiles&&g.neighboringTiles[P]&&(g.neighboringTiles[P].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,h,m,g){for(let b in this._tiles){let D=this._tiles[b];if(g[b]||!D.hasData()||D.tileID.overscaledZ<=h||D.tileID.overscaledZ>m)continue;let T=D.tileID;for(;D&&D.tileID.overscaledZ>h+1;){let P=D.tileID.scaledTo(D.tileID.overscaledZ-1);D=this._tiles[P.key],D&&D.hasData()&&(T=P)}let I=T;for(;I.overscaledZ>h;)if(I=I.scaledTo(I.overscaledZ-1),o[I.key]){g[T.key]=T;break}}}findLoadedParent(o,h){if(o.key in this._loadedParentTiles){let m=this._loadedParentTiles[o.key];return m&&m.tileID.overscaledZ>=h?m:null}for(let m=o.overscaledZ-1;m>=h;m--){let g=o.scaledTo(m),b=this._getLoadedTile(g);if(b)return b}}_getLoadedTile(o){let h=this._tiles[o.key];return h&&h.hasData()?h:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){let h=Math.ceil(o.width/this._source.tileSize)+1,m=Math.ceil(o.height/this._source.tileSize)+1,g=Math.floor(h*m*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(b)}handleWrapJump(o){let h=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,h){let m={};for(let g in this._tiles){let b=this._tiles[g];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+h),m[b.tileID.key]=b}this._tiles=m;for(let g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(let g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(o,h){if(!this._sourceLoaded||this._paused)return;let m;this.transform=o,this.terrain=h,this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new s.Q(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y)):(m=o.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(m=m.filter(F=>this._source.hasTile(F)))):m=[];let g=o.coveringZoomLevel(this._source),b=Math.max(g-Ir.maxOverzooming,this._source.minzoom),D=Math.max(g+Ir.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let F={};for(let N of m)if(N.canonical.z>this._source.minzoom){let q=N.scaledTo(N.canonical.z-1);F[q.key]=q;let ie=N.scaledTo(Math.max(this._source.minzoom,Math.min(N.canonical.z,5)));F[ie.key]=ie}m=m.concat(Object.values(F))}let T=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new s.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let I=this._updateRetainedTiles(m,g);if(mn(this._source.type)){let F={},N={},q=Object.keys(I),ie=v.now();for(let ne of q){let ae=I[ne],J=this._tiles[ne];if(!J||J.fadeEndTime!==0&&J.fadeEndTime<=ie)continue;let pe=this.findLoadedParent(ae,b);pe&&(this._addTile(pe.tileID),F[pe.tileID.key]=pe.tileID),N[ne]=ae}this._retainLoadedChildren(N,g,D,I);for(let ne in F)I[ne]||(this._coveredTiles[ne]=!0,I[ne]=F[ne]);if(h){let ne={},ae={};for(let J of m)this._tiles[J.key].hasData()?ne[J.key]=J:ae[J.key]=J;for(let J in ae){let pe=ae[J].children(this._source.maxzoom);this._tiles[pe[0].key]&&this._tiles[pe[1].key]&&this._tiles[pe[2].key]&&this._tiles[pe[3].key]&&(ne[pe[0].key]=I[pe[0].key]=pe[0],ne[pe[1].key]=I[pe[1].key]=pe[1],ne[pe[2].key]=I[pe[2].key]=pe[2],ne[pe[3].key]=I[pe[3].key]=pe[3],delete ae[J])}for(let J in ae){let pe=this.findLoadedParent(ae[J],this._source.minzoom);if(pe){ne[pe.tileID.key]=I[pe.tileID.key]=pe.tileID;for(let Ie in ne)ne[Ie].isChildOf(pe.tileID)&&delete ne[Ie]}}for(let J in this._tiles)ne[J]||(this._coveredTiles[J]=!0)}}for(let F in I)this._tiles[F].clearFadeHold();let P=s.ab(this._tiles,I);for(let F of P){let N=this._tiles[F];N.hasSymbolBuckets&&!N.holdingForFade()?N.setHoldDuration(this.map._fadeDuration):N.hasSymbolBuckets&&!N.symbolFadeFinished()||this._removeTile(F)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(let o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,h){let m={},g={},b=Math.max(h-Ir.maxOverzooming,this._source.minzoom),D=Math.max(h+Ir.maxUnderzooming,this._source.minzoom),T={};for(let I of o){let P=this._addTile(I);m[I.key]=I,P.hasData()||h<this._source.maxzoom&&(T[I.key]=I)}this._retainLoadedChildren(T,h,D,m);for(let I of o){let P=this._tiles[I.key];if(P.hasData())continue;if(h+1>this._source.maxzoom){let N=I.children(this._source.maxzoom)[0],q=this.getTile(N);if(q&&q.hasData()){m[N.key]=N;continue}}else{let N=I.children(this._source.maxzoom);if(m[N[0].key]&&m[N[1].key]&&m[N[2].key]&&m[N[3].key])continue}let F=P.wasRequested();for(let N=I.overscaledZ-1;N>=b;--N){let q=I.scaledTo(N);if(g[q.key])break;if(g[q.key]=!0,P=this.getTile(q),!P&&F&&(P=this._addTile(q)),P){let ie=P.hasData();if((F||ie)&&(m[q.key]=q),F=P.wasRequested(),ie)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let o in this._tiles){let h=[],m,g=this._tiles[o].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){m=this._loadedParentTiles[g.key];break}h.push(g.key);let b=g.scaledTo(g.overscaledZ-1);if(m=this._getLoadedTile(b),m)break;g=b}for(let b of h)this._loadedParentTiles[b]=m}}_addTile(o){let h=this._tiles[o.key];if(h)return h;h=this._cache.getAndRemove(o),h&&(this._setTileReloadTimer(o.key,h),h.tileID=o,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,h)));let m=h;return h||(h=new bs(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(h,o.key,h.state)),h.uses++,this._tiles[o.key]=h,m||this._source.fire(new s.k("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(o,h){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);let m=h.getExpiryTimeout();m&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},m))}_removeTile(o){let h=this._tiles[o];h&&(h.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}_dataHandler(o){let h=o.sourceDataType;o.dataType==="source"&&h==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&o.dataType==="source"&&h==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,h,m){let g=[],b=this.transform;if(!b)return g;let D=m?b.getCameraQueryGeometry(o):o,T=o.map(ne=>b.pointCoordinate(ne,this.terrain)),I=D.map(ne=>b.pointCoordinate(ne,this.terrain)),P=this.getIds(),F=1/0,N=1/0,q=-1/0,ie=-1/0;for(let ne of I)F=Math.min(F,ne.x),N=Math.min(N,ne.y),q=Math.max(q,ne.x),ie=Math.max(ie,ne.y);for(let ne=0;ne<P.length;ne++){let ae=this._tiles[P[ne]];if(ae.holdingForFade())continue;let J=ae.tileID,pe=Math.pow(2,b.zoom-ae.tileID.overscaledZ),Ie=h*ae.queryPadding*s.W/ae.tileSize/pe,oe=[J.getTilePoint(new s.Y(F,N)),J.getTilePoint(new s.Y(q,ie))];if(oe[0].x-Ie<s.W&&oe[0].y-Ie<s.W&&oe[1].x+Ie>=0&&oe[1].y+Ie>=0){let be=T.map(ke=>J.getTilePoint(ke)),Ee=I.map(ke=>J.getTilePoint(ke));g.push({tile:ae,tileID:J,queryGeometry:be,cameraQueryGeometry:Ee,scale:pe})}}return g}getVisibleCoordinates(o){let h=this.getRenderableIds(o).map(m=>this._tiles[m].tileID);for(let m of h)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(mn(this._source.type)){let o=v.now();for(let h in this._tiles)if(this._tiles[h].fadeEndTime>=o)return!0}return!1}setFeatureState(o,h,m){this._state.updateState(o=o||"_geojsonTileLayer",h,m)}removeFeatureState(o,h,m){this._state.removeFeatureState(o=o||"_geojsonTileLayer",h,m)}getFeatureState(o,h){return this._state.getState(o=o||"_geojsonTileLayer",h)}setDependencies(o,h,m){let g=this._tiles[o];g&&g.setDependencies(h,m)}reloadTilesForDependencies(o,h){for(let m in this._tiles)this._tiles[m].hasDependency(o,h)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(o,h))}}function vt(y,o){let h=Math.abs(2*y.wrap)-+(y.wrap<0),m=Math.abs(2*o.wrap)-+(o.wrap<0);return y.overscaledZ-o.overscaledZ||m-h||o.canonical.y-y.canonical.y||o.canonical.x-y.canonical.x}function mn(y){return y==="raster"||y==="image"||y==="video"}Ir.maxOverzooming=10,Ir.maxUnderzooming=3;class hn{constructor(o,h){this.reset(o,h)}reset(o,h){this.points=o||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=s.ac(o,0,1);let h=1,m=this._distances[h],g=o*this.paddedLength+this.padding;for(;m<g&&h<this._distances.length;)m=this._distances[++h];let b=h-1,D=this._distances[b],T=m-D,I=T>0?(g-D)/T:0;return this.points[b].mult(1-I).add(this.points[h].mult(I))}}function Ki(y,o){let h=!0;return y==="always"||y!=="never"&&o!=="never"||(h=!1),h}class va{constructor(o,h,m){let g=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(o/m),this.yCellCount=Math.ceil(h/m);for(let D=0;D<this.xCellCount*this.yCellCount;D++)g.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=h,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,h,m,g,b){this._forEachCell(h,m,g,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(g),this.bboxes.push(b)}insertCircle(o,h,m,g){this._forEachCell(h-g,m-g,h+g,m+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(h),this.circles.push(m),this.circles.push(g)}_insertBoxCell(o,h,m,g,b,D){this.boxCells[b].push(D)}_insertCircleCell(o,h,m,g,b,D){this.circleCells[b].push(D)}_query(o,h,m,g,b,D,T){if(m<0||o>this.width||g<0||h>this.height)return[];let I=[];if(o<=0&&h<=0&&this.width<=m&&this.height<=g){if(b)return[{key:null,x1:o,y1:h,x2:m,y2:g}];for(let P=0;P<this.boxKeys.length;P++)I.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){let F=this.circles[3*P],N=this.circles[3*P+1],q=this.circles[3*P+2];I.push({key:this.circleKeys[P],x1:F-q,y1:N-q,x2:F+q,y2:N+q})}}else this._forEachCell(o,h,m,g,this._queryCell,I,{hitTest:b,overlapMode:D,seenUids:{box:{},circle:{}}},T);return I}query(o,h,m,g){return this._query(o,h,m,g,!1,null)}hitTest(o,h,m,g,b,D){return this._query(o,h,m,g,!0,b,D).length>0}hitTestCircle(o,h,m,g,b){let D=o-m,T=o+m,I=h-m,P=h+m;if(T<0||D>this.width||P<0||I>this.height)return!1;let F=[];return this._forEachCell(D,I,T,P,this._queryCellCircle,F,{hitTest:!0,overlapMode:g,circle:{x:o,y:h,radius:m},seenUids:{box:{},circle:{}}},b),F.length>0}_queryCell(o,h,m,g,b,D,T,I){let{seenUids:P,hitTest:F,overlapMode:N}=T,q=this.boxCells[b];if(q!==null){let ne=this.bboxes;for(let ae of q)if(!P.box[ae]){P.box[ae]=!0;let J=4*ae,pe=this.boxKeys[ae];if(o<=ne[J+2]&&h<=ne[J+3]&&m>=ne[J+0]&&g>=ne[J+1]&&(!I||I(pe))&&(!F||!Ki(N,pe.overlapMode))&&(D.push({key:pe,x1:ne[J],y1:ne[J+1],x2:ne[J+2],y2:ne[J+3]}),F))return!0}}let ie=this.circleCells[b];if(ie!==null){let ne=this.circles;for(let ae of ie)if(!P.circle[ae]){P.circle[ae]=!0;let J=3*ae,pe=this.circleKeys[ae];if(this._circleAndRectCollide(ne[J],ne[J+1],ne[J+2],o,h,m,g)&&(!I||I(pe))&&(!F||!Ki(N,pe.overlapMode))){let Ie=ne[J],oe=ne[J+1],be=ne[J+2];if(D.push({key:pe,x1:Ie-be,y1:oe-be,x2:Ie+be,y2:oe+be}),F)return!0}}}return!1}_queryCellCircle(o,h,m,g,b,D,T,I){let{circle:P,seenUids:F,overlapMode:N}=T,q=this.boxCells[b];if(q!==null){let ne=this.bboxes;for(let ae of q)if(!F.box[ae]){F.box[ae]=!0;let J=4*ae,pe=this.boxKeys[ae];if(this._circleAndRectCollide(P.x,P.y,P.radius,ne[J+0],ne[J+1],ne[J+2],ne[J+3])&&(!I||I(pe))&&!Ki(N,pe.overlapMode))return D.push(!0),!0}}let ie=this.circleCells[b];if(ie!==null){let ne=this.circles;for(let ae of ie)if(!F.circle[ae]){F.circle[ae]=!0;let J=3*ae,pe=this.circleKeys[ae];if(this._circlesCollide(ne[J],ne[J+1],ne[J+2],P.x,P.y,P.radius)&&(!I||I(pe))&&!Ki(N,pe.overlapMode))return D.push(!0),!0}}}_forEachCell(o,h,m,g,b,D,T,I){let P=this._convertToXCellCoord(o),F=this._convertToYCellCoord(h),N=this._convertToXCellCoord(m),q=this._convertToYCellCoord(g);for(let ie=P;ie<=N;ie++)for(let ne=F;ne<=q;ne++)if(b.call(this,o,h,m,g,this.xCellCount*ne+ie,D,T,I))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,h,m,g,b,D){let T=g-o,I=b-h,P=m+D;return P*P>T*T+I*I}_circleAndRectCollide(o,h,m,g,b,D,T){let I=(D-g)/2,P=Math.abs(o-(g+I));if(P>I+m)return!1;let F=(T-b)/2,N=Math.abs(h-(b+F));if(N>F+m)return!1;if(P<=I||N<=F)return!0;let q=P-I,ie=N-F;return q*q+ie*ie<=m*m}}function an(y,o,h,m,g){let b=s.F();return o?(s.J(b,b,[1/g,1/g,1]),h||s.ad(b,b,m.angle)):s.K(b,m.labelPlaneMatrix,y),b}function nc(y,o,h,m,g){if(o){let b=s.ae(y);return s.J(b,b,[g,g,1]),h||s.ad(b,b,-m.angle),b}return m.glCoordMatrix}function rr(y,o,h){let m;h?(m=[y.x,y.y,h(y.x,y.y),1],s.af(m,m,o)):(m=[y.x,y.y,0,1],Ut(m,m,o));let g=m[3];return{point:new s.P(m[0]/g,m[1]/g),signedDistanceFromCamera:g}}function se(y,o){return .5+y/o*.5}function B(y,o){let h=y[0]/y[3],m=y[1]/y[3];return h>=-o[0]&&h<=o[0]&&m>=-o[1]&&m<=o[1]}function z(y,o,h,m,g,b,D,T,I,P){let F=m?y.textSizeData:y.iconSizeData,N=s.ag(F,h.transform.zoom),q=[256/h.width*2+1,256/h.height*2+1],ie=m?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ie.clear();let ne=y.lineVertexArray,ae=m?y.text.placedSymbolArray:y.icon.placedSymbolArray,J=h.transform.width/h.transform.height,pe=!1;for(let Ie=0;Ie<ae.length;Ie++){let oe=ae.get(Ie);if(oe.hidden||oe.writingMode===s.ah.vertical&&!pe){$e(oe.numGlyphs,ie);continue}let be;if(pe=!1,P?(be=[oe.anchorX,oe.anchorY,P(oe.anchorX,oe.anchorY),1],s.af(be,be,o)):(be=[oe.anchorX,oe.anchorY,0,1],Ut(be,be,o)),!B(be,q)){$e(oe.numGlyphs,ie);continue}let Ee=se(h.transform.cameraToCenterDistance,be[3]),ke=s.ai(F,N,oe),Fe=D?ke/Ee:ke*Ee,Ze=new s.P(oe.anchorX,oe.anchorY),Ge=rr(Ze,g,P).point,ot={projections:{},offsets:{}},pt=me(oe,Fe,!1,T,o,g,b,y.glyphOffsetArray,ne,ie,Ge,Ze,ot,J,I,P);pe=pt.useVertical,(pt.notEnoughRoom||pe||pt.needsFlipping&&me(oe,Fe,!0,T,o,g,b,y.glyphOffsetArray,ne,ie,Ge,Ze,ot,J,I,P).notEnoughRoom)&&$e(oe.numGlyphs,ie)}m?y.text.dynamicLayoutVertexBuffer.updateData(ie):y.icon.dynamicLayoutVertexBuffer.updateData(ie)}function Z(y,o,h,m,g,b,D,T,I,P,F,N,q){let ie=T.glyphStartIndex+T.numGlyphs,ne=T.lineStartIndex,ae=T.lineStartIndex+T.lineLength,J=o.getoffsetX(T.glyphStartIndex),pe=o.getoffsetX(ie-1),Ie=qe(y*J,h,m,g,b,D,T.segment,ne,ae,I,P,F,N,q);if(!Ie)return null;let oe=qe(y*pe,h,m,g,b,D,T.segment,ne,ae,I,P,F,N,q);return oe?{first:Ie,last:oe}:null}function ee(y,o,h,m){return y===s.ah.horizontal&&Math.abs(h.y-o.y)>Math.abs(h.x-o.x)*m?{useVertical:!0}:(y===s.ah.vertical?o.y<h.y:o.x>h.x)?{needsFlipping:!0}:null}function me(y,o,h,m,g,b,D,T,I,P,F,N,q,ie,ne,ae){let J=o/24,pe=y.lineOffsetX*J,Ie=y.lineOffsetY*J,oe;if(y.numGlyphs>1){let be=y.glyphStartIndex+y.numGlyphs,Ee=y.lineStartIndex,ke=y.lineStartIndex+y.lineLength,Fe=Z(J,T,pe,Ie,h,F,N,y,I,b,q,ne,ae);if(!Fe)return{notEnoughRoom:!0};let Ze=rr(Fe.first.point,D,ae).point,Ge=rr(Fe.last.point,D,ae).point;if(m&&!h){let ot=ee(y.writingMode,Ze,Ge,ie);if(ot)return ot}oe=[Fe.first];for(let ot=y.glyphStartIndex+1;ot<be-1;ot++)oe.push(qe(J*T.getoffsetX(ot),pe,Ie,h,F,N,y.segment,Ee,ke,I,b,q,ne,ae));oe.push(Fe.last)}else{if(m&&!h){let Ee=rr(N,g,ae).point,ke=y.lineStartIndex+y.segment+1,Fe=new s.P(I.getx(ke),I.gety(ke)),Ze=rr(Fe,g,ae),Ge=Ze.signedDistanceFromCamera>0?Ze.point:ge(N,Fe,Ee,1,g,ae),ot=ee(y.writingMode,Ee,Ge,ie);if(ot)return ot}let be=qe(J*T.getoffsetX(y.glyphStartIndex),pe,Ie,h,F,N,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,I,b,q,ne,ae);if(!be)return{notEnoughRoom:!0};oe=[be]}for(let be of oe)s.aj(P,be.point,be.angle);return{}}function ge(y,o,h,m,g,b){let D=rr(y.add(y.sub(o)._unit()),g,b).point,T=h.sub(D);return h.add(T._mult(m/T.mag()))}function we(y,o){let{projectionCache:h,lineVertexArray:m,labelPlaneMatrix:g,tileAnchorPoint:b,distanceFromAnchor:D,getElevation:T,previousVertex:I,direction:P,absOffsetX:F}=o;if(h.projections[y])return h.projections[y];let N=new s.P(m.getx(y),m.gety(y)),q=rr(N,g,T);if(q.signedDistanceFromCamera>0)return h.projections[y]=q.point,q.point;let ie=y-P;return ge(D===0?b:new s.P(m.getx(ie),m.gety(ie)),N,I,F-D+1,g,T)}function he(y,o,h){return y._unit()._perp()._mult(o*h)}function Oe(y,o,h,m,g,b,D,T){let{projectionCache:I,direction:P}=T;if(I.offsets[y])return I.offsets[y];let F=h.add(o);if(y+P<m||y+P>=g)return I.offsets[y]=F,F;let N=we(y+P,T),q=he(N.sub(h),D,P),ie=h.add(q),ne=N.add(q);return I.offsets[y]=s.ak(b,F,ie,ne)||F,I.offsets[y]}function qe(y,o,h,m,g,b,D,T,I,P,F,N,q,ie){let ne=m?y-o:y+o,ae=ne>0?1:-1,J=0;m&&(ae*=-1,J=Math.PI),ae<0&&(J+=Math.PI);let pe,Ie,oe=ae>0?T+D:T+D+1,be=g,Ee=g,ke=0,Fe=0,Ze=Math.abs(ne),Ge=[],ot;for(;ke+Fe<=Ze;){if(oe+=ae,oe<T||oe>=I)return null;ke+=Fe,Ee=be,Ie=pe;let gt={projectionCache:N,lineVertexArray:P,labelPlaneMatrix:F,tileAnchorPoint:b,distanceFromAnchor:ke,getElevation:ie,previousVertex:Ee,direction:ae,absOffsetX:Ze};if(be=we(oe,gt),h===0)Ge.push(Ee),ot=be.sub(Ee);else{let Kt,ln=be.sub(Ee);Kt=ln.mag()===0?he(we(oe+ae,gt).sub(be),h,ae):he(ln,h,ae),Ie||(Ie=Ee.add(Kt)),pe=Oe(oe,Kt,be,T,I,Ie,h,gt),Ge.push(Ie),ot=pe.sub(Ie)}Fe=ot.mag()}let pt=ot._mult((Ze-ke)/Fe)._add(Ie||Ee),cn=J+Math.atan2(be.y-Ee.y,be.x-Ee.x);return Ge.push(pt),{point:pt,angle:q?cn:0,path:Ge}}let ze=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $e(y,o){for(let h=0;h<y;h++){let m=o.length;o.resize(m+4),o.float32.set(ze,3*m)}}function Ut(y,o,h){let m=o[0],g=o[1];return y[0]=h[0]*m+h[4]*g+h[12],y[1]=h[1]*m+h[5]*g+h[13],y[3]=h[3]*m+h[7]*g+h[15],y}let qt=100;class on{constructor(o,h=new va(o.width+200,o.height+200,25),m=new va(o.width+200,o.height+200,25)){this.transform=o,this.grid=h,this.ignoredGrid=m,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+qt,this.screenBottomBoundary=o.height+qt,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,h,m,g,b,D){let T=this.projectAndGetPerspectiveRatio(g,o.anchorPointX,o.anchorPointY,D),I=m*T.perspectiveRatio,P=o.x1*I+T.point.x,F=o.y1*I+T.point.y,N=o.x2*I+T.point.x,q=o.y2*I+T.point.y;return!this.isInsideGrid(P,F,N,q)||h!=="always"&&this.grid.hitTest(P,F,N,q,h,b)||T.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[P,F,N,q],offscreen:this.isOffscreen(P,F,N,q)}}placeCollisionCircles(o,h,m,g,b,D,T,I,P,F,N,q,ie,ne){let ae=[],J=new s.P(h.anchorX,h.anchorY),pe=rr(J,D,ne),Ie=se(this.transform.cameraToCenterDistance,pe.signedDistanceFromCamera),oe=(F?b/Ie:b*Ie)/s.ao,be=rr(J,T,ne).point,Ee=Z(oe,g,h.lineOffsetX*oe,h.lineOffsetY*oe,!1,be,J,h,m,T,{projections:{},offsets:{}},!1,ne),ke=!1,Fe=!1,Ze=!0;if(Ee){let Ge=.5*q*Ie+ie,ot=new s.P(-100,-100),pt=new s.P(this.screenRightBoundary,this.screenBottomBoundary),cn=new hn,gt=Ee.first,Kt=Ee.last,ln=[];for(let fn=gt.path.length-1;fn>=1;fn--)ln.push(gt.path[fn]);for(let fn=1;fn<Kt.path.length;fn++)ln.push(Kt.path[fn]);let Vn=2.5*Ge;if(I){let fn=ln.map(wn=>rr(wn,I,ne));ln=fn.some(wn=>wn.signedDistanceFromCamera<=0)?[]:fn.map(wn=>wn.point)}let Xt=[];if(ln.length>0){let fn=ln[0].clone(),wn=ln[0].clone();for(let Ai=1;Ai<ln.length;Ai++)fn.x=Math.min(fn.x,ln[Ai].x),fn.y=Math.min(fn.y,ln[Ai].y),wn.x=Math.max(wn.x,ln[Ai].x),wn.y=Math.max(wn.y,ln[Ai].y);Xt=fn.x>=ot.x&&wn.x<=pt.x&&fn.y>=ot.y&&wn.y<=pt.y?[ln]:wn.x<ot.x||fn.x>pt.x||wn.y<ot.y||fn.y>pt.y?[]:s.al([ln],ot.x,ot.y,pt.x,pt.y)}for(let fn of Xt){cn.reset(fn,.25*Ge);let wn=0;wn=cn.length<=.5*Ge?1:Math.ceil(cn.paddedLength/Vn)+1;for(let Ai=0;Ai<wn;Ai++){let Jn=Ai/Math.max(wn-1,1),Ds=cn.lerp(Jn),ar=Ds.x+qt,Mi=Ds.y+qt;ae.push(ar,Mi,Ge,0);let or=ar-Ge,Ts=Mi-Ge,Ma=ar+Ge,Po=Mi+Ge;if(Ze=Ze&&this.isOffscreen(or,Ts,Ma,Po),Fe=Fe||this.isInsideGrid(or,Ts,Ma,Po),o!=="always"&&this.grid.hitTestCircle(ar,Mi,Ge,o,N)&&(ke=!0,!P))return{circles:[],offscreen:!1,collisionDetected:ke}}}}return{circles:!P&&ke||!Fe||Ie<this.perspectiveRatioCutoff?[]:ae,offscreen:Ze,collisionDetected:ke}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let h=[],m=1/0,g=1/0,b=-1/0,D=-1/0;for(let F of o){let N=new s.P(F.x+qt,F.y+qt);m=Math.min(m,N.x),g=Math.min(g,N.y),b=Math.max(b,N.x),D=Math.max(D,N.y),h.push(N)}let T=this.grid.query(m,g,b,D).concat(this.ignoredGrid.query(m,g,b,D)),I={},P={};for(let F of T){let N=F.key;if(I[N.bucketInstanceId]===void 0&&(I[N.bucketInstanceId]={}),I[N.bucketInstanceId][N.featureIndex])continue;let q=[new s.P(F.x1,F.y1),new s.P(F.x2,F.y1),new s.P(F.x2,F.y2),new s.P(F.x1,F.y2)];s.am(h,q)&&(I[N.bucketInstanceId][N.featureIndex]=!0,P[N.bucketInstanceId]===void 0&&(P[N.bucketInstanceId]=[]),P[N.bucketInstanceId].push(N.featureIndex))}return P}insertCollisionBox(o,h,m,g,b,D){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:b,collisionGroupID:D,overlapMode:h},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,h,m,g,b,D){let T=m?this.ignoredGrid:this.grid,I={bucketInstanceId:g,featureIndex:b,collisionGroupID:D,overlapMode:h};for(let P=0;P<o.length;P+=4)T.insertCircle(I,o[P],o[P+1],o[P+2])}projectAndGetPerspectiveRatio(o,h,m,g){let b;return g?(b=[h,m,g(h,m),1],s.af(b,b,o)):(b=[h,m,0,1],Ut(b,b,o)),{point:new s.P((b[0]/b[3]+1)/2*this.transform.width+qt,(-b[1]/b[3]+1)/2*this.transform.height+qt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/b[3]*.5}}isOffscreen(o,h,m,g){return m<qt||o>=this.screenRightBoundary||g<qt||h>this.screenBottomBoundary}isInsideGrid(o,h,m,g){return m>=0&&o<this.gridRightBoundary&&g>=0&&h<this.gridBottomBoundary}getViewportMatrix(){let o=s.an([]);return s.H(o,o,[-100,-100,0]),o}}function en(y,o,h){return o*(s.W/(y.tileSize*Math.pow(2,h-y.tileID.overscaledZ)))}class Bn{constructor(o,h,m,g){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?h:-h))):g&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class Xn{constructor(o,h,m,g,b){this.text=new Bn(o?o.text:null,h,m,b),this.icon=new Bn(o?o.icon:null,h,g,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class mi{constructor(o,h,m){this.text=o,this.icon=h,this.skipFade=m}}class Qi{constructor(){this.invProjMatrix=s.F(),this.viewportMatrix=s.F(),this.circles=[]}}class pn{constructor(o,h,m,g,b){this.bucketInstanceId=o,this.featureIndex=h,this.sourceLayerIndex=m,this.bucketIndex=g,this.tileID=b}}class Ei{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){let h=++this.maxGroupID;this.collisionGroups[o]={ID:h,predicate:m=>m.collisionGroupID===h}}return this.collisionGroups[o]}}function sr(y,o,h,m,g){let{horizontalAlign:b,verticalAlign:D}=s.at(y);return new s.P(-(b-.5)*o+m[0]*g,-(D-.5)*h+m[1]*g)}function zr(y,o,h,m,g,b){let{x1:D,x2:T,y1:I,y2:P,anchorPointX:F,anchorPointY:N}=y,q=new s.P(o,h);return m&&q._rotate(g?b:-b),{x1:D+q.x,y1:I+q.y,x2:T+q.x,y2:P+q.y,anchorPointX:F,anchorPointY:N}}class ss{constructor(o,h,m,g,b){this.transform=o.clone(),this.terrain=h,this.collisionIndex=new on(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Ei(g),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,h,m,g){let b=m.getBucket(h),D=m.latestFeatureIndex;if(!b||!D||h.id!==b.layerIds[0])return;let T=m.collisionBoxArray,I=b.layers[0].layout,P=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),F=m.tileSize/s.W,N=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),q=I.get("text-pitch-alignment")==="map",ie=I.get("text-rotation-alignment")==="map",ne=en(m,1,this.transform.zoom),ae=an(N,q,ie,this.transform,ne),J=null;if(q){let Ie=nc(N,q,ie,this.transform,ne);J=s.K([],this.transform.labelPlaneMatrix,Ie)}this.retainedQueryData[b.bucketInstanceId]=new pn(b.bucketInstanceId,D,b.sourceLayerIndex,b.index,m.tileID);let pe={bucket:b,layout:I,posMatrix:N,textLabelPlaneMatrix:ae,labelToScreenMatrix:J,scale:P,textPixelRatio:F,holdingForFade:m.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:s.ag(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(g)for(let Ie of b.sortKeyRanges){let{sortKey:oe,symbolInstanceStart:be,symbolInstanceEnd:Ee}=Ie;o.push({sortKey:oe,symbolInstanceStart:be,symbolInstanceEnd:Ee,parameters:pe})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:pe})}attemptAnchorPlacement(o,h,m,g,b,D,T,I,P,F,N,q,ie,ne,ae,J){let pe=s.ap[o.textAnchor],Ie=[o.textOffset0,o.textOffset1],oe=sr(pe,m,g,Ie,b),be=this.collisionIndex.placeCollisionBox(zr(h,oe.x,oe.y,D,T,this.transform.angle),N,I,P,F.predicate,J);if((!ae||this.collisionIndex.placeCollisionBox(zr(ae,oe.x,oe.y,D,T,this.transform.angle),N,I,P,F.predicate,J).box.length!==0)&&be.box.length>0){let Ee;if(this.prevPlacement&&this.prevPlacement.variableOffsets[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID].text&&(Ee=this.prevPlacement.variableOffsets[q.crossTileID].anchor),q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[q.crossTileID]={textOffset:Ie,width:m,height:g,anchor:pe,textBoxScale:b,prevAnchor:Ee},this.markUsedJustification(ie,pe,q,ne),ie.allowVerticalPlacement&&(this.markUsedOrientation(ie,ne,q),this.placedOrientations[q.crossTileID]=ne),{shift:oe,placedGlyphBoxes:be}}}placeLayerBucketPart(o,h,m){let{bucket:g,layout:b,posMatrix:D,textLabelPlaneMatrix:T,labelToScreenMatrix:I,textPixelRatio:P,holdingForFade:F,collisionBoxArray:N,partiallyEvaluatedTextSize:q,collisionGroup:ie}=o.parameters,ne=b.get("text-optional"),ae=b.get("icon-optional"),J=s.aq(b,"text-overlap","text-allow-overlap"),pe=J==="always",Ie=s.aq(b,"icon-overlap","icon-allow-overlap"),oe=Ie==="always",be=b.get("text-rotation-alignment")==="map",Ee=b.get("text-pitch-alignment")==="map",ke=b.get("icon-text-fit")!=="none",Fe=b.get("symbol-z-order")==="viewport-y",Ze=pe&&(oe||!g.hasIconData()||ae),Ge=oe&&(pe||!g.hasTextData()||ne);!g.collisionArrays&&N&&g.deserializeCollisionBoxes(N);let ot=this.retainedQueryData[g.bucketInstanceId].tileID,pt=this.terrain?(gt,Kt)=>this.terrain.getElevation(ot,gt,Kt):null,cn=(gt,Kt)=>{var ln,Vn;if(h[gt.crossTileID])return;if(F)return void(this.placements[gt.crossTileID]=new mi(!1,!1,!1));let Xt=!1,fn=!1,wn=!0,Ai=null,Jn={box:null,offscreen:null},Ds={box:null,offscreen:null},ar=null,Mi=null,or=null,Ts=0,Ma=0,Po=0;Kt.textFeatureIndex?Ts=Kt.textFeatureIndex:gt.useRuntimeCollisionCircles&&(Ts=gt.featureIndex),Kt.verticalTextFeatureIndex&&(Ma=Kt.verticalTextFeatureIndex);let fu=Kt.textBox;if(fu){let Xi=er=>{let Ti=s.ah.horizontal;if(g.allowVerticalPlacement&&!er&&this.prevPlacement){let Hs=this.prevPlacement.placedOrientations[gt.crossTileID];Hs&&(this.placedOrientations[gt.crossTileID]=Hs,Ti=Hs,this.markUsedOrientation(g,Ti,gt))}return Ti},Di=(er,Ti)=>{if(g.allowVerticalPlacement&&gt.numVerticalGlyphVertices>0&&Kt.verticalTextBox){for(let Hs of g.writingModes)if(Hs===s.ah.vertical?(Jn=Ti(),Ds=Jn):Jn=er(),Jn&&Jn.box&&Jn.box.length)break}else Jn=er()},_i=gt.textAnchorOffsetStartIndex,$s=gt.textAnchorOffsetEndIndex;if($s===_i){let er=(Ti,Hs)=>{let tr=this.collisionIndex.placeCollisionBox(Ti,J,P,D,ie.predicate,pt);return tr&&tr.box&&tr.box.length&&(this.markUsedOrientation(g,Hs,gt),this.placedOrientations[gt.crossTileID]=Hs),tr};Di(()=>er(fu,s.ah.horizontal),()=>{let Ti=Kt.verticalTextBox;return g.allowVerticalPlacement&&gt.numVerticalGlyphVertices>0&&Ti?er(Ti,s.ah.vertical):{box:null,offscreen:null}}),Xi(Jn&&Jn.box&&Jn.box.length)}else{let er=s.ap[(Vn=(ln=this.prevPlacement)===null||ln===void 0?void 0:ln.variableOffsets[gt.crossTileID])===null||Vn===void 0?void 0:Vn.anchor],Ti=(tr,Ni,vf)=>{let v_=tr.x2-tr.x1,dc=tr.y2-tr.y1,hc=gt.textBoxScale,Wd=ke&&Ie==="never"?Ni:null,Ao={box:[],offscreen:!1},yf=J==="never"?1:2,y_="never";er&&yf++;for(let bf=0;bf<yf;bf++){for(let wf=_i;wf<$s;wf++){let Zd=g.textAnchorOffsets.get(wf);if(er&&Zd.textAnchor!==er)continue;let Cf=this.attemptAnchorPlacement(Zd,tr,v_,dc,hc,be,Ee,P,D,ie,y_,gt,g,vf,Wd,pt);if(Cf&&(Ao=Cf.placedGlyphBoxes,Ao&&Ao.box&&Ao.box.length))return Xt=!0,Ai=Cf.shift,Ao}er?er=null:y_=J}return Ao};Di(()=>Ti(fu,Kt.iconBox,s.ah.horizontal),()=>{let tr=Kt.verticalTextBox;return g.allowVerticalPlacement&&!(Jn&&Jn.box&&Jn.box.length)&&gt.numVerticalGlyphVertices>0&&tr?Ti(tr,Kt.verticalIconBox,s.ah.vertical):{box:null,offscreen:null}}),Jn&&(Xt=Jn.box,wn=Jn.offscreen);let Hs=Xi(Jn&&Jn.box);if(!Xt&&this.prevPlacement){let tr=this.prevPlacement.variableOffsets[gt.crossTileID];tr&&(this.variableOffsets[gt.crossTileID]=tr,this.markUsedJustification(g,tr.anchor,gt,Hs))}}}if(ar=Jn,Xt=ar&&ar.box&&ar.box.length>0,wn=ar&&ar.offscreen,gt.useRuntimeCollisionCircles){let Xi=g.text.placedSymbolArray.get(gt.centerJustifiedTextSymbolIndex),Di=s.ai(g.textSizeData,q,Xi),_i=b.get("text-padding");Mi=this.collisionIndex.placeCollisionCircles(J,Xi,g.lineVertexArray,g.glyphOffsetArray,Di,D,T,I,m,Ee,ie.predicate,gt.collisionCircleDiameter,_i,pt),Mi.circles.length&&Mi.collisionDetected&&!m&&s.w("Collisions detected, but collision boxes are not shown"),Xt=pe||Mi.circles.length>0&&!Mi.collisionDetected,wn=wn&&Mi.offscreen}if(Kt.iconFeatureIndex&&(Po=Kt.iconFeatureIndex),Kt.iconBox){let Xi=Di=>{let _i=ke&&Ai?zr(Di,Ai.x,Ai.y,be,Ee,this.transform.angle):Di;return this.collisionIndex.placeCollisionBox(_i,Ie,P,D,ie.predicate,pt)};Ds&&Ds.box&&Ds.box.length&&Kt.verticalIconBox?(or=Xi(Kt.verticalIconBox),fn=or.box.length>0):(or=Xi(Kt.iconBox),fn=or.box.length>0),wn=wn&&or.offscreen}let ko=ne||gt.numHorizontalGlyphVertices===0&&gt.numVerticalGlyphVertices===0,Da=ae||gt.numIconVertices===0;if(ko||Da?Da?ko||(fn=fn&&Xt):Xt=fn&&Xt:fn=Xt=fn&&Xt,Xt&&ar&&ar.box&&this.collisionIndex.insertCollisionBox(ar.box,J,b.get("text-ignore-placement"),g.bucketInstanceId,Ds&&Ds.box&&Ma?Ma:Ts,ie.ID),fn&&or&&this.collisionIndex.insertCollisionBox(or.box,Ie,b.get("icon-ignore-placement"),g.bucketInstanceId,Po,ie.ID),Mi&&(Xt&&this.collisionIndex.insertCollisionCircles(Mi.circles,J,b.get("text-ignore-placement"),g.bucketInstanceId,Ts,ie.ID),m)){let Xi=g.bucketInstanceId,Di=this.collisionCircleArrays[Xi];Di===void 0&&(Di=this.collisionCircleArrays[Xi]=new Qi);for(let _i=0;_i<Mi.circles.length;_i+=4)Di.circles.push(Mi.circles[_i+0]),Di.circles.push(Mi.circles[_i+1]),Di.circles.push(Mi.circles[_i+2]),Di.circles.push(Mi.collisionDetected?1:0)}if(gt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[gt.crossTileID]=new mi(Xt||Ze,fn||Ge,wn||g.justReloaded),h[gt.crossTileID]=!0};if(Fe){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let gt=g.getSortedSymbolIndexes(this.transform.angle);for(let Kt=gt.length-1;Kt>=0;--Kt){let ln=gt[Kt];cn(g.symbolInstances.get(ln),g.collisionArrays[ln])}}else for(let gt=o.symbolInstanceStart;gt<o.symbolInstanceEnd;gt++)cn(g.symbolInstances.get(gt),g.collisionArrays[gt]);if(m&&g.bucketInstanceId in this.collisionCircleArrays){let gt=this.collisionCircleArrays[g.bucketInstanceId];s.ar(gt.invProjMatrix,D),gt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(o,h,m,g){let b;b=g===s.ah.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[s.as(h)];let D=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(let T of D)T>=0&&(o.text.placedSymbolArray.get(T).crossTileID=b>=0&&T!==b?0:m.crossTileID)}markUsedOrientation(o,h,m){let g=h===s.ah.horizontal||h===s.ah.horizontalOnly?h:0,b=h===s.ah.vertical?h:0,D=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(let T of D)o.text.placedSymbolArray.get(T).placedOrientation=g;m.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;let h=this.prevPlacement,m=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;let g=h?h.symbolFadeChange(o):1,b=h?h.opacities:{},D=h?h.variableOffsets:{},T=h?h.placedOrientations:{};for(let I in this.placements){let P=this.placements[I],F=b[I];F?(this.opacities[I]=new Xn(F,g,P.text,P.icon),m=m||P.text!==F.text.placed||P.icon!==F.icon.placed):(this.opacities[I]=new Xn(null,g,P.text,P.icon,P.skipFade),m=m||P.text||P.icon)}for(let I in b){let P=b[I];if(!this.opacities[I]){let F=new Xn(P,g,!1,!1);F.isHidden()||(this.opacities[I]=F,m=m||P.text.placed||P.icon.placed)}}for(let I in D)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=D[I]);for(let I in T)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=T[I]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:o)}updateLayerOpacities(o,h){let m={};for(let g of h){let b=g.getBucket(o);b&&g.latestFeatureIndex&&o.id===b.layerIds[0]&&this.updateBucketOpacities(b,m,g.collisionBoxArray)}}updateBucketOpacities(o,h,m){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();let g=o.layers[0],b=g.layout,D=new Xn(null,0,!1,!1,!0),T=b.get("text-allow-overlap"),I=b.get("icon-allow-overlap"),P=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=b.get("text-rotation-alignment")==="map",N=b.get("text-pitch-alignment")==="map",q=b.get("icon-text-fit")!=="none",ie=new Xn(null,0,T&&(I||!o.hasIconData()||b.get("icon-optional")),I&&(T||!o.hasTextData()||b.get("text-optional")),!0);!o.collisionArrays&&m&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(m);let ne=(ae,J,pe)=>{for(let Ie=0;Ie<J/4;Ie++)ae.opacityVertexArray.emplaceBack(pe);ae.hasVisibleVertices=ae.hasVisibleVertices||pe!==Gl};for(let ae=0;ae<o.symbolInstances.length;ae++){let J=o.symbolInstances.get(ae),{numHorizontalGlyphVertices:pe,numVerticalGlyphVertices:Ie,crossTileID:oe}=J,be=this.opacities[oe];h[oe]?be=D:be||(be=ie,this.opacities[oe]=be),h[oe]=!0;let Ee=J.numIconVertices>0,ke=this.placedOrientations[J.crossTileID],Fe=ke===s.ah.vertical,Ze=ke===s.ah.horizontal||ke===s.ah.horizontalOnly;if(pe>0||Ie>0){let Ge=as(be.text);ne(o.text,pe,Fe?Gl:Ge),ne(o.text,Ie,Ze?Gl:Ge);let ot=be.text.isHidden();[J.rightJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.leftJustifiedTextSymbolIndex].forEach(gt=>{gt>=0&&(o.text.placedSymbolArray.get(gt).hidden=ot||Fe?1:0)}),J.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).hidden=ot||Ze?1:0);let pt=this.variableOffsets[J.crossTileID];pt&&this.markUsedJustification(o,pt.anchor,J,ke);let cn=this.placedOrientations[J.crossTileID];cn&&(this.markUsedJustification(o,"left",J,cn),this.markUsedOrientation(o,cn,J))}if(Ee){let Ge=as(be.icon),ot=!(q&&J.verticalPlacedIconSymbolIndex&&Fe);J.placedIconSymbolIndex>=0&&(ne(o.icon,J.numIconVertices,ot?Ge:Gl),o.icon.placedSymbolArray.get(J.placedIconSymbolIndex).hidden=be.icon.isHidden()),J.verticalPlacedIconSymbolIndex>=0&&(ne(o.icon,J.numVerticalIconVertices,ot?Gl:Ge),o.icon.placedSymbolArray.get(J.verticalPlacedIconSymbolIndex).hidden=be.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){let Ge=o.collisionArrays[ae];if(Ge){let ot=new s.P(0,0);if(Ge.textBox||Ge.verticalTextBox){let cn=!0;if(P){let gt=this.variableOffsets[oe];gt?(ot=sr(gt.anchor,gt.width,gt.height,gt.textOffset,gt.textBoxScale),F&&ot._rotate(N?this.transform.angle:-this.transform.angle)):cn=!1}Ge.textBox&&_r(o.textCollisionBox.collisionVertexArray,be.text.placed,!cn||Fe,ot.x,ot.y),Ge.verticalTextBox&&_r(o.textCollisionBox.collisionVertexArray,be.text.placed,!cn||Ze,ot.x,ot.y)}let pt=!!(!Ze&&Ge.verticalIconBox);Ge.iconBox&&_r(o.iconCollisionBox.collisionVertexArray,be.icon.placed,pt,q?ot.x:0,q?ot.y:0),Ge.verticalIconBox&&_r(o.iconCollisionBox.collisionVertexArray,be.icon.placed,!pt,q?ot.x:0,q?ot.y:0)}}}if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);if(o.bucketInstanceId in this.collisionCircleArrays){let ae=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=ae.invProjMatrix,o.placementViewportMatrix=ae.viewportMatrix,o.collisionCircleArray=ae.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,h){let m=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*m>o}setStale(){this.stale=!0}}function _r(y,o,h,m,g){y.emplaceBack(o?1:0,h?1:0,m||0,g||0),y.emplaceBack(o?1:0,h?1:0,m||0,g||0),y.emplaceBack(o?1:0,h?1:0,m||0,g||0),y.emplaceBack(o?1:0,h?1:0,m||0,g||0)}let ya=Math.pow(2,25),Fg=Math.pow(2,24),Sb=Math.pow(2,17),Kn=Math.pow(2,16),jp=Math.pow(2,9),Vp=Math.pow(2,8),Cs=Math.pow(2,1);function as(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;let o=y.placed?1:0,h=Math.floor(127*y.opacity);return h*ya+o*Fg+h*Sb+o*Kn+h*jp+o*Vp+h*Cs+o}let Gl=0;class zs{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,h,m,g,b){let D=this._bucketParts;for(;this._currentTileIndex<o.length;)if(h.getBucketParts(D,g,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,D.sort((T,I)=>T.sortKey-I.sortKey));this._currentPartIndex<D.length;)if(h.placeLayerBucketPart(D[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,b())return!0;return!1}}class Us{constructor(o,h,m,g,b,D,T,I){this.placement=new ss(o,h,D,T,I),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(o,h,m){let g=v.now(),b=()=>!this._forceFullPlacement&&v.now()-g>2;for(;this._currentPlacementIndex>=0;){let D=h[o[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(D.type==="symbol"&&(!D.minzoom||D.minzoom<=T)&&(!D.maxzoom||D.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new zs(D)),this._inProgressLayer.continuePlacement(m[D.source],this.placement,this._showCollisionBoxes,D,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}let Wc=512/s.W/2;class cd{constructor(o,h,m){this.tileID=o,this.bucketInstanceId=m,this._symbolsByKey={};let g=new Map;for(let b=0;b<h.length;b++){let D=h.get(b),T=D.key,I=g.get(T);I?I.push(D):g.set(T,[D])}for(let[b,D]of g){let T={positions:D.map(I=>({x:Math.floor(I.anchorX*Wc),y:Math.floor(I.anchorY*Wc)})),crossTileIDs:D.map(I=>I.crossTileID)};if(T.positions.length>128){let I=new s.au(T.positions.length,16,Uint16Array);for(let{x:P,y:F}of T.positions)I.add(P,F);I.finish(),delete T.positions,T.index=I}this._symbolsByKey[b]=T}}getScaledCoordinates(o,h){let{x:m,y:g,z:b}=this.tileID.canonical,{x:D,y:T,z:I}=h.canonical,P=Wc/Math.pow(2,I-b),F=(T*s.W+o.anchorY)*P,N=g*s.W*Wc;return{x:Math.floor((D*s.W+o.anchorX)*P-m*s.W*Wc),y:Math.floor(F-N)}}findMatches(o,h,m){let g=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let b=0;b<o.length;b++){let D=o.get(b);if(D.crossTileID)continue;let T=this._symbolsByKey[D.key];if(!T)continue;let I=this.getScaledCoordinates(D,h);if(T.index){let P=T.index.range(I.x-g,I.y-g,I.x+g,I.y+g).sort();for(let F of P){let N=T.crossTileIDs[F];if(!m[N]){m[N]=!0,D.crossTileID=N;break}}}else if(T.positions)for(let P=0;P<T.positions.length;P++){let F=T.positions[P],N=T.crossTileIDs[P];if(Math.abs(F.x-I.x)<=g&&Math.abs(F.y-I.y)<=g&&!m[N]){m[N]=!0,D.crossTileID=N;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class Ji{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Wl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){let h=Math.round((o-this.lng)/360);if(h!==0)for(let m in this.indexes){let g=this.indexes[m],b={};for(let D in g){let T=g[D];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+h),b[T.tileID.key]=T}this.indexes[m]=b}this.lng=o}addBucket(o,h,m){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let b=0;b<h.symbolInstances.length;b++)h.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});let g=this.usedCrossTileIDs[o.overscaledZ];for(let b in this.indexes){let D=this.indexes[b];if(Number(b)>o.overscaledZ)for(let T in D){let I=D[T];I.tileID.isChildOf(o)&&I.findMatches(h.symbolInstances,o,g)}else{let T=D[o.scaledTo(Number(b)).key];T&&T.findMatches(h.symbolInstances,o,g)}}for(let b=0;b<h.symbolInstances.length;b++){let D=h.symbolInstances.get(b);D.crossTileID||(D.crossTileID=m.generate(),g[D.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new cd(o,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(o,h){for(let m of h.getCrossTileIDsLists())for(let g of m)delete this.usedCrossTileIDs[o][g]}removeStaleBuckets(o){let h=!1;for(let m in this.indexes){let g=this.indexes[m];for(let b in g)o[g[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,g[b]),delete g[b],h=!0)}return h}}class Do{constructor(){this.layerIndexes={},this.crossTileIDs=new Ji,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,h,m){let g=this.layerIndexes[o.id];g===void 0&&(g=this.layerIndexes[o.id]=new Wl);let b=!1,D={};g.handleWrapJump(m);for(let T of h){let I=T.getBucket(o);I&&o.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(T.tileID,I,this.crossTileIDs)&&(b=!0),D[I.bucketInstanceId]=!0)}return g.removeStaleBuckets(D)&&(b=!0),b}pruneUnusedLayers(o){let h={};o.forEach(m=>{h[m]=!0});for(let m in this.layerIndexes)h[m]||delete this.layerIndexes[m]}}let xi=(y,o)=>s.t(y,o&&o.filter(h=>h.identifier!=="source.canvas")),ld=s.av();class xs extends s.E{constructor(o,h={}){super(),this._rtlPluginLoaded=()=>{for(let m in this.sourceCaches){let g=this.sourceCaches[m].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[m].reload()}},this.map=o,this.dispatcher=new In(bn(),o._getMapId()),this.dispatcher.registerMessageHandler("GG",(m,g)=>this.getGlyphs(m,g)),this.dispatcher.registerMessageHandler("GI",(m,g)=>this.getImages(m,g)),this.imageManager=new Qt,this.imageManager.setEventedParent(this),this.glyphManager=new lt(o._requestManager,h.localIdeographFontFamily),this.lineAtlas=new Ke(256,512),this.crossTileSymbolIndex=new Do,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.ax()),at().on(Vs,this._rtlPluginLoaded),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;let g=this.sourceCaches[m.sourceId];if(!g)return;let b=g.getSource();if(b&&b.vectorLayerIds)for(let D in this._layers){let T=this._layers[D];T.source===b.id&&this._validateLayer(T)}})}loadURL(o,h={},m){this.fire(new s.k("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;let g=this.map._requestManager.transformRequest(o,"Style");this._loadStyleRequest=new AbortController,s.h(g,this._loadStyleRequest).then(b=>{this._loadStyleRequest=null,this._load(b.data,h,m)}).catch(b=>{this._loadStyleRequest=null,b&&this.fire(new s.j(b))})}loadJSON(o,h={},m){this.fire(new s.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,v.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,h.validate=h.validate!==!1,this._load(o,h,m)}).catch(()=>{})}loadEmpty(){this.fire(new s.k("dataloading",{dataType:"style"})),this._load(ld,{validate:!1})}_load(o,h,m){var g;let b=h.transformStyle?h.transformStyle(m,o):o;if(!h.validate||!xi(this,s.x(b))){this._loaded=!0,this.stylesheet=b;for(let D in b.sources)this.addSource(D,b.sources[D],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new Pe(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new s.k("data",{dataType:"style"})),this.fire(new s.k("style.load"))}}_createLayers(){let o=s.ay(this.stylesheet.layers);this.dispatcher.broadcast("SL",o),this._order=o.map(h=>h.id),this._layers={},this._serializedLayers=null;for(let h of o){let m=s.az(h);m.setEventedParent(this,{layer:{id:h.id}}),this._layers[h.id]=m}}_loadSprite(o,h=!1,m=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(b,D,T,I){return s._(this,void 0,void 0,function*(){let P=Pt(b),F=T>1?"@2x":"",N={},q={};for(let{id:ie,url:ne}of P){let ae=D.transformRequest(D.normalizeSpriteURL(ne,F,".json"),"SpriteJSON");N[ie]=s.h(ae,I);let J=D.transformRequest(D.normalizeSpriteURL(ne,F,".png"),"SpriteImage");q[ie]=fe.getImage(J,I)}return yield Promise.all([...Object.values(N),...Object.values(q)]),function(ie,ne){return s._(this,void 0,void 0,function*(){let ae={};for(let J in ie){ae[J]={};let pe=v.getImageCanvasContext((yield ne[J]).data),Ie=(yield ie[J]).data;for(let oe in Ie){let{width:be,height:Ee,x:ke,y:Fe,sdf:Ze,pixelRatio:Ge,stretchX:ot,stretchY:pt,content:cn}=Ie[oe];ae[J][oe]={data:null,pixelRatio:Ge,sdf:Ze,stretchX:ot,stretchY:pt,content:cn,spriteData:{width:be,height:Ee,x:ke,y:Fe,context:pe}}}}return ae})}(N,q)})}(o,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(b=>{if(this._spriteRequest=null,b)for(let D in b){this._spritesImagesIds[D]=[];let T=this._spritesImagesIds[D]?this._spritesImagesIds[D].filter(I=>!(I in b)):[];for(let I of T)this.imageManager.removeImage(I),this._changedImages[I]=!0;for(let I in b[D]){let P=D==="default"?I:`${D}:${I}`;this._spritesImagesIds[D].push(P),P in this.imageManager.images?this.imageManager.updateImage(P,b[D][I],!1):this.imageManager.addImage(P,b[D][I]),h&&(this._changedImages[P]=!0)}}}).catch(b=>{this._spriteRequest=null,g=b,this.fire(new s.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"})),m&&m(g)})}_unloadSprite(){for(let o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}_validateLayer(o){let h=this.sourceCaches[o.source];if(!h)return;let m=o.sourceLayer;if(!m)return;let g=h.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(m)===-1)&&this.fire(new s.j(new Error(`Source layer "${m}" does not exist on source "${g.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o){let h=this._serializedAllLayers();if(!o||o.length===0)return Object.values(h);let m=[];for(let g of o)h[g]&&m.push(h[g]);return m}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};let h=Object.keys(this._layers);for(let m of h){let g=this._layers[m];g.type!=="custom"&&(o[m]=g.serialize())}return o}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(let o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(let o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;let h=this._changed;if(h){let g=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(g.length||b.length)&&this._updateWorkerLayers(g,b);for(let D in this._updatedSources){let T=this._updatedSources[D];if(T==="reload")this._reloadSource(D);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(D)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let D in this._updatedPaintProps)this._layers[D].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}let m={};for(let g in this.sourceCaches){let b=this.sourceCaches[g];m[g]=b.used,b.used=!1}for(let g of this._order){let b=this._layers[g];b.recalculate(o,this._availableImages),!b.isHidden(o.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(let g in m){let b=this.sourceCaches[g];!!m[g]!=!!b.used&&b.fire(new s.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(o),this.z=o.zoom,h&&this.fire(new s.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let o=Object.keys(this._changedImages);if(o.length){for(let h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,h){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(o),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,h={}){var m;this._checkLoaded();let g=this.serialize();if(o=h.transformStyle?h.transformStyle(g,o):o,((m=h.validate)===null||m===void 0||m)&&xi(this,s.x(o)))return!1;(o=s.aA(o)).layers=s.ay(o.layers);let b=s.aB(g,o),D=this._getOperationsToPerform(b);if(D.unimplemented.length>0)throw new Error(`Unimplemented: ${D.unimplemented.join(", ")}.`);if(D.operations.length===0)return!1;for(let T of D.operations)T();return this.stylesheet=o,this._serializedLayers=null,!0}_getOperationsToPerform(o){let h=[],m=[];for(let g of o)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":h.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":h.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":h.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":h.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":h.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":h.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":h.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":h.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":h.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":h.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":h.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":h.push(()=>this.setSprite.apply(this,g.args));break;case"setTerrain":h.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":h.push(()=>{});break;default:m.push(g.command)}return{operations:h,unimplemented:m}}addImage(o,h){if(this.getImage(o))return this.fire(new s.j(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,h),this._afterImageUpdated(o)}updateImage(o,h){this.imageManager.updateImage(o,h)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new s.j(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,h,m={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(s.x.source,`sources.${o}`,h,null,m))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);let g=this.sourceCaches[o]=new Ir(o,h,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:o})),g.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(let m in this._layers)if(this._layers[m].source===o)return this.fire(new s.j(new Error(`Source "${o}" cannot be removed while layer "${m}" is using it.`)));let h=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],h.fire(new s.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,h){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);let m=this.sourceCaches[o].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(h),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,h,m={}){this._checkLoaded();let g=o.id;if(this.getLayer(g))return void this.fire(new s.j(new Error(`Layer "${g}" already exists on this map.`)));let b;if(o.type==="custom"){if(xi(this,s.aC(o)))return;b=s.az(o)}else{if("source"in o&&typeof o.source=="object"&&(this.addSource(g,o.source),o=s.aA(o),o=s.e(o,{source:g})),this._validate(s.x.layer,`layers.${g}`,o,{arrayIndex:-1},m))return;b=s.az(o),this._validateLayer(b),b.setEventedParent(this,{layer:{id:g}})}let D=h?this._order.indexOf(h):this._order.length;if(h&&D===-1)this.fire(new s.j(new Error(`Cannot add layer "${g}" before non-existing layer "${h}".`)));else{if(this._order.splice(D,0,g),this._layerOrderChanged=!0,this._layers[g]=b,this._removedLayers[g]&&b.source&&b.type!=="custom"){let T=this._removedLayers[g];delete this._removedLayers[g],T.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(o,h){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new s.j(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===h)return;let m=this._order.indexOf(o);this._order.splice(m,1);let g=h?this._order.indexOf(h):this._order.length;h&&g===-1?this.fire(new s.j(new Error(`Cannot move layer "${o}" before non-existing layer "${h}".`))):(this._order.splice(g,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();let h=this._layers[o];if(!h)return void this.fire(new s.j(new Error(`Cannot remove non-existing layer "${o}".`)));h.setEventedParent(null);let m=this._order.indexOf(o);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=h,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],h.onRemove&&h.onRemove(this.map)}getLayer(o){return this._layers[o]}getLayersOrder(){return[...this._order]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,h,m){this._checkLoaded();let g=this.getLayer(o);g?g.minzoom===h&&g.maxzoom===m||(h!=null&&(g.minzoom=h),m!=null&&(g.maxzoom=m),this._updateLayer(g)):this.fire(new s.j(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,h,m={}){this._checkLoaded();let g=this.getLayer(o);if(g){if(!s.aD(g.filter,h))return h==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(s.x.filter,`layers.${g.id}.filter`,h,null,m)||(g.filter=s.aA(h),this._updateLayer(g)))}else this.fire(new s.j(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return s.aA(this.getLayer(o).filter)}setLayoutProperty(o,h,m,g={}){this._checkLoaded();let b=this.getLayer(o);b?s.aD(b.getLayoutProperty(h),m)||(b.setLayoutProperty(h,m,g),this._updateLayer(b)):this.fire(new s.j(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,h){let m=this.getLayer(o);if(m)return m.getLayoutProperty(h);this.fire(new s.j(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,h,m,g={}){this._checkLoaded();let b=this.getLayer(o);b?s.aD(b.getPaintProperty(h),m)||(b.setPaintProperty(h,m,g)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[o]=!0,this._serializedLayers=null):this.fire(new s.j(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,h){return this.getLayer(o).getPaintProperty(h)}setFeatureState(o,h){this._checkLoaded();let m=o.source,g=o.sourceLayer,b=this.sourceCaches[m];if(b===void 0)return void this.fire(new s.j(new Error(`The source '${m}' does not exist in the map's style.`)));let D=b.getSource().type;D==="geojson"&&g?this.fire(new s.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):D!=="vector"||g?(o.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),b.setFeatureState(g,o.id,h)):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,h){this._checkLoaded();let m=o.source,g=this.sourceCaches[m];if(g===void 0)return void this.fire(new s.j(new Error(`The source '${m}' does not exist in the map's style.`)));let b=g.getSource().type,D=b==="vector"?o.sourceLayer:void 0;b!=="vector"||D?h&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new s.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(D,o.id,h):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();let h=o.source,m=o.sourceLayer,g=this.sourceCaches[h];if(g!==void 0)return g.getSource().type!=="vector"||m?(o.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(m,o.id)):void this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.j(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let o=s.aE(this.sourceCaches,b=>b.serialize()),h=this._serializeByIds(this._order),m=this.map.getTerrain()||void 0,g=this.stylesheet;return s.aF({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:o,layers:h,terrain:m},b=>b!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){let h=D=>this._layers[D].type==="fill-extrusion",m={},g=[];for(let D=this._order.length-1;D>=0;D--){let T=this._order[D];if(h(T)){m[T]=D;for(let I of o){let P=I[T];if(P)for(let F of P)g.push(F)}}}g.sort((D,T)=>T.intersectionZ-D.intersectionZ);let b=[];for(let D=this._order.length-1;D>=0;D--){let T=this._order[D];if(h(T))for(let I=g.length-1;I>=0;I--){let P=g[I].feature;if(m[P.layer.id]<D)break;b.push(P),g.pop()}else for(let I of o){let P=I[T];if(P)for(let F of P)b.push(F.feature)}}return b}queryRenderedFeatures(o,h,m){h&&h.filter&&this._validate(s.x.filter,"queryRenderedFeatures.filter",h.filter,null,h);let g={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new s.j(new Error("parameters.layers must be an Array."))),[];for(let T of h.layers){let I=this._layers[T];if(!I)return this.fire(new s.j(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];g[I.source]=!0}}let b=[];h.availableImages=this._availableImages;let D=this._serializedAllLayers();for(let T in this.sourceCaches)h.layers&&!g[T]||b.push(Nn(this.sourceCaches[T],this._layers,D,o,h,m));return this.placement&&b.push(function(T,I,P,F,N,q,ie){let ne={},ae=q.queryRenderedSymbols(F),J=[];for(let pe of Object.keys(ae).map(Number))J.push(ie[pe]);J.sort(Ui);for(let pe of J){let Ie=pe.featureIndex.lookupSymbolFeatures(ae[pe.bucketInstanceId],I,pe.bucketIndex,pe.sourceLayerIndex,N.filter,N.layers,N.availableImages,T);for(let oe in Ie){let be=ne[oe]=ne[oe]||[],Ee=Ie[oe];Ee.sort((ke,Fe)=>{let Ze=pe.featureSortOrder;if(Ze){let Ge=Ze.indexOf(ke.featureIndex);return Ze.indexOf(Fe.featureIndex)-Ge}return Fe.featureIndex-ke.featureIndex});for(let ke of Ee)be.push(ke)}}for(let pe in ne)ne[pe].forEach(Ie=>{let oe=Ie.feature,be=P[T[pe].source].getFeatureState(oe.layer["source-layer"],oe.id);oe.source=oe.layer.source,oe.layer["source-layer"]&&(oe.sourceLayer=oe.layer["source-layer"]),oe.state=be});return ne}(this._layers,D,this.sourceCaches,o,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(o,h){h&&h.filter&&this._validate(s.x.filter,"querySourceFeatures.filter",h.filter,null,h);let m=this.sourceCaches[o];return m?function(g,b){let D=g.getRenderableIds().map(P=>g.getTileByID(P)),T=[],I={};for(let P=0;P<D.length;P++){let F=D[P],N=F.tileID.canonical.key;I[N]||(I[N]=!0,F.querySourceFeatures(T,b))}return T}(m,h):[]}getLight(){return this.light.getLight()}setLight(o,h={}){this._checkLoaded();let m=this.light.getLight(),g=!1;for(let D in o)if(!s.aD(o[D],m[D])){g=!0;break}if(!g)return;let b={now:v.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,h),this.light.updateTransitions(b)}_validate(o,h,m,g,b={}){return(!b||b.validate!==!1)&&xi(this,o.call(s.x,s.e({key:h,style:this.serialize(),value:m,styleSpec:s.v},g)))}_remove(o=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),at().off(Vs,this._rtlPluginLoaded);for(let h in this._layers)this._layers[h].setEventedParent(null);for(let h in this.sourceCaches){let m=this.sourceCaches[h];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),o&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(let h in this.sourceCaches)this.sourceCaches[h].update(o,this.map.terrain)}_generateCollisionBoxes(){for(let o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,h,m,g,b=!1){let D=!1,T=!1,I={};for(let P of this._order){let F=this._layers[P];if(F.type!=="symbol")continue;if(!I[F.source]){let q=this.sourceCaches[F.source];I[F.source]=q.getRenderableIds(!0).map(ie=>q.getTileByID(ie)).sort((ie,ne)=>ne.tileID.overscaledZ-ie.tileID.overscaledZ||(ie.tileID.isLessThan(ne.tileID)?-1:1))}let N=this.crossTileSymbolIndex.addLayer(F,I[F.source],o.center.lng);D=D||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(v.now(),o.zoom))&&(this.pauseablePlacement=new Us(o,this.map.terrain,this._order,b,h,m,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(v.now()),T=!0),D&&this.pauseablePlacement.placement.setStale()),T||D)for(let P of this._order){let F=this._layers[P];F.type==="symbol"&&this.placement.updateLayerOpacities(F,I[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(v.now())}_releaseSymbolFadeTiles(){for(let o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,h){return s._(this,void 0,void 0,function*(){let m=yield this.imageManager.getImages(h.icons);this._updateTilesForChangedImages();let g=this.sourceCaches[h.source];return g&&g.setDependencies(h.tileID.key,h.type,h.icons),m})}getGlyphs(o,h){return s._(this,void 0,void 0,function*(){let m=yield this.glyphManager.getGlyphs(h.stacks),g=this.sourceCaches[h.source];return g&&g.setDependencies(h.tileID.key,h.type,[""]),m})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,h={}){this._checkLoaded(),o&&this._validate(s.x.glyphs,"glyphs",o,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}addSprite(o,h,m={},g){this._checkLoaded();let b=[{id:o,url:h}],D=[...Pt(this.stylesheet.sprite),...b];this._validate(s.x.sprite,"sprite",D,null,m)||(this.stylesheet.sprite=D,this._loadSprite(b,!0,g))}removeSprite(o){this._checkLoaded();let h=Pt(this.stylesheet.sprite);if(h.find(m=>m.id===o)){if(this._spritesImagesIds[o])for(let m of this._spritesImagesIds[o])this.imageManager.removeImage(m),this._changedImages[m]=!0;h.splice(h.findIndex(m=>m.id===o),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}else this.fire(new s.j(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return Pt(this.stylesheet.sprite)}setSprite(o,h={},m){this._checkLoaded(),o&&this._validate(s.x.sprite,"sprite",o,null,h)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,m):(this._unloadSprite(),m&&m(null)))}}var ud=s.X([{name:"a_pos",type:"Int16",components:2}]),ba="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";let Zl={prelude:Qn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Qn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Qn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Qn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Qn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Qn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Qn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Qn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Qn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Qn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Qn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Qn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Qn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Qn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Qn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Qn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Qn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Qn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Qn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Qn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Qn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Qn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Qn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Qn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Qn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ba),terrainDepth:Qn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ba),terrainCoords:Qn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ba)};function Qn(y,o){let h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=o.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),D=b?b.concat(g):g,T={};return{fragmentSource:y=y.replace(h,(I,P,F,N,q)=>(T[q]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${q}
varying ${F} ${N} ${q};
#else
uniform ${F} ${N} u_${q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${q}
    ${F} ${N} ${q} = u_${q};
#endif
`)),vertexSource:o=o.replace(h,(I,P,F,N,q)=>{let ie=N==="float"?"vec2":"vec4",ne=q.match(/color/)?"color":ie;return T[q]?P==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${F} ${ie} a_${q};
varying ${F} ${N} ${q};
#else
uniform ${F} ${N} u_${q};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${F} ${N} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${ne}(a_${q}, u_${q}_t);
#else
    ${F} ${N} ${q} = u_${q};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${F} ${ie} a_${q};
#else
uniform ${F} ${N} u_${q};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${F} ${N} ${q} = a_${q};
#else
    ${F} ${N} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${F} ${N} ${q} = unpack_mix_${ne}(a_${q}, u_${q}_t);
#else
    ${F} ${N} ${q} = u_${q};
#endif
`}),staticAttributes:m,staticUniforms:D}}class dd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,h,m,g,b,D,T,I,P){this.context=o;let F=this.boundPaintVertexBuffers.length!==g.length;for(let N=0;!F&&N<g.length;N++)this.boundPaintVertexBuffers[N]!==g[N]&&(F=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==m||F||this.boundIndexBuffer!==b||this.boundVertexOffset!==D||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==I||this.boundDynamicVertexBuffer3!==P?this.freshBind(h,m,g,b,D,T,I,P):(o.bindVertexArray.set(this.vao),T&&T.bind(),b&&b.dynamicDraw&&b.bind(),I&&I.bind(),P&&P.bind())}freshBind(o,h,m,g,b,D,T,I){let P=o.numAttributes,F=this.context,N=F.gl;this.vao&&this.destroy(),this.vao=F.createVertexArray(),F.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=g,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=D,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=I,h.enableAttributes(N,o);for(let q of m)q.enableAttributes(N,o);D&&D.enableAttributes(N,o),T&&T.enableAttributes(N,o),I&&I.enableAttributes(N,o),h.bind(),h.setVertexAttribPointers(N,o,b);for(let q of m)q.bind(),q.setVertexAttribPointers(N,o,b);D&&(D.bind(),D.setVertexAttribPointers(N,o,b)),g&&g.bind(),T&&(T.bind(),T.setVertexAttribPointers(N,o,b)),I&&(I.bind(),I.setVertexAttribPointers(N,o,b)),F.currentNumAttributes=P}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Zc(y){let o=[];for(let h=0;h<y.length;h++){if(y[h]===null)continue;let m=y[h].split(" ");o.push(m.pop())}return o}class To{constructor(o,h,m,g,b,D){let T=o.gl;this.program=T.createProgram();let I=Zc(h.staticAttributes),P=m?m.getBinderAttributes():[],F=I.concat(P),N=Zl.prelude.staticUniforms?Zc(Zl.prelude.staticUniforms):[],q=h.staticUniforms?Zc(h.staticUniforms):[],ie=m?m.getBinderUniforms():[],ne=N.concat(q).concat(ie),ae=[];for(let ke of ne)ae.indexOf(ke)<0&&ae.push(ke);let J=m?m.defines():[];b&&J.push("#define OVERDRAW_INSPECTOR;"),D&&J.push("#define TERRAIN3D;");let pe=J.concat(Zl.prelude.fragmentSource,h.fragmentSource).join(`
`),Ie=J.concat(Zl.prelude.vertexSource,h.vertexSource).join(`
`),oe=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(oe,pe),T.compileShader(oe),!T.getShaderParameter(oe,T.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${T.getShaderInfoLog(oe)}`);T.attachShader(this.program,oe);let be=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(be,Ie),T.compileShader(be),!T.getShaderParameter(be,T.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${T.getShaderInfoLog(be)}`);T.attachShader(this.program,be),this.attributes={};let Ee={};this.numAttributes=F.length;for(let ke=0;ke<this.numAttributes;ke++)F[ke]&&(T.bindAttribLocation(this.program,ke,F[ke]),this.attributes[F[ke]]=ke);if(T.linkProgram(this.program),!T.getProgramParameter(this.program,T.LINK_STATUS))throw new Error(`Program failed to link: ${T.getProgramInfoLog(this.program)}`);T.deleteShader(be),T.deleteShader(oe);for(let ke=0;ke<ae.length;ke++){let Fe=ae[ke];if(Fe&&!Ee[Fe]){let Ze=T.getUniformLocation(this.program,Fe);Ze&&(Ee[Fe]=Ze)}}this.fixedUniforms=g(o,Ee),this.terrainUniforms=((ke,Fe)=>({u_depth:new s.aG(ke,Fe.u_depth),u_terrain:new s.aG(ke,Fe.u_terrain),u_terrain_dim:new s.aH(ke,Fe.u_terrain_dim),u_terrain_matrix:new s.aI(ke,Fe.u_terrain_matrix),u_terrain_unpack:new s.aJ(ke,Fe.u_terrain_unpack),u_terrain_exaggeration:new s.aH(ke,Fe.u_terrain_exaggeration)}))(o,Ee),this.binderUniforms=m?m.getUniforms(o,Ee):[]}draw(o,h,m,g,b,D,T,I,P,F,N,q,ie,ne,ae,J,pe,Ie){let oe=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(m),o.setStencilMode(g),o.setColorMode(b),o.setCullFace(D),I){o.activeTexture.set(oe.TEXTURE2),oe.bindTexture(oe.TEXTURE_2D,I.depthTexture),o.activeTexture.set(oe.TEXTURE3),oe.bindTexture(oe.TEXTURE_2D,I.texture);for(let Ee in this.terrainUniforms)this.terrainUniforms[Ee].set(I[Ee])}for(let Ee in this.fixedUniforms)this.fixedUniforms[Ee].set(T[Ee]);ae&&ae.setUniforms(o,this.binderUniforms,ie,{zoom:ne});let be=0;switch(h){case oe.LINES:be=2;break;case oe.TRIANGLES:be=3;break;case oe.LINE_STRIP:be=1}for(let Ee of q.get()){let ke=Ee.vaos||(Ee.vaos={});(ke[P]||(ke[P]=new dd)).bind(o,this,F,ae?ae.getPaintVertexBuffers():[],N,Ee.vertexOffset,J,pe,Ie),oe.drawElements(h,Ee.primitiveLength*be,oe.UNSIGNED_SHORT,Ee.primitiveOffset*be*2)}}}function hd(y,o,h){let m=1/en(h,1,o.transform.tileZoom),g=Math.pow(2,h.tileID.overscaledZ),b=h.tileSize*Math.pow(2,o.transform.tileZoom)/g,D=b*(h.tileID.canonical.x+h.tileID.wrap*g),T=b*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[m,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[D>>16,T>>16],u_pixel_coord_lower:[65535&D,65535&T]}}let Yl=(y,o,h,m)=>{let g=o.style.light,b=g.properties.get("position"),D=[b.x,b.y,b.z],T=function(){var P=new s.A(9);return s.A!=Float32Array&&(P[1]=0,P[2]=0,P[3]=0,P[5]=0,P[6]=0,P[7]=0),P[0]=1,P[4]=1,P[8]=1,P}();g.properties.get("anchor")==="viewport"&&function(P,F){var N=Math.sin(F),q=Math.cos(F);P[0]=q,P[1]=N,P[2]=0,P[3]=-N,P[4]=q,P[5]=0,P[6]=0,P[7]=0,P[8]=1}(T,-o.transform.angle),function(P,F,N){var q=F[0],ie=F[1],ne=F[2];P[0]=q*N[0]+ie*N[3]+ne*N[6],P[1]=q*N[1]+ie*N[4]+ne*N[7],P[2]=q*N[2]+ie*N[5]+ne*N[8]}(D,D,T);let I=g.properties.get("color");return{u_matrix:y,u_lightpos:D,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+h,u_opacity:m}},Ob=(y,o,h,m,g,b,D)=>s.e(Yl(y,o,h,m),hd(b,o,D),{u_height_factor:-Math.pow(2,g.overscaledZ)/D.tileSize/8}),Lg=y=>({u_matrix:y}),pd=(y,o,h,m)=>s.e(Lg(y),hd(h,o,m)),Ib=(y,o)=>({u_matrix:y,u_world:o}),Ng=(y,o,h,m,g)=>s.e(pd(y,o,h,m),{u_world:g}),Eb=(y,o,h,m)=>{let g=y.transform,b,D;if(m.paint.get("circle-pitch-alignment")==="map"){let T=en(h,1,g.zoom);b=!0,D=[T,T]}else b=!1,D=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(o.posMatrix,h,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:D}},Bg=(y,o,h)=>{let m=en(h,1,o.zoom),g=Math.pow(2,o.zoom-h.tileID.overscaledZ),b=h.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[o.pixelsToGLUnits[0]/(m*g),o.pixelsToGLUnits[1]/(m*g)],u_overscale_factor:b}},jg=(y,o,h=1)=>({u_matrix:y,u_color:o,u_overlay:0,u_overlay_scale:h}),fd=y=>({u_matrix:y}),Vg=(y,o,h,m)=>({u_matrix:y,u_extrude_scale:en(o,1,h),u_intensity:m});function zg(y,o){let h=Math.pow(2,o.canonical.z),m=o.canonical.y;return[new s.Y(0,m/h).toLngLat().lat,new s.Y(0,(m+1)/h).toLngLat().lat]}let md=(y,o,h,m)=>{let g=y.transform;return{u_matrix:Kl(y,o,h,m),u_ratio:1/en(o,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Ug=(y,o,h,m,g)=>s.e(md(y,o,h,g),{u_image:0,u_image_height:m}),ic=(y,o,h,m,g)=>{let b=y.transform,D=Ms(o,b);return{u_matrix:Kl(y,o,h,g),u_texsize:o.imageAtlasTexture.size,u_ratio:1/en(o,1,b.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[D,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},gd=(y,o,h,m,g,b)=>{let D=y.lineAtlas,T=Ms(o,y.transform),I=h.layout.get("line-cap")==="round",P=D.getDash(m.from,I),F=D.getDash(m.to,I),N=P.width*g.fromScale,q=F.width*g.toScale;return s.e(md(y,o,h,b),{u_patternscale_a:[T/N,-P.height/2],u_patternscale_b:[T/q,-F.height/2],u_sdfgamma:D.width/(256*Math.min(N,q)*y.pixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:F.y,u_mix:g.t})};function Ms(y,o){return 1/en(y,1,o.tileZoom)}function Kl(y,o,h,m){return y.translatePosMatrix(m?m.posMatrix:o.tileID.posMatrix,o,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}let _d=(y,o,h,m,g)=>{return{u_matrix:y,u_tl_parent:o,u_scale_parent:h,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(D=g.paint.get("raster-saturation"),D>0?1-1/(1.001-D):-D),u_contrast_factor:(b=g.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Ql(g.paint.get("raster-hue-rotate"))};var b,D};function Ql(y){y*=Math.PI/180;let o=Math.sin(y),h=Math.cos(y);return[(2*h+1)/3,(-Math.sqrt(3)*o-h+1)/3,(Math.sqrt(3)*o-h+1)/3]}let Jl=(y,o,h,m,g,b,D,T,I,P)=>{let F=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:F.cameraToCenterDistance,u_pitch:F.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:F.width/F.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:D,u_coord_matrix:T,u_is_text:+I,u_pitch_with_map:+m,u_texsize:P,u_texture:0}},Xl=(y,o,h,m,g,b,D,T,I,P,F)=>{let N=g.transform;return s.e(Jl(y,o,h,m,g,b,D,T,I,P),{u_gamma_scale:m?Math.cos(N._pitch)*N.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+F})},eu=(y,o,h,m,g,b,D,T,I,P)=>s.e(Xl(y,o,h,m,g,b,D,T,!0,I,!0),{u_texsize_icon:P,u_texture_icon:1}),Pb=(y,o,h)=>({u_matrix:y,u_opacity:o,u_color:h}),kb=(y,o,h,m,g,b)=>s.e(function(D,T,I,P){let F=I.imageManager.getPattern(D.from.toString()),N=I.imageManager.getPattern(D.to.toString()),{width:q,height:ie}=I.imageManager.getPixelSize(),ne=Math.pow(2,P.tileID.overscaledZ),ae=P.tileSize*Math.pow(2,I.transform.tileZoom)/ne,J=ae*(P.tileID.canonical.x+P.tileID.wrap*ne),pe=ae*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[q,ie],u_mix:T.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/en(P,1,I.transform.tileZoom),u_pixel_coord_upper:[J>>16,pe>>16],u_pixel_coord_lower:[65535&J,65535&pe]}}(m,b,h,g),{u_matrix:y,u_opacity:o}),$g={fillExtrusion:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_lightpos:new s.aK(y,o.u_lightpos),u_lightintensity:new s.aH(y,o.u_lightintensity),u_lightcolor:new s.aK(y,o.u_lightcolor),u_vertical_gradient:new s.aH(y,o.u_vertical_gradient),u_opacity:new s.aH(y,o.u_opacity)}),fillExtrusionPattern:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_lightpos:new s.aK(y,o.u_lightpos),u_lightintensity:new s.aH(y,o.u_lightintensity),u_lightcolor:new s.aK(y,o.u_lightcolor),u_vertical_gradient:new s.aH(y,o.u_vertical_gradient),u_height_factor:new s.aH(y,o.u_height_factor),u_image:new s.aG(y,o.u_image),u_texsize:new s.aL(y,o.u_texsize),u_pixel_coord_upper:new s.aL(y,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.aL(y,o.u_pixel_coord_lower),u_scale:new s.aK(y,o.u_scale),u_fade:new s.aH(y,o.u_fade),u_opacity:new s.aH(y,o.u_opacity)}),fill:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix)}),fillPattern:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_image:new s.aG(y,o.u_image),u_texsize:new s.aL(y,o.u_texsize),u_pixel_coord_upper:new s.aL(y,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.aL(y,o.u_pixel_coord_lower),u_scale:new s.aK(y,o.u_scale),u_fade:new s.aH(y,o.u_fade)}),fillOutline:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_world:new s.aL(y,o.u_world)}),fillOutlinePattern:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_world:new s.aL(y,o.u_world),u_image:new s.aG(y,o.u_image),u_texsize:new s.aL(y,o.u_texsize),u_pixel_coord_upper:new s.aL(y,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.aL(y,o.u_pixel_coord_lower),u_scale:new s.aK(y,o.u_scale),u_fade:new s.aH(y,o.u_fade)}),circle:(y,o)=>({u_camera_to_center_distance:new s.aH(y,o.u_camera_to_center_distance),u_scale_with_map:new s.aG(y,o.u_scale_with_map),u_pitch_with_map:new s.aG(y,o.u_pitch_with_map),u_extrude_scale:new s.aL(y,o.u_extrude_scale),u_device_pixel_ratio:new s.aH(y,o.u_device_pixel_ratio),u_matrix:new s.aI(y,o.u_matrix)}),collisionBox:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_camera_to_center_distance:new s.aH(y,o.u_camera_to_center_distance),u_pixels_to_tile_units:new s.aH(y,o.u_pixels_to_tile_units),u_extrude_scale:new s.aL(y,o.u_extrude_scale),u_overscale_factor:new s.aH(y,o.u_overscale_factor)}),collisionCircle:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_inv_matrix:new s.aI(y,o.u_inv_matrix),u_camera_to_center_distance:new s.aH(y,o.u_camera_to_center_distance),u_viewport_size:new s.aL(y,o.u_viewport_size)}),debug:(y,o)=>({u_color:new s.aM(y,o.u_color),u_matrix:new s.aI(y,o.u_matrix),u_overlay:new s.aG(y,o.u_overlay),u_overlay_scale:new s.aH(y,o.u_overlay_scale)}),clippingMask:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix)}),heatmap:(y,o)=>({u_extrude_scale:new s.aH(y,o.u_extrude_scale),u_intensity:new s.aH(y,o.u_intensity),u_matrix:new s.aI(y,o.u_matrix)}),heatmapTexture:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_world:new s.aL(y,o.u_world),u_image:new s.aG(y,o.u_image),u_color_ramp:new s.aG(y,o.u_color_ramp),u_opacity:new s.aH(y,o.u_opacity)}),hillshade:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_image:new s.aG(y,o.u_image),u_latrange:new s.aL(y,o.u_latrange),u_light:new s.aL(y,o.u_light),u_shadow:new s.aM(y,o.u_shadow),u_highlight:new s.aM(y,o.u_highlight),u_accent:new s.aM(y,o.u_accent)}),hillshadePrepare:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_image:new s.aG(y,o.u_image),u_dimension:new s.aL(y,o.u_dimension),u_zoom:new s.aH(y,o.u_zoom),u_unpack:new s.aJ(y,o.u_unpack)}),line:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_ratio:new s.aH(y,o.u_ratio),u_device_pixel_ratio:new s.aH(y,o.u_device_pixel_ratio),u_units_to_pixels:new s.aL(y,o.u_units_to_pixels)}),lineGradient:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_ratio:new s.aH(y,o.u_ratio),u_device_pixel_ratio:new s.aH(y,o.u_device_pixel_ratio),u_units_to_pixels:new s.aL(y,o.u_units_to_pixels),u_image:new s.aG(y,o.u_image),u_image_height:new s.aH(y,o.u_image_height)}),linePattern:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_texsize:new s.aL(y,o.u_texsize),u_ratio:new s.aH(y,o.u_ratio),u_device_pixel_ratio:new s.aH(y,o.u_device_pixel_ratio),u_image:new s.aG(y,o.u_image),u_units_to_pixels:new s.aL(y,o.u_units_to_pixels),u_scale:new s.aK(y,o.u_scale),u_fade:new s.aH(y,o.u_fade)}),lineSDF:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_ratio:new s.aH(y,o.u_ratio),u_device_pixel_ratio:new s.aH(y,o.u_device_pixel_ratio),u_units_to_pixels:new s.aL(y,o.u_units_to_pixels),u_patternscale_a:new s.aL(y,o.u_patternscale_a),u_patternscale_b:new s.aL(y,o.u_patternscale_b),u_sdfgamma:new s.aH(y,o.u_sdfgamma),u_image:new s.aG(y,o.u_image),u_tex_y_a:new s.aH(y,o.u_tex_y_a),u_tex_y_b:new s.aH(y,o.u_tex_y_b),u_mix:new s.aH(y,o.u_mix)}),raster:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_tl_parent:new s.aL(y,o.u_tl_parent),u_scale_parent:new s.aH(y,o.u_scale_parent),u_buffer_scale:new s.aH(y,o.u_buffer_scale),u_fade_t:new s.aH(y,o.u_fade_t),u_opacity:new s.aH(y,o.u_opacity),u_image0:new s.aG(y,o.u_image0),u_image1:new s.aG(y,o.u_image1),u_brightness_low:new s.aH(y,o.u_brightness_low),u_brightness_high:new s.aH(y,o.u_brightness_high),u_saturation_factor:new s.aH(y,o.u_saturation_factor),u_contrast_factor:new s.aH(y,o.u_contrast_factor),u_spin_weights:new s.aK(y,o.u_spin_weights)}),symbolIcon:(y,o)=>({u_is_size_zoom_constant:new s.aG(y,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aG(y,o.u_is_size_feature_constant),u_size_t:new s.aH(y,o.u_size_t),u_size:new s.aH(y,o.u_size),u_camera_to_center_distance:new s.aH(y,o.u_camera_to_center_distance),u_pitch:new s.aH(y,o.u_pitch),u_rotate_symbol:new s.aG(y,o.u_rotate_symbol),u_aspect_ratio:new s.aH(y,o.u_aspect_ratio),u_fade_change:new s.aH(y,o.u_fade_change),u_matrix:new s.aI(y,o.u_matrix),u_label_plane_matrix:new s.aI(y,o.u_label_plane_matrix),u_coord_matrix:new s.aI(y,o.u_coord_matrix),u_is_text:new s.aG(y,o.u_is_text),u_pitch_with_map:new s.aG(y,o.u_pitch_with_map),u_texsize:new s.aL(y,o.u_texsize),u_texture:new s.aG(y,o.u_texture)}),symbolSDF:(y,o)=>({u_is_size_zoom_constant:new s.aG(y,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aG(y,o.u_is_size_feature_constant),u_size_t:new s.aH(y,o.u_size_t),u_size:new s.aH(y,o.u_size),u_camera_to_center_distance:new s.aH(y,o.u_camera_to_center_distance),u_pitch:new s.aH(y,o.u_pitch),u_rotate_symbol:new s.aG(y,o.u_rotate_symbol),u_aspect_ratio:new s.aH(y,o.u_aspect_ratio),u_fade_change:new s.aH(y,o.u_fade_change),u_matrix:new s.aI(y,o.u_matrix),u_label_plane_matrix:new s.aI(y,o.u_label_plane_matrix),u_coord_matrix:new s.aI(y,o.u_coord_matrix),u_is_text:new s.aG(y,o.u_is_text),u_pitch_with_map:new s.aG(y,o.u_pitch_with_map),u_texsize:new s.aL(y,o.u_texsize),u_texture:new s.aG(y,o.u_texture),u_gamma_scale:new s.aH(y,o.u_gamma_scale),u_device_pixel_ratio:new s.aH(y,o.u_device_pixel_ratio),u_is_halo:new s.aG(y,o.u_is_halo)}),symbolTextAndIcon:(y,o)=>({u_is_size_zoom_constant:new s.aG(y,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aG(y,o.u_is_size_feature_constant),u_size_t:new s.aH(y,o.u_size_t),u_size:new s.aH(y,o.u_size),u_camera_to_center_distance:new s.aH(y,o.u_camera_to_center_distance),u_pitch:new s.aH(y,o.u_pitch),u_rotate_symbol:new s.aG(y,o.u_rotate_symbol),u_aspect_ratio:new s.aH(y,o.u_aspect_ratio),u_fade_change:new s.aH(y,o.u_fade_change),u_matrix:new s.aI(y,o.u_matrix),u_label_plane_matrix:new s.aI(y,o.u_label_plane_matrix),u_coord_matrix:new s.aI(y,o.u_coord_matrix),u_is_text:new s.aG(y,o.u_is_text),u_pitch_with_map:new s.aG(y,o.u_pitch_with_map),u_texsize:new s.aL(y,o.u_texsize),u_texsize_icon:new s.aL(y,o.u_texsize_icon),u_texture:new s.aG(y,o.u_texture),u_texture_icon:new s.aG(y,o.u_texture_icon),u_gamma_scale:new s.aH(y,o.u_gamma_scale),u_device_pixel_ratio:new s.aH(y,o.u_device_pixel_ratio),u_is_halo:new s.aG(y,o.u_is_halo)}),background:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_opacity:new s.aH(y,o.u_opacity),u_color:new s.aM(y,o.u_color)}),backgroundPattern:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_opacity:new s.aH(y,o.u_opacity),u_image:new s.aG(y,o.u_image),u_pattern_tl_a:new s.aL(y,o.u_pattern_tl_a),u_pattern_br_a:new s.aL(y,o.u_pattern_br_a),u_pattern_tl_b:new s.aL(y,o.u_pattern_tl_b),u_pattern_br_b:new s.aL(y,o.u_pattern_br_b),u_texsize:new s.aL(y,o.u_texsize),u_mix:new s.aH(y,o.u_mix),u_pattern_size_a:new s.aL(y,o.u_pattern_size_a),u_pattern_size_b:new s.aL(y,o.u_pattern_size_b),u_scale_a:new s.aH(y,o.u_scale_a),u_scale_b:new s.aH(y,o.u_scale_b),u_pixel_coord_upper:new s.aL(y,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.aL(y,o.u_pixel_coord_lower),u_tile_units_to_pixels:new s.aH(y,o.u_tile_units_to_pixels)}),terrain:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_texture:new s.aG(y,o.u_texture),u_ele_delta:new s.aH(y,o.u_ele_delta)}),terrainDepth:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_ele_delta:new s.aH(y,o.u_ele_delta)}),terrainCoords:(y,o)=>({u_matrix:new s.aI(y,o.u_matrix),u_texture:new s.aG(y,o.u_texture),u_terrain_coords_id:new s.aH(y,o.u_terrain_coords_id),u_ele_delta:new s.aH(y,o.u_ele_delta)})};class Ab{constructor(o,h,m){this.context=o;let g=o.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){let h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let rc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vd{constructor(o,h,m,g){this.length=h.length,this.attributes=m,this.itemSize=h.bytesPerElement,this.dynamicDraw=g,this.context=o;let b=o.gl;this.buffer=b.createBuffer(),o.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);let h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,h){for(let m=0;m<this.attributes.length;m++){let g=h.attributes[this.attributes[m].name];g!==void 0&&o.enableVertexAttribArray(g)}}setVertexAttribPointers(o,h,m){for(let g=0;g<this.attributes.length;g++){let b=this.attributes[g],D=h.attributes[b.name];D!==void 0&&o.vertexAttribPointer(D,b.components,o[rc[b.type]],!1,this.itemSize,b.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Ur=new WeakMap;function Er(y){var o;if(Ur.has(y))return Ur.get(y);{let h=(o=y.getParameter(y.VERSION))===null||o===void 0?void 0:o.startsWith("WebGL 2.0");return Ur.set(y,h),h}}class Gn{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class yd extends Gn{getDefault(){return s.aO.transparent}set(o){let h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class bd extends Gn{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class zp extends Gn{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Up extends Gn{getDefault(){return[!0,!0,!0,!0]}set(o){let h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class wd extends Gn{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class $p extends Gn{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Hp extends Gn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){let h=this.current;(o.func!==h.func||o.ref!==h.ref||o.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Cd extends Gn{getDefault(){let o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){let h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Hg extends Gn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let h=this.gl;o?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=o,this.dirty=!1}}class qg extends Gn{getDefault(){return[0,1]}set(o){let h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class Yc extends Gn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let h=this.gl;o?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=o,this.dirty=!1}}class Rb extends Gn{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Fb extends Gn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let h=this.gl;o?h.enable(h.BLEND):h.disable(h.BLEND),this.current=o,this.dirty=!1}}class Lb extends Gn{getDefault(){let o=this.gl;return[o.ONE,o.ZERO]}set(o){let h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class Nb extends Gn{getDefault(){return s.aO.transparent}set(o){let h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Bb extends Gn{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class jb extends Gn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let h=this.gl;o?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=o,this.dirty=!1}}class qp extends Gn{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class xd extends Gn{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class Gp extends Gn{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class Wp extends Gn{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Kc extends Gn{getDefault(){let o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){let h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Gg extends Gn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;let h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class Wg extends Gn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;let h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Zp extends Gn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;let h=this.gl;h.bindTexture(h.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class sc extends Gn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;let h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Zg extends Gn{getDefault(){return null}set(o){let h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Qc extends Gn{getDefault(){return null}set(o){var h;if(o===this.current&&!this.dirty)return;let m=this.gl;Er(m)?m.bindVertexArray(o):(h=m.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(o),this.current=o,this.dirty=!1}}class Jc extends Gn{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;let h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Yg extends Gn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Yp extends Gn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;let h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class zn extends Gn{constructor(o,h){super(o),this.context=o,this.parent=h}getDefault(){return null}}class Md extends zn{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Vb extends zn{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Kg extends zn{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class tu{constructor(o,h,m,g,b){this.context=o,this.width=h,this.height=m;let D=o.gl,T=this.framebuffer=D.createFramebuffer();if(this.colorAttachment=new Md(o,T),g)this.depthAttachment=b?new Kg(o,T):new Vb(o,T);else if(b)throw new Error("Stencil cannot be set without depth");if(D.checkFramebufferStatus(D.FRAMEBUFFER)!==D.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let o=this.context.gl,h=this.colorAttachment.get();if(h&&o.deleteTexture(h),this.depthAttachment){let m=this.depthAttachment.get();m&&o.deleteRenderbuffer(m)}o.deleteFramebuffer(this.framebuffer)}}class Hi{constructor(o,h,m){this.blendFunction=o,this.blendColor=h,this.mask=m}}Hi.Replace=[1,0],Hi.disabled=new Hi(Hi.Replace,s.aO.transparent,[!1,!1,!1,!1]),Hi.unblended=new Hi(Hi.Replace,s.aO.transparent,[!0,!0,!0,!0]),Hi.alphaBlended=new Hi([1,771],s.aO.transparent,[!0,!0,!0,!0]);class zb{constructor(o){var h,m;if(this.gl=o,this.clearColor=new yd(this),this.clearDepth=new bd(this),this.clearStencil=new zp(this),this.colorMask=new Up(this),this.depthMask=new wd(this),this.stencilMask=new $p(this),this.stencilFunc=new Hp(this),this.stencilOp=new Cd(this),this.stencilTest=new Hg(this),this.depthRange=new qg(this),this.depthTest=new Yc(this),this.depthFunc=new Rb(this),this.blend=new Fb(this),this.blendFunc=new Lb(this),this.blendColor=new Nb(this),this.blendEquation=new Bb(this),this.cullFace=new jb(this),this.cullFaceSide=new qp(this),this.frontFace=new xd(this),this.program=new Gp(this),this.activeTexture=new Wp(this),this.viewport=new Kc(this),this.bindFramebuffer=new Gg(this),this.bindRenderbuffer=new Wg(this),this.bindTexture=new Zp(this),this.bindVertexBuffer=new sc(this),this.bindElementBuffer=new Zg(this),this.bindVertexArray=new Qc(this),this.pixelStoreUnpack=new Jc(this),this.pixelStoreUnpackPremultiplyAlpha=new Yg(this),this.pixelStoreUnpackFlipY=new Yp(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),Er(o)){this.HALF_FLOAT=o.HALF_FLOAT;let g=o.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=o.RGBA16F)!==null&&h!==void 0?h:g?.RGBA16F_EXT,this.RGB16F=(m=o.RGB16F)!==null&&m!==void 0?m:g?.RGB16F_EXT,o.getExtension("EXT_color_buffer_float")}else{o.getExtension("EXT_color_buffer_half_float"),o.getExtension("OES_texture_half_float_linear");let g=o.getExtension("OES_texture_half_float");this.HALF_FLOAT=g?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,h){return new Ab(this,o,h)}createVertexBuffer(o,h,m){return new vd(this,o,h,m)}createRenderbuffer(o,h,m){let g=this.gl,b=g.createRenderbuffer();return this.bindRenderbuffer.set(b),g.renderbufferStorage(g.RENDERBUFFER,o,h,m),this.bindRenderbuffer.set(null),b}createFramebuffer(o,h,m,g){return new tu(this,o,h,m,g)}clear({color:o,depth:h,stencil:m}){let g=this.gl,b=0;o&&(b|=g.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(b|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),m!==void 0&&(b|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),g.clear(b)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){s.aD(o.blendFunction,Hi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){var o;return Er(this.gl)?this.gl.createVertexArray():(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.createVertexArrayOES()}deleteVertexArray(o){var h;return Er(this.gl)?this.gl.deleteVertexArray(o):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(o)}unbindVAO(){this.bindVertexArray.set(null)}}class jn{constructor(o,h,m){this.func=o,this.mask=h,this.range=m}}jn.ReadOnly=!1,jn.ReadWrite=!0,jn.disabled=new jn(519,jn.ReadOnly,[0,1]);let Kp=7680;class ai{constructor(o,h,m,g,b,D){this.test=o,this.ref=h,this.mask=m,this.fail=g,this.depthFail=b,this.pass=D}}ai.disabled=new ai({func:519,mask:0},0,0,Kp,Kp,Kp);class ii{constructor(o,h,m){this.enable=o,this.mode=h,this.frontFace=m}}let ac;function Dd(y,o,h,m,g,b,D){let T=y.context,I=T.gl,P=y.useProgram("collisionBox"),F=[],N=0,q=0;for(let oe=0;oe<m.length;oe++){let be=m[oe],Ee=o.getTile(be),ke=Ee.getBucket(h);if(!ke)continue;let Fe=be.posMatrix;g[0]===0&&g[1]===0||(Fe=y.translatePosMatrix(be.posMatrix,Ee,g,b));let Ze=D?ke.textCollisionBox:ke.iconCollisionBox,Ge=ke.collisionCircleArray;if(Ge.length>0){let ot=s.F(),pt=Fe;s.aP(ot,ke.placementInvProjMatrix,y.transform.glCoordMatrix),s.aP(ot,ot,ke.placementViewportMatrix),F.push({circleArray:Ge,circleOffset:q,transform:pt,invTransform:ot,coord:be}),N+=Ge.length/4,q=N}Ze&&P.draw(T,I.LINES,jn.disabled,ai.disabled,y.colorModeForRenderPass(),ii.disabled,Bg(Fe,y.transform,Ee),y.style.map.terrain&&y.style.map.terrain.getTerrainData(be),h.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,null,y.transform.zoom,null,null,Ze.collisionVertexBuffer)}if(!D||!F.length)return;let ie=y.useProgram("collisionCircle"),ne=new s.aQ;ne.resize(4*N),ne._trim();let ae=0;for(let oe of F)for(let be=0;be<oe.circleArray.length/4;be++){let Ee=4*be,ke=oe.circleArray[Ee+0],Fe=oe.circleArray[Ee+1],Ze=oe.circleArray[Ee+2],Ge=oe.circleArray[Ee+3];ne.emplace(ae++,ke,Fe,Ze,Ge,0),ne.emplace(ae++,ke,Fe,Ze,Ge,1),ne.emplace(ae++,ke,Fe,Ze,Ge,2),ne.emplace(ae++,ke,Fe,Ze,Ge,3)}(!ac||ac.length<2*N)&&(ac=function(oe){let be=2*oe,Ee=new s.aS;Ee.resize(be),Ee._trim();for(let ke=0;ke<be;ke++){let Fe=6*ke;Ee.uint16[Fe+0]=4*ke+0,Ee.uint16[Fe+1]=4*ke+1,Ee.uint16[Fe+2]=4*ke+2,Ee.uint16[Fe+3]=4*ke+2,Ee.uint16[Fe+4]=4*ke+3,Ee.uint16[Fe+5]=4*ke+0}return Ee}(N));let J=T.createIndexBuffer(ac,!0),pe=T.createVertexBuffer(ne,s.aR.members,!0);for(let oe of F){let be={u_matrix:oe.transform,u_inv_matrix:oe.invTransform,u_camera_to_center_distance:(Ie=y.transform).cameraToCenterDistance,u_viewport_size:[Ie.width,Ie.height]};ie.draw(T,I.TRIANGLES,jn.disabled,ai.disabled,y.colorModeForRenderPass(),ii.disabled,be,y.style.map.terrain&&y.style.map.terrain.getTerrainData(oe.coord),h.id,pe,J,s.$.simpleSegment(0,2*oe.circleOffset,oe.circleArray.length,oe.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Ie;pe.destroy(),J.destroy()}ii.disabled=new ii(!1,1029,2305),ii.backCCW=new ii(!0,1029,2305);let Qp=s.an(new Float32Array(16));function Qg(y,o,h,m,g,b){let{horizontalAlign:D,verticalAlign:T}=s.at(y);return new s.P((-(D-.5)*o/g+m[0])*b,(-(T-.5)*h/g+m[1])*b)}function Td(y,o,h,m,g,b,D,T,I,P,F){let N=y.text.placedSymbolArray,q=y.text.dynamicLayoutVertexArray,ie=y.icon.dynamicLayoutVertexArray,ne={};q.clear();for(let ae=0;ae<N.length;ae++){let J=N.get(ae),pe=J.hidden||!J.crossTileID||y.allowVerticalPlacement&&!J.placedOrientation?null:m[J.crossTileID];if(pe){let Ie=new s.P(J.anchorX,J.anchorY),oe=rr(Ie,h?D:b,F),be=se(g.cameraToCenterDistance,oe.signedDistanceFromCamera),Ee=s.ai(y.textSizeData,I,J)*be/s.ao;h&&(Ee*=y.tilePixelRatio/T);let{width:ke,height:Fe,anchor:Ze,textOffset:Ge,textBoxScale:ot}=pe,pt=Qg(Ze,ke,Fe,Ge,ot,Ee),cn=h?rr(Ie.add(pt),b,F).point:oe.point.add(o?pt.rotate(-g.angle):pt),gt=y.allowVerticalPlacement&&J.placedOrientation===s.ah.vertical?Math.PI/2:0;for(let Kt=0;Kt<J.numGlyphs;Kt++)s.aj(q,cn,gt);P&&J.associatedIconIndex>=0&&(ne[J.associatedIconIndex]={shiftedAnchor:cn,angle:gt})}else $e(J.numGlyphs,q)}if(P){ie.clear();let ae=y.icon.placedSymbolArray;for(let J=0;J<ae.length;J++){let pe=ae.get(J);if(pe.hidden)$e(pe.numGlyphs,ie);else{let Ie=ne[J];if(Ie)for(let oe=0;oe<pe.numGlyphs;oe++)s.aj(ie,Ie.shiftedAnchor,Ie.angle);else $e(pe.numGlyphs,ie)}}y.icon.dynamicLayoutVertexBuffer.updateData(ie)}y.text.dynamicLayoutVertexBuffer.updateData(q)}function Sd(y,o,h){return h.iconsInText&&o?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Od(y,o,h,m,g,b,D,T,I,P,F,N){let q=y.context,ie=q.gl,ne=y.transform,ae=T==="map",J=I==="map",pe=T!=="viewport"&&h.layout.get("symbol-placement")!=="point",Ie=ae&&!J&&!pe,oe=!h.layout.get("symbol-sort-key").isConstant(),be=!1,Ee=y.depthModeForSublayer(0,jn.ReadOnly),ke=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Fe=[];for(let Ze of m){let Ge=o.getTile(Ze),ot=Ge.getBucket(h);if(!ot)continue;let pt=g?ot.text:ot.icon;if(!pt||!pt.segments.get().length||!pt.hasVisibleVertices)continue;let cn=pt.programConfigurations.get(h.id),gt=g||ot.sdfIcons,Kt=g?ot.textSizeData:ot.iconSizeData,ln=J||ne.pitch!==0,Vn=y.useProgram(Sd(gt,g,ot),cn),Xt=s.ag(Kt,ne.zoom),fn=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ze),wn,Ai,Jn,Ds,ar=[0,0],Mi=null;if(g)Ai=Ge.glyphAtlasTexture,Jn=ie.LINEAR,wn=Ge.glyphAtlasTexture.size,ot.iconsInText&&(ar=Ge.imageAtlasTexture.size,Mi=Ge.imageAtlasTexture,Ds=ln||y.options.rotating||y.options.zooming||Kt.kind==="composite"||Kt.kind==="camera"?ie.LINEAR:ie.NEAREST);else{let er=h.layout.get("icon-size").constantOr(0)!==1||ot.iconsNeedLinear;Ai=Ge.imageAtlasTexture,Jn=gt||y.options.rotating||y.options.zooming||er||ln?ie.LINEAR:ie.NEAREST,wn=Ge.imageAtlasTexture.size}let or=en(Ge,1,y.transform.zoom),Ts=an(Ze.posMatrix,J,ae,y.transform,or),Ma=nc(Ze.posMatrix,J,ae,y.transform,or),Po=ke&&ot.hasTextData(),fu=h.layout.get("icon-text-fit")!=="none"&&Po&&ot.hasIconData();if(pe){let er=y.style.map.terrain?(Hs,tr)=>y.style.map.terrain.getElevation(Ze,Hs,tr):null,Ti=h.layout.get("text-rotation-alignment")==="map";z(ot,Ze.posMatrix,y,g,Ts,Ma,J,P,Ti,er)}let ko=y.translatePosMatrix(Ze.posMatrix,Ge,b,D),Da=pe||g&&ke||fu?Qp:Ts,Xi=y.translatePosMatrix(Ma,Ge,b,D,!0),Di=gt&&h.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0,_i;_i=gt?ot.iconsInText?eu(Kt.kind,Xt,Ie,J,y,ko,Da,Xi,wn,ar):Xl(Kt.kind,Xt,Ie,J,y,ko,Da,Xi,g,wn,!0):Jl(Kt.kind,Xt,Ie,J,y,ko,Da,Xi,g,wn);let $s={program:Vn,buffers:pt,uniformValues:_i,atlasTexture:Ai,atlasTextureIcon:Mi,atlasInterpolation:Jn,atlasInterpolationIcon:Ds,isSDF:gt,hasHalo:Di};if(oe&&ot.canOverlap){be=!0;let er=pt.segments.get();for(let Ti of er)Fe.push({segments:new s.$([Ti]),sortKey:Ti.sortKey,state:$s,terrainData:fn})}else Fe.push({segments:pt.segments,sortKey:0,state:$s,terrainData:fn})}be&&Fe.sort((Ze,Ge)=>Ze.sortKey-Ge.sortKey);for(let Ze of Fe){let Ge=Ze.state;if(q.activeTexture.set(ie.TEXTURE0),Ge.atlasTexture.bind(Ge.atlasInterpolation,ie.CLAMP_TO_EDGE),Ge.atlasTextureIcon&&(q.activeTexture.set(ie.TEXTURE1),Ge.atlasTextureIcon&&Ge.atlasTextureIcon.bind(Ge.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),Ge.isSDF){let ot=Ge.uniformValues;Ge.hasHalo&&(ot.u_is_halo=1,Jg(Ge.buffers,Ze.segments,h,y,Ge.program,Ee,F,N,ot,Ze.terrainData)),ot.u_is_halo=0}Jg(Ge.buffers,Ze.segments,h,y,Ge.program,Ee,F,N,Ge.uniformValues,Ze.terrainData)}}function Jg(y,o,h,m,g,b,D,T,I,P){let F=m.context;g.draw(F,F.gl.TRIANGLES,b,D,T,ii.disabled,I,P,h.id,y.layoutVertexBuffer,y.indexBuffer,o,h.paint,m.transform.zoom,y.programConfigurations.get(h.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Id(y,o,h,m,g){if(!h||!m||!m.imageAtlas)return;let b=m.imageAtlas.patternPositions,D=b[h.to.toString()],T=b[h.from.toString()];if(!D&&T&&(D=T),!T&&D&&(T=D),!D||!T){let I=g.getPaintProperty(o);D=b[I],T=b[I]}D&&T&&y.setConstantPatternPositions(D,T)}function Xg(y,o,h,m,g,b,D){let T=y.context.gl,I="fill-pattern",P=h.paint.get(I),F=P&&P.constantOr(1),N=h.getCrossfadeParameters(),q,ie,ne,ae,J;D?(ie=F&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",q=T.LINES):(ie=F?"fillPattern":"fill",q=T.TRIANGLES);let pe=P.constantOr(null);for(let Ie of m){let oe=o.getTile(Ie);if(F&&!oe.patternsLoaded())continue;let be=oe.getBucket(h);if(!be)continue;let Ee=be.programConfigurations.get(h.id),ke=y.useProgram(ie,Ee),Fe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ie);F&&(y.context.activeTexture.set(T.TEXTURE0),oe.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),Ee.updatePaintBuffers(N)),Id(Ee,I,pe,oe,h);let Ze=Fe?Ie:null,Ge=y.translatePosMatrix(Ze?Ze.posMatrix:Ie.posMatrix,oe,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(D){ae=be.indexBuffer2,J=be.segments2;let ot=[T.drawingBufferWidth,T.drawingBufferHeight];ne=ie==="fillOutlinePattern"&&F?Ng(Ge,y,N,oe,ot):Ib(Ge,ot)}else ae=be.indexBuffer,J=be.segments,ne=F?pd(Ge,y,N,oe):Lg(Ge);ke.draw(y.context,q,g,y.stencilModeForClipping(Ie),b,ii.disabled,ne,Fe,h.id,be.layoutVertexBuffer,ae,J,h.paint,y.transform.zoom,Ee)}}function Ed(y,o,h,m,g,b,D){let T=y.context,I=T.gl,P="fill-extrusion-pattern",F=h.paint.get(P),N=F.constantOr(1),q=h.getCrossfadeParameters(),ie=h.paint.get("fill-extrusion-opacity"),ne=F.constantOr(null);for(let ae of m){let J=o.getTile(ae),pe=J.getBucket(h);if(!pe)continue;let Ie=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ae),oe=pe.programConfigurations.get(h.id),be=y.useProgram(N?"fillExtrusionPattern":"fillExtrusion",oe);N&&(y.context.activeTexture.set(I.TEXTURE0),J.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),oe.updatePaintBuffers(q)),Id(oe,P,ne,J,h);let Ee=y.translatePosMatrix(ae.posMatrix,J,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),ke=h.paint.get("fill-extrusion-vertical-gradient"),Fe=N?Ob(Ee,y,ke,ie,ae,q,J):Yl(Ee,y,ke,ie);be.draw(T,T.gl.TRIANGLES,g,b,D,ii.backCCW,Fe,Ie,h.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,h.paint,y.transform.zoom,oe,y.style.map.terrain&&pe.centroidVertexBuffer)}}function Pd(y,o,h,m,g,b,D){let T=y.context,I=T.gl,P=h.fbo;if(!P)return;let F=y.useProgram("hillshade"),N=y.style.map.terrain&&y.style.map.terrain.getTerrainData(o);T.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,P.colorAttachment.get()),F.draw(T,I.TRIANGLES,g,b,D,ii.disabled,((q,ie,ne,ae)=>{let J=ne.paint.get("hillshade-shadow-color"),pe=ne.paint.get("hillshade-highlight-color"),Ie=ne.paint.get("hillshade-accent-color"),oe=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);ne.paint.get("hillshade-illumination-anchor")==="viewport"&&(oe-=q.transform.angle);let be=!q.options.moving;return{u_matrix:ae?ae.posMatrix:q.transform.calculatePosMatrix(ie.tileID.toUnwrapped(),be),u_image:0,u_latrange:zg(0,ie.tileID),u_light:[ne.paint.get("hillshade-exaggeration"),oe],u_shadow:J,u_highlight:pe,u_accent:Ie}})(y,h,m,N?o:null),N,m.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Jp(y,o,h,m,g,b){let D=y.context,T=D.gl,I=o.dem;if(I&&I.data){let P=I.dim,F=I.stride,N=I.getPixels();if(D.activeTexture.set(T.TEXTURE1),D.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||y.getTileTexture(F),o.demTexture){let ie=o.demTexture;ie.update(N,{premultiply:!1}),ie.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else o.demTexture=new rt(D,N,T.RGBA,{premultiply:!1}),o.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);D.activeTexture.set(T.TEXTURE0);let q=o.fbo;if(!q){let ie=new rt(D,{width:P,height:P,data:null},T.RGBA);ie.bind(T.LINEAR,T.CLAMP_TO_EDGE),q=o.fbo=D.createFramebuffer(P,P,!0,!1),q.colorAttachment.set(ie.texture)}D.bindFramebuffer.set(q.framebuffer),D.viewport.set([0,0,P,P]),y.useProgram("hillshadePrepare").draw(D,T.TRIANGLES,m,g,b,ii.disabled,((ie,ne)=>{let ae=ne.stride,J=s.F();return s.aN(J,0,s.W,-s.W,0,0,1),s.H(J,J,[0,-s.W,0]),{u_matrix:J,u_image:1,u_dimension:[ae,ae],u_zoom:ie.overscaledZ,u_unpack:ne.getUnpackVector()}})(o.tileID,I),null,h.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function e_(y,o,h,m,g,b){let D=m.paint.get("raster-fade-duration");if(!b&&D>0){let T=v.now(),I=(T-y.timeAdded)/D,P=o?(T-o.timeAdded)/D:-1,F=h.getSource(),N=g.coveringZoomLevel({tileSize:F.tileSize,roundZoom:F.roundZoom}),q=!o||Math.abs(o.tileID.overscaledZ-N)>Math.abs(y.tileID.overscaledZ-N),ie=q&&y.refreshedUponExpiration?1:s.ac(q?I:1-P,0,1);return y.refreshedUponExpiration&&I>=1&&(y.refreshedUponExpiration=!1),o?{opacity:1,mix:1-ie}:{opacity:ie,mix:0}}return{opacity:1,mix:0}}let t_=new s.aO(1,0,0,1),kd=new s.aO(0,1,0,1),Xp=new s.aO(0,0,1,1),Ub=new s.aO(1,0,1,1),n_=new s.aO(0,1,1,1);function Pi(y,o,h,m){$r(y,0,o+h/2,y.transform.width,h,m)}function So(y,o,h,m){$r(y,o-h/2,0,h,y.transform.height,m)}function $r(y,o,h,m,g,b){let D=y.context,T=D.gl;T.enable(T.SCISSOR_TEST),T.scissor(o*y.pixelRatio,h*y.pixelRatio,m*y.pixelRatio,g*y.pixelRatio),D.clear({color:b}),T.disable(T.SCISSOR_TEST)}function ef(y,o,h){let m=y.context,g=m.gl,b=h.posMatrix,D=y.useProgram("debug"),T=jn.disabled,I=ai.disabled,P=y.colorModeForRenderPass(),F="$debug",N=y.style.map.terrain&&y.style.map.terrain.getTerrainData(h);m.activeTexture.set(g.TEXTURE0);let q=o.getTileByID(h.key).latestRawTileData,ie=Math.floor((q&&q.byteLength||0)/1024),ne=o.getTile(h).tileSize,ae=512/Math.min(ne,512)*(h.overscaledZ/y.transform.zoom)*.5,J=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(J+=` => ${h.overscaledZ}`),function(pe,Ie){pe.initDebugOverlayCanvas();let oe=pe.debugOverlayCanvas,be=pe.context.gl,Ee=pe.debugOverlayCanvas.getContext("2d");Ee.clearRect(0,0,oe.width,oe.height),Ee.shadowColor="white",Ee.shadowBlur=2,Ee.lineWidth=1.5,Ee.strokeStyle="white",Ee.textBaseline="top",Ee.font="bold 36px Open Sans, sans-serif",Ee.fillText(Ie,5,5),Ee.strokeText(Ie,5,5),pe.debugOverlayTexture.update(oe),pe.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)}(y,`${J} ${ie}kB`),D.draw(m,g.TRIANGLES,T,I,Hi.alphaBlended,ii.disabled,jg(b,s.aO.transparent,ae),null,F,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),D.draw(m,g.LINE_STRIP,T,I,P,ii.disabled,jg(b,s.aO.red),N,F,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Ad(y,o,h){let m=y.context,g=m.gl,b=y.colorModeForRenderPass(),D=new jn(g.LEQUAL,jn.ReadWrite,y.depthRangeFor3D),T=y.useProgram("terrain"),I=o.getTerrainMesh();m.bindFramebuffer.set(null),m.viewport.set([0,0,y.width,y.height]);for(let P of h){let F=y.renderToTexture.getTexture(P),N=o.getTerrainData(P.tileID);m.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,F.texture);let q={u_matrix:y.transform.calculatePosMatrix(P.tileID.toUnwrapped()),u_texture:0,u_ele_delta:o.getMeshFrameDelta(y.transform.zoom)};T.draw(m,g.TRIANGLES,D,ai.disabled,b,ii.backCCW,q,N,"terrain",I.vertexBuffer,I.indexBuffer,I.segments)}}class i_{constructor(o,h){this.context=new zb(o),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ir.maxUnderzooming+Ir.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Do}resize(o,h,m){if(this.width=Math.floor(o*m),this.height=Math.floor(h*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let g of this.style._order)this.style._layers[g].resize()}setup(){let o=this.context,h=new s.aV;h.emplaceBack(0,0),h.emplaceBack(s.W,0),h.emplaceBack(0,s.W),h.emplaceBack(s.W,s.W),this.tileExtentBuffer=o.createVertexBuffer(h,ud.members),this.tileExtentSegments=s.$.simpleSegment(0,0,4,2);let m=new s.aV;m.emplaceBack(0,0),m.emplaceBack(s.W,0),m.emplaceBack(0,s.W),m.emplaceBack(s.W,s.W),this.debugBuffer=o.createVertexBuffer(m,ud.members),this.debugSegments=s.$.simpleSegment(0,0,4,5);let g=new s.Z;g.emplaceBack(0,0,0,0),g.emplaceBack(s.W,0,s.W,0),g.emplaceBack(0,s.W,0,s.W),g.emplaceBack(s.W,s.W,s.W,s.W),this.rasterBoundsBuffer=o.createVertexBuffer(g,Cn.members),this.rasterBoundsSegments=s.$.simpleSegment(0,0,4,2);let b=new s.aV;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(b,ud.members),this.viewportSegments=s.$.simpleSegment(0,0,4,2);let D=new s.aW;D.emplaceBack(0),D.emplaceBack(1),D.emplaceBack(3),D.emplaceBack(2),D.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(D);let T=new s.aX;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(T);let I=this.context.gl;this.stencilClearMode=new ai({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){let o=this.context,h=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let m=s.F();s.aN(m,0,this.width,this.height,0,0,1),s.J(m,m,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,h.TRIANGLES,jn.disabled,this.stencilClearMode,Hi.disabled,ii.disabled,fd(m),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,h){if(this.currentStencilSource===o.source||!o.isTileClipped()||!h||!h.length)return;this.currentStencilSource=o.source;let m=this.context,g=m.gl;this.nextStencilID+h.length>256&&this.clearStencil(),m.setColorMode(Hi.disabled),m.setDepthMode(jn.disabled);let b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let D of h){let T=this._tileClippingMaskIDs[D.key]=this.nextStencilID++,I=this.style.map.terrain&&this.style.map.terrain.getTerrainData(D);b.draw(m,g.TRIANGLES,jn.disabled,new ai({func:g.ALWAYS,mask:0},T,255,g.KEEP,g.KEEP,g.REPLACE),Hi.disabled,ii.disabled,fd(D.posMatrix),I,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let o=this.nextStencilID++,h=this.context.gl;return new ai({func:h.NOTEQUAL,mask:255},o,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(o){let h=this.context.gl;return new ai({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(o){let h=this.context.gl,m=o.sort((D,T)=>T.overscaledZ-D.overscaledZ),g=m[m.length-1].overscaledZ,b=m[0].overscaledZ-g+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();let D={};for(let T=0;T<b;T++)D[T+g]=new ai({func:h.GEQUAL,mask:255},T+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=b,[D,m]}return[{[g]:ai.disabled},m]}colorModeForRenderPass(){let o=this.context.gl;return this._showOverdrawInspector?new Hi([o.CONSTANT_COLOR,o.ONE],new s.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Hi.unblended:Hi.alphaBlended}depthModeForSublayer(o,h,m){if(!this.opaquePassEnabledForLayer())return jn.disabled;let g=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new jn(m||this.context.gl.LEQUAL,h,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,h){this.style=o,this.options=h,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(v.now()),this.imageManager.beginFrame();let m=this.style._order,g=this.style.sourceCaches,b={},D={},T={};for(let I in g){let P=g[I];P.used&&P.prepare(this.context),b[I]=P.getVisibleCoordinates(),D[I]=b[I].slice().reverse(),T[I]=P.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<m.length;I++)if(this.style._layers[m[I]].is3D()){this.opaquePassCutoff=I;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let I of m){let P=this.style._layers[I];if(!P.hasOffscreenPass()||P.isHidden(this.transform.zoom))continue;let F=D[P.source];(P.type==="custom"||F.length)&&this.renderLayer(this,g[P.source],P,F)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?s.aO.black:s.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){let I=this.style._layers[m[this.currentLayer]],P=g[I.source],F=b[I.source];this._renderTileClippingMasks(I,F),this.renderLayer(this,P,I,F)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){let I=this.style._layers[m[this.currentLayer]],P=g[I.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(I))continue;let F=(I.type==="symbol"?T:D)[I.source];this._renderTileClippingMasks(I,b[I.source]),this.renderLayer(this,P,I,F)}if(this.options.showTileBoundaries){let I=function(P,F){let N=null,q=Object.values(P._layers).flatMap(J=>J.source&&!J.isHidden(F)?[P.sourceCaches[J.source]]:[]),ie=q.filter(J=>J.getSource().type==="vector"),ne=q.filter(J=>J.getSource().type!=="vector"),ae=J=>{(!N||N.getSource().maxzoom<J.getSource().maxzoom)&&(N=J)};return ie.forEach(J=>ae(J)),N||ne.forEach(J=>ae(J)),N}(this.style,this.transform.zoom);I&&function(P,F,N){for(let q=0;q<N.length;q++)ef(P,F,N[q])}(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){let P=I.transform.padding;Pi(I,I.transform.height-(P.top||0),3,t_),Pi(I,P.bottom||0,3,kd),So(I,P.left||0,3,Xp),So(I,I.transform.width-(P.right||0),3,Ub);let F=I.transform.centerPoint;(function(N,q,ie,ne){$r(N,q-1,ie-10,2,20,ne),$r(N,q-10,ie-1,20,2,ne)})(I,F.x,I.transform.height-F.y,n_)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(o){if(!this.style||!this.style.map||!this.style.map.terrain)return;let h=this.terrainFacilitator.matrix,m=this.transform.projMatrix,g=this.terrainFacilitator.dirty;g||(g=o?!s.aY(h,m):!s.aZ(h,m)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(s.a_(h,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(b,D){let T=b.context,I=T.gl,P=Hi.unblended,F=new jn(I.LEQUAL,jn.ReadWrite,[0,1]),N=D.getTerrainMesh(),q=D.sourceCache.getRenderableTiles(),ie=b.useProgram("terrainDepth");T.bindFramebuffer.set(D.getFramebuffer("depth").framebuffer),T.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),T.clear({color:s.aO.transparent,depth:1});for(let ne of q){let ae=D.getTerrainData(ne.tileID),J={u_matrix:b.transform.calculatePosMatrix(ne.tileID.toUnwrapped()),u_ele_delta:D.getMeshFrameDelta(b.transform.zoom)};ie.draw(T,I.TRIANGLES,F,ai.disabled,P,ii.backCCW,J,ae,"terrain",N.vertexBuffer,N.indexBuffer,N.segments)}T.bindFramebuffer.set(null),T.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain),function(b,D){let T=b.context,I=T.gl,P=Hi.unblended,F=new jn(I.LEQUAL,jn.ReadWrite,[0,1]),N=D.getTerrainMesh(),q=D.getCoordsTexture(),ie=D.sourceCache.getRenderableTiles(),ne=b.useProgram("terrainCoords");T.bindFramebuffer.set(D.getFramebuffer("coords").framebuffer),T.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),T.clear({color:s.aO.transparent,depth:1}),D.coordsIndex=[];for(let ae of ie){let J=D.getTerrainData(ae.tileID);T.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,q.texture);let pe={u_matrix:b.transform.calculatePosMatrix(ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-D.coordsIndex.length)/255,u_texture:0,u_ele_delta:D.getMeshFrameDelta(b.transform.zoom)};ne.draw(T,I.TRIANGLES,F,ai.disabled,P,ii.backCCW,pe,J,"terrain",N.vertexBuffer,N.indexBuffer,N.segments),D.coordsIndex.push(ae.tileID.key)}T.bindFramebuffer.set(null),T.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain))}renderLayer(o,h,m,g){if(!m.isHidden(this.transform.zoom)&&(m.type==="background"||m.type==="custom"||(g||[]).length))switch(this.id=m.id,m.type){case"symbol":(function(b,D,T,I,P){if(b.renderPass!=="translucent")return;let F=ai.disabled,N=b.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(q,ie,ne,ae,J,pe,Ie){let oe=ie.transform,be=J==="map",Ee=pe==="map";for(let ke of q){let Fe=ae.getTile(ke),Ze=Fe.getBucket(ne);if(!Ze||!Ze.text||!Ze.text.segments.get().length)continue;let Ge=s.ag(Ze.textSizeData,oe.zoom),ot=en(Fe,1,ie.transform.zoom),pt=an(ke.posMatrix,Ee,be,ie.transform,ot),cn=ne.layout.get("icon-text-fit")!=="none"&&Ze.hasIconData();if(Ge){let gt=Math.pow(2,oe.zoom-Fe.tileID.overscaledZ);Td(Ze,be,Ee,Ie,oe,pt,ke.posMatrix,gt,Ge,cn,ie.style.map.terrain?(Kt,ln)=>ie.style.map.terrain.getElevation(ke,Kt,ln):null)}}}(I,b,T,D,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),P),T.paint.get("icon-opacity").constantOr(1)!==0&&Od(b,D,T,I,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),F,N),T.paint.get("text-opacity").constantOr(1)!==0&&Od(b,D,T,I,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),F,N),D.map.showCollisionBoxes&&(Dd(b,D,T,I,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),!0),Dd(b,D,T,I,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),!1))})(o,h,m,g,this.style.placement.variableOffsets);break;case"circle":(function(b,D,T,I){if(b.renderPass!=="translucent")return;let P=T.paint.get("circle-opacity"),F=T.paint.get("circle-stroke-width"),N=T.paint.get("circle-stroke-opacity"),q=!T.layout.get("circle-sort-key").isConstant();if(P.constantOr(1)===0&&(F.constantOr(1)===0||N.constantOr(1)===0))return;let ie=b.context,ne=ie.gl,ae=b.depthModeForSublayer(0,jn.ReadOnly),J=ai.disabled,pe=b.colorModeForRenderPass(),Ie=[];for(let oe=0;oe<I.length;oe++){let be=I[oe],Ee=D.getTile(be),ke=Ee.getBucket(T);if(!ke)continue;let Fe=ke.programConfigurations.get(T.id),Ze=b.useProgram("circle",Fe),Ge=ke.layoutVertexBuffer,ot=ke.indexBuffer,pt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(be),cn={programConfiguration:Fe,program:Ze,layoutVertexBuffer:Ge,indexBuffer:ot,uniformValues:Eb(b,be,Ee,T),terrainData:pt};if(q){let gt=ke.segments.get();for(let Kt of gt)Ie.push({segments:new s.$([Kt]),sortKey:Kt.sortKey,state:cn})}else Ie.push({segments:ke.segments,sortKey:0,state:cn})}q&&Ie.sort((oe,be)=>oe.sortKey-be.sortKey);for(let oe of Ie){let{programConfiguration:be,program:Ee,layoutVertexBuffer:ke,indexBuffer:Fe,uniformValues:Ze,terrainData:Ge}=oe.state;Ee.draw(ie,ne.TRIANGLES,ae,J,pe,ii.disabled,Ze,Ge,T.id,ke,Fe,oe.segments,T.paint,b.transform.zoom,be)}})(o,h,m,g);break;case"heatmap":(function(b,D,T,I){if(T.paint.get("heatmap-opacity")!==0)if(b.renderPass==="offscreen"){let P=b.context,F=P.gl,N=ai.disabled,q=new Hi([F.ONE,F.ONE],s.aO.transparent,[!0,!0,!0,!0]);(function(ie,ne,ae){let J=ie.gl;ie.activeTexture.set(J.TEXTURE1),ie.viewport.set([0,0,ne.width/4,ne.height/4]);let pe=ae.heatmapFbo;if(pe)J.bindTexture(J.TEXTURE_2D,pe.colorAttachment.get()),ie.bindFramebuffer.set(pe.framebuffer);else{let Ie=J.createTexture();J.bindTexture(J.TEXTURE_2D,Ie),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),pe=ae.heatmapFbo=ie.createFramebuffer(ne.width/4,ne.height/4,!1,!1),function(oe,be,Ee,ke){var Fe,Ze;let Ge=oe.gl,ot=(Fe=oe.HALF_FLOAT)!==null&&Fe!==void 0?Fe:Ge.UNSIGNED_BYTE,pt=(Ze=oe.RGBA16F)!==null&&Ze!==void 0?Ze:Ge.RGBA;Ge.texImage2D(Ge.TEXTURE_2D,0,pt,be.width/4,be.height/4,0,Ge.RGBA,ot,null),ke.colorAttachment.set(Ee)}(ie,ne,Ie,pe)}})(P,b,T),P.clear({color:s.aO.transparent});for(let ie=0;ie<I.length;ie++){let ne=I[ie];if(D.hasRenderableParent(ne))continue;let ae=D.getTile(ne),J=ae.getBucket(T);if(!J)continue;let pe=J.programConfigurations.get(T.id),Ie=b.useProgram("heatmap",pe),{zoom:oe}=b.transform;Ie.draw(P,F.TRIANGLES,jn.disabled,N,q,ii.disabled,Vg(ne.posMatrix,ae,oe,T.paint.get("heatmap-intensity")),null,T.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,T.paint,b.transform.zoom,pe)}P.viewport.set([0,0,b.width,b.height])}else b.renderPass==="translucent"&&(b.context.setColorMode(b.colorModeForRenderPass()),function(P,F){let N=P.context,q=N.gl,ie=F.heatmapFbo;if(!ie)return;N.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,ie.colorAttachment.get()),N.activeTexture.set(q.TEXTURE1);let ne=F.colorRampTexture;ne||(ne=F.colorRampTexture=new rt(N,F.colorRamp,q.RGBA)),ne.bind(q.LINEAR,q.CLAMP_TO_EDGE),P.useProgram("heatmapTexture").draw(N,q.TRIANGLES,jn.disabled,ai.disabled,P.colorModeForRenderPass(),ii.disabled,((ae,J,pe,Ie)=>{let oe=s.F();s.aN(oe,0,ae.width,ae.height,0,0,1);let be=ae.context.gl;return{u_matrix:oe,u_world:[be.drawingBufferWidth,be.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:J.paint.get("heatmap-opacity")}})(P,F),null,F.id,P.viewportBuffer,P.quadTriangleIndexBuffer,P.viewportSegments,F.paint,P.transform.zoom)}(b,T))})(o,h,m,g);break;case"line":(function(b,D,T,I){if(b.renderPass!=="translucent")return;let P=T.paint.get("line-opacity"),F=T.paint.get("line-width");if(P.constantOr(1)===0||F.constantOr(1)===0)return;let N=b.depthModeForSublayer(0,jn.ReadOnly),q=b.colorModeForRenderPass(),ie=T.paint.get("line-dasharray"),ne=T.paint.get("line-pattern"),ae=ne.constantOr(1),J=T.paint.get("line-gradient"),pe=T.getCrossfadeParameters(),Ie=ae?"linePattern":ie?"lineSDF":J?"lineGradient":"line",oe=b.context,be=oe.gl,Ee=!0;for(let ke of I){let Fe=D.getTile(ke);if(ae&&!Fe.patternsLoaded())continue;let Ze=Fe.getBucket(T);if(!Ze)continue;let Ge=Ze.programConfigurations.get(T.id),ot=b.context.program.get(),pt=b.useProgram(Ie,Ge),cn=Ee||pt.program!==ot,gt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ke),Kt=ne.constantOr(null);if(Kt&&Fe.imageAtlas){let Xt=Fe.imageAtlas,fn=Xt.patternPositions[Kt.to.toString()],wn=Xt.patternPositions[Kt.from.toString()];fn&&wn&&Ge.setConstantPatternPositions(fn,wn)}let ln=gt?ke:null,Vn=ae?ic(b,Fe,T,pe,ln):ie?gd(b,Fe,T,ie,pe,ln):J?Ug(b,Fe,T,Ze.lineClipsArray.length,ln):md(b,Fe,T,ln);if(ae)oe.activeTexture.set(be.TEXTURE0),Fe.imageAtlasTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE),Ge.updatePaintBuffers(pe);else if(ie&&(cn||b.lineAtlas.dirty))oe.activeTexture.set(be.TEXTURE0),b.lineAtlas.bind(oe);else if(J){let Xt=Ze.gradients[T.id],fn=Xt.texture;if(T.gradientVersion!==Xt.version){let wn=256;if(T.stepInterpolant){let Ai=D.getSource().maxzoom,Jn=ke.canonical.z===Ai?Math.ceil(1<<b.transform.maxZoom-ke.canonical.z):1;wn=s.ac(s.aT(Ze.maxLineLength/s.W*1024*Jn),256,oe.maxTextureSize)}Xt.gradient=s.aU({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:wn,image:Xt.gradient||void 0,clips:Ze.lineClipsArray}),Xt.texture?Xt.texture.update(Xt.gradient):Xt.texture=new rt(oe,Xt.gradient,be.RGBA),Xt.version=T.gradientVersion,fn=Xt.texture}oe.activeTexture.set(be.TEXTURE0),fn.bind(T.stepInterpolant?be.NEAREST:be.LINEAR,be.CLAMP_TO_EDGE)}pt.draw(oe,be.TRIANGLES,N,b.stencilModeForClipping(ke),q,ii.disabled,Vn,gt,T.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,T.paint,b.transform.zoom,Ge,Ze.layoutVertexBuffer2),Ee=!1}})(o,h,m,g);break;case"fill":(function(b,D,T,I){let P=T.paint.get("fill-color"),F=T.paint.get("fill-opacity");if(F.constantOr(1)===0)return;let N=b.colorModeForRenderPass(),q=T.paint.get("fill-pattern"),ie=b.opaquePassEnabledForLayer()&&!q.constantOr(1)&&P.constantOr(s.aO.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===ie){let ne=b.depthModeForSublayer(1,b.renderPass==="opaque"?jn.ReadWrite:jn.ReadOnly);Xg(b,D,T,I,ne,N,!1)}if(b.renderPass==="translucent"&&T.paint.get("fill-antialias")){let ne=b.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,jn.ReadOnly);Xg(b,D,T,I,ne,N,!0)}})(o,h,m,g);break;case"fill-extrusion":(function(b,D,T,I){let P=T.paint.get("fill-extrusion-opacity");if(P!==0&&b.renderPass==="translucent"){let F=new jn(b.context.gl.LEQUAL,jn.ReadWrite,b.depthRangeFor3D);if(P!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))Ed(b,D,T,I,F,ai.disabled,Hi.disabled),Ed(b,D,T,I,F,b.stencilModeFor3D(),b.colorModeForRenderPass());else{let N=b.colorModeForRenderPass();Ed(b,D,T,I,F,ai.disabled,N)}}})(o,h,m,g);break;case"hillshade":(function(b,D,T,I){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;let P=b.context,F=b.depthModeForSublayer(0,jn.ReadOnly),N=b.colorModeForRenderPass(),[q,ie]=b.renderPass==="translucent"?b.stencilConfigForOverlap(I):[{},I];for(let ne of ie){let ae=D.getTile(ne);ae.needsHillshadePrepare!==void 0&&ae.needsHillshadePrepare&&b.renderPass==="offscreen"?Jp(b,ae,T,F,ai.disabled,N):b.renderPass==="translucent"&&Pd(b,ne,ae,T,F,q[ne.overscaledZ],N)}P.viewport.set([0,0,b.width,b.height])})(o,h,m,g);break;case"raster":(function(b,D,T,I){if(b.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!I.length)return;let P=b.context,F=P.gl,N=D.getSource(),q=b.useProgram("raster"),ie=b.colorModeForRenderPass(),[ne,ae]=N instanceof $i?[{},I]:b.stencilConfigForOverlap(I),J=ae[ae.length-1].overscaledZ,pe=!b.options.moving;for(let Ie of ae){let oe=b.depthModeForSublayer(Ie.overscaledZ-J,T.paint.get("raster-opacity")===1?jn.ReadWrite:jn.ReadOnly,F.LESS),be=D.getTile(Ie);be.registerFadeDuration(T.paint.get("raster-fade-duration"));let Ee=D.findLoadedParent(Ie,0),ke=e_(be,Ee,D,T,b.transform,b.style.map.terrain),Fe,Ze,Ge=T.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;P.activeTexture.set(F.TEXTURE0),be.texture.bind(Ge,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),P.activeTexture.set(F.TEXTURE1),Ee?(Ee.texture.bind(Ge,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),Fe=Math.pow(2,Ee.tileID.overscaledZ-be.tileID.overscaledZ),Ze=[be.tileID.canonical.x*Fe%1,be.tileID.canonical.y*Fe%1]):be.texture.bind(Ge,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST);let ot=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ie),pt=ot?Ie:null,cn=pt?pt.posMatrix:b.transform.calculatePosMatrix(Ie.toUnwrapped(),pe),gt=_d(cn,Ze||[0,0],Fe||1,ke,T);N instanceof $i?q.draw(P,F.TRIANGLES,oe,ai.disabled,ie,ii.disabled,gt,ot,T.id,N.boundsBuffer,b.quadTriangleIndexBuffer,N.boundsSegments):q.draw(P,F.TRIANGLES,oe,ne[Ie.overscaledZ],ie,ii.disabled,gt,ot,T.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}})(o,h,m,g);break;case"background":(function(b,D,T,I){let P=T.paint.get("background-color"),F=T.paint.get("background-opacity");if(F===0)return;let N=b.context,q=N.gl,ie=b.transform,ne=ie.tileSize,ae=T.paint.get("background-pattern");if(b.isPatternMissing(ae))return;let J=!ae&&P.a===1&&F===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==J)return;let pe=ai.disabled,Ie=b.depthModeForSublayer(0,J==="opaque"?jn.ReadWrite:jn.ReadOnly),oe=b.colorModeForRenderPass(),be=b.useProgram(ae?"backgroundPattern":"background"),Ee=I||ie.coveringTiles({tileSize:ne,terrain:b.style.map.terrain});ae&&(N.activeTexture.set(q.TEXTURE0),b.imageManager.bind(b.context));let ke=T.getCrossfadeParameters();for(let Fe of Ee){let Ze=I?Fe.posMatrix:b.transform.calculatePosMatrix(Fe.toUnwrapped()),Ge=ae?kb(Ze,F,b,ae,{tileID:Fe,tileSize:ne},ke):Pb(Ze,F,P),ot=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Fe);be.draw(N,q.TRIANGLES,Ie,pe,oe,ii.disabled,Ge,ot,T.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}})(o,0,m,g);break;case"custom":(function(b,D,T){let I=b.context,P=T.implementation;if(b.renderPass==="offscreen"){let F=P.prerender;F&&(b.setCustomLayerDefaults(),I.setColorMode(b.colorModeForRenderPass()),F.call(P,I.gl,b.transform.customLayerMatrix()),I.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),I.setColorMode(b.colorModeForRenderPass()),I.setStencilMode(ai.disabled);let F=P.renderingMode==="3d"?new jn(b.context.gl.LEQUAL,jn.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,jn.ReadOnly);I.setDepthMode(F),P.render(I.gl,b.transform.customLayerMatrix()),I.setDirty(),b.setBaseState(),I.bindFramebuffer.set(null)}})(o,0,m)}}translatePosMatrix(o,h,m,g,b){if(!m[0]&&!m[1])return o;let D=b?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(D){let P=Math.sin(D),F=Math.cos(D);m=[m[0]*F-m[1]*P,m[0]*P+m[1]*F]}let T=[b?m[0]:en(h,m[0],this.transform.zoom),b?m[1]:en(h,m[1],this.transform.zoom),0],I=new Float32Array(16);return s.H(I,o,T),I}saveTileTexture(o){let h=this._tileTextures[o.size[0]];h?h.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){let h=this._tileTextures[o];return h&&h.length>0?h.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;let h=this.imageManager.getPattern(o.from.toString()),m=this.imageManager.getPattern(o.to.toString());return!h||!m}useProgram(o,h){this.cache=this.cache||{};let m=o+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[m]||(this.cache[m]=new To(this.context,Zl[o],h,$g[o],this._showOverdrawInspector,this.style.map.terrain)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new rt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:o,drawingBufferHeight:h}=this.context.gl;return this.width!==o||this.height!==h}}class Oo{constructor(o,h){this.points=o,this.planes=h}static fromInvProjectionMatrix(o,h,m){let g=Math.pow(2,m),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{let I=1/(T=s.af([],T,o))[3]/h*g;return s.a$(T,T,[I,I,1/T[3],I])}),D=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{let I=function(q,ie){var ne=ie[0],ae=ie[1],J=ie[2],pe=ne*ne+ae*ae+J*J;return pe>0&&(pe=1/Math.sqrt(pe)),q[0]=ie[0]*pe,q[1]=ie[1]*pe,q[2]=ie[2]*pe,q}([],function(q,ie,ne){var ae=ie[0],J=ie[1],pe=ie[2],Ie=ne[0],oe=ne[1],be=ne[2];return q[0]=J*be-pe*oe,q[1]=pe*Ie-ae*be,q[2]=ae*oe-J*Ie,q}([],ft([],b[T[0]],b[T[1]]),ft([],b[T[2]],b[T[1]]))),P=-((F=I)[0]*(N=b[T[1]])[0]+F[1]*N[1]+F[2]*N[2]);var F,N;return I.concat(P)});return new Oo(b,D)}}class Io{constructor(o,h){this.min=o,this.max=h,this.center=function(m,g,b){return m[0]=.5*g[0],m[1]=.5*g[1],m[2]=.5*g[2],m}([],function(m,g,b){return m[0]=g[0]+b[0],m[1]=g[1]+b[1],m[2]=g[2]+b[2],m}([],this.min,this.max))}quadrant(o){let h=[o%2==0,o<2],m=Ae(this.min),g=Ae(this.max);for(let b=0;b<h.length;b++)m[b]=h[b]?this.min[b]:this.center[b],g[b]=h[b]?this.center[b]:this.max[b];return g[2]=this.max[2],new Io(m,g)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersects(o){let h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],m=!0;for(let g=0;g<o.planes.length;g++){let b=o.planes[g],D=0;for(let T=0;T<h.length;T++)s.b0(b,h[T])>=0&&D++;if(D===0)return 0;D!==h.length&&(m=!1)}if(m)return 2;for(let g=0;g<3;g++){let b=Number.MAX_VALUE,D=-Number.MAX_VALUE;for(let T=0;T<o.points.length;T++){let I=o.points[T][g]-this.min[g];b=Math.min(b,I),D=Math.max(D,I)}if(D<0||b>this.max[g]-this.min[g])return 0}return 1}}class Xc{constructor(o=0,h=0,m=0,g=0){if(isNaN(o)||o<0||isNaN(h)||h<0||isNaN(m)||m<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=h,this.left=m,this.right=g}interpolate(o,h,m){return h.top!=null&&o.top!=null&&(this.top=s.z.number(o.top,h.top,m)),h.bottom!=null&&o.bottom!=null&&(this.bottom=s.z.number(o.bottom,h.bottom,m)),h.left!=null&&o.left!=null&&(this.left=s.z.number(o.left,h.left,m)),h.right!=null&&o.right!=null&&(this.right=s.z.number(o.right,h.right,m)),this}getCenter(o,h){let m=s.ac((this.left+o-this.right)/2,0,o),g=s.ac((this.top+h-this.bottom)/2,0,h);return new s.P(m,g)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new Xc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let tf=85.051129;class Rd{constructor(o,h,m,g,b){this.tileSize=512,this._renderWorldCopies=b===void 0||!!b,this._minZoom=o||0,this._maxZoom=h||22,this._minPitch=m??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Xc,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){let o=new Rd(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.apply(this),o}apply(o){this.tileSize=o.tileSize,this.latRange=o.latRange,this.width=o.width,this.height=o.height,this._center=o._center,this._elevation=o._elevation,this.minElevationForCurrentTile=o.minElevationForCurrentTile,this.zoom=o.zoom,this.angle=o.angle,this._fov=o._fov,this._pitch=o._pitch,this._unmodified=o._unmodified,this._edgeInsets=o._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(o){let h=-s.b1(o,-180,180)*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=function(){var m=new s.A(4);return s.A!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}(),function(m,g,b){var D=g[0],T=g[1],I=g[2],P=g[3],F=Math.sin(b),N=Math.cos(b);m[0]=D*N+I*F,m[1]=T*N+P*F,m[2]=D*-F+I*N,m[3]=T*-F+P*N}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){let h=s.ac(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(o){let h=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.tileZoom=Math.max(0,Math.floor(h)),this.scale=this.zoomScale(h),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,h,m){this._unmodified=!1,this._edgeInsets.interpolate(o,h,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){let h=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(o){let h=[new s.b2(0,o)];if(this._renderWorldCopies){let m=this.pointCoordinate(new s.P(0,0)),g=this.pointCoordinate(new s.P(this.width,0)),b=this.pointCoordinate(new s.P(this.width,this.height)),D=this.pointCoordinate(new s.P(0,this.height)),T=Math.floor(Math.min(m.x,g.x,b.x,D.x)),I=Math.floor(Math.max(m.x,g.x,b.x,D.x)),P=1;for(let F=T-P;F<=I+P;F++)F!==0&&h.push(new s.b2(F,o))}return h}coveringTiles(o){var h,m;let g=this.coveringZoomLevel(o),b=g;if(o.minzoom!==void 0&&g<o.minzoom)return[];o.maxzoom!==void 0&&g>o.maxzoom&&(g=o.maxzoom);let D=this.pointCoordinate(this.getCameraPoint()),T=s.Y.fromLngLat(this.center),I=Math.pow(2,g),P=[I*D.x,I*D.y,0],F=[I*T.x,I*T.y,0],N=Oo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g),q=o.minzoom||0;!o.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(q=g);let ie=o.terrain?2/Math.min(this.tileSize,o.tileSize)*this.tileSize:3,ne=oe=>({aabb:new Io([oe*I,0,0],[(oe+1)*I,I,0]),zoom:0,x:0,y:0,wrap:oe,fullyVisible:!1}),ae=[],J=[],pe=g,Ie=o.reparseOverscaled?b:g;if(this._renderWorldCopies)for(let oe=1;oe<=3;oe++)ae.push(ne(-oe)),ae.push(ne(oe));for(ae.push(ne(0));ae.length>0;){let oe=ae.pop(),be=oe.x,Ee=oe.y,ke=oe.fullyVisible;if(!ke){let pt=oe.aabb.intersects(N);if(pt===0)continue;ke=pt===2}let Fe=o.terrain?P:F,Ze=oe.aabb.distanceX(Fe),Ge=oe.aabb.distanceY(Fe),ot=Math.max(Math.abs(Ze),Math.abs(Ge));if(oe.zoom===pe||ot>ie+(1<<pe-oe.zoom)-2&&oe.zoom>=q){let pt=pe-oe.zoom,cn=P[0]-.5-(be<<pt),gt=P[1]-.5-(Ee<<pt);J.push({tileID:new s.Q(oe.zoom===pe?Ie:oe.zoom,oe.wrap,oe.zoom,be,Ee),distanceSq:Et([F[0]-.5-be,F[1]-.5-Ee]),tileDistanceToCamera:Math.sqrt(cn*cn+gt*gt)})}else for(let pt=0;pt<4;pt++){let cn=(be<<1)+pt%2,gt=(Ee<<1)+(pt>>1),Kt=oe.zoom+1,ln=oe.aabb.quadrant(pt);if(o.terrain){let Vn=new s.Q(Kt,oe.wrap,Kt,cn,gt),Xt=o.terrain.getMinMaxElevation(Vn),fn=(h=Xt.minElevation)!==null&&h!==void 0?h:this.elevation,wn=(m=Xt.maxElevation)!==null&&m!==void 0?m:this.elevation;ln=new Io([ln.min[0],ln.min[1],fn],[ln.max[0],ln.max[1],wn])}ae.push({aabb:ln,zoom:Kt,x:cn,y:gt,wrap:oe.wrap,fullyVisible:ke})}}return J.sort((oe,be)=>oe.distanceSq-be.distanceSq).map(oe=>oe.tileID)}resize(o,h){this.width=o,this.height=h,this.pixelsToGLUnits=[2/o,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){let h=s.ac(o.lat,-85.051129,tf);return new s.P(s.N(o.lng)*this.worldSize,s.O(h)*this.worldSize)}unproject(o){return new s.Y(o.x/this.worldSize,o.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(o){let h=this.elevation,m=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,o),b=o.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-b))return;let D=m+h-b,T=Math.cos(this._pitch)*this.cameraToCenterDistance/D/s.b3(1,g.lat),I=this.scaleZoom(T/this.tileSize);this._elevation=b,this._center=g,this.zoom=I}setLocationAtPoint(o,h){let m=this.pointCoordinate(h),g=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(o),D=new s.Y(b.x-(m.x-g.x),b.y-(m.y-g.y));this.center=this.coordinateLocation(D),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(o,h){return h?this.coordinatePoint(this.locationCoordinate(o),h.getElevationForLngLatZoom(o,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(o))}pointLocation(o,h){return this.coordinateLocation(this.pointCoordinate(o,h))}locationCoordinate(o){return s.Y.fromLngLat(o)}coordinateLocation(o){return o&&o.toLngLat()}pointCoordinate(o,h){if(h){let q=h.pointCoordinate(o);if(q!=null)return q}let m=[o.x,o.y,0,1],g=[o.x,o.y,1,1];s.af(m,m,this.pixelMatrixInverse),s.af(g,g,this.pixelMatrixInverse);let b=m[3],D=g[3],T=m[1]/b,I=g[1]/D,P=m[2]/b,F=g[2]/D,N=P===F?0:(0-P)/(F-P);return new s.Y(s.z.number(m[0]/b,g[0]/D,N)/this.worldSize,s.z.number(T,I,N)/this.worldSize)}coordinatePoint(o,h=0,m=this.pixelMatrix){let g=[o.x*this.worldSize,o.y*this.worldSize,h,1];return s.af(g,g,m),new s.P(g[0]/g[3],g[1]/g[3])}getBounds(){let o=Math.max(0,this.height/2-this.getHorizon());return new Ci().extend(this.pointLocation(new s.P(0,o))).extend(this.pointLocation(new s.P(this.width,o))).extend(this.pointLocation(new s.P(this.width,this.height))).extend(this.pointLocation(new s.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ci([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,tf])}calculatePosMatrix(o,h=!1){let m=o.key,g=h?this._alignedPosMatrixCache:this._posMatrixCache;if(g[m])return g[m];let b=o.canonical,D=this.worldSize/this.zoomScale(b.z),T=b.x+Math.pow(2,b.z)*o.wrap,I=s.an(new Float64Array(16));return s.H(I,I,[T*D,b.y*D,0]),s.J(I,I,[D/s.W,D/s.W,1]),s.K(I,h?this.alignedProjMatrix:this.projMatrix,I),g[m]=new Float32Array(I),g[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(o,h){h=s.ac(+h,this.minZoom,this.maxZoom);let m={center:new s.M(o.lng,o.lat),zoom:h},g=this.lngRange;if(!this._renderWorldCopies&&g===null){let oe=179.9999999999;g=[-oe,oe]}let b=this.tileSize*this.zoomScale(m.zoom),D=0,T=b,I=0,P=b,F=0,N=0,{x:q,y:ie}=this.size;if(this.latRange){let oe=this.latRange;D=s.O(oe[1])*b,T=s.O(oe[0])*b,T-D<ie&&(F=ie/(T-D))}g&&(I=s.b1(s.N(g[0])*b,0,b),P=s.b1(s.N(g[1])*b,0,b),P<I&&(P+=b),P-I<q&&(N=q/(P-I)));let{x:ne,y:ae}=this.project.call({worldSize:b},o),J,pe,Ie=Math.max(N||0,F||0);if(Ie){let oe=new s.P(N?(P+I)/2:ne,F?(T+D)/2:ae);return m.center=this.unproject.call({worldSize:b},oe).wrap(),m.zoom+=this.scaleZoom(Ie),m}if(this.latRange){let oe=ie/2;ae-oe<D&&(pe=D+oe),ae+oe>T&&(pe=T-oe)}if(g){let oe=(I+P)/2,be=ne;this._renderWorldCopies&&(be=s.b1(ne,oe-b/2,oe+b/2));let Ee=q/2;be-Ee<I&&(J=I+Ee),be+Ee>P&&(J=P-Ee)}if(J!==void 0||pe!==void 0){let oe=new s.P(J??ne,pe??ae);m.center=this.unproject.call({worldSize:b},oe).wrap()}return m}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let o=this._unmodified,{center:h,zoom:m}=this.getConstrained(this.center,this.zoom);this.center=h,this.zoom=m,this._unmodified=o,this._constraining=!1}_calcMatrices(){if(!this.height)return;let o=this.centerOffset,h=this.point.x,m=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.b3(1,this.center.lat)*this.worldSize;let g=s.an(new Float64Array(16));s.J(g,g,[this.width/2,-this.height/2,1]),s.H(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=s.an(new Float64Array(16)),s.J(g,g,[1,-1,1]),s.H(g,g,[-1,-1,0]),s.J(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;let b=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),D=Math.min(this.elevation,this.minElevationForCurrentTile),T=b-D*this._pixelPerMeter/Math.cos(this._pitch),I=D<0?T:b,P=Math.PI/2+this._pitch,F=this._fov*(.5+o.y/this.height),N=Math.sin(F)*I/Math.sin(s.ac(Math.PI-P-F,.01,Math.PI-.01)),q=this.getHorizon(),ie=2*Math.atan(q/this.cameraToCenterDistance)*(.5+o.y/(2*q)),ne=Math.sin(ie)*I/Math.sin(s.ac(Math.PI-P-ie,.01,Math.PI-.01)),ae=Math.min(N,ne),J=1.01*(Math.cos(Math.PI/2-this._pitch)*ae+I),pe=this.height/50;g=new Float64Array(16),s.b4(g,this._fov,this.width/this.height,pe,J),g[8]=2*-o.x/this.width,g[9]=2*o.y/this.height,s.J(g,g,[1,-1,1]),s.H(g,g,[0,0,-this.cameraToCenterDistance]),s.b5(g,g,this._pitch),s.ad(g,g,this.angle),s.H(g,g,[-h,-m,0]),this.mercatorMatrix=s.J([],g,[this.worldSize,this.worldSize,this.worldSize]),s.J(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.K(new Float64Array(16),this.labelPlaneMatrix,g),s.H(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=s.ar([],g),this.pixelMatrix3D=s.K(new Float64Array(16),this.labelPlaneMatrix,g);let Ie=this.width%2/2,oe=this.height%2/2,be=Math.cos(this.angle),Ee=Math.sin(this.angle),ke=h-Math.round(h)+be*Ie+Ee*oe,Fe=m-Math.round(m)+be*oe+Ee*Ie,Ze=new Float64Array(g);if(s.H(Ze,Ze,[ke>.5?ke-1:ke,Fe>.5?Fe-1:Fe,0]),this.alignedProjMatrix=Ze,g=s.ar(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let o=this.pointCoordinate(new s.P(0,0)),h=[o.x*this.worldSize,o.y*this.worldSize,0,1];return s.af(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,o))}getCameraQueryGeometry(o){let h=this.getCameraPoint();if(o.length===1)return[o[0],h];{let m=h.x,g=h.y,b=h.x,D=h.y;for(let T of o)m=Math.min(m,T.x),g=Math.min(g,T.y),b=Math.max(b,T.x),D=Math.max(D,T.y);return[new s.P(m,g),new s.P(b,g),new s.P(b,D),new s.P(m,D),new s.P(m,g)]}}lngLatToCameraDepth(o,h){let m=this.locationCoordinate(o),g=[m.x*this.worldSize,m.y*this.worldSize,h,1];return s.af(g,g,this.projMatrix),g[2]/g[3]}}function nf(y,o){let h,m=!1,g=null,b=null,D=()=>{g=null,m&&(y.apply(b,h),g=setTimeout(D,o),m=!1)};return(...T)=>(m=!0,b=this,h=T,g||D(),g)}class rf{constructor(o){this._getCurrentHash=()=>{let h=window.location.hash.replace("#","");if(this._hashName){let m;return h.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(m=g)}),(m&&m[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{let h=this._getCurrentHash();if(h.length>=3&&!h.some(m=>isNaN(m))){let m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:m,pitch:+(h[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let h=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,h)}catch{}},this._updateHash=nf(this._updateHashUnthrottled,300),this._hashName=o&&encodeURIComponent(o)}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(o){let h=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,g=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,g),D=Math.round(h.lng*b)/b,T=Math.round(h.lat*b)/b,I=this._map.getBearing(),P=this._map.getPitch(),F="";if(F+=o?`/${D}/${T}/${m}`:`${m}/${T}/${D}`,(I||P)&&(F+="/"+Math.round(10*I)/10),P&&(F+=`/${Math.round(P)}`),this._hashName){let N=this._hashName,q=!1,ie=window.location.hash.slice(1).split("&").map(ne=>{let ae=ne.split("=")[0];return ae===N?(q=!0,`${ae}=${F}`):ne}).filter(ne=>ne);return q||ie.push(`${N}=${F}`),`#${ie.join("&")}`}return`#${F}`}}let nu={linearity:.3,easing:s.b6(0,0,.3,1)},oc=s.e({deceleration:2500,maxSpeed:1400},nu),r_=s.e({deceleration:20,maxSpeed:1400},nu),s_=s.e({deceleration:1e3,maxSpeed:360},nu),a_=s.e({deceleration:1e3,maxSpeed:90},nu);class o_{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:v.now(),settings:o})}_drainInertiaBuffer(){let o=this._inertiaBuffer,h=v.now();for(;o.length>0&&h-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let h={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:b}of this._inertiaBuffer)h.zoom+=b.zoomDelta||0,h.bearing+=b.bearingDelta||0,h.pitch+=b.pitchDelta||0,b.panDelta&&h.pan._add(b.panDelta),b.around&&(h.around=b.around),b.pinchAround&&(h.pinchAround=b.pinchAround);let m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(h.pan.mag()){let b=ru(h.pan.mag(),m,s.e({},oc,o||{}));g.offset=h.pan.mult(b.amount/h.pan.mag()),g.center=this._map.transform.center,iu(g,b)}if(h.zoom){let b=ru(h.zoom,m,r_);g.zoom=this._map.transform.zoom+b.amount,iu(g,b)}if(h.bearing){let b=ru(h.bearing,m,s_);g.bearing=this._map.transform.bearing+s.ac(b.amount,-179,179),iu(g,b)}if(h.pitch){let b=ru(h.pitch,m,a_);g.pitch=this._map.transform.pitch+b.amount,iu(g,b)}if(g.zoom||g.bearing){let b=h.pinchAround===void 0?h.around:h.pinchAround;g.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),s.e(g,{noMoveStart:!0})}}function iu(y,o){(!y.duration||y.duration<o.duration)&&(y.duration=o.duration,y.easing=o.easing)}function ru(y,o,h){let{maxSpeed:m,linearity:g,deceleration:b}=h,D=s.ac(y*g/(o/1e3),-m,m),T=Math.abs(D)/(b*g);return{easing:h.easing,duration:1e3*T,amount:D*(T/2)}}class os extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,h,m,g={}){let b=x.mousePos(h.getCanvas(),m),D=h.unproject(b);super(o,s.e({point:b,lngLat:D,originalEvent:m},g)),this._defaultPrevented=!1,this.target=h}}class wa extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,h,m){let g=o==="touchend"?m.changedTouches:m.touches,b=x.touchPos(h.getCanvasContainer(),g),D=b.map(I=>h.unproject(I)),T=b.reduce((I,P,F,N)=>I.add(P.div(N.length)),new s.P(0,0));super(o,{points:b,point:T,lngLats:D,lngLat:h.unproject(T),originalEvent:m}),this._defaultPrevented=!1}}class sf extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,h,m){super(o,{originalEvent:m}),this._defaultPrevented=!1}}class na{constructor(o,h){this._map=o,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new sf(o.type,this._map,o))}mousedown(o,h){return this._mousedownPos=h,this._firePreventable(new os(o.type,this._map,o))}mouseup(o){this._map.fire(new os(o.type,this._map,o))}click(o,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new os(o.type,this._map,o))}dblclick(o){return this._firePreventable(new os(o.type,this._map,o))}mouseover(o){this._map.fire(new os(o.type,this._map,o))}mouseout(o){this._map.fire(new os(o.type,this._map,o))}touchstart(o){return this._firePreventable(new wa(o.type,this._map,o))}touchmove(o){this._map.fire(new wa(o.type,this._map,o))}touchend(o){this._map.fire(new wa(o.type,this._map,o))}touchcancel(o){this._map.fire(new wa(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ca{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new os(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new os("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new os(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class el{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.pointLocation(s.P.convert(o),this._map.terrain)}}class ia{constructor(o,h){this._map=o,this._tr=new el(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,h){this.isEnabled()&&o.shiftKey&&o.button===0&&(x.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(o,h){if(!this._active)return;let m=h;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;let g=this._startPos;this._lastPos=m,this._box||(this._box=x.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));let b=Math.min(g.x,m.x),D=Math.max(g.x,m.x),T=Math.min(g.y,m.y),I=Math.max(g.y,m.y);x.setTransform(this._box,`translate(${b}px,${T}px)`),this._box.style.width=D-b+"px",this._box.style.height=I-T+"px"}mouseupWindow(o,h){if(!this._active||o.button!==0)return;let m=this._startPos,g=h;if(this.reset(),x.suppressClick(),m.x!==g.x||m.y!==g.y)return this._map.fire(new s.k("boxzoomend",{originalEvent:o})),{cameraAnimation:b=>b.fitScreenCoordinates(m,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,h){return this._map.fire(new s.k(o,{originalEvent:h}))}}function cc(y,o){if(y.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${o.length}`);let h={};for(let m=0;m<y.length;m++)h[y[m].identifier]=o[m];return h}class $b{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,h,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),m.length===this.numTouches&&(this.centroid=function(g){let b=new s.P(0,0);for(let D of g)b._add(D);return b.div(g.length)}(h),this.touches=cc(m,h)))}touchmove(o,h,m){if(this.aborted||!this.centroid)return;let g=cc(m,h);for(let b in this.touches){let D=g[b];(!D||D.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(o,h,m){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){let g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class af{constructor(o){this.singleTap=new $b(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,h,m){this.singleTap.touchstart(o,h,m)}touchmove(o,h,m){this.singleTap.touchmove(o,h,m)}touchend(o,h,m){let g=this.singleTap.touchend(o,h,m);if(g){let b=o.timeStamp-this.lastTime<500,D=!this.lastTap||this.lastTap.dist(g)<30;if(b&&D||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Hb{constructor(o){this._tr=new el(o),this._zoomIn=new af({numTouches:1,numTaps:2}),this._zoomOut=new af({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,h,m){this._zoomIn.touchstart(o,h,m),this._zoomOut.touchstart(o,h,m)}touchmove(o,h,m){this._zoomIn.touchmove(o,h,m),this._zoomOut.touchmove(o,h,m)}touchend(o,h,m){let g=this._zoomIn.touchend(o,h,m),b=this._zoomOut.touchend(o,h,m),D=this._tr;return g?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:D.zoom+1,around:D.unproject(g)},{originalEvent:o})}):b?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:D.zoom-1,around:D.unproject(b)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tl{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){let h=this._moveFunction(...o);if(h.bearingDelta||h.pitchDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(o,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=h.length?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,h){if(!this.isEnabled())return;let m=this._lastPoint;if(!m)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);let g=h.length?h[0]:h;return!this._moved&&g.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(m,g))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&x.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let su={0:1,2:2};class xa{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){let h=x.mouseButton(o);this._eventButton=h}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(h,m){let g=su[m];return h.buttons===void 0||(h.buttons&g)!==g}(o,this._eventButton)}isValidEndEvent(o){return x.mouseButton(o)===this._eventButton}}class Ot{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return o.targetTouches.length===1}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}let Fd=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(o){o.preventDefault()}},nl=({enable:y,clickTolerance:o,bearingDegreesPerPixelMoved:h=.8})=>{let m=new xa({checkCorrectEvent:g=>x.mouseButton(g)===0&&g.ctrlKey||x.mouseButton(g)===2});return new tl({clickTolerance:o,move:(g,b)=>({bearingDelta:(b.x-g.x)*h}),moveStateManager:m,enable:y,assignEvents:Fd})},il=({enable:y,clickTolerance:o,pitchDegreesPerPixelMoved:h=-.5})=>{let m=new xa({checkCorrectEvent:g=>x.mouseButton(g)===0&&g.ctrlKey||x.mouseButton(g)===2});return new tl({clickTolerance:o,move:(g,b)=>({pitchDelta:(b.y-g.y)*h}),moveStateManager:m,enable:y,assignEvents:Fd})};class c_{constructor(o,h){this._clickTolerance=o.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(o,h,m){return this._calculateTransform(o,h,m)}touchmove(o,h,m){if(this._active&&!(m.length<this.minTouchs()))return o.preventDefault(),this._calculateTransform(o,h,m)}touchend(o,h,m){this._calculateTransform(o,h,m),this._active&&m.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,h,m){m.length>0&&(this._active=!0);let g=cc(m,h),b=new s.P(0,0),D=new s.P(0,0),T=0;for(let P in g){let F=g[P],N=this._touches[P];N&&(b._add(F),D._add(F.sub(N)),T++,g[P]=F)}if(this._touches=g,T<this.minTouchs()||!D.mag())return;let I=D.div(T);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(T),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mt{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(o,h,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([h[0],h[1]]))}touchmove(o,h,m){if(!this._firstTwoTouches)return;o.preventDefault();let[g,b]=this._firstTwoTouches,D=rl(m,h,g),T=rl(m,h,b);if(!D||!T)return;let I=this._aroundCenter?null:D.add(T).div(2);return this._move([D,T],I,o)}touchend(o,h,m){if(!this._firstTwoTouches)return;let[g,b]=this._firstTwoTouches,D=rl(m,h,g),T=rl(m,h,b);D&&T||(this._active&&x.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function rl(y,o,h){for(let m=0;m<y.length;m++)if(y[m].identifier===h)return o[m]}function l_(y,o){return Math.log(y/o)/Math.LN2}class u_ extends Mt{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,h){let m=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(l_(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:l_(this._distance,m),pinchAround:h}}}function Ld(y,o){return 180*y.angleWith(o)/Math.PI}class of extends Mt{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,h,m){let g=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ld(this._vector,g),pinchAround:h}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());let h=25/(Math.PI*this._minDiameter)*360,m=Ld(o,this._startVector);return Math.abs(m)<h}}function Nd(y){return Math.abs(y.y)>Math.abs(y.x)}class d_ extends Mt{constructor(o){super(),this._currentTouchCount=0,this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,h,m){super.touchstart(o,h,m),this._currentTouchCount=m.length}_start(o){this._lastPoints=o,Nd(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,h,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let g=o[0].sub(this._lastPoints[0]),b=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,b,m.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(g.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(o,h,m){if(this._valid!==void 0)return this._valid;let g=o.mag()>=2,b=h.mag()>=2;if(!g&&!b)return;if(!g||!b)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;let D=o.y>0==h.y>0;return Nd(o)&&Nd(h)&&D}}let qb={panStep:100,bearingStep:15,pitchStep:10};class Eo{constructor(o){this._tr=new el(o);let h=qb;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let h=0,m=0,g=0,b=0,D=0;switch(o.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:o.shiftKey?m=-1:(o.preventDefault(),b=-1);break;case 39:o.shiftKey?m=1:(o.preventDefault(),b=1);break;case 38:o.shiftKey?g=1:(o.preventDefault(),D=-1);break;case 40:o.shiftKey?g=-1:(o.preventDefault(),D=1);break;default:return}return this._rotationDisabled&&(m=0,g=0),{cameraAnimation:T=>{let I=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:gi,zoom:h?Math.round(I.zoom)+h*(o.shiftKey?2:1):I.zoom,bearing:I.bearing+m*this._bearingStep,pitch:I.pitch+g*this._pitchStep,offset:[-b*this._panStep,-D*this._panStep],center:I.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function gi(y){return y*(2-y)}let au=4.000244140625;class Bd{constructor(o,h){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=o,this._tr=new el(o),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(o){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!o[this._map.cooperativeGestures._bypassKey])return;let h=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY,m=v.now(),g=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,h!==0&&h%au==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(g*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),o.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=o,this._delta-=h,this._active||this._start(o)),o.preventDefault()}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let h=x.mousePos(this._map.getCanvas(),o),m=this._tr;this._around=h.y>m.transform.height/2-m.transform.getHorizon()?s.M.convert(this._aroundCenter?m.center:m.unproject(h)):s.M.convert(m.center),this._aroundPoint=m.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let o=this._tr.transform;if(this._delta!==0){let T=this._type==="wheel"&&Math.abs(this._delta)>au?this._wheelZoomRate:this._defaultZoomRate,I=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&I!==0&&(I=1/I);let P=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(P*I))),this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let h=typeof this._targetZoom=="number"?this._targetZoom:o.zoom,m=this._startZoom,g=this._easing,b,D=!1;if(this._type==="wheel"&&m&&g){let T=Math.min((v.now()-this._lastWheelEventTime)/200,1),I=g(T);b=s.z.number(m,h,I),T<1?this._frameId||(this._frameId=!0):D=!0}else b=h,D=!0;return this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:b-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let h=s.b7;if(this._prevEase){let m=this._prevEase,g=(v.now()-m.start)/m.duration,b=m.easing(g+.01)-m.easing(g),D=.27/Math.sqrt(b*b+1e-4)*.01,T=Math.sqrt(.0729-D*D);h=s.b6(D,T,.25,1)}return this._prevEase={start:v.now(),duration:o,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class cf{constructor(o,h){this._clickZoom=o,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class h_{constructor(o){this._tr=new el(o),this.reset()}reset(){this._active=!1}dblclick(o,h){return o.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class p_{constructor(){this._tap=new af({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(o,h,m){if(!this._swipePoint)if(this._tapTime){let g=h[0],b=o.timeStamp-this._tapTime<500,D=this._tapPoint.dist(g)<30;b&&D?m.length>0&&(this._swipePoint=g,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(o,h,m)}touchmove(o,h,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;let g=h[0],b=g.y-this._swipePoint.y;return this._swipePoint=g,o.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(o,h,m)}touchend(o,h,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{let g=this._tap.touchend(o,h,m);g&&(this._tapTime=o.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class f_{constructor(o,h,m){this._el=o,this._mousePan=h,this._touchPan=m}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ra{constructor(o,h,m){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=h,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ou{constructor(o,h,m,g){this._el=o,this._touchZoom=h,this._touchRotate=m,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Vt{constructor(o,h){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=o,this._options=h,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let o=this._map.getCanvasContainer();o.classList.add("maplibregl-cooperative-gestures"),this._container=x.create("div","maplibregl-cooperative-gesture-screen",o);let h=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(h=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=h,this._container.appendChild(g);let b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=m,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(x.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(o){this._onCooperativeGesture(o.touches.length===1)}wheel(o){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!o[this._bypassKey])}_onCooperativeGesture(o){this._enabled&&o&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let Gt=y=>y.zoom||y.drag||y.pitch||y.rotate;class jd extends s.k{}function cu(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class lf{constructor(o,h){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,b)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let D=g.type==="renderFrame"?void 0:g,T={needsRenderFrame:!1},I={},P={},F=g.touches,N=F?this._getMapTouches(F):void 0,q=N?x.touchPos(this._map.getCanvas(),N):x.mousePos(this._map.getCanvas(),g);for(let{handlerName:ae,handler:J,allowed:pe}of this._handlers){if(!J.isEnabled())continue;let Ie;this._blockedByActive(P,pe,ae)?J.reset():J[b||g.type]&&(Ie=J[b||g.type](g,q,N),this.mergeHandlerResult(T,I,Ie,ae,D),Ie&&Ie.needsRenderFrame&&this._triggerRenderFrame()),(Ie||J.isActive())&&(P[ae]=J)}let ie={};for(let ae in this._previousActiveHandlers)P[ae]||(ie[ae]=D);this._previousActiveHandlers=P,(Object.keys(ie).length||cu(T))&&(this._changes.push([T,I,ie]),this._triggerRenderFrame()),(Object.keys(P).length||cu(T))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:ne}=T;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new o_(o),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);let m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(let[g,b,D]of this._listeners)x.addEventListener(g,b,g===document?this.handleWindowEvent:this.handleEvent,D)}destroy(){for(let[o,h,m]of this._listeners)x.removeEventListener(o,h,o===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(o){let h=this._map,m=h.getCanvasContainer();this._add("mapEvent",new na(h,o));let g=h.boxZoom=new ia(h,o);this._add("boxZoom",g),o.interactive&&o.boxZoom&&g.enable();let b=h.cooperativeGestures=new Vt(h,o.cooperativeGestures);this._add("cooperativeGestures",b),o.cooperativeGestures&&b.enable();let D=new Hb(h),T=new h_(h);h.doubleClickZoom=new cf(T,D),this._add("tapZoom",D),this._add("clickZoom",T),o.interactive&&o.doubleClickZoom&&h.doubleClickZoom.enable();let I=new p_;this._add("tapDragZoom",I);let P=h.touchPitch=new d_(h);this._add("touchPitch",P),o.interactive&&o.touchPitch&&h.touchPitch.enable(o.touchPitch);let F=nl(o),N=il(o);h.dragRotate=new ra(o,F,N),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]),o.interactive&&o.dragRotate&&h.dragRotate.enable();let q=(({enable:Ie,clickTolerance:oe})=>{let be=new xa({checkCorrectEvent:Ee=>x.mouseButton(Ee)===0&&!Ee.ctrlKey});return new tl({clickTolerance:oe,move:(Ee,ke)=>({around:ke,panDelta:ke.sub(Ee)}),activateOnStart:!0,moveStateManager:be,enable:Ie,assignEvents:Fd})})(o),ie=new c_(o,h);h.dragPan=new f_(m,q,ie),this._add("mousePan",q),this._add("touchPan",ie,["touchZoom","touchRotate"]),o.interactive&&o.dragPan&&h.dragPan.enable(o.dragPan);let ne=new of,ae=new u_;h.touchZoomRotate=new ou(m,ae,ne,I),this._add("touchRotate",ne,["touchPan","touchZoom"]),this._add("touchZoom",ae,["touchPan","touchRotate"]),o.interactive&&o.touchZoomRotate&&h.touchZoomRotate.enable(o.touchZoomRotate);let J=h.scrollZoom=new Bd(h,()=>this._triggerRenderFrame());this._add("scrollZoom",J,["mousePan"]),o.interactive&&o.scrollZoom&&h.scrollZoom.enable(o.scrollZoom);let pe=h.keyboard=new Eo(h);this._add("keyboard",pe),o.interactive&&o.keyboard&&h.keyboard.enable(),this._add("blockableMapEvent",new Ca(h))}_add(o,h,m){this._handlers.push({handlerName:o,handler:h,allowed:m}),this._handlersById[o]=h}stop(o){if(!this._updatingCamera){for(let{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(let{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Gt(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,h,m){for(let g in o)if(g!==m&&(!h||h.indexOf(g)<0))return!0;return!1}_getMapTouches(o){let h=[];for(let m of o)this._el.contains(m.target)&&h.push(m);return h}mergeHandlerResult(o,h,m,g,b){if(!m)return;s.e(o,m);let D={handlerName:g,originalEvent:m.originalEvent||b};m.zoomDelta!==void 0&&(h.zoom=D),m.panDelta!==void 0&&(h.drag=D),m.pitchDelta!==void 0&&(h.pitch=D),m.bearingDelta!==void 0&&(h.rotate=D)}_applyChanges(){let o={},h={},m={};for(let[g,b,D]of this._changes)g.panDelta&&(o.panDelta=(o.panDelta||new s.P(0,0))._add(g.panDelta)),g.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(o.around=g.around),g.pinchAround!==void 0&&(o.pinchAround=g.pinchAround),g.noInertia&&(o.noInertia=g.noInertia),s.e(h,b),s.e(m,D);this._updateMapTransform(o,h,m),this._changes=[]}_updateMapTransform(o,h,m){let g=this._map,b=g._getTransformForUpdate(),D=g.terrain;if(!(cu(o)||D&&this._terrainMovement))return this._fireEvents(h,m,!0);let{panDelta:T,zoomDelta:I,bearingDelta:P,pitchDelta:F,around:N,pinchAround:q}=o;q!==void 0&&(N=q),g._stop(!0),N=N||g.transform.centerPoint;let ie=b.pointLocation(T?N.sub(T):N);P&&(b.bearing+=P),F&&(b.pitch+=F),I&&(b.zoom+=I),D?this._terrainMovement||!h.drag&&!h.zoom?h.drag&&this._terrainMovement?b.center=b.pointLocation(b.centerPoint.sub(T)):b.setLocationAtPoint(ie,N):(this._terrainMovement=!0,this._map._elevationFreeze=!0,b.setLocationAtPoint(ie,N),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,b.recalculateZoom(g.terrain)})):b.setLocationAtPoint(ie,N),g._applyUpdatedTransform(b),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(h,m,!0)}_fireEvents(o,h,m){let g=Gt(this._eventsInProgress),b=Gt(o),D={};for(let F in o){let{originalEvent:N}=o[F];this._eventsInProgress[F]||(D[`${F}start`]=N),this._eventsInProgress[F]=o[F]}!g&&b&&this._fireEvent("movestart",b.originalEvent);for(let F in D)this._fireEvent(F,D[F]);b&&this._fireEvent("move",b.originalEvent);for(let F in o){let{originalEvent:N}=o[F];this._fireEvent(F,N)}let T={},I;for(let F in this._eventsInProgress){let{handlerName:N,originalEvent:q}=this._eventsInProgress[F];this._handlersById[N].isActive()||(delete this._eventsInProgress[F],I=h[N]||q,T[`${F}end`]=I)}for(let F in T)this._fireEvent(F,T[F]);let P=Gt(this._eventsInProgress);if(m&&(g||b)&&!P){this._updatingCamera=!0;let F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=q=>q!==0&&-this._bearingSnap<q&&q<this._bearingSnap;!F||!F.essential&&v.prefersReducedMotion?(this._map.fire(new s.k("moveend",{originalEvent:I})),N(this._map.getBearing())&&this._map.resetNorth()):(N(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:I})),this._updatingCamera=!1}}_fireEvent(o,h){this._map.fire(new s.k(o,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new jd("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class cs extends s.E{constructor(o,h){super(),this._renderFrameCallback=()=>{let m=Math.min((v.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=h.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new s.M(this.transform.center.lng,this.transform.center.lat)}setCenter(o,h){return this.jumpTo({center:o},h)}panBy(o,h,m){return o=s.P.convert(o).mult(-1),this.panTo(this.transform.center,s.e({offset:o},h),m)}panTo(o,h,m){return this.easeTo(s.e({center:o},h),m)}getZoom(){return this.transform.zoom}setZoom(o,h){return this.jumpTo({zoom:o},h),this}zoomTo(o,h,m){return this.easeTo(s.e({zoom:o},h),m)}zoomIn(o,h){return this.zoomTo(this.getZoom()+1,o,h),this}zoomOut(o,h){return this.zoomTo(this.getZoom()-1,o,h),this}getBearing(){return this.transform.bearing}setBearing(o,h){return this.jumpTo({bearing:o},h),this}getPadding(){return this.transform.padding}setPadding(o,h){return this.jumpTo({padding:o},h),this}rotateTo(o,h,m){return this.easeTo(s.e({bearing:o},h),m)}resetNorth(o,h){return this.rotateTo(0,s.e({duration:1e3},o),h),this}resetNorthPitch(o,h){return this.easeTo(s.e({bearing:0,pitch:0,duration:1e3},o),h),this}snapToNorth(o,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,h):this}getPitch(){return this.transform.pitch}setPitch(o,h){return this.jumpTo({pitch:o},h),this}cameraForBounds(o,h){o=Ci.convert(o);let m=h&&h.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),m,h)}_cameraForBoxAndBearing(o,h,m,g){let b={top:0,bottom:0,right:0,left:0};if(typeof(g=s.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){let pt=g.padding;g.padding={top:pt,bottom:pt,right:pt,left:pt}}g.padding=s.e(b,g.padding);let D=this.transform,T=D.padding,I=new Ci(o,h),P=D.project(I.getNorthWest()),F=D.project(I.getNorthEast()),N=D.project(I.getSouthEast()),q=D.project(I.getSouthWest()),ie=s.b8(-m),ne=P.rotate(ie),ae=F.rotate(ie),J=N.rotate(ie),pe=q.rotate(ie),Ie=new s.P(Math.max(ne.x,ae.x,pe.x,J.x),Math.max(ne.y,ae.y,pe.y,J.y)),oe=new s.P(Math.min(ne.x,ae.x,pe.x,J.x),Math.min(ne.y,ae.y,pe.y,J.y)),be=Ie.sub(oe),Ee=(D.width-(T.left+T.right+g.padding.left+g.padding.right))/be.x,ke=(D.height-(T.top+T.bottom+g.padding.top+g.padding.bottom))/be.y;if(ke<0||Ee<0)return void s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let Fe=Math.min(D.scaleZoom(D.scale*Math.min(Ee,ke)),g.maxZoom),Ze=s.P.convert(g.offset),Ge=new s.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(s.b8(m)),ot=Ze.add(Ge).mult(D.scale/D.zoomScale(Fe));return{center:D.unproject(P.add(N).div(2).sub(ot)),zoom:Fe,bearing:m}}fitBounds(o,h,m){return this._fitInternal(this.cameraForBounds(o,h),h,m)}fitScreenCoordinates(o,h,m,g,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.P.convert(o)),this.transform.pointLocation(s.P.convert(h)),m,g),g,b)}_fitInternal(o,h,m){return o?(delete(h=s.e(o,h)).padding,h.linear?this.easeTo(h,m):this.flyTo(h,m)):this}jumpTo(o,h){this.stop();let m=this._getTransformForUpdate(),g=!1,b=!1,D=!1;return"zoom"in o&&m.zoom!==+o.zoom&&(g=!0,m.zoom=+o.zoom),o.center!==void 0&&(m.center=s.M.convert(o.center)),"bearing"in o&&m.bearing!==+o.bearing&&(b=!0,m.bearing=+o.bearing),"pitch"in o&&m.pitch!==+o.pitch&&(D=!0,m.pitch=+o.pitch),o.padding==null||m.isPaddingEqual(o.padding)||(m.padding=o.padding),this._applyUpdatedTransform(m),this.fire(new s.k("movestart",h)).fire(new s.k("move",h)),g&&this.fire(new s.k("zoomstart",h)).fire(new s.k("zoom",h)).fire(new s.k("zoomend",h)),b&&this.fire(new s.k("rotatestart",h)).fire(new s.k("rotate",h)).fire(new s.k("rotateend",h)),D&&this.fire(new s.k("pitchstart",h)).fire(new s.k("pitch",h)).fire(new s.k("pitchend",h)),this.fire(new s.k("moveend",h))}calculateCameraOptionsFromTo(o,h,m,g=0){let b=s.Y.fromLngLat(o,h),D=s.Y.fromLngLat(m,g),T=D.x-b.x,I=D.y-b.y,P=D.z-b.z,F=Math.hypot(T,I,P);if(F===0)throw new Error("Can't calculate camera options with same From and To");let N=Math.hypot(T,I),q=this.transform.scaleZoom(this.transform.cameraToCenterDistance/F/this.transform.tileSize),ie=180*Math.atan2(T,-I)/Math.PI,ne=180*Math.acos(N/F)/Math.PI;return ne=P<0?90-ne:90+ne,{center:D.toLngLat(),zoom:q,pitch:ne,bearing:ie}}easeTo(o,h){var m;this._stop(!1,o.easeId),((o=s.e({offset:[0,0],duration:500,easing:s.b7},o)).animate===!1||!o.essential&&v.prefersReducedMotion)&&(o.duration=0);let g=this._getTransformForUpdate(),b=this.getZoom(),D=this.getBearing(),T=this.getPitch(),I=this.getPadding(),P="bearing"in o?this._normalizeBearing(o.bearing,D):D,F="pitch"in o?+o.pitch:T,N="padding"in o?o.padding:g.padding,q=s.P.convert(o.offset),ie=g.centerPoint.add(q),ne=g.pointLocation(ie),{center:ae,zoom:J}=g.getConstrained(s.M.convert(o.center||ne),(m=o.zoom)!==null&&m!==void 0?m:b);this._normalizeCenter(ae);let pe=g.project(ne),Ie=g.project(ae).sub(pe),oe=g.zoomScale(J-b),be,Ee;o.around&&(be=s.M.convert(o.around),Ee=g.locationPoint(be));let ke={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||J!==b,this._rotating=this._rotating||D!==P,this._pitching=this._pitching||F!==T,this._padding=!g.isPaddingEqual(N),this._easeId=o.easeId,this._prepareEase(h,o.noMoveStart,ke),this.terrain&&this._prepareElevation(ae),this._ease(Fe=>{if(this._zooming&&(g.zoom=s.z.number(b,J,Fe)),this._rotating&&(g.bearing=s.z.number(D,P,Fe)),this._pitching&&(g.pitch=s.z.number(T,F,Fe)),this._padding&&(g.interpolatePadding(I,N,Fe),ie=g.centerPoint.add(q)),this.terrain&&!o.freezeElevation&&this._updateElevation(Fe),be)g.setLocationAtPoint(be,Ee);else{let Ze=g.zoomScale(g.zoom-b),Ge=J>b?Math.min(2,oe):Math.max(.5,oe),ot=Math.pow(Ge,1-Fe),pt=g.unproject(pe.add(Ie.mult(Fe*ot)).mult(Ze));g.setLocationAtPoint(g.renderWorldCopies?pt.wrap():pt,ie)}this._applyUpdatedTransform(g),this._fireMoveEvents(h)},Fe=>{this.terrain&&this._finalizeElevation(),this._afterEase(h,Fe)},o),this}_prepareEase(o,h,m={}){this._moving=!0,h||m.moving||this.fire(new s.k("movestart",o)),this._zooming&&!m.zooming&&this.fire(new s.k("zoomstart",o)),this._rotating&&!m.rotating&&this.fire(new s.k("rotatestart",o)),this._pitching&&!m.pitching&&this.fire(new s.k("pitchstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(o){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(o<1&&h!==this._elevationTarget){let m=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(m-(h-(m*o+this._elevationStart))/(1-o)),this._elevationTarget=h}this.transform.elevation=s.z.number(this._elevationStart,this._elevationTarget,o)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(o){if(!this.transformCameraUpdate)return;let h=o.clone(),{center:m,zoom:g,pitch:b,bearing:D,elevation:T}=this.transformCameraUpdate(h);m&&(h.center=m),g!==void 0&&(h.zoom=g),b!==void 0&&(h.pitch=b),D!==void 0&&(h.bearing=D),T!==void 0&&(h.elevation=T),this.transform.apply(h)}_fireMoveEvents(o){this.fire(new s.k("move",o)),this._zooming&&this.fire(new s.k("zoom",o)),this._rotating&&this.fire(new s.k("rotate",o)),this._pitching&&this.fire(new s.k("pitch",o))}_afterEase(o,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;let m=this._zooming,g=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new s.k("zoomend",o)),g&&this.fire(new s.k("rotateend",o)),b&&this.fire(new s.k("pitchend",o)),this.fire(new s.k("moveend",o))}flyTo(o,h){var m;if(!o.essential&&v.prefersReducedMotion){let Vn=s.L(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Vn,h)}this.stop(),o=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.b7},o);let g=this._getTransformForUpdate(),b=this.getZoom(),D=this.getBearing(),T=this.getPitch(),I=this.getPadding(),P="bearing"in o?this._normalizeBearing(o.bearing,D):D,F="pitch"in o?+o.pitch:T,N="padding"in o?o.padding:g.padding,q=s.P.convert(o.offset),ie=g.centerPoint.add(q),ne=g.pointLocation(ie),{center:ae,zoom:J}=g.getConstrained(s.M.convert(o.center||ne),(m=o.zoom)!==null&&m!==void 0?m:b);this._normalizeCenter(ae);let pe=g.zoomScale(J-b),Ie=g.project(ne),oe=g.project(ae).sub(Ie),be=o.curve,Ee=Math.max(g.width,g.height),ke=Ee/pe,Fe=oe.mag();if("minZoom"in o){let Vn=s.ac(Math.min(o.minZoom,b,J),g.minZoom,g.maxZoom),Xt=Ee/g.zoomScale(Vn-b);be=Math.sqrt(Xt/Fe*2)}let Ze=be*be;function Ge(Vn){let Xt=(ke*ke-Ee*Ee+(Vn?-1:1)*Ze*Ze*Fe*Fe)/(2*(Vn?ke:Ee)*Ze*Fe);return Math.log(Math.sqrt(Xt*Xt+1)-Xt)}function ot(Vn){return(Math.exp(Vn)-Math.exp(-Vn))/2}function pt(Vn){return(Math.exp(Vn)+Math.exp(-Vn))/2}let cn=Ge(!1),gt=function(Vn){return pt(cn)/pt(cn+be*Vn)},Kt=function(Vn){return Ee*((pt(cn)*(ot(Xt=cn+be*Vn)/pt(Xt))-ot(cn))/Ze)/Fe;var Xt},ln=(Ge(!0)-cn)/be;if(Math.abs(Fe)<1e-6||!isFinite(ln)){if(Math.abs(Ee-ke)<1e-6)return this.easeTo(o,h);let Vn=ke<Ee?-1:1;ln=Math.abs(Math.log(ke/Ee))/be,Kt=function(){return 0},gt=function(Xt){return Math.exp(Vn*be*Xt)}}return o.duration="duration"in o?+o.duration:1e3*ln/("screenSpeed"in o?+o.screenSpeed/be:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=D!==P,this._pitching=F!==T,this._padding=!g.isPaddingEqual(N),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(ae),this._ease(Vn=>{let Xt=Vn*ln,fn=1/gt(Xt);g.zoom=Vn===1?J:b+g.scaleZoom(fn),this._rotating&&(g.bearing=s.z.number(D,P,Vn)),this._pitching&&(g.pitch=s.z.number(T,F,Vn)),this._padding&&(g.interpolatePadding(I,N,Vn),ie=g.centerPoint.add(q)),this.terrain&&!o.freezeElevation&&this._updateElevation(Vn);let wn=Vn===1?ae:g.unproject(Ie.add(oe.mult(Kt(Xt))).mult(fn));g.setLocationAtPoint(g.renderWorldCopies?wn.wrap():wn,ie),this._applyUpdatedTransform(g),this._fireMoveEvents(h)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(h)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,h)}if(!o){let m=this.handlers;m&&m.stop(!1)}return this}_ease(o,h,m){m.animate===!1||m.duration===0?(o(1),h()):(this._easeStart=v.now(),this._easeOptions=m,this._onEaseFrame=o,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(o,h){o=s.b1(o,-180,180);let m=Math.abs(o-h);return Math.abs(o-360-h)<m&&(o-=360),Math.abs(o+360-h)<m&&(o+=360),o}_normalizeCenter(o){let h=this.transform;if(!h.renderWorldCopies||h.lngRange)return;let m=o.lng-h.center.lng;o.lng+=m>180?-360:m<-180?360:0}queryTerrainElevation(o){return this.terrain?this.terrain.getElevationForLngLatZoom(s.M.convert(o),this.transform.tileZoom)-this.transform.elevation:null}}let uf={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class sa{constructor(o=uf){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=o}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options.compact,this._container=x.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=x.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,h){let m=this._map._getUIString(`AttributionControl.${h}`);o.title=m,o.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){let g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}let h=this._map.style.sourceCaches;for(let g in h){let b=h[g];if(b.used||b.usedForTerrain){let D=b.getSource();D.attribution&&o.indexOf(D.attribution)<0&&o.push(D.attribution)}}o=o.filter(g=>String(g).trim()),o.sort((g,b)=>g.length-b.length),o=o.filter((g,b)=>{for(let D=b+1;D<o.length;D++)if(o[D].indexOf(g)>=0)return!1;return!0});let m=o.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,o.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class m_{constructor(o={}){this._updateCompact=()=>{let h=this._container.children;if(h.length){let m=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=o}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=x.create("div","maplibregl-ctrl");let h=x.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){x.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class lu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){let h=++this._id;return this._queue.push({callback:o,id:h,cancelled:!1}),h}remove(o){let h=this._currentlyRunning,m=h?this._queue.concat(h):this._queue;for(let g of m)if(g.id===o)return void(g.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let h=this._currentlyRunning=this._queue;this._queue=[];for(let m of h)if(!m.cancelled&&(m.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var ki=s.X([{name:"a_pos3d",type:"Int16",components:3}]);class qi extends s.E{constructor(o){super(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,o.usedForTerrain=!0,o.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,h){this.sourceCache.update(o,h),this._renderableTilesKeys=[];let m={};for(let g of o.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))m[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),s.aN(g.posMatrix,0,s.W,0,s.W,0,1),this._tiles[g.key]=new bs(g,this.tileSize));for(let g in this._tiles)m[g]||delete this._tiles[g]}freeRtt(o){for(let h in this._tiles){let m=this._tiles[h];(!o||m.tileID.equals(o)||m.tileID.isChildOf(o)||o.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o){let h={};for(let m of this._renderableTilesKeys){let g=this._tiles[m].tileID;if(g.canonical.equals(o.canonical)){let b=o.clone();b.posMatrix=new Float64Array(16),s.aN(b.posMatrix,0,s.W,0,s.W,0,1),h[m]=b}else if(g.canonical.isChildOf(o.canonical)){let b=o.clone();b.posMatrix=new Float64Array(16);let D=g.canonical.z-o.canonical.z,T=g.canonical.x-(g.canonical.x>>D<<D),I=g.canonical.y-(g.canonical.y>>D<<D),P=s.W>>D;s.aN(b.posMatrix,0,P,0,P,0,1),s.H(b.posMatrix,b.posMatrix,[-T*P,-I*P,0]),h[m]=b}else if(o.canonical.isChildOf(g.canonical)){let b=o.clone();b.posMatrix=new Float64Array(16);let D=o.canonical.z-g.canonical.z,T=o.canonical.x-(o.canonical.x>>D<<D),I=o.canonical.y-(o.canonical.y>>D<<D),P=s.W>>D;s.aN(b.posMatrix,0,s.W,0,s.W,0,1),s.H(b.posMatrix,b.posMatrix,[T*P,I*P,0]),s.J(b.posMatrix,b.posMatrix,[1/2**D,1/2**D,0]),h[m]=b}}return h}getSourceTile(o,h){let m=this.sourceCache._source,g=o.overscaledZ-this.deltaZoom;if(g>m.maxzoom&&(g=m.maxzoom),g<m.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(g).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!b||!b.dem)&&h)for(;g>=m.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(o.scaledTo(g--).key);return b}tilesAfterTime(o=Date.now()){return Object.values(this._tiles).filter(h=>h.timeAdded>=o)}}class g_{constructor(o,h,m){this.painter=o,this.sourceCache=new qi(h),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,h,m,g=s.W){var b;if(!(h>=0&&h<g&&m>=0&&m<g))return 0;let D=this.getTerrainData(o),T=(b=D.tile)===null||b===void 0?void 0:b.dem;if(!T)return 0;let I=function(ne,ae,J){var pe=ae[0],Ie=ae[1];return ne[0]=J[0]*pe+J[4]*Ie+J[12],ne[1]=J[1]*pe+J[5]*Ie+J[13],ne}([],[h/g*s.W,m/g*s.W],D.u_terrain_matrix),P=[I[0]*T.dim,I[1]*T.dim],F=Math.floor(P[0]),N=Math.floor(P[1]),q=P[0]-F,ie=P[1]-N;return T.get(F,N)*(1-q)*(1-ie)+T.get(F+1,N)*q*(1-ie)+T.get(F,N+1)*(1-q)*ie+T.get(F+1,N+1)*q*ie}getElevationForLngLatZoom(o,h){let{tileID:m,mercatorX:g,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(o,h);return this.getElevation(m,g%s.W,b%s.W,s.W)}getElevation(o,h,m,g=s.W){return this.getDEMElevation(o,h,m,g)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){let g=this.painter.context,b=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new rt(g,b,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new rt(g,new s.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.an([])}let h=this.sourceCache.getSourceTile(o,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){let g=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new rt(g,h.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),h.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}let m=h&&h+h.tileID.key+o.key;if(m&&!this._demMatrixCache[m]){let g=this.sourceCache.sourceCache._source.maxzoom,b=o.canonical.z-h.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=g?b=o.canonical.z-g:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let D=o.canonical.x-(o.canonical.x>>b<<b),T=o.canonical.y-(o.canonical.y>>b<<b),I=s.b9(new Float64Array(16),[1/(s.W<<b),1/(s.W<<b),0]);s.H(I,I,[D*s.W,T*s.W,0]),this._demMatrixCache[o.key]={matrix:I,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(o){let h=this.painter,m=h.width/devicePixelRatio,g=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new rt(h.context,{width:m,height:g,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new rt(h.context,{width:m,height:g,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(m,g,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,m,g))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,D=0;b<this._coordsTextureSize;b++)for(let T=0;T<this._coordsTextureSize;T++,D+=4)h[D+0]=255&T,h[D+1]=255&b,h[D+2]=T>>8<<4|b>>8,h[D+3]=0;let m=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),g=new rt(o,m,o.gl.RGBA,{premultiply:!1});return g.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(o){this.painter.maybeDrawDepthAndCoords(!0);let h=new Uint8Array(4),m=this.painter.context,g=m.gl,b=Math.round(o.x*this.painter.pixelRatio/devicePixelRatio),D=Math.round(o.y*this.painter.pixelRatio/devicePixelRatio),T=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(b,T-D-1,1,1,g.RGBA,g.UNSIGNED_BYTE,h),m.bindFramebuffer.set(null);let I=h[0]+(h[2]>>4<<8),P=h[1]+((15&h[2])<<8),F=this.coordsIndex[255-h[3]],N=F&&this.sourceCache.getTileByID(F);if(!N)return null;let q=this._coordsTextureSize,ie=(1<<N.tileID.canonical.z)*q;return new s.Y((N.tileID.canonical.x*q+I)/ie+N.tileID.wrap,(N.tileID.canonical.y*q+P)/ie,this.getElevation(N.tileID,I,P,q))}depthAtPoint(o){let h=new Uint8Array(4),m=this.painter.context,g=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,h),m.bindFramebuffer.set(null),(h[0]/16777216+h[1]/65536+h[2]/256+h[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let o=this.painter.context,h=new s.ba,m=new s.aX,g=this.meshSize,b=s.W/g,D=g*g;for(let N=0;N<=g;N++)for(let q=0;q<=g;q++)h.emplaceBack(q*b,N*b,0);for(let N=0;N<D;N+=g+1)for(let q=0;q<g;q++)m.emplaceBack(q+N,g+q+N+1,g+q+N+2),m.emplaceBack(q+N,g+q+N+2,q+N+1);let T=h.length,I=T+2*(g+1);for(let N of[0,1])for(let q=0;q<=g;q++)for(let ie of[0,1])h.emplaceBack(q*b,N*s.W,ie);for(let N=0;N<2*g;N+=2)m.emplaceBack(I+N,I+N+1,I+N+3),m.emplaceBack(I+N,I+N+3,I+N+2),m.emplaceBack(T+N,T+N+3,T+N+1),m.emplaceBack(T+N,T+N+2,T+N+3);let P=h.length,F=P+2*(g+1);for(let N of[0,1])for(let q=0;q<=g;q++)for(let ie of[0,1])h.emplaceBack(N*s.W,q*b,ie);for(let N=0;N<2*g;N+=2)m.emplaceBack(P+N,P+N+1,P+N+3),m.emplaceBack(P+N,P+N+3,P+N+2),m.emplaceBack(F+N,F+N+3,F+N+1),m.emplaceBack(F+N,F+N+2,F+N+3);return this._mesh={indexBuffer:o.createIndexBuffer(m),vertexBuffer:o.createVertexBuffer(h,ki.members),segments:s.$.simpleSegment(0,0,h.length,m.length)},this._mesh}getMeshFrameDelta(o){return 2*Math.PI*s.bb/Math.pow(2,o)/5}getMinTileElevationForLngLatZoom(o,h){var m;let{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(o,h);return(m=this.getMinMaxElevation(g).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(o){let h=this.getTerrainData(o).tile,m={minElevation:null,maxElevation:null};return h&&h.dem&&(m.minElevation=h.dem.min*this.exaggeration,m.maxElevation=h.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(o,h){let m=s.Y.fromLngLat(o.wrap()),g=(1<<h)*s.W,b=m.x*g,D=m.y*g,T=Math.floor(b/s.W),I=Math.floor(D/s.W);return{tileID:new s.Q(h,0,h,T,I),mercatorX:b,mercatorY:D}}}class uu{constructor(o,h,m){this._context=o,this._size=h,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){let h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new rt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(m.texture),{id:o,fbo:h,texture:m,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(h=>o.id!==h),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(let h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(let o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(o=>!o.inUse)===!1}}let Ja={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class df{constructor(o,h){this.painter=o,this.terrain=h,this.pool=new uu(o.context,30,h.sourceCache.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(m=>!o._layers[m].isHidden(h)),this._coordsDescendingInv={};for(let m in o.sourceCaches){this._coordsDescendingInv[m]={};let g=o.sourceCaches[m].getVisibleCoordinates();for(let b of g){let D=this.terrain.sourceCache.getTerrainCoords(b);for(let T in D)this._coordsDescendingInv[m][T]||(this._coordsDescendingInv[m][T]=[]),this._coordsDescendingInv[m][T].push(D[T])}}this._coordsDescendingInvStr={};for(let m of o._order){let g=o._layers[m],b=g.source;if(Ja[g.type]&&!this._coordsDescendingInvStr[b]){this._coordsDescendingInvStr[b]={};for(let D in this._coordsDescendingInv[b])this._coordsDescendingInvStr[b][D]=this._coordsDescendingInv[b][D].map(T=>T.key).sort().join()}}for(let m of this._renderableTiles)for(let g in this._coordsDescendingInvStr){let b=this._coordsDescendingInvStr[g][m.tileID.key];b&&b!==m.rttCoords[g]&&(m.rtt=[])}}renderLayer(o){if(o.isHidden(this.painter.transform.zoom))return!1;let h=o.type,m=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(Ja[h]&&(this._prevType&&Ja[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(o.id),!g))return!0;if(Ja[this._prevType]||Ja[h]&&g){this._prevType=h;let b=this._stacks.length-1,D=this._stacks[b]||[];for(let T of this._renderableTiles){if(this.pool.isFull()&&(Ad(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(T),T.rtt[b]){let P=this.pool.getObjectForId(T.rtt[b].id);if(P.stamp===T.rtt[b].stamp){this.pool.useObject(P);continue}}let I=this.pool.getOrCreateFreeObject();this.pool.useObject(I),this.pool.stampObject(I),T.rtt[b]={id:I.id,stamp:I.stamp},m.context.bindFramebuffer.set(I.fbo.framebuffer),m.context.clear({color:s.aO.transparent,stencil:0}),m.currentStencilSource=void 0;for(let P=0;P<D.length;P++){let F=m.style._layers[D[P]],N=F.source?this._coordsDescendingInv[F.source][T.tileID.key]:[T.tileID];m.context.viewport.set([0,0,I.fbo.width,I.fbo.height]),m._renderTileClippingMasks(F,N),m.renderLayer(m,m.style.sourceCaches[F.source],F,N),F.source&&(T.rttCoords[F.source]=this._coordsDescendingInvStr[F.source][T.tileID.key])}}return Ad(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ja[h]}return!1}}let hf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},pf=l,du={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:uf,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Vd=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},ff={showCompass:!0,showZoom:!0,visualizePitch:!1};class mf{constructor(o,h,m=!1){this.mousedown=D=>{this.startMouse(s.e({},D,{ctrlKey:!0,preventDefault:()=>D.preventDefault()}),x.mousePos(this.element,D)),x.addEventListener(window,"mousemove",this.mousemove),x.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=D=>{this.moveMouse(D,x.mousePos(this.element,D))},this.mouseup=D=>{this.mouseRotate.dragEnd(D),this.mousePitch&&this.mousePitch.dragEnd(D),this.offTemp()},this.touchstart=D=>{D.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,D.targetTouches)[0],this.startTouch(D,this._startPos),x.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.addEventListener(window,"touchend",this.touchend))},this.touchmove=D=>{D.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,D.targetTouches)[0],this.moveTouch(D,this._lastPos))},this.touchend=D=>{D.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let g=o.dragRotate._mouseRotate.getClickTolerance(),b=o.dragRotate._mousePitch.getClickTolerance();this.element=h,this.mouseRotate=nl({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:D,clickTolerance:T,bearingDegreesPerPixelMoved:I=.8})=>{let P=new Ot;return new tl({clickTolerance:T,move:(F,N)=>({bearingDelta:(N.x-F.x)*I}),moveStateManager:P,enable:D,assignEvents:Vd})})({clickTolerance:g,enable:!0}),this.map=o,m&&(this.mousePitch=il({clickTolerance:b,enable:!0}),this.touchPitch=(({enable:D,clickTolerance:T,pitchDegreesPerPixelMoved:I=-.5})=>{let P=new Ot;return new tl({clickTolerance:T,move:(F,N)=>({pitchDelta:(N.y-F.y)*I}),moveStateManager:P,enable:D,assignEvents:Vd})})({clickTolerance:b,enable:!0})),x.addEventListener(h,"mousedown",this.mousedown),x.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(h,"touchcancel",this.reset)}startMouse(o,h){this.mouseRotate.dragStart(o,h),this.mousePitch&&this.mousePitch.dragStart(o,h),x.disableDrag()}startTouch(o,h){this.touchRotate.dragStart(o,h),this.touchPitch&&this.touchPitch.dragStart(o,h),x.disableDrag()}moveMouse(o,h){let m=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(o,h)||{};if(g&&m.setBearing(m.getBearing()+g),this.mousePitch){let{pitchDelta:b}=this.mousePitch.dragMove(o,h)||{};b&&m.setPitch(m.getPitch()+b)}}moveTouch(o,h){let m=this.map,{bearingDelta:g}=this.touchRotate.dragMove(o,h)||{};if(g&&m.setBearing(m.getBearing()+g),this.touchPitch){let{pitchDelta:b}=this.touchPitch.dragMove(o,h)||{};b&&m.setPitch(m.getPitch()+b)}}off(){let o=this.element;x.removeEventListener(o,"mousedown",this.mousedown),x.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend),x.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){x.enableDrag(),x.removeEventListener(window,"mousemove",this.mousemove),x.removeEventListener(window,"mouseup",this.mouseup),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend)}}let Xa;function zd(y,o,h){let m=new s.M(y.lng,y.lat);if(y=new s.M(y.lng,y.lat),o){let g=new s.M(y.lng-360,y.lat),b=new s.M(y.lng+360,y.lat),D=h.locationPoint(y).distSqr(o);h.locationPoint(g).distSqr(o)<D?y=g:h.locationPoint(b).distSqr(o)<D&&(y=b)}for(;Math.abs(y.lng-h.center.lng)>180;){let g=h.locationPoint(y);if(g.x>=0&&g.y>=0&&g.x<=h.width&&g.y<=h.height)break;y.lng>h.center.lng?y.lng-=360:y.lng+=360}return y.lng!==m.lng&&h.locationPoint(y).y>h.height/2-h.getHorizon()?y:m}let hu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ud(y,o,h){let m=y.classList;for(let g in hu)m.remove(`maplibregl-${h}-anchor-${g}`);m.add(`maplibregl-${h}-anchor-${o}`)}class pu extends s.E{constructor(o){if(super(),this._onKeyPress=h=>{let m=h.code,g=h.charCode||h.keyCode;m!=="Space"&&m!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=h=>{let m=h.originalEvent.target,g=this._element;this._popup&&(m===g||g.contains(m))&&this.togglePopup()},this._update=h=>{var m;if(!this._map)return;let g=this._map.loaded()&&!this._map.isMoving();(h?.type==="terrain"||h?.type==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?zd(this._lngLat,this._flatPos,this._map.transform):(m=this._lngLat)===null||m===void 0?void 0:m.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(b=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D=`rotateX(${this._map.getPitch()}deg)`),h&&h.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,`${hu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${D} ${b}`),v.frameAsync(new AbortController).then(()=>{this._updateOpacity(h&&h.type==="moveend")}).catch(()=>{})},this._onMove=h=>{if(!this._isDragging){let m=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.k("dragstart"))),this.fire(new s.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.k("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(o?.opacity,o?.opacityWhenCovered),o&&o.element)this._element=o.element,this._offset=s.P.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");let h=x.createNS("http://www.w3.org/2000/svg","svg"),m=41,g=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${m}px`),h.setAttributeNS(null,"width",`${g}px`),h.setAttributeNS(null,"viewBox",`0 0 ${g} ${m}`);let b=x.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");let D=x.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill-rule","nonzero");let T=x.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");let I=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let pe of I){let Ie=x.createNS("http://www.w3.org/2000/svg","ellipse");Ie.setAttributeNS(null,"opacity","0.04"),Ie.setAttributeNS(null,"cx","10.5"),Ie.setAttributeNS(null,"cy","5.80029008"),Ie.setAttributeNS(null,"rx",pe.rx),Ie.setAttributeNS(null,"ry",pe.ry),T.appendChild(Ie)}let P=x.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill",this._color);let F=x.createNS("http://www.w3.org/2000/svg","path");F.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),P.appendChild(F);let N=x.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"opacity","0.25"),N.setAttributeNS(null,"fill","#000000");let q=x.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),N.appendChild(q);let ie=x.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ie.setAttributeNS(null,"fill","#FFFFFF");let ne=x.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");let ae=x.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#000000"),ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962");let J=x.createNS("http://www.w3.org/2000/svg","circle");J.setAttributeNS(null,"fill","#FFFFFF"),J.setAttributeNS(null,"cx","5.5"),J.setAttributeNS(null,"cy","5.5"),J.setAttributeNS(null,"r","5.4999962"),ne.appendChild(ae),ne.appendChild(J),D.appendChild(T),D.appendChild(P),D.appendChild(N),D.appendChild(ie),D.appendChild(ne),h.appendChild(D),h.setAttributeNS(null,"height",m*this._scale+"px"),h.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(h),this._offset=s.P.convert(o&&o.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),Ud(this._element,this._anchor,"marker"),o&&o.className)for(let h of o.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),o.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=s.M.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){let g=Math.abs(13.5)/Math.SQRT2;o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){let o=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:o?(o.isOpen()?o.remove():(o.setLngLat(this._lngLat),o.addTo(this._map)),this):this}_updateOpacity(o=!1){var h,m;if(!(!((h=this._map)===null||h===void 0)&&h.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(o)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let g=this._map,b=g.terrain.depthAtPoint(this._pos),D=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,D)-b<.006)return void(this._element.style.opacity=this._opacity);let T=-this._offset.y/g.transform._pixelPerMeter,I=Math.sin(g.getPitch()*Math.PI/180)*T,P=g.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),F=g.transform.lngLatToCameraDepth(this._lngLat,D+I)-P>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&F&&this._popup.remove(),this._element.style.opacity=F?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(o){return this._offset=s.P.convert(o),this._update(),this}addClassName(o){this._element.classList.add(o)}removeClassName(o){this._element.classList.remove(o)}toggleClassName(o){return this._element.classList.toggle(o)}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(o,h){return o===void 0&&h===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),o!==void 0&&(this._opacity=o),h!==void 0&&(this._opacityWhenCovered=h),this._map&&this._updateOpacity(!0),this}}let $d={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},sl=0,lc=!1,Hd={maxWidth:100,unit:"metric"};function qd(y,o,h){let m=h&&h.maxWidth||100,g=y._container.clientHeight/2,b=y.unproject([0,g]),D=y.unproject([m,g]),T=b.distanceTo(D);if(h&&h.unit==="imperial"){let I=3.2808*T;I>5280?uc(o,m,I/5280,y._getUIString("ScaleControl.Miles")):uc(o,m,I,y._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?uc(o,m,T/1852,y._getUIString("ScaleControl.NauticalMiles")):T>=1e3?uc(o,m,T/1e3,y._getUIString("ScaleControl.Kilometers")):uc(o,m,T,y._getUIString("ScaleControl.Meters"))}function uc(y,o,h,m){let g=function(b){let D=Math.pow(10,`${Math.floor(b)}`.length-1),T=b/D;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(I){let P=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*P)/P}(T),D*T}(h);y.style.width=o*(g/h)+"px",y.innerHTML=`${g}&nbsp;${m}`}let gf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},_f=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Gd(y){if(y){if(typeof y=="number"){let o=Math.round(Math.abs(y)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,y),"top-left":new s.P(o,o),"top-right":new s.P(-o,o),bottom:new s.P(0,-y),"bottom-left":new s.P(o,-o),"bottom-right":new s.P(-o,-o),left:new s.P(y,0),right:new s.P(-y,0)}}if(y instanceof s.P||Array.isArray(y)){let o=s.P.convert(y);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:s.P.convert(y.center||[0,0]),top:s.P.convert(y.top||[0,0]),"top-left":s.P.convert(y["top-left"]||[0,0]),"top-right":s.P.convert(y["top-right"]||[0,0]),bottom:s.P.convert(y.bottom||[0,0]),"bottom-left":s.P.convert(y["bottom-left"]||[0,0]),"bottom-right":s.P.convert(y["bottom-right"]||[0,0]),left:s.P.convert(y.left||[0,0]),right:s.P.convert(y.right||[0,0])}}return Gd(new s.P(0,0))}let __=l;r.AJAXError=s.be,r.Evented=s.E,r.LngLat=s.M,r.MercatorCoordinate=s.Y,r.Point=s.P,r.addProtocol=s.bf,r.config=s.a,r.removeProtocol=s.bg,r.AttributionControl=sa,r.BoxZoomHandler=ia,r.CanvasSource=ta,r.CooperativeGesturesHandler=Vt,r.DoubleClickZoomHandler=cf,r.DragPanHandler=f_,r.DragRotateHandler=ra,r.EdgeInsets=Xc,r.FullscreenControl=class extends s.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var o;let h=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((o=h?.shadowRoot)===null||o===void 0)&&o.fullscreenElement;)h=h.shadowRoot.fullscreenElement;h===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){x.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let y=this._fullscreenButton=x.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);x.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},r.GeoJSONSource=Mo,r.GeolocateControl=class extends s.E{constructor(y){super(),this._onSuccess=o=>{if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new s.k("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.k("geolocate",o)),this._finish()}},this._updateCamera=o=>{let h=new s.M(o.coords.longitude,o.coords.latitude),m=o.coords.accuracy,g=this._map.getBearing(),b=s.e({bearing:g},this.options.fitBoundsOptions),D=Ci.fromLngLat(h,m);this._map.fitBounds(D,b,{geolocateSource:!0})},this._updateMarker=o=>{if(o){let h=new s.M(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=o=>{if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&lc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.k("error",o)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=o=>{if(this._map){if(this._container.addEventListener("contextmenu",h=>h.preventDefault()),this._geolocateButton=x.create("button","maplibregl-ctrl-geolocate",this._container),x.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",o===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");let h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{let h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new pu({element:this._dotElement}),this._circleElement=x.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||h.originalEvent&&h.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.k("trackuserlocationend")))})}},this.options=s.e({},$d,y)}onAdd(y){return this._map=y,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return s._(this,arguments,void 0,function*(o=!1){if(Xa!==void 0&&!o)return Xa;if(window.navigator.permissions===void 0)return Xa=!!window.navigator.geolocation,Xa;try{Xa=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Xa=!!window.navigator.geolocation}return Xa})}().then(o=>this._setupUI(o)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,sl=0,lc=!1}_isOutOfMapMaxBounds(y){let o=this._map.getMaxBounds(),h=y.coords;return o&&(h.longitude<o.getWest()||h.longitude>o.getEast()||h.latitude<o.getSouth()||h.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let y=this._map.getBounds(),o=y.getSouthEast(),h=y.getNorthEast(),m=o.distanceTo(h),g=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":sl--,lc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),sl++,sl>1?(y={maximumAge:6e5,timeout:0},lc=!0):(y=this.options.positionOptions,lc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},r.Hash=rf,r.ImageSource=$i,r.KeyboardHandler=Eo,r.LngLatBounds=Ci,r.LogoControl=m_,r.Map=class extends cs{constructor(y){if(s.bc.mark(s.bd.create),(y=s.e({},du,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Rd(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._contextLost=o=>{o.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.k("webglcontextlost",{originalEvent:o}))},this._contextRestored=o=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.k("webglcontextrestored",{originalEvent:o}))},this._onMapScroll=o=>{if(o.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new lu,this._controls=[],this._mapId=s.a3(),this._locale=s.e({},hf,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=fe.addThrottleControl(()=>this.isMoving()),this._requestManager=new ye(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let o=!1,h=nf(m=>{this._trackResize&&!this._removed&&this.resize(m)._update()},50);this._resizeObserver=new ResizeObserver(m=>{o?h(m):o=!0}),this._resizeObserver.observe(this._container)}this.handlers=new lf(this,y),this._hash=y.hash&&new rf(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,s.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new sa(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new m_,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new s.k(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new s.k(`${o.dataType}dataloading`,o))}),this.on("dataabort",o=>{this.fire(new s.k("sourcedataabort",o))})}_getMapId(){return this._mapId}addControl(y,o){if(o===void 0&&(o=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new s.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let h=y.onAdd(this);this._controls.push(y);let m=this._controlPositions[o];return o.indexOf("bottom")!==-1?m.insertBefore(h,m.firstChild):m.appendChild(h),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new s.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let o=this._controls.indexOf(y);return o>-1&&this._controls.splice(o,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,o,h,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(h,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,o,h,m)}resize(y){var o;let h=this._containerDimensions(),m=h[0],g=h[1],b=this._getClampedPixelRatio(m,g);if(this._resizeCanvas(m,g,b),this.painter.resize(m,g,b),this.painter.overLimit()){let T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];let I=this._getClampedPixelRatio(m,g);this._resizeCanvas(m,g,I),this.painter.resize(m,g,I)}this.transform.resize(m,g),(o=this._requestedCameraState)===null||o===void 0||o.resize(m,g);let D=!this._moving;return D&&(this.stop(),this.fire(new s.k("movestart",y)).fire(new s.k("move",y))),this.fire(new s.k("resize",y)),D&&this.fire(new s.k("moveend",y)),this}_getClampedPixelRatio(y,o){let{0:h,1:m}=this._maxCanvasSize,g=this.getPixelRatio(),b=y*g,D=o*g;return Math.min(b>h?h/b:1,D>m?m/D:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Ci.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(s.M.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(s.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,o,h){if(y==="mouseenter"||y==="mouseover"){let m=!1;return{layer:o,listener:h,delegates:{mousemove:b=>{let D=this.getLayer(o)?this.queryRenderedFeatures(b.point,{layers:[o]}):[];D.length?m||(m=!0,h.call(this,new os(y,this,b.originalEvent,{features:D}))):m=!1},mouseout:()=>{m=!1}}}}if(y==="mouseleave"||y==="mouseout"){let m=!1;return{layer:o,listener:h,delegates:{mousemove:D=>{(this.getLayer(o)?this.queryRenderedFeatures(D.point,{layers:[o]}):[]).length?m=!0:m&&(m=!1,h.call(this,new os(y,this,D.originalEvent)))},mouseout:D=>{m&&(m=!1,h.call(this,new os(y,this,D.originalEvent)))}}}}{let m=g=>{let b=this.getLayer(o)?this.queryRenderedFeatures(g.point,{layers:[o]}):[];b.length&&(g.features=b,h.call(this,g),delete g.features)};return{layer:o,listener:h,delegates:{[y]:m}}}}on(y,o,h){if(h===void 0)return super.on(y,o);let m=this._createDelegatedListener(y,o,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(m);for(let g in m.delegates)this.on(g,m.delegates[g]);return this}once(y,o,h){if(h===void 0)return super.once(y,o);let m=this._createDelegatedListener(y,o,h);for(let g in m.delegates)this.once(g,m.delegates[g]);return this}off(y,o,h){return h===void 0?super.off(y,o):(this._delegatedListeners&&this._delegatedListeners[y]&&(m=>{let g=this._delegatedListeners[y];for(let b=0;b<g.length;b++){let D=g[b];if(D.layer===o&&D.listener===h){for(let T in D.delegates)this.off(T,D.delegates[T]);return g.splice(b,1),this}}})(),this)}queryRenderedFeatures(y,o){if(!this.style)return[];let h,m=y instanceof s.P||Array.isArray(y),g=m?y:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(m?{}:y)||{},g instanceof s.P||typeof g[0]=="number")h=[s.P.convert(g)];else{let b=s.P.convert(g[0]),D=s.P.convert(g[1]);h=[b,new s.P(D.x,b.y),D,new s.P(b.x,D.y),b]}return this.style.queryRenderedFeatures(h,o,this.transform)}querySourceFeatures(y,o){return this.style.querySourceFeatures(y,o)}setStyle(y,o){return(o=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(y,o))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){let o=this._locale[y];if(o==null)throw new Error(`Missing UI string '${y}'`);return o}_updateStyle(y,o){if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,o));let h=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new xs(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,o,h):this.style.loadJSON(y,o,h),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new xs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,o){if(typeof y=="string"){let h=this._requestManager.transformRequest(y,"Style");s.h(h,new AbortController).then(m=>{this._updateDiff(m.data,o)}).catch(m=>{m&&this.fire(new s.j(m))})}else typeof y=="object"&&this._updateDiff(y,o)}_updateDiff(y,o){try{this.style.setState(y,o)&&this._update(!0)}catch(h){s.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(y,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(y,o){return this._lazyInitEmptyStyle(),this.style.addSource(y,o),this._update(!0)}isSourceLoaded(y){let o=this.style&&this.style.sourceCaches[y];if(o!==void 0)return o.loaded();this.fire(new s.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){let o=this.style.sourceCaches[y.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&o.reload();for(let h in this.style._layers){let m=this.style._layers[h];m.type==="hillshade"&&m.source===y.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new g_(this.painter,o,y),this.painter.renderToTexture=new df(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=h=>{h.dataType==="style"?this.terrain.sourceCache.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new s.k("terrain",{terrain:y})),this}getTerrain(){var y,o;return(o=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&o!==void 0?o:null}areTilesLoaded(){let y=this.style&&this.style.sourceCaches;for(let o in y){let h=y[o]._tiles;for(let m in h){let g=h[m];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,o,h={}){let{pixelRatio:m=1,sdf:g=!1,stretchX:b,stretchY:D,content:T}=h;if(this._lazyInitEmptyStyle(),!(o instanceof HTMLImageElement||s.b(o))){if(o.width===void 0||o.height===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:I,height:P,data:F}=o,N=o;return this.style.addImage(y,{data:new s.R({width:I,height:P},new Uint8Array(F)),pixelRatio:m,stretchX:b,stretchY:D,content:T,sdf:g,version:0,userImage:N}),N.onAdd&&N.onAdd(this,y),this}}{let{width:I,height:P,data:F}=v.getImageData(o);this.style.addImage(y,{data:new s.R({width:I,height:P},F),pixelRatio:m,stretchX:b,stretchY:D,content:T,sdf:g,version:0})}}updateImage(y,o){let h=this.style.getImage(y);if(!h)return this.fire(new s.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let m=o instanceof HTMLImageElement||s.b(o)?v.getImageData(o):o,{width:g,height:b,data:D}=m;if(g===void 0||b===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==h.data.width||b!==h.data.height)return this.fire(new s.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let T=!(o instanceof HTMLImageElement||s.b(o));return h.data.replace(D,T),this.style.updateImage(y,h),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new s.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return fe.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,o){return this._lazyInitEmptyStyle(),this.style.addLayer(y,o),this._update(!0)}moveLayer(y,o){return this.style.moveLayer(y,o),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,o,h){return this.style.setLayerZoomRange(y,o,h),this._update(!0)}setFilter(y,o,h={}){return this.style.setFilter(y,o,h),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,o,h,m={}){return this.style.setPaintProperty(y,o,h,m),this._update(!0)}getPaintProperty(y,o){return this.style.getPaintProperty(y,o)}setLayoutProperty(y,o,h,m={}){return this.style.setLayoutProperty(y,o,h,m),this._update(!0)}getLayoutProperty(y,o){return this.style.getLayoutProperty(y,o)}setGlyphs(y,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,o,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,o,h,m=>{m||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,o,h=>{h||this._update(!0)}),this}setLight(y,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,o),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,o){return this.style.setFeatureState(y,o),this._update()}removeFeatureState(y,o){return this.style.removeFeatureState(y,o),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,o=0;return this._container&&(y=this._container.clientWidth||400,o=this._container.clientHeight||300),[y,o]}_setupContainer(){let y=this._container;y.classList.add("maplibregl-map");let o=this._canvasContainer=x.create("div","maplibregl-canvas-container",y);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=x.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");let h=this._containerDimensions(),m=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],m);let g=this._controlContainer=x.create("div","maplibregl-control-container",y),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(D=>{b[D]=x.create("div",`maplibregl-ctrl-${D} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,o,h){this._canvas.width=Math.floor(h*y),this._canvas.height=Math.floor(h*o),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${o}px`}_setupPainter(){let y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},o=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{o={requestedAttributes:y},m&&(o.statusMessage=m.statusMessage,o.type=m.type)},{once:!0});let h=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!h){let m="Failed to initialize WebGL";throw o?(o.message=m,new Error(JSON.stringify(o))):new Error(m)}this.painter=new i_(h,this.transform),O.testSupport(h)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){let o=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let h=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let g=this.transform.zoom,b=v.now();this.style.zoomHistory.update(g,b);let D=new s.a8(g,{now:b,fadeDuration:o,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),T=D.crossFadingFactor();T===1&&T===this._crossFadingFactor||(h=!0,this._crossFadingFactor=T),this.style.update(D)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,showPadding:this.showPadding}),this.fire(new s.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.bc.mark(s.bd.load),this.fire(new s.k("load"))),this.style&&(this.style.hasTransitions()||h)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let m=this._sourcesDirty||this._styleDirty||this._placementDirty;return m||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.k("idle")),!this._loaded||this._fullyLoaded||m||(this._fullyLoaded=!0,s.bc.mark(s.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(let h of this._controls)h.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),fe.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();let o=this.painter.context.gl.getExtension("WEBGL_lose_context");o&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),x.remove(this._canvasContainer),x.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),s.bc.clearMetrics(),this._removed=!0,this.fire(new s.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,v.frameAsync(this._frameRequest).then(y=>{s.bc.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return pf}getCameraTargetElevation(){return this.transform.elevation}},r.MapMouseEvent=os,r.MapTouchEvent=wa,r.MapWheelEvent=sf,r.Marker=pu,r.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{let o=this._map.getZoom(),h=o===this._map.getMaxZoom(),m=o===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{let o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=o},this._setButtonTitle=(o,h)=>{let m=this._map._getUIString(`NavigationControl.${h}`);o.title=m,o.setAttribute("aria-label",m)},this.options=s.e({},ff,y),this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),x.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),x.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=x.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new mf(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,o){let h=x.create("button",y,this._container);return h.type="button",h.addEventListener("click",o),h}},r.Popup=class extends s.E{constructor(y){super(),this.remove=()=>(this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.k("close"))),this),this._onMouseUp=o=>{this._update(o.point)},this._onMouseMove=o=>{this._update(o.point)},this._onDrag=o=>{this._update(o.point)},this._update=o=>{var h;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=x.create("div","maplibregl-popup",this._map.getContainer()),this._tip=x.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let T of this.options.className.split(" "))this._container.classList.add(T);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?zd(this._lngLat,this._flatPos,this._map.transform):(h=this._lngLat)===null||h===void 0?void 0:h.wrap(),this._trackPointer&&!o)return;let m=this._flatPos=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&o?o:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor,b=Gd(this.options.offset);if(!g){let T=this._container.offsetWidth,I=this._container.offsetHeight,P;P=m.y+b.bottom.y<I?["top"]:m.y>this._map.transform.height-I?["bottom"]:[],m.x<T/2?P.push("left"):m.x>this._map.transform.width-T/2&&P.push("right"),g=P.length===0?"bottom":P.join("-")}let D=m.add(b[g]);this.options.subpixelPositioning||(D=D.round()),x.setTransform(this._container,`${hu[g]} translate(${D.x}px,${D.y}px)`),Ud(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(gf),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=s.M.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){let o=document.createDocumentFragment(),h=document.createElement("body"),m;for(h.innerHTML=y;m=h.firstChild,m;)o.appendChild(m);return this.setDOMContent(o)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=x.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let y=this._container.querySelector(_f);y&&y.focus()}},r.RasterDEMTileSource=Ya,r.RasterTileSource=Be,r.ScaleControl=class{constructor(y){this._onMove=()=>{qd(this._map,this._container,this.options)},this.setUnit=o=>{this.options.unit=o,qd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Hd),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},r.ScrollZoomHandler=Bd,r.Style=xs,r.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=x.create("button","maplibregl-ctrl-terrain",this._container),x.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){x.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},r.TwoFingersTouchPitchHandler=d_,r.TwoFingersTouchRotateHandler=of,r.TwoFingersTouchZoomHandler=u_,r.TwoFingersTouchZoomRotateHandler=ou,r.VectorTileSource=Za,r.VideoSource=rs,r.addSourceType=(y,o)=>s._(void 0,void 0,void 0,function*(){if(Qa(y))throw new Error(`A source type called "${y}" already exists.`);((h,m)=>{Ka[h]=m})(y,o)}),r.clearPrewarmedResources=function(){let y=Jt;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(ut),Jt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},r.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},r.getRTLTextPluginStatus=function(){return at().getRTLTextPluginStatus()},r.getVersion=function(){return __},r.getWorkerCount=function(){return yt.workerCount},r.getWorkerUrl=function(){return s.a.WORKER_URL},r.importScriptInWorkers=function(y){return $n().broadcast("IS",y)},r.prewarm=function(){bn().acquire(ut)},r.setMaxParallelImageRequests=function(y){s.a.MAX_PARALLEL_IMAGE_REQUESTS=y},r.setRTLTextPlugin=function(y,o){return at().setRTLTextPlugin(y,o)},r.setWorkerCount=function(y){yt.workerCount=y},r.setWorkerUrl=function(y){s.a.WORKER_URL=y}});var i=e;return i})});var MR=Oa($y=>{"use strict";$y.byteLength=GH;$y.toByteArray=ZH;$y.fromByteArray=QH;var Jo=[],Ua=[],qH=typeof Uint8Array<"u"?Uint8Array:Array,gD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Xu=0,CR=gD.length;Xu<CR;++Xu)Jo[Xu]=gD[Xu],Ua[gD.charCodeAt(Xu)]=Xu;var Xu,CR;Ua[45]=62;Ua[95]=63;function xR(e){var n=e.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");t===-1&&(t=n);var i=t===n?0:4-t%4;return[t,i]}function GH(e){var n=xR(e),t=n[0],i=n[1];return(t+i)*3/4-i}function WH(e,n,t){return(n+t)*3/4-t}function ZH(e){var n,t=xR(e),i=t[0],r=t[1],s=new qH(WH(e,i,r)),l=0,d=r>0?i-4:i,f;for(f=0;f<d;f+=4)n=Ua[e.charCodeAt(f)]<<18|Ua[e.charCodeAt(f+1)]<<12|Ua[e.charCodeAt(f+2)]<<6|Ua[e.charCodeAt(f+3)],s[l++]=n>>16&255,s[l++]=n>>8&255,s[l++]=n&255;return r===2&&(n=Ua[e.charCodeAt(f)]<<2|Ua[e.charCodeAt(f+1)]>>4,s[l++]=n&255),r===1&&(n=Ua[e.charCodeAt(f)]<<10|Ua[e.charCodeAt(f+1)]<<4|Ua[e.charCodeAt(f+2)]>>2,s[l++]=n>>8&255,s[l++]=n&255),s}function YH(e){return Jo[e>>18&63]+Jo[e>>12&63]+Jo[e>>6&63]+Jo[e&63]}function KH(e,n,t){for(var i,r=[],s=n;s<t;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),r.push(YH(i));return r.join("")}function QH(e){for(var n,t=e.length,i=t%3,r=[],s=16383,l=0,d=t-i;l<d;l+=s)r.push(KH(e,l,l+s>d?d:l+s));return i===1?(n=e[t-1],r.push(Jo[n>>2]+Jo[n<<4&63]+"==")):i===2&&(n=(e[t-2]<<8)+e[t-1],r.push(Jo[n>>10]+Jo[n>>4&63]+Jo[n<<2&63]+"=")),r.join("")}});var SR=Oa((l_e,Bc)=>{"use strict";function CD(e){"@babel/helpers - typeof";return Bc.exports=CD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bc.exports.__esModule=!0,Bc.exports.default=Bc.exports,CD(e)}Bc.exports=CD,Bc.exports.__esModule=!0,Bc.exports.default=Bc.exports});var ER=Oa((u_e,jc)=>{"use strict";var OR=SR().default;function IR(){"use strict";jc.exports=IR=function(){return n},jc.exports.__esModule=!0,jc.exports.default=jc.exports;var e,n={},t=Object.prototype,i=t.hasOwnProperty,r=Object.defineProperty||function(Te,Se,Pe){Te[Se]=Pe.value},s=typeof Symbol=="function"?Symbol:{},l=s.iterator||"@@iterator",d=s.asyncIterator||"@@asyncIterator",f=s.toStringTag||"@@toStringTag";function v(Te,Se,Pe){return Object.defineProperty(Te,Se,{value:Pe,enumerable:!0,configurable:!0,writable:!0}),Te[Se]}try{v({},"")}catch{v=function(Pe,Ke,ut){return Pe[Ke]=ut}}function x(Te,Se,Pe,Ke){var ut=Se&&Se.prototype instanceof fe?Se:fe,yt=Object.create(ut.prototype),Yt=new Ye(Ke||[]);return r(yt,"_invoke",{value:nn(Te,Pe,Yt)}),yt}function O(Te,Se,Pe){try{return{type:"normal",arg:Te.call(Se,Pe)}}catch(Ke){return{type:"throw",arg:Ke}}}n.wrap=x;var A="suspendedStart",L="suspendedYield",U="executing",te="completed",ce={};function fe(){}function ye(){}function Re(){}var Ae={};v(Ae,l,function(){return this});var We=Object.getPrototypeOf,ft=We&&We(We(lt([])));ft&&ft!==t&&i.call(ft,l)&&(Ae=ft);var Et=Re.prototype=fe.prototype=Object.create(Ae);function Pt(Te){["next","throw","return"].forEach(function(Se){v(Te,Se,function(Pe){return this._invoke(Se,Pe)})})}function rt(Te,Se){function Pe(ut,yt,Yt,Jt){var yn=O(Te[ut],Te,yt);if(yn.type!=="throw"){var bn=yn.arg,In=bn.value;return In&&OR(In)=="object"&&i.call(In,"__await")?Se.resolve(In.__await).then(function($n){Pe("next",$n,Yt,Jt)},function($n){Pe("throw",$n,Yt,Jt)}):Se.resolve(In).then(function($n){bn.value=$n,Yt(bn)},function($n){return Pe("throw",$n,Yt,Jt)})}Jt(yn.arg)}var Ke;r(this,"_invoke",{value:function(yt,Yt){function Jt(){return new Se(function(yn,bn){Pe(yt,Yt,yn,bn)})}return Ke=Ke?Ke.then(Jt,Jt):Jt()}})}function nn(Te,Se,Pe){var Ke=A;return function(ut,yt){if(Ke===U)throw new Error("Generator is already running");if(Ke===te){if(ut==="throw")throw yt;return{value:e,done:!0}}for(Pe.method=ut,Pe.arg=yt;;){var Yt=Pe.delegate;if(Yt){var Jt=Qt(Yt,Pe);if(Jt){if(Jt===ce)continue;return Jt}}if(Pe.method==="next")Pe.sent=Pe._sent=Pe.arg;else if(Pe.method==="throw"){if(Ke===A)throw Ke=te,Pe.arg;Pe.dispatchException(Pe.arg)}else Pe.method==="return"&&Pe.abrupt("return",Pe.arg);Ke=U;var yn=O(Te,Se,Pe);if(yn.type==="normal"){if(Ke=Pe.done?te:L,yn.arg===ce)continue;return{value:yn.arg,done:Pe.done}}yn.type==="throw"&&(Ke=te,Pe.method="throw",Pe.arg=yn.arg)}}}function Qt(Te,Se){var Pe=Se.method,Ke=Te.iterator[Pe];if(Ke===e)return Se.delegate=null,Pe==="throw"&&Te.iterator.return&&(Se.method="return",Se.arg=e,Qt(Te,Se),Se.method==="throw")||Pe!=="return"&&(Se.method="throw",Se.arg=new TypeError("The iterator does not provide a '"+Pe+"' method")),ce;var ut=O(Ke,Te.iterator,Se.arg);if(ut.type==="throw")return Se.method="throw",Se.arg=ut.arg,Se.delegate=null,ce;var yt=ut.arg;return yt?yt.done?(Se[Te.resultName]=yt.value,Se.next=Te.nextLoc,Se.method!=="return"&&(Se.method="next",Se.arg=e),Se.delegate=null,ce):yt:(Se.method="throw",Se.arg=new TypeError("iterator result is not an object"),Se.delegate=null,ce)}function st(Te){var Se={tryLoc:Te[0]};1 in Te&&(Se.catchLoc=Te[1]),2 in Te&&(Se.finallyLoc=Te[2],Se.afterLoc=Te[3]),this.tryEntries.push(Se)}function Je(Te){var Se=Te.completion||{};Se.type="normal",delete Se.arg,Te.completion=Se}function Ye(Te){this.tryEntries=[{tryLoc:"root"}],Te.forEach(st,this),this.reset(!0)}function lt(Te){if(Te||Te===""){var Se=Te[l];if(Se)return Se.call(Te);if(typeof Te.next=="function")return Te;if(!isNaN(Te.length)){var Pe=-1,Ke=function ut(){for(;++Pe<Te.length;)if(i.call(Te,Pe))return ut.value=Te[Pe],ut.done=!1,ut;return ut.value=e,ut.done=!0,ut};return Ke.next=Ke}}throw new TypeError(OR(Te)+" is not iterable")}return ye.prototype=Re,r(Et,"constructor",{value:Re,configurable:!0}),r(Re,"constructor",{value:ye,configurable:!0}),ye.displayName=v(Re,f,"GeneratorFunction"),n.isGeneratorFunction=function(Te){var Se=typeof Te=="function"&&Te.constructor;return!!Se&&(Se===ye||(Se.displayName||Se.name)==="GeneratorFunction")},n.mark=function(Te){return Object.setPrototypeOf?Object.setPrototypeOf(Te,Re):(Te.__proto__=Re,v(Te,f,"GeneratorFunction")),Te.prototype=Object.create(Et),Te},n.awrap=function(Te){return{__await:Te}},Pt(rt.prototype),v(rt.prototype,d,function(){return this}),n.AsyncIterator=rt,n.async=function(Te,Se,Pe,Ke,ut){ut===void 0&&(ut=Promise);var yt=new rt(x(Te,Se,Pe,Ke),ut);return n.isGeneratorFunction(Se)?yt:yt.next().then(function(Yt){return Yt.done?Yt.value:yt.next()})},Pt(Et),v(Et,f,"Generator"),v(Et,l,function(){return this}),v(Et,"toString",function(){return"[object Generator]"}),n.keys=function(Te){var Se=Object(Te),Pe=[];for(var Ke in Se)Pe.push(Ke);return Pe.reverse(),function ut(){for(;Pe.length;){var yt=Pe.pop();if(yt in Se)return ut.value=yt,ut.done=!1,ut}return ut.done=!0,ut}},n.values=lt,Ye.prototype={constructor:Ye,reset:function(Se){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Je),!Se)for(var Pe in this)Pe.charAt(0)==="t"&&i.call(this,Pe)&&!isNaN(+Pe.slice(1))&&(this[Pe]=e)},stop:function(){this.done=!0;var Se=this.tryEntries[0].completion;if(Se.type==="throw")throw Se.arg;return this.rval},dispatchException:function(Se){if(this.done)throw Se;var Pe=this;function Ke(bn,In){return Yt.type="throw",Yt.arg=Se,Pe.next=bn,In&&(Pe.method="next",Pe.arg=e),!!In}for(var ut=this.tryEntries.length-1;ut>=0;--ut){var yt=this.tryEntries[ut],Yt=yt.completion;if(yt.tryLoc==="root")return Ke("end");if(yt.tryLoc<=this.prev){var Jt=i.call(yt,"catchLoc"),yn=i.call(yt,"finallyLoc");if(Jt&&yn){if(this.prev<yt.catchLoc)return Ke(yt.catchLoc,!0);if(this.prev<yt.finallyLoc)return Ke(yt.finallyLoc)}else if(Jt){if(this.prev<yt.catchLoc)return Ke(yt.catchLoc,!0)}else{if(!yn)throw new Error("try statement without catch or finally");if(this.prev<yt.finallyLoc)return Ke(yt.finallyLoc)}}}},abrupt:function(Se,Pe){for(var Ke=this.tryEntries.length-1;Ke>=0;--Ke){var ut=this.tryEntries[Ke];if(ut.tryLoc<=this.prev&&i.call(ut,"finallyLoc")&&this.prev<ut.finallyLoc){var yt=ut;break}}yt&&(Se==="break"||Se==="continue")&&yt.tryLoc<=Pe&&Pe<=yt.finallyLoc&&(yt=null);var Yt=yt?yt.completion:{};return Yt.type=Se,Yt.arg=Pe,yt?(this.method="next",this.next=yt.finallyLoc,ce):this.complete(Yt)},complete:function(Se,Pe){if(Se.type==="throw")throw Se.arg;return Se.type==="break"||Se.type==="continue"?this.next=Se.arg:Se.type==="return"?(this.rval=this.arg=Se.arg,this.method="return",this.next="end"):Se.type==="normal"&&Pe&&(this.next=Pe),ce},finish:function(Se){for(var Pe=this.tryEntries.length-1;Pe>=0;--Pe){var Ke=this.tryEntries[Pe];if(Ke.finallyLoc===Se)return this.complete(Ke.completion,Ke.afterLoc),Je(Ke),ce}},catch:function(Se){for(var Pe=this.tryEntries.length-1;Pe>=0;--Pe){var Ke=this.tryEntries[Pe];if(Ke.tryLoc===Se){var ut=Ke.completion;if(ut.type==="throw"){var yt=ut.arg;Je(Ke)}return yt}}throw new Error("illegal catch attempt")},delegateYield:function(Se,Pe,Ke){return this.delegate={iterator:lt(Se),resultName:Pe,nextLoc:Ke},this.method==="next"&&(this.arg=e),ce}},n}jc.exports=IR,jc.exports.__esModule=!0,jc.exports.default=jc.exports});var kR=Oa((d_e,PR)=>{"use strict";var Hy=ER()();PR.exports=Hy;try{regeneratorRuntime=Hy}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Hy:Function("r","regeneratorRuntime = r")(Hy)}});var mF=Oa((mye,fF)=>{"use strict";fF.exports=typeof self=="object"?self.FormData:window.FormData});var _F=Oa((gye,gF)=>{"use strict";var Cp=null;typeof WebSocket<"u"?Cp=WebSocket:typeof MozWebSocket<"u"?Cp=MozWebSocket:typeof global<"u"?Cp=global.WebSocket||global.MozWebSocket:typeof window<"u"?Cp=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Cp=self.WebSocket||self.MozWebSocket);gF.exports=Cp});var oL=Oa((vbe,aL)=>{"use strict";var iW=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],rW=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],sW=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],aW=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],sL=(e,n,t)=>{let i=e;return typeof n=="string"||Array.isArray(n)?i=e.toLocaleString(n,t):(n===!0||t!==void 0)&&(i=e.toLocaleString(void 0,t)),i};aL.exports=(e,n)=>{if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);n=Object.assign({bits:!1,binary:!1},n);let t=n.bits?n.binary?aW:sW:n.binary?rW:iW;if(n.signed&&e===0)return` 0 ${t[0]}`;let i=e<0,r=i?"-":n.signed?"+":"";i&&(e=-e);let s;if(n.minimumFractionDigits!==void 0&&(s={minimumFractionDigits:n.minimumFractionDigits}),n.maximumFractionDigits!==void 0&&(s=Object.assign({maximumFractionDigits:n.maximumFractionDigits},s)),e<1){let v=sL(e,n.locale,s);return r+v+" "+t[0]}let l=Math.min(Math.floor(n.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),t.length-1);e/=Math.pow(n.binary?1024:1e3,l),s||(e=e.toPrecision(3));let d=sL(Number(e),n.locale,s),f=t[l];return r+d+" "+f}});var cL=Oa((hT,pT)=>{"use strict";(function(e,n){typeof hT=="object"&&typeof pT<"u"?pT.exports=n():typeof define=="function"&&define.amd?define(n):(e=typeof globalThis<"u"?globalThis:e||self).dayjs=n()})(hT,function(){"use strict";var e=1e3,n=6e4,t=36e5,i="millisecond",r="second",s="minute",l="hour",d="day",f="week",v="month",x="quarter",O="year",A="date",L="Invalid Date",U=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,te=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ce={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(st){var Je=["th","st","nd","rd"],Ye=st%100;return"["+st+(Je[(Ye-20)%10]||Je[Ye]||Je[0])+"]"}},fe=function(st,Je,Ye){var lt=String(st);return!lt||lt.length>=Je?st:""+Array(Je+1-lt.length).join(Ye)+st},ye={s:fe,z:function(st){var Je=-st.utcOffset(),Ye=Math.abs(Je),lt=Math.floor(Ye/60),Te=Ye%60;return(Je<=0?"+":"-")+fe(lt,2,"0")+":"+fe(Te,2,"0")},m:function st(Je,Ye){if(Je.date()<Ye.date())return-st(Ye,Je);var lt=12*(Ye.year()-Je.year())+(Ye.month()-Je.month()),Te=Je.clone().add(lt,v),Se=Ye-Te<0,Pe=Je.clone().add(lt+(Se?-1:1),v);return+(-(lt+(Ye-Te)/(Se?Te-Pe:Pe-Te))||0)},a:function(st){return st<0?Math.ceil(st)||0:Math.floor(st)},p:function(st){return{M:v,y:O,w:f,d,D:A,h:l,m:s,s:r,ms:i,Q:x}[st]||String(st||"").toLowerCase().replace(/s$/,"")},u:function(st){return st===void 0}},Re="en",Ae={};Ae[Re]=ce;var We="$isDayjsObject",ft=function(st){return st instanceof nn||!(!st||!st[We])},Et=function st(Je,Ye,lt){var Te;if(!Je)return Re;if(typeof Je=="string"){var Se=Je.toLowerCase();Ae[Se]&&(Te=Se),Ye&&(Ae[Se]=Ye,Te=Se);var Pe=Je.split("-");if(!Te&&Pe.length>1)return st(Pe[0])}else{var Ke=Je.name;Ae[Ke]=Je,Te=Ke}return!lt&&Te&&(Re=Te),Te||!lt&&Re},Pt=function(st,Je){if(ft(st))return st.clone();var Ye=typeof Je=="object"?Je:{};return Ye.date=st,Ye.args=arguments,new nn(Ye)},rt=ye;rt.l=Et,rt.i=ft,rt.w=function(st,Je){return Pt(st,{locale:Je.$L,utc:Je.$u,x:Je.$x,$offset:Je.$offset})};var nn=function(){function st(Ye){this.$L=Et(Ye.locale,null,!0),this.parse(Ye),this.$x=this.$x||Ye.x||{},this[We]=!0}var Je=st.prototype;return Je.parse=function(Ye){this.$d=function(lt){var Te=lt.date,Se=lt.utc;if(Te===null)return new Date(NaN);if(rt.u(Te))return new Date;if(Te instanceof Date)return new Date(Te);if(typeof Te=="string"&&!/Z$/i.test(Te)){var Pe=Te.match(U);if(Pe){var Ke=Pe[2]-1||0,ut=(Pe[7]||"0").substring(0,3);return Se?new Date(Date.UTC(Pe[1],Ke,Pe[3]||1,Pe[4]||0,Pe[5]||0,Pe[6]||0,ut)):new Date(Pe[1],Ke,Pe[3]||1,Pe[4]||0,Pe[5]||0,Pe[6]||0,ut)}}return new Date(Te)}(Ye),this.init()},Je.init=function(){var Ye=this.$d;this.$y=Ye.getFullYear(),this.$M=Ye.getMonth(),this.$D=Ye.getDate(),this.$W=Ye.getDay(),this.$H=Ye.getHours(),this.$m=Ye.getMinutes(),this.$s=Ye.getSeconds(),this.$ms=Ye.getMilliseconds()},Je.$utils=function(){return rt},Je.isValid=function(){return this.$d.toString()!==L},Je.isSame=function(Ye,lt){var Te=Pt(Ye);return this.startOf(lt)<=Te&&Te<=this.endOf(lt)},Je.isAfter=function(Ye,lt){return Pt(Ye)<this.startOf(lt)},Je.isBefore=function(Ye,lt){return this.endOf(lt)<Pt(Ye)},Je.$g=function(Ye,lt,Te){return rt.u(Ye)?this[lt]:this.set(Te,Ye)},Je.unix=function(){return Math.floor(this.valueOf()/1e3)},Je.valueOf=function(){return this.$d.getTime()},Je.startOf=function(Ye,lt){var Te=this,Se=!!rt.u(lt)||lt,Pe=rt.p(Ye),Ke=function($n,Ln){var Nn=rt.w(Te.$u?Date.UTC(Te.$y,Ln,$n):new Date(Te.$y,Ln,$n),Te);return Se?Nn:Nn.endOf(d)},ut=function($n,Ln){return rt.w(Te.toDate()[$n].apply(Te.toDate("s"),(Se?[0,0,0,0]:[23,59,59,999]).slice(Ln)),Te)},yt=this.$W,Yt=this.$M,Jt=this.$D,yn="set"+(this.$u?"UTC":"");switch(Pe){case O:return Se?Ke(1,0):Ke(31,11);case v:return Se?Ke(1,Yt):Ke(0,Yt+1);case f:var bn=this.$locale().weekStart||0,In=(yt<bn?yt+7:yt)-bn;return Ke(Se?Jt-In:Jt+(6-In),Yt);case d:case A:return ut(yn+"Hours",0);case l:return ut(yn+"Minutes",1);case s:return ut(yn+"Seconds",2);case r:return ut(yn+"Milliseconds",3);default:return this.clone()}},Je.endOf=function(Ye){return this.startOf(Ye,!1)},Je.$set=function(Ye,lt){var Te,Se=rt.p(Ye),Pe="set"+(this.$u?"UTC":""),Ke=(Te={},Te[d]=Pe+"Date",Te[A]=Pe+"Date",Te[v]=Pe+"Month",Te[O]=Pe+"FullYear",Te[l]=Pe+"Hours",Te[s]=Pe+"Minutes",Te[r]=Pe+"Seconds",Te[i]=Pe+"Milliseconds",Te)[Se],ut=Se===d?this.$D+(lt-this.$W):lt;if(Se===v||Se===O){var yt=this.clone().set(A,1);yt.$d[Ke](ut),yt.init(),this.$d=yt.set(A,Math.min(this.$D,yt.daysInMonth())).$d}else Ke&&this.$d[Ke](ut);return this.init(),this},Je.set=function(Ye,lt){return this.clone().$set(Ye,lt)},Je.get=function(Ye){return this[rt.p(Ye)]()},Je.add=function(Ye,lt){var Te,Se=this;Ye=Number(Ye);var Pe=rt.p(lt),Ke=function(Yt){var Jt=Pt(Se);return rt.w(Jt.date(Jt.date()+Math.round(Yt*Ye)),Se)};if(Pe===v)return this.set(v,this.$M+Ye);if(Pe===O)return this.set(O,this.$y+Ye);if(Pe===d)return Ke(1);if(Pe===f)return Ke(7);var ut=(Te={},Te[s]=n,Te[l]=t,Te[r]=e,Te)[Pe]||1,yt=this.$d.getTime()+Ye*ut;return rt.w(yt,this)},Je.subtract=function(Ye,lt){return this.add(-1*Ye,lt)},Je.format=function(Ye){var lt=this,Te=this.$locale();if(!this.isValid())return Te.invalidDate||L;var Se=Ye||"YYYY-MM-DDTHH:mm:ssZ",Pe=rt.z(this),Ke=this.$H,ut=this.$m,yt=this.$M,Yt=Te.weekdays,Jt=Te.months,yn=Te.meridiem,bn=function(Ln,Nn,Ui,Li){return Ln&&(Ln[Nn]||Ln(lt,Se))||Ui[Nn].slice(0,Li)},In=function(Ln){return rt.s(Ke%12||12,Ln,"0")},$n=yn||function(Ln,Nn,Ui){var Li=Ln<12?"AM":"PM";return Ui?Li.toLowerCase():Li};return Se.replace(te,function(Ln,Nn){return Nn||function(Ui){switch(Ui){case"YY":return String(lt.$y).slice(-2);case"YYYY":return rt.s(lt.$y,4,"0");case"M":return yt+1;case"MM":return rt.s(yt+1,2,"0");case"MMM":return bn(Te.monthsShort,yt,Jt,3);case"MMMM":return bn(Jt,yt);case"D":return lt.$D;case"DD":return rt.s(lt.$D,2,"0");case"d":return String(lt.$W);case"dd":return bn(Te.weekdaysMin,lt.$W,Yt,2);case"ddd":return bn(Te.weekdaysShort,lt.$W,Yt,3);case"dddd":return Yt[lt.$W];case"H":return String(Ke);case"HH":return rt.s(Ke,2,"0");case"h":return In(1);case"hh":return In(2);case"a":return $n(Ke,ut,!0);case"A":return $n(Ke,ut,!1);case"m":return String(ut);case"mm":return rt.s(ut,2,"0");case"s":return String(lt.$s);case"ss":return rt.s(lt.$s,2,"0");case"SSS":return rt.s(lt.$ms,3,"0");case"Z":return Pe}return null}(Ln)||Pe.replace(":","")})},Je.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Je.diff=function(Ye,lt,Te){var Se,Pe=this,Ke=rt.p(lt),ut=Pt(Ye),yt=(ut.utcOffset()-this.utcOffset())*n,Yt=this-ut,Jt=function(){return rt.m(Pe,ut)};switch(Ke){case O:Se=Jt()/12;break;case v:Se=Jt();break;case x:Se=Jt()/3;break;case f:Se=(Yt-yt)/6048e5;break;case d:Se=(Yt-yt)/864e5;break;case l:Se=Yt/t;break;case s:Se=Yt/n;break;case r:Se=Yt/e;break;default:Se=Yt}return Te?Se:rt.a(Se)},Je.daysInMonth=function(){return this.endOf(v).$D},Je.$locale=function(){return Ae[this.$L]},Je.locale=function(Ye,lt){if(!Ye)return this.$L;var Te=this.clone(),Se=Et(Ye,lt,!0);return Se&&(Te.$L=Se),Te},Je.clone=function(){return rt.w(this.$d,this)},Je.toDate=function(){return new Date(this.valueOf())},Je.toJSON=function(){return this.isValid()?this.toISOString():null},Je.toISOString=function(){return this.$d.toISOString()},Je.toString=function(){return this.$d.toUTCString()},st}(),Qt=nn.prototype;return Pt.prototype=Qt,[["$ms",i],["$s",r],["$m",s],["$H",l],["$W",d],["$M",v],["$y",O],["$D",A]].forEach(function(st){Qt[st[1]]=function(Je){return this.$g(Je,st[0],st[1])}}),Pt.extend=function(st,Je){return st.$i||(st(Je,nn,Pt),st.$i=!0),Pt},Pt.locale=Et,Pt.isDayjs=ft,Pt.unix=function(st){return Pt(1e3*st)},Pt.en=Ae[Re],Pt.Ls=Ae,Pt.p={},Pt})});var lL=Oa((fT,mT)=>{"use strict";(function(e,n){typeof fT=="object"&&typeof mT<"u"?mT.exports=n():typeof define=="function"&&define.amd?define(n):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_calendar=n()})(fT,function(){"use strict";return function(e,n,t){var i="h:mm A",r={lastDay:"[Yesterday at] "+i,sameDay:"[Today at] "+i,nextDay:"[Tomorrow at] "+i,nextWeek:"dddd [at] "+i,lastWeek:"[Last] dddd [at] "+i,sameElse:"MM/DD/YYYY"};n.prototype.calendar=function(s,l){var d=l||this.$locale().calendar||r,f=t(s||void 0).startOf("d"),v=this.diff(f,"d",!0),x="sameElse",O=v<-6?x:v<-1?"lastWeek":v<0?"lastDay":v<1?"sameDay":v<2?"nextDay":v<7?"nextWeek":x,A=d[O]||r[O];return typeof A=="function"?A.call(this,t()):this.format(A)}}})});var uL=Oa((gT,_T)=>{"use strict";(function(e,n){typeof gT=="object"&&typeof _T<"u"?_T.exports=n():typeof define=="function"&&define.amd?define(n):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_relativeTime=n()})(gT,function(){"use strict";return function(e,n,t){e=e||{};var i=n.prototype,r={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(d,f,v,x){return i.fromToBase(d,f,v,x)}t.en.relativeTime=r,i.fromToBase=function(d,f,v,x,O){for(var A,L,U,te=v.$locale().relativeTime||r,ce=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],fe=ce.length,ye=0;ye<fe;ye+=1){var Re=ce[ye];Re.d&&(A=x?t(d).diff(v,Re.d,!0):v.diff(d,Re.d,!0));var Ae=(e.rounding||Math.round)(Math.abs(A));if(U=A>0,Ae<=Re.r||!Re.r){Ae<=1&&ye>0&&(Re=ce[ye-1]);var We=te[Re.l];O&&(Ae=O(""+Ae)),L=typeof We=="string"?We.replace("%d",Ae):We(Ae,f,Re.l,U);break}}if(f)return L;var ft=U?te.future:te.past;return typeof ft=="function"?ft(L):ft.replace("%s",L)},i.to=function(d,f){return s(d,f,this,!0)},i.from=function(d,f){return s(d,f,this)};var l=function(d){return d.$u?t.utc():t()};i.toNow=function(d){return this.to(l(this),d)},i.fromNow=function(d){return this.from(l(this),d)}}})});var JL=Oa((Kbe,QL)=>{"use strict";var AW=1/0,RW="[object Symbol]",FW=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,LW="\\u0300-\\u036f\\ufe20-\\ufe23",NW="\\u20d0-\\u20f0",BW="["+LW+NW+"]",jW=RegExp(BW,"g"),VW={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"ss"},zW=typeof global=="object"&&global&&global.Object===Object&&global,UW=typeof self=="object"&&self&&self.Object===Object&&self,$W=zW||UW||Function("return this")();function HW(e){return function(n){return e?.[n]}}var qW=HW(VW),GW=Object.prototype,WW=GW.toString,ZL=$W.Symbol,YL=ZL?ZL.prototype:void 0,KL=YL?YL.toString:void 0;function ZW(e){if(typeof e=="string")return e;if(KW(e))return KL?KL.call(e):"";var n=e+"";return n=="0"&&1/e==-AW?"-0":n}function YW(e){return!!e&&typeof e=="object"}function KW(e){return typeof e=="symbol"||YW(e)&&WW.call(e)==RW}function QW(e){return e==null?"":ZW(e)}function JW(e){return e=QW(e),e&&e.replace(FW,qW).replace(jW,"")}QL.exports=JW});var vO=null;var A1=1,R1=Symbol("SIGNAL");function Hn(e){let n=vO;return vO=e,n}var yO={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function W4(e){if(!(N1(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===A1)){if(!e.producerMustRecompute(e)&&!F1(e)){e.dirty=!1,e.lastCleanEpoch=A1;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=A1}}function bO(e){return e&&(e.nextProducerIndex=0),Hn(e)}function wO(e,n){if(Hn(n),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(N1(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)L1(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function F1(e){U_(e);for(let n=0;n<e.producerNode.length;n++){let t=e.producerNode[n],i=e.producerLastReadVersion[n];if(i!==t.version||(W4(t),i!==t.version))return!0}return!1}function CO(e){if(U_(e),N1(e))for(let n=0;n<e.producerNode.length;n++)L1(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function L1(e,n){if(Z4(e),U_(e),e.liveConsumerNode.length===1)for(let i=0;i<e.producerNode.length;i++)L1(e.producerNode[i],e.producerIndexOfThis[i]);let t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){let i=e.liveConsumerIndexOfThis[n],r=e.liveConsumerNode[n];U_(r),r.producerIndexOfThis[i]=n}}function N1(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function U_(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Z4(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Y4(){throw new Error}var K4=Y4;function xO(e){K4=e}function rn(e){return typeof e=="function"}function sh(e){let t=e(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var $_=sh(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function vu(e,n){if(e){let t=e.indexOf(n);0<=t&&e.splice(t,1)}}var fr=class e{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(rn(i))try{i()}catch(s){n=s instanceof $_?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{MO(s)}catch(l){n=n??[],l instanceof $_?n=[...n,...l.errors]:n.push(l)}}if(n)throw new $_(n)}}add(n){var t;if(n&&n!==this)if(this.closed)MO(n);else{if(n instanceof e){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(n)}}_hasParent(n){let{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){let{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&vu(t,n)}remove(n){let{_finalizers:t}=this;t&&vu(t,n),n instanceof e&&n._removeParent(this)}};fr.EMPTY=(()=>{let e=new fr;return e.closed=!0,e})();var B1=fr.EMPTY;function H_(e){return e instanceof fr||e&&"closed"in e&&rn(e.remove)&&rn(e.add)&&rn(e.unsubscribe)}function MO(e){rn(e)?e():e.unsubscribe()}var ro={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ah={setTimeout(e,n,...t){let{delegate:i}=ah;return i?.setTimeout?i.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){let{delegate:n}=ah;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function q_(e){ah.setTimeout(()=>{let{onUnhandledError:n}=ro;if(n)n(e);else throw e})}function _c(){}var DO=j1("C",void 0,void 0);function TO(e){return j1("E",void 0,e)}function SO(e){return j1("N",e,void 0)}function j1(e,n,t){return{kind:e,value:n,error:t}}var yu=null;function oh(e){if(ro.useDeprecatedSynchronousErrorHandling){let n=!yu;if(n&&(yu={errorThrown:!1,error:null}),e(),n){let{errorThrown:t,error:i}=yu;if(yu=null,t)throw i}}else e()}function OO(e){ro.useDeprecatedSynchronousErrorHandling&&yu&&(yu.errorThrown=!0,yu.error=e)}var bu=class extends fr{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,H_(n)&&n.add(this)):this.destination=X4}static create(n,t,i){return new vc(n,t,i)}next(n){this.isStopped?z1(SO(n),this):this._next(n)}error(n){this.isStopped?z1(TO(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?z1(DO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Q4=Function.prototype.bind;function V1(e,n){return Q4.call(e,n)}var U1=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(i){G_(i)}}error(n){let{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(i){G_(i)}else G_(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){G_(t)}}},vc=class extends bu{constructor(n,t,i){super();let r;if(rn(n)||!n)r={next:n??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&ro.useDeprecatedNextContext?(s=Object.create(n),s.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&V1(n.next,s),error:n.error&&V1(n.error,s),complete:n.complete&&V1(n.complete,s)}):r=n}this.destination=new U1(r)}};function G_(e){ro.useDeprecatedSynchronousErrorHandling?OO(e):q_(e)}function J4(e){throw e}function z1(e,n){let{onStoppedNotification:t}=ro;t&&ah.setTimeout(()=>t(e,n))}var X4={closed:!0,next:_c,error:J4,complete:_c};var ch=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Yr(e){return e}function $1(...e){return H1(e)}function H1(e){return e.length===0?Yr:e.length===1?e[0]:function(t){return e.reduce((i,r)=>r(i),t)}}var Tn=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new e;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=tB(t)?t:new vc(t,i,r);return oh(()=>{let{operator:l,source:d}=this;s.add(l?l.call(s,d):d?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=IO(i),new i((r,s)=>{let l=new vc({next:d=>{try{t(d)}catch(f){s(f),l.unsubscribe()}},error:s,complete:r});this.subscribe(l)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[ch](){return this}pipe(...t){return H1(t)(this)}toPromise(t){return t=IO(t),new t((i,r)=>{let s;this.subscribe(l=>s=l,l=>r(l),()=>i(s))})}}return e.create=n=>new e(n),e})();function IO(e){var n;return(n=e??ro.Promise)!==null&&n!==void 0?n:Promise}function eB(e){return e&&rn(e.next)&&rn(e.error)&&rn(e.complete)}function tB(e){return e&&e instanceof bu||eB(e)&&H_(e)}function q1(e){return rn(e?.lift)}function Mn(e){return n=>{if(q1(n))return n.lift(function(t){try{return e(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function un(e,n,t,i,r){return new G1(e,n,t,i,r)}var G1=class extends bu{constructor(n,t,i,r,s,l){super(n),this.onFinalize=s,this.shouldUnsubscribe=l,this._next=t?function(d){try{t(d)}catch(f){n.error(f)}}:super._next,this._error=r?function(d){try{r(d)}catch(f){n.error(f)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(d){n.error(d)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function lh(){return Mn((e,n)=>{let t=null;e._refCount++;let i=un(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){t=null;return}let r=e._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),n.unsubscribe()});e.subscribe(i),i.closed||(t=e.connect())})}var uh=class extends Tn{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,q1(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new fr;let t=this.getSubject();n.add(this.source.subscribe(un(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=fr.EMPTY)}return n}refCount(){return lh()(this)}};var EO=sh(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var kn=(()=>{class e extends Tn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new W_(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new EO}next(t){oh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){oh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){oh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?B1:(this.currentObservers=null,s.push(t),new fr(()=>{this.currentObservers=null,vu(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new Tn;return t.source=this,t}}return e.create=(n,t)=>new W_(n,t),e})(),W_=class extends kn{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,n)}error(n){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,n)}complete(){var n,t;(t=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||t===void 0||t.call(n)}_subscribe(n){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(n))!==null&&i!==void 0?i:B1}};var Ct=class extends kn{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){let{hasError:n,thrownError:t,_value:i}=this;if(n)throw t;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}};var zf={now(){return(zf.delegate||Date).now()},delegate:void 0};var No=class extends kn{constructor(n=1/0,t=1/0,i=zf){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:l}=this;t||(i.push(n),!r&&i.push(s.now()+l)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(n),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let l=0;l<s.length&&!n.closed;l+=i?1:2)n.next(s[l]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){let{_bufferSize:n,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*n;if(n<1/0&&s<i.length&&i.splice(0,i.length-s),!r){let l=t.now(),d=0;for(let f=1;f<i.length&&i[f]<=l;f+=2)d=f;d&&i.splice(0,d+1)}}};var Z_=class extends fr{constructor(n,t){super()}schedule(n,t=0){return this}};var Uf={setInterval(e,n,...t){let{delegate:i}=Uf;return i?.setInterval?i.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){let{delegate:n}=Uf;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};var Y_=class extends Z_{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var i;if(this.closed)return this;this.state=n;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(n,t,i=0){return Uf.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Uf.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(n,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let i=!1,r;try{this.work(n)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:n,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,vu(i,this),n!=null&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}};var dh=class e{constructor(n,t=e.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,i){return new this.schedulerActionCtor(this,n).schedule(i,t)}};dh.now=zf.now;var K_=class extends dh{constructor(n,t=dh.now){super(n,t),this.actions=[],this._active=!1}flush(n){let{actions:t}=this;if(this._active){t.push(n);return}let i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=t.shift());if(this._active=!1,i){for(;n=t.shift();)n.unsubscribe();throw i}}};var $f=new K_(Y_),PO=$f;var Kr=new Tn(e=>e.complete());function Q_(e){return e&&rn(e.schedule)}function kO(e){return e[e.length-1]}function hl(e){return rn(kO(e))?e.pop():void 0}function pl(e){return Q_(kO(e))?e.pop():void 0}function sn(e,n,t,i){function r(s){return s instanceof t?s:new t(function(l){l(s)})}return new(t||(t=Promise))(function(s,l){function d(x){try{v(i.next(x))}catch(O){l(O)}}function f(x){try{v(i.throw(x))}catch(O){l(O)}}function v(x){x.done?s(x.value):r(x.value).then(d,f)}v((i=i.apply(e,n||[])).next())})}function AO(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],i=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function wu(e){return this instanceof wu?(this.v=e,this):new wu(e)}function RO(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(e,n||[]),r,s=[];return r={},l("next"),l("throw"),l("return"),r[Symbol.asyncIterator]=function(){return this},r;function l(A){i[A]&&(r[A]=function(L){return new Promise(function(U,te){s.push([A,L,U,te])>1||d(A,L)})})}function d(A,L){try{f(i[A](L))}catch(U){O(s[0][3],U)}}function f(A){A.value instanceof wu?Promise.resolve(A.value.v).then(v,x):O(s[0][2],A)}function v(A){d("next",A)}function x(A){d("throw",A)}function O(A,L){A(L),s.shift(),s.length&&d(s[0][0],s[0][1])}}function FO(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],t;return n?n.call(e):(e=typeof AO=="function"?AO(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=e[s]&&function(l){return new Promise(function(d,f){l=e[s](l),r(d,f,l.done,l.value)})}}function r(s,l,d,f){Promise.resolve(f).then(function(v){s({value:v,done:d})},l)}}var hh=e=>e&&typeof e.length=="number"&&typeof e!="function";function J_(e){return rn(e?.then)}function X_(e){return rn(e[ch])}function e0(e){return Symbol.asyncIterator&&rn(e?.[Symbol.asyncIterator])}function t0(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function nB(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var n0=nB();function i0(e){return rn(e?.[n0])}function r0(e){return RO(this,arguments,function*(){let t=e.getReader();try{for(;;){let{value:i,done:r}=yield wu(t.read());if(r)return yield wu(void 0);yield yield wu(i)}}finally{t.releaseLock()}})}function s0(e){return rn(e?.getReader)}function Wn(e){if(e instanceof Tn)return e;if(e!=null){if(X_(e))return iB(e);if(hh(e))return rB(e);if(J_(e))return sB(e);if(e0(e))return LO(e);if(i0(e))return aB(e);if(s0(e))return oB(e)}throw t0(e)}function iB(e){return new Tn(n=>{let t=e[ch]();if(rn(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rB(e){return new Tn(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}function sB(e){return new Tn(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,q_)})}function aB(e){return new Tn(n=>{for(let t of e)if(n.next(t),n.closed)return;n.complete()})}function LO(e){return new Tn(n=>{cB(e,n).catch(t=>n.error(t))})}function oB(e){return LO(r0(e))}function cB(e,n){var t,i,r,s;return sn(this,void 0,void 0,function*(){try{for(t=FO(e);i=yield t.next(),!i.done;){let l=i.value;if(n.next(l),n.closed)return}}catch(l){r={error:l}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}n.complete()})}function Gs(e,n,t,i=0,r=!1){let s=n.schedule(function(){t(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(s),!r)return s}function a0(e,n=0){return Mn((t,i)=>{t.subscribe(un(i,r=>Gs(i,e,()=>i.next(r),n),()=>Gs(i,e,()=>i.complete(),n),r=>Gs(i,e,()=>i.error(r),n)))})}function o0(e,n=0){return Mn((t,i)=>{i.add(e.schedule(()=>t.subscribe(i),n))})}function NO(e,n){return Wn(e).pipe(o0(n),a0(n))}function BO(e,n){return Wn(e).pipe(o0(n),a0(n))}function jO(e,n){return new Tn(t=>{let i=0;return n.schedule(function(){i===e.length?t.complete():(t.next(e[i++]),t.closed||this.schedule())})})}function VO(e,n){return new Tn(t=>{let i;return Gs(t,n,()=>{i=e[n0](),Gs(t,n,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(l){t.error(l);return}s?t.complete():t.next(r)},0,!0)}),()=>rn(i?.return)&&i.return()})}function c0(e,n){if(!e)throw new Error("Iterable cannot be null");return new Tn(t=>{Gs(t,n,()=>{let i=e[Symbol.asyncIterator]();Gs(t,n,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function zO(e,n){return c0(r0(e),n)}function UO(e,n){if(e!=null){if(X_(e))return NO(e,n);if(hh(e))return jO(e,n);if(J_(e))return BO(e,n);if(e0(e))return c0(e,n);if(i0(e))return VO(e,n);if(s0(e))return zO(e,n)}throw t0(e)}function Ri(e,n){return n?UO(e,n):Wn(e)}function zt(...e){let n=pl(e);return Ri(e,n)}function ph(e,n){let t=rn(e)?e:()=>e,i=r=>r.error(t());return new Tn(n?r=>n.schedule(i,0,r):i)}function Ia(e){return!!e&&(e instanceof Tn||rn(e.lift)&&rn(e.subscribe))}var yc=sh(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function $O(e){return e instanceof Date&&!isNaN(e)}function Ft(e,n){return Mn((t,i)=>{let r=0;t.subscribe(un(i,s=>{i.next(e.call(n,s,r++))}))})}var{isArray:lB}=Array;function uB(e,n){return lB(n)?e(...n):e(n)}function fh(e){return Ft(n=>uB(e,n))}var{isArray:dB}=Array,{getPrototypeOf:hB,prototype:pB,keys:fB}=Object;function l0(e){if(e.length===1){let n=e[0];if(dB(n))return{args:n,keys:null};if(mB(n)){let t=fB(n);return{args:t.map(i=>n[i]),keys:t}}}return{args:e,keys:null}}function mB(e){return e&&typeof e=="object"&&hB(e)===pB}function u0(e,n){return e.reduce((t,i,r)=>(t[i]=n[r],t),{})}function so(...e){let n=pl(e),t=hl(e),{args:i,keys:r}=l0(e);if(i.length===0)return Ri([],n);let s=new Tn(gB(i,n,r?l=>u0(r,l):Yr));return t?s.pipe(fh(t)):s}function gB(e,n,t=Yr){return i=>{HO(n,()=>{let{length:r}=e,s=new Array(r),l=r,d=r;for(let f=0;f<r;f++)HO(n,()=>{let v=Ri(e[f],n),x=!1;v.subscribe(un(i,O=>{s[f]=O,x||(x=!0,d--),d||i.next(t(s.slice()))},()=>{--l||i.complete()}))},i)},i)}}function HO(e,n,t){e?Gs(t,e,n):n()}function qO(e,n,t,i,r,s,l,d){let f=[],v=0,x=0,O=!1,A=()=>{O&&!f.length&&!v&&n.complete()},L=te=>v<i?U(te):f.push(te),U=te=>{s&&n.next(te),v++;let ce=!1;Wn(t(te,x++)).subscribe(un(n,fe=>{r?.(fe),s?L(fe):n.next(fe)},()=>{ce=!0},void 0,()=>{if(ce)try{for(v--;f.length&&v<i;){let fe=f.shift();l?Gs(n,l,()=>U(fe)):U(fe)}A()}catch(fe){n.error(fe)}}))};return e.subscribe(un(n,L,()=>{O=!0,A()})),()=>{d?.()}}function Si(e,n,t=1/0){return rn(n)?Si((i,r)=>Ft((s,l)=>n(i,s,r,l))(Wn(e(i,r))),t):(typeof n=="number"&&(t=n),Mn((i,r)=>qO(i,r,e,t)))}function mh(e=1/0){return Si(Yr,e)}function GO(){return mh(1)}function ua(...e){return GO()(Ri(e,pl(e)))}function Cu(e){return new Tn(n=>{Wn(e()).subscribe(n)})}function Hf(...e){let n=hl(e),{args:t,keys:i}=l0(e),r=new Tn(s=>{let{length:l}=t;if(!l){s.complete();return}let d=new Array(l),f=l,v=l;for(let x=0;x<l;x++){let O=!1;Wn(t[x]).subscribe(un(s,A=>{O||(O=!0,v--),d[x]=A},()=>f--,void 0,()=>{(!f||!O)&&(v||s.next(i?u0(i,d):d),s.complete())}))}});return n?r.pipe(fh(n)):r}var _B=["addListener","removeListener"],vB=["addEventListener","removeEventListener"],yB=["on","off"];function mr(e,n,t,i){if(rn(t)&&(i=t,t=void 0),i)return mr(e,n,t).pipe(fh(i));let[r,s]=CB(e)?vB.map(l=>d=>e[l](n,d,t)):bB(e)?_B.map(WO(e,n)):wB(e)?yB.map(WO(e,n)):[];if(!r&&hh(e))return Si(l=>mr(l,n,t))(Wn(e));if(!r)throw new TypeError("Invalid event target");return new Tn(l=>{let d=(...f)=>l.next(1<f.length?f:f[0]);return r(d),()=>s(d)})}function WO(e,n){return t=>i=>e[t](n,i)}function bB(e){return rn(e.addListener)&&rn(e.removeListener)}function wB(e){return rn(e.on)&&rn(e.off)}function CB(e){return rn(e.addEventListener)&&rn(e.removeEventListener)}function Bo(e=0,n,t=PO){let i=-1;return n!=null&&(Q_(n)?t=n:i=n),new Tn(r=>{let s=$O(e)?+e-t.now():e;s<0&&(s=0);let l=0;return t.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},s)})}var{isArray:xB}=Array;function d0(e){return e.length===1&&xB(e[0])?e[0]:e}function ci(e,n){return Mn((t,i)=>{let r=0;t.subscribe(un(i,s=>e.call(n,s,r++)&&i.next(s)))})}function h0(...e){return e=d0(e),e.length===1?Wn(e[0]):new Tn(MB(e))}function MB(e){return n=>{let t=[];for(let i=0;t&&!n.closed&&i<e.length;i++)t.push(Wn(e[i]).subscribe(un(n,r=>{if(t){for(let s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}n.next(r)})))}}function qf(...e){let n=hl(e),t=d0(e);return t.length?new Tn(i=>{let r=t.map(()=>[]),s=t.map(()=>!1);i.add(()=>{r=s=null});for(let l=0;!i.closed&&l<t.length;l++)Wn(t[l]).subscribe(un(i,d=>{if(r[l].push(d),r.every(f=>f.length)){let f=r.map(v=>v.shift());i.next(n?n(...f):f),r.some((v,x)=>!v.length&&s[x])&&i.complete()}},()=>{s[l]=!0,!r[l].length&&i.complete()}));return()=>{r=s=null}}):Kr}function fl(e){return Mn((n,t)=>{let i=null,r=!1,s;i=n.subscribe(un(t,void 0,void 0,l=>{s=Wn(e(l,fl(e)(n))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function ZO(e,n,t,i,r){return(s,l)=>{let d=t,f=n,v=0;s.subscribe(un(l,x=>{let O=v++;f=d?e(f,x,O):(d=!0,x),i&&l.next(f)},r&&(()=>{d&&l.next(f),l.complete()})))}}function ao(e,n){return rn(n)?Si(e,n,1):Si(e,1)}function gh(e,n=$f){return Mn((t,i)=>{let r=null,s=null,l=null,d=()=>{if(r){r.unsubscribe(),r=null;let v=s;s=null,i.next(v)}};function f(){let v=l+e,x=n.now();if(x<v){r=this.schedule(void 0,v-x),i.add(r);return}d()}t.subscribe(un(i,v=>{s=v,l=n.now(),r||(r=n.schedule(f,e),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}function ml(e){return Mn((n,t)=>{let i=!1;n.subscribe(un(t,r=>{i=!0,t.next(r)},()=>{i||t.next(e),t.complete()}))})}function ti(e){return e<=0?()=>Kr:Mn((n,t)=>{let i=0;n.subscribe(un(t,r=>{++i<=e&&(t.next(r),e<=i&&t.complete())}))})}function YO(){return Mn((e,n)=>{e.subscribe(un(n,_c))})}function Gf(e){return Ft(()=>e)}function W1(e,n){return n?t=>ua(n.pipe(ti(1),YO()),t.pipe(W1(e))):Si((t,i)=>Wn(e(t,i)).pipe(ti(1),Gf(t)))}function Z1(e,n=$f){let t=Bo(e,n);return W1(()=>t)}function xu(e,n=Yr){return e=e??DB,Mn((t,i)=>{let r,s=!0;t.subscribe(un(i,l=>{let d=n(l);(s||!e(r,d))&&(s=!1,r=d,i.next(l))}))})}function DB(e,n){return e===n}function p0(e=TB){return Mn((n,t)=>{let i=!1;n.subscribe(un(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(e())))})}function TB(){return new yc}function Y1(...e){return n=>ua(n,zt(...e))}function bc(e){return Mn((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}function Qr(e,n){let t=arguments.length>=2;return i=>i.pipe(e?ci((r,s)=>e(r,s,i)):Yr,ti(1),t?ml(n):p0(()=>new yc))}function _h(e){return e<=0?()=>Kr:Mn((n,t)=>{let i=[];n.subscribe(un(t,r=>{i.push(r),e<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function K1(e,n){let t=arguments.length>=2;return i=>i.pipe(e?ci((r,s)=>e(r,s,i)):Yr,_h(1),t?ml(n):p0(()=>new yc))}function Q1(e,n){return Mn(ZO(e,n,arguments.length>=2,!0))}function KO(e={}){let{connector:n=()=>new kn,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=e;return s=>{let l,d,f,v=0,x=!1,O=!1,A=()=>{d?.unsubscribe(),d=void 0},L=()=>{A(),l=f=void 0,x=O=!1},U=()=>{let te=l;L(),te?.unsubscribe()};return Mn((te,ce)=>{v++,!O&&!x&&A();let fe=f=f??n();ce.add(()=>{v--,v===0&&!O&&!x&&(d=J1(U,r))}),fe.subscribe(ce),!l&&v>0&&(l=new vc({next:ye=>fe.next(ye),error:ye=>{O=!0,A(),d=J1(L,t,ye),fe.error(ye)},complete:()=>{x=!0,A(),d=J1(L,i),fe.complete()}}),Wn(te).subscribe(l))})(s)}}function J1(e,n,...t){if(n===!0){e();return}if(n===!1)return;let i=new vc({next:()=>{i.unsubscribe(),e()}});return Wn(n(...t)).subscribe(i)}function Mr(e,n,t){let i,r=!1;return e&&typeof e=="object"?{bufferSize:i=1/0,windowTime:n=1/0,refCount:r=!1,scheduler:t}=e:i=e??1/0,KO({connector:()=>new No(i,n,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function f0(...e){let n=pl(e);return Mn((t,i)=>{(n?ua(e,t,n):ua(e,t)).subscribe(i)})}function Wi(e,n){return Mn((t,i)=>{let r=null,s=0,l=!1,d=()=>l&&!r&&i.complete();t.subscribe(un(i,f=>{r?.unsubscribe();let v=0,x=s++;Wn(e(f,x)).subscribe(r=un(i,O=>i.next(n?n(f,O,x,v++):O),()=>{r=null,d()}))},()=>{l=!0,d()}))})}function Yn(e){return Mn((n,t)=>{Wn(e).subscribe(un(t,()=>t.complete(),_c)),!t.closed&&n.subscribe(t)})}function ri(e,n,t){let i=rn(e)||n||t?{next:e,error:n,complete:t}:e;return i?Mn((r,s)=>{var l;(l=i.subscribe)===null||l===void 0||l.call(i);let d=!0;r.subscribe(un(s,f=>{var v;(v=i.next)===null||v===void 0||v.call(i,f),s.next(f)},()=>{var f;d=!1,(f=i.complete)===null||f===void 0||f.call(i),s.complete()},f=>{var v;d=!1,(v=i.error)===null||v===void 0||v.call(i,f),s.error(f)},()=>{var f,v;d&&((f=i.unsubscribe)===null||f===void 0||f.call(i)),(v=i.finalize)===null||v===void 0||v.call(i)}))}):Yr}function Wf(...e){let n=hl(e);return Mn((t,i)=>{let r=e.length,s=new Array(r),l=e.map(()=>!1),d=!1;for(let f=0;f<r;f++)Wn(e[f]).subscribe(un(i,v=>{s[f]=v,!d&&!l[f]&&(l[f]=!0,(d=l.every(Yr))&&(l=null))},_c));t.subscribe(un(i,f=>{if(d){let v=[f,...s];i.next(n?n(...v):v)}}))})}var j2="https://g.co/ng/security#xss",Ht=class extends Error{constructor(n,t){super(Q0(n,t)),this.code=n}};function Q0(e,n){return`${`NG0${Math.abs(e)}`}${n?": "+n:""}`}function lm(e){return{toString:e}.toString()}var m0="__parameters__";function SB(e){return function(...t){if(e){let i=e(...t);for(let r in i)this[r]=i[r]}}}function V2(e,n,t){return lm(()=>{let i=SB(n);function r(...s){if(this instanceof r)return i.apply(this,s),this;let l=new r(...s);return d.annotation=l,d;function d(f,v,x){let O=f.hasOwnProperty(m0)?f[m0]:Object.defineProperty(f,m0,{value:[]})[m0];for(;O.length<=x;)O.push(null);return(O[x]=O[x]||[]).push(l),f}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}var gr=globalThis;function yi(e){for(let n in e)if(e[n]===yi)return n;throw Error("Could not find renamed property on target object.")}function OB(e,n){for(let t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function ks(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(ks).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let n=e.toString();if(n==null)return""+n;let t=n.indexOf(`
`);return t===-1?n:n.substring(0,t)}function mw(e,n){return e==null||e===""?n===null?"":n:n==null||n===""?e:e+" "+n}var IB=yi({__forward_ref__:yi});function Pa(e){return e.__forward_ref__=Pa,e.toString=function(){return ks(this())},e}function Ps(e){return z2(e)?e():e}function z2(e){return typeof e=="function"&&e.hasOwnProperty(IB)&&e.__forward_ref__===Pa}function ct(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function _n(e){return{providers:e.providers||[],imports:e.imports||[]}}function J0(e){return QO(e,$2)||QO(e,H2)}function U2(e){return J0(e)!==null}function QO(e,n){return e.hasOwnProperty(n)?e[n]:null}function EB(e){let n=e&&(e[$2]||e[H2]);return n||null}function JO(e){return e&&(e.hasOwnProperty(XO)||e.hasOwnProperty(PB))?e[XO]:null}var $2=yi({\u0275prov:yi}),XO=yi({\u0275inj:yi}),H2=yi({ngInjectableDef:yi}),PB=yi({ngInjectorDef:yi}),Lt=class{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ct({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function q2(e){return e&&!!e.\u0275providers}var kB=yi({\u0275cmp:yi}),AB=yi({\u0275dir:yi}),RB=yi({\u0275pipe:yi}),FB=yi({\u0275mod:yi}),O0=yi({\u0275fac:yi}),Zf=yi({__NG_ELEMENT_ID__:yi}),e2=yi({__NG_ENV_ID__:yi});function zo(e){return typeof e=="string"?e:e==null?"":String(e)}function LB(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():zo(e)}function NB(e,n){let t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new Ht(-200,e)}function CC(e,n){throw new Ht(-201,!1)}var Un=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Un||{}),gw;function G2(){return gw}function Ws(e){let n=gw;return gw=e,n}function W2(e,n,t){let i=J0(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&Un.Optional)return null;if(n!==void 0)return n;CC(e,"Injector")}var BB={},Kf=BB,_w="__NG_DI_FLAG__",I0="ngTempTokenPath",jB="ngTokenPath",VB=/\n/gm,zB="\u0275",t2="__source",Ch;function UB(){return Ch}function gl(e){let n=Ch;return Ch=e,n}function $B(e,n=Un.Default){if(Ch===void 0)throw new Ht(-203,!1);return Ch===null?W2(e,void 0,n):Ch.get(e,n&Un.Optional?null:void 0,n)}function xt(e,n=Un.Default){return(G2()||$B)(Ps(e),n)}function Qe(e,n=Un.Default){return xt(e,X0(n))}function X0(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function vw(e){let n=[];for(let t=0;t<e.length;t++){let i=Ps(e[t]);if(Array.isArray(i)){if(i.length===0)throw new Ht(900,!1);let r,s=Un.Default;for(let l=0;l<i.length;l++){let d=i[l],f=HB(d);typeof f=="number"?f===-1?r=d.token:s|=f:r=d}n.push(xt(r,s))}else n.push(xt(i))}return n}function Z2(e,n){return e[_w]=n,e.prototype[_w]=n,e}function HB(e){return e[_w]}function qB(e,n,t,i){let r=e[I0];throw n[t2]&&r.unshift(n[t2]),e.message=GB(`
`+e.message,r,t,i),e[jB]=r,e[I0]=null,e}function GB(e,n,t,i=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==zB?e.slice(2):e;let r=ks(n);if(Array.isArray(n))r=n.map(ks).join(" -> ");else if(typeof n=="object"){let s=[];for(let l in n)if(n.hasOwnProperty(l)){let d=n[l];s.push(l+":"+(typeof d=="string"?JSON.stringify(d):ks(d)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${e.replace(VB,`
  `)}`}var um=Z2(V2("Optional"),8);var ev=Z2(V2("SkipSelf"),4);function Su(e,n){let t=e.hasOwnProperty(O0);return t?e[O0]:null}function WB(e,n,t){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}function ZB(e){return e.flat(Number.POSITIVE_INFINITY)}function xC(e,n){e.forEach(t=>Array.isArray(t)?xC(t,n):n(t))}function Y2(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function E0(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function YB(e,n){let t=[];for(let i=0;i<e;i++)t.push(n);return t}function KB(e,n,t,i){let r=e.length;if(r==n)e.push(t,i);else if(r===1)e.push(i,e[0]),e[0]=t;else{for(r--,e.push(e[r-1],e[r]);r>n;){let s=r-2;e[r]=e[s],r--}e[n]=t,e[n+1]=i}}function dm(e,n,t){let i=hm(e,n);return i>=0?e[i|1]=t:(i=~i,KB(e,i,n,t)),i}function X1(e,n){let t=hm(e,n);if(t>=0)return e[t|1]}function hm(e,n){return QB(e,n,1)}function QB(e,n,t){let i=0,r=e.length>>t;for(;r!==i;){let s=i+(r-i>>1),l=e[s<<t];if(n===l)return s<<t;l>n?r=s:i=s+1}return~(r<<t)}var Mh={},Zs=[],Dh=new Lt(""),K2=new Lt("",-1),Q2=new Lt(""),P0=class{get(n,t=Kf){if(t===Kf){let i=new Error(`NullInjectorError: No provider for ${ks(n)}!`);throw i.name="NullInjectorError",i}return t}},J2=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(J2||{}),Uo=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Uo||{}),Sn=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Sn||{});function JB(e,n,t){let i=e.length;for(;;){let r=e.indexOf(n,t);if(r===-1)return r;if(r===0||e.charCodeAt(r-1)<=32){let s=n.length;if(r+s===i||e.charCodeAt(r+s)<=32)return r}t=r+1}}function yw(e,n,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],l=t[i++],d=t[i++];e.setAttribute(n,l,d,s)}else{let s=r,l=t[++i];e5(s)?e.setProperty(n,s,l):e.setAttribute(n,s,l),i++}}return i}function XB(e){return e===3||e===4||e===6}function e5(e){return e.charCodeAt(0)===64}function Qf(e,n){if(!(n===null||n.length===0))if(e===null||e.length===0)e=n.slice();else{let t=-1;for(let i=0;i<n.length;i++){let r=n[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?n2(e,t,r,null,n[++i]):n2(e,t,r,null,null))}}return e}function n2(e,n,t,i,r){let s=0,l=e.length;if(n===-1)l=-1;else for(;s<e.length;){let d=e[s++];if(typeof d=="number"){if(d===n){l=-1;break}else if(d>n){l=s-1;break}}}for(;s<e.length;){let d=e[s];if(typeof d=="number")break;if(d===t){if(i===null){r!==null&&(e[s+1]=r);return}else if(i===e[s+1]){e[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}l!==-1&&(e.splice(l,0,n),s=l+1),e.splice(s++,0,t),i!==null&&e.splice(s++,0,i),r!==null&&e.splice(s++,0,r)}var X2="ng-template";function t5(e,n,t,i){let r=0;if(i){for(;r<n.length&&typeof n[r]=="string";r+=2)if(n[r]==="class"&&JB(n[r+1].toLowerCase(),t,0)!==-1)return!0}else if(MC(e))return!1;if(r=n.indexOf(1,r),r>-1){let s;for(;++r<n.length&&typeof(s=n[r])=="string";)if(s.toLowerCase()===t)return!0}return!1}function MC(e){return e.type===4&&e.value!==X2}function n5(e,n,t){let i=e.type===4&&!t?X2:e.value;return n===i}function i5(e,n,t){let i=4,r=e.attrs,s=r!==null?a5(r):0,l=!1;for(let d=0;d<n.length;d++){let f=n[d];if(typeof f=="number"){if(!l&&!oo(i)&&!oo(f))return!1;if(l&&oo(f))continue;l=!1,i=f|i&1;continue}if(!l)if(i&4){if(i=2|i&1,f!==""&&!n5(e,f,t)||f===""&&n.length===1){if(oo(i))return!1;l=!0}}else if(i&8){if(r===null||!t5(e,r,f,t)){if(oo(i))return!1;l=!0}}else{let v=n[++d],x=r5(f,r,MC(e),t);if(x===-1){if(oo(i))return!1;l=!0;continue}if(v!==""){let O;if(x>s?O="":O=r[x+1].toLowerCase(),i&2&&v!==O){if(oo(i))return!1;l=!0}}}}return oo(i)||l}function oo(e){return(e&1)===0}function r5(e,n,t,i){if(n===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<n.length;){let l=n[r];if(l===e)return r;if(l===3||l===6)s=!0;else if(l===1||l===2){let d=n[++r];for(;typeof d=="string";)d=n[++r];continue}else{if(l===4)break;if(l===0){r+=4;continue}}r+=s?1:2}return-1}else return o5(n,e)}function eI(e,n,t=!1){for(let i=0;i<n.length;i++)if(i5(e,n[i],t))return!0;return!1}function s5(e){let n=e.attrs;if(n!=null){let t=n.indexOf(5);if(!(t&1))return n[t+1]}return null}function a5(e){for(let n=0;n<e.length;n++){let t=e[n];if(XB(t))return n}return e.length}function o5(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){let i=e[t];if(typeof i=="number")return-1;if(i===n)return t;t++}return-1}function c5(e,n){e:for(let t=0;t<n.length;t++){let i=n[t];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function i2(e,n){return e?":not("+n.trim()+")":n}function l5(e){let n=e[0],t=1,i=2,r="",s=!1;for(;t<e.length;){let l=e[t];if(typeof l=="string")if(i&2){let d=e[++t];r+="["+l+(d.length>0?'="'+d+'"':"")+"]"}else i&8?r+="."+l:i&4&&(r+=" "+l);else r!==""&&!oo(l)&&(n+=i2(s,r),r=""),i=l,s=s||!oo(i);t++}return r!==""&&(n+=i2(s,r)),n}function u5(e){return e.map(l5).join(",")}function d5(e){let n=[],t=[],i=1,r=2;for(;i<e.length;){let s=e[i];if(typeof s=="string")r===2?s!==""&&n.push(s,e[++i]):r===8&&t.push(s);else{if(!oo(r))break;r=s}i++}return{attrs:n,classes:t}}function Wt(e){return lm(()=>{let n=sI(e),t=Pn(it({},n),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===J2.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Uo.Emulated,styles:e.styles||Zs,_:null,schemas:e.schemas||null,tView:null,id:""});aI(t);let i=e.dependencies;return t.directiveDefs=s2(i,!1),t.pipeDefs=s2(i,!0),t.id=f5(t),t})}function h5(e){return wc(e)||tI(e)}function p5(e){return e!==null}function vn(e){return lm(()=>({type:e.type,bootstrap:e.bootstrap||Zs,declarations:e.declarations||Zs,imports:e.imports||Zs,exports:e.exports||Zs,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function r2(e,n){if(e==null)return Mh;let t={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i],s,l,d=Sn.None;Array.isArray(r)?(d=r[0],s=r[1],l=r[2]??s):(s=r,l=r),n?(t[s]=d!==Sn.None?[i,d]:i,n[s]=l):t[s]=i}return t}function Zn(e){return lm(()=>{let n=sI(e);return aI(n),n})}function pm(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function wc(e){return e[kB]||null}function tI(e){return e[AB]||null}function nI(e){return e[RB]||null}function iI(e){let n=wc(e)||tI(e)||nI(e);return n!==null?n.standalone:!1}function rI(e,n){let t=e[FB]||null;if(!t&&n===!0)throw new Error(`Type ${ks(e)} does not have '\u0275mod' property.`);return t}function sI(e){let n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||Mh,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Zs,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:r2(e.inputs,n),outputs:r2(e.outputs),debugInfo:null}}function aI(e){e.features?.forEach(n=>n(e))}function s2(e,n){if(!e)return null;let t=n?nI:h5;return()=>(typeof e=="function"?e():e).map(i=>t(i)).filter(p5)}function f5(e){let n=0,t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let r of t)n=Math.imul(31,n)+r.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function tv(e){return{\u0275providers:e}}function m5(...e){return{\u0275providers:oI(!0,e),\u0275fromNgModule:!0}}function oI(e,...n){let t=[],i=new Set,r,s=l=>{t.push(l)};return xC(n,l=>{let d=l;bw(d,s,[],i)&&(r||=[],r.push(d))}),r!==void 0&&cI(r,s),t}function cI(e,n){for(let t=0;t<e.length;t++){let{ngModule:i,providers:r}=e[t];DC(r,s=>{n(s,i)})}}function bw(e,n,t,i){if(e=Ps(e),!e)return!1;let r=null,s=JO(e),l=!s&&wc(e);if(!s&&!l){let f=e.ngModule;if(s=JO(f),s)r=f;else return!1}else{if(l&&!l.standalone)return!1;r=e}let d=i.has(r);if(l){if(d)return!1;if(i.add(r),l.dependencies){let f=typeof l.dependencies=="function"?l.dependencies():l.dependencies;for(let v of f)bw(v,n,t,i)}}else if(s){if(s.imports!=null&&!d){i.add(r);let v;try{xC(s.imports,x=>{bw(x,n,t,i)&&(v||=[],v.push(x))})}finally{}v!==void 0&&cI(v,n)}if(!d){let v=Su(r)||(()=>new r);n({provide:r,useFactory:v,deps:Zs},r),n({provide:Q2,useValue:r,multi:!0},r),n({provide:Dh,useValue:()=>xt(r),multi:!0},r)}let f=s.providers;if(f!=null&&!d){let v=e;DC(f,x=>{n(x,v)})}}else return!1;return r!==e&&e.providers!==void 0}function DC(e,n){for(let t of e)q2(t)&&(t=t.\u0275providers),Array.isArray(t)?DC(t,n):n(t)}var g5=yi({provide:String,useValue:yi});function lI(e){return e!==null&&typeof e=="object"&&g5 in e}function _5(e){return!!(e&&e.useExisting)}function v5(e){return!!(e&&e.useFactory)}function Th(e){return typeof e=="function"}function y5(e){return!!e.useClass}var nv=new Lt(""),C0={},b5={},ew;function iv(){return ew===void 0&&(ew=new P0),ew}var Rr=class{},Jf=class extends Rr{get destroyed(){return this._destroyed}constructor(n,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Cw(n,l=>this.processProvider(l)),this.records.set(K2,vh(void 0,this)),r.has("environment")&&this.records.set(Rr,vh(void 0,this));let s=this.records.get(nv);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Q2,Zs,Un.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let n=Hn(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Hn(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();let t=gl(this),i=Ws(void 0),r;try{return n()}finally{gl(t),Ws(i)}}get(n,t=Kf,i=Un.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(e2))return n[e2](this);i=X0(i);let r,s=gl(this),l=Ws(void 0);try{if(!(i&Un.SkipSelf)){let f=this.records.get(n);if(f===void 0){let v=D5(n)&&J0(n);v&&this.injectableDefInScope(v)?f=vh(ww(n),C0):f=null,this.records.set(n,f)}if(f!=null)return this.hydrate(n,f)}let d=i&Un.Self?iv():this.parent;return t=i&Un.Optional&&t===Kf?null:t,d.get(n,t)}catch(d){if(d.name==="NullInjectorError"){if((d[I0]=d[I0]||[]).unshift(ks(n)),s)throw d;return qB(d,n,"R3InjectorError",this.source)}else throw d}finally{Ws(l),gl(s)}}resolveInjectorInitializers(){let n=Hn(null),t=gl(this),i=Ws(void 0),r;try{let s=this.get(Dh,Zs,Un.Self);for(let l of s)l()}finally{gl(t),Ws(i),Hn(n)}}toString(){let n=[],t=this.records;for(let i of t.keys())n.push(ks(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ht(205,!1)}processProvider(n){n=Ps(n);let t=Th(n)?n:Ps(n&&n.provide),i=C5(n);if(!Th(n)&&n.multi===!0){let r=this.records.get(t);r||(r=vh(void 0,C0,!0),r.factory=()=>vw(r.multi),this.records.set(t,r)),t=n,r.multi.push(n)}this.records.set(t,i)}hydrate(n,t){let i=Hn(null);try{return t.value===C0&&(t.value=b5,t.value=t.factory()),typeof t.value=="object"&&t.value&&M5(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Hn(i)}}injectableDefInScope(n){if(!n.providedIn)return!1;let t=Ps(n.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){let t=this._onDestroyHooks.indexOf(n);t!==-1&&this._onDestroyHooks.splice(t,1)}};function ww(e){let n=J0(e),t=n!==null?n.factory:Su(e);if(t!==null)return t;if(e instanceof Lt)throw new Ht(204,!1);if(e instanceof Function)return w5(e);throw new Ht(204,!1)}function w5(e){if(e.length>0)throw new Ht(204,!1);let t=EB(e);return t!==null?()=>t.factory(e):()=>new e}function C5(e){if(lI(e))return vh(void 0,e.useValue);{let n=uI(e);return vh(n,C0)}}function uI(e,n,t){let i;if(Th(e)){let r=Ps(e);return Su(r)||ww(r)}else if(lI(e))i=()=>Ps(e.useValue);else if(v5(e))i=()=>e.useFactory(...vw(e.deps||[]));else if(_5(e))i=()=>xt(Ps(e.useExisting));else{let r=Ps(e&&(e.useClass||e.provide));if(x5(e))i=()=>new r(...vw(e.deps));else return Su(r)||ww(r)}return i}function vh(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function x5(e){return!!e.deps}function M5(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function D5(e){return typeof e=="function"||typeof e=="object"&&e instanceof Lt}function Cw(e,n){for(let t of e)Array.isArray(t)?Cw(t,n):t&&q2(t)?Cw(t.\u0275providers,n):n(t)}function po(e,n){e instanceof Jf&&e.assertNotDestroyed();let t,i=gl(e),r=Ws(void 0);try{return n()}finally{gl(i),Ws(r)}}function dI(){return G2()!==void 0||UB()!=null}function T5(e){if(!dI())throw new Ht(-203,!1)}function S5(e){let n=gr.ng;if(n&&n.\u0275compilerFacade)return n.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function O5(e){return typeof e=="function"}var xc=0,Dn=1,gn=2,Jr=3,lo=4,da=5,Sh=6,Xf=7,fs=8,Oh=9,uo=10,Bi=11,em=12,a2=13,Ah=14,Ea=15,fm=16,yh=17,Cc=18,rv=19,hI=20,_l=21,tw=22,Ou=23,Xr=25,pI=1;var Iu=7,k0=8,Ih=9,ms=10,TC=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(TC||{});function Du(e){return Array.isArray(e)&&typeof e[pI]=="object"}function Mc(e){return Array.isArray(e)&&e[pI]===!0}function SC(e){return(e.flags&4)!==0}function sv(e){return e.componentOffset>-1}function av(e){return(e.flags&1)===1}function vl(e){return!!e.template}function I5(e){return(e[gn]&512)!==0}var xw=class{constructor(n,t,i){this.previousValue=n,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function fI(e,n,t,i){n!==null?n.applyValueToInputSignal(n,i):e[t]=i}function ni(){return mI}function mI(e){return e.type.prototype.ngOnChanges&&(e.setInput=P5),E5}ni.ngInherit=!0;function E5(){let e=_I(this),n=e?.current;if(n){let t=e.previous;if(t===Mh)e.previous=n;else for(let i in n)t[i]=n[i];e.current=null,this.ngOnChanges(n)}}function P5(e,n,t,i,r){let s=this.declaredInputs[i],l=_I(e)||k5(e,{previous:Mh,current:null}),d=l.current||(l.current={}),f=l.previous,v=f[s];d[s]=new xw(v&&v.currentValue,t,f===Mh),fI(e,n,r,t)}var gI="__ngSimpleChanges__";function _I(e){return e[gI]||null}function k5(e,n){return e[gI]=n}var o2=null;var jo=function(e,n,t){o2?.(e,n,t)},vI="svg",A5="math",R5=!1;function F5(){return R5}function $o(e){for(;Array.isArray(e);)e=e[xc];return e}function yI(e,n){return $o(n[e])}function ka(e,n){return $o(n[e.index])}function OC(e,n){return e.data[n]}function IC(e,n){return e[n]}function wl(e,n){let t=n[e];return Du(t)?t:t[xc]}function L5(e){return(e[gn]&4)===4}function EC(e){return(e[gn]&128)===128}function N5(e){return Mc(e[Jr])}function Eh(e,n){return n==null?null:e[n]}function bI(e){e[yh]=0}function B5(e){e[gn]&1024||(e[gn]|=1024,EC(e)&&tm(e))}function j5(e,n){for(;e>0;)n=n[Ah],e--;return n}function PC(e){return!!(e[gn]&9216||e[Ou]?.dirty)}function Mw(e){e[uo].changeDetectionScheduler?.notify(1),PC(e)?tm(e):e[gn]&64&&(F5()?(e[gn]|=1024,tm(e)):e[uo].changeDetectionScheduler?.notify())}function tm(e){e[uo].changeDetectionScheduler?.notify();let n=nm(e);for(;n!==null&&!(n[gn]&8192||(n[gn]|=8192,!EC(n)));)n=nm(n)}function wI(e,n){if((e[gn]&256)===256)throw new Ht(911,!1);e[_l]===null&&(e[_l]=[]),e[_l].push(n)}function V5(e,n){if(e[_l]===null)return;let t=e[_l].indexOf(n);t!==-1&&e[_l].splice(t,1)}function nm(e){let n=e[Jr];return Mc(n)?n[Jr]:n}var An={lFrame:II(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function z5(){return An.lFrame.elementDepthCount}function U5(){An.lFrame.elementDepthCount++}function $5(){An.lFrame.elementDepthCount--}function CI(){return An.bindingsEnabled}function xI(){return An.skipHydrationRootTNode!==null}function H5(e){return An.skipHydrationRootTNode===e}function q5(){An.skipHydrationRootTNode=null}function tn(){return An.lFrame.lView}function ir(){return An.lFrame.tView}function Le(e){return An.lFrame.contextLView=e,e[fs]}function Ne(e){return An.lFrame.contextLView=null,e}function Ks(){let e=MI();for(;e!==null&&e.type===64;)e=e.parent;return e}function MI(){return An.lFrame.currentTNode}function G5(){let e=An.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}function Lu(e,n){let t=An.lFrame;t.currentTNode=e,t.isParent=n}function kC(){return An.lFrame.isParent}function AC(){An.lFrame.isParent=!1}function W5(){return An.lFrame.contextLView}function Go(){let e=An.lFrame,n=e.bindingRootIndex;return n===-1&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function DI(){return An.lFrame.bindingIndex}function Z5(e){return An.lFrame.bindingIndex=e}function Nu(){return An.lFrame.bindingIndex++}function ov(e){let n=An.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function Y5(){return An.lFrame.inI18n}function K5(e,n){let t=An.lFrame;t.bindingIndex=t.bindingRootIndex=e,Dw(n)}function Q5(){return An.lFrame.currentDirectiveIndex}function Dw(e){An.lFrame.currentDirectiveIndex=e}function J5(e){let n=An.lFrame.currentDirectiveIndex;return n===-1?null:e[n]}function TI(){return An.lFrame.currentQueryIndex}function RC(e){An.lFrame.currentQueryIndex=e}function X5(e){let n=e[Dn];return n.type===2?n.declTNode:n.type===1?e[da]:null}function SI(e,n,t){if(t&Un.SkipSelf){let r=n,s=e;for(;r=r.parent,r===null&&!(t&Un.Host);)if(r=X5(s),r===null||(s=s[Ah],r.type&10))break;if(r===null)return!1;n=r,e=s}let i=An.lFrame=OI();return i.currentTNode=n,i.lView=e,!0}function FC(e){let n=OI(),t=e[Dn];An.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function OI(){let e=An.lFrame,n=e===null?null:e.child;return n===null?II(e):n}function II(e){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=n),n}function EI(){let e=An.lFrame;return An.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var PI=EI;function LC(){let e=EI();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ej(e){return(An.lFrame.contextLView=j5(e,An.lFrame.contextLView))[fs]}function Dc(){return An.lFrame.selectedIndex}function Eu(e){An.lFrame.selectedIndex=e}function Rh(){let e=An.lFrame;return OC(e.tView,e.selectedIndex)}function li(){An.lFrame.currentNamespace=vI}function tj(){return An.lFrame.currentNamespace}var kI=!0;function cv(){return kI}function lv(e){kI=e}function nj(e,n,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=n.type.prototype;if(i){let l=mI(n);(t.preOrderHooks??=[]).push(e,l),(t.preOrderCheckHooks??=[]).push(e,l)}r&&(t.preOrderHooks??=[]).push(0-e,r),s&&((t.preOrderHooks??=[]).push(e,s),(t.preOrderCheckHooks??=[]).push(e,s))}function uv(e,n){for(let t=n.directiveStart,i=n.directiveEnd;t<i;t++){let s=e.data[t].type.prototype,{ngAfterContentInit:l,ngAfterContentChecked:d,ngAfterViewInit:f,ngAfterViewChecked:v,ngOnDestroy:x}=s;l&&(e.contentHooks??=[]).push(-t,l),d&&((e.contentHooks??=[]).push(t,d),(e.contentCheckHooks??=[]).push(t,d)),f&&(e.viewHooks??=[]).push(-t,f),v&&((e.viewHooks??=[]).push(t,v),(e.viewCheckHooks??=[]).push(t,v)),x!=null&&(e.destroyHooks??=[]).push(t,x)}}function x0(e,n,t){AI(e,n,3,t)}function M0(e,n,t,i){(e[gn]&3)===t&&AI(e,n,t,i)}function nw(e,n){let t=e[gn];(t&3)===n&&(t&=16383,t+=1,e[gn]=t)}function AI(e,n,t,i){let r=i!==void 0?e[yh]&65535:0,s=i??-1,l=n.length-1,d=0;for(let f=r;f<l;f++)if(typeof n[f+1]=="number"){if(d=n[f],i!=null&&d>=i)break}else n[f]<0&&(e[yh]+=65536),(d<s||s==-1)&&(ij(e,t,n,f),e[yh]=(e[yh]&4294901760)+f+2),f++}function c2(e,n){jo(4,e,n);let t=Hn(null);try{n.call(e)}finally{Hn(t),jo(5,e,n)}}function ij(e,n,t,i){let r=t[i]<0,s=t[i+1],l=r?-t[i]:t[i],d=e[l];r?e[gn]>>14<e[yh]>>16&&(e[gn]&3)===n&&(e[gn]+=16384,c2(d,s)):c2(d,s)}var xh=-1,Pu=class{constructor(n,t,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function rj(e){return e instanceof Pu}function sj(e){return(e.flags&8)!==0}function aj(e){return(e.flags&16)!==0}function RI(e){return e!==xh}function A0(e){return e&32767}function oj(e){return e>>16}function R0(e,n){let t=oj(e),i=n;for(;t>0;)i=i[Ah],t--;return i}var Tw=!0;function F0(e){let n=Tw;return Tw=e,n}var cj=256,FI=cj-1,LI=5,lj=0,Vo={};function uj(e,n,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(Zf)&&(i=t[Zf]),i==null&&(i=t[Zf]=lj++);let r=i&FI,s=1<<r;n.data[e+(r>>LI)]|=s}function L0(e,n){let t=NI(e,n);if(t!==-1)return t;let i=n[Dn];i.firstCreatePass&&(e.injectorIndex=n.length,iw(i.data,e),iw(n,null),iw(i.blueprint,null));let r=NC(e,n),s=e.injectorIndex;if(RI(r)){let l=A0(r),d=R0(r,n),f=d[Dn].data;for(let v=0;v<8;v++)n[s+v]=d[l+v]|f[l+v]}return n[s+8]=r,s}function iw(e,n){e.push(0,0,0,0,0,0,0,0,n)}function NI(e,n){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||n[e.injectorIndex+8]===null?-1:e.injectorIndex}function NC(e,n){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let t=0,i=null,r=n;for(;r!==null;){if(i=UI(r),i===null)return xh;if(t++,r=r[Ah],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return xh}function Sw(e,n,t){uj(e,n,t)}function BI(e,n,t){if(t&Un.Optional||e!==void 0)return e;CC(n,"NodeInjector")}function jI(e,n,t,i){if(t&Un.Optional&&i===void 0&&(i=null),!(t&(Un.Self|Un.Host))){let r=e[Oh],s=Ws(void 0);try{return r?r.get(n,i,t&Un.Optional):W2(n,i,t&Un.Optional)}finally{Ws(s)}}return BI(i,n,t)}function VI(e,n,t,i=Un.Default,r){if(e!==null){if(n[gn]&2048&&!(i&Un.Self)){let l=fj(e,n,t,i,Vo);if(l!==Vo)return l}let s=zI(e,n,t,i,Vo);if(s!==Vo)return s}return jI(n,t,i,r)}function zI(e,n,t,i,r){let s=hj(t);if(typeof s=="function"){if(!SI(n,e,i))return i&Un.Host?BI(r,t,i):jI(n,t,i,r);try{let l;if(l=s(i),l==null&&!(i&Un.Optional))CC(t);else return l}finally{PI()}}else if(typeof s=="number"){let l=null,d=NI(e,n),f=xh,v=i&Un.Host?n[Ea][da]:null;for((d===-1||i&Un.SkipSelf)&&(f=d===-1?NC(e,n):n[d+8],f===xh||!u2(i,!1)?d=-1:(l=n[Dn],d=A0(f),n=R0(f,n)));d!==-1;){let x=n[Dn];if(l2(s,d,x.data)){let O=dj(d,n,t,l,i,v);if(O!==Vo)return O}f=n[d+8],f!==xh&&u2(i,n[Dn].data[d+8]===v)&&l2(s,d,n)?(l=x,d=A0(f),n=R0(f,n)):d=-1}}return r}function dj(e,n,t,i,r,s){let l=n[Dn],d=l.data[e+8],f=i==null?sv(d)&&Tw:i!=l&&(d.type&3)!==0,v=r&Un.Host&&s===d,x=D0(d,l,t,f,v);return x!==null?ku(n,l,x,d):Vo}function D0(e,n,t,i,r){let s=e.providerIndexes,l=n.data,d=s&1048575,f=e.directiveStart,v=e.directiveEnd,x=s>>20,O=i?d:d+x,A=r?d+x:v;for(let L=O;L<A;L++){let U=l[L];if(L<f&&t===U||L>=f&&U.type===t)return L}if(r){let L=l[f];if(L&&vl(L)&&L.type===t)return f}return null}function ku(e,n,t,i){let r=e[t],s=n.data;if(rj(r)){let l=r;l.resolving&&NB(LB(s[t]));let d=F0(l.canSeeViewProviders);l.resolving=!0;let f,v=l.injectImpl?Ws(l.injectImpl):null,x=SI(e,i,Un.Default);try{r=e[t]=l.factory(void 0,s,e,i),n.firstCreatePass&&t>=i.directiveStart&&nj(t,s[t],n)}finally{v!==null&&Ws(v),F0(d),l.resolving=!1,PI()}}return r}function hj(e){if(typeof e=="string")return e.charCodeAt(0)||0;let n=e.hasOwnProperty(Zf)?e[Zf]:void 0;return typeof n=="number"?n>=0?n&FI:pj:n}function l2(e,n,t){let i=1<<e;return!!(t[n+(e>>LI)]&i)}function u2(e,n){return!(e&Un.Self)&&!(e&Un.Host&&n)}var Tu=class{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,i){return VI(this._tNode,this._lView,n,X0(i),t)}};function pj(){return new Tu(Ks(),tn())}function Aa(e){return lm(()=>{let n=e.prototype.constructor,t=n[O0]||Ow(n),i=Object.prototype,r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){let s=r[O0]||Ow(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Ow(e){return z2(e)?()=>{let n=Ow(Ps(e));return n&&n()}:Su(e)}function fj(e,n,t,i,r){let s=e,l=n;for(;s!==null&&l!==null&&l[gn]&2048&&!(l[gn]&512);){let d=zI(s,l,t,i|Un.Self,Vo);if(d!==Vo)return d;let f=s.parent;if(!f){let v=l[hI];if(v){let x=v.get(t,Vo,i);if(x!==Vo)return x}f=UI(l),l=l[Ah]}s=f}return r}function UI(e){let n=e[Dn],t=n.type;return t===2?n.declTNode:t===1?e[da]:null}function d2(e,n=null,t=null,i){let r=$I(e,n,t,i);return r.resolveInjectorInitializers(),r}function $I(e,n=null,t=null,i,r=new Set){let s=[t||Zs,m5(e)];return i=i||(typeof e=="object"?void 0:ks(e)),new Jf(s,n||iv(),i||null,r)}var gs=(()=>{let n=class n{static create(i,r){if(Array.isArray(i))return d2({name:""},r,i,"");{let s=i.name??"";return d2({name:s},i.parent,i.providers,s)}}};n.THROW_IF_NOT_FOUND=Kf,n.NULL=new P0,n.\u0275prov=ct({token:n,providedIn:"any",factory:()=>xt(K2)}),n.__NG_ELEMENT_ID__=-1;let e=n;return e})();var mj="ngOriginalError";function rw(e){return e[mj]}var Ho=class{constructor(){this._console=console}handleError(n){let t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&rw(n);for(;t&&rw(t);)t=rw(t);return t||null}},HI=new Lt("",{providedIn:"root",factory:()=>Qe(Ho).handleError.bind(void 0)}),dv=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=gj,n.__NG_ENV_ID__=i=>i;let e=n;return e})(),Iw=class extends dv{constructor(n){super(),this._lView=n}onDestroy(n){return wI(this._lView,n),()=>V5(this._lView,n)}};function gj(){return new Iw(tn())}function _j(){return Fh(Ks(),tn())}function Fh(e,n){return new ji(ka(e,n))}var ji=(()=>{let n=class n{constructor(i){this.nativeElement=i}};n.__NG_ELEMENT_ID__=_j;let e=n;return e})();function vj(e){return e instanceof ji?e.nativeElement:e}var Ew=class extends kn{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,dI()&&(this.destroyRef=Qe(dv,{optional:!0})??void 0)}emit(n){let t=Hn(null);try{super.next(n)}finally{Hn(t)}}subscribe(n,t,i){let r=n,s=t||(()=>null),l=i;if(n&&typeof n=="object"){let f=n;r=f.next?.bind(f),s=f.error?.bind(f),l=f.complete?.bind(f)}this.__isAsync&&(s=sw(s),r&&(r=sw(r)),l&&(l=sw(l)));let d=super.subscribe({next:r,error:s,complete:l});return n instanceof fr&&n.add(d),d}};function sw(e){return n=>{setTimeout(e,void 0,n)}}var Zt=Ew;function yj(){return this._results[Symbol.iterator]()}var Pw=class e{get changes(){return this._changes??=new Zt}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=e.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=yj)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){this.dirty=!1;let i=ZB(n);(this._changesDetected=!WB(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function qI(e){return(e.flags&128)===128}var GI=new Map,bj=0;function wj(){return bj++}function Cj(e){GI.set(e[rv],e)}function xj(e){GI.delete(e[rv])}var h2="__ngContext__";function yl(e,n){Du(n)?(e[h2]=n[rv],Cj(n)):e[h2]=n}function WI(e){return YI(e[em])}function ZI(e){return YI(e[lo])}function YI(e){for(;e!==null&&!Mc(e);)e=e[lo];return e}var kw;function KI(e){kw=e}function QI(){if(kw!==void 0)return kw;if(typeof document<"u")return document;throw new Ht(210,!1)}var hv=new Lt("",{providedIn:"root",factory:()=>Mj}),Mj="ng",BC=new Lt(""),fo=new Lt("",{providedIn:"platform",factory:()=>"unknown"});var jC=new Lt("",{providedIn:"root",factory:()=>QI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Dj="h",Tj="b";var Sj=()=>null;function VC(e,n,t=!1){return Sj(e,n,t)}var JI=!1,Oj=new Lt("",{providedIn:"root",factory:()=>JI});var g0;function Ij(){if(g0===void 0&&(g0=null,gr.trustedTypes))try{g0=gr.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return g0}function pv(e){return Ij()?.createHTML(e)||e}var _0;function Ej(){if(_0===void 0&&(_0=null,gr.trustedTypes))try{_0=gr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return _0}function p2(e){return Ej()?.createHTML(e)||e}var N0=class{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${j2})`}};function Lh(e){return e instanceof N0?e.changingThisBreaksApplicationSecurity:e}function zC(e,n){let t=Pj(e);if(t!=null&&t!==n){if(t==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${j2})`)}return t===n}function Pj(e){return e instanceof N0&&e.getTypeName()||null}function kj(e){let n=new Rw(e);return Aj()?new Aw(n):n}var Aw=class{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{let t=new window.DOMParser().parseFromString(pv(n),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(n):(t.removeChild(t.firstChild),t)}catch{return null}}},Rw=class{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){let t=this.inertDocument.createElement("template");return t.innerHTML=pv(n),t}};function Aj(){try{return!!new window.DOMParser().parseFromString(pv(""),"text/html")}catch{return!1}}var Rj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function UC(e){return e=String(e),e.match(Rj)?e:"unsafe:"+e}function Tc(e){let n={};for(let t of e.split(","))n[t]=!0;return n}function mm(...e){let n={};for(let t of e)for(let i in t)t.hasOwnProperty(i)&&(n[i]=!0);return n}var XI=Tc("area,br,col,hr,img,wbr"),eE=Tc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tE=Tc("rp,rt"),Fj=mm(tE,eE),Lj=mm(eE,Tc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Nj=mm(tE,Tc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),f2=mm(XI,Lj,Nj,Fj),nE=Tc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Bj=Tc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),jj=Tc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Vj=mm(nE,Bj,jj),zj=Tc("script,style,template"),Fw=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let t=n.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=Hj(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=$j(t);if(s){t=s;break}t=r.pop()}}return this.buf.join("")}startElement(n){let t=m2(n).toLowerCase();if(!f2.hasOwnProperty(t))return this.sanitizedSomething=!0,!zj.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=n.attributes;for(let r=0;r<i.length;r++){let s=i.item(r),l=s.name,d=l.toLowerCase();if(!Vj.hasOwnProperty(d)){this.sanitizedSomething=!0;continue}let f=s.value;nE[d]&&(f=UC(f)),this.buf.push(" ",l,'="',g2(f),'"')}return this.buf.push(">"),!0}endElement(n){let t=m2(n).toLowerCase();f2.hasOwnProperty(t)&&!XI.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(g2(n))}};function Uj(e,n){return(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function $j(e){let n=e.nextSibling;if(n&&e!==n.previousSibling)throw iE(n);return n}function Hj(e){let n=e.firstChild;if(n&&Uj(e,n))throw iE(n);return n}function m2(e){let n=e.nodeName;return typeof n=="string"?n:"FORM"}function iE(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}var qj=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gj=/([^\#-~ |!])/g;function g2(e){return e.replace(/&/g,"&amp;").replace(qj,function(n){let t=n.charCodeAt(0),i=n.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(Gj,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var v0;function rE(e,n){let t=null;try{v0=v0||kj(e);let i=n?String(n):"";t=v0.getInertBodyElement(i);let r=5,s=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=v0.getInertBodyElement(i)}while(i!==s);let d=new Fw().sanitizeChildren(_2(t)||t);return pv(d)}finally{if(t){let i=_2(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function _2(e){return"content"in e&&Wj(e)?e.content:null}function Wj(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var fv=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(fv||{});function Wo(e){let n=sE();return n?p2(n.sanitize(fv.HTML,e)||""):zC(e,"HTML")?p2(Lh(e)):rE(QI(),zo(e))}function vr(e){let n=sE();return n?n.sanitize(fv.URL,e)||"":zC(e,"URL")?Lh(e):UC(zo(e))}function sE(){let e=tn();return e&&e[uo].sanitizer}var Zj=/^>|^->|<!--|-->|--!>|<!-$/g,Yj=/(<|>)/g,Kj="\u200B$1\u200B";function Qj(e){return e.replace(Zj,n=>n.replace(Yj,Kj))}function aE(e){return e instanceof Function?e():e}function Jj(e){return(e??Qe(gs)).get(fo)==="browser"}var qo=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(qo||{}),Xj;function $C(e,n){return Xj(e,n)}function bh(e,n,t,i,r){if(i!=null){let s,l=!1;Mc(i)?s=i:Du(i)&&(l=!0,i=i[xc]);let d=$o(i);e===0&&t!==null?r==null?dE(n,t,d):B0(n,t,d,r||null,!0):e===1&&t!==null?B0(n,t,d,r||null,!0):e===2?mV(n,d,l):e===3&&n.destroyNode(d),s!=null&&_V(n,e,s,t,r)}}function eV(e,n){return e.createText(n)}function tV(e,n,t){e.setValue(n,t)}function nV(e,n){return e.createComment(Qj(n))}function oE(e,n,t){return e.createElement(n,t)}function iV(e,n){cE(e,n),n[xc]=null,n[da]=null}function rV(e,n,t,i,r,s){i[xc]=r,i[da]=n,_v(e,i,t,1,r,s)}function cE(e,n){n[uo].changeDetectionScheduler?.notify(1),_v(e,n,n[Bi],2,null,null)}function sV(e){let n=e[em];if(!n)return aw(e[Dn],e);for(;n;){let t=null;if(Du(n))t=n[em];else{let i=n[ms];i&&(t=i)}if(!t){for(;n&&!n[lo]&&n!==e;)Du(n)&&aw(n[Dn],n),n=n[Jr];n===null&&(n=e),Du(n)&&aw(n[Dn],n),t=n&&n[lo]}n=t}}function aV(e,n,t,i){let r=ms+i,s=t.length;i>0&&(t[r-1][lo]=n),i<s-ms?(n[lo]=t[r],Y2(t,ms+i,n)):(t.push(n),n[lo]=null),n[Jr]=t;let l=n[fm];l!==null&&t!==l&&oV(l,n);let d=n[Cc];d!==null&&d.insertView(e),Mw(n),n[gn]|=128}function oV(e,n){let t=e[Ih],r=n[Jr][Jr][Ea];n[Ea]!==r&&(e[gn]|=TC.HasTransplantedViews),t===null?e[Ih]=[n]:t.push(n)}function lE(e,n){let t=e[Ih],i=t.indexOf(n);t.splice(i,1)}function im(e,n){if(e.length<=ms)return;let t=ms+n,i=e[t];if(i){let r=i[fm];r!==null&&r!==e&&lE(r,i),n>0&&(e[t-1][lo]=i[lo]);let s=E0(e,ms+n);iV(i[Dn],i);let l=s[Cc];l!==null&&l.detachView(s[Dn]),i[Jr]=null,i[lo]=null,i[gn]&=-129}return i}function mv(e,n){if(!(n[gn]&256)){let t=n[Bi];t.destroyNode&&_v(e,n,t,3,null,null),sV(n)}}function aw(e,n){if(n[gn]&256)return;let t=Hn(null);try{n[gn]&=-129,n[gn]|=256,n[Ou]&&CO(n[Ou]),lV(e,n),cV(e,n),n[Dn].type===1&&n[Bi].destroy();let i=n[fm];if(i!==null&&Mc(n[Jr])){i!==n[Jr]&&lE(i,n);let r=n[Cc];r!==null&&r.detachView(e)}xj(n)}finally{Hn(t)}}function cV(e,n){let t=e.cleanup,i=n[Xf];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let l=t[s+3];l>=0?i[l]():i[-l].unsubscribe(),s+=2}else{let l=i[t[s+1]];t[s].call(l)}i!==null&&(n[Xf]=null);let r=n[_l];if(r!==null){n[_l]=null;for(let s=0;s<r.length;s++){let l=r[s];l()}}}function lV(e,n){let t;if(e!=null&&(t=e.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=n[t[i]];if(!(r instanceof Pu)){let s=t[i+1];if(Array.isArray(s))for(let l=0;l<s.length;l+=2){let d=r[s[l]],f=s[l+1];jo(4,d,f);try{f.call(d)}finally{jo(5,d,f)}}else{jo(4,r,s);try{s.call(r)}finally{jo(5,r,s)}}}}}function uE(e,n,t){return uV(e,n.parent,t)}function uV(e,n,t){let i=n;for(;i!==null&&i.type&40;)n=i,i=n.parent;if(i===null)return t[xc];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=e.data[i.directiveStart+r];if(s===Uo.None||s===Uo.Emulated)return null}return ka(i,t)}}function B0(e,n,t,i,r){e.insertBefore(n,t,i,r)}function dE(e,n,t){e.appendChild(n,t)}function v2(e,n,t,i,r){i!==null?B0(e,n,t,i,r):dE(e,n,t)}function dV(e,n,t,i){e.removeChild(n,t,i)}function HC(e,n){return e.parentNode(n)}function hV(e,n){return e.nextSibling(n)}function hE(e,n,t){return fV(e,n,t)}function pV(e,n,t){return e.type&40?ka(e,t):null}var fV=pV,y2;function gv(e,n,t,i){let r=uE(e,i,n),s=n[Bi],l=i.parent||n[da],d=hE(l,i,n);if(r!=null)if(Array.isArray(t))for(let f=0;f<t.length;f++)v2(s,r,t[f],d,!1);else v2(s,r,t,d,!1);y2!==void 0&&y2(s,i,n,t,r)}function T0(e,n){if(n!==null){let t=n.type;if(t&3)return ka(n,e);if(t&4)return Lw(-1,e[n.index]);if(t&8){let i=n.child;if(i!==null)return T0(e,i);{let r=e[n.index];return Mc(r)?Lw(-1,r):$o(r)}}else{if(t&32)return $C(n,e)()||$o(e[n.index]);{let i=pE(e,n);if(i!==null){if(Array.isArray(i))return i[0];let r=nm(e[Ea]);return T0(r,i)}else return T0(e,n.next)}}}return null}function pE(e,n){if(n!==null){let i=e[Ea][da],r=n.projection;return i.projection[r]}return null}function Lw(e,n){let t=ms+e+1;if(t<n.length){let i=n[t],r=i[Dn].firstChild;if(r!==null)return T0(i,r)}return n[Iu]}function mV(e,n,t){let i=HC(e,n);i&&dV(e,i,n,t)}function qC(e,n,t,i,r,s,l){for(;t!=null;){let d=i[t.index],f=t.type;if(l&&n===0&&(d&&yl($o(d),i),t.flags|=2),(t.flags&32)!==32)if(f&8)qC(e,n,t.child,i,r,s,!1),bh(n,e,r,d,s);else if(f&32){let v=$C(t,i),x;for(;x=v();)bh(n,e,r,x,s);bh(n,e,r,d,s)}else f&16?fE(e,n,i,t,r,s):bh(n,e,r,d,s);t=l?t.projectionNext:t.next}}function _v(e,n,t,i,r,s){qC(t,i,e.firstChild,n,r,s,!1)}function gV(e,n,t){let i=n[Bi],r=uE(e,t,n),s=t.parent||n[da],l=hE(s,t,n);fE(i,0,n,t,r,l)}function fE(e,n,t,i,r,s){let l=t[Ea],f=l[da].projection[i.projection];if(Array.isArray(f))for(let v=0;v<f.length;v++){let x=f[v];bh(n,e,r,x,s)}else{let v=f,x=l[Jr];qI(i)&&(v.flags|=128),qC(e,n,v,x,r,s,!0)}}function _V(e,n,t,i,r){let s=t[Iu],l=$o(t);s!==l&&bh(n,e,i,s,r);for(let d=ms;d<t.length;d++){let f=t[d];_v(f[Dn],f,e,n,i,s)}}function vV(e,n,t,i,r){if(n)r?e.addClass(t,i):e.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:qo.DashCase;r==null?e.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=qo.Important),e.setStyle(t,i,r,s))}}function yV(e,n,t){e.setAttribute(n,"style",t)}function mE(e,n,t){t===""?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function gE(e,n,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&yw(e,n,i),r!==null&&mE(e,n,r),s!==null&&yV(e,n,s)}var As={};function V(e=1){_E(ir(),tn(),Dc()+e,!1)}function _E(e,n,t,i){if(!i)if((n[gn]&3)===3){let s=e.preOrderCheckHooks;s!==null&&x0(n,s,t)}else{let s=e.preOrderHooks;s!==null&&M0(n,s,0,t)}Eu(t)}function Ce(e,n=Un.Default){let t=tn();if(t===null)return xt(e,n);let i=Ks();return VI(i,t,Ps(e),n)}function vE(){let e="invalid";throw new Error(e)}function yE(e,n,t,i,r,s){let l=Hn(null);try{let d=null;r&Sn.SignalBased&&(d=n[i][R1]),d!==null&&d.transformFn!==void 0&&(s=d.transformFn(s)),r&Sn.HasDecoratorInputTransform&&(s=e.inputTransforms[i].call(n,s)),e.setInput!==null?e.setInput(n,d,s,t,i):fI(n,d,i,s)}finally{Hn(l)}}function bV(e,n){let t=e.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Eu(~r);else{let s=r,l=t[++i],d=t[++i];K5(l,s);let f=n[s];d(2,f)}}}finally{Eu(-1)}}function vv(e,n,t,i,r,s,l,d,f,v,x){let O=n.blueprint.slice();return O[xc]=r,O[gn]=i|4|128|8|64,(v!==null||e&&e[gn]&2048)&&(O[gn]|=2048),bI(O),O[Jr]=O[Ah]=e,O[fs]=t,O[uo]=l||e&&e[uo],O[Bi]=d||e&&e[Bi],O[Oh]=f||e&&e[Oh]||null,O[da]=s,O[rv]=wj(),O[Sh]=x,O[hI]=v,O[Ea]=n.type==2?e[Ea]:O,O}function Nh(e,n,t,i,r){let s=e.data[n];if(s===null)s=wV(e,n,t,i,r),Y5()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let l=G5();s.injectorIndex=l===null?-1:l.injectorIndex}return Lu(s,!0),s}function wV(e,n,t,i,r){let s=MI(),l=kC(),d=l?s:s&&s.parent,f=e.data[n]=SV(e,d,t,n,i,r);return e.firstChild===null&&(e.firstChild=f),s!==null&&(l?s.child==null&&f.parent!==null&&(s.child=f):s.next===null&&(s.next=f,f.prev=s)),f}function bE(e,n,t,i){if(t===0)return-1;let r=n.length;for(let s=0;s<t;s++)n.push(i),e.blueprint.push(i),e.data.push(null);return r}function wE(e,n,t,i,r){let s=Dc(),l=i&2;try{Eu(-1),l&&n.length>Xr&&_E(e,n,Xr,!1),jo(l?2:0,r),t(i,r)}finally{Eu(s),jo(l?3:1,r)}}function GC(e,n,t){if(SC(n)){let i=Hn(null);try{let r=n.directiveStart,s=n.directiveEnd;for(let l=r;l<s;l++){let d=e.data[l];if(d.contentQueries){let f=t[l];d.contentQueries(1,f,l)}}}finally{Hn(i)}}}function WC(e,n,t){CI()&&(AV(e,n,t,ka(t,n)),(t.flags&64)===64&&ME(e,n,t))}function ZC(e,n,t=ka){let i=n.localNames;if(i!==null){let r=n.index+1;for(let s=0;s<i.length;s+=2){let l=i[s+1],d=l===-1?t(n,e):e[l];e[r++]=d}}}function CE(e){let n=e.tView;return n===null||n.incompleteFirstPass?e.tView=YC(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function YC(e,n,t,i,r,s,l,d,f,v,x){let O=Xr+i,A=O+r,L=CV(O,A),U=typeof v=="function"?v():v;return L[Dn]={type:e,blueprint:L,template:t,queries:null,viewQuery:d,declTNode:n,data:L.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:A,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof l=="function"?l():l,firstChild:null,schemas:f,consts:U,incompleteFirstPass:!1,ssrId:x}}function CV(e,n){let t=[];for(let i=0;i<n;i++)t.push(i<e?null:As);return t}function xV(e,n,t,i){let s=i.get(Oj,JI)||t===Uo.ShadowDom,l=e.selectRootElement(n,s);return MV(l),l}function MV(e){DV(e)}var DV=()=>null;function TV(e,n,t,i){let r=OE(n);r.push(t),e.firstCreatePass&&IE(e).push(i,r.length-1)}function SV(e,n,t,i,r,s){let l=n?n.injectorIndex:-1,d=0;return xI()&&(d|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:l,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:d,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function b2(e,n,t,i,r){for(let s in n){if(!n.hasOwnProperty(s))continue;let l=n[s];if(l===void 0)continue;i??={};let d,f=Sn.None;Array.isArray(l)?(d=l[0],f=l[1]):d=l;let v=s;if(r!==null){if(!r.hasOwnProperty(s))continue;v=r[s]}e===0?w2(i,t,v,d,f):w2(i,t,v,d)}return i}function w2(e,n,t,i,r){let s;e.hasOwnProperty(t)?(s=e[t]).push(n,i):s=e[t]=[n,i],r!==void 0&&s.push(r)}function OV(e,n,t){let i=n.directiveStart,r=n.directiveEnd,s=e.data,l=n.attrs,d=[],f=null,v=null;for(let x=i;x<r;x++){let O=s[x],A=t?t.get(O):null,L=A?A.inputs:null,U=A?A.outputs:null;f=b2(0,O.inputs,x,f,L),v=b2(1,O.outputs,x,v,U);let te=f!==null&&l!==null&&!MC(n)?$V(f,x,l):null;d.push(te)}f!==null&&(f.hasOwnProperty("class")&&(n.flags|=8),f.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=d,n.inputs=f,n.outputs=v}function IV(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function yv(e,n,t,i,r,s,l,d){let f=ka(n,t),v=n.inputs,x;!d&&v!=null&&(x=v[i])?(QC(e,t,x,i,r),sv(n)&&EV(t,n.index)):n.type&3?(i=IV(i),r=l!=null?l(r,n.value||"",i):r,s.setProperty(f,i,r)):n.type&12}function EV(e,n){let t=wl(n,e);t[gn]&16||(t[gn]|=64)}function KC(e,n,t,i){if(CI()){let r=i===null?null:{"":-1},s=FV(e,t),l,d;s===null?l=d=null:[l,d]=s,l!==null&&xE(e,n,t,l,r,d),r&&LV(t,i,r)}t.mergedAttrs=Qf(t.mergedAttrs,t.attrs)}function xE(e,n,t,i,r,s){for(let v=0;v<i.length;v++)Sw(L0(t,n),e,i[v].type);BV(t,e.data.length,i.length);for(let v=0;v<i.length;v++){let x=i[v];x.providersResolver&&x.providersResolver(x)}let l=!1,d=!1,f=bE(e,n,i.length,null);for(let v=0;v<i.length;v++){let x=i[v];t.mergedAttrs=Qf(t.mergedAttrs,x.hostAttrs),jV(e,t,n,f,x),NV(f,x,r),x.contentQueries!==null&&(t.flags|=4),(x.hostBindings!==null||x.hostAttrs!==null||x.hostVars!==0)&&(t.flags|=64);let O=x.type.prototype;!l&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),l=!0),!d&&(O.ngOnChanges||O.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}OV(e,t,s)}function PV(e,n,t,i,r){let s=r.hostBindings;if(s){let l=e.hostBindingOpCodes;l===null&&(l=e.hostBindingOpCodes=[]);let d=~n.index;kV(l)!=d&&l.push(d),l.push(t,i,s)}}function kV(e){let n=e.length;for(;n>0;){let t=e[--n];if(typeof t=="number"&&t<0)return t}return 0}function AV(e,n,t,i){let r=t.directiveStart,s=t.directiveEnd;sv(t)&&VV(n,t,e.data[r+t.componentOffset]),e.firstCreatePass||L0(t,n),yl(i,n);let l=t.initialInputs;for(let d=r;d<s;d++){let f=e.data[d],v=ku(n,e,d,t);if(yl(v,n),l!==null&&UV(n,d-r,v,f,t,l),vl(f)){let x=wl(t.index,n);x[fs]=ku(n,e,d,t)}}}function ME(e,n,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,l=Q5();try{Eu(s);for(let d=i;d<r;d++){let f=e.data[d],v=n[d];Dw(d),(f.hostBindings!==null||f.hostVars!==0||f.hostAttrs!==null)&&RV(f,v)}}finally{Eu(-1),Dw(l)}}function RV(e,n){e.hostBindings!==null&&e.hostBindings(1,n)}function FV(e,n){let t=e.directiveRegistry,i=null,r=null;if(t)for(let s=0;s<t.length;s++){let l=t[s];if(eI(n,l.selectors,!1))if(i||(i=[]),vl(l))if(l.findHostDirectiveDefs!==null){let d=[];r=r||new Map,l.findHostDirectiveDefs(l,d,r),i.unshift(...d,l);let f=d.length;Nw(e,n,f)}else i.unshift(l),Nw(e,n,0);else r=r||new Map,l.findHostDirectiveDefs?.(l,i,r),i.push(l)}return i===null?null:[i,r]}function Nw(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function LV(e,n,t){if(n){let i=e.localNames=[];for(let r=0;r<n.length;r+=2){let s=t[n[r+1]];if(s==null)throw new Ht(-301,!1);i.push(n[r],s)}}}function NV(e,n,t){if(t){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)t[n.exportAs[i]]=e;vl(n)&&(t[""]=e)}}function BV(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function jV(e,n,t,i,r){e.data[i]=r;let s=r.factory||(r.factory=Su(r.type,!0)),l=new Pu(s,vl(r),Ce);e.blueprint[i]=l,t[i]=l,PV(e,n,i,bE(e,t,r.hostVars,As),r)}function VV(e,n,t){let i=ka(n,e),r=CE(t),s=e[uo].rendererFactory,l=16;t.signals?l=4096:t.onPush&&(l=64);let d=bv(e,vv(e,r,null,l,i,n,null,s.createRenderer(i,t),null,null,null));e[n.index]=d}function DE(e,n,t,i,r,s){let l=ka(e,n);zV(n[Bi],l,s,e.value,t,i,r)}function zV(e,n,t,i,r,s,l){if(s==null)e.removeAttribute(n,r,t);else{let d=l==null?zo(s):l(s,i||"",r);e.setAttribute(n,r,d,t)}}function UV(e,n,t,i,r,s){let l=s[n];if(l!==null)for(let d=0;d<l.length;){let f=l[d++],v=l[d++],x=l[d++],O=l[d++];yE(i,t,f,v,x,O)}}function $V(e,n,t){let i=null,r=0;for(;r<t.length;){let s=t[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(e.hasOwnProperty(s)){i===null&&(i=[]);let l=e[s];for(let d=0;d<l.length;d+=3)if(l[d]===n){i.push(s,l[d+1],l[d+2],t[r+1]);break}}r+=2}return i}function TE(e,n,t,i){return[e,!0,0,n,null,i,null,t,null,null]}function SE(e,n){let t=e.contentQueries;if(t!==null){let i=Hn(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],l=t[r+1];if(l!==-1){let d=e.data[l];RC(s),d.contentQueries(2,n[l],l)}}}finally{Hn(i)}}}function bv(e,n){return e[em]?e[a2][lo]=n:e[em]=n,e[a2]=n,n}function Bw(e,n,t){RC(0);let i=Hn(null);try{n(e,t)}finally{Hn(i)}}function OE(e){return e[Xf]||(e[Xf]=[])}function IE(e){return e.cleanup||(e.cleanup=[])}function EE(e,n){let t=e[Oh],i=t?t.get(Ho,null):null;i&&i.handleError(n)}function QC(e,n,t,i,r){for(let s=0;s<t.length;){let l=t[s++],d=t[s++],f=t[s++],v=n[l],x=e.data[l];yE(x,v,i,d,f,r)}}function PE(e,n,t){let i=yI(n,e);tV(e[Bi],i,t)}function HV(e,n){let t=wl(n,e),i=t[Dn];qV(i,t);let r=t[xc];r!==null&&t[Sh]===null&&(t[Sh]=VC(r,t[Oh])),JC(i,t,t[fs])}function qV(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}function JC(e,n,t){FC(n);try{let i=e.viewQuery;i!==null&&Bw(1,i,t);let r=e.template;r!==null&&wE(e,n,r,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[Cc]?.finishViewCreation(e),e.staticContentQueries&&SE(e,n),e.staticViewQueries&&Bw(2,e.viewQuery,t);let s=e.components;s!==null&&GV(n,s)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{n[gn]&=-5,LC()}}function GV(e,n){for(let t=0;t<n.length;t++)HV(e,n[t])}function wv(e,n,t,i){let r=Hn(null);try{let s=n.tView,d=e[gn]&4096?4096:16,f=vv(e,s,t,d,null,n,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),v=e[n.index];f[fm]=v;let x=e[Cc];return x!==null&&(f[Cc]=x.createEmbeddedView(s)),JC(s,f,t),f}finally{Hn(r)}}function kE(e,n){let t=ms+n;if(t<e.length)return e[t]}function rm(e,n){return!n||n.firstChild===null||qI(e)}function Cv(e,n,t,i=!0){let r=n[Dn];if(aV(r,n,e,t),i){let l=Lw(t,e),d=n[Bi],f=HC(d,e[Iu]);f!==null&&rV(r,e[da],d,n,f,l)}let s=n[Sh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function AE(e,n){let t=im(e,n);return t!==void 0&&mv(t[Dn],t),t}function j0(e,n,t,i,r=!1){for(;t!==null;){let s=n[t.index];s!==null&&i.push($o(s)),Mc(s)&&WV(s,i);let l=t.type;if(l&8)j0(e,n,t.child,i);else if(l&32){let d=$C(t,n),f;for(;f=d();)i.push(f)}else if(l&16){let d=pE(n,t);if(Array.isArray(d))i.push(...d);else{let f=nm(n[Ea]);j0(f[Dn],f,d,i,!0)}}t=r?t.projectionNext:t.next}return i}function WV(e,n){for(let t=ms;t<e.length;t++){let i=e[t],r=i[Dn].firstChild;r!==null&&j0(i[Dn],i,r,n)}e[Iu]!==e[xc]&&n.push(e[Iu])}var RE=[];function ZV(e){return e[Ou]??YV(e)}function YV(e){let n=RE.pop()??Object.create(QV);return n.lView=e,n}function KV(e){e.lView[Ou]!==e&&(e.lView=null,RE.push(e))}var QV=Pn(it({},yO),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{tm(e.lView)},consumerOnSignalRead(){this.lView[Ou]=this}}),FE=100;function LE(e,n=!0,t=0){let i=e[uo],r=i.rendererFactory,s=!1;s||r.begin?.();try{JV(e,t)}catch(l){throw n&&EE(e,l),l}finally{s||(r.end?.(),i.inlineEffectRunner?.flush())}}function JV(e,n){jw(e,n);let t=0;for(;PC(e);){if(t===FE)throw new Ht(103,!1);t++,jw(e,1)}}function XV(e,n,t,i){let r=n[gn];if((r&256)===256)return;let s=!1;!s&&n[uo].inlineEffectRunner?.flush(),FC(n);let l=null,d=null;!s&&ez(e)&&(d=ZV(n),l=bO(d));try{bI(n),Z5(e.bindingStartIndex),t!==null&&wE(e,n,t,2,i);let f=(r&3)===3;if(!s)if(f){let O=e.preOrderCheckHooks;O!==null&&x0(n,O,null)}else{let O=e.preOrderHooks;O!==null&&M0(n,O,0,null),nw(n,0)}if(tz(n),NE(n,0),e.contentQueries!==null&&SE(e,n),!s)if(f){let O=e.contentCheckHooks;O!==null&&x0(n,O)}else{let O=e.contentHooks;O!==null&&M0(n,O,1),nw(n,1)}bV(e,n);let v=e.components;v!==null&&jE(n,v,0);let x=e.viewQuery;if(x!==null&&Bw(2,x,i),!s)if(f){let O=e.viewCheckHooks;O!==null&&x0(n,O)}else{let O=e.viewHooks;O!==null&&M0(n,O,2),nw(n,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),n[tw]){for(let O of n[tw])O();n[tw]=null}s||(n[gn]&=-73)}catch(f){throw tm(n),f}finally{d!==null&&(wO(d,l),KV(d)),LC()}}function ez(e){return e.type!==2}function NE(e,n){for(let t=WI(e);t!==null;t=ZI(t))for(let i=ms;i<t.length;i++){let r=t[i];BE(r,n)}}function tz(e){for(let n=WI(e);n!==null;n=ZI(n)){if(!(n[gn]&TC.HasTransplantedViews))continue;let t=n[Ih];for(let i=0;i<t.length;i++){let r=t[i],s=r[Jr];B5(r)}}}function nz(e,n,t){let i=wl(n,e);BE(i,t)}function BE(e,n){EC(e)&&jw(e,n)}function jw(e,n){let i=e[Dn],r=e[gn],s=e[Ou],l=!!(n===0&&r&16);if(l||=!!(r&64&&n===0),l||=!!(r&1024),l||=!!(s?.dirty&&F1(s)),s&&(s.dirty=!1),e[gn]&=-9217,l)XV(i,e,i.template,e[fs]);else if(r&8192){NE(e,1);let d=i.components;d!==null&&jE(e,d,1)}}function jE(e,n,t){for(let i=0;i<n.length;i++)nz(e,n[i],t)}function XC(e){for(e[uo].changeDetectionScheduler?.notify();e;){e[gn]|=64;let n=nm(e);if(I5(e)&&!n)return e;e=n}return null}var Au=class{get rootNodes(){let n=this._lView,t=n[Dn];return j0(t,n,t.firstChild,[])}constructor(n,t,i=!0){this._lView=n,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[fs]}set context(n){this._lView[fs]=n}get destroyed(){return(this._lView[gn]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[Jr];if(Mc(n)){let t=n[k0],i=t?t.indexOf(this):-1;i>-1&&(im(n,i),E0(t,i))}this._attachedToViewContainer=!1}mv(this._lView[Dn],this._lView)}onDestroy(n){wI(this._lView,n)}markForCheck(){XC(this._cdRefInjectingView||this._lView)}detach(){this._lView[gn]&=-129}reattach(){Mw(this._lView),this._lView[gn]|=128}detectChanges(){this._lView[gn]|=1024,LE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ht(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,cE(this._lView[Dn],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Ht(902,!1);this._appRef=n,Mw(this._lView)}},ho=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=sz;let e=n;return e})(),iz=ho,rz=class extends iz{constructor(n,t,i){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,i){let r=wv(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:t,dehydratedView:i});return new Au(r)}};function sz(){return xv(Ks(),tn())}function xv(e,n){return e.type&4?new rz(n,e,Fh(e,n)):null}var Kle=new RegExp(`^(\\d+)*(${Tj}|${Dj})*(.*)`);var az=()=>null;function sm(e,n){return az(e,n)}var V0=class{},Vw=class{},z0=class{};function oz(e){let n=Error(`No component factory found for ${ks(e)}.`);return n[cz]=e,n}var cz="ngComponent";var zw=class{resolveComponentFactory(n){throw oz(n)}},Cl=(()=>{let n=class n{};n.NULL=new zw;let e=n;return e})(),am=class{},xl=(()=>{let n=class n{constructor(){this.destroyNode=null}};n.__NG_ELEMENT_ID__=()=>lz();let e=n;return e})();function lz(){let e=tn(),n=Ks(),t=wl(n.index,e);return(Du(t)?t:e)[Bi]}var uz=(()=>{let n=class n{};n.\u0275prov=ct({token:n,providedIn:"root",factory:()=>null});let e=n;return e})(),ow={};var C2=new Set;function Bh(e){C2.has(e)||(C2.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function x2(...e){}function dz(){let e=typeof gr.requestAnimationFrame=="function",n=gr[e?"requestAnimationFrame":"setTimeout"],t=gr[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&t){let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i);let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}var On=class e{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zt(!1),this.onMicrotaskEmpty=new Zt(!1),this.onStable=new Zt(!1),this.onError=new Zt(!1),typeof Zone>"u")throw new Ht(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=dz().nativeRequestAnimationFrame,fz(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new Ht(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new Ht(909,!1)}run(n,t,i){return this._inner.run(n,t,i)}runTask(n,t,i,r){let s=this._inner,l=s.scheduleEventTask("NgZoneEvent: "+r,n,hz,x2,x2);try{return s.runTask(l,t,i)}finally{s.cancelTask(l)}}runGuarded(n,t,i){return this._inner.runGuarded(n,t,i)}runOutsideAngular(n){return this._outer.run(n)}},hz={};function ex(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function pz(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(gr,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Uw(e),e.isCheckStableRunning=!0,ex(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Uw(e))}function fz(e){let n=()=>{pz(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,l,d)=>{if(mz(d))return t.invokeTask(r,s,l,d);try{return M2(e),t.invokeTask(r,s,l,d)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&n(),D2(e)}},onInvoke:(t,i,r,s,l,d,f)=>{try{return M2(e),t.invoke(r,s,l,d,f)}finally{e.shouldCoalesceRunChangeDetection&&n(),D2(e)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Uw(e),ex(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Uw(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function M2(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function D2(e){e._nesting--,ex(e)}var $w=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zt,this.onMicrotaskEmpty=new Zt,this.onStable=new Zt,this.onError=new Zt}run(n,t,i){return n.apply(t,i)}runGuarded(n,t,i){return n.apply(t,i)}runOutsideAngular(n){return n()}runTask(n,t,i,r){return n.apply(t,i)}};function mz(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}function gz(e="zone.js",n){return e==="noop"?new $w:e==="zone.js"?new On(n):e}var wh=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(wh||{}),_z={destroy(){}};function tx(e,n){!n&&T5(tx);let t=n?.injector??Qe(gs);if(!Jj(t))return _z;Bh("NgAfterNextRender");let i=t.get(nx),r=i.handler??=new qw,s=n?.phase??wh.MixedReadWrite,l=()=>{r.unregister(f),d()},d=t.get(dv).onDestroy(l),f=po(t,()=>new Hw(s,()=>{l(),e()}));return r.register(f),{destroy:l}}var Hw=class{constructor(n,t){this.phase=n,this.callbackFn=t,this.zone=Qe(On),this.errorHandler=Qe(Ho,{optional:!0}),Qe(V0,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){this.errorHandler?.handleError(n)}}},qw=class{constructor(){this.executingCallbacks=!1,this.buckets={[wh.EarlyRead]:new Set,[wh.Write]:new Set,[wh.MixedReadWrite]:new Set,[wh.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(let n of Object.values(this.buckets))for(let t of n)t.invoke();this.executingCallbacks=!1;for(let n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(let n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}},nx=(()=>{let n=class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};n.\u0275prov=ct({token:n,providedIn:"root",factory:()=>new n});let e=n;return e})();function U0(e,n,t){let i=t?e.styles:null,r=t?e.classes:null,s=0;if(n!==null)for(let l=0;l<n.length;l++){let d=n[l];if(typeof d=="number")s=d;else if(s==1)r=mw(r,d);else if(s==2){let f=d,v=n[++l];i=mw(i,f+": "+v+";")}}t?e.styles=i:e.stylesWithoutHost=i,t?e.classes=r:e.classesWithoutHost=r}var $0=class extends Cl{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let t=wc(n);return new Ru(t,this.ngModule)}};function T2(e){let n=[];for(let t in e){if(!e.hasOwnProperty(t))continue;let i=e[t];i!==void 0&&n.push({propName:Array.isArray(i)?i[0]:i,templateName:t})}return n}function vz(e){let n=e.toLowerCase();return n==="svg"?vI:n==="math"?A5:null}var Gw=class{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,i){i=X0(i);let r=this.injector.get(n,ow,i);return r!==ow||t===ow?r:this.parentInjector.get(n,t,i)}},Ru=class extends z0{get inputs(){let n=this.componentDef,t=n.inputTransforms,i=T2(n.inputs);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return T2(this.componentDef.outputs)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=u5(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,i,r){let s=Hn(null);try{r=r||this.ngModule;let l=r instanceof Rr?r:r?.injector;l&&this.componentDef.getStandaloneInjector!==null&&(l=this.componentDef.getStandaloneInjector(l)||l);let d=l?new Gw(n,l):n,f=d.get(am,null);if(f===null)throw new Ht(407,!1);let v=d.get(uz,null),x=d.get(nx,null),O=d.get(V0,null),A={rendererFactory:f,sanitizer:v,inlineEffectRunner:null,afterRenderEventManager:x,changeDetectionScheduler:O},L=f.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",te=i?xV(L,i,this.componentDef.encapsulation,d):oE(L,U,vz(U)),ce=512;this.componentDef.signals?ce|=4096:this.componentDef.onPush||(ce|=16);let fe=null;te!==null&&(fe=VC(te,d,!0));let ye=YC(0,null,null,1,0,null,null,null,null,null,null),Re=vv(null,ye,null,ce,null,null,A,L,d,null,fe);FC(Re);let Ae,We;try{let ft=this.componentDef,Et,Pt=null;ft.findHostDirectiveDefs?(Et=[],Pt=new Map,ft.findHostDirectiveDefs(ft,Et,Pt),Et.push(ft)):Et=[ft];let rt=yz(Re,te),nn=bz(rt,te,ft,Et,Re,A,L);We=OC(ye,Xr),te&&xz(L,ft,te,i),t!==void 0&&Mz(We,this.ngContentSelectors,t),Ae=Cz(nn,ft,Et,Pt,Re,[Dz]),JC(ye,Re,null)}finally{LC()}return new Ww(this.componentType,Ae,Fh(We,Re),Re,We)}finally{Hn(s)}}},Ww=class extends Vw{constructor(n,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Au(r,void 0,!1),this.componentType=n}setInput(n,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;let s=this._rootLView;QC(s[Dn],s,r,n,t),this.previousInputValues.set(n,t);let l=wl(this._tNode.index,s);XC(l)}}get injector(){return new Tu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function yz(e,n){let t=e[Dn],i=Xr;return e[i]=n,Nh(t,i,2,"#host",null)}function bz(e,n,t,i,r,s,l){let d=r[Dn];wz(i,e,n,l);let f=null;n!==null&&(f=VC(n,r[Oh]));let v=s.rendererFactory.createRenderer(n,t),x=16;t.signals?x=4096:t.onPush&&(x=64);let O=vv(r,CE(t),null,x,r[e.index],e,s,v,null,null,f);return d.firstCreatePass&&Nw(d,e,i.length-1),bv(r,O),r[e.index]=O}function wz(e,n,t,i){for(let r of e)n.mergedAttrs=Qf(n.mergedAttrs,r.hostAttrs);n.mergedAttrs!==null&&(U0(n,n.mergedAttrs,!0),t!==null&&gE(i,t,n))}function Cz(e,n,t,i,r,s){let l=Ks(),d=r[Dn],f=ka(l,r);xE(d,r,l,t,null,i);for(let x=0;x<t.length;x++){let O=l.directiveStart+x,A=ku(r,d,O,l);yl(A,r)}ME(d,r,l),f&&yl(f,r);let v=ku(r,d,l.directiveStart+l.componentOffset,l);if(e[fs]=r[fs]=v,s!==null)for(let x of s)x(v,n);return GC(d,l,r),v}function xz(e,n,t,i){if(i)yw(e,t,["ng-version","17.3.6"]);else{let{attrs:r,classes:s}=d5(n.selectors[0]);r&&yw(e,t,r),s&&s.length>0&&mE(e,t,s.join(" "))}}function Mz(e,n,t){let i=e.projection=[];for(let r=0;r<n.length;r++){let s=t[r];i.push(s!=null?Array.from(s):null)}}function Dz(){let e=Ks();uv(tn()[Dn],e)}var Dr=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=Tz;let e=n;return e})();function Tz(){let e=Ks();return zE(e,tn())}var Sz=Dr,VE=class extends Sz{constructor(n,t,i){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=i}get element(){return Fh(this._hostTNode,this._hostLView)}get injector(){return new Tu(this._hostTNode,this._hostLView)}get parentInjector(){let n=NC(this._hostTNode,this._hostLView);if(RI(n)){let t=R0(n,this._hostLView),i=A0(n),r=t[Dn].data[i+8];return new Tu(r,t)}else return new Tu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let t=S2(this._lContainer);return t!==null&&t[n]||null}get length(){return this._lContainer.length-ms}createEmbeddedView(n,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let l=sm(this._lContainer,n.ssrId),d=n.createEmbeddedViewImpl(t||{},s,l);return this.insertImpl(d,r,rm(this._hostTNode,l)),d}createComponent(n,t,i,r,s){let l=n&&!O5(n),d;if(l)d=t;else{let U=t||{};d=U.index,i=U.injector,r=U.projectableNodes,s=U.environmentInjector||U.ngModuleRef}let f=l?n:new Ru(wc(n)),v=i||this.parentInjector;if(!s&&f.ngModule==null){let te=(l?v:this.parentInjector).get(Rr,null);te&&(s=te)}let x=wc(f.componentType??{}),O=sm(this._lContainer,x?.id??null),A=O?.firstChild??null,L=f.create(v,r,A,s);return this.insertImpl(L.hostView,d,rm(this._hostTNode,O)),L}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,i){let r=n._lView;if(N5(r)){let d=this.indexOf(n);if(d!==-1)this.detach(d);else{let f=r[Jr],v=new VE(f,f[da],f[Jr]);v.detach(v.indexOf(n))}}let s=this._adjustIndex(t),l=this._lContainer;return Cv(l,r,s,i),n.attachToViewContainerRef(),Y2(cw(l),s,n),n}move(n,t){return this.insert(n,t)}indexOf(n){let t=S2(this._lContainer);return t!==null?t.indexOf(n):-1}remove(n){let t=this._adjustIndex(n,-1),i=im(this._lContainer,t);i&&(E0(cw(this._lContainer),t),mv(i[Dn],i))}detach(n){let t=this._adjustIndex(n,-1),i=im(this._lContainer,t);return i&&E0(cw(this._lContainer),t)!=null?new Au(i):null}_adjustIndex(n,t=0){return n??this.length+t}};function S2(e){return e[k0]}function cw(e){return e[k0]||(e[k0]=[])}function zE(e,n){let t,i=n[e.index];return Mc(i)?t=i:(t=TE(i,n,null,e),n[e.index]=t,bv(n,t)),Iz(t,n,e,i),new VE(t,e,n)}function Oz(e,n){let t=e[Bi],i=t.createComment(""),r=ka(n,e),s=HC(t,r);return B0(t,s,i,hV(t,r),!1),i}var Iz=kz,Ez=()=>!1;function Pz(e,n,t){return Ez(e,n,t)}function kz(e,n,t,i){if(e[Iu])return;let r;t.type&8?r=$o(i):r=Oz(n,t),e[Iu]=r}var Zw=class e{constructor(n){this.queryList=n,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Yw=class e{constructor(n=[]){this.queries=n}createEmbeddedView(n){let t=n.queries;if(t!==null){let i=n.contentQueries!==null?n.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){let l=t.getByIndex(s),d=this.queries[l.indexInDeclarationView];r.push(d.clone())}return new e(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)ix(n,t).matches!==null&&this.queries[t].setDirty()}},Kw=class{constructor(n,t,i=null){this.flags=t,this.read=i,typeof n=="string"?this.predicate=Vz(n):this.predicate=n}},Qw=class e{constructor(n=[]){this.queries=n}elementStart(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,s=this.getByIndex(i).embeddedTView(n,r);s&&(s.indexInDeclarationView=i,t!==null?t.push(s):t=[s])}return t!==null?new e(t):null}template(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},Jw=class e{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new e(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=n.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(n,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(n,t,Az(t,s)),this.matchTNodeWithReadOption(n,t,D0(t,n,s,!1,!1))}else i===ho?t.type&4&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,D0(t,n,i,!1,!1))}matchTNodeWithReadOption(n,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===ji||r===Dr||r===ho&&t.type&4)this.addMatch(t.index,-2);else{let s=D0(t,n,r,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(n,t){this.matches===null?this.matches=[n,t]:this.matches.push(n,t)}};function Az(e,n){let t=e.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===n)return t[i+1]}return null}function Rz(e,n){return e.type&11?Fh(e,n):e.type&4?xv(e,n):null}function Fz(e,n,t,i){return t===-1?Rz(n,e):t===-2?Lz(e,n,i):ku(e,e[Dn],t,n)}function Lz(e,n,t){if(t===ji)return Fh(n,e);if(t===ho)return xv(n,e);if(t===Dr)return zE(n,e)}function UE(e,n,t,i){let r=n[Cc].queries[i];if(r.matches===null){let s=e.data,l=t.matches,d=[];for(let f=0;l!==null&&f<l.length;f+=2){let v=l[f];if(v<0)d.push(null);else{let x=s[v];d.push(Fz(n,x,l[f+1],t.metadata.read))}}r.matches=d}return r.matches}function Xw(e,n,t,i){let r=e.queries.getByIndex(t),s=r.matches;if(s!==null){let l=UE(e,n,r,t);for(let d=0;d<s.length;d+=2){let f=s[d];if(f>0)i.push(l[d/2]);else{let v=s[d+1],x=n[-f];for(let O=ms;O<x.length;O++){let A=x[O];A[fm]===A[Jr]&&Xw(A[Dn],A,v,i)}if(x[Ih]!==null){let O=x[Ih];for(let A=0;A<O.length;A++){let L=O[A];Xw(L[Dn],L,v,i)}}}}}return i}function Nz(e,n){return e[Cc].queries[n].queryList}function Bz(e,n,t){let i=new Pw((t&4)===4);return TV(e,n,i,i.destroy),(n[Cc]??=new Yw).queries.push(new Zw(i))-1}function jz(e,n,t){let i=ir();return i.firstCreatePass&&(zz(i,new Kw(e,n,t),-1),(n&2)===2&&(i.staticViewQueries=!0)),Bz(i,tn(),n)}function Vz(e){return e.split(",").map(n=>n.trim())}function zz(e,n,t){e.queries===null&&(e.queries=new Qw),e.queries.track(new Jw(n,t))}function ix(e,n){return e.queries.getByIndex(n)}function Uz(e,n){let t=e[Dn],i=ix(t,n);return i.crossesNgTemplate?Xw(t,e,n,[]):UE(t,e,i,n)}function $z(e){return typeof e=="function"&&e[R1]!==void 0}function $E(e){return $z(e)&&typeof e.set=="function"}function Hz(e){let n=[],t=new Map;function i(r){let s=t.get(r);if(!s){let l=e(r);t.set(r,s=l.then(Zz))}return s}return H0.forEach((r,s)=>{let l=[];r.templateUrl&&l.push(i(r.templateUrl).then(v=>{r.template=v}));let d=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=d,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let v=r.styles.length,x=r.styleUrls;r.styleUrls.forEach((O,A)=>{d.push(""),l.push(i(O).then(L=>{d[v+A]=L,x.splice(x.indexOf(O),1),x.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&l.push(i(r.styleUrl).then(v=>{d.push(v),r.styleUrl=void 0}));let f=Promise.all(l).then(()=>Yz(s));n.push(f)}),Gz(),Promise.all(n).then(()=>{})}var H0=new Map,qz=new Set;function Gz(){let e=H0;return H0=new Map,e}function Wz(){return H0.size===0}function Zz(e){return typeof e=="string"?e:e.text()}function Yz(e){qz.delete(e)}function Kz(e){return Object.getPrototypeOf(e.prototype).constructor}function Rs(e){let n=Kz(e.type),t=!0,i=[e];for(;n;){let r;if(vl(e))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Ht(903,!1);r=n.\u0275dir}if(r){if(t){i.push(r);let l=e;l.inputs=y0(e.inputs),l.inputTransforms=y0(e.inputTransforms),l.declaredInputs=y0(e.declaredInputs),l.outputs=y0(e.outputs);let d=r.hostBindings;d&&t6(e,d);let f=r.viewQuery,v=r.contentQueries;if(f&&Xz(e,f),v&&e6(e,v),Qz(e,r),OB(e.outputs,r.outputs),vl(r)&&r.data.animation){let x=e.data;x.animation=(x.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let l=0;l<s.length;l++){let d=s[l];d&&d.ngInherit&&d(e),d===Rs&&(t=!1)}}n=Object.getPrototypeOf(n)}Jz(i)}function Qz(e,n){for(let t in n.inputs){if(!n.inputs.hasOwnProperty(t)||e.inputs.hasOwnProperty(t))continue;let i=n.inputs[t];if(i!==void 0&&(e.inputs[t]=i,e.declaredInputs[t]=n.declaredInputs[t],n.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!n.inputTransforms.hasOwnProperty(r))continue;e.inputTransforms??={},e.inputTransforms[r]=n.inputTransforms[r]}}}function Jz(e){let n=0,t=null;for(let i=e.length-1;i>=0;i--){let r=e[i];r.hostVars=n+=r.hostVars,r.hostAttrs=Qf(r.hostAttrs,t=Qf(t,r.hostAttrs))}}function y0(e){return e===Mh?{}:e===Zs?[]:e}function Xz(e,n){let t=e.viewQuery;t?e.viewQuery=(i,r)=>{n(i,r),t(i,r)}:e.viewQuery=n}function e6(e,n){let t=e.contentQueries;t?e.contentQueries=(i,r,s)=>{n(i,r,s),t(i,r,s)}:e.contentQueries=n}function t6(e,n){let t=e.hostBindings;t?e.hostBindings=(i,r)=>{n(i,r),t(i,r)}:e.hostBindings=n}var bl=class{},om=class{};var q0=class extends bl{constructor(n,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $0(this);let r=rI(n);this._bootstrapComponents=aE(r.bootstrap),this._r3Injector=$I(n,t,[{provide:bl,useValue:this},{provide:Cl,useValue:this.componentFactoryResolver},...i],ks(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},G0=class extends om{constructor(n){super(),this.moduleType=n}create(n){return new q0(this.moduleType,n,[])}};function n6(e,n,t){return new q0(e,n,t)}var eC=class extends bl{constructor(n){super(),this.componentFactoryResolver=new $0(this),this.instance=null;let t=new Jf([...n.providers,{provide:bl,useValue:this},{provide:Cl,useValue:this.componentFactoryResolver}],n.parent||iv(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function Mv(e,n,t=null){return new eC({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}var Bu=(()=>{let n=class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function HE(e){return rx(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function i6(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{let t=e[Symbol.iterator](),i;for(;!(i=t.next()).done;)n(i.value)}}function rx(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Ml(e,n,t){return e[n]=t}function Dv(e,n){return e[n]}function Ys(e,n,t){let i=e[n];return Object.is(i,t)?!1:(e[n]=t,!0)}function Ph(e,n,t,i){let r=Ys(e,n,t);return Ys(e,n+1,i)||r}function sx(e,n,t,i,r){let s=Ph(e,n,t,i);return Ys(e,n+2,r)||s}function Tv(e,n,t,i,r,s){let l=Ph(e,n,t,i);return Ph(e,n+2,r,s)||l}function r6(e){return(e.flags&32)===32}function s6(e,n,t,i,r,s,l,d,f){let v=n.consts,x=Nh(n,e,4,l||null,Eh(v,d));KC(n,t,x,Eh(v,f)),uv(n,x);let O=x.tView=YC(2,x,i,r,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,v,null);return n.queries!==null&&(n.queries.template(n,x),O.queries=n.queries.embeddedTView(x)),x}function de(e,n,t,i,r,s,l,d){let f=tn(),v=ir(),x=e+Xr,O=v.firstCreatePass?s6(x,v,f,n,t,i,r,s,l):v.data[x];Lu(O,!1);let A=a6(v,f,O,e);cv()&&gv(v,f,A,O),yl(A,f);let L=TE(A,f,A,O);return f[x]=L,bv(f,L),Pz(L,O,f),av(O)&&WC(v,f,O),l!=null&&ZC(f,O,d),de}var a6=o6;function o6(e,n,t,i){return lv(!0),n[Bi].createComment("")}function _s(e,n,t,i){let r=tn(),s=Nu();if(Ys(r,s,n)){let l=ir(),d=Rh();DE(d,r,e,n,t,i)}return _s}function Sv(e,n,t,i){return Ys(e,Nu(),t)?n+zo(t)+i:As}function c6(e,n,t,i,r,s){let l=DI(),d=Ph(e,l,t,r);return ov(2),d?n+zo(t)+i+zo(r)+s:As}function l6(e,n,t,i,r,s,l,d){let f=DI(),v=sx(e,f,t,r,l);return ov(3),v?n+zo(t)+i+zo(r)+s+zo(l)+d:As}function jh(e,n,t,i,r,s){let l=tn(),d=Sv(l,n,t,i);if(d!==As){let f=Rh();DE(f,l,e,d,r,s)}return jh}function b0(e,n){return e<<17|n<<2}function Fu(e){return e>>17&32767}function u6(e){return(e&2)==2}function d6(e,n){return e&131071|n<<17}function tC(e){return e|2}function kh(e){return(e&131068)>>2}function lw(e,n){return e&-131069|n<<2}function h6(e){return(e&1)===1}function nC(e){return e|1}function p6(e,n,t,i,r,s){let l=s?n.classBindings:n.styleBindings,d=Fu(l),f=kh(l);e[i]=t;let v=!1,x;if(Array.isArray(t)){let O=t;x=O[1],(x===null||hm(O,x)>0)&&(v=!0)}else x=t;if(r)if(f!==0){let A=Fu(e[d+1]);e[i+1]=b0(A,d),A!==0&&(e[A+1]=lw(e[A+1],i)),e[d+1]=d6(e[d+1],i)}else e[i+1]=b0(d,0),d!==0&&(e[d+1]=lw(e[d+1],i)),d=i;else e[i+1]=b0(f,0),d===0?d=i:e[f+1]=lw(e[f+1],i),f=i;v&&(e[i+1]=tC(e[i+1])),O2(e,x,i,!0),O2(e,x,i,!1),f6(n,x,e,i,s),l=b0(d,f),s?n.classBindings=l:n.styleBindings=l}function f6(e,n,t,i,r){let s=r?e.residualClasses:e.residualStyles;s!=null&&typeof n=="string"&&hm(s,n)>=0&&(t[i+1]=nC(t[i+1]))}function O2(e,n,t,i){let r=e[t+1],s=n===null,l=i?Fu(r):kh(r),d=!1;for(;l!==0&&(d===!1||s);){let f=e[l],v=e[l+1];m6(f,n)&&(d=!0,e[l+1]=i?nC(v):tC(v)),l=i?Fu(v):kh(v)}d&&(e[t+1]=i?tC(r):nC(r))}function m6(e,n){return e===null||n==null||(Array.isArray(e)?e[1]:e)===n?!0:Array.isArray(e)&&typeof n=="string"?hm(e,n)>=0:!1}var co={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function g6(e){return e.substring(co.key,co.keyEnd)}function _6(e){return v6(e),qE(e,GE(e,0,co.textEnd))}function qE(e,n){let t=co.textEnd;return t===n?-1:(n=co.keyEnd=y6(e,co.key=n,t),GE(e,n,t))}function v6(e){co.key=0,co.keyEnd=0,co.value=0,co.valueEnd=0,co.textEnd=e.length}function GE(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function y6(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}function H(e,n,t){let i=tn(),r=Nu();if(Ys(i,r,n)){let s=ir(),l=Rh();yv(s,l,i,e,n,i[Bi],t,!1)}return H}function iC(e,n,t,i,r){let s=n.inputs,l=r?"class":"style";QC(e,t,s[l],l,i)}function Ra(e,n,t){return WE(e,n,t,!1),Ra}function Rn(e,n){return WE(e,n,null,!0),Rn}function vs(e){ox(D6,ax,e,!0)}function ax(e,n){for(let t=_6(n);t>=0;t=qE(n,t))dm(e,g6(n),!0)}function WE(e,n,t,i){let r=tn(),s=ir(),l=ov(2);if(s.firstUpdatePass&&YE(s,e,l,i),n!==As&&Ys(r,l,n)){let d=s.data[Dc()];KE(s,d,r,r[Bi],e,r[l+1]=S6(n,t),i,l)}}function ox(e,n,t,i){let r=ir(),s=ov(2);r.firstUpdatePass&&YE(r,null,s,i);let l=tn();if(t!==As&&Ys(l,s,t)){let d=r.data[Dc()];if(QE(d,i)&&!ZE(r,s)){let f=i?d.classesWithoutHost:d.stylesWithoutHost;f!==null&&(t=mw(f,t||"")),iC(r,d,l,t,i)}else T6(r,d,l,l[Bi],l[s+1],l[s+1]=M6(e,n,t),i,s)}}function ZE(e,n){return n>=e.expandoStartIndex}function YE(e,n,t,i){let r=e.data;if(r[t+1]===null){let s=r[Dc()],l=ZE(e,t);QE(s,i)&&n===null&&!l&&(n=!1),n=b6(r,s,n,i),p6(r,s,n,t,l,i)}}function b6(e,n,t,i){let r=J5(e),s=i?n.residualClasses:n.residualStyles;if(r===null)(i?n.classBindings:n.styleBindings)===0&&(t=uw(null,e,n,t,i),t=cm(t,n.attrs,i),s=null);else{let l=n.directiveStylingLast;if(l===-1||e[l]!==r)if(t=uw(r,e,n,t,i),s===null){let f=w6(e,n,i);f!==void 0&&Array.isArray(f)&&(f=uw(null,e,n,f[1],i),f=cm(f,n.attrs,i),C6(e,n,i,f))}else s=x6(e,n,i)}return s!==void 0&&(i?n.residualClasses=s:n.residualStyles=s),t}function w6(e,n,t){let i=t?n.classBindings:n.styleBindings;if(kh(i)!==0)return e[Fu(i)]}function C6(e,n,t,i){let r=t?n.classBindings:n.styleBindings;e[Fu(r)]=i}function x6(e,n,t){let i,r=n.directiveEnd;for(let s=1+n.directiveStylingLast;s<r;s++){let l=e[s].hostAttrs;i=cm(i,l,t)}return cm(i,n.attrs,t)}function uw(e,n,t,i,r){let s=null,l=t.directiveEnd,d=t.directiveStylingLast;for(d===-1?d=t.directiveStart:d++;d<l&&(s=n[d],i=cm(i,s.hostAttrs,r),s!==e);)d++;return e!==null&&(t.directiveStylingLast=d),i}function cm(e,n,t){let i=t?1:2,r=-1;if(n!==null)for(let s=0;s<n.length;s++){let l=n[s];typeof l=="number"?r=l:r===i&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),dm(e,l,t?!0:n[++s]))}return e===void 0?null:e}function M6(e,n,t){if(t==null||t==="")return Zs;let i=[],r=Lh(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)e(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&e(i,s,r[s]);else typeof r=="string"&&n(i,r);return i}function D6(e,n,t){let i=String(n);i!==""&&!i.includes(" ")&&dm(e,i,t)}function T6(e,n,t,i,r,s,l,d){r===As&&(r=Zs);let f=0,v=0,x=0<r.length?r[0]:null,O=0<s.length?s[0]:null;for(;x!==null||O!==null;){let A=f<r.length?r[f+1]:void 0,L=v<s.length?s[v+1]:void 0,U=null,te;x===O?(f+=2,v+=2,A!==L&&(U=O,te=L)):O===null||x!==null&&x<O?(f+=2,U=x):(v+=2,U=O,te=L),U!==null&&KE(e,n,t,i,U,te,l,d),x=f<r.length?r[f]:null,O=v<s.length?s[v]:null}}function KE(e,n,t,i,r,s,l,d){if(!(n.type&3))return;let f=e.data,v=f[d+1],x=h6(v)?I2(f,n,t,r,kh(v),l):void 0;if(!W0(x)){W0(s)||u6(v)&&(s=I2(f,null,t,r,d,l));let O=yI(Dc(),t);vV(i,l,O,r,s)}}function I2(e,n,t,i,r,s){let l=n===null,d;for(;r>0;){let f=e[r],v=Array.isArray(f),x=v?f[1]:f,O=x===null,A=t[r+1];A===As&&(A=O?Zs:void 0);let L=O?X1(A,i):x===i?A:void 0;if(v&&!W0(L)&&(L=X1(f,i)),W0(L)&&(d=L,l))return d;let U=e[r+1];r=l?Fu(U):kh(U)}if(n!==null){let f=s?n.residualClasses:n.residualStyles;f!=null&&(d=X1(f,i))}return d}function W0(e){return e!==void 0}function S6(e,n){return e==null||e===""||(typeof n=="string"?e=e+n:typeof e=="object"&&(e=ks(Lh(e)))),e}function QE(e,n){return(e.flags&(n?8:16))!==0}function ha(e,n,t){let i=tn(),r=Sv(i,e,n,t);ox(dm,ax,r,!0)}function JE(e,n,t,i,r,s,l){let d=tn(),f=l6(d,e,n,t,i,r,s,l);ox(dm,ax,f,!0)}var rC=class{destroy(n){}updateValue(n,t){}swap(n,t){let i=Math.min(n,t),r=Math.max(n,t),s=this.detach(r);if(r-i>1){let l=this.detach(i);this.attach(i,s),this.attach(r,l)}else this.attach(i,s)}move(n,t){this.attach(t,this.detach(n))}};function dw(e,n,t,i,r){return e===t&&Object.is(n,i)?1:Object.is(r(e,n),r(t,i))?-1:0}function O6(e,n,t){let i,r,s=0,l=e.length-1;if(Array.isArray(n)){let d=n.length-1;for(;s<=l&&s<=d;){let f=e.at(s),v=n[s],x=dw(s,f,s,v,t);if(x!==0){x<0&&e.updateValue(s,v),s++;continue}let O=e.at(l),A=n[d],L=dw(l,O,d,A,t);if(L!==0){L<0&&e.updateValue(l,A),l--,d--;continue}let U=t(s,f),te=t(l,O),ce=t(s,v);if(Object.is(ce,te)){let fe=t(d,A);Object.is(fe,U)?(e.swap(s,l),e.updateValue(l,A),d--,l--):e.move(l,s),e.updateValue(s,v),s++;continue}if(i??=new Z0,r??=P2(e,s,l,t),sC(e,i,s,ce))e.updateValue(s,v),s++,l++;else if(r.has(ce))i.set(U,e.detach(s)),l--;else{let fe=e.create(s,n[s]);e.attach(s,fe),s++,l++}}for(;s<=d;)E2(e,i,t,s,n[s]),s++}else if(n!=null){let d=n[Symbol.iterator](),f=d.next();for(;!f.done&&s<=l;){let v=e.at(s),x=f.value,O=dw(s,v,s,x,t);if(O!==0)O<0&&e.updateValue(s,x),s++,f=d.next();else{i??=new Z0,r??=P2(e,s,l,t);let A=t(s,x);if(sC(e,i,s,A))e.updateValue(s,x),s++,l++,f=d.next();else if(!r.has(A))e.attach(s,e.create(s,x)),s++,l++,f=d.next();else{let L=t(s,v);i.set(L,e.detach(s)),l--}}}for(;!f.done;)E2(e,i,t,e.length,f.value),f=d.next()}for(;s<=l;)e.destroy(e.detach(l--));i?.forEach(d=>{e.destroy(d)})}function sC(e,n,t,i){return n!==void 0&&n.has(i)?(e.attach(t,n.get(i)),n.delete(i),!0):!1}function E2(e,n,t,i,r){if(sC(e,n,i,t(i,r)))e.updateValue(i,r);else{let s=e.create(i,r);e.attach(i,s)}}function P2(e,n,t,i){let r=new Set;for(let s=n;s<=t;s++)r.add(i(s,e.at(s)));return r}var Z0=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let t=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(n,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,t){if(this.kvMap.has(n)){let i=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(n,t)}forEach(n){for(let[t,i]of this.kvMap)if(n(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),n(i,t)}}};function XE(e,n,t){Bh("NgControlFlow");let i=tn(),r=Nu(),s=lC(i,Xr+e),l=0;if(Ys(i,r,n)){let d=Hn(null);try{if(AE(s,l),n!==-1){let f=uC(i[Dn],Xr+n),v=sm(s,f.tView.ssrId),x=wv(i,f,t,{dehydratedView:v});Cv(s,x,l,rm(f,v))}}finally{Hn(d)}}else{let d=kE(s,l);d!==void 0&&(d[fs]=t)}}var aC=class{constructor(n,t,i){this.lContainer=n,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-ms}};function cx(e,n){return n}var oC=class{constructor(n,t,i){this.hasEmptyBlock=n,this.trackByFn=t,this.liveCollection=i}};function lx(e,n,t,i,r,s,l,d,f,v,x,O,A){Bh("NgControlFlow");let L=f!==void 0,U=tn(),te=d?l.bind(U[Ea][fs]):l,ce=new oC(L,te);U[Xr+e]=ce,de(e+1,n,t,i,r,s),L&&de(e+2,f,v,x,O,A)}var cC=class extends rC{constructor(n,t,i){super(),this.lContainer=n,this.hostLView=t,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-ms}at(n){return this.getLView(n)[fs].$implicit}attach(n,t){let i=t[Sh];this.needsIndexUpdate||=n!==this.length,Cv(this.lContainer,t,n,rm(this.templateTNode,i))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,I6(this.lContainer,n)}create(n,t){let i=sm(this.lContainer,this.templateTNode.tView.ssrId);return wv(this.hostLView,this.templateTNode,new aC(this.lContainer,t,n),{dehydratedView:i})}destroy(n){mv(n[Dn],n)}updateValue(n,t){this.getLView(n)[fs].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[fs].$index=n}getLView(n){return E6(this.lContainer,n)}};function ux(e){let n=Hn(null),t=Dc();try{let i=tn(),r=i[Dn],s=i[t];if(s.liveCollection===void 0){let d=t+1,f=lC(i,d),v=uC(r,d);s.liveCollection=new cC(f,i,v)}else s.liveCollection.reset();let l=s.liveCollection;if(O6(l,e,s.trackByFn),l.updateIndexes(),s.hasEmptyBlock){let d=Nu(),f=l.length===0;if(Ys(i,d,f)){let v=t+2,x=lC(i,v);if(f){let O=uC(r,v),A=sm(x,O.tView.ssrId),L=wv(i,O,void 0,{dehydratedView:A});Cv(x,L,0,rm(O,A))}else AE(x,0)}}}finally{Hn(n)}}function lC(e,n){return e[n]}function I6(e,n){return im(e,n)}function E6(e,n){return kE(e,n)}function uC(e,n){return OC(e,n)}function P6(e,n,t,i,r,s){let l=n.consts,d=Eh(l,r),f=Nh(n,e,2,i,d);return KC(n,t,f,Eh(l,s)),f.attrs!==null&&U0(f,f.attrs,!1),f.mergedAttrs!==null&&U0(f,f.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,f),f}function K(e,n,t,i){let r=tn(),s=ir(),l=Xr+e,d=r[Bi],f=s.firstCreatePass?P6(l,s,r,n,t,i):s.data[l],v=k6(s,r,f,d,n,e);r[l]=v;let x=av(f);return Lu(f,!0),gE(d,v,f),!r6(f)&&cv()&&gv(s,r,v,f),z5()===0&&yl(v,r),U5(),x&&(WC(s,r,f),GC(s,f,r)),i!==null&&ZC(r,f),K}function Q(){let e=Ks();kC()?AC():(e=e.parent,Lu(e,!1));let n=e;H5(n)&&q5(),$5();let t=ir();return t.firstCreatePass&&(uv(t,e),SC(e)&&t.queries.elementEnd(e)),n.classesWithoutHost!=null&&sj(n)&&iC(t,n,tn(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&aj(n)&&iC(t,n,tn(),n.stylesWithoutHost,!1),Q}function Me(e,n,t,i){return K(e,n,t,i),Q(),Me}var k6=(e,n,t,i,r,s)=>(lv(!0),oE(i,r,tj()));function A6(e,n,t,i,r){let s=n.consts,l=Eh(s,i),d=Nh(n,e,8,"ng-container",l);l!==null&&U0(d,l,!0);let f=Eh(s,r);return KC(n,t,d,f),n.queries!==null&&n.queries.elementStart(n,d),d}function Nt(e,n,t){let i=tn(),r=ir(),s=e+Xr,l=r.firstCreatePass?A6(s,r,i,n,t):r.data[s];Lu(l,!0);let d=R6(r,i,l,e);return i[s]=d,cv()&&gv(r,i,d,l),yl(d,i),av(l)&&(WC(r,i,l),GC(r,l,i)),t!=null&&ZC(i,l),Nt}function Bt(){let e=Ks(),n=ir();return kC()?AC():(e=e.parent,Lu(e,!1)),n.firstCreatePass&&(uv(n,e),SC(e)&&n.queries.elementEnd(e)),Bt}function St(e,n,t){return Nt(e,n,t),Bt(),St}var R6=(e,n,t,i)=>(lv(!0),nV(n[Bi],""));function kt(){return tn()}function Ov(e,n,t){let i=tn(),r=Nu();if(Ys(i,r,n)){let s=ir(),l=Rh();yv(s,l,i,e,n,i[Bi],t,!0)}return Ov}var Mu=void 0;function F6(e){let n=e,t=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return t===1&&i===0?1:5}var L6=["en",[["a","p"],["AM","PM"],Mu],[["AM","PM"],Mu,Mu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Mu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Mu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Mu,"{1} 'at' {0}",Mu],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",F6],hw={};function dx(e){let n=N6(e),t=k2(n);if(t)return t;let i=n.split("-")[0];if(t=k2(i),t)return t;if(i==="en")return L6;throw new Ht(701,!1)}function k2(e){return e in hw||(hw[e]=gr.ng&&gr.ng.common&&gr.ng.common.locales&&gr.ng.common.locales[e]),hw[e]}var Vh=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Vh||{});function N6(e){return e.toLowerCase().replace(/_/g,"-")}var Y0="en-US";var B6=Y0;function j6(e){typeof e=="string"&&(B6=e.toLowerCase().replace(/_/g,"-"))}function nt(e,n,t,i){let r=tn(),s=ir(),l=Ks();return eP(s,r,r[Bi],l,e,n,i),nt}function V6(e,n,t,i){let r=e.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let l=r[s];if(l===t&&r[s+1]===i){let d=n[Xf],f=r[s+2];return d.length>f?d[f]:null}typeof l=="string"&&(s+=2)}return null}function eP(e,n,t,i,r,s,l){let d=av(i),v=e.firstCreatePass&&IE(e),x=n[fs],O=OE(n),A=!0;if(i.type&3||l){let te=ka(i,n),ce=l?l(te):te,fe=O.length,ye=l?Ae=>l($o(Ae[i.index])):i.index,Re=null;if(!l&&d&&(Re=V6(e,n,r,i.index)),Re!==null){let Ae=Re.__ngLastListenerFn__||Re;Ae.__ngNextListenerFn__=s,Re.__ngLastListenerFn__=s,A=!1}else{s=R2(i,n,x,s,!1);let Ae=t.listen(ce,r,s);O.push(s,Ae),v&&v.push(r,ye,fe,fe+1)}}else s=R2(i,n,x,s,!1);let L=i.outputs,U;if(A&&L!==null&&(U=L[r])){let te=U.length;if(te)for(let ce=0;ce<te;ce+=2){let fe=U[ce],ye=U[ce+1],We=n[fe][ye].subscribe(s),ft=O.length;O.push(s,We),v&&v.push(r,i.index,ft,-(ft+1))}}}function A2(e,n,t,i){let r=Hn(null);try{return jo(6,n,t),t(i)!==!1}catch(s){return EE(e,s),!1}finally{jo(7,n,t),Hn(r)}}function R2(e,n,t,i,r){return function s(l){if(l===Function)return i;let d=e.componentOffset>-1?wl(e.index,n):n;XC(d);let f=A2(n,t,i,l),v=s.__ngNextListenerFn__;for(;v;)f=A2(n,t,v,l)&&f,v=v.__ngNextListenerFn__;return r&&f===!1&&l.preventDefault(),f}}function Y(e=1){return ej(e)}function z6(e,n){let t=null,i=s5(e);for(let r=0;r<n.length;r++){let s=n[r];if(s==="*"){t=r;continue}if(i===null?eI(e,s,!0):c5(i,s))return r}return t}function mo(e){let n=tn()[Ea][da];if(!n.projection){let t=e?e.length:1,i=n.projection=YB(t,null),r=i.slice(),s=n.child;for(;s!==null;){let l=e?z6(s,e):0;l!==null&&(r[l]?r[l].projectionNext=s:i[l]=s,r[l]=s),s=s.next}}}function Qs(e,n=0,t){let i=tn(),r=ir(),s=Nh(r,Xr+e,16,null,t||null);s.projection===null&&(s.projection=n),AC(),(!i[Sh]||xI())&&(s.flags&32)!==32&&gV(r,i,s)}function Oi(e,n,t){return Iv(e,"",n,"",t),Oi}function Iv(e,n,t,i,r){let s=tn(),l=Sv(s,n,t,i);if(l!==As){let d=ir(),f=Rh();yv(d,f,s,e,l,s[Bi],r,!1)}return Iv}function bi(e,n,t){jz(e,n,t)}function ui(e){let n=tn(),t=ir(),i=TI();RC(i+1);let r=ix(t,i);if(e.dirty&&L5(n)===((r.metadata.flags&2)===2)){if(r.matches===null)e.reset([]);else{let s=Uz(n,i);e.reset(s,vj),e.notifyOnChanges()}return!0}return!1}function di(){return Nz(tn(),TI())}function U6(e,n,t,i){t>=e.data.length&&(e.data[t]=null,e.blueprint[t]=null),n[t]=i}function Xe(e){let n=W5();return IC(n,Xr+e)}function je(e,n=""){let t=tn(),i=ir(),r=e+Xr,s=i.firstCreatePass?Nh(i,r,1,n,null):i.data[r],l=$6(i,t,s,n,e);t[r]=l,cv()&&gv(i,t,l,s),Lu(s,!1)}var $6=(e,n,t,i,r)=>(lv(!0),eV(n[Bi],i));function hi(e){return Rt("",e,""),hi}function Rt(e,n,t){let i=tn(),r=Sv(i,e,n,t);return r!==As&&PE(i,Dc(),r),Rt}function Ev(e,n,t,i,r){let s=tn(),l=c6(s,e,n,t,i,r);return l!==As&&PE(s,Dc(),l),Ev}function zh(e,n,t){$E(n)&&(n=n());let i=tn(),r=Nu();if(Ys(i,r,n)){let s=ir(),l=Rh();yv(s,l,i,e,n,i[Bi],t,!1)}return zh}function gm(e,n){let t=$E(e);return t&&e.set(n),t}function Uh(e,n){let t=tn(),i=ir(),r=Ks();return eP(i,t,t[Bi],r,e,n),Uh}function H6(e,n,t){let i=ir();if(i.firstCreatePass){let r=vl(e);dC(t,i.data,i.blueprint,r,!0),dC(n,i.data,i.blueprint,r,!1)}}function dC(e,n,t,i,r){if(e=Ps(e),Array.isArray(e))for(let s=0;s<e.length;s++)dC(e[s],n,t,i,r);else{let s=ir(),l=tn(),d=Ks(),f=Th(e)?e:Ps(e.provide),v=uI(e),x=d.providerIndexes&1048575,O=d.directiveStart,A=d.providerIndexes>>20;if(Th(e)||!e.multi){let L=new Pu(v,r,Ce),U=fw(f,n,r?x:x+A,O);U===-1?(Sw(L0(d,l),s,f),pw(s,e,n.length),n.push(f),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),t.push(L),l.push(L)):(t[U]=L,l[U]=L)}else{let L=fw(f,n,x+A,O),U=fw(f,n,x,x+A),te=L>=0&&t[L],ce=U>=0&&t[U];if(r&&!ce||!r&&!te){Sw(L0(d,l),s,f);let fe=W6(r?G6:q6,t.length,r,i,v);!r&&ce&&(t[U].providerFactory=fe),pw(s,e,n.length,0),n.push(f),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),t.push(fe),l.push(fe)}else{let fe=tP(t[r?U:L],v,!r&&i);pw(s,e,L>-1?L:U,fe)}!r&&i&&ce&&t[U].componentProviders++}}}function pw(e,n,t,i){let r=Th(n),s=y5(n);if(r||s){let f=(s?Ps(n.useClass):n).prototype.ngOnDestroy;if(f){let v=e.destroyHooks||(e.destroyHooks=[]);if(!r&&n.multi){let x=v.indexOf(t);x===-1?v.push(t,[i,f]):v[x+1].push(i,f)}else v.push(t,f)}}}function tP(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function fw(e,n,t,i){for(let r=t;r<i;r++)if(n[r]===e)return r;return-1}function q6(e,n,t,i){return hC(this.multi,[])}function G6(e,n,t,i){let r=this.multi,s;if(this.providerFactory){let l=this.providerFactory.componentProviders,d=ku(t,t[Dn],this.providerFactory.index,i);s=d.slice(0,l),hC(r,s);for(let f=l;f<d.length;f++)s.push(d[f])}else s=[],hC(r,s);return s}function hC(e,n){for(let t=0;t<e.length;t++){let i=e[t];n.push(i())}return n}function W6(e,n,t,i,r){let s=new Pu(e,t,Ce);return s.multi=[],s.index=n,s.componentProviders=0,tP(s,r,i&&!t),s}function Fa(e,n=[]){return t=>{t.providersResolver=(i,r)=>H6(i,r?r(e):e,n)}}var Z6=(()=>{let n=class n{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=oI(!1,i.type),s=r.length>0?Mv([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};n.\u0275prov=ct({token:n,providedIn:"environment",factory:()=>new n(xt(Rr))});let e=n;return e})();function Sc(e){Bh("NgStandalone"),e.getStandaloneInjector=n=>n.get(Z6).getOrCreateStandaloneInjector(e)}function _m(e,n,t){let i=Go()+e,r=tn();return r[i]===As?Ml(r,i,t?n.call(t):n()):Dv(r,i)}function wi(e,n,t,i){return sP(tn(),Go(),e,n,t,i)}function Js(e,n,t,i,r){return aP(tn(),Go(),e,n,t,i,r)}function $h(e,n,t,i,r,s){return Y6(tn(),Go(),e,n,t,i,r,s)}function nP(e,n,t,i,r,s,l){return K6(tn(),Go(),e,n,t,i,r,s,l)}function hx(e,n,t,i,r,s,l,d){let f=Go()+e,v=tn(),x=Tv(v,f,t,i,r,s);return Ys(v,f+4,l)||x?Ml(v,f+5,d?n.call(d,t,i,r,s,l):n(t,i,r,s,l)):Dv(v,f+5)}function iP(e,n,t,i,r,s,l,d,f){let v=Go()+e,x=tn(),O=Tv(x,v,t,i,r,s);return Ph(x,v+4,l,d)||O?Ml(x,v+6,f?n.call(f,t,i,r,s,l,d):n(t,i,r,s,l,d)):Dv(x,v+6)}function rP(e,n,t,i,r,s,l,d,f,v){let x=Go()+e,O=tn(),A=Tv(O,x,t,i,r,s);return sx(O,x+4,l,d,f)||A?Ml(O,x+7,v?n.call(v,t,i,r,s,l,d,f):n(t,i,r,s,l,d,f)):Dv(O,x+7)}function Pv(e,n){let t=e[n];return t===As?void 0:t}function sP(e,n,t,i,r,s){let l=n+t;return Ys(e,l,r)?Ml(e,l+1,s?i.call(s,r):i(r)):Pv(e,l+1)}function aP(e,n,t,i,r,s,l){let d=n+t;return Ph(e,d,r,s)?Ml(e,d+2,l?i.call(l,r,s):i(r,s)):Pv(e,d+2)}function Y6(e,n,t,i,r,s,l,d){let f=n+t;return sx(e,f,r,s,l)?Ml(e,f+3,d?i.call(d,r,s,l):i(r,s,l)):Pv(e,f+3)}function K6(e,n,t,i,r,s,l,d,f){let v=n+t;return Tv(e,v,r,s,l,d)?Ml(e,v+4,f?i.call(f,r,s,l,d):i(r,s,l,d)):Pv(e,v+4)}function tt(e,n){let t=ir(),i,r=e+Xr;t.firstCreatePass?(i=Q6(n,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let s=i.factory||(i.factory=Su(i.type,!0)),l,d=Ws(Ce);try{let f=F0(!1),v=s();return F0(f),U6(t,tn(),r,v),v}finally{Ws(d)}}function Q6(e,n){if(n)for(let t=n.length-1;t>=0;t--){let i=n[t];if(e===i.name)return i}}function ht(e,n,t){let i=e+Xr,r=tn(),s=IC(r,i);return oP(r,i)?sP(r,Go(),n,s.transform,t,s):s.transform(t)}function La(e,n,t,i){let r=e+Xr,s=tn(),l=IC(s,r);return oP(s,r)?aP(s,Go(),n,l.transform,t,i,l):l.transform(t,i)}function oP(e,n){return e[Dn].data[n].pure}function mt(e,n){return xv(e,n)}var w0=null;function J6(e){w0!==null&&(e.defaultEncapsulation!==w0.defaultEncapsulation||e.preserveWhitespaces!==w0.preserveWhitespaces)||(w0=e)}var kv=(()=>{let n=class n{log(i){console.log(i)}warn(i){console.warn(i)}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"platform"});let e=n;return e})();var px=new Lt(""),vm=new Lt(""),Av=(()=>{let n=class n{constructor(i,r,s){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,fx||(X6(s),s.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{On.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(i)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,s){let l=-1;r&&r>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==l),i()},r)),this._callbacks.push({doneCb:i,timeoutId:l,updateCb:s})}whenStable(i,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,s){return[]}};n.\u0275fac=function(r){return new(r||n)(xt(On),xt(Rv),xt(vm))},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})(),Rv=(()=>{let n=class n{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return fx?.findTestabilityInTree(this,i,r)??null}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"platform"});let e=n;return e})();function X6(e){fx=e}var fx;function Dl(e){return!!e&&typeof e.then=="function"}function mx(e){return!!e&&typeof e.subscribe=="function"}var Fv=new Lt(""),cP=(()=>{let n=class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=Qe(Fv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let l=s();if(Dl(l))i.push(l);else if(mx(l)){let d=new Promise((f,v)=>{l.subscribe({complete:f,error:v})});i.push(d)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),i.length===0&&r(),this.initialized=!0}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),Lv=new Lt("");function e8(){xO(()=>{throw new Ht(600,!1)})}function t8(e){return e.isBoundToModule}function n8(e,n,t){try{let i=t();return Dl(i)?i.catch(r=>{throw n.runOutsideAngular(()=>e.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>e.handleError(i)),i}}function lP(e,n){return Array.isArray(n)?n.reduce(lP,e):it(it({},e),n)}var Zo=(()=>{let n=class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Qe(HI),this.afterRenderEffectManager=Qe(nx),this.externalTestViews=new Set,this.beforeRender=new kn,this.afterTick=new kn,this.componentTypes=[],this.components=[],this.isStable=Qe(Bu).hasPendingTasks.pipe(Ft(i=>!i)),this._injector=Qe(Rr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let s=i instanceof z0;if(!this._injector.get(cP).done){let L=!s&&iI(i),U=!1;throw new Ht(405,U)}let d;s?d=i:d=this._injector.get(Cl).resolveComponentFactory(i),this.componentTypes.push(d.componentType);let f=t8(d)?void 0:this._injector.get(bl),v=r||d.selector,x=d.create(gs.NULL,[],v,f),O=x.location.nativeElement,A=x.injector.get(px,null);return A?.registerApplication(O),x.onDestroy(()=>{this.detachView(x.hostView),S0(this.components,x),A?.unregisterApplication(O)}),this._loadComponent(x),x}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new Ht(101,!1);let r=Hn(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,Hn(r)}}detectChangesInAttachedViews(i){let r=0,s=this.afterRenderEffectManager;for(;;){if(r===FE)throw new Ht(103,!1);if(i){let l=r===0;this.beforeRender.next(l);for(let{_lView:d,notifyErrorHandler:f}of this._views)i8(d,l,f)}if(r++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>pC(l))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>pC(l))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;S0(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Lv,[]);[...this._bootstrapListeners,...r].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>S0(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Ht(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function S0(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}function i8(e,n,t){!n&&!pC(e)||r8(e,t,n)}function pC(e){return PC(e)}function r8(e,n,t){let i;t?(i=0,e[gn]|=1024):e[gn]&64?i=0:i=1,LE(e,n,i)}var fC=class{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}},Nv=(()=>{let n=class n{compileModuleSync(i){return new G0(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),s=rI(i),l=aE(s.declarations).reduce((d,f)=>{let v=wc(f);return v&&d.push(new Ru(v)),d},[]);return new fC(r,l)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),s8=new Lt("");function a8(e,n,t){let i=new G0(t);return Promise.resolve(i)}function F2(e){for(let n=e.length-1;n>=0;n--)if(e[n]!==void 0)return e[n]}var o8=(()=>{let n=class n{constructor(){this.zone=Qe(On),this.applicationRef=Qe(Zo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function c8(e){return[{provide:On,useFactory:e},{provide:Dh,multi:!0,useFactory:()=>{let n=Qe(o8,{optional:!0});return()=>n.initialize()}},{provide:Dh,multi:!0,useFactory:()=>{let n=Qe(d8);return()=>{n.initialize()}}},{provide:HI,useFactory:l8}]}function l8(){let e=Qe(On),n=Qe(Ho);return t=>e.runOutsideAngular(()=>n.handleError(t))}function u8(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var d8=(()=>{let n=class n{constructor(){this.subscription=new fr,this.initialized=!1,this.zone=Qe(On),this.pendingTasks=Qe(Bu)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{On.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{On.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function h8(){return typeof $localize<"u"&&$localize.locale||Y0}var ym=new Lt("",{providedIn:"root",factory:()=>Qe(ym,Un.Optional|Un.SkipSelf)||h8()});var uP=new Lt(""),dP=(()=>{let n=class n{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){let s=gz(r?.ngZone,u8({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return s.run(()=>{let l=n6(i.moduleType,this.injector,c8(()=>s)),d=l.injector.get(Ho,null);return s.runOutsideAngular(()=>{let f=s.onError.subscribe({next:v=>{d.handleError(v)}});l.onDestroy(()=>{S0(this._modules,l),f.unsubscribe()})}),n8(d,s,()=>{let f=l.injector.get(cP);return f.runInitializers(),f.donePromise.then(()=>{let v=l.injector.get(ym,Y0);return j6(v||Y0),this._moduleDoBootstrap(l),l})})})}bootstrapModule(i,r=[]){let s=lP({},r);return a8(this.injector,s,i).then(l=>this.bootstrapModuleFactory(l,s))}_moduleDoBootstrap(i){let r=i.injector.get(Zo);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(s=>r.bootstrap(s));else if(i.instance.ngDoBootstrap)i.instance.ngDoBootstrap(r);else throw new Ht(-403,!1);this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ht(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let i=this._injector.get(uP,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};n.\u0275fac=function(r){return new(r||n)(xt(gs))},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"platform"});let e=n;return e})(),Yf=null,hP=new Lt("");function p8(e){if(Yf&&!Yf.get(hP,!1))throw new Ht(400,!1);e8(),Yf=e;let n=e.get(dP);return g8(e),n}function gx(e,n,t=[]){let i=`Platform: ${n}`,r=new Lt(i);return(s=[])=>{let l=pP();if(!l||l.injector.get(hP,!1)){let d=[...t,...s,{provide:r,useValue:!0}];e?e(d):p8(f8(d,i))}return m8(r)}}function f8(e=[],n){return gs.create({name:n,providers:[{provide:nv,useValue:"platform"},{provide:uP,useValue:new Set([()=>Yf=null])},...e]})}function m8(e){let n=pP();if(!n)throw new Ht(401,!1);return n}function pP(){return Yf?.get(dP)??null}function g8(e){e.get(BC,null)?.forEach(t=>t())}var pi=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=_8;let e=n;return e})();function _8(e){return v8(Ks(),tn(),(e&16)===16)}function v8(e,n,t){if(sv(e)&&!t){let i=wl(e.index,n);return new Au(i,i)}else if(e.type&47){let i=n[Ea];return new Au(i,n)}return null}var mC=class{constructor(){}supports(n){return HE(n)}create(n){return new gC(n)}},y8=(e,n)=>n,gC=class{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||y8}forEachItem(n){let t;for(t=this._itHead;t!==null;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){let l=!i||t&&t.currentIndex<L2(i,r,s)?t:i,d=L2(l,r,s),f=l.currentIndex;if(l===i)r--,i=i._nextRemoved;else if(t=t._next,l.previousIndex==null)r++;else{s||(s=[]);let v=d-r,x=f-r;if(v!=x){for(let A=0;A<v;A++){let L=A<s.length?s[A]:s[A]=0,U=L+A;x<=U&&U<v&&(s[A]=L+1)}let O=l.previousIndex;s[O]=x-v}}d!==f&&n(l,d,f)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)n(t)}diff(n){if(n==null&&(n=[]),!HE(n))throw new Ht(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._itHead,i=!1,r,s,l;if(Array.isArray(n)){this.length=n.length;for(let d=0;d<this.length;d++)s=n[d],l=this._trackByFn(d,s),t===null||!Object.is(t.trackById,l)?(t=this._mismatch(t,s,l,d),i=!0):(i&&(t=this._verifyReinsertion(t,s,l,d)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else r=0,i6(n,d=>{l=this._trackByFn(r,d),t===null||!Object.is(t.trackById,l)?(t=this._mismatch(t,d,l,r),i=!0):(i&&(t=this._verifyReinsertion(t,d,l,r)),Object.is(t.item,d)||this._addIdentityChange(t,d)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,i,r){let s;return n===null?s=this._itTail:(s=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),n!==null?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,s,r)):(n=this._linkedRecords===null?null:this._linkedRecords.get(i,r),n!==null?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,s,r)):n=this._addAfter(new _C(t,i),s,r)),n}_verifyReinsertion(n,t,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?n=this._reinsertAfter(s,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;n!==null;){let t=n._next;this._addToRemovals(this._unlink(n)),n=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);let r=n._prevRemoved,s=n._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(n,t,i),this._addToMoves(n,i),n}_moveAfter(n,t,i){return this._unlink(n),this._insertAfter(n,t,i),this._addToMoves(n,i),n}_addAfter(n,t,i){return this._insertAfter(n,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,t,i){let r=t===null?this._itHead:t._next;return n._next=r,n._prev=t,r===null?this._itTail=n:r._prev=n,t===null?this._itHead=n:t._next=n,this._linkedRecords===null&&(this._linkedRecords=new K0),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);let t=n._prev,i=n._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new K0),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}},_C=class{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},vC=class{constructor(){this._head=null,this._tail=null}add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){let t=n._prevDup,i=n._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},K0=class{constructor(){this.map=new Map}put(n){let t=n.trackById,i=this.map.get(t);i||(i=new vC,this.map.set(t,i)),i.add(n)}get(n,t){let i=n,r=this.map.get(i);return r?r.get(n,t):null}remove(n){let t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function L2(e,n,t){let i=e.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+n+r}var yC=class{constructor(){}supports(n){return n instanceof Map||rx(n)}create(){return new bC}},bC=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(n){let t;for(t=this._mapHead;t!==null;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)n(t)}diff(n){if(!n)n=new Map;else if(!(n instanceof Map||rx(n)))throw new Ht(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){let i=n._prev;return t._next=n,t._prev=i,n._prev=t,i&&(i._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){let r=this._records.get(n);this._maybeAddToChanges(r,t);let s=r._prev,l=r._next;return s&&(s._next=l),l&&(l._prev=s),r._next=null,r._prev=null,r}let i=new wC(n);return this._records.set(n,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;n!==null;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;n!=null;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){this._additionsHead===null?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){this._changesHead===null?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(i=>t(n[i],i))}},wC=class{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function N2(){return new _x([new mC])}var _x=(()=>{let n=class n{constructor(i){this.factories=i}static create(i,r){if(r!=null){let s=r.factories.slice();i=i.concat(s)}return new n(i)}static extend(i){return{provide:n,useFactory:r=>n.create(i,r||N2()),deps:[[n,new ev,new um]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r!=null)return r;throw new Ht(901,!1)}};n.\u0275prov=ct({token:n,providedIn:"root",factory:N2});let e=n;return e})();function B2(){return new vx([new yC])}var vx=(()=>{let n=class n{constructor(i){this.factories=i}static create(i,r){if(r){let s=r.factories.slice();i=i.concat(s)}return new n(i)}static extend(i){return{provide:n,useFactory:r=>n.create(i,r||B2()),deps:[[n,new ev,new um]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r)return r;throw new Ht(901,!1)}};n.\u0275prov=ct({token:n,providedIn:"root",factory:B2});let e=n;return e})();var fP=gx(null,"core",[]),mP=(()=>{let n=class n{constructor(i){}};n.\u0275fac=function(r){return new(r||n)(xt(Zo))},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();function Bv(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function yx(e){let n=Hn(null);try{return e()}finally{Hn(n)}}function jv(e,n){let t=wc(e),i=n.elementInjector||iv();return new Ru(t).create(i,n.projectableNodes,n.hostElement,n.environmentInjector)}function gP(e){let n=wc(e);if(!n)return null;let t=new Ru(n);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}var MP=null;function Yo(){return MP}function DP(e){MP??=e}var Vv=class{};var Vi=new Lt(""),Px=(()=>{let n=class n{historyGo(i){throw new Error("")}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:()=>Qe(w8),providedIn:"platform"});let e=n;return e})(),TP=new Lt(""),w8=(()=>{let n=class n extends Px{constructor(){super(),this._doc=Qe(Vi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yo().getBaseHref(this._doc)}onPopState(i){let r=Yo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Yo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:()=>new n,providedIn:"platform"});let e=n;return e})();function kx(e,n){if(e.length==0)return n;if(n.length==0)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,t==2?e+n.substring(1):t==1?e+n:e+"/"+n}function _P(e){let n=e.match(/#|\?|$/),t=n&&n.index||e.length,i=t-(e[t-1]==="/"?1:0);return e.slice(0,i)+e.slice(t)}function Oc(e){return e&&e[0]!=="?"?"?"+e:e}var ju=(()=>{let n=class n{historyGo(i){throw new Error("")}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:()=>Qe(Ax),providedIn:"root"});let e=n;return e})(),SP=new Lt(""),Ax=(()=>{let n=class n extends ju{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Qe(Vi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return kx(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Oc(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,l){let d=this.prepareExternalUrl(s+Oc(l));this._platformLocation.pushState(i,r,d)}replaceState(i,r,s,l){let d=this.prepareExternalUrl(s+Oc(l));this._platformLocation.replaceState(i,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};n.\u0275fac=function(r){return new(r||n)(xt(Px),xt(SP,8))},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),OP=(()=>{let n=class n extends ju{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(i){let r=kx(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,s,l){let d=this.prepareExternalUrl(s+Oc(l));d.length==0&&(d=this._platformLocation.pathname),this._platformLocation.pushState(i,r,d)}replaceState(i,r,s,l){let d=this.prepareExternalUrl(s+Oc(l));d.length==0&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};n.\u0275fac=function(r){return new(r||n)(xt(Px),xt(SP,8))},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})(),qh=(()=>{let n=class n{constructor(i){this._subject=new Zt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=M8(_P(vP(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Oc(r))}normalize(i){return n.stripTrailingSlash(x8(this._basePath,vP(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Oc(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Oc(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}};n.normalizeQueryParams=Oc,n.joinWithSlash=kx,n.stripTrailingSlash=_P,n.\u0275fac=function(r){return new(r||n)(xt(ju))},n.\u0275prov=ct({token:n,factory:()=>C8(),providedIn:"root"});let e=n;return e})();function C8(){return new qh(xt(ju))}function x8(e,n){if(!e||!n.startsWith(e))return n;let t=n.substring(e.length);return t===""||["/",";","?","#"].includes(t[0])?t:n}function vP(e){return e.replace(/\/index.html$/,"")}function M8(e){if(new RegExp("^(https?:)?//").test(e)){let[,t]=e.split(/\/\/[^\/]+/);return t}return e}var IP=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}(IP||{});var Ic={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function bm(e,n){let t=dx(e),i=t[Vh.NumberSymbols][n];if(typeof i>"u"){if(n===Ic.CurrencyDecimal)return t[Vh.NumberSymbols][Ic.Decimal];if(n===Ic.CurrencyGroup)return t[Vh.NumberSymbols][Ic.Group]}return i}function D8(e,n){return dx(e)[Vh.NumberFormats][n]}var T8=/^(\d+)?\.((\d+)(-(\d+))?)?$/,yP=22,zv=".",wm="0",S8=";",O8=",",bx="#";function I8(e,n,t,i,r,s,l=!1){let d="",f=!1;if(!isFinite(e))d=bm(t,Ic.Infinity);else{let v=A8(e);l&&(v=k8(v));let x=n.minInt,O=n.minFrac,A=n.maxFrac;if(s){let ye=s.match(T8);if(ye===null)throw new Error(`${s} is not a valid digit info`);let Re=ye[1],Ae=ye[3],We=ye[5];Re!=null&&(x=wx(Re)),Ae!=null&&(O=wx(Ae)),We!=null?A=wx(We):Ae!=null&&O>A&&(A=O)}R8(v,O,A);let L=v.digits,U=v.integerLen,te=v.exponent,ce=[];for(f=L.every(ye=>!ye);U<x;U++)L.unshift(0);for(;U<0;U++)L.unshift(0);U>0?ce=L.splice(U,L.length):(ce=L,L=[0]);let fe=[];for(L.length>=n.lgSize&&fe.unshift(L.splice(-n.lgSize,L.length).join(""));L.length>n.gSize;)fe.unshift(L.splice(-n.gSize,L.length).join(""));L.length&&fe.unshift(L.join("")),d=fe.join(bm(t,i)),ce.length&&(d+=bm(t,r)+ce.join("")),te&&(d+=bm(t,Ic.Exponential)+"+"+te)}return e<0&&!f?d=n.negPre+d+n.negSuf:d=n.posPre+d+n.posSuf,d}function E8(e,n,t){let i=D8(n,IP.Decimal),r=P8(i,bm(n,Ic.MinusSign));return I8(e,r,n,Ic.Group,Ic.Decimal,t)}function P8(e,n="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=e.split(S8),r=i[0],s=i[1],l=r.indexOf(zv)!==-1?r.split(zv):[r.substring(0,r.lastIndexOf(wm)+1),r.substring(r.lastIndexOf(wm)+1)],d=l[0],f=l[1]||"";t.posPre=d.substring(0,d.indexOf(bx));for(let x=0;x<f.length;x++){let O=f.charAt(x);O===wm?t.minFrac=t.maxFrac=x+1:O===bx?t.maxFrac=x+1:t.posSuf+=O}let v=d.split(O8);if(t.gSize=v[1]?v[1].length:0,t.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,s){let x=r.length-t.posPre.length-t.posSuf.length,O=s.indexOf(bx);t.negPre=s.substring(0,O).replace(/'/g,""),t.negSuf=s.slice(O+x).replace(/'/g,"")}else t.negPre=n+t.posPre,t.negSuf=t.posSuf;return t}function k8(e){if(e.digits[0]===0)return e;let n=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(n===0?e.digits.push(0,0):n===1&&e.digits.push(0),e.integerLen+=2),e}function A8(e){let n=Math.abs(e)+"",t=0,i,r,s,l,d;for((r=n.indexOf(zv))>-1&&(n=n.replace(zv,"")),(s=n.search(/e/i))>0?(r<0&&(r=s),r+=+n.slice(s+1),n=n.substring(0,s)):r<0&&(r=n.length),s=0;n.charAt(s)===wm;s++);if(s===(d=n.length))i=[0],r=1;else{for(d--;n.charAt(d)===wm;)d--;for(r-=s,i=[],l=0;s<=d;s++,l++)i[l]=Number(n.charAt(s))}return r>yP&&(i=i.splice(0,yP-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function R8(e,n,t){if(n>t)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${t}).`);let i=e.digits,r=i.length-e.integerLen,s=Math.min(Math.max(n,r),t),l=s+e.integerLen,d=i[l];if(l>0){i.splice(Math.max(e.integerLen,l));for(let O=l;O<i.length;O++)i[O]=0}else{r=Math.max(0,r),e.integerLen=1,i.length=Math.max(1,l=s+1),i[0]=0;for(let O=1;O<l;O++)i[O]=0}if(d>=5)if(l-1<0){for(let O=0;O>l;O--)i.unshift(0),e.integerLen++;i.unshift(1),e.integerLen++}else i[l-1]++;for(;r<Math.max(0,s);r++)i.push(0);let f=s!==0,v=n+e.integerLen,x=i.reduceRight(function(O,A,L,U){return A=A+O,U[L]=A<10?A:A-10,f&&(U[L]===0&&L>=v?U.pop():f=!1),A>=10?1:0},0);x&&(i.unshift(x),e.integerLen++)}function wx(e){let n=parseInt(e);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+e);return n}function Uv(e,n){n=encodeURIComponent(n);for(let t of e.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===n)return decodeURIComponent(s)}return null}var Cx=/\s+/,bP=[],$v=(()=>{let n=class n{constructor(i,r){this._ngEl=i,this._renderer=r,this.initialClasses=bP,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(Cx):bP}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(Cx):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let s=this.stateMap.get(i);s!==void 0?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],s=i[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(Cx).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};n.\u0275fac=function(r){return new(r||n)(Ce(ji),Ce(xl))},n.\u0275dir=Zn({type:n,selectors:[["","ngClass",""]],inputs:{klass:[Sn.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let e=n;return e})();var xx=class{constructor(n,t,i,r){this.$implicit=n,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ys=(()=>{let n=class n{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,s){this._viewContainer=i,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((s,l,d)=>{if(s.previousIndex==null)r.createEmbeddedView(this._template,new xx(s.item,this._ngForOf,-1,-1),d===null?void 0:d);else if(d==null)r.remove(l===null?void 0:l);else if(l!==null){let f=r.get(l);r.move(f,d),wP(f,s)}});for(let s=0,l=r.length;s<l;s++){let f=r.get(s).context;f.index=s,f.count=l,f.ngForOf=this._ngForOf}i.forEachIdentityChange(s=>{let l=r.get(s.currentIndex);wP(l,s)})}static ngTemplateContextGuard(i,r){return!0}};n.\u0275fac=function(r){return new(r||n)(Ce(Dr),Ce(ho),Ce(_x))},n.\u0275dir=Zn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let e=n;return e})();function wP(e,n){e.context.$implicit=n.item}var Zi=(()=>{let n=class n{constructor(i,r){this._viewContainer=i,this._context=new Mx,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){CP("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){CP("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};n.\u0275fac=function(r){return new(r||n)(Ce(Dr),Ce(ho))},n.\u0275dir=Zn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=n;return e})(),Mx=class{constructor(){this.$implicit=null,this.ngIf=null}};function CP(e,n){if(!!!(!n||n.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${ks(n)}'.`)}var F8=!0,Dx=class{constructor(n,t){this._viewContainerRef=n,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}},Rx=(()=>{let n=class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(i){this._ngSwitch=i,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(i){this._defaultViews.push(i)}_matchCase(i){let r=F8?i===this._ngSwitch:i==this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(i){if(this._defaultViews.length>0&&i!==this._defaultUsed){this._defaultUsed=i;for(let r of this._defaultViews)r.enforceState(i)}}};n.\u0275fac=function(r){return new(r||n)},n.\u0275dir=Zn({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0});let e=n;return e})(),EP=(()=>{let n=class n{constructor(i,r,s){this.ngSwitch=s,s._addCase(),this._view=new Dx(i,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}};n.\u0275fac=function(r){return new(r||n)(Ce(Dr),Ce(ho),Ce(Rx,9))},n.\u0275dir=Zn({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0});let e=n;return e})();var Ec=(()=>{let n=class n{constructor(i,r,s){this._ngEl=i,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(i){this._ngStyle=i,!this._differ&&i&&(this._differ=this._differs.find(i).create())}ngDoCheck(){if(this._differ){let i=this._differ.diff(this._ngStyle);i&&this._applyChanges(i)}}_setStyle(i,r){let[s,l]=i.split("."),d=s.indexOf("-")===-1?void 0:qo.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,l?`${r}${l}`:r,d):this._renderer.removeStyle(this._ngEl.nativeElement,s,d)}_applyChanges(i){i.forEachRemovedItem(r=>this._setStyle(r.key,null)),i.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),i.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}};n.\u0275fac=function(r){return new(r||n)(Ce(ji),Ce(vx),Ce(xl))},n.\u0275dir=Zn({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let e=n;return e})(),Ii=(()=>{let n=class n{constructor(i){this._viewContainerRef=i,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(i){if(this._shouldRecreateView(i)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(i){return!!i.ngTemplateOutlet||!!i.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(i,r,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,s):!1,get:(i,r,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,s)}})}};n.\u0275fac=function(r){return new(r||n)(Ce(Dr))},n.\u0275dir=Zn({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[ni]});let e=n;return e})();function PP(e,n){return new Ht(2100,!1)}var Tx=class{createSubscription(n,t){return yx(()=>n.subscribe({next:t,error:i=>{throw i}}))}dispose(n){yx(()=>n.unsubscribe())}},Sx=class{createSubscription(n,t){return n.then(t,i=>{throw i})}dispose(n){}},L8=new Sx,N8=new Tx,Fr=(()=>{let n=class n{constructor(i){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){if(!this._obj){if(i)try{this.markForCheckOnValueUpdate=!1,this._subscribe(i)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(Dl(i))return L8;if(mx(i))return N8;throw PP(n,i)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};n.\u0275fac=function(r){return new(r||n)(Ce(pi,16))},n.\u0275pipe=pm({name:"async",type:n,pure:!1,standalone:!0});let e=n;return e})();var kP=(()=>{let n=class n{constructor(i){this._locale=i}transform(i,r,s){if(!B8(i))return null;s||=this._locale;try{let l=j8(i);return E8(l,s,r)}catch(l){throw PP(n,l.message)}}};n.\u0275fac=function(r){return new(r||n)(Ce(ym,16))},n.\u0275pipe=pm({name:"number",type:n,pure:!0,standalone:!0});let e=n;return e})();function B8(e){return!(e==null||e===""||e!==e)}function j8(e){if(typeof e=="string"&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if(typeof e!="number")throw new Error(`${e} is not a number`);return e}var Na=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})(),Fx="browser",V8="server";function AP(e){return e===Fx}function Hv(e){return e===V8}var RP=(()=>{let n=class n{};n.\u0275prov=ct({token:n,providedIn:"root",factory:()=>AP(Qe(fo))?new Ox(Qe(Vi),window):new Ix});let e=n;return e})(),Ox=class{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){Array.isArray(n)?this.offset=()=>n:this.offset=n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n){this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){let t=z8(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){this.window.history.scrollRestoration=n}scrollToElement(n){let t=n.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}};function z8(e,n){let t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let l=s.getElementById(n)||s.querySelector(`[name="${n}"]`);if(l)return l}r=i.nextNode()}}return null}var Ix=class{setOffset(n){}getScrollPosition(){return[0,0]}scrollToPosition(n){}scrollToAnchor(n){}setHistoryScrollRestoration(n){}},Hh=class{};var xm=class{},Gv=class{},Vu=class e{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),l=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){let t=new e;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){let t=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(n.name,t);let r=(n.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=n.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let l=this.headers.get(t);if(!l)return;l=l.filter(d=>s.indexOf(d)===-1),l.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}break}}setHeaderEntries(n,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=n.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}};var Nx=class{encodeKey(n){return FP(n)}encodeValue(n){return FP(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function H8(e,n){let t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[l,d]=s==-1?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,s)),n.decodeValue(r.slice(s+1))],f=t.get(l)||[];f.push(d),t.set(l,f)}),t}var q8=/%(\d[a-f0-9])/gi,G8={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function FP(e){return encodeURIComponent(e).replace(q8,(n,t)=>G8[t]??n)}function qv(e){return`${e}`}var Tl=class e{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new Nx,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=H8(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{let i=n.fromObject[t],r=Array.isArray(i)?i.map(qv):[qv(i)];this.map.set(t,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){let t=[];return Object.keys(n).forEach(i=>{let r=n[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let t=this.encoder.encodeKey(n);return this.map.get(n).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let t=new e({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let t=(n.op==="a"?this.map.get(n.param):void 0)||[];t.push(qv(n.value)),this.map.set(n.param,t);break;case"d":if(n.value!==void 0){let i=this.map.get(n.param)||[],r=i.indexOf(qv(n.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var Bx=class{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function W8(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function LP(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function NP(e){return typeof Blob<"u"&&e instanceof Blob}function BP(e){return typeof FormData<"u"&&e instanceof FormData}function Z8(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Cm=class e{constructor(n,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase();let s;if(W8(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Vu,this.context??=new Bx,!this.params)this.params=new Tl,this.urlWithParams=t;else{let l=this.params.toString();if(l.length===0)this.urlWithParams=t;else{let d=t.indexOf("?"),f=d===-1?"?":d<t.length-1?"&":"";this.urlWithParams=t+f+l}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||LP(this.body)||NP(this.body)||BP(this.body)||Z8(this.body)?this.body:this.body instanceof Tl?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||BP(this.body)?null:NP(this.body)?this.body.type||null:LP(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Tl?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(n={}){let t=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,s=n.transferCache??this.transferCache,l=n.body!==void 0?n.body:this.body,d=n.withCredentials??this.withCredentials,f=n.reportProgress??this.reportProgress,v=n.headers||this.headers,x=n.params||this.params,O=n.context??this.context;return n.setHeaders!==void 0&&(v=Object.keys(n.setHeaders).reduce((A,L)=>A.set(L,n.setHeaders[L]),v)),n.setParams&&(x=Object.keys(n.setParams).reduce((A,L)=>A.set(L,n.setParams[L]),x)),new e(t,i,l,{params:x,headers:v,context:O,reportProgress:f,responseType:r,withCredentials:d,transferCache:s})}},Wh=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Wh||{}),Mm=class{constructor(n,t=Yv.Ok,i="OK"){this.headers=n.headers||new Vu,this.status=n.status!==void 0?n.status:t,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},jx=class e extends Mm{constructor(n={}){super(n),this.type=Wh.ResponseHeader}clone(n={}){return new e({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Wv=class e extends Mm{constructor(n={}){super(n),this.type=Wh.Response,this.body=n.body!==void 0?n.body:null}clone(n={}){return new e({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Zv=class extends Mm{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},Yv=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(Yv||{});function Lx(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var Pc=(()=>{let n=class n{constructor(i){this.handler=i}request(i,r,s={}){let l;if(i instanceof Cm)l=i;else{let v;s.headers instanceof Vu?v=s.headers:v=new Vu(s.headers);let x;s.params&&(s.params instanceof Tl?x=s.params:x=new Tl({fromObject:s.params})),l=new Cm(i,r,s.body!==void 0?s.body:null,{headers:v,context:s.context,params:x,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let d=zt(l).pipe(ao(v=>this.handler.handle(v)));if(i instanceof Cm||s.observe==="events")return d;let f=d.pipe(ci(v=>v instanceof Wv));switch(s.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return f.pipe(Ft(v=>{if(v.body!==null&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return f.pipe(Ft(v=>{if(v.body!==null&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return f.pipe(Ft(v=>{if(v.body!==null&&typeof v.body!="string")throw new Error("Response is not a string.");return v.body}));case"json":default:return f.pipe(Ft(v=>v.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new Tl().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,Lx(s,r))}post(i,r,s={}){return this.request("POST",i,Lx(s,r))}put(i,r,s={}){return this.request("PUT",i,Lx(s,r))}};n.\u0275fac=function(r){return new(r||n)(xt(xm))},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})();function UP(e,n){return n(e)}function Y8(e,n){return(t,i)=>n.intercept(t,{handle:r=>e(r,i)})}function K8(e,n,t){return(i,r)=>po(t,()=>n(i,s=>e(s,r)))}var Q8=new Lt(""),Vx=new Lt(""),J8=new Lt(""),X8=new Lt("");function eU(){let e=null;return(n,t)=>{e===null&&(e=(Qe(Q8,{optional:!0})??[]).reduceRight(Y8,UP));let i=Qe(Bu),r=i.add();return e(n,t).pipe(bc(()=>i.remove(r)))}}var jP=(()=>{let n=class n extends xm{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=Qe(Bu);let s=Qe(X8,{optional:!0});this.backend=s??i}handle(i){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(Vx),...this.injector.get(J8,[])]));this.chain=s.reduceRight((l,d)=>K8(l,d,this.injector),UP)}let r=this.pendingTasks.add();return this.chain(i,s=>this.backend.handle(s)).pipe(bc(()=>this.pendingTasks.remove(r)))}};n.\u0275fac=function(r){return new(r||n)(xt(Gv),xt(Rr))},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})();var tU=/^\)\]\}',?\n/;function nU(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var VP=(()=>{let n=class n{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new Ht(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Ri(r.\u0275loadImpl()):zt(null)).pipe(Wi(()=>new Tn(l=>{let d=r.build();if(d.open(i.method,i.urlWithParams),i.withCredentials&&(d.withCredentials=!0),i.headers.forEach((ce,fe)=>d.setRequestHeader(ce,fe.join(","))),i.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let ce=i.detectContentTypeHeader();ce!==null&&d.setRequestHeader("Content-Type",ce)}if(i.responseType){let ce=i.responseType.toLowerCase();d.responseType=ce!=="json"?ce:"text"}let f=i.serializeBody(),v=null,x=()=>{if(v!==null)return v;let ce=d.statusText||"OK",fe=new Vu(d.getAllResponseHeaders()),ye=nU(d)||i.url;return v=new jx({headers:fe,status:d.status,statusText:ce,url:ye}),v},O=()=>{let{headers:ce,status:fe,statusText:ye,url:Re}=x(),Ae=null;fe!==Yv.NoContent&&(Ae=typeof d.response>"u"?d.responseText:d.response),fe===0&&(fe=Ae?Yv.Ok:0);let We=fe>=200&&fe<300;if(i.responseType==="json"&&typeof Ae=="string"){let ft=Ae;Ae=Ae.replace(tU,"");try{Ae=Ae!==""?JSON.parse(Ae):null}catch(Et){Ae=ft,We&&(We=!1,Ae={error:Et,text:Ae})}}We?(l.next(new Wv({body:Ae,headers:ce,status:fe,statusText:ye,url:Re||void 0})),l.complete()):l.error(new Zv({error:Ae,headers:ce,status:fe,statusText:ye,url:Re||void 0}))},A=ce=>{let{url:fe}=x(),ye=new Zv({error:ce,status:d.status||0,statusText:d.statusText||"Unknown Error",url:fe||void 0});l.error(ye)},L=!1,U=ce=>{L||(l.next(x()),L=!0);let fe={type:Wh.DownloadProgress,loaded:ce.loaded};ce.lengthComputable&&(fe.total=ce.total),i.responseType==="text"&&d.responseText&&(fe.partialText=d.responseText),l.next(fe)},te=ce=>{let fe={type:Wh.UploadProgress,loaded:ce.loaded};ce.lengthComputable&&(fe.total=ce.total),l.next(fe)};return d.addEventListener("load",O),d.addEventListener("error",A),d.addEventListener("timeout",A),d.addEventListener("abort",A),i.reportProgress&&(d.addEventListener("progress",U),f!==null&&d.upload&&d.upload.addEventListener("progress",te)),d.send(f),l.next({type:Wh.Sent}),()=>{d.removeEventListener("error",A),d.removeEventListener("abort",A),d.removeEventListener("load",O),d.removeEventListener("timeout",A),i.reportProgress&&(d.removeEventListener("progress",U),f!==null&&d.upload&&d.upload.removeEventListener("progress",te)),d.readyState!==d.DONE&&d.abort()}})))}};n.\u0275fac=function(r){return new(r||n)(xt(Hh))},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})(),$P=new Lt(""),iU="XSRF-TOKEN",rU=new Lt("",{providedIn:"root",factory:()=>iU}),sU="X-XSRF-TOKEN",aU=new Lt("",{providedIn:"root",factory:()=>sU}),Kv=class{},oU=(()=>{let n=class n{constructor(i,r,s){this.doc=i,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=Uv(i,this.cookieName),this.lastCookieString=i),this.lastToken}};n.\u0275fac=function(r){return new(r||n)(xt(Vi),xt(fo),xt(rU))},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})();function cU(e,n){let t=e.url.toLowerCase();if(!Qe($P)||e.method==="GET"||e.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return n(e);let i=Qe(Kv).getToken(),r=Qe(aU);return i!=null&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,i)})),n(e)}var HP=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(HP||{});function lU(e,n){return{\u0275kind:e,\u0275providers:n}}function uU(...e){let n=[Pc,VP,jP,{provide:xm,useExisting:jP},{provide:Gv,useExisting:VP},{provide:Vx,useValue:cU,multi:!0},{provide:$P,useValue:!0},{provide:Kv,useClass:oU}];for(let t of e)n.push(...t.\u0275providers);return tv(n)}var zP=new Lt("");function dU(){return lU(HP.LegacyInterceptors,[{provide:zP,useFactory:eU},{provide:Vx,useExisting:zP,multi:!0}])}var qP=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({providers:[uU(dU())]});let e=n;return e})();var $x=class extends Vv{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Hx=class e extends $x{static makeCurrent(){DP(new e)}onAndCancel(n,t,i){return n.addEventListener(t,i),()=>{n.removeEventListener(t,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return t=t||this.getDefaultDocument(),t.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return t==="window"?window:t==="document"?n:t==="body"?n.body:null}getBaseHref(n){let t=hU();return t==null?null:pU(t)}resetBaseElement(){Dm=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Uv(document.cookie,n)}},Dm=null;function hU(){return Dm=Dm||document.querySelector("base"),Dm?Dm.getAttribute("href"):null}function pU(e){return new URL(e,document.baseURI).pathname}var qx=class{addToWindow(n){gr.getAngularTestability=(i,r=!0)=>{let s=n.findTestabilityInTree(i,r);if(s==null)throw new Ht(5103,!1);return s},gr.getAllAngularTestabilities=()=>n.getAllTestabilities(),gr.getAllAngularRootElements=()=>n.getAllRootElements();let t=i=>{let r=gr.getAllAngularTestabilities(),s=r.length,l=function(){s--,s==0&&i()};r.forEach(d=>{d.whenStable(l)})};gr.frameworkStabilizers||(gr.frameworkStabilizers=[]),gr.frameworkStabilizers.push(t)}findTestabilityInTree(n,t,i){if(t==null)return null;let r=n.getTestability(t);return r??(i?Yo().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},fU=(()=>{let n=class n{build(){return new XMLHttpRequest}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})(),Gx=new Lt(""),YP=(()=>{let n=class n{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(l=>l.supports(i)),!r)throw new Ht(5101,!1);return this._eventNameToPlugin.set(i,r),r}};n.\u0275fac=function(r){return new(r||n)(xt(Gx),xt(On))},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})(),Jv=class{constructor(n){this._doc=n}},zx="ng-app-id",KP=(()=>{let n=class n{constructor(i,r,s,l={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=l,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Hv(l),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${zx}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let l=s.get(i);return l.usage+=r,l.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,l=s?.get(r);if(l?.parentNode===i)return s.delete(r),l.removeAttribute(zx),l;{let d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=r,this.platformIsServer&&d.setAttribute(zx,this.appId),i.appendChild(d),d}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),l=this.styleRef,d=l.get(r)?.elements;d?d.push(s):l.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};n.\u0275fac=function(r){return new(r||n)(xt(Vi),xt(hv),xt(jC,8),xt(fo))},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})(),Ux={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zx=/%COMP%/g,QP="%COMP%",mU=`_nghost-${QP}`,gU=`_ngcontent-${QP}`,_U=!0,vU=new Lt("",{providedIn:"root",factory:()=>_U});function yU(e){return gU.replace(Zx,e)}function bU(e){return mU.replace(Zx,e)}function JP(e,n){return n.map(t=>t.replace(Zx,e))}var GP=(()=>{let n=class n{constructor(i,r,s,l,d,f,v,x=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=l,this.doc=d,this.platformId=f,this.ngZone=v,this.nonce=x,this.rendererByCompId=new Map,this.platformIsServer=Hv(f),this.defaultRenderer=new Tm(i,d,v,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Uo.ShadowDom&&(r=Pn(it({},r),{encapsulation:Uo.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Xv?s.applyToHost(i):s instanceof Sm&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,l=s.get(r.id);if(!l){let d=this.doc,f=this.ngZone,v=this.eventManager,x=this.sharedStylesHost,O=this.removeStylesOnCompDestroy,A=this.platformIsServer;switch(r.encapsulation){case Uo.Emulated:l=new Xv(v,x,r,this.appId,O,d,f,A);break;case Uo.ShadowDom:return new Wx(v,x,i,r,d,f,this.nonce,A);default:l=new Sm(v,x,r,O,d,f,A);break}s.set(r.id,l)}return l}ngOnDestroy(){this.rendererByCompId.clear()}};n.\u0275fac=function(r){return new(r||n)(xt(YP),xt(KP),xt(hv),xt(vU),xt(Vi),xt(fo),xt(On),xt(jC))},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})(),Tm=class{constructor(n,t,i,r){this.eventManager=n,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(Ux[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(WP(n)?n.content:n).appendChild(t)}insertBefore(n,t,i){n&&(WP(n)?n.content:n).insertBefore(t,i)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let i=typeof n=="string"?this.doc.querySelector(n):n;if(!i)throw new Ht(-5104,!1);return t||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,i,r){if(r){t=r+":"+t;let s=Ux[r];s?n.setAttributeNS(s,t,i):n.setAttribute(t,i)}else n.setAttribute(t,i)}removeAttribute(n,t,i){if(i){let r=Ux[i];r?n.removeAttributeNS(r,t):n.removeAttribute(`${i}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,i,r){r&(qo.DashCase|qo.Important)?n.style.setProperty(t,i,r&qo.Important?"important":""):n.style[t]=i}removeStyle(n,t,i){i&qo.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,i){n!=null&&(n[t]=i)}setValue(n,t){n.nodeValue=t}listen(n,t,i){if(typeof n=="string"&&(n=Yo().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(i))}decoratePreventDefault(n){return t=>{if(t==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))===!1&&t.preventDefault()}}};function WP(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Wx=class extends Tm{constructor(n,t,i,r,s,l,d,f){super(n,s,l,f),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let v=JP(r.id,r.styles);for(let x of v){let O=document.createElement("style");d&&O.setAttribute("nonce",d),O.textContent=x,this.shadowRoot.appendChild(O)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,i){return super.insertBefore(this.nodeOrShadowRoot(n),t,i)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Sm=class extends Tm{constructor(n,t,i,r,s,l,d,f){super(n,s,l,d),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=f?JP(f,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Xv=class extends Sm{constructor(n,t,i,r,s,l,d,f){let v=r+"-"+i.id;super(n,t,i,s,l,d,f,v),this.contentAttr=yU(v),this.hostAttr=bU(v)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){let i=super.createElement(n,t);return super.setAttribute(i,this.contentAttr,""),i}},wU=(()=>{let n=class n extends Jv{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};n.\u0275fac=function(r){return new(r||n)(xt(Vi))},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})(),ZP=["alt","control","meta","shift"],CU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xU={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},MU=(()=>{let n=class n extends Jv{constructor(i){super(i)}supports(i){return n.parseEventName(i)!=null}addEventListener(i,r,s){let l=n.parseEventName(r),d=n.eventCallback(l.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yo().onAndCancel(i,l.domEventName,d))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let l=n._normalizeKey(r.pop()),d="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),d="code."),ZP.forEach(x=>{let O=r.indexOf(x);O>-1&&(r.splice(O,1),d+=x+".")}),d+=l,r.length!=0||l.length===0)return null;let v={};return v.domEventName=s,v.fullKey=d,v}static matchEventFullKeyCode(i,r){let s=CU[i.key]||i.key,l="";return r.indexOf("code.")>-1&&(s=i.code,l="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),ZP.forEach(d=>{if(d!==s){let f=xU[d];f(i)&&(l+=d+".")}}),l+=s,l===r)}static eventCallback(i,r,s){return l=>{n.matchEventFullKeyCode(l,i)&&s.runGuarded(()=>r(l))}}static _normalizeKey(i){return i==="esc"?"escape":i}};n.\u0275fac=function(r){return new(r||n)(xt(Vi))},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})();function DU(){Hx.makeCurrent()}function TU(){return new Ho}function SU(){return KI(document),document}var OU=[{provide:fo,useValue:Fx},{provide:BC,useValue:DU,multi:!0},{provide:Vi,useFactory:SU,deps:[]}],XP=gx(fP,"browser",OU),IU=new Lt(""),EU=[{provide:vm,useClass:qx,deps:[]},{provide:px,useClass:Av,deps:[On,Rv,vm]},{provide:Av,useClass:Av,deps:[On,Rv,vm]}],PU=[{provide:nv,useValue:"root"},{provide:Ho,useFactory:TU,deps:[]},{provide:Gx,useClass:wU,multi:!0,deps:[Vi,On,fo]},{provide:Gx,useClass:MU,multi:!0,deps:[Vi]},GP,KP,YP,{provide:am,useExisting:GP},{provide:Hh,useClass:fU,deps:[]},[]],ek=(()=>{let n=class n{constructor(i){}static withServerTransition(i){return{ngModule:n,providers:[{provide:hv,useValue:i.appId}]}}};n.\u0275fac=function(r){return new(r||n)(xt(IU,12))},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({providers:[...PU,...EU],imports:[Na,mP]});let e=n;return e})();var tk=(()=>{let n=class n{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};n.\u0275fac=function(r){return new(r||n)(xt(Vi))},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var Fn="primary",Um=Symbol("RouteTitle"),Xx=class{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Jh(e){return new Xx(e)}function AU(e,n,t){let i=t.path.split("/");if(i.length>e.length||t.pathMatch==="full"&&(n.hasChildren()||i.length<e.length))return null;let r={};for(let s=0;s<i.length;s++){let l=i[s],d=e[s];if(l.startsWith(":"))r[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function RU(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!Ko(e[t],n[t]))return!1;return!0}function Ko(e,n){let t=e?eM(e):void 0,i=n?eM(n):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!dk(e[r],n[r]))return!1;return!0}function eM(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function dk(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;let t=[...e].sort(),i=[...n].sort();return t.every((r,s)=>i[s]===r)}else return e===n}function hk(e){return e.length>0?e[e.length-1]:null}function Pl(e){return Ia(e)?e:Dl(e)?Ri(Promise.resolve(e)):zt(e)}var FU={exact:fk,subset:mk},pk={exact:LU,subset:NU,ignored:()=>!0};function ik(e,n,t){return FU[t.paths](e.root,n.root,t.matrixParams)&&pk[t.queryParams](e.queryParams,n.queryParams)&&!(t.fragment==="exact"&&e.fragment!==n.fragment)}function LU(e,n){return Ko(e,n)}function fk(e,n,t){if(!Uu(e.segments,n.segments)||!ny(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(let i in n.children)if(!e.children[i]||!fk(e.children[i],n.children[i],t))return!1;return!0}function NU(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>dk(e[t],n[t]))}function mk(e,n,t){return gk(e,n,n.segments,t)}function gk(e,n,t,i){if(e.segments.length>t.length){let r=e.segments.slice(0,t.length);return!(!Uu(r,t)||n.hasChildren()||!ny(r,t,i))}else if(e.segments.length===t.length){if(!Uu(e.segments,t)||!ny(e.segments,t,i))return!1;for(let r in n.children)if(!e.children[r]||!mk(e.children[r],n.children[r],i))return!1;return!0}else{let r=t.slice(0,e.segments.length),s=t.slice(e.segments.length);return!Uu(e.segments,r)||!ny(e.segments,r,i)||!e.children[Fn]?!1:gk(e.children[Fn],n,s,i)}}function ny(e,n,t){return n.every((i,r)=>pk[t](e[r].parameters,i.parameters))}var Sl=class{constructor(n=new si([],{}),t={},i=null){this.root=n,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Jh(this.queryParams),this._queryParamMap}toString(){return VU.serialize(this)}},si=class{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return iy(this)}},zu=class{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=Jh(this.parameters),this._parameterMap}toString(){return vk(this)}};function BU(e,n){return Uu(e,n)&&e.every((t,i)=>Ko(t.parameters,n[i].parameters))}function Uu(e,n){return e.length!==n.length?!1:e.every((t,i)=>t.path===n[i].path)}function jU(e,n){let t=[];return Object.entries(e.children).forEach(([i,r])=>{i===Fn&&(t=t.concat(n(r,i)))}),Object.entries(e.children).forEach(([i,r])=>{i!==Fn&&(t=t.concat(n(r,i)))}),t}var $m=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:()=>new Rm,providedIn:"root"});let e=n;return e})(),Rm=class{parse(n){let t=new nM(n);return new Sl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){let t=`/${Om(n.root,!0)}`,i=$U(n.queryParams),r=typeof n.fragment=="string"?`#${zU(n.fragment)}`:"";return`${t}${i}${r}`}},VU=new Rm;function iy(e){return e.segments.map(n=>vk(n)).join("/")}function Om(e,n){if(!e.hasChildren())return iy(e);if(n){let t=e.children[Fn]?Om(e.children[Fn],!1):"",i=[];return Object.entries(e.children).forEach(([r,s])=>{r!==Fn&&i.push(`${r}:${Om(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=jU(e,(i,r)=>r===Fn?[Om(e.children[Fn],!1)]:[`${r}:${Om(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[Fn]!=null?`${iy(e)}/${t[0]}`:`${iy(e)}/(${t.join("//")})`}}function _k(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ey(e){return _k(e).replace(/%3B/gi,";")}function zU(e){return encodeURI(e)}function tM(e){return _k(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ry(e){return decodeURIComponent(e)}function rk(e){return ry(e.replace(/\+/g,"%20"))}function vk(e){return`${tM(e.path)}${UU(e.parameters)}`}function UU(e){return Object.entries(e).map(([n,t])=>`;${tM(n)}=${tM(t)}`).join("")}function $U(e){let n=Object.entries(e).map(([t,i])=>Array.isArray(i)?i.map(r=>`${ey(t)}=${ey(r)}`).join("&"):`${ey(t)}=${ey(i)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}var HU=/^[^\/()?;#]+/;function Yx(e){let n=e.match(HU);return n?n[0]:""}var qU=/^[^\/()?;=#]+/;function GU(e){let n=e.match(qU);return n?n[0]:""}var WU=/^[^=?&#]+/;function ZU(e){let n=e.match(WU);return n?n[0]:""}var YU=/^[^&#]+/;function KU(e){let n=e.match(YU);return n?n[0]:""}var nM=class{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new si([],{}):new si([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(i[Fn]=new si(n,t)),i}parseSegment(){let n=Yx(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new Ht(4009,!1);return this.capture(n),new zu(ry(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let t=GU(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Yx(this.remaining);r&&(i=r,this.capture(i))}n[ry(t)]=ry(i)}parseQueryParam(n){let t=ZU(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let l=KU(this.remaining);l&&(i=l,this.capture(i))}let r=rk(t),s=rk(i);if(n.hasOwnProperty(r)){let l=n[r];Array.isArray(l)||(l=[l],n[r]=l),l.push(s)}else n[r]=s}parseParens(n){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Yx(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ht(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):n&&(s=Fn);let l=this.parseChildren();t[s]=Object.keys(l).length===1?l[Fn]:new si([],l),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new Ht(4011,!1)}};function yk(e){return e.segments.length>0?new si([],{[Fn]:e}):e}function bk(e){let n={};for(let[i,r]of Object.entries(e.children)){let s=bk(r);if(i===Fn&&s.segments.length===0&&s.hasChildren())for(let[l,d]of Object.entries(s.children))n[l]=d;else(s.segments.length>0||s.hasChildren())&&(n[i]=s)}let t=new si(e.segments,n);return QU(t)}function QU(e){if(e.numberOfChildren===1&&e.children[Fn]){let n=e.children[Fn];return new si(e.segments.concat(n.segments),n.children)}return e}function Xh(e){return e instanceof Sl}function JU(e,n,t=null,i=null){let r=wk(e);return Ck(r,n,t,i)}function wk(e){let n;function t(s){let l={};for(let f of s.children){let v=t(f);l[f.outlet]=v}let d=new si(s.url,l);return s===e&&(n=d),d}let i=t(e.root),r=yk(i);return n??r}function Ck(e,n,t,i){let r=e;for(;r.parent;)r=r.parent;if(n.length===0)return Kx(r,r,r,t,i);let s=XU(n);if(s.toRoot())return Kx(r,r,new si([],{}),t,i);let l=e$(s,r,e),d=l.processChildren?Pm(l.segmentGroup,l.index,s.commands):Mk(l.segmentGroup,l.index,s.commands);return Kx(r,l.segmentGroup,d,t,i)}function sy(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Fm(e){return typeof e=="object"&&e!=null&&e.outlets}function Kx(e,n,t,i,r){let s={};i&&Object.entries(i).forEach(([f,v])=>{s[f]=Array.isArray(v)?v.map(x=>`${x}`):`${v}`});let l;e===n?l=t:l=xk(e,n,t);let d=yk(bk(l));return new Sl(d,s,r)}function xk(e,n,t){let i={};return Object.entries(e.children).forEach(([r,s])=>{s===n?i[r]=t:i[r]=xk(s,n,t)}),new si(e.segments,i)}var ay=class{constructor(n,t,i){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=i,n&&i.length>0&&sy(i[0]))throw new Ht(4003,!1);let r=i.find(Fm);if(r&&r!==hk(i))throw new Ht(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function XU(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new ay(!0,0,e);let n=0,t=!1,i=e.reduce((r,s,l)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let d={};return Object.entries(s.outlets).forEach(([f,v])=>{d[f]=typeof v=="string"?v.split("/"):v}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:l===0?(s.split("/").forEach((d,f)=>{f==0&&d==="."||(f==0&&d===""?t=!0:d===".."?n++:d!=""&&r.push(d))}),r):[...r,s]},[]);return new ay(t,n,i)}var Kh=class{constructor(n,t,i){this.segmentGroup=n,this.processChildren=t,this.index=i}};function e$(e,n,t){if(e.isAbsolute)return new Kh(n,!0,0);if(!t)return new Kh(n,!1,NaN);if(t.parent===null)return new Kh(t,!0,0);let i=sy(e.commands[0])?0:1,r=t.segments.length-1+i;return t$(t,r,e.numberOfDoubleDots)}function t$(e,n,t){let i=e,r=n,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Ht(4005,!1);r=i.segments.length}return new Kh(i,!1,r-s)}function n$(e){return Fm(e[0])?e[0].outlets:{[Fn]:e}}function Mk(e,n,t){if(e??=new si([],{}),e.segments.length===0&&e.hasChildren())return Pm(e,n,t);let i=i$(e,n,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let s=new si(e.segments.slice(0,i.pathIndex),{});return s.children[Fn]=new si(e.segments.slice(i.pathIndex),e.children),Pm(s,0,r)}else return i.match&&r.length===0?new si(e.segments,{}):i.match&&!e.hasChildren()?iM(e,n,t):i.match?Pm(e,0,r):iM(e,n,t)}function Pm(e,n,t){if(t.length===0)return new si(e.segments,{});{let i=n$(t),r={};if(Object.keys(i).some(s=>s!==Fn)&&e.children[Fn]&&e.numberOfChildren===1&&e.children[Fn].segments.length===0){let s=Pm(e.children[Fn],n,t);return new si(e.segments,s.children)}return Object.entries(i).forEach(([s,l])=>{typeof l=="string"&&(l=[l]),l!==null&&(r[s]=Mk(e.children[s],n,l))}),Object.entries(e.children).forEach(([s,l])=>{i[s]===void 0&&(r[s]=l)}),new si(e.segments,r)}}function i$(e,n,t){let i=0,r=n,s={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=t.length)return s;let l=e.segments[r],d=t[i];if(Fm(d))break;let f=`${d}`,v=i<t.length-1?t[i+1]:null;if(r>0&&f===void 0)break;if(f&&v&&typeof v=="object"&&v.outlets===void 0){if(!ak(f,v,l))return s;i+=2}else{if(!ak(f,{},l))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function iM(e,n,t){let i=e.segments.slice(0,n),r=0;for(;r<t.length;){let s=t[r];if(Fm(s)){let f=r$(s.outlets);return new si(i,f)}if(r===0&&sy(t[0])){let f=e.segments[n];i.push(new zu(f.path,sk(t[0]))),r++;continue}let l=Fm(s)?s.outlets[Fn]:`${s}`,d=r<t.length-1?t[r+1]:null;l&&d&&sy(d)?(i.push(new zu(l,sk(d))),r+=2):(i.push(new zu(l,{})),r++)}return new si(i,{})}function r$(e){let n={};return Object.entries(e).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(n[t]=iM(new si([],{}),0,i))}),n}function sk(e){let n={};return Object.entries(e).forEach(([t,i])=>n[t]=`${i}`),n}function ak(e,n,t){return e==t.path&&Ko(n,t.parameters)}var km="imperative",Lr=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Lr||{}),Ba=class{constructor(n,t){this.id=n,this.url=t}},ep=class extends Ba{constructor(n,t,i="imperative",r=null){super(n,t),this.type=Lr.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},kc=class extends Ba{constructor(n,t,i){super(n,t),this.urlAfterRedirects=i,this.type=Lr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},fa=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(fa||{}),oy=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(oy||{}),Ol=class extends Ba{constructor(n,t,i,r){super(n,t),this.reason=i,this.code=r,this.type=Lr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Il=class extends Ba{constructor(n,t,i,r){super(n,t),this.reason=i,this.code=r,this.type=Lr.NavigationSkipped}},Lm=class extends Ba{constructor(n,t,i,r){super(n,t),this.error=i,this.target=r,this.type=Lr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},cy=class extends Ba{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=Lr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rM=class extends Ba{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=Lr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sM=class extends Ba{constructor(n,t,i,r,s){super(n,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=Lr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},aM=class extends Ba{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=Lr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oM=class extends Ba{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=Lr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cM=class{constructor(n){this.route=n,this.type=Lr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},lM=class{constructor(n){this.route=n,this.type=Lr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},uM=class{constructor(n){this.snapshot=n,this.type=Lr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dM=class{constructor(n){this.snapshot=n,this.type=Lr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hM=class{constructor(n){this.snapshot=n,this.type=Lr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pM=class{constructor(n){this.snapshot=n,this.type=Lr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ly=class{constructor(n,t,i){this.routerEvent=n,this.position=t,this.anchor=i,this.type=Lr.Scroll}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},Nm=class{},Bm=class{constructor(n){this.url=n}};var fM=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Hm,this.attachRef=null}},Hm=(()=>{let n=class n{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new fM,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),uy=class{constructor(n){this._root=n}get root(){return this._root.value}parent(n){let t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){let t=mM(n,this._root);return t?t.children.map(i=>i.value):[]}firstChild(n){let t=mM(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){let t=gM(n,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return gM(n,this._root).map(t=>t.value)}};function mM(e,n){if(e===n.value)return n;for(let t of n.children){let i=mM(e,t);if(i)return i}return null}function gM(e,n){if(e===n.value)return[n];for(let t of n.children){let i=gM(e,t);if(i.length)return i.unshift(n),i}return[]}var pa=class{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}};function Yh(e){let n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}var dy=class extends uy{constructor(n,t){super(n),this.snapshot=t,TM(this,n)}toString(){return this.snapshot.toString()}};function Dk(e){let n=s$(e),t=new Ct([new zu("",{})]),i=new Ct({}),r=new Ct({}),s=new Ct({}),l=new Ct(""),d=new El(t,i,s,l,r,Fn,e,n.root);return d.snapshot=n.root,new dy(new pa(d,[]),n)}function s$(e){let n={},t={},i={},r="",s=new jm([],n,i,r,t,Fn,e,null,{});return new hy("",new pa(s,[]))}var El=class{constructor(n,t,i,r,s,l,d,f){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=l,this.component=d,this._futureSnapshot=f,this.title=this.dataSubject?.pipe(Ft(v=>v[Um]))??zt(void 0),this.url=n,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ft(n=>Jh(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ft(n=>Jh(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function DM(e,n,t="emptyOnly"){let i,{routeConfig:r}=e;return n!==null&&(t==="always"||r?.path===""||!n.component&&!n.routeConfig?.loadComponent)?i={params:it(it({},n.params),e.params),data:it(it({},n.data),e.data),resolve:it(it(it(it({},e.data),n.data),r?.data),e._resolvedData)}:i={params:it({},e.params),data:it({},e.data),resolve:it(it({},e.data),e._resolvedData??{})},r&&Sk(r)&&(i.resolve[Um]=r.title),i}var jm=class{get title(){return this.data?.[Um]}constructor(n,t,i,r,s,l,d,f,v){this.url=n,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=d,this.routeConfig=f,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Jh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Jh(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${t}')`}},hy=class extends uy{constructor(n,t){super(t),this.url=n,TM(this,t)}toString(){return Tk(this._root)}};function TM(e,n){n.value._routerState=e,n.children.forEach(t=>TM(e,t))}function Tk(e){let n=e.children.length>0?` { ${e.children.map(Tk).join(", ")} } `:"";return`${e.value}${n}`}function Qx(e){if(e.snapshot){let n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,Ko(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),Ko(n.params,t.params)||e.paramsSubject.next(t.params),RU(n.url,t.url)||e.urlSubject.next(t.url),Ko(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function _M(e,n){let t=Ko(e.params,n.params)&&BU(e.url,n.url),i=!e.parent!=!n.parent;return t&&!i&&(!e.parent||_M(e.parent,n.parent))}function Sk(e){return typeof e.title=="string"||e.title===null}var $u=(()=>{let n=class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Fn,this.activateEvents=new Zt,this.deactivateEvents=new Zt,this.attachEvents=new Zt,this.detachEvents=new Zt,this.parentContexts=Qe(Hm),this.location=Qe(Dr),this.changeDetector=Qe(pi),this.environmentInjector=Qe(Rr),this.inputBinder=Qe(_y,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ht(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ht(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ht(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Ht(4013,!1);this._activatedRoute=i;let s=this.location,d=i.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,v=new vM(i,f,s.injector);this.activated=s.createComponent(d,{index:s.length,injector:v,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};n.\u0275fac=function(r){return new(r||n)},n.\u0275dir=Zn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ni]});let e=n;return e})(),vM=class e{__ngOutletInjector(n){return new e(this.route,this.childContexts,n)}constructor(n,t,i){this.route=n,this.childContexts=t,this.parent=i}get(n,t){return n===El?this.route:n===Hm?this.childContexts:this.parent.get(n,t)}},_y=new Lt(""),ok=(()=>{let n=class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,s=so([r.queryParams,r.params,r.data]).pipe(Wi(([l,d,f],v)=>(f=it(it(it({},l),d),f),v===0?zt(f):Promise.resolve(f)))).subscribe(l=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let d=gP(r.component);if(!d){this.unsubscribeFromRouteData(i);return}for(let{templateName:f}of d.inputs)i.activatedComponentRef.setInput(f,l[f])});this.outletDataSubscriptions.set(i,s)}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})();function a$(e,n,t){let i=Vm(e,n._root,t?t._root:void 0);return new dy(i,n)}function Vm(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=n.value;let r=o$(e,n,t);return new pa(i,r)}else{if(e.shouldAttach(n.value)){let s=e.retrieve(n.value);if(s!==null){let l=s.route;return l.value._futureSnapshot=n.value,l.children=n.children.map(d=>Vm(e,d)),l}}let i=c$(n.value),r=n.children.map(s=>Vm(e,s));return new pa(i,r)}}function o$(e,n,t){return n.children.map(i=>{for(let r of t.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return Vm(e,i,r);return Vm(e,i)})}function c$(e){return new El(new Ct(e.url),new Ct(e.params),new Ct(e.queryParams),new Ct(e.fragment),new Ct(e.data),e.outlet,e.component,e)}var Ok="ngNavigationCancelingError";function Ik(e,n){let{redirectTo:t,navigationBehaviorOptions:i}=Xh(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=Ek(!1,fa.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Ek(e,n){let t=new Error(`NavigationCancelingError: ${e||""}`);return t[Ok]=!0,t.cancellationCode=n,t}function l$(e){return Pk(e)&&Xh(e.url)}function Pk(e){return!!e&&e[Ok]}var u$=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Wt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Sc],decls:1,vars:0,template:function(r,s){r&1&&Me(0,"router-outlet")},dependencies:[$u],encapsulation:2});let e=n;return e})();function d$(e,n){return e.providers&&!e._injector&&(e._injector=Mv(e.providers,n,`Route: ${e.path}`)),e._injector??n}function SM(e){let n=e.children&&e.children.map(SM),t=n?Pn(it({},e),{children:n}):it({},e);return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Fn&&(t.component=u$),t}function Qo(e){return e.outlet||Fn}function h$(e,n){let t=e.filter(i=>Qo(i)===n);return t.push(...e.filter(i=>Qo(i)!==n)),t}function qm(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){let t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var p$=(e,n,t,i)=>Ft(r=>(new yM(n,r.targetRouterState,r.currentRouterState,t,i).activate(e),r)),yM=class{constructor(n,t,i,r,s){this.routeReuseStrategy=n,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(n){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,n),Qx(this.futureState.root),this.activateChildRoutes(t,i,n)}deactivateChildRoutes(n,t,i){let r=Yh(t);n.children.forEach(s=>{let l=s.value.outlet;this.deactivateRoutes(s,r[l],i),delete r[l]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(n,t,i){let r=n.value,s=t?t.value:null;if(r===s)if(r.component){let l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(n,t,l.children)}else this.deactivateChildRoutes(n,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){let i=t.getContext(n.value.outlet),r=i&&n.value.component?i.children:t,s=Yh(n);for(let l of Object.values(s))this.deactivateRouteAndItsChildren(l,r);if(i&&i.outlet){let l=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:l,route:n,contexts:d})}}deactivateRouteAndOutlet(n,t){let i=t.getContext(n.value.outlet),r=i&&n.value.component?i.children:t,s=Yh(n);for(let l of Object.values(s))this.deactivateRouteAndItsChildren(l,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,t,i){let r=Yh(t);n.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new pM(s.value.snapshot))}),n.children.length&&this.forwardEvent(new dM(n.value.snapshot))}activateRoutes(n,t,i){let r=n.value,s=t?t.value:null;if(Qx(r),r===s)if(r.component){let l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,t,l.children)}else this.activateChildRoutes(n,t,i);else if(r.component){let l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),Qx(d.route.value),this.activateChildRoutes(n,null,l.children)}else{let d=qm(r.snapshot);l.attachRef=null,l.route=r,l.injector=d,l.outlet&&l.outlet.activateWith(r,l.injector),this.activateChildRoutes(n,null,l.children)}}else this.activateChildRoutes(n,null,i)}},py=class{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},Qh=class{constructor(n,t){this.component=n,this.route=t}};function f$(e,n,t){let i=e._root,r=n?n._root:null;return Im(i,r,t,[i.value])}function m$(e){let n=e.routeConfig?e.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:e,guards:n}}function np(e,n){let t=Symbol(),i=n.get(e,t);return i===t?typeof e=="function"&&!U2(e)?e:n.get(e):i}function Im(e,n,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Yh(n);return e.children.forEach(l=>{g$(l,s[l.value.outlet],t,i.concat([l.value]),r),delete s[l.value.outlet]}),Object.entries(s).forEach(([l,d])=>Am(d,t.getContext(l),r)),r}function g$(e,n,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=e.value,l=n?n.value:null,d=t?t.getContext(e.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){let f=_$(l,s,s.routeConfig.runGuardsAndResolvers);f?r.canActivateChecks.push(new py(i)):(s.data=l.data,s._resolvedData=l._resolvedData),s.component?Im(e,n,d?d.children:null,i,r):Im(e,n,t,i,r),f&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new Qh(d.outlet.component,l))}else l&&Am(n,d,r),r.canActivateChecks.push(new py(i)),s.component?Im(e,null,d?d.children:null,i,r):Im(e,null,t,i,r);return r}function _$(e,n,t){if(typeof t=="function")return t(e,n);switch(t){case"pathParamsChange":return!Uu(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Uu(e.url,n.url)||!Ko(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_M(e,n)||!Ko(e.queryParams,n.queryParams);case"paramsChange":default:return!_M(e,n)}}function Am(e,n,t){let i=Yh(e),r=e.value;Object.entries(i).forEach(([s,l])=>{r.component?n?Am(l,n.children.getContext(s),t):Am(l,null,t):Am(l,n,t)}),r.component?n&&n.outlet&&n.outlet.isActivated?t.canDeactivateChecks.push(new Qh(n.outlet.component,r)):t.canDeactivateChecks.push(new Qh(null,r)):t.canDeactivateChecks.push(new Qh(null,r))}function Gm(e){return typeof e=="function"}function v$(e){return typeof e=="boolean"}function y$(e){return e&&Gm(e.canLoad)}function b$(e){return e&&Gm(e.canActivate)}function w$(e){return e&&Gm(e.canActivateChild)}function C$(e){return e&&Gm(e.canDeactivate)}function x$(e){return e&&Gm(e.canMatch)}function kk(e){return e instanceof yc||e?.name==="EmptyError"}var ty=Symbol("INITIAL_VALUE");function tp(){return Wi(e=>so(e.map(n=>n.pipe(ti(1),f0(ty)))).pipe(Ft(n=>{for(let t of n)if(t!==!0){if(t===ty)return ty;if(t===!1||t instanceof Sl)return t}return!0}),ci(n=>n!==ty),ti(1)))}function M$(e,n){return Si(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return l.length===0&&s.length===0?zt(Pn(it({},t),{guardsResult:!0})):D$(l,i,r,e).pipe(Si(d=>d&&v$(d)?T$(i,s,e,n):zt(d)),Ft(d=>Pn(it({},t),{guardsResult:d})))})}function D$(e,n,t,i){return Ri(e).pipe(Si(r=>P$(r.component,r.route,t,n,i)),Qr(r=>r!==!0,!0))}function T$(e,n,t,i){return Ri(n).pipe(ao(r=>ua(O$(r.route.parent,i),S$(r.route,i),E$(e,r.path,t),I$(e,r.route,t))),Qr(r=>r!==!0,!0))}function S$(e,n){return e!==null&&n&&n(new hM(e)),zt(!0)}function O$(e,n){return e!==null&&n&&n(new uM(e)),zt(!0)}function I$(e,n,t){let i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||i.length===0)return zt(!0);let r=i.map(s=>Cu(()=>{let l=qm(n)??t,d=np(s,l),f=b$(d)?d.canActivate(n,e):po(l,()=>d(n,e));return Pl(f).pipe(Qr())}));return zt(r).pipe(tp())}function E$(e,n,t){let i=n[n.length-1],s=n.slice(0,n.length-1).reverse().map(l=>m$(l)).filter(l=>l!==null).map(l=>Cu(()=>{let d=l.guards.map(f=>{let v=qm(l.node)??t,x=np(f,v),O=w$(x)?x.canActivateChild(i,e):po(v,()=>x(i,e));return Pl(O).pipe(Qr())});return zt(d).pipe(tp())}));return zt(s).pipe(tp())}function P$(e,n,t,i,r){let s=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!s||s.length===0)return zt(!0);let l=s.map(d=>{let f=qm(n)??r,v=np(d,f),x=C$(v)?v.canDeactivate(e,n,t,i):po(f,()=>v(e,n,t,i));return Pl(x).pipe(Qr())});return zt(l).pipe(tp())}function k$(e,n,t,i){let r=n.canLoad;if(r===void 0||r.length===0)return zt(!0);let s=r.map(l=>{let d=np(l,e),f=y$(d)?d.canLoad(n,t):po(e,()=>d(n,t));return Pl(f)});return zt(s).pipe(tp(),Ak(i))}function Ak(e){return $1(ri(n=>{if(Xh(n))throw Ik(e,n)}),Ft(n=>n===!0))}function A$(e,n,t,i){let r=n.canMatch;if(!r||r.length===0)return zt(!0);let s=r.map(l=>{let d=np(l,e),f=x$(d)?d.canMatch(n,t):po(e,()=>d(n,t));return Pl(f)});return zt(s).pipe(tp(),Ak(i))}var zm=class{constructor(n){this.segmentGroup=n||null}},fy=class extends Error{constructor(n){super(),this.urlTree=n}};function Zh(e){return ph(new zm(e))}function R$(e){return ph(new Ht(4e3,!1))}function F$(e){return ph(Ek(!1,fa.GuardRejected))}var bM=class{constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return zt(i);if(r.numberOfChildren>1||!r.children[Fn])return R$(n.redirectTo);r=r.children[Fn]}}applyRedirectCommands(n,t,i){let r=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,i);if(t.startsWith("/"))throw new fy(r);return r}applyRedirectCreateUrlTree(n,t,i,r){let s=this.createSegmentGroup(n,t.root,i,r);return new Sl(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){let i={};return Object.entries(n).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let d=s.substring(1);i[r]=t[d]}else i[r]=s}),i}createSegmentGroup(n,t,i,r){let s=this.createSegments(n,t.segments,i,r),l={};return Object.entries(t.children).forEach(([d,f])=>{l[d]=this.createSegmentGroup(n,f,i,r)}),new si(s,l)}createSegments(n,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(n,s,r):this.findOrReturn(s,i))}findPosParam(n,t,i){let r=i[t.path.substring(1)];if(!r)throw new Ht(4001,!1);return r}findOrReturn(n,t){let i=0;for(let r of t){if(r.path===n.path)return t.splice(i),r;i++}return n}},wM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function L$(e,n,t,i,r){let s=OM(e,n,t);return s.matched?(i=d$(n,i),A$(i,n,t,r).pipe(Ft(l=>l===!0?s:it({},wM)))):zt(s)}function OM(e,n,t){if(n.path==="**")return N$(t);if(n.path==="")return n.pathMatch==="full"&&(e.hasChildren()||t.length>0)?it({},wM):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(n.matcher||AU)(t,e,n);if(!r)return it({},wM);let s={};Object.entries(r.posParams??{}).forEach(([d,f])=>{s[d]=f.path});let l=r.consumed.length>0?it(it({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:l,positionalParamSegments:r.posParams??{}}}function N$(e){return{matched:!0,parameters:e.length>0?hk(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function ck(e,n,t,i){return t.length>0&&V$(e,t,i)?{segmentGroup:new si(n,j$(i,new si(t,e.children))),slicedSegments:[]}:t.length===0&&z$(e,t,i)?{segmentGroup:new si(e.segments,B$(e,t,i,e.children)),slicedSegments:t}:{segmentGroup:new si(e.segments,e.children),slicedSegments:t}}function B$(e,n,t,i){let r={};for(let s of t)if(vy(e,n,s)&&!i[Qo(s)]){let l=new si([],{});r[Qo(s)]=l}return it(it({},i),r)}function j$(e,n){let t={};t[Fn]=n;for(let i of e)if(i.path===""&&Qo(i)!==Fn){let r=new si([],{});t[Qo(i)]=r}return t}function V$(e,n,t){return t.some(i=>vy(e,n,i)&&Qo(i)!==Fn)}function z$(e,n,t){return t.some(i=>vy(e,n,i))}function vy(e,n,t){return(e.hasChildren()||n.length>0)&&t.pathMatch==="full"?!1:t.path===""}function U$(e,n,t,i){return Qo(e)!==i&&(i===Fn||!vy(n,t,e))?!1:OM(n,e,t).matched}function $$(e,n,t){return n.length===0&&!e.children[t]}var CM=class{};function H$(e,n,t,i,r,s,l="emptyOnly"){return new xM(e,n,t,i,r,l,s).recognize()}var q$=31,xM=class{constructor(n,t,i,r,s,l,d){this.injector=n,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=l,this.urlSerializer=d,this.applyRedirects=new bM(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new Ht(4002,`'${n.segmentGroup}'`)}recognize(){let n=ck(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(Ft(t=>{let i=new jm([],Object.freeze({}),Object.freeze(it({},this.urlTree.queryParams)),this.urlTree.fragment,{},Fn,this.rootComponentType,null,{}),r=new pa(i,t),s=new hy("",r),l=JU(i,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(s._root,null),{state:s,tree:l}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n,Fn).pipe(fl(i=>{if(i instanceof fy)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof zm?this.noMatchError(i):i}))}inheritParamsAndData(n,t){let i=n.value,r=DM(i,t,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),n.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(n,t,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(n,t,i):this.processSegment(n,t,i,i.segments,r,!0).pipe(Ft(s=>s instanceof pa?[s]:[]))}processChildren(n,t,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return Ri(r).pipe(ao(s=>{let l=i.children[s],d=h$(t,s);return this.processSegmentGroup(n,d,l,s)}),Q1((s,l)=>(s.push(...l),s)),ml(null),K1(),Si(s=>{if(s===null)return Zh(i);let l=Rk(s);return G$(l),zt(l)}))}processSegment(n,t,i,r,s,l){return Ri(t).pipe(ao(d=>this.processSegmentAgainstRoute(d._injector??n,t,d,i,r,s,l).pipe(fl(f=>{if(f instanceof zm)return zt(null);throw f}))),Qr(d=>!!d),fl(d=>{if(kk(d))return $$(i,r,s)?zt(new CM):Zh(i);throw d}))}processSegmentAgainstRoute(n,t,i,r,s,l,d){return U$(i,r,s,l)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(n,r,i,s,l):this.allowRedirects&&d?this.expandSegmentAgainstRouteUsingRedirect(n,r,t,i,s,l):Zh(r):Zh(r)}expandSegmentAgainstRouteUsingRedirect(n,t,i,r,s,l){let{matched:d,consumedSegments:f,positionalParamSegments:v,remainingSegments:x}=OM(t,r,s);if(!d)return Zh(t);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>q$&&(this.allowRedirects=!1));let O=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,v);return this.applyRedirects.lineralizeSegments(r,O).pipe(Si(A=>this.processSegment(n,i,t,A.concat(x),l,!1)))}matchSegmentAgainstRoute(n,t,i,r,s){let l=L$(t,i,r,n,this.urlSerializer);return i.path==="**"&&(t.children={}),l.pipe(Wi(d=>d.matched?(n=i._injector??n,this.getChildConfig(n,i,r).pipe(Wi(({routes:f})=>{let v=i._loadedInjector??n,{consumedSegments:x,remainingSegments:O,parameters:A}=d,L=new jm(x,A,Object.freeze(it({},this.urlTree.queryParams)),this.urlTree.fragment,Z$(i),Qo(i),i.component??i._loadedComponent??null,i,Y$(i)),{segmentGroup:U,slicedSegments:te}=ck(t,x,O,f);if(te.length===0&&U.hasChildren())return this.processChildren(v,f,U).pipe(Ft(fe=>fe===null?null:new pa(L,fe)));if(f.length===0&&te.length===0)return zt(new pa(L,[]));let ce=Qo(i)===s;return this.processSegment(v,f,U,te,ce?Fn:s,!0).pipe(Ft(fe=>new pa(L,fe instanceof pa?[fe]:[])))}))):Zh(t)))}getChildConfig(n,t,i){return t.children?zt({routes:t.children,injector:n}):t.loadChildren?t._loadedRoutes!==void 0?zt({routes:t._loadedRoutes,injector:t._loadedInjector}):k$(n,t,i,this.urlSerializer).pipe(Si(r=>r?this.configLoader.loadChildren(n,t).pipe(ri(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):F$(t))):zt({routes:[],injector:n})}};function G$(e){e.sort((n,t)=>n.value.outlet===Fn?-1:t.value.outlet===Fn?1:n.value.outlet.localeCompare(t.value.outlet))}function W$(e){let n=e.value.routeConfig;return n&&n.path===""}function Rk(e){let n=[],t=new Set;for(let i of e){if(!W$(i)){n.push(i);continue}let r=n.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):n.push(i)}for(let i of t){let r=Rk(i.children);n.push(new pa(i.value,r))}return n.filter(i=>!t.has(i))}function Z$(e){return e.data||{}}function Y$(e){return e.resolve||{}}function K$(e,n,t,i,r,s){return Si(l=>H$(e,n,t,i,l.extractedUrl,r,s).pipe(Ft(({state:d,tree:f})=>Pn(it({},l),{targetSnapshot:d,urlAfterRedirects:f}))))}function Q$(e,n){return Si(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return zt(t);let s=new Set(r.map(f=>f.route)),l=new Set;for(let f of s)if(!l.has(f))for(let v of Fk(f))l.add(v);let d=0;return Ri(l).pipe(ao(f=>s.has(f)?J$(f,i,e,n):(f.data=DM(f,f.parent,e).resolve,zt(void 0))),ri(()=>d++),_h(1),Si(f=>d===l.size?zt(t):Kr))})}function Fk(e){let n=e.children.map(t=>Fk(t)).flat();return[e,...n]}function J$(e,n,t,i){let r=e.routeConfig,s=e._resolve;return r?.title!==void 0&&!Sk(r)&&(s[Um]=r.title),X$(s,e,n,i).pipe(Ft(l=>(e._resolvedData=l,e.data=DM(e,e.parent,t).resolve,null)))}function X$(e,n,t,i){let r=eM(e);if(r.length===0)return zt({});let s={};return Ri(r).pipe(Si(l=>e9(e[l],n,t,i).pipe(Qr(),ri(d=>{s[l]=d}))),_h(1),Gf(s),fl(l=>kk(l)?Kr:ph(l)))}function e9(e,n,t,i){let r=qm(n)??i,s=np(e,r),l=s.resolve?s.resolve(n,t):po(r,()=>s(n,t));return Pl(l)}function Jx(e){return Wi(n=>{let t=e(n);return t?Ri(t).pipe(Ft(()=>n)):zt(n)})}var Lk=(()=>{let n=class n{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(l=>l.outlet===Fn);return r}getResolvedTitleForRoute(i){return i.data[Um]}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:()=>Qe(t9),providedIn:"root"});let e=n;return e})(),t9=(()=>{let n=class n extends Lk{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};n.\u0275fac=function(r){return new(r||n)(xt(tk))},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),Wm=new Lt("",{providedIn:"root",factory:()=>({})}),my=new Lt(""),IM=(()=>{let n=class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Qe(Nv)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return zt(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Pl(i.loadComponent()).pipe(Ft(Nk),ri(l=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=l}),bc(()=>{this.componentLoaders.delete(i)})),s=new uh(r,()=>new kn).pipe(lh());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return zt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let l=n9(r,this.compiler,i,this.onLoadEndListener).pipe(bc(()=>{this.childrenLoaders.delete(r)})),d=new uh(l,()=>new kn).pipe(lh());return this.childrenLoaders.set(r,d),d}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function n9(e,n,t,i){return Pl(e.loadChildren()).pipe(Ft(Nk),Si(r=>r instanceof om||Array.isArray(r)?zt(r):Ri(n.compileModuleAsync(r))),Ft(r=>{i&&i(e);let s,l,d=!1;return Array.isArray(r)?(l=r,d=!0):(s=r.create(t).injector,l=s.get(my,[],{optional:!0,self:!0}).flat()),{routes:l.map(SM),injector:s}}))}function i9(e){return e&&typeof e=="object"&&"default"in e}function Nk(e){return i9(e)?e.default:e}var EM=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:()=>Qe(r9),providedIn:"root"});let e=n;return e})(),r9=(()=>{let n=class n{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),Bk=new Lt(""),jk=new Lt("");function s9(e,n,t){let i=e.get(jk),r=e.get(Vi);return e.get(On).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let s,l=new Promise(v=>{s=v}),d=r.startViewTransition(()=>(s(),a9(e))),{onViewTransitionCreated:f}=i;return f&&po(e,()=>f({transition:d,from:n,to:t})),l})}function a9(e){return new Promise(n=>{tx(n,{injector:e})})}var PM=(()=>{let n=class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new kn,this.transitionAbortSubject=new kn,this.configLoader=Qe(IM),this.environmentInjector=Qe(Rr),this.urlSerializer=Qe($m),this.rootContexts=Qe(Hm),this.location=Qe(qh),this.inputBindingEnabled=Qe(_y,{optional:!0})!==null,this.titleStrategy=Qe(Lk),this.options=Qe(Wm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Qe(EM),this.createViewTransition=Qe(Bk,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>zt(void 0),this.rootComponentType=null;let i=s=>this.events.next(new cM(s)),r=s=>this.events.next(new lM(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Pn(it(it({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new Ct({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:km,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ci(l=>l.id!==0),Ft(l=>Pn(it({},l),{extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),Wi(l=>{let d=!1,f=!1;return zt(l).pipe(Wi(v=>{if(this.navigationId>l.id)return this.cancelNavigationTransition(l,"",fa.SupersededByNewNavigation),Kr;this.currentTransition=l,this.currentNavigation={id:v.id,initialUrl:v.rawUrl,extractedUrl:v.extractedUrl,trigger:v.source,extras:v.extras,previousNavigation:this.lastSuccessfulNavigation?Pn(it({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let x=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),O=v.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!x&&O!=="reload"){let A="";return this.events.next(new Il(v.id,this.urlSerializer.serialize(v.rawUrl),A,oy.IgnoredSameUrlNavigation)),v.resolve(null),Kr}if(this.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return zt(v).pipe(Wi(A=>{let L=this.transitions?.getValue();return this.events.next(new ep(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),L!==this.transitions?.getValue()?Kr:Promise.resolve(A)}),K$(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),ri(A=>{l.targetSnapshot=A.targetSnapshot,l.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation=Pn(it({},this.currentNavigation),{finalUrl:A.urlAfterRedirects});let L=new cy(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(L)}));if(x&&this.urlHandlingStrategy.shouldProcessUrl(v.currentRawUrl)){let{id:A,extractedUrl:L,source:U,restoredState:te,extras:ce}=v,fe=new ep(A,this.urlSerializer.serialize(L),U,te);this.events.next(fe);let ye=Dk(this.rootComponentType).snapshot;return this.currentTransition=l=Pn(it({},v),{targetSnapshot:ye,urlAfterRedirects:L,extras:Pn(it({},ce),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=L,zt(l)}else{let A="";return this.events.next(new Il(v.id,this.urlSerializer.serialize(v.extractedUrl),A,oy.IgnoredByUrlHandlingStrategy)),v.resolve(null),Kr}}),ri(v=>{let x=new rM(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(x)}),Ft(v=>(this.currentTransition=l=Pn(it({},v),{guards:f$(v.targetSnapshot,v.currentSnapshot,this.rootContexts)}),l)),M$(this.environmentInjector,v=>this.events.next(v)),ri(v=>{if(l.guardsResult=v.guardsResult,Xh(v.guardsResult))throw Ik(this.urlSerializer,v.guardsResult);let x=new sM(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);this.events.next(x)}),ci(v=>v.guardsResult?!0:(this.cancelNavigationTransition(v,"",fa.GuardRejected),!1)),Jx(v=>{if(v.guards.canActivateChecks.length)return zt(v).pipe(ri(x=>{let O=new aM(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(O)}),Wi(x=>{let O=!1;return zt(x).pipe(Q$(this.paramsInheritanceStrategy,this.environmentInjector),ri({next:()=>O=!0,complete:()=>{O||this.cancelNavigationTransition(x,"",fa.NoDataFromResolver)}}))}),ri(x=>{let O=new oM(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(O)}))}),Jx(v=>{let x=O=>{let A=[];O.routeConfig?.loadComponent&&!O.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(O.routeConfig).pipe(ri(L=>{O.component=L}),Ft(()=>{})));for(let L of O.children)A.push(...x(L));return A};return so(x(v.targetSnapshot.root)).pipe(ml(null),ti(1))}),Jx(()=>this.afterPreactivation()),Wi(()=>{let{currentSnapshot:v,targetSnapshot:x}=l,O=this.createViewTransition?.(this.environmentInjector,v.root,x.root);return O?Ri(O).pipe(Ft(()=>l)):zt(l)}),Ft(v=>{let x=a$(i.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return this.currentTransition=l=Pn(it({},v),{targetRouterState:x}),this.currentNavigation.targetRouterState=x,l}),ri(()=>{this.events.next(new Nm)}),p$(this.rootContexts,i.routeReuseStrategy,v=>this.events.next(v),this.inputBindingEnabled),ti(1),ri({next:v=>{d=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new kc(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects))),this.titleStrategy?.updateTitle(v.targetRouterState.snapshot),v.resolve(!0)},complete:()=>{d=!0}}),Yn(this.transitionAbortSubject.pipe(ri(v=>{throw v}))),bc(()=>{!d&&!f&&this.cancelNavigationTransition(l,"",fa.SupersededByNewNavigation),this.currentTransition?.id===l.id&&(this.currentNavigation=null,this.currentTransition=null)}),fl(v=>{if(f=!0,Pk(v))this.events.next(new Ol(l.id,this.urlSerializer.serialize(l.extractedUrl),v.message,v.cancellationCode)),l$(v)?this.events.next(new Bm(v.url)):l.resolve(!1);else{this.events.next(new Lm(l.id,this.urlSerializer.serialize(l.extractedUrl),v,l.targetSnapshot??void 0));try{l.resolve(i.errorHandler(v))}catch(x){this.options.resolveNavigationPromiseOnError?l.resolve(!1):l.reject(x)}}return Kr}))}))}cancelNavigationTransition(i,r,s){let l=new Ol(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(l),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function o9(e){return e!==km}var c9=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:()=>Qe(l9),providedIn:"root"});let e=n;return e})(),MM=class{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}},l9=(()=>{let n=class n extends MM{};n.\u0275fac=(()=>{let i;return function(s){return(i||(i=Aa(n)))(s||n)}})(),n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),Vk=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:()=>Qe(u9),providedIn:"root"});let e=n;return e})(),u9=(()=>{let n=class n extends Vk{constructor(){super(...arguments),this.location=Qe(qh),this.urlSerializer=Qe($m),this.options=Qe(Wm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Qe(EM),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Sl,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Dk(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof ep)this.stateMemento=this.createStateMemento();else if(i instanceof Il)this.rawUrlTree=r.initialUrl;else if(i instanceof cy){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Nm?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Ol&&(i.code===fa.GuardRejected||i.code===fa.NoDataFromResolver)?this.restoreHistory(r):i instanceof Lm?this.restoreHistory(r,!0):i instanceof kc&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let l=this.browserPageId,d=it(it({},r.extras.state),this.generateNgRouterState(r.id,l));this.location.replaceState(s,"",d)}else{let l=it(it({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",l)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,l=this.currentPageId-s;l!==0?this.location.historyGo(l):this.currentUrlTree===i.finalUrl&&l===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};n.\u0275fac=(()=>{let i;return function(s){return(i||(i=Aa(n)))(s||n)}})(),n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),Em=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Em||{});function zk(e,n){e.events.pipe(ci(t=>t instanceof kc||t instanceof Ol||t instanceof Lm||t instanceof Il),Ft(t=>t instanceof kc||t instanceof Il?Em.COMPLETE:(t instanceof Ol?t.code===fa.Redirect||t.code===fa.SupersededByNewNavigation:!1)?Em.REDIRECTING:Em.FAILED),ci(t=>t!==Em.REDIRECTING),ti(1)).subscribe(()=>{n()})}function d9(e){throw e}var h9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},p9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},es=(()=>{let n=class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Qe(kv),this.stateManager=Qe(Vk),this.options=Qe(Wm,{optional:!0})||{},this.pendingTasks=Qe(Bu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Qe(PM),this.urlSerializer=Qe($m),this.location=Qe(qh),this.urlHandlingStrategy=Qe(EM),this._events=new kn,this.errorHandler=this.options.errorHandler||d9,this.navigated=!1,this.routeReuseStrategy=Qe(c9),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Qe(my,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Qe(_y,{optional:!0}),this.eventsSubscription=new fr,this.isNgZoneEnabled=Qe(On)instanceof On&&On.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,l=this.navigationTransitions.currentNavigation;if(s!==null&&l!==null){if(this.stateManager.handleRouterEvent(r,l),r instanceof Ol&&r.code!==fa.Redirect&&r.code!==fa.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof kc)this.navigated=!0;else if(r instanceof Bm){let d=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),f={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||o9(s.source)};this.scheduleNavigation(d,km,null,f,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}m9(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),km,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let l={replaceUrl:!0},d=s?.navigationId?s:null;if(s){let v=it({},s);delete v.navigationId,delete v.\u0275routerPageId,Object.keys(v).length!==0&&(l.state=v)}let f=this.parseUrl(i);this.scheduleNavigation(f,r,d,l)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(SM),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:l,fragment:d,queryParamsHandling:f,preserveFragment:v}=r,x=v?this.currentUrlTree.fragment:d,O=null;switch(f){case"merge":O=it(it({},this.currentUrlTree.queryParams),l);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=l||null}O!==null&&(O=this.removeEmptyProps(O));let A;try{let L=s?s.snapshot:this.routerState.snapshot.root;A=wk(L)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),A=this.currentUrlTree.root}return Ck(A,i,O,x??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=Xh(i)?i:this.parseUrl(i),l=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(l,km,null,r)}navigate(i,r={skipLocationChange:!1}){return f9(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=it({},h9):r===!1?s=it({},p9):s=r,Xh(i))return ik(this.currentUrlTree,i,s);let l=this.parseUrl(i);return ik(this.currentUrlTree,l,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,l])=>(l!=null&&(r[s]=l),r),{})}scheduleNavigation(i,r,s,l,d){if(this.disposed)return Promise.resolve(!1);let f,v,x;d?(f=d.resolve,v=d.reject,x=d.promise):x=new Promise((A,L)=>{f=A,v=L});let O=this.pendingTasks.add();return zk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(O))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:l,resolve:f,reject:v,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(A=>Promise.reject(A))}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function f9(e){for(let n=0;n<e.length;n++)if(e[n]==null)throw new Ht(4008,!1)}function m9(e){return!(e instanceof Nm)&&!(e instanceof Bm)}var gy=class{};var g9=(()=>{let n=class n{constructor(i,r,s,l,d){this.router=i,this.injector=s,this.preloadingStrategy=l,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(ci(i=>i instanceof kc),ao(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let s=[];for(let l of r){l.providers&&!l._injector&&(l._injector=Mv(l.providers,i,`Route: ${l.path}`));let d=l._injector??i,f=l._loadedInjector??d;(l.loadChildren&&!l._loadedRoutes&&l.canLoad===void 0||l.loadComponent&&!l._loadedComponent)&&s.push(this.preloadConfig(d,l)),(l.children||l._loadedRoutes)&&s.push(this.processRoutes(f,l.children??l._loadedRoutes))}return Ri(s).pipe(mh())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(i,r):s=zt(null);let l=s.pipe(Si(d=>d===null?zt(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??i,d.routes))));if(r.loadComponent&&!r._loadedComponent){let d=this.loader.loadComponent(r);return Ri([l,d]).pipe(mh())}else return l})}};n.\u0275fac=function(r){return new(r||n)(xt(es),xt(Nv),xt(Rr),xt(gy),xt(IM))},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),Uk=new Lt(""),_9=(()=>{let n=class n{constructor(i,r,s,l,d={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=l,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration||="disabled",d.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof ep?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof kc?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Il&&i.code===oy.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof ly&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ly(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};n.\u0275fac=function(r){vE()},n.\u0275prov=ct({token:n,factory:n.\u0275fac});let e=n;return e})();function v9(e){return e.routerState.root}function Zm(e,n){return{\u0275kind:e,\u0275providers:n}}function y9(){let e=Qe(gs);return n=>{let t=e.get(Zo);if(n!==t.components[0])return;let i=e.get(es),r=e.get($k);e.get(kM)===1&&i.initialNavigation(),e.get(Hk,null,Un.Optional)?.setUpPreloading(),e.get(Uk,null,Un.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var $k=new Lt("",{factory:()=>new kn}),kM=new Lt("",{providedIn:"root",factory:()=>1});function b9(){return Zm(2,[{provide:kM,useValue:0},{provide:Fv,multi:!0,deps:[gs],useFactory:n=>{let t=n.get(TP,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=n.get(es),s=n.get($k);zk(r,()=>{i(!0)}),n.get(PM).afterPreactivation=()=>(i(!0),s.closed?zt(void 0):s),r.initialNavigation()}))}}])}function w9(){return Zm(3,[{provide:Fv,multi:!0,useFactory:()=>{let n=Qe(es);return()=>{n.setUpLocationChangeListener()}}},{provide:kM,useValue:2}])}var Hk=new Lt("");function C9(e){return Zm(0,[{provide:Hk,useExisting:g9},{provide:gy,useExisting:e}])}function x9(){return Zm(8,[ok,{provide:_y,useExisting:ok}])}function M9(e){let n=[{provide:Bk,useValue:s9},{provide:jk,useValue:it({skipNextTransition:!!e?.skipInitialTransition},e)}];return Zm(9,n)}var lk=new Lt("ROUTER_FORROOT_GUARD"),D9=[qh,{provide:$m,useClass:Rm},es,Hm,{provide:El,useFactory:v9,deps:[es]},IM,[]],AM=(()=>{let n=class n{constructor(i){}static forRoot(i,r){return{ngModule:n,providers:[D9,[],{provide:my,multi:!0,useValue:i},{provide:lk,useFactory:I9,deps:[[es,new um,new ev]]},{provide:Wm,useValue:r||{}},r?.useHash?S9():O9(),T9(),r?.preloadingStrategy?C9(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?E9(r):[],r?.bindToComponentInputs?x9().\u0275providers:[],r?.enableViewTransitions?M9().\u0275providers:[],P9()]}}static forChild(i){return{ngModule:n,providers:[{provide:my,multi:!0,useValue:i}]}}};n.\u0275fac=function(r){return new(r||n)(xt(lk,8))},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();function T9(){return{provide:Uk,useFactory:()=>{let e=Qe(RP),n=Qe(On),t=Qe(Wm),i=Qe(PM),r=Qe($m);return t.scrollOffset&&e.setOffset(t.scrollOffset),new _9(r,i,e,n,t)}}}function S9(){return{provide:ju,useClass:OP}}function O9(){return{provide:ju,useClass:Ax}}function I9(e){return"guarded"}function E9(e){return[e.initialNavigation==="disabled"?w9().\u0275providers:[],e.initialNavigation==="enabledBlocking"?b9().\u0275providers:[]]}var uk=new Lt("");function P9(){return[{provide:uk,useFactory:y9},{provide:Lv,multi:!0,useExisting:uk}]}var mp=Lo(Gk());var tA=(()=>{let n=class n{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};n.\u0275fac=function(r){return new(r||n)(Ce(xl),Ce(ji))},n.\u0275dir=Zn({type:n});let e=n;return e})(),nA=(()=>{let n=class n extends tA{};n.\u0275fac=(()=>{let i;return function(s){return(i||(i=Aa(n)))(s||n)}})(),n.\u0275dir=Zn({type:n,features:[Rs]});let e=n;return e})(),ap=new Lt("");var k9={provide:ap,useExisting:Pa(()=>Ty),multi:!0};function A9(){let e=Yo()?Yo().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var R9=new Lt(""),Ty=(()=>{let n=class n extends tA{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!A9())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};n.\u0275fac=function(r){return new(r||n)(Ce(xl),Ce(ji),Ce(R9,8))},n.\u0275dir=Zn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&nt("input",function(d){return s._handleInput(d.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(d){return s._compositionEnd(d.target.value)})},features:[Fa([k9]),Rs]});let e=n;return e})();function Al(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}function iA(e){return e!=null&&typeof e.length=="number"}var op=new Lt(""),Jm=new Lt(""),F9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,rp=class{static min(n){return L9(n)}static max(n){return N9(n)}static required(n){return B9(n)}static requiredTrue(n){return j9(n)}static email(n){return V9(n)}static minLength(n){return z9(n)}static maxLength(n){return U9(n)}static pattern(n){return $9(n)}static nullValidator(n){return rA(n)}static compose(n){return uA(n)}static composeAsync(n){return hA(n)}};function L9(e){return n=>{if(Al(n.value)||Al(e))return null;let t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}}function N9(e){return n=>{if(Al(n.value)||Al(e))return null;let t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}}function B9(e){return Al(e.value)?{required:!0}:null}function j9(e){return e.value===!0?null:{required:!0}}function V9(e){return Al(e.value)||F9.test(e.value)?null:{email:!0}}function z9(e){return n=>Al(n.value)||!iA(n.value)?null:n.value.length<e?{minlength:{requiredLength:e,actualLength:n.value.length}}:null}function U9(e){return n=>iA(n.value)&&n.value.length>e?{maxlength:{requiredLength:e,actualLength:n.value.length}}:null}function $9(e){if(!e)return rA;let n,t;return typeof e=="string"?(t="",e.charAt(0)!=="^"&&(t+="^"),t+=e,e.charAt(e.length-1)!=="$"&&(t+="$"),n=new RegExp(t)):(t=e.toString(),n=e),i=>{if(Al(i.value))return null;let r=i.value;return n.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function rA(e){return null}function sA(e){return e!=null}function aA(e){return Dl(e)?Ri(e):e}function oA(e){let n={};return e.forEach(t=>{n=t!=null?it(it({},n),t):n}),Object.keys(n).length===0?null:n}function cA(e,n){return n.map(t=>t(e))}function H9(e){return!e.validate}function lA(e){return e.map(n=>H9(n)?n:t=>n.validate(t))}function uA(e){if(!e)return null;let n=e.filter(sA);return n.length==0?null:function(t){return oA(cA(t,n))}}function dA(e){return e!=null?uA(lA(e)):null}function hA(e){if(!e)return null;let n=e.filter(sA);return n.length==0?null:function(t){let i=cA(t,n).map(aA);return Hf(i).pipe(Ft(oA))}}function pA(e){return e!=null?hA(lA(e)):null}function Wk(e,n){return e===null?[n]:Array.isArray(e)?[...e,n]:[e,n]}function fA(e){return e._rawValidators}function mA(e){return e._rawAsyncValidators}function LM(e){return e?Array.isArray(e)?e:[e]:[]}function by(e,n){return Array.isArray(e)?e.includes(n):e===n}function Zk(e,n){let t=LM(n);return LM(e).forEach(r=>{by(t,r)||t.push(r)}),t}function Yk(e,n){return LM(n).filter(t=>!by(e,t))}var wy=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=dA(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=pA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,t){return this.control?this.control.hasError(n,t):!1}getError(n,t){return this.control?this.control.getError(n,t):null}},ma=class extends wy{get formDirective(){return null}get path(){return null}},Hu=class extends wy{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Cy=class{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},q9={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Wde=Pn(it({},q9),{"[class.ng-submitted]":"isSubmitted"}),gA=(()=>{let n=class n extends Cy{constructor(i){super(i)}};n.\u0275fac=function(r){return new(r||n)(Ce(Hu,2))},n.\u0275dir=Zn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Rn("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Rs]});let e=n;return e})(),_A=(()=>{let n=class n extends Cy{constructor(i){super(i)}};n.\u0275fac=function(r){return new(r||n)(Ce(ma,10))},n.\u0275dir=Zn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Rn("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Rs]});let e=n;return e})();var Ym="VALID",yy="INVALID",ip="PENDING",Km="DISABLED";function VM(e){return(Sy(e)?e.validators:e)||null}function G9(e){return Array.isArray(e)?dA(e):e||null}function zM(e,n){return(Sy(n)?n.asyncValidators:e)||null}function W9(e){return Array.isArray(e)?pA(e):e||null}function Sy(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function vA(e,n,t){let i=e.controls;if(!(n?Object.keys(i):i).length)throw new Ht(1e3,"");if(!i[t])throw new Ht(1001,"")}function yA(e,n,t){e._forEachChild((i,r)=>{if(t[r]===void 0)throw new Ht(1002,"")})}var sp=class{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Ym}get invalid(){return this.status===yy}get pending(){return this.status==ip}get disabled(){return this.status===Km}get enabled(){return this.status!==Km}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(Zk(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(Zk(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Yk(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Yk(n,this._rawAsyncValidators))}hasValidator(n){return by(this._rawValidators,n)}hasAsyncValidator(n){return by(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=ip,n.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=Km,this.errors=null,this._forEachChild(i=>{i.disable(Pn(it({},n),{onlySelf:!0}))}),this._updateValue(),n.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Pn(it({},n),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=Ym,this._forEachChild(i=>{i.enable(Pn(it({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Pn(it({},n),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ym||this.status===ip)&&this._runAsyncValidator(n.emitEvent)),n.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Km:Ym}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=ip,this._hasOwnPendingAsyncValidator=!0;let t=aA(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(t.emitEvent!==!1)}get(n){let t=n;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(n,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new Zt,this.statusChanges=new Zt}_calculateStatus(){return this._allControlsDisabled()?Km:this.errors?yy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ip)?ip:this._anyControlsHaveStatus(yy)?yy:Ym}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Sy(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let t=this._parent&&this._parent.dirty;return!n&&!!t&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=G9(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=W9(this._rawAsyncValidators)}},xy=class extends sp{constructor(n,t,i){super(VM(t),zM(i,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,i={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){yA(this,!0,n),Object.keys(n).forEach(i=>{vA(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){n!=null&&(Object.keys(n).forEach(i=>{let r=this.controls[i];r&&r.patchValue(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((i,r)=>{i.reset(n?n[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,i)=>(n[i]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&n(i,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&n(i))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(n,t){let i=n;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var NM=class extends xy{};var Oy=new Lt("CallSetDisabledState",{providedIn:"root",factory:()=>Iy}),Iy="always";function Ey(e,n){return[...n.path,e]}function BM(e,n,t=Iy){UM(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||t==="always")&&n.valueAccessor.setDisabledState?.(e.disabled),Y9(e,n),Q9(e,n),K9(e,n),Z9(e,n)}function Kk(e,n,t=!0){let i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),Dy(e,n),e&&(n._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function My(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function Z9(e,n){if(n.valueAccessor.setDisabledState){let t=i=>{n.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}function UM(e,n){let t=fA(e);n.validator!==null?e.setValidators(Wk(t,n.validator)):typeof t=="function"&&e.setValidators([t]);let i=mA(e);n.asyncValidator!==null?e.setAsyncValidators(Wk(i,n.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let r=()=>e.updateValueAndValidity();My(n._rawValidators,r),My(n._rawAsyncValidators,r)}function Dy(e,n){let t=!1;if(e!==null){if(n.validator!==null){let r=fA(e);if(Array.isArray(r)&&r.length>0){let s=r.filter(l=>l!==n.validator);s.length!==r.length&&(t=!0,e.setValidators(s))}}if(n.asyncValidator!==null){let r=mA(e);if(Array.isArray(r)&&r.length>0){let s=r.filter(l=>l!==n.asyncValidator);s.length!==r.length&&(t=!0,e.setAsyncValidators(s))}}}let i=()=>{};return My(n._rawValidators,i),My(n._rawAsyncValidators,i),t}function Y9(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&bA(e,n)})}function K9(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&bA(e,n),e.updateOn!=="submit"&&e.markAsTouched()})}function bA(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Q9(e,n){let t=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}function J9(e,n){e==null,UM(e,n)}function X9(e,n){return Dy(e,n)}function wA(e,n){if(!e.hasOwnProperty("model"))return!1;let t=e.model;return t.isFirstChange()?!0:!Object.is(n,t.currentValue)}function e7(e){return Object.getPrototypeOf(e.constructor)===nA}function t7(e,n){e._syncPendingControls(),n.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function CA(e,n){if(!n)return null;Array.isArray(n);let t,i,r;return n.forEach(s=>{s.constructor===Ty?t=s:e7(s)?i=s:r=s}),r||i||t||null}function n7(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}function Qk(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}function Jk(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var Qm=class extends sp{constructor(n=null,t,i){super(VM(t),zM(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Jk(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Qk(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Qk(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){Jk(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var i7=e=>e instanceof Qm,r7=(()=>{let n=class n extends ma{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Ey(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}};n.\u0275fac=(()=>{let i;return function(s){return(i||(i=Aa(n)))(s||n)}})(),n.\u0275dir=Zn({type:n,features:[Rs]});let e=n;return e})();var s7={provide:Hu,useExisting:Pa(()=>$M)},Xk=Promise.resolve(),$M=(()=>{let n=class n extends Hu{constructor(i,r,s,l,d,f){super(),this._changeDetectorRef=d,this.callSetDisabledState=f,this.control=new Qm,this._registered=!1,this.name="",this.update=new Zt,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=CA(this,l)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),wA(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){BM(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){Xk.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&Bv(r);Xk.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?Ey(i,this._parent):[i]}};n.\u0275fac=function(r){return new(r||n)(Ce(ma,9),Ce(op,10),Ce(Jm,10),Ce(ap,10),Ce(pi,8),Ce(Oy,8))},n.\u0275dir=Zn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Sn.None,"disabled","isDisabled"],model:[Sn.None,"ngModel","model"],options:[Sn.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Fa([s7]),Rs,ni]});let e=n;return e})(),xA=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275dir=Zn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=n;return e})(),a7={provide:ap,useExisting:Pa(()=>HM),multi:!0},HM=(()=>{let n=class n extends nA{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};n.\u0275fac=(()=>{let i;return function(s){return(i||(i=Aa(n)))(s||n)}})(),n.\u0275dir=Zn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&nt("input",function(d){return s.onChange(d.target.value)})("blur",function(){return s.onTouched()})},features:[Fa([a7]),Rs]});let e=n;return e})();var MA=new Lt("");var o7={provide:ma,useExisting:Pa(()=>Py)},Py=(()=>{let n=class n extends ma{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Zt,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Dy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return BM(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){Kk(i.control||null,i,!1),n7(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,t7(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(Kk(r||null,i),i7(s)&&(BM(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);J9(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&X9(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){UM(this.form,this),this._oldForm&&Dy(this._oldForm,this)}_checkFormPresent(){this.form}};n.\u0275fac=function(r){return new(r||n)(Ce(op,10),Ce(Jm,10),Ce(Oy,8))},n.\u0275dir=Zn({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&nt("submit",function(d){return s.onSubmit(d)})("reset",function(){return s.onReset()})},inputs:{form:[Sn.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Fa([o7]),Rs,ni]});let e=n;return e})(),c7={provide:ma,useExisting:Pa(()=>ky)},ky=(()=>{let n=class n extends r7{constructor(i,r,s){super(),this.name=null,this._parent=i,this._setValidators(r),this._setAsyncValidators(s)}_checkParentType(){TA(this._parent)}};n.\u0275fac=function(r){return new(r||n)(Ce(ma,13),Ce(op,10),Ce(Jm,10))},n.\u0275dir=Zn({type:n,selectors:[["","formGroupName",""]],inputs:{name:[Sn.None,"formGroupName","name"]},features:[Fa([c7]),Rs]});let e=n;return e})(),l7={provide:ma,useExisting:Pa(()=>DA)},DA=(()=>{let n=class n extends ma{constructor(i,r,s){super(),this.name=null,this._parent=i,this._setValidators(r),this._setAsyncValidators(s)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Ey(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){TA(this._parent)}};n.\u0275fac=function(r){return new(r||n)(Ce(ma,13),Ce(op,10),Ce(Jm,10))},n.\u0275dir=Zn({type:n,selectors:[["","formArrayName",""]],inputs:{name:[Sn.None,"formArrayName","name"]},features:[Fa([l7]),Rs]});let e=n;return e})();function TA(e){return!(e instanceof ky)&&!(e instanceof Py)&&!(e instanceof DA)}var u7={provide:Hu,useExisting:Pa(()=>qM)},qM=(()=>{let n=class n extends Hu{set isDisabled(i){}constructor(i,r,s,l,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.name=null,this.update=new Zt,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=CA(this,l)}ngOnChanges(i){this._added||this._setUpControl(),wA(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return Ey(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};n._ngModelWarningSentOnce=!1,n.\u0275fac=function(r){return new(r||n)(Ce(ma,13),Ce(op,10),Ce(Jm,10),Ce(ap,10),Ce(MA,8))},n.\u0275dir=Zn({type:n,selectors:[["","formControlName",""]],inputs:{name:[Sn.None,"formControlName","name"],isDisabled:[Sn.None,"disabled","isDisabled"],model:[Sn.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Fa([u7]),Rs,ni]});let e=n;return e})();var SA=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})(),jM=class extends sp{constructor(n,t,i){super(VM(t),zM(i,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[this._adjustIndex(n)]}push(n,t={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(n,t,i={}){this.controls.splice(n,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,t={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(n,t,i={}){let r=this._adjustIndex(n);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,t={}){yA(this,!1,n),n.forEach((i,r)=>{vA(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){n!=null&&(n.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n=[],t={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((t,i)=>{n(t,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(t=>t.enabled&&n(t))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(let n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}};function eA(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var OA=(()=>{let n=class n{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new n;return i.useNonNullable=!0,i}group(i,r=null){let s=this._reduceControls(i),l={};return eA(r)?l=r:r!==null&&(l.validators=r.validator,l.asyncValidators=r.asyncValidator),new xy(s,l)}record(i,r=null){let s=this._reduceControls(i);return new NM(s,r)}control(i,r,s){let l={};return this.useNonNullable?(eA(r)?l=r:(l.validators=r,l.asyncValidators=s),new Qm(i,Pn(it({},l),{nonNullable:!0}))):new Qm(i,r,s)}array(i,r,s){let l=i.map(d=>this._createControl(d));return new jM(l,r,s)}_reduceControls(i){let r={};return Object.keys(i).forEach(s=>{r[s]=this._createControl(i[s])}),r}_createControl(i){if(i instanceof Qm)return i;if(i instanceof sp)return i;if(Array.isArray(i)){let r=i[0],s=i.length>1?i[1]:null,l=i.length>2?i[2]:null;return this.control(r,s,l)}else return this.control(i)}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var IA=(()=>{let n=class n{static withConfig(i){return{ngModule:n,providers:[{provide:Oy,useValue:i.callSetDisabledState??Iy}]}}};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({imports:[SA]});let e=n;return e})(),EA=(()=>{let n=class n{static withConfig(i){return{ngModule:n,providers:[{provide:MA,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:Oy,useValue:i.callSetDisabledState??Iy}]}}};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({imports:[SA]});let e=n;return e})();var cp=class{constructor(n){this._id=n?._id,this.locationName=n.locationName||"Default",this.address={addressLine1:n.address.addressLine1,addressLine2:n.address.addressLine2,suburb:n.address.suburb,city:n.address.city,state:n.address.state,country:n.address.country,county:n.address.county,pincode:n.address.pincode},this.coordinates={latitude:n.coordinates.latitude,longitude:n.coordinates.longitude},this.formattedAddress=n.formattedAddress,this.locationId=n.locationId,this.capacity=n.capacity,this.accessibility=n.accessibility?n.accessibility:"bus",this.photos=n.photos,this.openingHours=n.openingHours,this.events=n.events,this.facilities=n.facilities,this.parking=n.parking?n.parking:!1,this.contactInfo={email:n.contactInfo.email,phoneNumber:n.contactInfo.phoneNumber},this.rating=n.rating,this.reviews=n.reviews,this.isActive=n.isActive?n.isActive:!0,this.isDeleted=n.isDeleted?n.isDeleted:!1}};var lp=(()=>{let n=class n{constructor(i){this.http=i,this.fetchLocations=new Ct(null),this.apiUrl="https://api.geoapify.com/v1/geocode",this.apiKey="f564060db10d472ab67d17dea7455deb"}searchByLatLong(i,r){let s=`${this.apiUrl}/reverse?lat=${i}&lon=${r}&apiKey=${this.apiKey}`;return this.http.get(s)}searchByAddress(i){let r=`${this.apiUrl}/search?text=${i}&apiKey=${this.apiKey}`;return this.http.get(r)}getLocations(){return this.http.get("http://localhost:3000/api/location/")}saveLocation(i){return this.http.post("http://localhost:3000/api/location/",i)}updateLocation(i,r){let s="http://localhost:3000/api/location/"+i;return this.http.patch(s,r)}getALocation(i){let r="http://localhost:3000/api/location/"+i;return this.http.get(r)}deleteLocation(i){let r="http://localhost:3000/api/location/"+i;return this.http.delete(r)}};n.\u0275fac=function(r){return new(r||n)(xt(Pc))},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var PA=(()=>{let n=class n{constructor(i){this.http=i,this.apiUrl="https://api.geoapify.com/v1/geocode/autocomplete",this.apiKey="f564060db10d472ab67d17dea7455deb"}autocomplete(i){let r={text:i,apiKey:this.apiKey};return this.http.get(this.apiUrl,{params:r}).pipe(Ft(s=>s.features.map(l=>l.properties.formatted)))}};n.\u0275fac=function(r){return new(r||n)(xt(Pc))},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var yr="top",ts="bottom",Nr="right",Tr="left",Ay="auto",Rl=[yr,ts,Nr,Tr],Ac="start",qu="end",kA="clippingParents",Ry="viewport",up="popper",AA="reference",WM=Rl.reduce(function(e,n){return e.concat([n+"-"+Ac,n+"-"+qu])},[]),Fy=[].concat(Rl,[Ay]).reduce(function(e,n){return e.concat([n,n+"-"+Ac,n+"-"+qu])},[]),p7="beforeRead",f7="read",m7="afterRead",g7="beforeMain",_7="main",v7="afterMain",y7="beforeWrite",b7="write",w7="afterWrite",RA=[p7,f7,m7,g7,_7,v7,y7,b7,w7];function Br(e){return e?(e.nodeName||"").toLowerCase():null}function zi(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var n=e.ownerDocument;return n&&n.defaultView||window}return e}function ja(e){var n=zi(e).Element;return e instanceof n||e instanceof Element}function Sr(e){var n=zi(e).HTMLElement;return e instanceof n||e instanceof HTMLElement}function dp(e){if(typeof ShadowRoot>"u")return!1;var n=zi(e).ShadowRoot;return e instanceof n||e instanceof ShadowRoot}function C7(e){var n=e.state;Object.keys(n.elements).forEach(function(t){var i=n.styles[t]||{},r=n.attributes[t]||{},s=n.elements[t];!Sr(s)||!Br(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(l){var d=r[l];d===!1?s.removeAttribute(l):s.setAttribute(l,d===!0?"":d)}))})}function x7(e){var n=e.state,t={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,t.popper),n.styles=t,n.elements.arrow&&Object.assign(n.elements.arrow.style,t.arrow),function(){Object.keys(n.elements).forEach(function(i){var r=n.elements[i],s=n.attributes[i]||{},l=Object.keys(n.styles.hasOwnProperty(i)?n.styles[i]:t[i]),d=l.reduce(function(f,v){return f[v]="",f},{});!Sr(r)||!Br(r)||(Object.assign(r.style,d),Object.keys(s).forEach(function(f){r.removeAttribute(f)}))})}}var FA={name:"applyStyles",enabled:!0,phase:"write",fn:C7,effect:x7,requires:["computeStyles"]};function jr(e){return e.split("-")[0]}var go=Math.max,Gu=Math.min,Rc=Math.round;function hp(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function Xm(){return!/^((?!chrome|android).)*safari/i.test(hp())}function Va(e,n,t){n===void 0&&(n=!1),t===void 0&&(t=!1);var i=e.getBoundingClientRect(),r=1,s=1;n&&Sr(e)&&(r=e.offsetWidth>0&&Rc(i.width)/e.offsetWidth||1,s=e.offsetHeight>0&&Rc(i.height)/e.offsetHeight||1);var l=ja(e)?zi(e):window,d=l.visualViewport,f=!Xm()&&t,v=(i.left+(f&&d?d.offsetLeft:0))/r,x=(i.top+(f&&d?d.offsetTop:0))/s,O=i.width/r,A=i.height/s;return{width:O,height:A,top:x,right:v+O,bottom:x+A,left:v,x:v,y:x}}function Wu(e){var n=Va(e),t=e.offsetWidth,i=e.offsetHeight;return Math.abs(n.width-t)<=1&&(t=n.width),Math.abs(n.height-i)<=1&&(i=n.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:i}}function eg(e,n){var t=n.getRootNode&&n.getRootNode();if(e.contains(n))return!0;if(t&&dp(t)){var i=n;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Fs(e){return zi(e).getComputedStyle(e)}function ZM(e){return["table","td","th"].indexOf(Br(e))>=0}function ns(e){return((ja(e)?e.ownerDocument:e.document)||window.document).documentElement}function Fc(e){return Br(e)==="html"?e:e.assignedSlot||e.parentNode||(dp(e)?e.host:null)||ns(e)}function LA(e){return!Sr(e)||Fs(e).position==="fixed"?null:e.offsetParent}function M7(e){var n=/firefox/i.test(hp()),t=/Trident/i.test(hp());if(t&&Sr(e)){var i=Fs(e);if(i.position==="fixed")return null}var r=Fc(e);for(dp(r)&&(r=r.host);Sr(r)&&["html","body"].indexOf(Br(r))<0;){var s=Fs(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||n&&s.willChange==="filter"||n&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function _o(e){for(var n=zi(e),t=LA(e);t&&ZM(t)&&Fs(t).position==="static";)t=LA(t);return t&&(Br(t)==="html"||Br(t)==="body"&&Fs(t).position==="static")?n:t||M7(e)||n}function Zu(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Yu(e,n,t){return go(e,Gu(n,t))}function NA(e,n,t){var i=Yu(e,n,t);return i>t?t:i}function tg(){return{top:0,right:0,bottom:0,left:0}}function ng(e){return Object.assign({},tg(),e)}function ig(e,n){return n.reduce(function(t,i){return t[i]=e,t},{})}var D7=function(n,t){return n=typeof n=="function"?n(Object.assign({},t.rects,{placement:t.placement})):n,ng(typeof n!="number"?n:ig(n,Rl))};function T7(e){var n,t=e.state,i=e.name,r=e.options,s=t.elements.arrow,l=t.modifiersData.popperOffsets,d=jr(t.placement),f=Zu(d),v=[Tr,Nr].indexOf(d)>=0,x=v?"height":"width";if(!(!s||!l)){var O=D7(r.padding,t),A=Wu(s),L=f==="y"?yr:Tr,U=f==="y"?ts:Nr,te=t.rects.reference[x]+t.rects.reference[f]-l[f]-t.rects.popper[x],ce=l[f]-t.rects.reference[f],fe=_o(s),ye=fe?f==="y"?fe.clientHeight||0:fe.clientWidth||0:0,Re=te/2-ce/2,Ae=O[L],We=ye-A[x]-O[U],ft=ye/2-A[x]/2+Re,Et=Yu(Ae,ft,We),Pt=f;t.modifiersData[i]=(n={},n[Pt]=Et,n.centerOffset=Et-ft,n)}}function S7(e){var n=e.state,t=e.options,i=t.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=n.elements.popper.querySelector(r),!r)||eg(n.elements.popper,r)&&(n.elements.arrow=r))}var YM={name:"arrow",enabled:!0,phase:"main",fn:T7,effect:S7,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function za(e){return e.split("-")[1]}var O7={top:"auto",right:"auto",bottom:"auto",left:"auto"};function I7(e,n){var t=e.x,i=e.y,r=n.devicePixelRatio||1;return{x:Rc(t*r)/r||0,y:Rc(i*r)/r||0}}function BA(e){var n,t=e.popper,i=e.popperRect,r=e.placement,s=e.variation,l=e.offsets,d=e.position,f=e.gpuAcceleration,v=e.adaptive,x=e.roundOffsets,O=e.isFixed,A=l.x,L=A===void 0?0:A,U=l.y,te=U===void 0?0:U,ce=typeof x=="function"?x({x:L,y:te}):{x:L,y:te};L=ce.x,te=ce.y;var fe=l.hasOwnProperty("x"),ye=l.hasOwnProperty("y"),Re=Tr,Ae=yr,We=window;if(v){var ft=_o(t),Et="clientHeight",Pt="clientWidth";if(ft===zi(t)&&(ft=ns(t),Fs(ft).position!=="static"&&d==="absolute"&&(Et="scrollHeight",Pt="scrollWidth")),ft=ft,r===yr||(r===Tr||r===Nr)&&s===qu){Ae=ts;var rt=O&&ft===We&&We.visualViewport?We.visualViewport.height:ft[Et];te-=rt-i.height,te*=f?1:-1}if(r===Tr||(r===yr||r===ts)&&s===qu){Re=Nr;var nn=O&&ft===We&&We.visualViewport?We.visualViewport.width:ft[Pt];L-=nn-i.width,L*=f?1:-1}}var Qt=Object.assign({position:d},v&&O7),st=x===!0?I7({x:L,y:te},zi(t)):{x:L,y:te};if(L=st.x,te=st.y,f){var Je;return Object.assign({},Qt,(Je={},Je[Ae]=ye?"0":"",Je[Re]=fe?"0":"",Je.transform=(We.devicePixelRatio||1)<=1?"translate("+L+"px, "+te+"px)":"translate3d("+L+"px, "+te+"px, 0)",Je))}return Object.assign({},Qt,(n={},n[Ae]=ye?te+"px":"",n[Re]=fe?L+"px":"",n.transform="",n))}function E7(e){var n=e.state,t=e.options,i=t.gpuAcceleration,r=i===void 0?!0:i,s=t.adaptive,l=s===void 0?!0:s,d=t.roundOffsets,f=d===void 0?!0:d,v={placement:jr(n.placement),variation:za(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:r,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,BA(Object.assign({},v,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:l,roundOffsets:f})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,BA(Object.assign({},v,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}var jA={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:E7,data:{}};var Ly={passive:!0};function P7(e){var n=e.state,t=e.instance,i=e.options,r=i.scroll,s=r===void 0?!0:r,l=i.resize,d=l===void 0?!0:l,f=zi(n.elements.popper),v=[].concat(n.scrollParents.reference,n.scrollParents.popper);return s&&v.forEach(function(x){x.addEventListener("scroll",t.update,Ly)}),d&&f.addEventListener("resize",t.update,Ly),function(){s&&v.forEach(function(x){x.removeEventListener("scroll",t.update,Ly)}),d&&f.removeEventListener("resize",t.update,Ly)}}var VA={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:P7,data:{}};var k7={left:"right",right:"left",bottom:"top",top:"bottom"};function pp(e){return e.replace(/left|right|bottom|top/g,function(n){return k7[n]})}var A7={start:"end",end:"start"};function Ny(e){return e.replace(/start|end/g,function(n){return A7[n]})}function Ku(e){var n=zi(e),t=n.pageXOffset,i=n.pageYOffset;return{scrollLeft:t,scrollTop:i}}function Qu(e){return Va(ns(e)).left+Ku(e).scrollLeft}function KM(e,n){var t=zi(e),i=ns(e),r=t.visualViewport,s=i.clientWidth,l=i.clientHeight,d=0,f=0;if(r){s=r.width,l=r.height;var v=Xm();(v||!v&&n==="fixed")&&(d=r.offsetLeft,f=r.offsetTop)}return{width:s,height:l,x:d+Qu(e),y:f}}function QM(e){var n,t=ns(e),i=Ku(e),r=(n=e.ownerDocument)==null?void 0:n.body,s=go(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=go(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),d=-i.scrollLeft+Qu(e),f=-i.scrollTop;return Fs(r||t).direction==="rtl"&&(d+=go(t.clientWidth,r?r.clientWidth:0)-s),{width:s,height:l,x:d,y:f}}function Ju(e){var n=Fs(e),t=n.overflow,i=n.overflowX,r=n.overflowY;return/auto|scroll|overlay|hidden/.test(t+r+i)}function By(e){return["html","body","#document"].indexOf(Br(e))>=0?e.ownerDocument.body:Sr(e)&&Ju(e)?e:By(Fc(e))}function Fl(e,n){var t;n===void 0&&(n=[]);var i=By(e),r=i===((t=e.ownerDocument)==null?void 0:t.body),s=zi(i),l=r?[s].concat(s.visualViewport||[],Ju(i)?i:[]):i,d=n.concat(l);return r?d:d.concat(Fl(Fc(l)))}function fp(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function R7(e,n){var t=Va(e,!1,n==="fixed");return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function zA(e,n,t){return n===Ry?fp(KM(e,t)):ja(n)?R7(n,t):fp(QM(ns(e)))}function F7(e){var n=Fl(Fc(e)),t=["absolute","fixed"].indexOf(Fs(e).position)>=0,i=t&&Sr(e)?_o(e):e;return ja(i)?n.filter(function(r){return ja(r)&&eg(r,i)&&Br(r)!=="body"}):[]}function JM(e,n,t,i){var r=n==="clippingParents"?F7(e):[].concat(n),s=[].concat(r,[t]),l=s[0],d=s.reduce(function(f,v){var x=zA(e,v,i);return f.top=go(x.top,f.top),f.right=Gu(x.right,f.right),f.bottom=Gu(x.bottom,f.bottom),f.left=go(x.left,f.left),f},zA(e,l,i));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function rg(e){var n=e.reference,t=e.element,i=e.placement,r=i?jr(i):null,s=i?za(i):null,l=n.x+n.width/2-t.width/2,d=n.y+n.height/2-t.height/2,f;switch(r){case yr:f={x:l,y:n.y-t.height};break;case ts:f={x:l,y:n.y+n.height};break;case Nr:f={x:n.x+n.width,y:d};break;case Tr:f={x:n.x-t.width,y:d};break;default:f={x:n.x,y:n.y}}var v=r?Zu(r):null;if(v!=null){var x=v==="y"?"height":"width";switch(s){case Ac:f[v]=f[v]-(n[x]/2-t[x]/2);break;case qu:f[v]=f[v]+(n[x]/2-t[x]/2);break;default:}}return f}function Ll(e,n){n===void 0&&(n={});var t=n,i=t.placement,r=i===void 0?e.placement:i,s=t.strategy,l=s===void 0?e.strategy:s,d=t.boundary,f=d===void 0?kA:d,v=t.rootBoundary,x=v===void 0?Ry:v,O=t.elementContext,A=O===void 0?up:O,L=t.altBoundary,U=L===void 0?!1:L,te=t.padding,ce=te===void 0?0:te,fe=ng(typeof ce!="number"?ce:ig(ce,Rl)),ye=A===up?AA:up,Re=e.rects.popper,Ae=e.elements[U?ye:A],We=JM(ja(Ae)?Ae:Ae.contextElement||ns(e.elements.popper),f,x,l),ft=Va(e.elements.reference),Et=rg({reference:ft,element:Re,strategy:"absolute",placement:r}),Pt=fp(Object.assign({},Re,Et)),rt=A===up?Pt:ft,nn={top:We.top-rt.top+fe.top,bottom:rt.bottom-We.bottom+fe.bottom,left:We.left-rt.left+fe.left,right:rt.right-We.right+fe.right},Qt=e.modifiersData.offset;if(A===up&&Qt){var st=Qt[r];Object.keys(nn).forEach(function(Je){var Ye=[Nr,ts].indexOf(Je)>=0?1:-1,lt=[yr,ts].indexOf(Je)>=0?"y":"x";nn[Je]+=st[lt]*Ye})}return nn}function XM(e,n){n===void 0&&(n={});var t=n,i=t.placement,r=t.boundary,s=t.rootBoundary,l=t.padding,d=t.flipVariations,f=t.allowedAutoPlacements,v=f===void 0?Fy:f,x=za(i),O=x?d?WM:WM.filter(function(U){return za(U)===x}):Rl,A=O.filter(function(U){return v.indexOf(U)>=0});A.length===0&&(A=O);var L=A.reduce(function(U,te){return U[te]=Ll(e,{placement:te,boundary:r,rootBoundary:s,padding:l})[jr(te)],U},{});return Object.keys(L).sort(function(U,te){return L[U]-L[te]})}function L7(e){if(jr(e)===Ay)return[];var n=pp(e);return[Ny(e),n,Ny(n)]}function N7(e){var n=e.state,t=e.options,i=e.name;if(!n.modifiersData[i]._skip){for(var r=t.mainAxis,s=r===void 0?!0:r,l=t.altAxis,d=l===void 0?!0:l,f=t.fallbackPlacements,v=t.padding,x=t.boundary,O=t.rootBoundary,A=t.altBoundary,L=t.flipVariations,U=L===void 0?!0:L,te=t.allowedAutoPlacements,ce=n.options.placement,fe=jr(ce),ye=fe===ce,Re=f||(ye||!U?[pp(ce)]:L7(ce)),Ae=[ce].concat(Re).reduce(function(yn,bn){return yn.concat(jr(bn)===Ay?XM(n,{placement:bn,boundary:x,rootBoundary:O,padding:v,flipVariations:U,allowedAutoPlacements:te}):bn)},[]),We=n.rects.reference,ft=n.rects.popper,Et=new Map,Pt=!0,rt=Ae[0],nn=0;nn<Ae.length;nn++){var Qt=Ae[nn],st=jr(Qt),Je=za(Qt)===Ac,Ye=[yr,ts].indexOf(st)>=0,lt=Ye?"width":"height",Te=Ll(n,{placement:Qt,boundary:x,rootBoundary:O,altBoundary:A,padding:v}),Se=Ye?Je?Nr:Tr:Je?ts:yr;We[lt]>ft[lt]&&(Se=pp(Se));var Pe=pp(Se),Ke=[];if(s&&Ke.push(Te[st]<=0),d&&Ke.push(Te[Se]<=0,Te[Pe]<=0),Ke.every(function(yn){return yn})){rt=Qt,Pt=!1;break}Et.set(Qt,Ke)}if(Pt)for(var ut=U?3:1,yt=function(bn){var In=Ae.find(function($n){var Ln=Et.get($n);if(Ln)return Ln.slice(0,bn).every(function(Nn){return Nn})});if(In)return rt=In,"break"},Yt=ut;Yt>0;Yt--){var Jt=yt(Yt);if(Jt==="break")break}n.placement!==rt&&(n.modifiersData[i]._skip=!0,n.placement=rt,n.reset=!0)}}var eD={name:"flip",enabled:!0,phase:"main",fn:N7,requiresIfExists:["offset"],data:{_skip:!1}};function B7(e,n,t){var i=jr(e),r=[Tr,yr].indexOf(i)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},n,{placement:e})):t,l=s[0],d=s[1];return l=l||0,d=(d||0)*r,[Tr,Nr].indexOf(i)>=0?{x:d,y:l}:{x:l,y:d}}function j7(e){var n=e.state,t=e.options,i=e.name,r=t.offset,s=r===void 0?[0,0]:r,l=Fy.reduce(function(x,O){return x[O]=B7(O,n.rects,s),x},{}),d=l[n.placement],f=d.x,v=d.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=f,n.modifiersData.popperOffsets.y+=v),n.modifiersData[i]=l}var tD={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:j7};function V7(e){var n=e.state,t=e.name;n.modifiersData[t]=rg({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}var UA={name:"popperOffsets",enabled:!0,phase:"read",fn:V7,data:{}};function nD(e){return e==="x"?"y":"x"}function z7(e){var n=e.state,t=e.options,i=e.name,r=t.mainAxis,s=r===void 0?!0:r,l=t.altAxis,d=l===void 0?!1:l,f=t.boundary,v=t.rootBoundary,x=t.altBoundary,O=t.padding,A=t.tether,L=A===void 0?!0:A,U=t.tetherOffset,te=U===void 0?0:U,ce=Ll(n,{boundary:f,rootBoundary:v,padding:O,altBoundary:x}),fe=jr(n.placement),ye=za(n.placement),Re=!ye,Ae=Zu(fe),We=nD(Ae),ft=n.modifiersData.popperOffsets,Et=n.rects.reference,Pt=n.rects.popper,rt=typeof te=="function"?te(Object.assign({},n.rects,{placement:n.placement})):te,nn=typeof rt=="number"?{mainAxis:rt,altAxis:rt}:Object.assign({mainAxis:0,altAxis:0},rt),Qt=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,st={x:0,y:0};if(ft){if(s){var Je,Ye=Ae==="y"?yr:Tr,lt=Ae==="y"?ts:Nr,Te=Ae==="y"?"height":"width",Se=ft[Ae],Pe=Se+ce[Ye],Ke=Se-ce[lt],ut=L?-Pt[Te]/2:0,yt=ye===Ac?Et[Te]:Pt[Te],Yt=ye===Ac?-Pt[Te]:-Et[Te],Jt=n.elements.arrow,yn=L&&Jt?Wu(Jt):{width:0,height:0},bn=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:tg(),In=bn[Ye],$n=bn[lt],Ln=Yu(0,Et[Te],yn[Te]),Nn=Re?Et[Te]/2-ut-Ln-In-nn.mainAxis:yt-Ln-In-nn.mainAxis,Ui=Re?-Et[Te]/2+ut+Ln+$n+nn.mainAxis:Yt+Ln+$n+nn.mainAxis,Li=n.elements.arrow&&_o(n.elements.arrow),Ci=Li?Ae==="y"?Li.clientTop||0:Li.clientLeft||0:0,js=(Je=Qt?.[Ae])!=null?Je:0,Za=Se+Nn-js-Ci,Be=Se+Ui-js,Ya=Yu(L?Gu(Pe,Za):Pe,Se,L?go(Ke,Be):Ke);ft[Ae]=Ya,st[Ae]=Ya-Se}if(d){var Mo,Cn=Ae==="x"?yr:Tr,$i=Ae==="x"?ts:Nr,rs=ft[We],ta=We==="y"?"height":"width",Ka=rs+ce[Cn],Qa=rs-ce[$i],Vs=[yr,Tr].indexOf(fe)!==-1,tc=(Mo=Qt?.[We])!=null?Mo:0,_a=Vs?Ka:rs-Et[ta]-Pt[ta]-tc+nn.altAxis,at=Vs?rs+Et[ta]+Pt[ta]-tc-nn.altAxis:Qa,bs=L&&Vs?NA(_a,rs,at):Yu(L?_a:Ka,rs,L?at:Qa);ft[We]=bs,st[We]=bs-rs}n.modifiersData[i]=st}}var iD={name:"preventOverflow",enabled:!0,phase:"main",fn:z7,requiresIfExists:["offset"]};function rD(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function sD(e){return e===zi(e)||!Sr(e)?Ku(e):rD(e)}function U7(e){var n=e.getBoundingClientRect(),t=Rc(n.width)/e.offsetWidth||1,i=Rc(n.height)/e.offsetHeight||1;return t!==1||i!==1}function aD(e,n,t){t===void 0&&(t=!1);var i=Sr(n),r=Sr(n)&&U7(n),s=ns(n),l=Va(e,r,t),d={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(i||!i&&!t)&&((Br(n)!=="body"||Ju(s))&&(d=sD(n)),Sr(n)?(f=Va(n,!0),f.x+=n.clientLeft,f.y+=n.clientTop):s&&(f.x=Qu(s))),{x:l.left+d.scrollLeft-f.x,y:l.top+d.scrollTop-f.y,width:l.width,height:l.height}}function $7(e){var n=new Map,t=new Set,i=[];e.forEach(function(s){n.set(s.name,s)});function r(s){t.add(s.name);var l=[].concat(s.requires||[],s.requiresIfExists||[]);l.forEach(function(d){if(!t.has(d)){var f=n.get(d);f&&r(f)}}),i.push(s)}return e.forEach(function(s){t.has(s.name)||r(s)}),i}function oD(e){var n=$7(e);return RA.reduce(function(t,i){return t.concat(n.filter(function(r){return r.phase===i}))},[])}function cD(e){var n;return function(){return n||(n=new Promise(function(t){Promise.resolve().then(function(){n=void 0,t(e())})})),n}}function lD(e){var n=e.reduce(function(t,i){var r=t[i.name];return t[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,t},{});return Object.keys(n).map(function(t){return n[t]})}var $A={placement:"bottom",modifiers:[],strategy:"absolute"};function HA(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return!n.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function qA(e){e===void 0&&(e={});var n=e,t=n.defaultModifiers,i=t===void 0?[]:t,r=n.defaultOptions,s=r===void 0?$A:r;return function(d,f,v){v===void 0&&(v=s);var x={placement:"bottom",orderedModifiers:[],options:Object.assign({},$A,s),modifiersData:{},elements:{reference:d,popper:f},attributes:{},styles:{}},O=[],A=!1,L={state:x,setOptions:function(fe){var ye=typeof fe=="function"?fe(x.options):fe;te(),x.options=Object.assign({},s,x.options,ye),x.scrollParents={reference:ja(d)?Fl(d):d.contextElement?Fl(d.contextElement):[],popper:Fl(f)};var Re=oD(lD([].concat(i,x.options.modifiers)));return x.orderedModifiers=Re.filter(function(Ae){return Ae.enabled}),U(),L.update()},forceUpdate:function(){if(!A){var fe=x.elements,ye=fe.reference,Re=fe.popper;if(HA(ye,Re)){x.rects={reference:aD(ye,_o(Re),x.options.strategy==="fixed"),popper:Wu(Re)},x.reset=!1,x.placement=x.options.placement,x.orderedModifiers.forEach(function(nn){return x.modifiersData[nn.name]=Object.assign({},nn.data)});for(var Ae=0;Ae<x.orderedModifiers.length;Ae++){if(x.reset===!0){x.reset=!1,Ae=-1;continue}var We=x.orderedModifiers[Ae],ft=We.fn,Et=We.options,Pt=Et===void 0?{}:Et,rt=We.name;typeof ft=="function"&&(x=ft({state:x,options:Pt,name:rt,instance:L})||x)}}}},update:cD(function(){return new Promise(function(ce){L.forceUpdate(),ce(x)})}),destroy:function(){te(),A=!0}};if(!HA(d,f))return L;L.setOptions(v).then(function(ce){!A&&v.onFirstUpdate&&v.onFirstUpdate(ce)});function U(){x.orderedModifiers.forEach(function(ce){var fe=ce.name,ye=ce.options,Re=ye===void 0?{}:ye,Ae=ce.effect;if(typeof Ae=="function"){var We=Ae({state:x,name:fe,instance:L,options:Re}),ft=function(){};O.push(We||ft)}})}function te(){O.forEach(function(ce){return ce()}),O=[]}return L}}var H7=[VA,UA,jA,FA],uD=qA({defaultModifiers:H7});var q7=["*"];var G7=["dialog"];function W7(e,n){if(e&1&&(K(0,"span"),je(1),Q()),e&2){let t=Y().$implicit,i=Y();vs(i.highlightClass),V(),hi(t)}}function Z7(e,n){if(e&1&&(Nt(0),je(1),Bt()),e&2){let t=Y().$implicit;V(),hi(t)}}function Y7(e,n){if(e&1&&de(0,W7,2,4,"span",0)(1,Z7,2,1),e&2){let t=n.$index;XE(0,t%2!==0?0:1)}}var K7=(e,n,t)=>({result:e,term:n,formatter:t});function Q7(e,n){if(e&1&&Me(0,"ngb-highlight",2),e&2){let t=n.result,i=n.term,r=n.formatter;H("result",r(t))("term",i)}}function J7(e,n){}function X7(e,n){if(e&1){let t=kt();K(0,"button",3),nt("mouseenter",function(){let r=Le(t).$index,s=Y();return Ne(s.markActive(r))})("click",function(){let r=Le(t).$implicit,s=Y();return Ne(s.select(r))}),de(1,J7,0,0,"ng-template",4),Q()}if(e&2){let t=n.$implicit,i=n.$index,r=Y(),s=Xe(1);Rn("active",i===r.activeIdx),H("id",r.id+"-"+i),V(),H("ngTemplateOutlet",r.resultTemplate||s)("ngTemplateOutletContext",$h(5,K7,t,r.term,r.formatter))}}var QA={animation:!0,transitionTimerDelayMs:5},eH=(()=>{let n=class n{constructor(){this.animation=QA.animation}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function tH(e){let{transitionDelay:n,transitionDuration:t}=window.getComputedStyle(e),i=parseFloat(n),r=parseFloat(t);return(i+r)*1e3}function sg(e){return e!=null?`${e}`:""}function JA(e){return typeof e=="string"}function zy(e){return e!=null}function nH(e){return e&&e.then}function iH(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function rH(e,n){return!n||typeof e.closest>"u"?null:e.closest(n)}function XA(e){return(e||document.body).getBoundingClientRect()}function sH(e){return n=>new Tn(t=>{let i=l=>e.run(()=>t.next(l)),r=l=>e.run(()=>t.error(l)),s=()=>e.run(()=>t.complete());return n.subscribe({next:i,error:r,complete:s})})}function GA(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}var aH=()=>{},{transitionTimerDelayMs:oH}=QA,jy=new Map,Lc=(e,n,t,i)=>{let r=i.context||{},s=jy.get(n);if(s)switch(i.runningTransition){case"continue":return Kr;case"stop":e.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),jy.delete(n)}let l=t(n,i.animation,r)||aH;if(!i.animation||window.getComputedStyle(n).transitionProperty==="none")return e.run(()=>l()),zt(void 0).pipe(sH(e));let d=new kn,f=new kn,v=d.pipe(Y1(!0));jy.set(n,{transition$:d,complete:()=>{f.next(),f.complete()},context:r});let x=tH(n);return e.runOutsideAngular(()=>{let O=mr(n,"transitionend").pipe(Yn(v),ci(({target:L})=>L===n)),A=Bo(x+oH).pipe(Yn(v));h0(A,O,f).pipe(Yn(v)).subscribe(()=>{jy.delete(n),e.run(()=>{l(),d.next(),d.complete()})})}),d.asObservable()};var eR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();var tR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();var nR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})(),iR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();var Nl=function(e){return e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",e}(Nl||{});var Vy=(e,n)=>n?n.some(t=>t.contains(e)):!1,WA=(e,n)=>!n||rH(e,n)!=null,cH=(()=>{let e=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,n=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(e()||n()):!1})(),lH=e=>cH?()=>setTimeout(()=>e(),100):e;function uH(e,n,t,i,r,s,l,d){t&&e.runOutsideAngular(lH(()=>{let f=A=>{let L=A.target;return A.button===2||Vy(L,l)?!1:t==="inside"?Vy(L,s)&&WA(L,d):t==="outside"?!Vy(L,s):WA(L,d)||!Vy(L,s)},v=mr(n,"keydown").pipe(Yn(r),ci(A=>A.which===Nl.Escape),ri(A=>A.preventDefault())),x=mr(n,"mousedown").pipe(Ft(f),Yn(r)),O=mr(n,"mouseup").pipe(Wf(x),ci(([A,L])=>L),Z1(0),Yn(r));h0([v.pipe(Ft(A=>0)),O.pipe(Ft(A=>1))]).subscribe(A=>e.run(()=>i(A)))}))}var dH=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function rR(e){let n=Array.from(e.querySelectorAll(dH)).filter(t=>t.tabIndex!==-1);return[n[0],n[n.length-1]]}var hH=(e,n,t,i=!1)=>{e.runOutsideAngular(()=>{let r=mr(n,"focusin").pipe(Yn(t),Ft(s=>s.target));mr(n,"keydown").pipe(Yn(t),ci(s=>s.which===Nl.Tab),Wf(r)).subscribe(([s,l])=>{let[d,f]=rR(n);(l===d||l===n)&&s.shiftKey&&(f.focus(),s.preventDefault()),l===f&&!s.shiftKey&&(d.focus(),s.preventDefault())}),i&&mr(n,"click").pipe(Yn(t),Wf(r),Ft(s=>s[1])).subscribe(s=>s.focus())})},pH=(()=>{let n=class n{constructor(){this._element=Qe(Vi).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),fH=/\s+/,mH=/  +/gi,gH={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function _H(e,n){let[t,i]=gH[e];return n&&i||t}var vH=/^left/,yH=/^right/,bH=/^start/,wH=/^end/;function CH(e,n){let[t,i]=n.split("-"),r=t.replace(vH,"start").replace(yH,"end"),s=[r];if(i){let l=i;(t==="left"||t==="right")&&(l=l.replace(bH,"top").replace(wH,"bottom")),s.push(`${r}-${l}`)}return e&&(s=s.map(l=>`${e}-${l}`)),s.join(" ")}function ZA({placement:e,baseClass:n},t){let i=Array.isArray(e)?e:e.split(fH),r=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],s=i.findIndex(v=>v==="auto");s>=0&&r.forEach(function(v){i.find(x=>x.search("^"+v)!==-1)==null&&i.splice(s++,1,v)});let l=i.map(v=>_H(v,t.isRTL()));return{placement:l.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!n,phase:"write",fn({state:v}){let x=new RegExp(n+"(-[a-z]+)*","gi"),O=v.elements.popper,A=v.placement,L=O.className;L=L.replace(x,""),L+=` ${CH(n,A)}`,L=L.trim().replace(mH," "),O.className=L}},eD,iD,YM,{enabled:!0,name:"flip",options:{fallbackPlacements:l}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function YA(e){return e}function xH(){let e=Qe(pH),n=null;return{createPopper(t){if(!n){let r=(t.updatePopperOptions||YA)(ZA(t,e));n=uD(t.hostElement,t.targetElement,r)}},update(){n&&n.update()},setOptions(t){if(n){let r=(t.updatePopperOptions||YA)(ZA(t,e));n.setOptions(r)}},destroy(){n&&(n.destroy(),n=null)}}}function MH(e){return n=>(n.modifiers.push(tD,{name:"offset",options:{offset:()=>e}}),n)}var xge=new Date(1882,10,12),Mge=new Date(2174,10,25);var Dge=1e3*60*60*24;var fD=1080,DH=24*fD,TH=12*fD+793,Tge=29*DH+TH,Sge=11*fD+204;var sR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();var aR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})(),SH=(()=>{let n=class n{constructor(){this._ngbConfig=Qe(eH),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),Nc=class{constructor(n,t,i){this.nodes=n,this.viewRef=t,this.componentRef=i}},dD=class{constructor(n){this._componentType=n,this._windowRef=null,this._contentRef=null,this._document=Qe(Vi),this._applicationRef=Qe(Zo),this._injector=Qe(gs),this._viewContainerRef=Qe(Dr),this._ngZone=Qe(On)}open(n,t,i=!1){this._windowRef||(this._contentRef=this._getContentRef(n,t),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));let{nativeElement:r}=this._windowRef.location,s=this._ngZone.onStable.pipe(ti(1),Si(()=>Lc(this._ngZone,r,({classList:l})=>l.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:s}}close(n=!1){return this._windowRef?Lc(this._ngZone,this._windowRef.location.nativeElement,({classList:t})=>t.remove("show"),{animation:n,runningTransition:"stop"}).pipe(ri(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):zt(void 0)}_getContentRef(n,t){if(n)if(n instanceof ho){let i=n.createEmbeddedView(t);return this._applicationRef.attachView(i),new Nc([i.rootNodes],i)}else return new Nc([[this._document.createTextNode(`${n}`)]]);else return new Nc([])}},OH=(()=>{let n=class n{constructor(){this._document=Qe(Vi)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,s=r.style,{overflow:l,paddingRight:d}=s;if(i>0){let f=parseFloat(window.getComputedStyle(r).paddingRight);s.paddingRight=`${f+i}px`}return s.overflow="hidden",()=>{i>0&&(s.paddingRight=d),s.overflow=l}}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),IH=(()=>{let n=class n{constructor(){this._nativeElement=Qe(ji).nativeElement,this._zone=Qe(On)}ngOnInit(){this._zone.onStable.asObservable().pipe(ti(1)).subscribe(()=>{Lc(this._zone,this._nativeElement,(i,r)=>{r&&XA(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Lc(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Wt({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,s){r&2&&(vs("modal-backdrop"+(s.backdropClass?" "+s.backdropClass:"")),Rn("show",!s.animation)("fade",s.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Sc],decls:0,vars:0,template:function(r,s){},encapsulation:2});let e=n;return e})(),Uy=class{update(n){}close(n){}dismiss(n){}},EH=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],PH=["animation","backdropClass"],hD=class{_applyWindowOptions(n,t){EH.forEach(i=>{zy(t[i])&&(n[i]=t[i])})}_applyBackdropOptions(n,t){PH.forEach(i=>{zy(t[i])&&(n[i]=t[i])})}update(n){this._applyWindowOptions(this._windowCmptRef.instance,n),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,n)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Yn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Yn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(n,t,i,r){this._windowCmptRef=n,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new kn,this._dismissed=new kn,this._hidden=new kn,n.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,l)=>{this._resolve=s,this._reject=l}),this.result.then(null,()=>{})}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(n);else{let t=this._beforeDismiss();nH(t)?t.then(i=>{i!==!1&&this._dismiss(n)},()=>{}):t!==!1&&this._dismiss(n)}}_removeModalElements(){let n=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():zt(void 0);n.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),qf(n,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},pD=function(e){return e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",e}(pD||{}),kH=(()=>{let n=class n{constructor(){this._document=Qe(Vi),this._elRef=Qe(ji),this._zone=Qe(On),this._closed$=new kn,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Zt,this.shown=new kn,this.hidden=new kn}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":JA(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ti(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,r={animation:this.animation,runningTransition:"stop"},s=Lc(this._zone,i,()=>i.classList.remove("show"),r),l=Lc(this._zone,this._dialogEl.nativeElement,()=>{},r),d=qf(s,l);return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){let i={animation:this.animation,runningTransition:"continue"},r=Lc(this._zone,this._elRef.nativeElement,(l,d)=>{d&&XA(l),l.classList.add("show")},i),s=Lc(this._zone,this._dialogEl.nativeElement,()=>{},i);qf(r,s).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{mr(i,"keydown").pipe(Yn(this._closed$),ci(s=>s.which===Nl.Escape)).subscribe(s=>{this.keyboard?requestAnimationFrame(()=>{s.defaultPrevented||this._zone.run(()=>this.dismiss(pD.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let r=!1;mr(this._dialogEl.nativeElement,"mousedown").pipe(Yn(this._closed$),ri(()=>r=!1),Wi(()=>mr(i,"mouseup").pipe(Yn(this._closed$),ti(1))),ci(({target:s})=>i===s)).subscribe(()=>{r=!0}),mr(i,"click").pipe(Yn(this._closed$)).subscribe(({target:s})=>{i===s&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!r&&this._zone.run(()=>this.dismiss(pD.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let r=i.querySelector("[ngbAutofocus]"),s=rR(i)[0];(r||s||i).focus()}}_restoreFocus(){let i=this._document.body,r=this._elWithFocus,s;r&&r.focus&&i.contains(r)?s=r:s=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>s.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&Lc(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Wt({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(r,s){if(r&1&&bi(G7,7),r&2){let l;ui(l=di())&&(s._dialogEl=l.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,s){r&2&&(_s("aria-modal",!0)("aria-labelledby",s.ariaLabelledBy)("aria-describedby",s.ariaDescribedBy),vs("modal d-block"+(s.windowClass?" "+s.windowClass:"")),Rn("fade",s.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Sc],ngContentSelectors:q7,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,s){r&1&&(mo(),K(0,"div",1,0)(2,"div",2),Qs(3),Q()()),r&2&&vs("modal-dialog"+(s.size?" modal-"+s.size:"")+(s.centered?" modal-dialog-centered":"")+s.fullscreenClass+(s.scrollable?" modal-dialog-scrollable":"")+(s.modalDialogClass?" "+s.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let e=n;return e})(),AH=(()=>{let n=class n{constructor(){this._applicationRef=Qe(Zo),this._injector=Qe(gs),this._environmentInjector=Qe(Rr),this._document=Qe(Vi),this._scrollBar=Qe(OH),this._activeWindowCmptHasChanged=new kn,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Zt;let i=Qe(On);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let r=this._windowCmpts[this._windowCmpts.length-1];hH(i,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,r,s){let l=s.container instanceof HTMLElement?s.container:zy(s.container)?this._document.querySelector(s.container):this._document.body;if(!l)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let d=new Uy;i=s.injector||i;let f=i.get(Rr,null)||this._environmentInjector,v=this._getContentRef(i,f,r,d,s),x=s.backdrop!==!1?this._attachBackdrop(l):void 0,O=this._attachWindowComponent(l,v.nodes),A=new hD(O,v,x,s.beforeDismiss);return this._registerModalRef(A),this._registerWindowCmpt(O),A.hidden.pipe(ti(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),d.close=L=>{A.close(L)},d.dismiss=L=>{A.dismiss(L)},d.update=L=>{A.update(L)},A.update(s),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),x&&x.instance&&x.changeDetectorRef.detectChanges(),O.changeDetectorRef.detectChanges(),A}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(r=>r.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let r=jv(IH,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_attachWindowComponent(i,r){let s=jv(kH,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_getContentRef(i,r,s,l,d){return s?s instanceof ho?this._createFromTemplateRef(s,l):JA(s)?this._createFromString(s):this._createFromComponent(i,r,s,l,d):new Nc([])}_createFromTemplateRef(i,r){let s={$implicit:r,close(d){r.close(d)},dismiss(d){r.dismiss(d)}},l=i.createEmbeddedView(s);return this._applicationRef.attachView(l),new Nc([l.rootNodes],l)}_createFromString(i){let r=this._document.createTextNode(`${i}`);return new Nc([[r]])}_createFromComponent(i,r,s,l,d){let f=gs.create({providers:[{provide:Uy,useValue:l}],parent:i}),v=jv(s,{environmentInjector:r,elementInjector:f}),x=v.location.nativeElement;return d.scrollable&&x.classList.add("component-host-scrollable"),this._applicationRef.attachView(v.hostView),new Nc([[x]],v.hostView,v)}_setAriaHidden(i){let r=i.parentElement;r&&i!==this._document.body&&(Array.from(r.children).forEach(s=>{s!==i&&s.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,r)=>{i?r.setAttribute("aria-hidden",i):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let r=()=>{let s=this._modalRefs.indexOf(i);s>-1&&(this._modalRefs.splice(s,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(r,r)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let r=this._windowCmpts.indexOf(i);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),RH=(()=>{let n=class n{constructor(){this._injector=Qe(gs),this._modalStack=Qe(AH),this._config=Qe(SH)}open(i,r={}){let s=it(Pn(it({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._injector,i,s)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),oR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({providers:[RH]});let e=n;return e})();var cR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();var lR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();var uR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();var dR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();var hR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();var pR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();var fR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();var mR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();var gR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})(),FH=(()=>{let n=class n{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(i){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);let r=sg(this.result),s=Array.isArray(this.term)?this.term:[this.term],l=x=>this.accentSensitive?x:GA(x),d=s.map(x=>iH(l(sg(x)))).filter(x=>x),f=this.accentSensitive?r:GA(r),v=d.length?f.split(new RegExp(`(${d.join("|")})`,"gmi")):[r];if(this.accentSensitive)this.parts=v;else{let x=0;this.parts=v.map(O=>r.substring(x,x+=O.length))}}};n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Wt({type:n,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[ni,Sc],decls:2,vars:0,consts:[[3,"class"]],template:function(r,s){r&1&&lx(0,Y7,2,1,null,null,cx),r&2&&ux(s.parts)},styles:[`.ngb-highlight{font-weight:700}
`],encapsulation:2,changeDetection:0});let e=n;return e})(),LH=new Lt("live announcer delay",{providedIn:"root",factory:()=>100});function KA(e,n=!1){let t=e.body.querySelector("#ngb-live");return t==null&&n&&(t=e.createElement("div"),t.setAttribute("id","ngb-live"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.classList.add("visually-hidden"),e.body.appendChild(t)),t}var NH=(()=>{let n=class n{constructor(){this._document=Qe(Vi),this._delay=Qe(LH)}ngOnDestroy(){let i=KA(this._document);i&&i.parentElement.removeChild(i)}say(i){let r=KA(this._document,!0),s=this._delay;if(r!=null){r.textContent="";let l=()=>r.textContent=i;s===null?l():setTimeout(l,s)}}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),BH=(()=>{let n=class n{constructor(){this.editable=!0,this.focusFirst=!0,this.selectOnExact=!1,this.showHint=!1,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=i=>i}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),jH=(()=>{let n=class n{constructor(){this.activeIdx=0,this.focusFirst=!0,this.formatter=sg,this.selectEvent=new Zt,this.activeChangeEvent=new Zt}hasActive(){return this.activeIdx>-1&&this.activeIdx<this.results.length}getActive(){return this.results[this.activeIdx]}markActive(i){this.activeIdx=i,this._activeChanged()}next(){this.activeIdx===this.results.length-1?this.activeIdx=this.focusFirst?(this.activeIdx+1)%this.results.length:-1:this.activeIdx++,this._activeChanged()}prev(){this.activeIdx<0?this.activeIdx=this.results.length-1:this.activeIdx===0?this.activeIdx=this.focusFirst?this.results.length-1:-1:this.activeIdx--,this._activeChanged()}resetActive(){this.activeIdx=this.focusFirst?0:-1,this._activeChanged()}select(i){this.selectEvent.emit(i)}ngOnInit(){this.resetActive()}_activeChanged(){this.activeChangeEvent.emit(this.activeIdx>=0?this.id+"-"+this.activeIdx:void 0)}};n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Wt({type:n,selectors:[["ngb-typeahead-window"]],hostAttrs:["role","listbox"],hostVars:3,hostBindings:function(r,s){r&1&&nt("mousedown",function(d){return d.preventDefault()}),r&2&&(Ov("id",s.id),vs("dropdown-menu show"+(s.popupClass?" "+s.popupClass:"")))},inputs:{id:"id",focusFirst:"focusFirst",results:"results",term:"term",formatter:"formatter",resultTemplate:"resultTemplate",popupClass:"popupClass"},outputs:{selectEvent:"select",activeChangeEvent:"activeChange"},exportAs:["ngbTypeaheadWindow"],standalone:!0,features:[Sc],decls:4,vars:0,consts:[["rt",""],["type","button","role","option",1,"dropdown-item",3,"id","active"],[3,"result","term"],["type","button","role","option",1,"dropdown-item",3,"mouseenter","click","id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,s){r&1&&(de(0,Q7,1,2,"ng-template",null,0,mt),lx(2,X7,2,9,"button",1,cx)),r&2&&(V(2),ux(s.results))},dependencies:[FH,Ii],encapsulation:2});let e=n;return e})(),VH=0,_R=(()=>{let n=class n{constructor(){this._nativeElement=Qe(ji).nativeElement,this._config=Qe(BH),this._live=Qe(NH),this._document=Qe(Vi),this._ngZone=Qe(On),this._changeDetector=Qe(pi),this._popupService=new dD(jH),this._positioning=xH(),this._subscription=null,this._closed$=new kn,this._inputValueBackup=null,this._inputValueForSelectOnExact=null,this._valueChanges$=mr(this._nativeElement,"input").pipe(Ft(i=>i.target.value)),this._resubscribeTypeahead$=new Ct(null),this._windowRef=null,this.autocomplete="off",this.container=this._config.container,this.editable=this._config.editable,this.focusFirst=this._config.focusFirst,this.selectOnExact=this._config.selectOnExact,this.showHint=this._config.showHint,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.selectItem=new Zt,this.activeDescendant=null,this.popupId=`ngb-typeahead-${VH++}`,this._onTouched=()=>{},this._onChange=i=>{}}ngOnInit(){this._subscribeToUserInput()}ngOnChanges({ngbTypeahead:i}){i&&!i.firstChange&&(this._unsubscribeFromUserInput(),this._subscribeToUserInput())}ngOnDestroy(){this._closePopup(),this._unsubscribeFromUserInput()}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}writeValue(i){this._writeInputValue(this._formatItemForInput(i)),this.showHint&&(this._inputValueBackup=i)}setDisabledState(i){this._nativeElement.disabled=i}dismissPopup(){this.isPopupOpen()&&(this._resubscribeTypeahead$.next(null),this._closePopup(),this.showHint&&this._inputValueBackup!==null&&this._writeInputValue(this._inputValueBackup),this._changeDetector.markForCheck())}isPopupOpen(){return this._windowRef!=null}handleBlur(){this._resubscribeTypeahead$.next(null),this._onTouched()}handleKeyDown(i){if(this.isPopupOpen())switch(i.which){case Nl.ArrowDown:i.preventDefault(),this._windowRef.instance.next(),this._showHint();break;case Nl.ArrowUp:i.preventDefault(),this._windowRef.instance.prev(),this._showHint();break;case Nl.Enter:case Nl.Tab:{let r=this._windowRef.instance.getActive();zy(r)&&(i.preventDefault(),i.stopPropagation(),this._selectResult(r)),this._closePopup();break}}}_openPopup(){if(!this.isPopupOpen()){this._inputValueBackup=this._nativeElement.value;let{windowRef:i}=this._popupService.open();this._windowRef=i,this._windowRef.setInput("id",this.popupId),this._windowRef.setInput("popupClass",this.popupClass),this._windowRef.instance.selectEvent.subscribe(r=>this._selectResultClosePopup(r)),this._windowRef.instance.activeChangeEvent.subscribe(r=>this.activeDescendant=r),this.container==="body"&&(this._windowRef.location.nativeElement.style.zIndex="1055",this._document.body.appendChild(this._windowRef.location.nativeElement)),this._changeDetector.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._windowRef&&(this._positioning.createPopper({hostElement:this._nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:this.container==="body",updatePopperOptions:r=>this.popperOptions(MH([0,2])(r))}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update()))}),uH(this._ngZone,this._document,"outside",()=>this.dismissPopup(),this._closed$,[this._nativeElement,this._windowRef.location.nativeElement])}}_closePopup(){this._popupService.close().subscribe(()=>{this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._closed$.next(),this._windowRef=null,this.activeDescendant=null})}_selectResult(i){let r=!1;this.selectItem.emit({item:i,preventDefault:()=>{r=!0}}),this._resubscribeTypeahead$.next(null),r||(this.writeValue(i),this._onChange(i))}_selectResultClosePopup(i){this._selectResult(i),this._closePopup()}_showHint(){if(this.showHint&&this._windowRef?.instance.hasActive()&&this._inputValueBackup!=null){let i=this._inputValueBackup.toLowerCase(),r=this._formatItemForInput(this._windowRef.instance.getActive());i===r.substring(0,this._inputValueBackup.length).toLowerCase()?(this._writeInputValue(this._inputValueBackup+r.substring(this._inputValueBackup.length)),this._nativeElement.setSelectionRange.apply(this._nativeElement,[this._inputValueBackup.length,r.length])):this._writeInputValue(r)}}_formatItemForInput(i){return i!=null&&this.inputFormatter?this.inputFormatter(i):sg(i)}_writeInputValue(i){this._nativeElement.value=sg(i)}_subscribeToUserInput(){let i=this._valueChanges$.pipe(ri(r=>{this._inputValueBackup=this.showHint?r:null,this._inputValueForSelectOnExact=this.selectOnExact?r:null,this._onChange(this.editable?r:void 0)}),this.ngbTypeahead?this.ngbTypeahead:()=>zt([]));this._subscription=this._resubscribeTypeahead$.pipe(Wi(()=>i)).subscribe(r=>{!r||r.length===0?this._closePopup():this.selectOnExact&&r.length===1&&this._formatItemForInput(r[0])===this._inputValueForSelectOnExact?(this._selectResult(r[0]),this._closePopup()):(this._openPopup(),this._windowRef.setInput("focusFirst",this.focusFirst),this._windowRef.setInput("results",r),this._windowRef.setInput("term",this._nativeElement.value),this.resultFormatter&&this._windowRef.setInput("formatter",this.resultFormatter),this.resultTemplate&&this._windowRef.setInput("resultTemplate",this.resultTemplate),this._windowRef.instance.resetActive(),this._windowRef.changeDetectorRef.detectChanges(),this._showHint());let s=r?r.length:0;this._live.say(s===0?"No results available":`${s} result${s===1?"":"s"} available`)})}_unsubscribeFromUserInput(){this._subscription&&this._subscription.unsubscribe(),this._subscription=null}};n.\u0275fac=function(r){return new(r||n)},n.\u0275dir=Zn({type:n,selectors:[["input","ngbTypeahead",""]],hostAttrs:["autocapitalize","off","autocorrect","off","role","combobox"],hostVars:7,hostBindings:function(r,s){r&1&&nt("blur",function(){return s.handleBlur()})("keydown",function(d){return s.handleKeyDown(d)}),r&2&&(Ov("autocomplete",s.autocomplete),_s("aria-autocomplete",s.showHint?"both":"list")("aria-activedescendant",s.activeDescendant)("aria-owns",s.isPopupOpen()?s.popupId:null)("aria-expanded",s.isPopupOpen()),Rn("open",s.isPopupOpen()))},inputs:{autocomplete:"autocomplete",container:"container",editable:"editable",focusFirst:"focusFirst",inputFormatter:"inputFormatter",ngbTypeahead:"ngbTypeahead",resultFormatter:"resultFormatter",resultTemplate:"resultTemplate",selectOnExact:"selectOnExact",showHint:"showHint",placement:"placement",popperOptions:"popperOptions",popupClass:"popupClass"},outputs:{selectItem:"selectItem"},exportAs:["ngbTypeahead"],standalone:!0,features:[Fa([{provide:ap,useExisting:Pa(()=>n),multi:!0}]),ni]});let e=n;return e})(),vR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})();var yR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({});let e=n;return e})(),zH=[eR,tR,nR,iR,sR,aR,oR,cR,yR,lR,uR,dR,hR,pR,fR,mR,gR,vR],bR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({imports:[zH,eR,tR,nR,iR,sR,aR,oR,cR,yR,lR,uR,dR,hR,pR,fR,mR,gR,vR]});let e=n;return e})();var $H=["map"];function HH(e,n){if(e&1&&(Nt(0),K(1,"form",11)(2,"div",12)(3,"span",13),je(4,"Location Name"),Q(),Me(5,"input",14),Q(),K(6,"div",15)(7,"div",12)(8,"span",16),je(9,"Address Line 1"),Q(),Me(10,"input",17),Q(),K(11,"div",12)(12,"span",18),je(13,"Address Line 2"),Q(),Me(14,"input",19),Q(),K(15,"div",20)(16,"div",12)(17,"span",21),je(18,"Suburb"),Q(),Me(19,"input",22),Q(),K(20,"div",23)(21,"span",24),je(22,"City"),Q(),Me(23,"input",25),Q(),K(24,"div",12)(25,"span",26),je(26,"Pincode"),Q(),Me(27,"input",27),Q()(),K(28,"div",20)(29,"div",12)(30,"span",28),je(31,"County"),Q(),Me(32,"input",29),Q(),K(33,"div",23)(34,"span",30),je(35,"State"),Q(),Me(36,"input",31),Q(),K(37,"div",12)(38,"span",32),je(39,"Country"),Q(),Me(40,"input",33),Q()()(),K(41,"div",34)(42,"div",35)(43,"h2",36)(44,"button",37),je(45," More Details "),Q()(),K(46,"div",38)(47,"div",39)(48,"div",20)(49,"div",12)(50,"span",40),je(51,"Capacity"),Q(),Me(52,"input",41),Q(),K(53,"div",23)(54,"span",42),je(55,"Opening Hours"),Q(),Me(56,"input",43),Q(),K(57,"div",12)(58,"span",44),je(59,"Rating"),Q(),Me(60,"input",45),Q()(),K(61,"div",20)(62,"div",46)(63,"span",47),je(64,"Events"),Q(),Me(65,"input",48),Q(),K(66,"div",12)(67,"span",49),je(68,"Facilities"),Q(),Me(69,"input",50),Q()(),K(70,"div",51)(71,"div",20)(72,"div",46)(73,"span",52),je(74,"Email Address"),Q(),Me(75,"input",53),Q(),K(76,"div",12)(77,"span",54),je(78,"Phone Number"),Q(),Me(79,"input",55),Q()()()()()()()(),Bt()),e&2){let t=Y();V(),H("formGroup",t.locationForm)}}var mD=(()=>{let n=class n{constructor(i,r,s,l,d){this.mapService=i,this.geocodingAutocompleteService=r,this.formBuilder=s,this.router=l,this.activatedRoute=d,this.markerId=null,this.isSearched=!1,this.className="",this.isInitialLocation=!1,this.formatter=f=>f,this.search=f=>f.pipe(gh(300),xu(),Wi(v=>v.length>3?this.geocodingAutocompleteService.autocomplete(v).pipe(Ft(x=>(this.isSearched=!0,x))):zt([]))),this.locationForm=this.formBuilder.group({locationName:["",[rp.required]],address:this.formBuilder.group({addressLine1:[""],addressLine2:[""],suburb:[""],city:[""],pincode:["",rp.maxLength(6)],state:[""],country:[""],county:[""]}),coordinates:this.formBuilder.group({latitude:[""],longitude:[""]}),formattedAddress:[""],locationId:[""],capacity:[""],accessibility:[""],openingHours:[""],events:[[""]],facilities:[[""]],contactInfo:this.formBuilder.group({email:[""],phoneNumber:["",rp.maxLength(10)]}),rating:[""]})}ngOnInit(){this.locationId=this.activatedRoute.snapshot.paramMap.get("id"),this.locationId&&this.fetchLocation(this.locationId)}ngAfterViewInit(){if(this.router.url.includes("add-class")){let i={lng:-73.935242,lat:40.73061,zoom:14};this.getInitialLocation(i),this.isInitialLocation=!0}}ngOnDestroy(){this.map?.remove()}onSelectLocation(){console.log(this.selectedLocation.length),this.selectedLocation.length>3&&this.mapService.searchByAddress(this.selectedLocation).subscribe({next:i=>{i&&(this.currentLocation=i.features[0].properties,this.createMap({lng:this.currentLocation.lon,lat:this.currentLocation.lat,zoom:14}),this.setMarkerOnClick(),this.isSearched=!1,this.setLocationInForm(this.currentLocation))},error:i=>{throw i}})}saveLocation(i){if(console.log(i),i){if(this.locationForm.valid){let r=new cp(this.locationForm.value);console.log(r),this.mapService.saveLocation(r).subscribe({next:s=>{if(console.log(s),s.status==="success")this.router.navigateByUrl("/locations").then().catch();else throw s.status},error:s=>{throw s}})}}else if(console.log(this.locationForm),this.locationForm.valid){let r=new cp(this.locationForm.value);console.log(r),this.mapService.updateLocation(this.locationId,r).subscribe({next:s=>{if(console.log(s),s.status==="success")this.router.navigateByUrl("/locations").then().catch();else throw s.status},error:s=>{throw s}})}}createMap(i){this.map=new mp.Map({container:this.mapContainer.nativeElement,style:"https://maps.geoapify.com/v1/styles/klokantech-basic/style.json?apiKey=f564060db10d472ab67d17dea7455deb",center:[i.lng,i.lat],zoom:i.zoom}),this.map.addControl(new mp.NavigationControl,"top-right"),this.marker=new mp.Marker({color:"#FF0000"}).setLngLat([i.lng,i.lat]).addTo(this.map)}setMarkerOnClick(){this.map.on("click",i=>{let r=i.lngLat.toArray();this.marker.setLngLat([r[0],r[1]]),this.mapService.searchByLatLong(r[1],r[0]).subscribe({next:s=>{this.currentLocation=s.features[0].properties,s&&(console.log(this.currentLocation),this.setLocationInForm(this.currentLocation))},error:s=>{throw s}})})}getInitialLocation(i){console.log(i),this.mapService.searchByLatLong(i.lat,i.lng).subscribe({next:r=>{this.currentLocation=r.features[0].properties,this.createMap(i),this.setMarkerOnClick(),this.isInitialLocation&&(console.log("its initial location"),this.setLocationInForm(this.currentLocation))},error:r=>{throw r}})}fetchLocation(i){this.mapService.getALocation(i).subscribe({next:r=>{let s=new cp(r.data);this.setLocationInForm(s),this.setDataInForm(s),this.getInitialLocation({lng:r.data.coordinates.longitude,lat:r.data.coordinates.latitude,zoom:14})},error:r=>{throw new Error(r)}})}setDataInForm(i){console.log(i);let r=this.locationForm.value;this.locationForm.patchValue({locationName:i.locationName?i.locationName:r.locationName,capacity:i.capacity?i.capacity:"",accessibility:i.accessibility?i.accessibility:"",openingHours:i.openingHours?i.openingHours:"",events:i.events?i.events:"",facilities:i.facilities?i.facilities:"",contactInfo:{email:i?.contactInfo?.email?i.contactInfo.email:"",phoneNumber:i?.contactInfo?.phoneNumber?i.contactInfo.phoneNumber:""}})}setLocationInForm(i){console.log(i),this.locationForm.patchValue({address:{addressLine1:i?.address?.addressLine1?i.address.addressLine1:i.address_line1,addressLine2:i?.address?.addressLine2?i.address.addressLine2:i.address_line2,suburb:i?.address?.suburb?i.address.suburb:i.suburb,city:i?.address?.city?i.address.city:i.city,pincode:i?.address?.pincode?i.address.pincode:i.postcode,state:i?.address?.state?i.address.state:i.state,country:i?.address?.country?i.address.country:i.country,county:i?.address?.county?i.address.county:i.county},coordinates:{latitude:i?.coordinates?.latitude?i.coordinates.latitude:i.lat,longitude:i?.coordinates?.longitude?i.coordinates.longitude:i.lon},formattedAddress:i.formattedAddress?i.formattedAddress:i.formatted,locationId:i.locationId?i.locationId:i.place_id,rating:i?.rating?i.rating:i.rank.popularity})}};n.\u0275fac=function(r){return new(r||n)(Ce(lp),Ce(PA),Ce(OA),Ce(es),Ce(El))},n.\u0275cmp=Wt({type:n,selectors:[["app-map"]],viewQuery:function(r,s){if(r&1&&bi($H,5),r&2){let l;ui(l=di())&&(s.mapContainer=l.first)}},decls:15,vars:5,consts:[["map",""],[1,"m-3"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-success",3,"click"],["for","typeahead-basic"],["id","typeahead-basic","type","text","placeholder","Type address",1,"form-control",3,"ngModelChange","ngbTypeahead","ngModel"],[1,"map-wrap"],["href","https://www.maptiler.com",1,"watermark"],["src","https://api.maptiler.com/resources/logo.svg","alt","MapTiler logo"],[1,"map"],[4,"ngIf"],[1,"m-3",3,"formGroup"],[1,"input-group","mb-3"],["id","inputGroup-sizing-default","for","locationName",1,"input-group-text"],["type","text","formControlName","locationName","placeholder","Enter Location Name",1,"form-control"],["formGroupName","address"],["id","inputGroup-sizing-default","for","addressLine1",1,"input-group-text"],["type","text","formControlName","addressLine1","placeholder","Enter Address Line 1",1,"form-control"],["id","inputGroup-sizing-default","for","addressLine2",1,"input-group-text"],["type","text","formControlName","addressLine2","placeholder","Enter Address Line 2",1,"form-control"],[1,"d-flex"],["id","inputGroup-sizing-default","for","suburb",1,"input-group-text"],["type","text","formControlName","suburb","placeholder","Enter Suburb",1,"form-control"],[1,"input-group","mb-3","mx-3"],["id","inputGroup-sizing-default","for","city",1,"input-group-text"],["type","text","formControlName","city","placeholder","Enter City",1,"form-control"],["id","inputGroup-sizing-default","for","pincode",1,"input-group-text"],["type","number","formControlName","pincode","placeholder","Enter Pincode",1,"form-control"],["id","inputGroup-sizing-default","for","county",1,"input-group-text"],["type","text","formControlName","county","placeholder","Enter County",1,"form-control"],["id","inputGroup-sizing-default","for","state",1,"input-group-text"],["type","text","formControlName","state","placeholder","Enter State",1,"form-control"],["id","inputGroup-sizing-default","for","country",1,"input-group-text"],["type","text","formControlName","country","placeholder","Enter Country",1,"form-control"],["id","accordionExample",1,"accordion"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"accordion-body"],["id","inputGroup-sizing-default","for","capacity",1,"input-group-text"],["type","number","formControlName","capacity","placeholder","Enter Capacity",1,"form-control"],["id","inputGroup-sizing-default","for","openingHours",1,"input-group-text"],["type","number","formControlName","openingHours","placeholder","Enter Opening Hours",1,"form-control"],["id","inputGroup-sizing-default","for","rating",1,"input-group-text"],["type","number","formControlName","rating","placeholder","Enter Rating",1,"form-control"],[1,"input-group","mb-3","me-3"],["id","inputGroup-sizing-default","for","events",1,"input-group-text"],["type","text","formControlName","events","placeholder","Enter Events",1,"form-control"],["id","inputGroup-sizing-default","for","facilities",1,"input-group-text"],["type","text","formControlName","facilities","placeholder","Enter Facilities",1,"form-control"],["formGroupName","contactInfo"],["id","inputGroup-sizing-default","for","email",1,"input-group-text"],["type","email","formControlName","email","placeholder","Enter Email",1,"form-control"],["id","inputGroup-sizing-default","for","phoneNumber",1,"input-group-text"],["type","number","formControlName","phoneNumber","placeholder","Enter Phone Number",1,"form-control"]],template:function(r,s){if(r&1){let l=kt();K(0,"div",1)(1,"div",2)(2,"h3"),je(3),Q(),K(4,"button",3),nt("click",function(){return Le(l),Ne(s.saveLocation(s.router.url.includes("add-class")))}),je(5),Q()(),K(6,"label",4),je(7,"Search:"),Q(),K(8,"input",5),Uh("ngModelChange",function(f){return Le(l),gm(s.selectedLocation,f)||(s.selectedLocation=f),Ne(f)}),nt("ngModelChange",function(){return Le(l),Ne(s.isSearched&&s.onSelectLocation())}),Q()(),K(9,"div",6)(10,"a",7),Me(11,"img",8),Q(),Me(12,"div",9,0),Q(),de(14,HH,80,1,"ng-container",10)}r&2&&(V(3),Rt("",s.router.url.includes("add-class")?"Add":"Your"," Location for Class"),V(2),Rt(" ",s.router.url.includes("add-class")?"Add Class":"Save Class"," "),V(3),H("ngbTypeahead",s.search),zh("ngModel",s.selectedLocation),V(6),H("ngIf",s.currentLocation))},dependencies:[Zi,xA,Ty,HM,gA,_A,$M,_R,Py,qM,ky],styles:[".map-wrap[_ngcontent-%COMP%]{margin:1rem;position:relative;width:96%;height:50vh}.map[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.watermark[_ngcontent-%COMP%]{position:absolute;left:10px;bottom:10px;z-index:999}.location-details[_ngcontent-%COMP%]{margin:1rem}"]});let e=n;return e})();var wR=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Wt({type:n,selectors:[["app-locations"]],decls:1,vars:0,template:function(r,s){r&1&&Me(0,"router-outlet")},dependencies:[$u]});let e=n;return e})();var $F=Lo(MR());function Bl(){return Bl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Bl.apply(this,arguments)}function br(e){"@babel/helpers - typeof";return br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},br(e)}function _D(e,n){if(e==null)return{};var t={},i=Object.keys(e),r,s;for(s=0;s<i.length;s++)r=i[s],!(n.indexOf(r)>=0)&&(t[r]=e[r]);return t}function ag(e,n){if(e==null)return{};var t=_D(e,n),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)i=s[r],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(t[i]=e[i])}return t}function gp(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function vD(e){if(Array.isArray(e))return gp(e)}function yD(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function og(e,n){if(e){if(typeof e=="string")return gp(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gp(e,n)}}function bD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yi(e){return vD(e)||yD(e)||og(e)||bD()}function DR(e,n,t,i,r,s,l){try{var d=e[s](l),f=d.value}catch(v){t(v);return}d.done?n(f):Promise.resolve(f).then(i,r)}function De(e){return function(){var n=this,t=arguments;return new Promise(function(i,r){var s=e.apply(n,t);function l(f){DR(s,i,r,l,d,"next",f)}function d(f){DR(s,i,r,l,d,"throw",f)}l(void 0)})}}function Ls(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function wD(e,n){if(br(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var i=t.call(e,n||"default");if(br(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function cg(e){var n=wD(e,"string");return br(n)=="symbol"?n:String(n)}function TR(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,cg(i.key),i)}}function vo(e,n,t){return n&&TR(e.prototype,n),t&&TR(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _e(e,n,t){return n=cg(n),n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var W=Lo(kR());function lg(e,n){return function(){return e.apply(n,arguments)}}var{toString:JH}=Object.prototype,{getPrototypeOf:DD}=Object,Gy=(e=>n=>{let t=JH.call(n);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Xo=e=>(e=e.toLowerCase(),n=>Gy(n)===e),Wy=e=>n=>typeof n===e,{isArray:_p}=Array,ug=Wy("undefined");function XH(e){return e!==null&&!ug(e)&&e.constructor!==null&&!ug(e.constructor)&&$a(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var FR=Xo("ArrayBuffer");function eq(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&FR(e.buffer),n}var tq=Wy("string"),$a=Wy("function"),LR=Wy("number"),Zy=e=>e!==null&&typeof e=="object",nq=e=>e===!0||e===!1,qy=e=>{if(Gy(e)!=="object")return!1;let n=DD(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},iq=Xo("Date"),rq=Xo("File"),sq=Xo("Blob"),aq=Xo("FileList"),oq=e=>Zy(e)&&$a(e.pipe),cq=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||$a(e.append)&&((n=Gy(e))==="formdata"||n==="object"&&$a(e.toString)&&e.toString()==="[object FormData]"))},lq=Xo("URLSearchParams"),uq=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dg(e,n,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let i,r;if(typeof e!="object"&&(e=[e]),_p(e))for(i=0,r=e.length;i<r;i++)n.call(null,e[i],i,e);else{let s=t?Object.getOwnPropertyNames(e):Object.keys(e),l=s.length,d;for(i=0;i<l;i++)d=s[i],n.call(null,e[d],d,e)}}function NR(e,n){n=n.toLowerCase();let t=Object.keys(e),i=t.length,r;for(;i-- >0;)if(r=t[i],n===r.toLowerCase())return r;return null}var BR=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,jR=e=>!ug(e)&&e!==BR;function MD(){let{caseless:e}=jR(this)&&this||{},n={},t=(i,r)=>{let s=e&&NR(n,r)||r;qy(n[s])&&qy(i)?n[s]=MD(n[s],i):qy(i)?n[s]=MD({},i):_p(i)?n[s]=i.slice():n[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&dg(arguments[i],t);return n}var dq=(e,n,t,{allOwnKeys:i}={})=>(dg(n,(r,s)=>{t&&$a(r)?e[s]=lg(r,t):e[s]=r},{allOwnKeys:i}),e),hq=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),pq=(e,n,t,i)=>{e.prototype=Object.create(n.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),t&&Object.assign(e.prototype,t)},fq=(e,n,t,i)=>{let r,s,l,d={};if(n=n||{},e==null)return n;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)l=r[s],(!i||i(l,e,n))&&!d[l]&&(n[l]=e[l],d[l]=!0);e=t!==!1&&DD(e)}while(e&&(!t||t(e,n))&&e!==Object.prototype);return n},mq=(e,n,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=n.length;let i=e.indexOf(n,t);return i!==-1&&i===t},gq=e=>{if(!e)return null;if(_p(e))return e;let n=e.length;if(!LR(n))return null;let t=new Array(n);for(;n-- >0;)t[n]=e[n];return t},_q=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&DD(Uint8Array)),vq=(e,n)=>{let i=(e&&e[Symbol.iterator]).call(e),r;for(;(r=i.next())&&!r.done;){let s=r.value;n.call(e,s[0],s[1])}},yq=(e,n)=>{let t,i=[];for(;(t=e.exec(n))!==null;)i.push(t);return i},bq=Xo("HTMLFormElement"),wq=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,r){return i.toUpperCase()+r}),AR=(({hasOwnProperty:e})=>(n,t)=>e.call(n,t))(Object.prototype),Cq=Xo("RegExp"),VR=(e,n)=>{let t=Object.getOwnPropertyDescriptors(e),i={};dg(t,(r,s)=>{let l;(l=n(r,s,e))!==!1&&(i[s]=l||r)}),Object.defineProperties(e,i)},xq=e=>{VR(e,(n,t)=>{if($a(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;let i=e[t];if($a(i)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Mq=(e,n)=>{let t={},i=r=>{r.forEach(s=>{t[s]=!0})};return _p(e)?i(e):i(String(e).split(n)),t},Dq=()=>{},Tq=(e,n)=>(e=+e,Number.isFinite(e)?e:n),xD="abcdefghijklmnopqrstuvwxyz",RR="0123456789",zR={DIGIT:RR,ALPHA:xD,ALPHA_DIGIT:xD+xD.toUpperCase()+RR},Sq=(e=16,n=zR.ALPHA_DIGIT)=>{let t="",{length:i}=n;for(;e--;)t+=n[Math.random()*i|0];return t};function Oq(e){return!!(e&&$a(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}var Iq=e=>{let n=new Array(10),t=(i,r)=>{if(Zy(i)){if(n.indexOf(i)>=0)return;if(!("toJSON"in i)){n[r]=i;let s=_p(i)?[]:{};return dg(i,(l,d)=>{let f=t(l,r+1);!ug(f)&&(s[d]=f)}),n[r]=void 0,s}}return i};return t(e,0)},Eq=Xo("AsyncFunction"),Pq=e=>e&&(Zy(e)||$a(e))&&$a(e.then)&&$a(e.catch),Ue={isArray:_p,isArrayBuffer:FR,isBuffer:XH,isFormData:cq,isArrayBufferView:eq,isString:tq,isNumber:LR,isBoolean:nq,isObject:Zy,isPlainObject:qy,isUndefined:ug,isDate:iq,isFile:rq,isBlob:sq,isRegExp:Cq,isFunction:$a,isStream:oq,isURLSearchParams:lq,isTypedArray:_q,isFileList:aq,forEach:dg,merge:MD,extend:dq,trim:uq,stripBOM:hq,inherits:pq,toFlatObject:fq,kindOf:Gy,kindOfTest:Xo,endsWith:mq,toArray:gq,forEachEntry:vq,matchAll:yq,isHTMLForm:bq,hasOwnProperty:AR,hasOwnProp:AR,reduceDescriptors:VR,freezeMethods:xq,toObjectSet:Mq,toCamelCase:wq,noop:Dq,toFiniteNumber:Tq,findKey:NR,global:BR,isContextDefined:jR,ALPHABET:zR,generateString:Sq,isSpecCompliantForm:Oq,toJSONObject:Iq,isAsyncFn:Eq,isThenable:Pq};function vp(e,n,t,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),t&&(this.config=t),i&&(this.request=i),r&&(this.response=r)}Ue.inherits(vp,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ue.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var UR=vp.prototype,$R={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{$R[e]={value:e}});Object.defineProperties(vp,$R);Object.defineProperty(UR,"isAxiosError",{value:!0});vp.from=(e,n,t,i,r,s)=>{let l=Object.create(UR);return Ue.toFlatObject(e,l,function(f){return f!==Error.prototype},d=>d!=="isAxiosError"),vp.call(l,e.message,n,t,i,r),l.cause=e,l.name=e.name,s&&Object.assign(l,s),l};var qn=vp;var Yy=null;function TD(e){return Ue.isPlainObject(e)||Ue.isArray(e)}function qR(e){return Ue.endsWith(e,"[]")?e.slice(0,-2):e}function HR(e,n,t){return e?e.concat(n).map(function(r,s){return r=qR(r),!t&&s?"["+r+"]":r}).join(t?".":""):n}function kq(e){return Ue.isArray(e)&&!e.some(TD)}var Aq=Ue.toFlatObject(Ue,{},null,function(n){return/^is[A-Z]/.test(n)});function Rq(e,n,t){if(!Ue.isObject(e))throw new TypeError("target must be an object");n=n||new(Yy||FormData),t=Ue.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(te,ce){return!Ue.isUndefined(ce[te])});let i=t.metaTokens,r=t.visitor||x,s=t.dots,l=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&Ue.isSpecCompliantForm(n);if(!Ue.isFunction(r))throw new TypeError("visitor must be a function");function v(U){if(U===null)return"";if(Ue.isDate(U))return U.toISOString();if(!f&&Ue.isBlob(U))throw new qn("Blob is not supported. Use a Buffer instead.");return Ue.isArrayBuffer(U)||Ue.isTypedArray(U)?f&&typeof Blob=="function"?new Blob([U]):Buffer.from(U):U}function x(U,te,ce){let fe=U;if(U&&!ce&&typeof U=="object"){if(Ue.endsWith(te,"{}"))te=i?te:te.slice(0,-2),U=JSON.stringify(U);else if(Ue.isArray(U)&&kq(U)||(Ue.isFileList(U)||Ue.endsWith(te,"[]"))&&(fe=Ue.toArray(U)))return te=qR(te),fe.forEach(function(Re,Ae){!(Ue.isUndefined(Re)||Re===null)&&n.append(l===!0?HR([te],Ae,s):l===null?te:te+"[]",v(Re))}),!1}return TD(U)?!0:(n.append(HR(ce,te,s),v(U)),!1)}let O=[],A=Object.assign(Aq,{defaultVisitor:x,convertValue:v,isVisitable:TD});function L(U,te){if(!Ue.isUndefined(U)){if(O.indexOf(U)!==-1)throw Error("Circular reference detected in "+te.join("."));O.push(U),Ue.forEach(U,function(fe,ye){(!(Ue.isUndefined(fe)||fe===null)&&r.call(n,fe,Ue.isString(ye)?ye.trim():ye,te,A))===!0&&L(fe,te?te.concat(ye):[ye])}),O.pop()}}if(!Ue.isObject(e))throw new TypeError("data must be an object");return L(e),n}var jl=Rq;function GR(e){let n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return n[i]})}function WR(e,n){this._pairs=[],e&&jl(e,this,n)}var ZR=WR.prototype;ZR.append=function(n,t){this._pairs.push([n,t])};ZR.toString=function(n){let t=n?function(i){return n.call(this,i,GR)}:GR;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};var Ky=WR;function Fq(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function hg(e,n,t){if(!n)return e;let i=t&&t.encode||Fq,r=t&&t.serialize,s;if(r?s=r(n,t):s=Ue.isURLSearchParams(n)?n.toString():new Ky(n,t).toString(i),s){let l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}var SD=class{constructor(){this.handlers=[]}use(n,t,i){return this.handlers.push({fulfilled:n,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Ue.forEach(this.handlers,function(i){i!==null&&n(i)})}},OD=SD;var Qy={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var YR=typeof URLSearchParams<"u"?URLSearchParams:Ky;var KR=typeof FormData<"u"?FormData:null;var QR=typeof Blob<"u"?Blob:null;var JR={isBrowser:!0,classes:{URLSearchParams:YR,FormData:KR,Blob:QR},protocols:["http","https","file","blob","url","data"]};var ID={};q4(ID,{hasBrowserEnv:()=>XR,hasStandardBrowserEnv:()=>Lq,hasStandardBrowserWebWorkerEnv:()=>Nq});var XR=typeof window<"u"&&typeof document<"u",Lq=(e=>XR&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),Nq=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function";var Ns=it(it({},ID),JR);function ED(e,n){return jl(e,new Ns.classes.URLSearchParams,Object.assign({visitor:function(t,i,r,s){return Ns.isNode&&Ue.isBuffer(t)?(this.append(i,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},n))}function Bq(e){return Ue.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function jq(e){let n={},t=Object.keys(e),i,r=t.length,s;for(i=0;i<r;i++)s=t[i],n[s]=e[s];return n}function Vq(e){function n(t,i,r,s){let l=t[s++];if(l==="__proto__")return!0;let d=Number.isFinite(+l),f=s>=t.length;return l=!l&&Ue.isArray(r)?r.length:l,f?(Ue.hasOwnProp(r,l)?r[l]=[r[l],i]:r[l]=i,!d):((!r[l]||!Ue.isObject(r[l]))&&(r[l]=[]),n(t,i,r[l],s)&&Ue.isArray(r[l])&&(r[l]=jq(r[l])),!d)}if(Ue.isFormData(e)&&Ue.isFunction(e.entries)){let t={};return Ue.forEachEntry(e,(i,r)=>{n(Bq(i),r,t,0)}),t}return null}var Jy=Vq;function zq(e,n,t){if(Ue.isString(e))try{return(n||JSON.parse)(e),Ue.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(e)}var PD={transitional:Qy,adapter:["xhr","http"],transformRequest:[function(n,t){let i=t.getContentType()||"",r=i.indexOf("application/json")>-1,s=Ue.isObject(n);if(s&&Ue.isHTMLForm(n)&&(n=new FormData(n)),Ue.isFormData(n))return r?JSON.stringify(Jy(n)):n;if(Ue.isArrayBuffer(n)||Ue.isBuffer(n)||Ue.isStream(n)||Ue.isFile(n)||Ue.isBlob(n))return n;if(Ue.isArrayBufferView(n))return n.buffer;if(Ue.isURLSearchParams(n))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let d;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return ED(n,this.formSerializer).toString();if((d=Ue.isFileList(n))||i.indexOf("multipart/form-data")>-1){let f=this.env&&this.env.FormData;return jl(d?{"files[]":n}:n,f&&new f,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),zq(n)):n}],transformResponse:[function(n){let t=this.transitional||PD.transitional,i=t&&t.forcedJSONParsing,r=this.responseType==="json";if(n&&Ue.isString(n)&&(i&&!this.responseType||r)){let l=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(n)}catch(d){if(l)throw d.name==="SyntaxError"?qn.from(d,qn.ERR_BAD_RESPONSE,this,null,this.response):d}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ns.classes.FormData,Blob:Ns.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ue.forEach(["delete","get","head","post","put","patch"],e=>{PD.headers[e]={}});var yp=PD;var Uq=Ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eF=e=>{let n={},t,i,r;return e&&e.split(`
`).forEach(function(l){r=l.indexOf(":"),t=l.substring(0,r).trim().toLowerCase(),i=l.substring(r+1).trim(),!(!t||n[t]&&Uq[t])&&(t==="set-cookie"?n[t]?n[t].push(i):n[t]=[i]:n[t]=n[t]?n[t]+", "+i:i)}),n};var tF=Symbol("internals");function pg(e){return e&&String(e).trim().toLowerCase()}function Xy(e){return e===!1||e==null?e:Ue.isArray(e)?e.map(Xy):String(e)}function $q(e){let n=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,i;for(;i=t.exec(e);)n[i[1]]=i[2];return n}var Hq=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function kD(e,n,t,i,r){if(Ue.isFunction(i))return i.call(this,n,t);if(r&&(n=t),!!Ue.isString(n)){if(Ue.isString(i))return n.indexOf(i)!==-1;if(Ue.isRegExp(i))return i.test(n)}}function qq(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,t,i)=>t.toUpperCase()+i)}function Gq(e,n){let t=Ue.toCamelCase(" "+n);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+t,{value:function(r,s,l){return this[i].call(this,n,r,s,l)},configurable:!0})})}var bp=class{constructor(n){n&&this.set(n)}set(n,t,i){let r=this;function s(d,f,v){let x=pg(f);if(!x)throw new Error("header name must be a non-empty string");let O=Ue.findKey(r,x);(!O||r[O]===void 0||v===!0||v===void 0&&r[O]!==!1)&&(r[O||f]=Xy(d))}let l=(d,f)=>Ue.forEach(d,(v,x)=>s(v,x,f));return Ue.isPlainObject(n)||n instanceof this.constructor?l(n,t):Ue.isString(n)&&(n=n.trim())&&!Hq(n)?l(eF(n),t):n!=null&&s(t,n,i),this}get(n,t){if(n=pg(n),n){let i=Ue.findKey(this,n);if(i){let r=this[i];if(!t)return r;if(t===!0)return $q(r);if(Ue.isFunction(t))return t.call(this,r,i);if(Ue.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,t){if(n=pg(n),n){let i=Ue.findKey(this,n);return!!(i&&this[i]!==void 0&&(!t||kD(this,this[i],i,t)))}return!1}delete(n,t){let i=this,r=!1;function s(l){if(l=pg(l),l){let d=Ue.findKey(i,l);d&&(!t||kD(i,i[d],d,t))&&(delete i[d],r=!0)}}return Ue.isArray(n)?n.forEach(s):s(n),r}clear(n){let t=Object.keys(this),i=t.length,r=!1;for(;i--;){let s=t[i];(!n||kD(this,this[s],s,n,!0))&&(delete this[s],r=!0)}return r}normalize(n){let t=this,i={};return Ue.forEach(this,(r,s)=>{let l=Ue.findKey(i,s);if(l){t[l]=Xy(r),delete t[s];return}let d=n?qq(s):String(s).trim();d!==s&&delete t[s],t[d]=Xy(r),i[d]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){let t=Object.create(null);return Ue.forEach(this,(i,r)=>{i!=null&&i!==!1&&(t[r]=n&&Ue.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,t])=>n+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...t){let i=new this(n);return t.forEach(r=>i.set(r)),i}static accessor(n){let i=(this[tF]=this[tF]={accessors:{}}).accessors,r=this.prototype;function s(l){let d=pg(l);i[d]||(Gq(r,l),i[d]=!0)}return Ue.isArray(n)?n.forEach(s):s(n),this}};bp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ue.reduceDescriptors(bp.prototype,({value:e},n)=>{let t=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(i){this[t]=i}}});Ue.freezeMethods(bp);var Bs=bp;function fg(e,n){let t=this||yp,i=n||t,r=Bs.from(i.headers),s=i.data;return Ue.forEach(e,function(d){s=d.call(t,s,r.normalize(),n?n.status:void 0)}),r.normalize(),s}function mg(e){return!!(e&&e.__CANCEL__)}function nF(e,n,t){qn.call(this,e??"canceled",qn.ERR_CANCELED,n,t),this.name="CanceledError"}Ue.inherits(nF,qn,{__CANCEL__:!0});var Vl=nF;function AD(e,n,t){let i=t.config.validateStatus;!t.status||!i||i(t.status)?e(t):n(new qn("Request failed with status code "+t.status,[qn.ERR_BAD_REQUEST,qn.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}var iF=Ns.hasStandardBrowserEnv?{write(e,n,t,i,r,s){let l=[e+"="+encodeURIComponent(n)];Ue.isNumber(t)&&l.push("expires="+new Date(t).toGMTString()),Ue.isString(i)&&l.push("path="+i),Ue.isString(r)&&l.push("domain="+r),s===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){let n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function RD(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function FD(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function gg(e,n){return e&&!RD(n)?FD(e,n):n}var rF=Ns.hasStandardBrowserEnv?function(){let n=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),i;function r(s){let l=s;return n&&(t.setAttribute("href",l),l=t.href),t.setAttribute("href",l),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=r(window.location.href),function(l){let d=Ue.isString(l)?r(l):l;return d.protocol===i.protocol&&d.host===i.host}}():function(){return function(){return!0}}();function LD(e){let n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function Wq(e,n){e=e||10;let t=new Array(e),i=new Array(e),r=0,s=0,l;return n=n!==void 0?n:1e3,function(f){let v=Date.now(),x=i[s];l||(l=v),t[r]=f,i[r]=v;let O=s,A=0;for(;O!==r;)A+=t[O++],O=O%e;if(r=(r+1)%e,r===s&&(s=(s+1)%e),v-l<n)return;let L=x&&v-x;return L?Math.round(A*1e3/L):void 0}}var sF=Wq;function aF(e,n){let t=0,i=sF(50,250);return r=>{let s=r.loaded,l=r.lengthComputable?r.total:void 0,d=s-t,f=i(d),v=s<=l;t=s;let x={loaded:s,total:l,progress:l?s/l:void 0,bytes:d,rate:f||void 0,estimated:f&&l&&v?(l-s)/f:void 0,event:r};x[n?"download":"upload"]=!0,e(x)}}var Zq=typeof XMLHttpRequest<"u",oF=Zq&&function(e){return new Promise(function(t,i){let r=e.data,s=Bs.from(e.headers).normalize(),{responseType:l,withXSRFToken:d}=e,f;function v(){e.cancelToken&&e.cancelToken.unsubscribe(f),e.signal&&e.signal.removeEventListener("abort",f)}let x;if(Ue.isFormData(r)){if(Ns.hasStandardBrowserEnv||Ns.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((x=s.getContentType())!==!1){let[te,...ce]=x?x.split(";").map(fe=>fe.trim()).filter(Boolean):[];s.setContentType([te||"multipart/form-data",...ce].join("; "))}}let O=new XMLHttpRequest;if(e.auth){let te=e.auth.username||"",ce=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(te+":"+ce))}let A=gg(e.baseURL,e.url);O.open(e.method.toUpperCase(),hg(A,e.params,e.paramsSerializer),!0),O.timeout=e.timeout;function L(){if(!O)return;let te=Bs.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),fe={data:!l||l==="text"||l==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:te,config:e,request:O};AD(function(Re){t(Re),v()},function(Re){i(Re),v()},fe),O=null}if("onloadend"in O?O.onloadend=L:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(L)},O.onabort=function(){O&&(i(new qn("Request aborted",qn.ECONNABORTED,e,O)),O=null)},O.onerror=function(){i(new qn("Network Error",qn.ERR_NETWORK,e,O)),O=null},O.ontimeout=function(){let ce=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",fe=e.transitional||Qy;e.timeoutErrorMessage&&(ce=e.timeoutErrorMessage),i(new qn(ce,fe.clarifyTimeoutError?qn.ETIMEDOUT:qn.ECONNABORTED,e,O)),O=null},Ns.hasStandardBrowserEnv&&(d&&Ue.isFunction(d)&&(d=d(e)),d||d!==!1&&rF(A))){let te=e.xsrfHeaderName&&e.xsrfCookieName&&iF.read(e.xsrfCookieName);te&&s.set(e.xsrfHeaderName,te)}r===void 0&&s.setContentType(null),"setRequestHeader"in O&&Ue.forEach(s.toJSON(),function(ce,fe){O.setRequestHeader(fe,ce)}),Ue.isUndefined(e.withCredentials)||(O.withCredentials=!!e.withCredentials),l&&l!=="json"&&(O.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&O.addEventListener("progress",aF(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&O.upload&&O.upload.addEventListener("progress",aF(e.onUploadProgress)),(e.cancelToken||e.signal)&&(f=te=>{O&&(i(!te||te.type?new Vl(null,e,O):te),O.abort(),O=null)},e.cancelToken&&e.cancelToken.subscribe(f),e.signal&&(e.signal.aborted?f():e.signal.addEventListener("abort",f)));let U=LD(A);if(U&&Ns.protocols.indexOf(U)===-1){i(new qn("Unsupported protocol "+U+":",qn.ERR_BAD_REQUEST,e));return}O.send(r||null)})};var ND={http:Yy,xhr:oF};Ue.forEach(ND,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});var cF=e=>`- ${e}`,Yq=e=>Ue.isFunction(e)||e===null||e===!1,eb={getAdapter:e=>{e=Ue.isArray(e)?e:[e];let{length:n}=e,t,i,r={};for(let s=0;s<n;s++){t=e[s];let l;if(i=t,!Yq(t)&&(i=ND[(l=String(t)).toLowerCase()],i===void 0))throw new qn(`Unknown adapter '${l}'`);if(i)break;r[l||"#"+s]=i}if(!i){let s=Object.entries(r).map(([d,f])=>`adapter ${d} `+(f===!1?"is not supported by the environment":"is not available in the build")),l=n?s.length>1?`since :
`+s.map(cF).join(`
`):" "+cF(s[0]):"as no adapter specified";throw new qn("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:ND};function BD(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Vl(null,e)}function tb(e){return BD(e),e.headers=Bs.from(e.headers),e.data=fg.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),eb.getAdapter(e.adapter||yp.adapter)(e).then(function(i){return BD(e),i.data=fg.call(e,e.transformResponse,i),i.headers=Bs.from(i.headers),i},function(i){return mg(i)||(BD(e),i&&i.response&&(i.response.data=fg.call(e,e.transformResponse,i.response),i.response.headers=Bs.from(i.response.headers))),Promise.reject(i)})}var lF=e=>e instanceof Bs?it({},e):e;function Vc(e,n){n=n||{};let t={};function i(v,x,O){return Ue.isPlainObject(v)&&Ue.isPlainObject(x)?Ue.merge.call({caseless:O},v,x):Ue.isPlainObject(x)?Ue.merge({},x):Ue.isArray(x)?x.slice():x}function r(v,x,O){if(Ue.isUndefined(x)){if(!Ue.isUndefined(v))return i(void 0,v,O)}else return i(v,x,O)}function s(v,x){if(!Ue.isUndefined(x))return i(void 0,x)}function l(v,x){if(Ue.isUndefined(x)){if(!Ue.isUndefined(v))return i(void 0,v)}else return i(void 0,x)}function d(v,x,O){if(O in n)return i(v,x);if(O in e)return i(void 0,v)}let f={url:s,method:s,data:s,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(v,x)=>r(lF(v),lF(x),!0)};return Ue.forEach(Object.keys(Object.assign({},e,n)),function(x){let O=f[x]||r,A=O(e[x],n[x],x);Ue.isUndefined(A)&&O!==d||(t[x]=A)}),t}var nb="1.6.8";var jD={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{jD[e]=function(i){return typeof i===e||"a"+(n<1?"n ":" ")+e}});var uF={};jD.transitional=function(n,t,i){function r(s,l){return"[Axios v"+nb+"] Transitional option '"+s+"'"+l+(i?". "+i:"")}return(s,l,d)=>{if(n===!1)throw new qn(r(l," has been removed"+(t?" in "+t:"")),qn.ERR_DEPRECATED);return t&&!uF[l]&&(uF[l]=!0,console.warn(r(l," has been deprecated since v"+t+" and will be removed in the near future"))),n?n(s,l,d):!0}};function Kq(e,n,t){if(typeof e!="object")throw new qn("options must be an object",qn.ERR_BAD_OPTION_VALUE);let i=Object.keys(e),r=i.length;for(;r-- >0;){let s=i[r],l=n[s];if(l){let d=e[s],f=d===void 0||l(d,s,e);if(f!==!0)throw new qn("option "+s+" must be "+f,qn.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new qn("Unknown option "+s,qn.ERR_BAD_OPTION)}}var ib={assertOptions:Kq,validators:jD};var zl=ib.validators,wp=class{constructor(n){this.defaults=n,this.interceptors={request:new OD,response:new OD}}request(n,t){return Zr(this,null,function*(){try{return yield this._request(n,t)}catch(i){if(i instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;let s=r.stack?r.stack.replace(/^.+\n/,""):"";i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}throw i}})}_request(n,t){typeof n=="string"?(t=t||{},t.url=n):t=n||{},t=Vc(this.defaults,t);let{transitional:i,paramsSerializer:r,headers:s}=t;i!==void 0&&ib.assertOptions(i,{silentJSONParsing:zl.transitional(zl.boolean),forcedJSONParsing:zl.transitional(zl.boolean),clarifyTimeoutError:zl.transitional(zl.boolean)},!1),r!=null&&(Ue.isFunction(r)?t.paramsSerializer={serialize:r}:ib.assertOptions(r,{encode:zl.function,serialize:zl.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=s&&Ue.merge(s.common,s[t.method]);s&&Ue.forEach(["delete","get","head","post","put","patch","common"],U=>{delete s[U]}),t.headers=Bs.concat(l,s);let d=[],f=!0;this.interceptors.request.forEach(function(te){typeof te.runWhen=="function"&&te.runWhen(t)===!1||(f=f&&te.synchronous,d.unshift(te.fulfilled,te.rejected))});let v=[];this.interceptors.response.forEach(function(te){v.push(te.fulfilled,te.rejected)});let x,O=0,A;if(!f){let U=[tb.bind(this),void 0];for(U.unshift.apply(U,d),U.push.apply(U,v),A=U.length,x=Promise.resolve(t);O<A;)x=x.then(U[O++],U[O++]);return x}A=d.length;let L=t;for(O=0;O<A;){let U=d[O++],te=d[O++];try{L=U(L)}catch(ce){te.call(this,ce);break}}try{x=tb.call(this,L)}catch(U){return Promise.reject(U)}for(O=0,A=v.length;O<A;)x=x.then(v[O++],v[O++]);return x}getUri(n){n=Vc(this.defaults,n);let t=gg(n.baseURL,n.url);return hg(t,n.params,n.paramsSerializer)}};Ue.forEach(["delete","get","head","options"],function(n){wp.prototype[n]=function(t,i){return this.request(Vc(i||{},{method:n,url:t,data:(i||{}).data}))}});Ue.forEach(["post","put","patch"],function(n){function t(i){return function(s,l,d){return this.request(Vc(d||{},{method:n,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}wp.prototype[n]=t(),wp.prototype[n+"Form"]=t(!0)});var _g=wp;var VD=class e{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});let i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s,l=new Promise(d=>{i.subscribe(d),s=d}).then(r);return l.cancel=function(){i.unsubscribe(s)},l},n(function(s,l,d){i.reason||(i.reason=new Vl(s,l,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;let t=this._listeners.indexOf(n);t!==-1&&this._listeners.splice(t,1)}static source(){let n;return{token:new e(function(r){n=r}),cancel:n}}},dF=VD;function zD(e){return function(t){return e.apply(null,t)}}function UD(e){return Ue.isObject(e)&&e.isAxiosError===!0}var $D={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($D).forEach(([e,n])=>{$D[n]=e});var hF=$D;function pF(e){let n=new _g(e),t=lg(_g.prototype.request,n);return Ue.extend(t,_g.prototype,n,{allOwnKeys:!0}),Ue.extend(t,n,null,{allOwnKeys:!0}),t.create=function(r){return pF(Vc(e,r))},t}var wr=pF(yp);wr.Axios=_g;wr.CanceledError=Vl;wr.CancelToken=dF;wr.isCancel=mg;wr.VERSION=nb;wr.toFormData=jl;wr.AxiosError=qn;wr.Cancel=wr.CanceledError;wr.all=function(n){return Promise.all(n)};wr.spread=zD;wr.isAxiosError=UD;wr.mergeConfig=Vc;wr.AxiosHeaders=Bs;wr.formToJSON=e=>Jy(Ue.isHTMLForm(e)?new FormData(e):e);wr.getAdapter=eb.getAdapter;wr.HttpStatusCode=hF;wr.default=wr;var ed=wr;var{Axios:Hve,AxiosError:qve,CanceledError:Gve,isCancel:Wve,CancelToken:Zve,VERSION:Yve,all:Kve,Cancel:Qve,isAxiosError:Jve,spread:Xve,toFormData:eye,AxiosHeaders:tye,HttpStatusCode:nye,formToJSON:iye,getAdapter:rye,mergeConfig:sye}=ed;function HD(e){if(Array.isArray(e))return e}function qD(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var i,r,s,l,d=[],f=!0,v=!1;try{if(s=(t=t.call(e)).next,n===0){if(Object(t)!==t)return;f=!1}else for(;!(f=(i=s.call(t)).done)&&(d.push(i.value),d.length!==n);f=!0);}catch(x){v=!0,r=x}finally{try{if(!f&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(v)throw r}}return d}}function GD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rb(e,n){return HD(e)||qD(e,n)||og(e,n)||GD()}var HF=Lo(mF()),qF=Lo(_F());function td(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zc(e,n){return zc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},zc(e,n)}function WD(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&zc(e,n)}function ZD(e,n){if(n&&(br(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return td(e)}function Ul(e){return Ul=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ul(e)}function YD(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function sb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sb=function(){return!!e})()}function KD(e,n,t){if(sb())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,n);var r=new(e.bind.apply(e,i));return t&&zc(r,t.prototype),r}function vg(e){var n=typeof Map=="function"?new Map:void 0;return vg=function(i){if(i===null||!YD(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(i))return n.get(i);n.set(i,r)}function r(){return KD(i,arguments,Ul(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),zc(r,i)},vg(e)}function eT(e){return typeof e=="string"}function vF(e,n){return!!n&&eT(e)}function Qq(e,n){var t=[];if(eT(e)&&vF(e,n)){for(var i=0,r=e.length;i<r;i++)if(e.charAt(i)){var s=e.charAt(i),l=n(s,i,e);t[i]=l}}else if(!eT(e)&&!vF(e,n)){for(var d=0,f=e.length;d<f;d++)if(d in e){var v=e[d],x=n(v,d,e);t[d]=x}}return t}var Jq=function(n){return(0,$F.fromByteArray)(new Uint8Array(Qq(n,function(t){return t.charCodeAt(0)})))},Xq=function(n){var t={},i=String.fromCharCode,r=n.length,s,l=0,d,f,v=0,x,O="",A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0;s<64;s++)t[A.charAt(s)]=s;for(f=0;f<r;f++)for(d=t[n.charAt(f)],l=(l<<6)+d,v+=6;v>=8;)((x=l>>>(v-=8)&255)||f<r-2)&&(O+=i(x));return O},eG=null;function yF(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function bF(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?yF(Object(t),!0).forEach(function(i){_e(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yF(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}function tG(e,n){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=nG(e))||n&&e&&typeof e.length=="number"){t&&(e=t);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(f){function v(x){return f.apply(this,arguments)}return v.toString=function(){return f.toString()},v}(function(f){throw f}),f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,l=!1,d;return{s:function(){t=t.call(e)},n:function(){var v=t.next();return s=v.done,v},e:function(f){function v(x){return f.apply(this,arguments)}return v.toString=function(){return f.toString()},v}(function(f){l=!0,d=f}),f:function(){try{!s&&t.return!=null&&t.return()}finally{if(l)throw d}}}}function nG(e,n){if(e){if(typeof e=="string")return wF(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wF(e,n)}}function wF(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function iG(e,n){e.then().catch(function(t){console.warn("failed to do ".concat(n,", ran into error: "),t)})}var id=function(n){return new Promise(function(t){return setTimeout(t,n)})};function tT(e){return e&&(Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function)}var wg={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3};function rG(e){return e!==null&&br(e)==="object"&&(e.readable||typeof e._read=="function")}function sG(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function aG(e){return typeof window<"u"&&"File"in window&&e instanceof File}function oG(e){return typeof window<"u"&&"Blob"in window&&e instanceof Blob}function cG(e){var n={channel_mutes:!0,devices:!0,mutes:!0,total_unread_count:!0,unread_channels:!0,unread_count:!0,unread_threads:!0,invisible:!0,privacy_settings:!0,roles:!0};return n[e]}function lG(e,n,t){var i=new HF.default;return rG(e)||sG(e)||aG(e)||oG(e)?n?i.append("file",e,n):i.append("file",e):i.append("file",{uri:e,name:n||e.split("/").reverse()[0],contentType:t||void 0,type:t||void 0}),i}function Ha(e){var n=[],t=Array.isArray(e)?e:[e],i=tG(t),r;try{for(i.s();!(r=i.n()).done;){var s=r.value,l=Object.entries(s);l.length>1&&console.warn("client._buildSort() - multiple fields in a single sort object detected. Object's field order is not guaranteed");for(var d=0,f=l;d<f.length;d++){var v=rb(f[d],2),x=v[0],O=v[1];n.push({field:x,direction:O})}}}catch(A){i.e(A)}finally{i.f()}return n}function ab(e){var n=Math.min(500+e*2e3,25e3),t=Math.min(Math.max(250,(e-1)*2e3),25e3);return Math.floor(Math.random()*(n-t)+t)}function Mp(){return uG()}function yg(e){for(var n="",t=0;t<e.length;t++)n+=e[t].toString(16).padStart(2,"0");return n}function uG(){var e=pG(16);return e[6]=e[6]&15|64,e[8]=e[8]&191|128,yg(e.subarray(0,4))+"-"+yg(e.subarray(4,6))+"-"+yg(e.subarray(6,8))+"-"+yg(e.subarray(8,10))+"-"+yg(e.subarray(10,16))}function dG(e){for(var n=Math.pow(2,8*e.byteLength/e.length),t=0;t<e.length;t++)e[t]=Math.random()*n}var hG=function(){var e;return typeof crypto<"u"&&typeof((e=crypto)===null||e===void 0?void 0:e.getRandomValues)<"u"?crypto.getRandomValues.bind(crypto):typeof msCrypto<"u"?msCrypto.getRandomValues.bind(msCrypto):dG}();function pG(e){var n=new Uint8Array(e);return hG(n),n}function fG(e){var n={};if(!e)return n;try{Object.getOwnPropertyNames(e).forEach(function(t){n[t]=Object.getOwnPropertyDescriptor(e,t)})}catch{return{error:"failed to serialize the error"}}return n}function mG(){var e=typeof navigator<"u"?navigator:typeof window<"u"&&window.navigator?window.navigator:void 0;return e?typeof e.onLine!="boolean"?!0:e.onLine:(console.warn("isOnline failed to access window.navigator and assume browser is online"),!0)}function GF(e){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",e),window.addEventListener("online",e))}function WF(e){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",e),window.removeEventListener("online",e))}var gG=function(n){var t=[];for(var i in n)n[i]!==void 0&&(Array.isArray(n[i])||br(n[i])==="object"?t.push("".concat(i,"=").concat(encodeURIComponent(JSON.stringify(n[i])))):t.push("".concat(i,"=").concat(encodeURIComponent(n[i]))));return t.join("&")};function nd(e){return bF(bF({},e),{},{__html:e.html,pinned_at:e.pinned_at?new Date(e.pinned_at):null,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date,status:e.status||"received",reaction_groups:_G(e.reaction_groups,e.reaction_counts,e.reaction_scores)})}function ZF(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"created_at",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=r||t,l=e;t&&(l=l.filter(function(L){return!(L.id&&n.id===L.id)}));var d=l.length;if(d===0&&s)return l.concat(n);if(d===0)return Yi(l);var f=n[i].getTime(),v=l[d-1][i].getTime()<f;if(v&&s)return l.concat(n);if(v)return Yi(l);for(var x=0,O=0,A=d-1;x<=A;)O=Math.floor((A+x)/2),l[O][i].getTime()<=f?x=O+1:A=O-1;if(!t&&n.id){if(l[x]&&n.id===l[x].id)return l[x]=n,Yi(l);if(l[x-1]&&n.id===l[x-1].id)return l[x-1]=n,Yi(l)}return s&&l.splice(x,0,n),Yi(l)}function _G(e,n,t){if(e)return e;if(n&&t){for(var i={},r=0,s=Object.keys(n);r<s.length;r++){var l=s[r];i[l]={count:n[l],sum_scores:t[l]}}return i}return null}function CF(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function Fi(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?CF(Object(t),!0).forEach(function(i){_e(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):CF(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}var vG=function(){function e(n){var t=this,i;Ls(this,e),_e(this,"_channel",void 0),_e(this,"watcher_count",void 0),_e(this,"typing",void 0),_e(this,"read",void 0),_e(this,"pinnedMessages",void 0),_e(this,"pending_messages",void 0),_e(this,"threads",void 0),_e(this,"mutedUsers",void 0),_e(this,"watchers",void 0),_e(this,"members",void 0),_e(this,"unreadCount",void 0),_e(this,"membership",void 0),_e(this,"last_message_at",void 0),_e(this,"isUpToDate",void 0),_e(this,"messageSets",[]),_e(this,"setIsUpToDate",function(r){t.isUpToDate=r}),_e(this,"removeMessageFromArray",function(r,s){var l=r.filter(function(d){return!(d.id&&s.id&&d.id===s.id)});return{removed:l.length<r.length,result:l}}),_e(this,"updatePollVote",function(r,s,l){var d,f=t.findMessage(l);if(f&&f.poll_id===r.poll_id){var v=Fi({},s),x=Yi(((d=f.poll)===null||d===void 0?void 0:d.own_votes)||[]);r.user_id===t._channel.getClient().userID&&(r.option_id&&s.enforce_unique_vote?x=x.filter(function(A){return!A.option_id}):r.answer_text&&(x=x.filter(function(A){return A.answer_text})),x.push(r)),v.own_votes=x;var O=Fi(Fi({},f),{},{poll:v});t.addMessageSorted(O,!1,!1)}}),_e(this,"addPollVote",function(r,s,l){var d,f=t.findMessage(l);if(f&&f.poll_id===r.poll_id){var v=Fi({},s),x=Yi(((d=f.poll)===null||d===void 0?void 0:d.own_votes)||[]);r.user_id===t._channel.getClient().userID&&x.push(r),v.own_votes=x;var O=Fi(Fi({},f),{},{poll:v});t.addMessageSorted(O,!1,!1)}}),_e(this,"removePollVote",function(r,s,l){var d,f=t.findMessage(l);if(f&&f.poll_id===r.poll_id){var v=Fi({},s),x=Yi(((d=f.poll)===null||d===void 0?void 0:d.own_votes)||[]);if(r.user_id===t._channel.getClient().userID){var O=x.findIndex(function(L){return L.option_id===r.option_id});O>-1&&x.splice(O,1)}v.own_votes=x;var A=Fi(Fi({},f),{},{poll:v});t.addMessageSorted(A,!1,!1)}}),_e(this,"updatePoll",function(r,s){var l,d=t.findMessage(s);if(d){var f=Fi(Fi({},r),{},{own_votes:Yi(((l=d.poll)===null||l===void 0?void 0:l.own_votes)||[])}),v=Fi(Fi({},d),{},{poll:f});t.addMessageSorted(v,!1,!1)}}),_e(this,"updateUserMessages",function(r){var s=function(f,v){for(var x=0;x<f.length;x++){var O,A=f[x];((O=A.user)===null||O===void 0?void 0:O.id)===v.id&&(f[x]=Fi(Fi({},A),{},{user:v}))}};t.messageSets.forEach(function(d){return s(d.messages,r)});for(var l in t.threads)s(t.threads[l],r);s(t.pinnedMessages,r)}),_e(this,"deleteUserMessages",function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=function(v,x){for(var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,A=0;A<v.length;A++){var L,U=v[A];((L=U.user)===null||L===void 0?void 0:L.id)===x.id&&(O?v[A]={cid:U.cid,created_at:U.created_at,deleted_at:x.deleted_at,id:U.id,latest_reactions:[],mentioned_users:[],own_reactions:[],parent_id:U.parent_id,reply_count:U.reply_count,status:U.status,thread_participants:U.thread_participants,type:"deleted",updated_at:U.updated_at,user:U.user}:v[A]=Fi(Fi({},U),{},{type:"deleted",deleted_at:x.deleted_at}))}};t.messageSets.forEach(function(f){return l(f.messages,r,s)});for(var d in t.threads)l(t.threads[d],r,s);l(t.pinnedMessages,r,s)}),this._channel=n,this.watcher_count=0,this.typing={},this.read={},this.initMessages(),this.pinnedMessages=[],this.pending_messages=[],this.threads={},this.mutedUsers=[],this.watchers={},this.members={},this.membership={},this.unreadCount=0,this.isUpToDate=!0,this.last_message_at=(n==null||(i=n.state)===null||i===void 0?void 0:i.last_message_at)!=null?new Date(n.state.last_message_at):null}return vo(e,[{key:"messages",get:function(){var t;return((t=this.messageSets.find(function(i){return i.isCurrent}))===null||t===void 0?void 0:t.messages)||[]},set:function(t){var i=this.messageSets.findIndex(function(r){return r.isCurrent});this.messageSets[i].messages=t}},{key:"latestMessages",get:function(){var t;return((t=this.messageSets.find(function(i){return i.isLatest}))===null||t===void 0?void 0:t.messages)||[]},set:function(t){var i=this.messageSets.findIndex(function(r){return r.isLatest});this.messageSets[i].messages=t}},{key:"addMessageSorted",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"latest";return this.addMessagesSorted([t],i,!1,r,s)}},{key:"formatMessage",value:function(t){return Fi(Fi({},t),{},{__html:t.html,pinned_at:t.pinned_at?new Date(t.pinned_at):null,created_at:t.created_at?new Date(t.created_at):new Date,updated_at:t.updated_at?new Date(t.updated_at):new Date,status:t.status||"received"})}},{key:"addMessagesSorted",value:function(t){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"current",d=this.findTargetMessageSet(t,s,l),f=d.messagesToAdd,v=d.targetMessageSetIndex,x=0;x<f.length;x+=1){var O=f[x].shadowed;if(!O){var A=f[x].created_at instanceof Date,L=void 0;if(A)L=f[x];else{var U;L=this.formatMessage(f[x]),L.user&&(U=this._channel)!==null&&U!==void 0&&U.cid&&this._channel.getClient().state.updateUserReference(L.user,this._channel.cid),r&&L.id&&this.threads[L.id]&&delete this.threads[L.id],this.last_message_at||(this.last_message_at=new Date(L.created_at.getTime())),L.created_at.getTime()>this.last_message_at.getTime()&&(this.last_message_at=new Date(L.created_at.getTime()))}var te=L.parent_id;if((!te||L.show_in_channel)&&v!==-1&&(this.messageSets[v].messages=this._addToMessageList(this.messageSets[v].messages,L,i,"created_at",s)),te&&!r){var ce=this.threads[te]||[],fe=this._addToMessageList(ce,L,i,"created_at",s);this.threads[te]=fe}}}return{messageSet:this.messageSets[v]}}},{key:"addPinnedMessages",value:function(t){for(var i=0;i<t.length;i+=1)this.addPinnedMessage(t[i])}},{key:"addPinnedMessage",value:function(t){this.pinnedMessages=this._addToMessageList(this.pinnedMessages,this.formatMessage(t),!1,"pinned_at")}},{key:"removePinnedMessage",value:function(t){var i=this.removeMessageFromArray(this.pinnedMessages,t),r=i.result;this.pinnedMessages=r}},{key:"addReaction",value:function(t,i,r){var s=this;if(i){var l=i;return this._updateMessage(i,function(d){return l.own_reactions=s._addOwnReactionToMessage(d.own_reactions,t,r),s.formatMessage(l)}),l}}},{key:"_addOwnReactionToMessage",value:function(t,i,r){return r?t=[]:t=this._removeOwnReactionFromMessage(t,i),t=t||[],this._channel.getClient().userID===i.user_id&&t.push(i),t}},{key:"_removeOwnReactionFromMessage",value:function(t,i){return t&&t.filter(function(r){return r.user_id!==i.user_id||r.type!==i.type})}},{key:"removeReaction",value:function(t,i){var r=this;if(i){var s=i;return this._updateMessage(i,function(l){return s.own_reactions=r._removeOwnReactionFromMessage(l.own_reactions,t),r.formatMessage(s)}),s}}},{key:"removeQuotedMessageReferences",value:function(t){var i=this,r=function(l){var d,f;return Fi(Fi({},l),{},{created_at:l.created_at.toISOString(),pinned_at:(d=l.pinned_at)===null||d===void 0?void 0:d.toISOString(),updated_at:(f=l.updated_at)===null||f===void 0?void 0:f.toISOString()})};this.messageSets.forEach(function(s){var l=s.messages.filter(function(d){return d.quoted_message_id===t.id}).map(r).map(function(d){return Fi(Fi({},d),{},{quoted_message:Fi(Fi({},t),{},{attachments:[]})})});i.addMessagesSorted(l,!0)})}},{key:"_updateMessage",value:function(t,i){var r=t.parent_id,s=t.show_in_channel,l=t.pinned;if(r&&this.threads[r]){var d=this.threads[r],f=d.findIndex(function(A){return A.id===t.id});f!==-1&&(d[f]=i(d[f]),this.threads[r]=d)}if(!s&&!r||s){var v=this.findMessageSetIndex(t);if(v!==-1){var x=this.messageSets[v].messages.findIndex(function(A){return A.id===t.id});x!==-1&&(this.messageSets[v].messages[x]=i(this.messageSets[v].messages[x]))}}if(l){var O=this.pinnedMessages.findIndex(function(A){return A.id===t.id});O!==-1&&(this.pinnedMessages[O]=i(this.pinnedMessages[O]))}}},{key:"_addToMessageList",value:function(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"created_at",l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return ZF(t,i,r,s,l)}},{key:"removeMessage",value:function(t){var i=!1;if(t.parent_id&&this.threads[t.parent_id]){var r=this.removeMessageFromArray(this.threads[t.parent_id],t),s=r.removed,l=r.result;this.threads[t.parent_id]=l,i=s}else{var d,f=(d=t.messageSetIndex)!==null&&d!==void 0?d:this.findMessageSetIndex(t);if(f!==-1){var v=this.removeMessageFromArray(this.messageSets[f].messages,t),x=v.removed,O=v.result;this.messageSets[f].messages=O,i=x}}return i}},{key:"filterErrorMessages",value:function(){var t=this.latestMessages.filter(function(i){return i.type!=="error"});this.latestMessages=t}},{key:"clean",value:function(){for(var t=new Date,i=0,r=Object.entries(this.typing);i<r.length;i++){var s=rb(r[i],2),l=s[0],d=s[1],f=typeof d.received_at=="string"?new Date(d.received_at):d.received_at||new Date;t.getTime()-f.getTime()>7e3&&(delete this.typing[l],this._channel.getClient().dispatchEvent({cid:this._channel.cid,type:"typing.stop",user:{id:l}}))}}},{key:"clearMessages",value:function(){this.initMessages(),this.pinnedMessages=[]}},{key:"initMessages",value:function(){this.messageSets=[{messages:[],isLatest:!0,isCurrent:!0}]}},{key:"loadMessageIntoState",value:function(){var n=De(W.default.mark(function i(r,s){var l,d,f,v,x,O,A=arguments;return W.default.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(d=A.length>2&&A[2]!==void 0?A[2]:25,v=!1,x=!1,O=s||r,r!=="latest"){U.next=10;break}if(this.messages!==this.latestMessages){U.next=7;break}return U.abrupt("return");case 7:f=this.messageSets.findIndex(function(te){return te.isLatest}),U.next=11;break;case 10:f=this.findMessageSetIndex({id:O});case 11:if(f!==-1&&(this.switchToMessageSet(f),v=!0),x=!s||!!((l=this.threads[s])!==null&&l!==void 0&&l.find(function(te){return te.id===r})),!(v&&x)){U.next=15;break}return U.abrupt("return");case 15:if(v){U.next=18;break}return U.next=18,this._channel.query({messages:{id_around:O,limit:d}},"new");case 18:if(!(!x&&s)){U.next=21;break}return U.next=21,this._channel.getReplies(s,{id_around:r,limit:d});case 21:f=this.findMessageSetIndex({id:O}),f!==-1&&this.switchToMessageSet(f);case 23:case"end":return U.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"findMessage",value:function(t,i){if(i){var r=this.threads[i];return r?r.find(function(l){return l.id===t}):void 0}var s=this.findMessageSetIndex({id:t});if(s!==-1)return this.messageSets[s].messages.find(function(l){return l.id===t})}},{key:"switchToMessageSet",value:function(t){var i=this.messageSets.find(function(r){return r.isCurrent});i&&(i.isCurrent=!1,this.messageSets[t].isCurrent=!0)}},{key:"areMessageSetsOverlap",value:function(t,i){return t.some(function(r){return i.find(function(s){return r.id===s.id})})}},{key:"findMessageSetIndex",value:function(t){return this.messageSets.findIndex(function(i){return!!i.messages.find(function(r){return r.id===t.id})})}},{key:"findTargetMessageSet",value:function(t){var i=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"current",l=t,d;if(r){var f=this.messageSets.map(function(U,te){return te}).filter(function(U){return i.areMessageSetsOverlap(i.messageSets[U].messages,t)});switch(s){case"new":f.length>0?d=f[0]:t.some(function(U){return!U.parent_id})&&(this.messageSets.push({messages:[],isCurrent:!1,isLatest:!1}),d=this.messageSets.length-1);break;case"current":d=this.messageSets.findIndex(function(U){return U.isCurrent});break;case"latest":d=this.messageSets.findIndex(function(U){return U.isLatest});break;default:d=-1}var v=f.splice(0,1)[0],x=Yi(f);if(v!==void 0&&v!==d&&x.push(d),x.length>0){var O=this.messageSets[v],A=this.messageSets.filter(function(U,te){return x.indexOf(te)!==-1});A.forEach(function(U){O.isLatest=O.isLatest||U.isLatest,O.isCurrent=O.isCurrent||U.isCurrent,l=[].concat(Yi(l),Yi(U.messages))}),A.forEach(function(U){return i.messageSets.splice(i.messageSets.indexOf(U),1)});var L=this.messageSets.findIndex(function(U){return i.areMessageSetsOverlap(U.messages,t)});d=L}}else d=this.findMessageSetIndex(t[0]);return{targetMessageSetIndex:d,messagesToAdd:l}}}]),e}();function QD(e,n){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=yG(e))||n&&e&&typeof e.length=="number"){t&&(e=t);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(v){throw v},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,l=!1,d;return{s:function(){t=t.call(e)},n:function(){var v=t.next();return s=v.done,v},e:function(v){l=!0,d=v},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(l)throw d}}}}function yG(e,n){if(e){if(typeof e=="string")return xF(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xF(e,n)}}function xF(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function MF(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function dn(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?MF(Object(t),!0).forEach(function(i){_e(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):MF(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}var JD=function(){function e(n,t,i,r){var s=this;Ls(this,e),_e(this,"_client",void 0),_e(this,"type",void 0),_e(this,"id",void 0),_e(this,"data",void 0),_e(this,"_data",void 0),_e(this,"cid",void 0),_e(this,"listeners",void 0),_e(this,"state",void 0),_e(this,"initialized",void 0),_e(this,"offlineMode",void 0),_e(this,"lastKeyStroke",void 0),_e(this,"lastTypingEvent",void 0),_e(this,"isTyping",void 0),_e(this,"disconnected",void 0),_e(this,"create",function(){var f=De(W.default.mark(function v(x){var O;return W.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return O=dn(dn({},x),{},{watch:!1,state:!1,presence:!1}),L.next=3,s.query(O,"latest");case 3:return L.abrupt("return",L.sent);case 4:case"end":return L.stop()}},v)}));return function(v){return f.apply(this,arguments)}}()),_e(this,"_callChannelListeners",function(f){var v=s,x=[];v.listeners.all&&x.push.apply(x,Yi(v.listeners.all)),v.listeners[f.type]&&x.push.apply(x,Yi(v.listeners[f.type]));for(var O=0,A=x;O<A.length;O++){var L=A[O];typeof L!="string"&&L(f)}}),_e(this,"_channelURL",function(){if(!s.id)throw new Error("channel id is not defined");return"".concat(s.getClient().baseURL,"/channels/").concat(s.type,"/").concat(s.id)});var l=/^[\w_-]+$/,d=/^[\w!_-]+$/;if(!l.test(t))throw new Error("Invalid chat type ".concat(t,', letters, numbers and "_-" are allowed'));if(typeof i=="string"&&!d.test(i))throw new Error("Invalid chat id ".concat(i,', letters, numbers and "!-_" are allowed'));this._client=n,this.type=t,this.id=i,this.data=r,this._data=dn({},r),this.cid="".concat(t,":").concat(i),this.listeners={},this.state=new vG(this),this.initialized=!1,this.offlineMode=!1,this.lastTypingEvent=null,this.isTyping=!1,this.disconnected=!1}return vo(e,[{key:"getClient",value:function(){if(this.disconnected===!0)throw Error("You can't use a channel after client.disconnect() was called");return this._client}},{key:"getConfig",value:function(){var t=this.getClient();return t.configs[this.cid]}},{key:"sendMessage",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.getClient().post(this._channelURL()+"/message",dn({message:r},s));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"sendFile",value:function(t,i,r,s){return this.getClient().sendFile("".concat(this._channelURL(),"/file"),t,i,r,s)}},{key:"sendImage",value:function(t,i,r,s){return this.getClient().sendFile("".concat(this._channelURL(),"/image"),t,i,r,s)}},{key:"deleteFile",value:function(t){return this.getClient().delete("".concat(this._channelURL(),"/file"),{url:t})}},{key:"deleteImage",value:function(t){return this.getClient().delete("".concat(this._channelURL(),"/image"),{url:t})}},{key:"sendEvent",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._checkInitialized(),l.next=3,this.getClient().post(this._channelURL()+"/event",{event:r});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"search",value:function(){var n=De(W.default.mark(function i(r){var s,l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(s=d.length>1&&d[1]!==void 0?d[1]:{},!(s.offset&&s.next)){v.next=3;break}throw Error("Cannot specify offset with next");case 3:if(l=dn(dn({filter_conditions:{cid:this.cid}},s),{},{sort:s.sort?Ha(s.sort):void 0}),typeof r!="string"){v.next=8;break}l.query=r,v.next=13;break;case 8:if(br(r)!=="object"){v.next=12;break}l.message_filter_conditions=r,v.next=13;break;case 12:throw Error("Invalid type ".concat(br(r)," for query parameter"));case 13:return v.next=15,this.getClient().wsPromise;case 15:return v.next=17,this.getClient().get(this.getClient().baseURL+"/search",{payload:l});case 17:return v.abrupt("return",v.sent);case 18:case"end":return v.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"queryMembers",value:function(){var n=De(W.default.mark(function i(r){var s,l,d,f,v,x,O=arguments;return W.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return l=O.length>1&&O[1]!==void 0?O[1]:[],d=O.length>2&&O[2]!==void 0?O[2]:{},v=this.type,this.id?f=this.id:(s=this.data)!==null&&s!==void 0&&s.members&&Array.isArray(this.data.members)&&(x=this.data.members),L.next=6,this.getClient().get(this.getClient().baseURL+"/members",{payload:dn({type:v,id:f,members:x,sort:Ha(l),filter_conditions:r},d)});case 6:return L.abrupt("return",L.sent);case 7:case"end":return L.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"sendReaction",value:function(){var n=De(W.default.mark(function i(r,s,l){return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(r){f.next=2;break}throw Error("Message id is missing");case 2:if(!(!s||Object.keys(s).length===0)){f.next=4;break}throw Error("Reaction object is missing");case 4:return f.next=6,this.getClient().post(this.getClient().baseURL+"/messages/".concat(r,"/reaction"),dn({reaction:s},l));case 6:return f.abrupt("return",f.sent);case 7:case"end":return f.stop()}},i,this)}));function t(i,r,s){return n.apply(this,arguments)}return t}()},{key:"deleteReaction",value:function(t,i,r){if(this._checkInitialized(),!i||!t)throw Error("Deleting a reaction requires specifying both the message and reaction type");var s=this.getClient().baseURL+"/messages/".concat(t,"/reaction/").concat(i);return r?this.getClient().delete(s,{user_id:r}):this.getClient().delete(s,{})}},{key:"update",value:function(){var n=De(W.default.mark(function i(){var r,s,l,d,f=arguments;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return r=f.length>0&&f[0]!==void 0?f[0]:{},s=f.length>1?f[1]:void 0,l=f.length>2?f[2]:void 0,d=["config","cid","created_by","id","member_count","type","created_at","updated_at","last_message_at","own_capabilities"],d.forEach(function(O){delete r[O]}),x.next=7,this._update(dn({message:s,data:r},l));case 7:return x.abrupt("return",x.sent);case 8:case"end":return x.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"updatePartial",value:function(){var n=De(W.default.mark(function i(r){var s,l,d,f;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.getClient().patch(this._channelURL(),r);case 2:return d=x.sent,f=Yi(d.channel.own_capabilities||[]).sort().join()!==Yi(Array.isArray((s=this.data)===null||s===void 0?void 0:s.own_capabilities)?(l=this.data)===null||l===void 0?void 0:l.own_capabilities:[]).sort().join(),this.data=d.channel,f&&this.getClient().dispatchEvent({type:"capabilities.changed",cid:this.cid,own_capabilities:d.channel.own_capabilities}),x.abrupt("return",d);case 7:case"end":return x.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"enableSlowMode",value:function(){var n=De(W.default.mark(function i(r){var s;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.getClient().post(this._channelURL(),{cooldown:r});case 2:return s=d.sent,this.data=s.channel,d.abrupt("return",s);case 5:case"end":return d.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"disableSlowMode",value:function(){var n=De(W.default.mark(function i(){var r;return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.getClient().post(this._channelURL(),{cooldown:0});case 2:return r=l.sent,this.data=r.channel,l.abrupt("return",r);case 5:case"end":return l.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"delete",value:function(){var n=De(W.default.mark(function i(){var r,s=arguments;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=s.length>0&&s[0]!==void 0?s[0]:{},d.next=3,this.getClient().delete(this._channelURL(),dn({},r));case 3:return d.abrupt("return",d.sent);case 4:case"end":return d.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"truncate",value:function(){var n=De(W.default.mark(function i(){var r,s=arguments;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=s.length>0&&s[0]!==void 0?s[0]:{},d.next=3,this.getClient().post(this._channelURL()+"/truncate",r);case 3:return d.abrupt("return",d.sent);case 4:case"end":return d.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"acceptInvite",value:function(){var n=De(W.default.mark(function i(){var r,s=arguments;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=s.length>0&&s[0]!==void 0?s[0]:{},d.next=3,this._update(dn({accept_invite:!0},r));case 3:return d.abrupt("return",d.sent);case 4:case"end":return d.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"rejectInvite",value:function(){var n=De(W.default.mark(function i(){var r,s=arguments;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=s.length>0&&s[0]!==void 0?s[0]:{},d.next=3,this._update(dn({reject_invite:!0},r));case 3:return d.abrupt("return",d.sent);case 4:case"end":return d.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"addMembers",value:function(){var n=De(W.default.mark(function i(r,s){var l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=d.length>2&&d[2]!==void 0?d[2]:{},v.next=3,this._update(dn({add_members:r,message:s},l));case 3:return v.abrupt("return",v.sent);case 4:case"end":return v.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"addModerators",value:function(){var n=De(W.default.mark(function i(r,s){var l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=d.length>2&&d[2]!==void 0?d[2]:{},v.next=3,this._update(dn({add_moderators:r,message:s},l));case 3:return v.abrupt("return",v.sent);case 4:case"end":return v.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"assignRoles",value:function(){var n=De(W.default.mark(function i(r,s){var l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=d.length>2&&d[2]!==void 0?d[2]:{},v.next=3,this._update(dn({assign_roles:r,message:s},l));case 3:return v.abrupt("return",v.sent);case 4:case"end":return v.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"inviteMembers",value:function(){var n=De(W.default.mark(function i(r,s){var l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=d.length>2&&d[2]!==void 0?d[2]:{},v.next=3,this._update(dn({invites:r,message:s},l));case 3:return v.abrupt("return",v.sent);case 4:case"end":return v.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"removeMembers",value:function(){var n=De(W.default.mark(function i(r,s){var l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=d.length>2&&d[2]!==void 0?d[2]:{},v.next=3,this._update(dn({remove_members:r,message:s},l));case 3:return v.abrupt("return",v.sent);case 4:case"end":return v.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"demoteModerators",value:function(){var n=De(W.default.mark(function i(r,s){var l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=d.length>2&&d[2]!==void 0?d[2]:{},v.next=3,this._update(dn({demote_moderators:r,message:s},l));case 3:return v.abrupt("return",v.sent);case 4:case"end":return v.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"_update",value:function(){var n=De(W.default.mark(function i(r){var s;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.getClient().post(this._channelURL(),r);case 2:return s=d.sent,this.data=s.channel,d.abrupt("return",s);case 5:case"end":return d.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"mute",value:function(){var n=De(W.default.mark(function i(){var r,s=arguments;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=s.length>0&&s[0]!==void 0?s[0]:{},d.next=3,this.getClient().post(this.getClient().baseURL+"/moderation/mute/channel",dn({channel_cid:this.cid},r));case 3:return d.abrupt("return",d.sent);case 4:case"end":return d.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"unmute",value:function(){var n=De(W.default.mark(function i(){var r,s=arguments;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=s.length>0&&s[0]!==void 0?s[0]:{},d.next=3,this.getClient().post(this.getClient().baseURL+"/moderation/unmute/channel",dn({channel_cid:this.cid},r));case 3:return d.abrupt("return",d.sent);case 4:case"end":return d.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"muteStatus",value:function(){return this._checkInitialized(),this.getClient()._muteStatus(this.cid)}},{key:"sendAction",value:function(t,i){if(this._checkInitialized(),!t)throw Error("Message id is missing");return this.getClient().post(this.getClient().baseURL+"/messages/".concat(t,"/action"),{message_id:t,form_data:i,id:this.id,type:this.type})}},{key:"keystroke",value:function(){var n=De(W.default.mark(function i(r,s){var l,d;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this._isTypingIndicatorsEnabled()){v.next=2;break}return v.abrupt("return");case 2:if(l=new Date,d=this.lastTypingEvent&&l.getTime()-this.lastTypingEvent.getTime(),this.lastKeyStroke=l,this.isTyping=!0,!(d===null||d>2e3)){v.next=10;break}return this.lastTypingEvent=new Date,v.next=10,this.sendEvent(dn({type:"typing.start",parent_id:r},s||{}));case 10:case"end":return v.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"stopTyping",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this._isTypingIndicatorsEnabled()){d.next=2;break}return d.abrupt("return");case 2:return this.lastTypingEvent=null,this.isTyping=!1,d.next=6,this.sendEvent(dn({type:"typing.stop",parent_id:r},s||{}));case 6:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"_isTypingIndicatorsEnabled",value:function(){var t,i,r,s,l;return(t=this.getConfig())!==null&&t!==void 0&&t.typing_events?(i=(r=this.getClient().user)===null||r===void 0||(s=r.privacy_settings)===null||s===void 0||(l=s.typing_indicators)===null||l===void 0?void 0:l.enabled)!==null&&i!==void 0?i:!0:!1}},{key:"lastMessage",value:function(){var t=this.state.latestMessages.length-5;t<0&&(t=0);var i=this.state.latestMessages.length+1,r=this.state.latestMessages.slice(t,i);return r.sort(function(s,l){return l.created_at.getTime()-s.created_at.getTime()}),r[0]}},{key:"markRead",value:function(){var n=De(W.default.mark(function i(){var r,s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(s=l.length>0&&l[0]!==void 0?l[0]:{},this._checkInitialized(),!(!((r=this.getConfig())!==null&&r!==void 0&&r.read_events)&&!this.getClient()._isUsingServerAuth())){f.next=4;break}return f.abrupt("return",Promise.resolve(null));case 4:return f.next=6,this.getClient().post(this._channelURL()+"/read",dn({},s));case 6:return f.abrupt("return",f.sent);case 7:case"end":return f.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"markUnread",value:function(){var n=De(W.default.mark(function i(r){var s;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this._checkInitialized(),!(!((s=this.getConfig())!==null&&s!==void 0&&s.read_events)&&!this.getClient()._isUsingServerAuth())){d.next=3;break}return d.abrupt("return",Promise.resolve(null));case 3:return d.next=5,this.getClient().post(this._channelURL()+"/unread",dn({},r));case 5:return d.abrupt("return",d.sent);case 6:case"end":return d.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"clean",value:function(){if(this.lastKeyStroke){var t=new Date,i=t.getTime()-this.lastKeyStroke.getTime();i>1e3&&this.isTyping&&iG(this.stopTyping(),"stop typing event")}this.state.clean()}},{key:"watch",value:function(){var n=De(W.default.mark(function i(r){var s,l,d;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return s={state:!0,watch:!0,presence:!1},v.next=3,this.getClient().wsPromise;case 3:return this.getClient()._hasConnectionID()||(s.watch=!1),l=dn(dn({},s),r),v.next=7,this.query(l,"latest");case 7:return d=v.sent,this.initialized=!0,this.data=d.channel,this._client.logger("info","channel:watch() - started watching channel ".concat(this.cid),{tags:["channel"],channel:this}),v.abrupt("return",d);case 12:case"end":return v.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"stopWatching",value:function(){var n=De(W.default.mark(function i(){var r;return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.getClient().post(this._channelURL()+"/stop-watching",{});case 2:return r=l.sent,this._client.logger("info","channel:watch() - stopped watching channel ".concat(this.cid),{tags:["channel"],channel:this}),l.abrupt("return",r);case 5:case"end":return l.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"getReplies",value:function(){var n=De(W.default.mark(function i(r,s,l){var d,f;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return d=l?Ha(l):void 0,x.next=3,this.getClient().get(this.getClient().baseURL+"/messages/".concat(r,"/replies"),dn({sort:d},s));case 3:return f=x.sent,f.messages&&this.state.addMessagesSorted(f.messages),x.abrupt("return",f);case 6:case"end":return x.stop()}},i,this)}));function t(i,r,s){return n.apply(this,arguments)}return t}()},{key:"getPinnedMessages",value:function(){var n=De(W.default.mark(function i(r){var s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=l.length>1&&l[1]!==void 0?l[1]:[],f.next=3,this.getClient().get(this.getClient().baseURL+"/channels/".concat(this.type,"/").concat(this.id,"/pinned_messages"),{payload:dn(dn({},r),{},{sort:Ha(s)})});case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"getReactions",value:function(t,i){return this.getClient().get(this.getClient().baseURL+"/messages/".concat(t,"/reactions"),dn({},i))}},{key:"getMessagesById",value:function(t){return this.getClient().get(this._channelURL()+"/messages",{ids:t.join(",")})}},{key:"lastRead",value:function(){var t=this.getClient(),i=t.userID;if(i)return this.state.read[i]?this.state.read[i].last_read:null}},{key:"_countMessageAsUnread",value:function(t){var i,r,s,l;return!(t.shadowed||t.silent||t.parent_id&&!t.show_in_channel||((i=t.user)===null||i===void 0?void 0:i.id)===this.getClient().userID||(r=t.user)!==null&&r!==void 0&&r.id&&this.getClient().userMuteStatus(t.user.id)||t.type==="system"||Array.isArray((s=this.data)===null||s===void 0?void 0:s.own_capabilities)&&!((l=this.data)!==null&&l!==void 0&&l.own_capabilities.includes("read-events"))||this.muteStatus().muted)}},{key:"countUnread",value:function(t){if(!t)return this.state.unreadCount;for(var i=0,r=0;r<this.state.latestMessages.length;r+=1){var s=this.state.latestMessages[r];s.created_at>t&&this._countMessageAsUnread(s)&&i++}return i}},{key:"countUnreadMentions",value:function(){for(var t=this.lastRead(),i=this.getClient().userID,r=0,s=0;s<this.state.latestMessages.length;s+=1){var l,d=this.state.latestMessages[s];this._countMessageAsUnread(d)&&(!t||d.created_at>t)&&(l=d.mentioned_users)!==null&&l!==void 0&&l.some(function(f){return f.id===i})&&r++}return r}},{key:"query",value:function(){var n=De(W.default.mark(function i(r){var s,l,d,f,v,x,O,A,L,U,te=arguments;return W.default.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return d=te.length>1&&te[1]!==void 0?te[1]:"current",fe.next=3,this.getClient().wsPromise;case 3:return f="".concat(this.getClient().baseURL,"/channels/").concat(this.type),this.id&&(f+="/".concat(this.id)),fe.next=7,this.getClient().post(f+"/query",dn({data:this._data,state:!0},r));case 7:return v=fe.sent,this.id||(this.id=v.channel.id,this.cid=v.channel.cid,x=v.members.map(function(ye){var Re;return ye.user_id||((Re=ye.user)===null||Re===void 0?void 0:Re.id)}).sort().join(","),O="".concat(this.type,":!members-").concat(x),O in this.getClient().activeChannels&&delete this.getClient().activeChannels[O],this.cid in this.getClient().activeChannels||(this.getClient().activeChannels[this.cid]=this)),this.getClient()._addChannelConfig(v.channel),A=this._initializeState(v,d),L=A.messageSet,U=Yi(v.channel.own_capabilities||[]).sort().join()!==Yi(Array.isArray((s=this.data)===null||s===void 0?void 0:s.own_capabilities)?(l=this.data)===null||l===void 0?void 0:l.own_capabilities:[]).sort().join(),this.data=v.channel,this.offlineMode=!1,U&&this.getClient().dispatchEvent({type:"capabilities.changed",cid:this.cid,own_capabilities:v.channel.own_capabilities}),this.getClient().dispatchEvent({type:"channels.queried",queriedChannels:{channels:[v],isLatestMessageSet:L.isLatest}}),fe.abrupt("return",v);case 17:case"end":return fe.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"banUser",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this._checkInitialized(),d.next=3,this.getClient().banUser(r,dn(dn({},s),{},{type:this.type,id:this.id}));case 3:return d.abrupt("return",d.sent);case 4:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"hide",value:function(){var n=De(W.default.mark(function i(){var r,s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r=l.length>0&&l[0]!==void 0?l[0]:null,s=l.length>1&&l[1]!==void 0?l[1]:!1,this._checkInitialized(),f.next=5,this.getClient().post("".concat(this._channelURL(),"/hide"),{user_id:r,clear_history:s});case 5:return f.abrupt("return",f.sent);case 6:case"end":return f.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"show",value:function(){var n=De(W.default.mark(function i(){var r,s=arguments;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=s.length>0&&s[0]!==void 0?s[0]:null,this._checkInitialized(),d.next=4,this.getClient().post("".concat(this._channelURL(),"/show"),{user_id:r});case 4:return d.abrupt("return",d.sent);case 5:case"end":return d.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"unbanUser",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._checkInitialized(),l.next=3,this.getClient().unbanUser(r,{type:this.type,id:this.id});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"shadowBan",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this._checkInitialized(),d.next=3,this.getClient().shadowBan(r,dn(dn({},s),{},{type:this.type,id:this.id}));case 3:return d.abrupt("return",d.sent);case 4:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"removeShadowBan",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._checkInitialized(),l.next=3,this.getClient().removeShadowBan(r,{type:this.type,id:this.id});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"createCall",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.getClient().post(this._channelURL()+"/call",r);case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"vote",value:function(){var n=De(W.default.mark(function i(r,s,l){return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getClient().castPollVote(r,s,l);case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},i,this)}));function t(i,r,s){return n.apply(this,arguments)}return t}()},{key:"removeVote",value:function(){var n=De(W.default.mark(function i(r,s,l){return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getClient().removePollVote(r,s,l);case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},i,this)}));function t(i,r,s){return n.apply(this,arguments)}return t}()},{key:"on",value:function(t,i){var r=this,s=i?t:"all",l=i||t;return s in this.listeners||(this.listeners[s]=[]),this._client.logger("info","Attaching listener for ".concat(s," event on channel ").concat(this.cid),{tags:["event","channel"],channel:this}),this.listeners[s].push(l),{unsubscribe:function(){r._client.logger("info","Removing listener for ".concat(s," event from channel ").concat(r.cid),{tags:["event","channel"],channel:r}),r.listeners[s]=r.listeners[s].filter(function(f){return f!==l})}}}},{key:"off",value:function(t,i){var r=i?t:"all",s=i||t;r in this.listeners||(this.listeners[r]=[]),this._client.logger("info","Removing listener for ".concat(r," event from channel ").concat(this.cid),{tags:["event","channel"],channel:this}),this.listeners[r]=this.listeners[r].filter(function(l){return l!==s})}},{key:"_handleChannelEvent",value:function(t){var i,r,s,l,d,f,v,x,O,A,L,U,te=this;this._client.logger("info","channel:_handleChannelEvent - Received event of type { ".concat(t.type," } on ").concat(this.cid),{tags:["event","channel"],channel:this});var ce=te.state;switch(t.type){case"typing.start":(i=t.user)!==null&&i!==void 0&&i.id&&(ce.typing[t.user.id]=t);break;case"typing.stop":(r=t.user)!==null&&r!==void 0&&r.id&&delete ce.typing[t.user.id];break;case"message.read":if((s=t.user)!==null&&s!==void 0&&s.id&&t.created_at){var fe,ye;ce.read[t.user.id]={last_read:new Date(t.created_at),last_read_message_id:t.last_read_message_id,user:t.user,unread_messages:0},((fe=t.user)===null||fe===void 0?void 0:fe.id)===((ye=this.getClient().user)===null||ye===void 0?void 0:ye.id)&&(ce.unreadCount=0)}break;case"user.watching.start":case"user.updated":(l=t.user)!==null&&l!==void 0&&l.id&&(ce.watchers[t.user.id]=t.user);break;case"user.watching.stop":(d=t.user)!==null&&d!==void 0&&d.id&&delete ce.watchers[t.user.id];break;case"message.deleted":t.message&&(this._extendEventWithOwnReactions(t),t.hard_delete?ce.removeMessage(t.message):ce.addMessageSorted(t.message,!1,!1),ce.removeQuotedMessageReferences(t.message),t.message.pinned&&ce.removePinnedMessage(t.message));break;case"message.new":if(t.message){var Re,Ae,We,ft=((Re=t.user)===null||Re===void 0?void 0:Re.id)===((Ae=this.getClient().user)===null||Ae===void 0?void 0:Ae.id),Et=t.message.parent_id&&!t.message.show_in_channel;(this.state.isUpToDate||Et)&&ce.addMessageSorted(t.message,ft),t.message.pinned&&ce.addPinnedMessage(t.message);var Pt=ft||Et;if(Pt)break;if((We=t.user)!==null&&We!==void 0&&We.id)for(var rt in ce.read)rt===t.user.id?ce.read[t.user.id]={last_read:new Date(t.created_at),user:t.user,unread_messages:0}:ce.read[rt].unread_messages+=1;this._countMessageAsUnread(t.message)&&(ce.unreadCount=ce.unreadCount+1)}break;case"message.updated":case"message.undeleted":t.message&&(this._extendEventWithOwnReactions(t),ce.addMessageSorted(t.message,!1,!1),t.message.pinned?ce.addPinnedMessage(t.message):ce.removePinnedMessage(t.message));break;case"channel.truncated":if((f=t.channel)!==null&&f!==void 0&&f.truncated_at){var nn=+new Date(t.channel.truncated_at);ce.messageSets.forEach(function(Nn,Ui){Nn.messages.forEach(function(Li){var Ci=Li.created_at,js=Li.id;nn>+Ci&&ce.removeMessage({id:js,messageSetIndex:Ui})})}),ce.pinnedMessages.forEach(function(Nn){var Ui=Nn.id,Li=Nn.created_at;nn>+Li&&ce.removePinnedMessage({id:Ui})})}else ce.clearMessages();ce.unreadCount=0,t.message&&(ce.addMessageSorted(t.message),t.message.pinned&&ce.addPinnedMessage(t.message));break;case"member.added":case"member.updated":(v=t.member)!==null&&v!==void 0&&v.user_id&&(ce.members[t.member.user_id]=t.member);break;case"member.removed":(x=t.user)!==null&&x!==void 0&&x.id&&delete ce.members[t.user.id];break;case"notification.mark_unread":{var Qt,st,Je,Ye=((Qt=t.user)===null||Qt===void 0?void 0:Qt.id)===((st=this.getClient().user)===null||st===void 0?void 0:st.id);if(!(Ye&&t.user))break;var lt=(Je=t.unread_messages)!==null&&Je!==void 0?Je:0;ce.read[t.user.id]={first_unread_message_id:t.first_unread_message_id,last_read:new Date(t.last_read_at),last_read_message_id:t.last_read_message_id,user:t.user,unread_messages:lt},ce.unreadCount=lt;break}case"channel.updated":if(t.channel){var Te,Se,Pe,Ke,ut,yt,Yt,Jt,yn=((Te=t.channel)===null||Te===void 0?void 0:Te.frozen)!==void 0&&t.channel.frozen!==((Se=te.data)===null||Se===void 0?void 0:Se.frozen);yn&&this.query({state:!1,messages:{limit:0},watchers:{limit:0}}),te.data=dn(dn({},t.channel),{},{hidden:(Pe=(Ke=t.channel)===null||Ke===void 0?void 0:Ke.hidden)!==null&&Pe!==void 0?Pe:(ut=te.data)===null||ut===void 0?void 0:ut.hidden,own_capabilities:(yt=(Yt=t.channel)===null||Yt===void 0?void 0:Yt.own_capabilities)!==null&&yt!==void 0?yt:(Jt=te.data)===null||Jt===void 0?void 0:Jt.own_capabilities})}break;case"poll.updated":if(t.poll){var bn;ce.updatePoll(t.poll,((bn=t.message)===null||bn===void 0?void 0:bn.id)||"")}break;case"poll.vote_casted":if(t.poll_vote&&t.poll){var In;ce.addPollVote(t.poll_vote,t.poll,((In=t.message)===null||In===void 0?void 0:In.id)||"")}break;case"poll.vote_changed":if(t.poll_vote&&t.poll){var $n;ce.updatePollVote(t.poll_vote,t.poll,(($n=t.message)===null||$n===void 0?void 0:$n.id)||"")}break;case"poll.vote_removed":if(t.poll_vote&&t.poll){var Ln;ce.removePollVote(t.poll_vote,t.poll,((Ln=t.message)===null||Ln===void 0?void 0:Ln.id)||"")}break;case"poll.closed":t.message&&ce.addMessageSorted(t.message,!1,!1);break;case"reaction.new":t.message&&t.reaction&&(t.message=ce.addReaction(t.reaction,t.message));break;case"reaction.deleted":t.reaction&&(t.message=ce.removeReaction(t.reaction,t.message));break;case"reaction.updated":t.reaction&&(t.message=ce.addReaction(t.reaction,t.message,!0));break;case"channel.hidden":te.data=dn(dn({},te.data),{},{hidden:!0}),t.clear_history&&ce.clearMessages();break;case"channel.visible":te.data=dn(dn({},te.data),{},{hidden:!1});break;case"user.banned":if(!((O=t.user)!==null&&O!==void 0&&O.id))break;ce.members[t.user.id]=dn(dn({},ce.members[t.user.id]||{}),{},{shadow_banned:!!t.shadow,banned:!t.shadow,user:dn(dn({},((A=ce.members[t.user.id])===null||A===void 0?void 0:A.user)||{}),t.user)});break;case"user.unbanned":if(!((L=t.user)!==null&&L!==void 0&&L.id))break;ce.members[t.user.id]=dn(dn({},ce.members[t.user.id]||{}),{},{shadow_banned:!1,banned:!1,user:dn(dn({},((U=ce.members[t.user.id])===null||U===void 0?void 0:U.user)||{}),t.user)});break}t.watcher_count!==void 0&&(te.state.watcher_count=t.watcher_count)}},{key:"_checkInitialized",value:function(){if(!this.initialized&&!this.offlineMode&&!this.getClient()._isUsingServerAuth())throw Error("Channel ".concat(this.cid," hasn't been initialized yet. Make sure to call .watch() and wait for it to resolve"))}},{key:"_initializeState",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"latest",r=this.getClient(),s=r.state,l=r.user,d=r.userID;if(t.members){var f=QD(t.members),v;try{for(f.s();!(v=f.n()).done;){var x=v.value;x.user&&s.updateUserReference(x.user,this.cid)}}catch(ft){f.e(ft)}finally{f.f()}}this.state.membership=t.membership||{};var O=t.messages||[];this.state.messages||this.state.initMessages();var A=this.state.addMessagesSorted(O,!1,!0,!0,i),L=A.messageSet;if(this.state.pinnedMessages||(this.state.pinnedMessages=[]),this.state.addPinnedMessages(t.pinned_messages||[]),t.pending_messages&&(this.state.pending_messages=t.pending_messages),t.watcher_count!==void 0&&(this.state.watcher_count=t.watcher_count),t.watchers){var U=QD(t.watchers),te;try{for(U.s();!(te=U.n()).done;){var ce=te.value;ce&&(s.updateUserReference(ce,this.cid),this.state.watchers[ce.id]=ce)}}catch(ft){U.e(ft)}finally{U.f()}}if(d!=null){var fe=this.state.last_message_at||new Date;l&&(this.state.read[l.id]={user:l,last_read:fe,unread_messages:0})}if(t.read){var ye=QD(t.read),Re;try{for(ye.s();!(Re=ye.n()).done;){var Ae,We=Re.value;this.state.read[We.user.id]={last_read:new Date(We.last_read),last_read_message_id:We.last_read_message_id,unread_messages:(Ae=We.unread_messages)!==null&&Ae!==void 0?Ae:0,user:We.user},We.user.id===l?.id&&(this.state.unreadCount=this.state.read[We.user.id].unread_messages)}}catch(ft){ye.e(ft)}finally{ye.f()}}return t.members&&(this.state.members=t.members.reduce(function(ft,Et){return Et.user&&(ft[Et.user.id]=Et),ft},{})),{messageSet:L}}},{key:"_extendEventWithOwnReactions",value:function(t){if(t.message){var i=this.state.findMessage(t.message.id,t.message.parent_id);i&&(t.message.own_reactions=i.own_reactions)}}},{key:"_disconnect",value:function(){this._client.logger("info","channel:disconnect() - Disconnecting the channel ".concat(this.cid),{tags:["connection","channel"],channel:this}),this.disconnected=!0,this.state.setIsUpToDate(!1)}}]),e}();function bG(e,n){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=wG(e))||n&&e&&typeof e.length=="number"){t&&(e=t);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(v){throw v},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,l=!1,d;return{s:function(){t=t.call(e)},n:function(){var v=t.next();return s=v.done,v},e:function(v){l=!0,d=v},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(l)throw d}}}}function wG(e,n){if(e){if(typeof e=="string")return DF(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return DF(e,n)}}function DF(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var TF=function(){function e(){Ls(this,e),_e(this,"users",void 0),_e(this,"userChannelReferences",void 0),this.users={},this.userChannelReferences={}}return vo(e,[{key:"updateUsers",value:function(t){var i=bG(t),r;try{for(i.s();!(r=i.n()).done;){var s=r.value;this.updateUser(s)}}catch(l){i.e(l)}finally{i.f()}}},{key:"updateUser",value:function(t){t!=null&&(this.users[t.id]=t)}},{key:"updateUserReference",value:function(t,i){t!=null&&(this.updateUser(t),this.userChannelReferences[t.id]||(this.userChannelReferences[t.id]={}),this.userChannelReferences[t.id][i]=!0)}},{key:"deleteAllChannelReference",value:function(t){for(var i in this.userChannelReferences)delete this.userChannelReferences[i][t]}}]),e}();function SF(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function OF(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?SF(Object(t),!0).forEach(function(i){_e(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SF(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}var CG=function e(){Ls(this,e),_e(this,"connectionStartTimestamp",void 0),_e(this,"wsConsecutiveFailures",void 0),_e(this,"wsTotalFailures",void 0),_e(this,"instanceClientId",void 0),this.connectionStartTimestamp=null,this.wsTotalFailures=0,this.wsConsecutiveFailures=0,this.instanceClientId=Mp()},Cg=function(){var e=De(W.default.mark(function n(t,i){var r,s;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:r=3,s=0;case 2:if(!(s<r)){d.next=17;break}return d.prev=3,d.next=6,ed.post("https://chat-insights.getstream.io/insights/".concat(t),i);case 6:d.next=13;break;case 8:return d.prev=8,d.t0=d.catch(3),d.next=12,id((s+1)*3e3);case 12:return d.abrupt("continue",14);case 13:return d.abrupt("break",17);case 14:s++,d.next=2;break;case 17:case"end":return d.stop()}},n,null,[[3,8]])}));return function(t,i){return e.apply(this,arguments)}}();function xG(e,n){return OF(OF({},n),YF(e))}function YF(e){var n,t,i,r=e.client;return{ready_state:(n=e.ws)===null||n===void 0?void 0:n.readyState,url:e._buildUrl(),api_key:r.key,start_ts:r.insightMetrics.connectionStartTimestamp,end_ts:new Date().getTime(),auth_type:r.getAuthType(),token:r.tokenManager.token,user_id:r.userID,user_details:r._user,device:r.options.device,client_id:e.connectionID,ws_details:e.ws,ws_consecutive_failures:r.insightMetrics.wsConsecutiveFailures,ws_total_failures:r.insightMetrics.wsTotalFailures,request_id:e.requestID,online:typeof navigator<"u"?(t=navigator)===null||t===void 0?void 0:t.onLine:null,user_agent:typeof navigator<"u"?(i=navigator)===null||i===void 0?void 0:i.userAgent:null,instance_client_id:r.insightMetrics.instanceClientId}}function MG(e){return YF(e)}function IF(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function DG(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?IF(Object(t),!0).forEach(function(i){_e(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):IF(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}var TG=function(n){return n.code!==void 0},SG=function(n){return n.error!==void 0},OG=function(){function e(n){var t=this,i=n.client;Ls(this,e),_e(this,"client",void 0),_e(this,"connectionID",void 0),_e(this,"connectionOpen",void 0),_e(this,"consecutiveFailures",void 0),_e(this,"pingInterval",void 0),_e(this,"healthCheckTimeoutRef",void 0),_e(this,"isConnecting",void 0),_e(this,"isDisconnected",void 0),_e(this,"isHealthy",void 0),_e(this,"isResolved",void 0),_e(this,"lastEvent",void 0),_e(this,"connectionCheckTimeout",void 0),_e(this,"connectionCheckTimeoutRef",void 0),_e(this,"rejectPromise",void 0),_e(this,"requestID",void 0),_e(this,"resolvePromise",void 0),_e(this,"totalFailures",void 0),_e(this,"ws",void 0),_e(this,"wsID",void 0),_e(this,"_buildUrl",function(){var r=encodeURIComponent(t.client._buildWSPayload(t.requestID)),s=t.client.tokenManager.getToken();return"".concat(t.client.wsBaseURL,"/connect?json=").concat(r,"&api_key=").concat(t.client.key,"&authorization=").concat(s,"&stream-auth-type=").concat(t.client.getAuthType(),"&X-Stream-Client=").concat(t.client.getUserAgent())}),_e(this,"onlineStatusChanged",function(r){r.type==="offline"?(t._log("onlineStatusChanged() - Status changing to offline"),t._setHealth(!1)):r.type==="online"&&(t._log("onlineStatusChanged() - Status changing to online. isHealthy: ".concat(t.isHealthy)),t.isHealthy||t._reconnect({interval:10}))}),_e(this,"onopen",function(r){t.wsID===r&&t._log("onopen() - onopen callback",{wsID:r})}),_e(this,"onmessage",function(r,s){if(t.wsID===r){t._log("onmessage() - onmessage callback",{event:s,wsID:r});var l=typeof s.data=="string"?JSON.parse(s.data):null;if(!t.isResolved&&l){var d;if(t.isResolved=!0,l.error){var f;(f=t.rejectPromise)===null||f===void 0||f.call(t,t._errorFromWSEvent(l,!1));return}(d=t.resolvePromise)===null||d===void 0||d.call(t,l),t._setHealth(!0)}t.lastEvent=new Date,l&&l.type==="health.check"&&t.scheduleNextPing(),t.client.handleEvent(s),t.scheduleConnectionCheck()}}),_e(this,"onclose",function(r,s){if(t.wsID===r)if(t._log("onclose() - onclose callback - "+s.code,{event:s,wsID:r}),s.code===wg.WS_CLOSED_SUCCESS){var l,d=new Error("WS connection reject with error ".concat(s.reason));d.reason=s.reason,d.code=s.code,d.wasClean=s.wasClean,d.target=s.target,(l=t.rejectPromise)===null||l===void 0||l.call(t,d),t._log("onclose() - WS connection reject with error ".concat(s.reason),{event:s})}else{var f;t.consecutiveFailures+=1,t.totalFailures+=1,t._setHealth(!1),t.isConnecting=!1,(f=t.rejectPromise)===null||f===void 0||f.call(t,t._errorFromWSEvent(s)),t._log("onclose() - WS connection closed. Calling reconnect ...",{event:s}),t._reconnect()}}),_e(this,"onerror",function(r,s){var l;t.wsID===r&&(t.consecutiveFailures+=1,t.totalFailures+=1,t._setHealth(!1),t.isConnecting=!1,(l=t.rejectPromise)===null||l===void 0||l.call(t,t._errorFromWSEvent(s)),t._log("onerror() - WS connection resulted into error",{event:s}),t._reconnect())}),_e(this,"_setHealth",function(r){if(r!==t.isHealthy){if(t.isHealthy=r,t.isHealthy){t.client.dispatchEvent({type:"connection.changed",online:t.isHealthy});return}setTimeout(function(){t.isHealthy||t.client.dispatchEvent({type:"connection.changed",online:t.isHealthy})},5e3)}}),_e(this,"_errorFromWSEvent",function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,l,d,f;TG(r)&&(l=r.code,d="unknown",f=r.reason),SG(r)&&(l=r.error.code,d=r.error.StatusCode,f=r.error.message),t._log("_errorFromWSEvent() - WS failed with code ".concat(l),{event:r},"warn");var v=new Error("WS failed with code ".concat(l," and reason - ").concat(f));return v.code=l,v.StatusCode=d,v.isWSFailure=s,v}),_e(this,"_setupConnectionPromise",function(){t.isResolved=!1,t.connectionOpen=new Promise(function(r,s){t.resolvePromise=r,t.rejectPromise=s})}),_e(this,"scheduleNextPing",function(){t.healthCheckTimeoutRef&&clearTimeout(t.healthCheckTimeoutRef),t.healthCheckTimeoutRef=setTimeout(function(){var r=[{type:"health.check",client_id:t.client.clientID}];try{var s;(s=t.ws)===null||s===void 0||s.send(JSON.stringify(r))}catch{}},t.pingInterval)}),_e(this,"scheduleConnectionCheck",function(){t.connectionCheckTimeoutRef&&clearTimeout(t.connectionCheckTimeoutRef),t.connectionCheckTimeoutRef=setTimeout(function(){var r=new Date;t.lastEvent&&r.getTime()-t.lastEvent.getTime()>t.connectionCheckTimeout&&(t._log("scheduleConnectionCheck - going to reconnect"),t._setHealth(!1),t._reconnect())},t.connectionCheckTimeout)}),this.client=i,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25*1e3,this.connectionCheckTimeout=this.pingInterval+10*1e3,GF(this.onlineStatusChanged)}return vo(e,[{key:"_log",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"info";this.client.logger(r,"connection:"+t,DG({tags:["connection"]},i))}},{key:"setClient",value:function(t){this.client=t}},{key:"connect",value:function(){var n=De(W.default.mark(function i(){var r,s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(r=l.length>0&&l[0]!==void 0?l[0]:15e3,!this.isConnecting){f.next=3;break}throw Error("You've called connect twice, can only attempt 1 connection at the time");case 3:return this.isDisconnected=!1,f.prev=4,f.next=7,this._connect();case 7:s=f.sent,this.consecutiveFailures=0,this._log("connect() - Established ws connection with healthcheck: ".concat(s)),f.next=23;break;case 12:if(f.prev=12,f.t0=f.catch(4),this.isHealthy=!1,this.consecutiveFailures+=1,!(f.t0.code===wg.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())){f.next=21;break}this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0}),f.next=23;break;case 21:if(f.t0.isWSFailure){f.next=23;break}throw new Error(JSON.stringify({code:f.t0.code,StatusCode:f.t0.StatusCode,message:f.t0.message,isWSFailure:f.t0.isWSFailure}));case 23:return f.next=25,this._waitForHealthy(r);case 25:return f.abrupt("return",f.sent);case 26:case"end":return f.stop()}},i,this,[[4,12]])}));function t(){return n.apply(this,arguments)}return t}()},{key:"_waitForHealthy",value:function(){var n=De(W.default.mark(function i(){var r=this,s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=l.length>0&&l[0]!==void 0?l[0]:15e3,f.abrupt("return",Promise.race([De(W.default.mark(function v(){var x,O;return W.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:x=50,O=0;case 2:if(!(O<=s)){L.next=18;break}return L.prev=3,L.next=6,r.connectionOpen;case 6:return L.abrupt("return",L.sent);case 9:if(L.prev=9,L.t0=L.catch(3),O!==s){L.next=13;break}throw new Error(JSON.stringify({code:L.t0.code,StatusCode:L.t0.StatusCode,message:L.t0.message,isWSFailure:L.t0.isWSFailure}));case 13:return L.next=15,id(x);case 15:O+=x,L.next=2;break;case 18:case"end":return L.stop()}},v,null,[[3,9]])}))(),De(W.default.mark(function v(){return W.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,id(s);case 2:throw r.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}));case 4:case"end":return O.stop()}},v)}))()]));case 2:case"end":return f.stop()}},i)}));function t(){return n.apply(this,arguments)}return t}()},{key:"disconnect",value:function(t){var i=this;this._log("disconnect() - Closing the websocket connection for wsID ".concat(this.wsID)),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),WF(this.onlineStatusChanged),this.isHealthy=!1,this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners();var r,s=this.ws;return s&&s.close&&s.readyState===s.OPEN?(r=new Promise(function(l){var d=function(v){i._log("disconnect() - resolving isClosedPromise ".concat(v?"with":"without"," close frame"),{event:v}),l()};s.onclose=d,setTimeout(d,t??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),s.close(wg.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),r=Promise.resolve()),delete this.ws,r}},{key:"_connect",value:function(){var n=De(W.default.mark(function i(){var r,s,l,d;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(this.isConnecting||this.isDisconnected&&this.client.options.enableWSFallback)){v.next=2;break}return v.abrupt("return");case 2:return this.isConnecting=!0,this.requestID=Mp(),this.client.insightMetrics.connectionStartTimestamp=new Date().getTime(),r=!1,v.prev=6,this._log("_connect() - waiting for token"),v.next=10,this.client.tokenManager.tokenReady();case 10:r=!0,v.next=15;break;case 13:v.prev=13,v.t0=v.catch(6);case 15:if(v.prev=15,r){v.next=20;break}return this._log("_connect() - tokenProvider failed before, so going to retry"),v.next=20,this.client.tokenManager.loadToken();case 20:return this._setupConnectionPromise(),s=this._buildUrl(),this._log("_connect() - Connecting to ".concat(s),{wsURL:s,requestID:this.requestID}),this.ws=new qF.default(s),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID),v.next=30,this.connectionOpen;case 30:if(l=v.sent,this.isConnecting=!1,!l){v.next=36;break}return this.connectionID=l.connection_id,this.client.insightMetrics.wsConsecutiveFailures>0&&this.client.options.enableInsights&&(Cg("ws_success_after_failure",MG(this)),this.client.insightMetrics.wsConsecutiveFailures=0),v.abrupt("return",l);case 36:v.next=44;break;case 38:throw v.prev=38,v.t1=v.catch(15),this.isConnecting=!1,this._log("_connect() - Error - ",v.t1),this.client.options.enableInsights&&(this.client.insightMetrics.wsConsecutiveFailures++,this.client.insightMetrics.wsTotalFailures++,d=xG(this,fG(v.t1)),Cg?.("ws_fatal",d)),v.t1;case 44:case"end":return v.stop()}},i,this,[[6,13],[15,38]])}));function t(){return n.apply(this,arguments)}return t}()},{key:"_reconnect",value:function(){var n=De(W.default.mark(function i(){var r,s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(r=l.length>0&&l[0]!==void 0?l[0]:{},this._log("_reconnect() - Initiating the reconnect"),!(this.isConnecting||this.isHealthy)){f.next=5;break}return this._log("_reconnect() - Abort (1) since already connecting or healthy"),f.abrupt("return");case 5:return s=r.interval,s||(s=ab(this.consecutiveFailures)),f.next=9,id(s);case 9:if(!(this.isConnecting||this.isHealthy)){f.next=12;break}return this._log("_reconnect() - Abort (2) since already connecting or healthy"),f.abrupt("return");case 12:if(!(this.isDisconnected&&this.client.options.enableWSFallback)){f.next=15;break}return this._log("_reconnect() - Abort (3) since disconnect() is called"),f.abrupt("return");case 15:if(this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),!r.refreshToken){f.next=20;break}return f.next=20,this.client.tokenManager.loadToken();case 20:return f.prev=20,f.next=23,this._connect();case 23:return this._log("_reconnect() - Waiting for recoverCallBack"),f.next=26,this.client.recoverState();case 26:this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0,f.next=38;break;case 30:if(f.prev=30,f.t0=f.catch(20),this.isHealthy=!1,this.consecutiveFailures+=1,!(f.t0.code===wg.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())){f.next=37;break}return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),f.abrupt("return",this._reconnect({refreshToken:!0}));case 37:f.t0.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect());case 38:this._log("_reconnect() - == END ==");case 39:case"end":return f.stop()}},i,this,[[20,30]])}));function t(){return n.apply(this,arguments)}return t}()},{key:"_destroyCurrentWSConnection",value:function(){this.wsID+=1;try{var t,i;this===null||this===void 0||(t=this.ws)===null||t===void 0||t.removeAllListeners(),this===null||this===void 0||(i=this.ws)===null||i===void 0||i.close()}catch{}}}]),e}(),IG=null,EF=null;function PF(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function EG(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?PF(Object(t),!0).forEach(function(i){_e(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):PF(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}function KF(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(typeof n!="string")throw new TypeError("userId should be a string");var r=EG({user_id:n},t);throw Error("Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.");var s}function kF(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={server:!0},i=Bl({algorithm:"HS256",noTimestamp:!0},n);return IG.sign(t,e,i)}function PG(e){var n=e.split(".");if(n.length!==3)return"";var t=n[1],i=Xq(t),r=JSON.parse(i);return r.user_id}function kG(e){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",Jq(JSON.stringify({user_id:e})),"devtoken"].join(".")}function AG(e,n,t){var i=Buffer.from(n,"utf8"),r=EF.createHmac("sha256",i).update(e).digest("hex");try{return EF.timingSafeEqual(Buffer.from(r),Buffer.from(t))}catch{return!1}}var RG=function e(n){var t=this;Ls(this,e),_e(this,"loadTokenPromise",void 0),_e(this,"type",void 0),_e(this,"secret",void 0),_e(this,"token",void 0),_e(this,"tokenProvider",void 0),_e(this,"user",void 0),_e(this,"setTokenOrProvider",function(){var i=De(W.default.mark(function r(s,l){return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return t.validateToken(s,l),t.user=l,tT(s)&&(t.tokenProvider=s,t.type="provider"),typeof s=="string"&&(t.token=s,t.type="static"),!s&&t.user&&t.secret&&(t.token=KF(t.secret,l.id,{},{}),t.type="static"),f.next=7,t.loadToken();case 7:case"end":return f.stop()}},r)}));return function(r,s){return i.apply(this,arguments)}}()),_e(this,"reset",function(){t.token=void 0,t.user=void 0,t.loadTokenPromise=null}),_e(this,"validateToken",function(i,r){if(!(r&&r.anon&&!i)){if(!t.secret&&!i)throw new Error("User token can not be empty");if(i&&typeof i!="string"&&!tT(i))throw new Error("user token should either be a string or a function");if(typeof i=="string"){if(r.anon&&i==="")return;var s=PG(i);if(i!=null&&(s==null||s===""||s!==r.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}}),_e(this,"tokenReady",function(){return t.loadTokenPromise}),_e(this,"loadToken",function(){return t.loadTokenPromise=new Promise(function(){var i=De(W.default.mark(function r(s,l){return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t.type!=="static"){f.next=2;break}return f.abrupt("return",s(t.token));case 2:if(!(t.tokenProvider&&typeof t.tokenProvider!="string")){f.next=13;break}return f.prev=3,f.next=6,t.tokenProvider();case 6:t.token=f.sent,f.next=12;break;case 9:return f.prev=9,f.t0=f.catch(3),f.abrupt("return",l(new Error("Call to tokenProvider failed with message: ".concat(f.t0))));case 12:s(t.token);case 13:case"end":return f.stop()}},r,null,[[3,9]])}));return function(r,s){return i.apply(this,arguments)}}()),t.loadTokenPromise}),_e(this,"getToken",function(){if(t.token||t.user&&t.user.anon&&!t.token)return t.token;if(t.secret)return kF(t.secret);throw new Error("Both secret and user tokens are not set. Either client.connectUser wasn't called or client.disconnect was called")}),_e(this,"isStatic",function(){return t.type==="static"}),this.loadTokenPromise=null,n&&(this.secret=n),this.type="static",this.secret&&(this.token=kF(this.secret))},FG={"-1":{name:"InternalSystemError",retryable:!0},2:{name:"AccessKeyError",retryable:!1},3:{name:"AuthenticationFailedError",retryable:!0},4:{name:"InputError",retryable:!1},6:{name:"DuplicateUsernameError",retryable:!1},9:{name:"RateLimitError",retryable:!0},16:{name:"DoesNotExistError",retryable:!1},17:{name:"NotAllowedError",retryable:!1},18:{name:"EventNotSupportedError",retryable:!1},19:{name:"ChannelFeatureNotSupportedError",retryable:!1},20:{name:"MessageTooLongError",retryable:!1},21:{name:"MultipleNestingLevelError",retryable:!1},22:{name:"PayloadTooBigError",retryable:!1},23:{name:"RequestTimeoutError",retryable:!0},24:{name:"MaxHeaderSizeExceededError",retryable:!1},40:{name:"AuthErrorTokenExpired",retryable:!1},41:{name:"AuthErrorTokenNotValidYet",retryable:!1},42:{name:"AuthErrorTokenUsedBeforeIssuedAt",retryable:!1},43:{name:"AuthErrorTokenSignatureInvalid",retryable:!1},44:{name:"CustomCommandEndpointMissingError",retryable:!1},45:{name:"CustomCommandEndpointCallError",retryable:!0},46:{name:"ConnectionIDNotFoundError",retryable:!1},60:{name:"CoolDownError",retryable:!0},69:{name:"ErrWrongRegion",retryable:!1},70:{name:"ErrQueryChannelPermissions",retryable:!1},71:{name:"ErrTooManyConnections",retryable:!0},99:{name:"AppSuspendedError",retryable:!1}};function LG(e){return e.code!==void 0}function AF(e){if(!e.code)return!1;var n=FG["".concat(e.code)];return n?n.retryable:!1}function NG(e){return e.code===46}function BG(e){if(typeof e.isWSFailure=="boolean")return e.isWSFailure;try{return JSON.parse(e.message).isWSFailure}catch{return!1}}function jG(e){return!e.status||e.status<200||300<=e.status}function RF(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function XD(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?RF(Object(t),!0).forEach(function(i){_e(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):RF(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}var Vr=function(e){return e.Closed="CLOSED",e.Connected="CONNECTED",e.Connecting="CONNECTING",e.Disconnected="DISCONNECTED",e.Init="INIT",e}(Vr||{}),VG=function(){function e(n){var t=this,i=n.client;Ls(this,e),_e(this,"client",void 0),_e(this,"state",void 0),_e(this,"consecutiveFailures",void 0),_e(this,"connectionID",void 0),_e(this,"cancelToken",void 0),_e(this,"_onlineStatusChanged",function(r){if(t._log("_onlineStatusChanged() - ".concat(r.type)),r.type==="offline"){var s;t._setState(Vr.Closed),(s=t.cancelToken)===null||s===void 0||s.cancel("disconnect() is called"),t.cancelToken=void 0;return}r.type==="online"&&t.state===Vr.Closed&&t.connect(!0)}),_e(this,"_req",function(){var r=De(W.default.mark(function s(l,d,f){var v,x;return W.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return!t.cancelToken&&!l.close&&(t.cancelToken=ed.CancelToken.source()),A.prev=1,A.next=4,t.client.doAxiosRequest("get",t.client.baseURL.replace(":3030",":8900")+"/longpoll",void 0,{config:XD(XD({},d),{},{cancelToken:(v=t.cancelToken)===null||v===void 0?void 0:v.token}),params:l});case 4:return x=A.sent,t.consecutiveFailures=0,A.abrupt("return",x);case 9:if(A.prev=9,A.t0=A.catch(1),t.consecutiveFailures+=1,!(f&&AF(A.t0))){A.next=17;break}return t._log("_req() - Retryable error, retrying request"),A.next=16,id(ab(t.consecutiveFailures));case 16:return A.abrupt("return",t._req(l,d,f));case 17:throw A.t0;case 18:case"end":return A.stop()}},s,null,[[1,9]])}));return function(s,l,d){return r.apply(this,arguments)}}()),_e(this,"_poll",De(W.default.mark(function r(){var s,l,d;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(t.state!==Vr.Connected){v.next=25;break}return v.prev=1,v.next=4,t._req({},{timeout:3e4},!0);case 4:if(l=v.sent,(s=l.events)!==null&&s!==void 0&&s.length)for(d=0;d<l.events.length;d++)t.client.dispatchEvent(l.events[d]);v.next=23;break;case 8:if(v.prev=8,v.t0=v.catch(1),!ed.isCancel(v.t0)){v.next=13;break}return t._log("_poll() - axios canceled request"),v.abrupt("return");case 13:if(!NG(v.t0)){v.next=18;break}return t._log("_poll() - ConnectionID error, connecting without ID..."),t._setState(Vr.Disconnected),t.connect(!0),v.abrupt("return");case 18:if(!(LG(v.t0)&&!AF(v.t0))){v.next=21;break}return t._setState(Vr.Closed),v.abrupt("return");case 21:return v.next=23,id(ab(t.consecutiveFailures));case 23:v.next=0;break;case 25:case"end":return v.stop()}},r,null,[[1,8]])}))),_e(this,"connect",De(W.default.mark(function r(){var s,l,d,f=arguments;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(s=f.length>0&&f[0]!==void 0?f[0]:!1,t.state!==Vr.Connecting){x.next=4;break}return t._log("connect() - connecting already in progress",{reconnect:s},"warn"),x.abrupt("return");case 4:if(t.state!==Vr.Connected){x.next=7;break}return t._log("connect() - already connected and polling",{reconnect:s},"warn"),x.abrupt("return");case 7:return t._setState(Vr.Connecting),t.connectionID=void 0,x.prev=9,x.next=12,t._req({json:t.client._buildWSPayload()},{timeout:8e3},s);case 12:return l=x.sent,d=l.event,t._setState(Vr.Connected),t.connectionID=d.connection_id,t.client.dispatchEvent(d),t._poll(),s&&t.client.recoverState(),x.abrupt("return",d);case 22:throw x.prev=22,x.t0=x.catch(9),t._setState(Vr.Closed),x.t0;case 26:case"end":return x.stop()}},r,null,[[9,22]])}))),_e(this,"isHealthy",function(){return!!t.connectionID&&t.state===Vr.Connected}),_e(this,"disconnect",De(W.default.mark(function r(){var s,l,d,f=arguments;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return l=f.length>0&&f[0]!==void 0?f[0]:2e3,WF(t._onlineStatusChanged),t._setState(Vr.Disconnected),(s=t.cancelToken)===null||s===void 0||s.cancel("disconnect() is called"),t.cancelToken=void 0,d=t.connectionID,t.connectionID=void 0,x.prev=7,x.next=10,t._req({close:!0,connection_id:d},{timeout:l},!1);case 10:t._log("disconnect() - Closed connectionID"),x.next=16;break;case 13:x.prev=13,x.t0=x.catch(7),t._log("disconnect() - Failed",{err:x.t0},"error");case 16:case"end":return x.stop()}},r,null,[[7,13]])}))),this.client=i,this.state=Vr.Init,this.consecutiveFailures=0,GF(this._onlineStatusChanged)}return vo(e,[{key:"_log",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"info";this.client.logger(r,"WSConnectionFallback:"+t,XD({tags:["connection_fallback","connection"]},i))}},{key:"_setState",value:function(t){this._log("_setState() - ".concat(t)),this.state===Vr.Connecting&&t===Vr.Connected&&this.client.dispatchEvent({type:"connection.changed",online:!0}),(t===Vr.Closed||t===Vr.Disconnected)&&this.client.dispatchEvent({type:"connection.changed",online:!1}),this.state=t}}]),e}(),FF=function(){function e(n,t,i){Ls(this,e),_e(this,"id",void 0),_e(this,"data",void 0),_e(this,"client",void 0),this.client=n,this.id=t,this.data=i}return vo(e,[{key:"create",value:function(){var n=De(W.default.mark(function i(){var r,s,l,d,f,v,x,O,A,L;return W.default.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return A={id:this.id,message_template:(r=this.data)===null||r===void 0?void 0:r.message_template,segment_ids:(s=this.data)===null||s===void 0?void 0:s.segment_ids,sender_id:(l=this.data)===null||l===void 0?void 0:l.sender_id,channel_template:(d=this.data)===null||d===void 0?void 0:d.channel_template,create_channels:(f=this.data)===null||f===void 0?void 0:f.create_channels,description:(v=this.data)===null||v===void 0?void 0:v.description,name:(x=this.data)===null||x===void 0?void 0:x.name,user_ids:(O=this.data)===null||O===void 0?void 0:O.user_ids},te.next=3,this.client.createCampaign(A);case 3:return L=te.sent,this.id=L.campaign.id,this.data=L.campaign,te.abrupt("return",L);case 7:case"end":return te.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"verifyCampaignId",value:function(){if(!this.id)throw new Error("Campaign id is missing. Either create the campaign using campaign.create() or set the id during instantiation - const campaign = client.campaign(id)")}},{key:"start",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.verifyCampaignId(),l.next=3,this.client.startCampaign(this.id,r);case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"update",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.verifyCampaignId(),l.abrupt("return",this.client.updateCampaign(this.id,r));case 2:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"delete",value:function(){var n=De(W.default.mark(function i(){return W.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return this.verifyCampaignId(),s.next=3,this.client.deleteCampaign(this.id);case 3:return s.abrupt("return",s.sent);case 4:case"end":return s.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"stop",value:function(){var n=De(W.default.mark(function i(){return W.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return this.verifyCampaignId(),s.abrupt("return",this.client.stopCampaign(this.id));case 2:case"end":return s.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"get",value:function(){var n=De(W.default.mark(function i(){return W.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return this.verifyCampaignId(),s.abrupt("return",this.client.getCampaign(this.id));case 2:case"end":return s.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()}]),e}(),LF=function(){function e(n,t,i,r){Ls(this,e),_e(this,"type",void 0),_e(this,"id",void 0),_e(this,"client",void 0),_e(this,"data",void 0),this.client=n,this.type=t,this.id=i,this.data=r}return vo(e,[{key:"create",value:function(){var n=De(W.default.mark(function i(){var r,s,l,d,f,v;return W.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return v={name:(r=this.data)===null||r===void 0?void 0:r.name,filter:(s=this.data)===null||s===void 0?void 0:s.filter,description:(l=this.data)===null||l===void 0?void 0:l.description,all_sender_channels:(d=this.data)===null||d===void 0?void 0:d.all_sender_channels,all_users:(f=this.data)===null||f===void 0?void 0:f.all_users},O.abrupt("return",this.client.createSegment(this.type,this.id,v));case 2:case"end":return O.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"verifySegmentId",value:function(){if(!this.id)throw new Error("Segment id is missing. Either create the segment using segment.create() or set the id during instantiation - const segment = client.segment(id)")}},{key:"get",value:function(){var n=De(W.default.mark(function i(){return W.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return this.verifySegmentId(),s.abrupt("return",this.client.getSegment(this.id));case 2:case"end":return s.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"update",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.verifySegmentId(),l.abrupt("return",this.client.updateSegment(this.id,r));case 2:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"addTargets",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.verifySegmentId(),l.abrupt("return",this.client.addSegmentTargets(this.id,r));case 2:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"removeTargets",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.verifySegmentId(),l.abrupt("return",this.client.removeSegmentTargets(this.id,r));case 2:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"delete",value:function(){var n=De(W.default.mark(function i(){return W.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return this.verifySegmentId(),s.abrupt("return",this.client.deleteSegment(this.id));case 2:case"end":return s.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"targetExists",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.verifySegmentId(),l.abrupt("return",this.client.segmentTargetExists(this.id,r));case 2:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"queryTargets",value:function(){var n=De(W.default.mark(function i(){var r,s,l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return r=d.length>0&&d[0]!==void 0?d[0]:{},s=d.length>1&&d[1]!==void 0?d[1]:[],l=d.length>2&&d[2]!==void 0?d[2]:{},this.verifySegmentId(),v.abrupt("return",this.client.querySegmentTargets(this.id,r,s,l));case 5:case"end":return v.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()}]),e}();function zG(e){var n=UG();return function(){var i=Ul(e),r;if(n){var s=Ul(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return ZD(this,r)}}function UG(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $G=function(e){WD(t,e);var n=zG(t);function t(){var i;Ls(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return i=n.call.apply(n,[this].concat(s)),_e(td(i),"code",void 0),_e(td(i),"response",void 0),_e(td(i),"status",void 0),i}return t}(vg(Error));var HG=["parent_message_id","parent_message","latest_replies","thread_participants","reply_count","channel","read"];function NF(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function BF(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?NF(Object(t),!0).forEach(function(i){_e(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):NF(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}function qG(e,n){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=GG(e))||n&&e&&typeof e.length=="number"){t&&(e=t);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(v){throw v},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,l=!1,d;return{s:function(){t=t.call(e)},n:function(){var v=t.next();return s=v.done,v},e:function(v){l=!0,d=v},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(l)throw d}}}}function GG(e,n){if(e){if(typeof e=="string")return jF(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return jF(e,n)}}function jF(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var VF=function(){function e(n,t){Ls(this,e),_e(this,"id",void 0),_e(this,"latestReplies",[]),_e(this,"participants",[]),_e(this,"message",void 0),_e(this,"channel",void 0),_e(this,"_channel",void 0),_e(this,"replyCount",0),_e(this,"_client",void 0),_e(this,"read",{}),_e(this,"data",{});var i=t.parent_message_id,r=t.parent_message,s=t.latest_replies,l=t.thread_participants,d=t.reply_count,f=t.channel,v=t.read,x=ag(t,HG);if(this.id=i,this.message=nd(r),this.latestReplies=s.map(nd),this.participants=l,this.replyCount=d,this.channel=f,this._channel=n.channel(t.channel.type,t.channel.id),this._client=n,v){var O=qG(v),A;try{for(O.s();!(A=O.n()).done;){var L=A.value;this.read[L.user.id]=BF(BF({},L),{},{last_read:new Date(L.last_read)})}}catch(U){O.e(U)}finally{O.f()}}this.data=x}return vo(e,[{key:"getClient",value:function(){return this._client}},{key:"addReply",value:function(t){if(t.parent_id!==this.message.id)throw new Error("Message does not belong to this thread");this.latestReplies=ZF(this.latestReplies,nd(t),!0)}},{key:"updateReply",value:function(t){this.latestReplies=this.latestReplies.map(function(i){return i.id===t.id?nd(t):i})}},{key:"updateMessageOrReplyIfExists",value:function(t){if(!(!t.parent_id&&t.id!==this.message.id)&&!(t.parent_id&&t.parent_id!==this.message.id)){if(t.parent_id&&t.parent_id===this.message.id){this.updateReply(t);return}!t.parent_id&&t.id===this.message.id&&(this.message=nd(t))}}},{key:"addReaction",value:function(t,i,r){var s=this;i&&(this.latestReplies=this.latestReplies.map(function(l){return l.id===i.id?nd(s._channel.state.addReaction(t,i,r)):l}))}},{key:"removeReaction",value:function(t,i){var r=this;i&&(this.latestReplies=this.latestReplies.map(function(s){return s.id===i.id?nd(r._channel.state.removeReaction(t,i)):s}))}}]),e}(),WG=["created_at","updated_at","last_active","online"],ZG=["params","headers"];function bg(e,n){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=YG(e))||n&&e&&typeof e.length=="number"){t&&(e=t);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(v){throw v},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,l=!1,d;return{s:function(){t=t.call(e)},n:function(){var v=t.next();return s=v.done,v},e:function(v){l=!0,d=v},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(l)throw d}}}}function YG(e,n){if(e){if(typeof e=="string")return zF(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return zF(e,n)}}function zF(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function UF(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function wt(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?UF(Object(t),!0).forEach(function(i){_e(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):UF(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}function xp(e){return typeof e=="string"||e instanceof String}var nT=function(){function e(n,t,i){var r=this,s;Ls(this,e),_e(this,"_user",void 0),_e(this,"activeChannels",void 0),_e(this,"anonymous",void 0),_e(this,"persistUserOnConnectionFailure",void 0),_e(this,"axiosInstance",void 0),_e(this,"baseURL",void 0),_e(this,"browser",void 0),_e(this,"cleaningIntervalRef",void 0),_e(this,"clientID",void 0),_e(this,"configs",void 0),_e(this,"key",void 0),_e(this,"listeners",void 0),_e(this,"logger",void 0),_e(this,"recoverStateOnReconnect",void 0),_e(this,"mutedChannels",void 0),_e(this,"mutedUsers",void 0),_e(this,"node",void 0),_e(this,"options",void 0),_e(this,"secret",void 0),_e(this,"setUserPromise",void 0),_e(this,"state",void 0),_e(this,"tokenManager",void 0),_e(this,"user",void 0),_e(this,"userAgent",void 0),_e(this,"userID",void 0),_e(this,"wsBaseURL",void 0),_e(this,"wsConnection",void 0),_e(this,"wsFallback",void 0),_e(this,"wsPromise",void 0),_e(this,"consecutiveFailures",void 0),_e(this,"insightMetrics",void 0),_e(this,"defaultWSTimeoutWithFallback",void 0),_e(this,"defaultWSTimeout",void 0),_e(this,"nextRequestAbortController",null),_e(this,"_getConnectionID",function(){var d,f;return((d=r.wsConnection)===null||d===void 0?void 0:d.connectionID)||((f=r.wsFallback)===null||f===void 0?void 0:f.connectionID)}),_e(this,"_hasConnectionID",function(){return!!r._getConnectionID()}),_e(this,"connectUser",function(){var d=De(W.default.mark(function f(v,x){var O,A;return W.default.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(v.id){U.next=2;break}throw new Error('The "id" field on the user is missing');case 2:if(!(r.userID===v.id&&r.setUserPromise)){U.next=5;break}return console.warn("Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),U.abrupt("return",r.setUserPromise);case 5:if(!r.userID){U.next=7;break}throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");case 7:return(r._isUsingServerAuth()||r.node)&&!r.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),r.userID=v.id,r.anonymous=!1,O=r._setToken(v,x),r._setUser(v),A=r.openConnection(),r.setUserPromise=Promise.all([O,A]).then(function(te){return te[1]}),U.prev=14,U.next=17,r.setUserPromise;case 17:return U.abrupt("return",U.sent);case 20:throw U.prev=20,U.t0=U.catch(14),r.persistUserOnConnectionFailure?r.closeConnection():r.disconnectUser(),U.t0;case 24:case"end":return U.stop()}},f,null,[[14,20]])}));return function(f,v){return d.apply(this,arguments)}}()),_e(this,"setUser",this.connectUser),_e(this,"_setToken",function(d,f){return r.tokenManager.setTokenOrProvider(f,d)}),_e(this,"closeConnection",function(){var d=De(W.default.mark(function f(v){var x,O;return W.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return r.cleaningIntervalRef!=null&&(clearInterval(r.cleaningIntervalRef),r.cleaningIntervalRef=void 0),L.next=3,Promise.all([(x=r.wsConnection)===null||x===void 0?void 0:x.disconnect(v),(O=r.wsFallback)===null||O===void 0?void 0:O.disconnect(v)]);case 3:return L.abrupt("return",Promise.resolve());case 4:case"end":return L.stop()}},f)}));return function(f){return d.apply(this,arguments)}}()),_e(this,"openConnection",De(W.default.mark(function d(){var f,v,x;return W.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(r.userID){A.next=2;break}throw Error("User is not set on client, use client.connectUser or client.connectAnonymousUser instead");case 2:if(!((f=r.wsConnection)!==null&&f!==void 0&&f.isConnecting&&r.wsPromise)){A.next=5;break}return r.logger("info","client:openConnection() - connection already in progress",{tags:["connection","client"]}),A.abrupt("return",r.wsPromise);case 5:if(!(((v=r.wsConnection)!==null&&v!==void 0&&v.isHealthy||(x=r.wsFallback)!==null&&x!==void 0&&x.isHealthy())&&r._hasConnectionID())){A.next=8;break}return r.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists",{tags:["connection","client"]}),A.abrupt("return",Promise.resolve());case 8:return r.clientID="".concat(r.userID,"--").concat(Mp()),r.wsPromise=r.connect(),r._startCleaning(),A.abrupt("return",r.wsPromise);case 12:case"end":return A.stop()}},d)}))),_e(this,"_setupConnection",this.openConnection),_e(this,"_normalizeDate",function(d){if(d instanceof Date&&(d=d.toISOString()),d==="")throw new Error("Don't pass blank string for since, use null instead if resetting the token revoke");return d}),_e(this,"disconnectUser",function(){var d=De(W.default.mark(function f(v){var x,O,A,L;return W.default.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:for(r.logger("info","client:disconnect() - Disconnecting the client",{tags:["connection","client"]}),delete r.user,delete r._user,delete r.userID,r.anonymous=!1,x=r.closeConnection(v),O=0,A=Object.values(r.activeChannels);O<A.length;O++)L=A[O],L._disconnect();return r.activeChannels={},r.state=new TF,setTimeout(r.tokenManager.reset),te.abrupt("return",x);case 11:case"end":return te.stop()}},f)}));return function(f){return d.apply(this,arguments)}}()),_e(this,"disconnect",this.disconnectUser),_e(this,"connectAnonymousUser",function(){(r._isUsingServerAuth()||r.node)&&!r.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),r.anonymous=!0,r.userID=Mp();var d={id:r.userID,anon:!0};return r._setToken(d,""),r._setUser(d),r._setupConnection()}),_e(this,"setAnonymousUser",this.connectAnonymousUser),_e(this,"doAxiosRequest",function(){var d=De(W.default.mark(function f(v,x,O){var A,L,U,te,ce=arguments;return W.default.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return A=ce.length>3&&ce[3]!==void 0?ce[3]:{},ye.next=3,r.tokenManager.tokenReady();case 3:L=r._enrichAxiosOptions(A),ye.prev=4,r._logApiRequest(v,x,O,L),ye.t0=v,ye.next=ye.t0==="get"?9:ye.t0==="delete"?13:ye.t0==="post"?17:ye.t0==="postForm"?21:ye.t0==="put"?25:ye.t0==="patch"?29:ye.t0==="options"?33:37;break;case 9:return ye.next=11,r.axiosInstance.get(x,L);case 11:return U=ye.sent,ye.abrupt("break",38);case 13:return ye.next=15,r.axiosInstance.delete(x,L);case 15:return U=ye.sent,ye.abrupt("break",38);case 17:return ye.next=19,r.axiosInstance.post(x,O,L);case 19:return U=ye.sent,ye.abrupt("break",38);case 21:return ye.next=23,r.axiosInstance.postForm(x,O,L);case 23:return U=ye.sent,ye.abrupt("break",38);case 25:return ye.next=27,r.axiosInstance.put(x,O,L);case 27:return U=ye.sent,ye.abrupt("break",38);case 29:return ye.next=31,r.axiosInstance.patch(x,O,L);case 31:return U=ye.sent,ye.abrupt("break",38);case 33:return ye.next=35,r.axiosInstance.options(x,L);case 35:return U=ye.sent,ye.abrupt("break",38);case 37:throw new Error("Invalid request type");case 38:return r._logApiResponse(v,x,U),r.consecutiveFailures=0,ye.abrupt("return",r.handleResponse(U));case 43:if(ye.prev=43,ye.t1=ye.catch(4),ye.t1.client_request_id=(te=L.headers)===null||te===void 0?void 0:te["x-client-request-id"],r._logApiError(v,x,ye.t1),r.consecutiveFailures+=1,!ye.t1.response){ye.next=60;break}if(!(ye.t1.response.data.code===wg.TOKEN_EXPIRED&&!r.tokenManager.isStatic())){ye.next=57;break}if(!(r.consecutiveFailures>1)){ye.next=53;break}return ye.next=53,id(ab(r.consecutiveFailures));case 53:return r.tokenManager.loadToken(),ye.next=56,r.doAxiosRequest(v,x,O,A);case 56:return ye.abrupt("return",ye.sent);case 57:return ye.abrupt("return",r.handleResponse(ye.t1.response));case 60:throw ye.t1;case 61:case"end":return ye.stop()}},f,null,[[4,43]])}));return function(f,v,x){return d.apply(this,arguments)}}()),_e(this,"dispatchEvent",function(d){d.received_at||(d.received_at=new Date);var f=r._handleClientEvent(d),v=d.cid,x=v?r.activeChannels[v]:void 0;x&&x._handleChannelEvent(d),r._callClientListeners(d),x&&x._callChannelListeners(d),f.forEach(function(O){return O()})}),_e(this,"handleEvent",function(d){var f=d.data,v=JSON.parse(f);r.dispatchEvent(v)}),_e(this,"_updateMemberWatcherReferences",function(d){var f=r.state.userChannelReferences[d.id]||{};for(var v in f){var x=r.activeChannels[v];x!=null&&x.state&&(x.state.members[d.id]&&(x.state.members[d.id].user=d),x.state.watchers[d.id]&&(x.state.watchers[d.id]=d),x.state.read[d.id]&&(x.state.read[d.id].user=d))}}),_e(this,"_updateUserReferences",this._updateMemberWatcherReferences),_e(this,"_updateUserMessageReferences",function(d){var f=r.state.userChannelReferences[d.id]||{};for(var v in f){var x=r.activeChannels[v];if(x){var O=x.state;O?.updateUserMessages(d)}}}),_e(this,"_deleteUserMessageReference",function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v=r.state.userChannelReferences[d.id]||{};for(var x in v){var O=r.activeChannels[x],A=O.state;A?.deleteUserMessages(d,f)}}),_e(this,"_handleUserEvent",function(d){if(d.user){if(d.type==="user.presence.changed"||d.type==="user.updated"){if(d.user.id===r.userID){var f=wt({},r.user||{}),v=wt({},r._user||{});for(var x in r.user)x in d.user||cG(x)||(delete f[x],delete v[x]);for(var O in d.user)v&&O in v&&(v[O]=d.user[O]);r._user=wt({},v),r.user=wt(wt({},f),d.user)}r.state.updateUser(d.user),r._updateMemberWatcherReferences(d.user)}d.type==="user.updated"&&r._updateUserMessageReferences(d.user),d.type==="user.deleted"&&d.user.deleted_at&&(d.mark_messages_deleted||d.hard_delete)&&r._deleteUserMessageReference(d.user,d.hard_delete)}}),_e(this,"_callClientListeners",function(d){var f=r,v=[];f.listeners.all&&v.push.apply(v,Yi(f.listeners.all)),f.listeners[d.type]&&v.push.apply(v,Yi(f.listeners[d.type]));for(var x=0,O=v;x<O.length;x++){var A=O[x];A(d)}}),_e(this,"recoverState",De(W.default.mark(function d(){var f;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(r.logger("info","client:recoverState() - Start of recoverState with connectionID ".concat(r._getConnectionID()),{tags:["connection"]}),f=Object.keys(r.activeChannels),!(f.length&&r.recoverStateOnReconnect)){x.next=10;break}return r.logger("info","client:recoverState() - Start the querying of ".concat(f.length," channels"),{tags:["connection","client"]}),x.next=6,r.queryChannels({cid:{$in:f}},{last_message_at:-1},{limit:30});case 6:r.logger("info","client:recoverState() - Querying channels finished",{tags:["connection","client"]}),r.dispatchEvent({type:"connection.recovered"}),x.next=11;break;case 10:r.dispatchEvent({type:"connection.recovered"});case 11:r.wsPromise=Promise.resolve(),r.setUserPromise=Promise.resolve();case 13:case"end":return x.stop()}},d)}))),_e(this,"getChannelByMembers",function(d,f){var v=Yi(f.members||[]).sort().join(","),x="".concat(d,":!members-").concat(v);if(!v)throw Error("Please specify atleast one member when creating unique conversation");for(var O in r.activeChannels){var A=r.activeChannels[O];if(!A.disconnected){if(O===x)return A;if(O.indexOf("".concat(d,":!members-"))===0){var L=Object.keys(A.state.members).sort().join(",");if(L===v)return A}}}var U=new JD(r,d,void 0,f);return r.activeChannels[x]=U,U}),_e(this,"getChannelById",function(d,f,v){if(typeof f=="string"&&~f.indexOf(":"))throw Error("Invalid channel id ".concat(f,", can't contain the : character"));var x="".concat(d,":").concat(f);if(x in r.activeChannels&&!r.activeChannels[x].disconnected){var O=r.activeChannels[x];return Object.keys(v).length>0&&(O.data=v,O._data=v),O}var A=new JD(r,d,f,v);return r.activeChannels[A.cid]=A,A}),_e(this,"updateUsers",this.upsertUsers),_e(this,"updateUser",this.upsertUser),_e(this,"_unblockMessage",this.unblockMessage),_e(this,"markAllRead",this.markChannelsRead),_e(this,"_isUsingServerAuth",function(){return!!r.secret}),_e(this,"_buildWSPayload",function(d){return JSON.stringify({user_id:r.userID,user_details:r._user,device:r.options.device,client_request_id:d})}),this.key=n,this.listeners={},this.state=new TF,this.mutedChannels=[],this.mutedUsers=[],t&&xp(t)&&(this.secret=t);var l=i||(t&&!xp(t)?t:{});this.browser=typeof l.browser<"u"?l.browser:typeof window<"u",this.node=!this.browser,this.options=wt({timeout:3e3,withCredentials:!1,warmUp:!1,recoverStateOnReconnect:!0},l),this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new eG.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.axiosInstance=ed.create(this.options),this.setBaseURL(this.options.baseURL||"https://chat.stream-io-api.com"),typeof process<"u"&&process.env.STREAM_LOCAL_TEST_RUN&&this.setBaseURL("http://localhost:3030"),typeof process<"u"&&process.env.STREAM_LOCAL_TEST_HOST&&this.setBaseURL("http://"+process.env.STREAM_LOCAL_TEST_HOST),this.wsConnection=null,this.wsPromise=null,this.setUserPromise=null,this.activeChannels={},this.configs={},this.anonymous=!1,this.persistUserOnConnectionFailure=(s=this.options)===null||s===void 0?void 0:s.persistUserOnConnectionFailure,this.tokenManager=new RG(this.secret),this.consecutiveFailures=0,this.insightMetrics=new CG,this.defaultWSTimeoutWithFallback=6e3,this.defaultWSTimeout=15e3,this.axiosInstance.defaults.paramsSerializer=gG,this.logger=tT(l.logger)?l.logger:function(){return null},this.recoverStateOnReconnect=this.options.recoverStateOnReconnect}return vo(e,[{key:"devToken",value:function(t){return kG(t)}},{key:"getAuthType",value:function(){return this.anonymous?"anonymous":"jwt"}},{key:"setBaseURL",value:function(t){this.baseURL=t,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")}},{key:"_setUser",value:function(t){this.user=t,this.userID=t.id,this._user=wt({},t)}},{key:"updateAppSettings",value:function(){var n=De(W.default.mark(function i(r){var s;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return s=r.apn_config,s!=null&&s.p12_cert&&(r=wt(wt({},r),{},{apn_config:wt(wt({},s),{},{p12_cert:Buffer.from(s.p12_cert).toString("base64")})})),d.next=4,this.patch(this.baseURL+"/app",r);case 4:return d.abrupt("return",d.sent);case 5:case"end":return d.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"revokeTokens",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.updateAppSettings({revoke_tokens_issued_before:this._normalizeDate(r)});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"revokeUserToken",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.revokeUsersToken([r],s);case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"revokeUsersToken",value:function(){var n=De(W.default.mark(function i(r,s){var l,d,f,v;return W.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:s===void 0?s=new Date().toISOString():s=this._normalizeDate(s),l=[],d=bg(r);try{for(d.s();!(f=d.n()).done;)v=f.value,l.push({id:v,set:{revoke_tokens_issued_before:s}})}catch(A){d.e(A)}finally{d.f()}return O.next=6,this.partialUpdateUsers(l);case 6:return O.abrupt("return",O.sent);case 7:case"end":return O.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"getAppSettings",value:function(){var n=De(W.default.mark(function i(){return W.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.get(this.baseURL+"/app");case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"testPushSettings",value:function(){var n=De(W.default.mark(function i(r){var s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=l.length>1&&l[1]!==void 0?l[1]:{},f.next=3,this.post(this.baseURL+"/check_push",wt(wt(wt(wt(wt(wt(wt({user_id:r},s.messageID?{message_id:s.messageID}:{}),s.apnTemplate?{apn_template:s.apnTemplate}:{}),s.firebaseTemplate?{firebase_template:s.firebaseTemplate}:{}),s.firebaseDataTemplate?{firebase_data_template:s.firebaseDataTemplate}:{}),s.skipDevices?{skip_devices:!0}:{}),s.pushProviderName?{push_provider_name:s.pushProviderName}:{}),s.pushProviderType?{push_provider_type:s.pushProviderType}:{}));case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"testSQSSettings",value:function(){var n=De(W.default.mark(function i(){var r,s=arguments;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=s.length>0&&s[0]!==void 0?s[0]:{},d.next=3,this.post(this.baseURL+"/check_sqs",r);case 3:return d.abrupt("return",d.sent);case 4:case"end":return d.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"testSNSSettings",value:function(){var n=De(W.default.mark(function i(){var r,s=arguments;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=s.length>0&&s[0]!==void 0?s[0]:{},d.next=3,this.post(this.baseURL+"/check_sns",r);case 3:return d.abrupt("return",d.sent);case 4:case"end":return d.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"setGuestUser",value:function(){var n=De(W.default.mark(function i(r){var s,l,d;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return this.anonymous=!0,v.prev=1,v.next=4,this.post(this.baseURL+"/guest",{user:r});case 4:s=v.sent,v.next=11;break;case 7:throw v.prev=7,v.t0=v.catch(1),this.anonymous=!1,v.t0;case 11:return this.anonymous=!1,l=s.user,l.created_at,l.updated_at,l.last_active,l.online,d=ag(l,WG),v.next=15,this.connectUser(d,s.access_token);case 15:return v.abrupt("return",v.sent);case 16:case"end":return v.stop()}},i,this,[[1,7]])}));function t(i){return n.apply(this,arguments)}return t}()},{key:"createToken",value:function(t,i,r){if(this.secret==null)throw Error("tokens can only be created server-side using the API Secret");var s={};return i&&(s.exp=i),r&&(s.iat=r),KF(this.secret,t,s,{})}},{key:"on",value:function(t,i){var r=this,s=i?t:"all",l=i||t;return s in this.listeners||(this.listeners[s]=[]),this.logger("info","Attaching listener for ".concat(s," event"),{tags:["event","client"]}),this.listeners[s].push(l),{unsubscribe:function(){r.logger("info","Removing listener for ".concat(s," event"),{tags:["event","client"]}),r.listeners[s]=r.listeners[s].filter(function(f){return f!==l})}}}},{key:"off",value:function(t,i){var r=i?t:"all",s=i||t;r in this.listeners||(this.listeners[r]=[]),this.logger("info","Removing listener for ".concat(r," event"),{tags:["event","client"]}),this.listeners[r]=this.listeners[r].filter(function(l){return l!==s})}},{key:"_logApiRequest",value:function(t,i,r,s){this.logger("info","client: ".concat(t," - Request - ").concat(i),{tags:["api","api_request","client"],url:i,payload:r,config:s})}},{key:"_logApiResponse",value:function(t,i,r){this.logger("info","client:".concat(t," - Response - url: ").concat(i," > status ").concat(r.status),{tags:["api","api_response","client"],url:i,response:r})}},{key:"_logApiError",value:function(t,i,r){this.logger("error","client:".concat(t," - Error - url: ").concat(i),{tags:["api","api_response","client"],url:i,error:r})}},{key:"get",value:function(t,i){return this.doAxiosRequest("get",t,null,{params:i})}},{key:"put",value:function(t,i){return this.doAxiosRequest("put",t,i)}},{key:"post",value:function(t,i){return this.doAxiosRequest("post",t,i)}},{key:"patch",value:function(t,i){return this.doAxiosRequest("patch",t,i)}},{key:"delete",value:function(t,i){return this.doAxiosRequest("delete",t,null,{params:i})}},{key:"sendFile",value:function(t,i,r,s,l){var d=lG(i,r,s||"multipart/form-data");return l!=null&&d.append("user",JSON.stringify(l)),this.doAxiosRequest("postForm",t,d,{headers:d.getHeaders?d.getHeaders():{},config:{timeout:0,maxContentLength:1/0,maxBodyLength:1/0}})}},{key:"errorFromResponse",value:function(t){var i;return i=new $G("StreamChat error HTTP code: ".concat(t.status)),t.data&&t.data.code&&(i=new Error("StreamChat error code ".concat(t.data.code,": ").concat(t.data.message)),i.code=t.data.code),i.response=t,i.status=t.status,i}},{key:"handleResponse",value:function(t){var i=t.data;if(jG(t))throw this.errorFromResponse(t);return i}},{key:"_handleClientEvent",value:function(t){var i,r,s=this,l=this,d=[];if(this.logger("info","client:_handleClientEvent - Received event of type { ".concat(t.type," }"),{tags:["event","client"],event:t}),(t.type==="user.presence.changed"||t.type==="user.updated"||t.type==="user.deleted")&&this._handleUserEvent(t),t.type==="health.check"&&t.me&&(l.user=t.me,l.state.updateUser(t.me),l.mutedChannels=t.me.channel_mutes,l.mutedUsers=t.me.mutes),t.channel&&t.type==="notification.message_new"&&this._addChannelConfig(t.channel),t.type==="notification.channel_mutes_updated"&&(i=t.me)!==null&&i!==void 0&&i.channel_mutes&&(this.mutedChannels=t.me.channel_mutes),t.type==="notification.mutes_updated"&&(r=t.me)!==null&&r!==void 0&&r.mutes&&(this.mutedUsers=t.me.mutes),t.type==="notification.mark_read"&&t.unread_channels===0){var f=Object.keys(this.activeChannels);f.forEach(function(x){return s.activeChannels[x].state.unreadCount=0})}if((t.type==="channel.deleted"||t.type==="notification.channel_deleted")&&t.cid){var v;l.state.deleteAllChannelReference(t.cid),(v=this.activeChannels[t.cid])===null||v===void 0||v._disconnect(),d.push(function(){t.cid&&delete s.activeChannels[t.cid]})}return d}},{key:"_muteStatus",value:function(t){for(var i,r=0;r<this.mutedChannels.length;r++){var s,l=this.mutedChannels[r];if(((s=l.channel)===null||s===void 0?void 0:s.cid)===t){i={muted:l.expires?new Date(l.expires).getTime()>new Date().getTime():!0,createdAt:l.created_at?new Date(l.created_at):new Date,expiresAt:l.expires?new Date(l.expires):null};break}}return i||{muted:!1,createdAt:null,expiresAt:null}}},{key:"connect",value:function(){var n=De(W.default.mark(function i(){return W.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(!this.userID||!this._user)){s.next=2;break}throw Error("Call connectUser or connectAnonymousUser before starting the connection");case 2:if(this.wsBaseURL){s.next=4;break}throw Error("Websocket base url not set");case 4:if(this.clientID){s.next=6;break}throw Error("clientID is not set");case 6:if(!this.wsConnection&&(this.options.warmUp||this.options.enableInsights)&&this._sayHi(),this.options.wsConnection&&this.node?(this.options.wsConnection.setClient(this),this.wsConnection=this.options.wsConnection):this.wsConnection=new OG({client:this}),s.prev=8,!this.wsFallback){s.next=13;break}return s.next=12,this.wsFallback.connect();case 12:return s.abrupt("return",s.sent);case 13:return s.next=15,this.wsConnection.connect(this.options.enableWSFallback?this.defaultWSTimeoutWithFallback:this.defaultWSTimeout);case 15:return s.abrupt("return",s.sent);case 18:if(s.prev=18,s.t0=s.catch(8),!(this.options.enableWSFallback&&BG(s.t0)&&mG())){s.next=29;break}return this.logger("info","client:connect() - WS failed, fallback to longpoll",{tags:["connection","client"]}),this.dispatchEvent({type:"transport.changed",mode:"longpoll"}),this.wsConnection._destroyCurrentWSConnection(),this.wsConnection.disconnect().then(),this.wsFallback=new VG({client:this}),s.next=28,this.wsFallback.connect();case 28:return s.abrupt("return",s.sent);case 29:throw s.t0;case 30:case"end":return s.stop()}},i,this,[[8,18]])}));function t(){return n.apply(this,arguments)}return t}()},{key:"_sayHi",value:function(){var t=this,i=Mp(),r={headers:{"x-client-request-id":i}};this.doAxiosRequest("get",this.baseURL+"/hi",null,r).catch(function(s){t.options.enableInsights&&Cg("http_hi_failed",{api_key:t.key,err:s,client_request_id:i})})}},{key:"queryUsers",value:function(){var n=De(W.default.mark(function i(r){var s,l,d,f,v=arguments;return W.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return s=v.length>1&&v[1]!==void 0?v[1]:[],l=v.length>2&&v[2]!==void 0?v[2]:{},d={presence:!1},O.next=5,this.wsPromise;case 5:return this._hasConnectionID()||(d.presence=!1),O.next=8,this.get(this.baseURL+"/users",{payload:wt(wt({filter_conditions:r,sort:Ha(s)},d),l)});case 8:return f=O.sent,this.state.updateUsers(f.users),O.abrupt("return",f);case 11:case"end":return O.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"queryBannedUsers",value:function(){var n=De(W.default.mark(function i(){var r,s,l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return r=d.length>0&&d[0]!==void 0?d[0]:{},s=d.length>1&&d[1]!==void 0?d[1]:[],l=d.length>2&&d[2]!==void 0?d[2]:{},v.next=5,this.get(this.baseURL+"/query_banned_users",{payload:wt({filter_conditions:r,sort:Ha(s)},l)});case 5:return v.abrupt("return",v.sent);case 6:case"end":return v.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"queryMessageFlags",value:function(){var n=De(W.default.mark(function i(){var r,s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r=l.length>0&&l[0]!==void 0?l[0]:{},s=l.length>1&&l[1]!==void 0?l[1]:{},f.next=4,this.get(this.baseURL+"/moderation/flags/message",{payload:wt({filter_conditions:r},s)});case 4:return f.abrupt("return",f.sent);case 5:case"end":return f.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"queryChannels",value:function(){var n=De(W.default.mark(function i(r){var s,l,d,f,v,x,O=arguments;return W.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return s=O.length>1&&O[1]!==void 0?O[1]:[],l=O.length>2&&O[2]!==void 0?O[2]:{},d=O.length>3&&O[3]!==void 0?O[3]:{},f={state:!0,watch:!0,presence:!1},L.next=6,this.wsPromise;case 6:return this._hasConnectionID()||(f.watch=!1),v=wt(wt({filter_conditions:r,sort:Ha(s)},f),l),L.next=10,this.post(this.baseURL+"/channels",v);case 10:return x=L.sent,this.dispatchEvent({type:"channels.queried",queriedChannels:{channels:x.channels,isLatestMessageSet:!0}}),L.abrupt("return",this.hydrateActiveChannels(x.channels,d));case 13:case"end":return L.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"queryReactions",value:function(){var n=De(W.default.mark(function i(r,s){var l,d,f,v=arguments;return W.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return l=v.length>2&&v[2]!==void 0?v[2]:[],d=v.length>3&&v[3]!==void 0?v[3]:{},O.next=4,this.wsPromise;case 4:return f=wt({filter:s,sort:Ha(l)},d),O.next=7,this.post(this.baseURL+"/messages/"+r+"/reactions",f);case 7:return O.abrupt("return",O.sent);case 8:case"end":return O.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"hydrateActiveChannels",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.skipInitialization,s=i.offlineMode,l=s===void 0?!1:s,d=bg(t),f;try{for(d.s();!(f=d.n()).done;){var v=f.value;this._addChannelConfig(v.channel)}}catch(te){d.e(te)}finally{d.f()}var x=[],O=bg(t),A;try{for(O.s();!(A=O.n()).done;){var L=A.value,U=this.channel(L.channel.type,L.channel.id);U.data=L.channel,U.offlineMode=l,U.initialized=!l,r===void 0?U._initializeState(L,"latest"):r.includes(L.channel.id)||(U.state.clearMessages(),U._initializeState(L,"latest")),x.push(U)}}catch(te){O.e(te)}finally{O.f()}return x}},{key:"search",value:function(){var n=De(W.default.mark(function i(r,s){var l,d,f=arguments;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(l=f.length>2&&f[2]!==void 0?f[2]:{},!(l.offset&&l.next)){x.next=3;break}throw Error("Cannot specify offset with next");case 3:if(d=wt(wt({filter_conditions:r},l),{},{sort:l.sort?Ha(l.sort):void 0}),typeof s!="string"){x.next=8;break}d.query=s,x.next=13;break;case 8:if(br(s)!=="object"){x.next=12;break}d.message_filter_conditions=s,x.next=13;break;case 12:throw Error("Invalid type ".concat(br(s)," for query parameter"));case 13:return x.next=15,this.wsPromise;case 15:return x.next=17,this.get(this.baseURL+"/search",{payload:d});case 17:return x.abrupt("return",x.sent);case 18:case"end":return x.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"setLocalDevice",value:function(t){var i,r,s;if((i=this.wsConnection)!==null&&i!==void 0&&i.isConnecting&&this.wsPromise||((r=this.wsConnection)!==null&&r!==void 0&&r.isHealthy||(s=this.wsFallback)!==null&&s!==void 0&&s.isHealthy())&&this._hasConnectionID())throw new Error("you can only set device before opening a websocket connection");this.options.device=t}},{key:"addDevice",value:function(){var n=De(W.default.mark(function i(r,s,l,d){return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.post(this.baseURL+"/devices",wt(wt({id:r,push_provider:s},l!=null?{user_id:l}:{}),d!=null?{push_provider_name:d}:{}));case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},i,this)}));function t(i,r,s,l){return n.apply(this,arguments)}return t}()},{key:"getDevices",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.get(this.baseURL+"/devices",r?{user_id:r}:{});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"getUnreadCount",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.get(this.baseURL+"/unread",r?{user_id:r}:{});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"getUnreadCountBatch",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/unread_batch",{user_ids:r});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"removeDevice",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.delete(this.baseURL+"/devices",wt({id:r},s?{user_id:s}:{}));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"getRateLimits",value:function(){var n=De(W.default.mark(function i(r){var s,l,d,f,v,x;return W.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return s=r||{},l=s.serverSide,d=s.web,f=s.android,v=s.ios,x=s.endpoints,A.abrupt("return",this.get(this.baseURL+"/rate_limits",{server_side:l,web:d,android:f,ios:v,endpoints:x?x.join(","):void 0}));case 2:case"end":return A.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"_addChannelConfig",value:function(t){var i=t.cid,r=t.config;this.configs[i]=r}},{key:"channel",value:function(t,i){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!this.userID&&!this._isUsingServerAuth())throw Error("Call connectUser or connectAnonymousUser before creating a channel");if(~t.indexOf(":"))throw Error("Invalid channel group ".concat(t,", can't contain the : character"));return i&&br(i)==="object"?this.getChannelByMembers(t,i):!i&&br(s)==="object"&&(r=s.members)!==null&&r!==void 0&&r.length?this.getChannelByMembers(t,s):i?this.getChannelById(t,i,s):new JD(this,t,void 0,s)}},{key:"partialUpdateUser",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.partialUpdateUsers([r]);case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"upsertUsers",value:function(){var n=De(W.default.mark(function i(r){var s,l,d,f;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:s={},l=bg(r),x.prev=2,l.s();case 4:if((d=l.n()).done){x.next=11;break}if(f=d.value,f.id){x.next=8;break}throw Error("User ID is required when updating a user");case 8:s[f.id]=f;case 9:x.next=4;break;case 11:x.next=16;break;case 13:x.prev=13,x.t0=x.catch(2),l.e(x.t0);case 16:return x.prev=16,l.f(),x.finish(16);case 19:return x.next=21,this.post(this.baseURL+"/users",{users:s});case 21:return x.abrupt("return",x.sent);case 22:case"end":return x.stop()}},i,this,[[2,13,16,19]])}));function t(i){return n.apply(this,arguments)}return t}()},{key:"upsertUser",value:function(t){return this.upsertUsers([t])}},{key:"partialUpdateUsers",value:function(){var n=De(W.default.mark(function i(r){var s,l,d;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:s=bg(r),v.prev=1,s.s();case 3:if((l=s.n()).done){v.next=9;break}if(d=l.value,d.id){v.next=7;break}throw Error("User ID is required when updating a user");case 7:v.next=3;break;case 9:v.next=14;break;case 11:v.prev=11,v.t0=v.catch(1),s.e(v.t0);case 14:return v.prev=14,s.f(),v.finish(14);case 17:return v.next=19,this.patch(this.baseURL+"/users",{users:r});case 19:return v.abrupt("return",v.sent);case 20:case"end":return v.stop()}},i,this,[[1,11,14,17]])}));function t(i){return n.apply(this,arguments)}return t}()},{key:"deleteUser",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.delete(this.baseURL+"/users/".concat(r),s);case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"restoreUsers",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/users/restore",{user_ids:r});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"reactivateUser",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.post(this.baseURL+"/users/".concat(r,"/reactivate"),wt({},s));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"reactivateUsers",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.post(this.baseURL+"/users/reactivate",wt({user_ids:r},s));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"deactivateUser",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.post(this.baseURL+"/users/".concat(r,"/deactivate"),wt({},s));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"deactivateUsers",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.post(this.baseURL+"/users/deactivate",wt({user_ids:r},s));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"exportUser",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.get(this.baseURL+"/users/".concat(r,"/export"),wt({},s));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"banUser",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.post(this.baseURL+"/moderation/ban",wt({target_user_id:r},s));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"unbanUser",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.delete(this.baseURL+"/moderation/ban",wt({target_user_id:r},s));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"shadowBan",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.banUser(r,wt({shadow:!0},s));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"removeShadowBan",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.unbanUser(r,wt({shadow:!0},s));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"muteUser",value:function(){var n=De(W.default.mark(function i(r,s){var l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=d.length>2&&d[2]!==void 0?d[2]:{},v.next=3,this.post(this.baseURL+"/moderation/mute",wt(wt({target_id:r},s?{user_id:s}:{}),l));case 3:return v.abrupt("return",v.sent);case 4:case"end":return v.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"unmuteUser",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.post(this.baseURL+"/moderation/unmute",wt({target_id:r},s?{user_id:s}:{}));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"userMuteStatus",value:function(t){if(!this.user||!this.wsPromise)throw new Error("Make sure to await connectUser() first.");for(var i=0;i<this.mutedUsers.length;i+=1)if(this.mutedUsers[i].target.id===t)return!0;return!1}},{key:"flagMessage",value:function(){var n=De(W.default.mark(function i(r){var s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=l.length>1&&l[1]!==void 0?l[1]:{},f.next=3,this.post(this.baseURL+"/moderation/flag",wt({target_message_id:r},s));case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"flagUser",value:function(){var n=De(W.default.mark(function i(r){var s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=l.length>1&&l[1]!==void 0?l[1]:{},f.next=3,this.post(this.baseURL+"/moderation/flag",wt({target_user_id:r},s));case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"unflagMessage",value:function(){var n=De(W.default.mark(function i(r){var s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=l.length>1&&l[1]!==void 0?l[1]:{},f.next=3,this.post(this.baseURL+"/moderation/unflag",wt({target_message_id:r},s));case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"unflagUser",value:function(){var n=De(W.default.mark(function i(r){var s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=l.length>1&&l[1]!==void 0?l[1]:{},f.next=3,this.post(this.baseURL+"/moderation/unflag",wt({target_user_id:r},s));case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"getCallToken",value:function(){var n=De(W.default.mark(function i(r){var s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=l.length>1&&l[1]!==void 0?l[1]:{},f.next=3,this.post(this.baseURL+"/calls/".concat(r),wt({},s));case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"_queryFlags",value:function(){var n=De(W.default.mark(function i(){var r,s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r=l.length>0&&l[0]!==void 0?l[0]:{},s=l.length>1&&l[1]!==void 0?l[1]:{},f.next=4,this.post(this.baseURL+"/moderation/flags",wt({filter_conditions:r},s));case 4:return f.abrupt("return",f.sent);case 5:case"end":return f.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"_queryFlagReports",value:function(){var n=De(W.default.mark(function i(){var r,s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r=l.length>0&&l[0]!==void 0?l[0]:{},s=l.length>1&&l[1]!==void 0?l[1]:{},f.next=4,this.post(this.baseURL+"/moderation/reports",wt({filter_conditions:r},s));case 4:return f.abrupt("return",f.sent);case 5:case"end":return f.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"_reviewFlagReport",value:function(){var n=De(W.default.mark(function i(r,s){var l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=d.length>2&&d[2]!==void 0?d[2]:{},v.next=3,this.patch(this.baseURL+"/moderation/reports/".concat(r),wt({review_result:s},l));case 3:return v.abrupt("return",v.sent);case 4:case"end":return v.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"unblockMessage",value:function(){var n=De(W.default.mark(function i(r){var s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=l.length>1&&l[1]!==void 0?l[1]:{},f.next=3,this.post(this.baseURL+"/moderation/unblock_message",wt({target_message_id:r},s));case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"markChannelsRead",value:function(){var n=De(W.default.mark(function i(){var r,s=arguments;return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=s.length>0&&s[0]!==void 0?s[0]:{},d.next=3,this.post(this.baseURL+"/channels/read",wt({},r));case 3:case"end":return d.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"createCommand",value:function(t){return this.post(this.baseURL+"/commands",t)}},{key:"getCommand",value:function(t){return this.get(this.baseURL+"/commands/".concat(t))}},{key:"updateCommand",value:function(t,i){return this.put(this.baseURL+"/commands/".concat(t),i)}},{key:"deleteCommand",value:function(t){return this.delete(this.baseURL+"/commands/".concat(t))}},{key:"listCommands",value:function(){return this.get(this.baseURL+"/commands")}},{key:"createChannelType",value:function(t){var i=Bl({},{commands:["all"]},t);return this.post(this.baseURL+"/channeltypes",i)}},{key:"getChannelType",value:function(t){return this.get(this.baseURL+"/channeltypes/".concat(t))}},{key:"updateChannelType",value:function(t,i){return this.put(this.baseURL+"/channeltypes/".concat(t),i)}},{key:"deleteChannelType",value:function(t){return this.delete(this.baseURL+"/channeltypes/".concat(t))}},{key:"listChannelTypes",value:function(){return this.get(this.baseURL+"/channeltypes")}},{key:"translateMessage",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.post(this.baseURL+"/messages/".concat(r,"/translate"),{language:s});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"_normalizeExpiration",value:function(t){var i=null;if(typeof t=="number"){var r=new Date;r.setSeconds(r.getSeconds()+t),i=r.toISOString()}else xp(t)?i=t:t instanceof Date&&(i=t.toISOString());return i}},{key:"_validateAndGetMessageId",value:function(t,i){var r;if(typeof t=="string")r=t;else{if(!t.id)throw Error(i);r=t.id}return r}},{key:"pinMessage",value:function(t,i,r,s){var l=this._validateAndGetMessageId(t,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(l,{set:{pinned:!0,pin_expires:this._normalizeExpiration(i),pinned_at:this._normalizeExpiration(s)}},r)}},{key:"unpinMessage",value:function(t,i){var r=this._validateAndGetMessageId(t,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(r,{set:{pinned:!1}},i)}},{key:"updateMessage",value:function(){var n=De(W.default.mark(function i(r,s,l){var d,f;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(r.id){x.next=2;break}throw Error("Please specify the message id when calling updateMessage");case 2:return d=Bl({},r),delete d.id,f=["command","created_at","html","latest_reactions","own_reactions","quoted_message","reaction_counts","reply_count","type","updated_at","user","__html"],f.forEach(function(O){d[O]!=null&&delete d[O]}),s!=null&&(xp(s)?d.user_id=s:d.user={id:s.id}),Array.isArray(d.mentioned_users)&&!xp(d.mentioned_users[0])&&(d.mentioned_users=d.mentioned_users.map(function(O){return O.id})),x.next=10,this.post(this.baseURL+"/messages/".concat(r.id),wt({message:d},l));case 10:return x.abrupt("return",x.sent);case 11:case"end":return x.stop()}},i,this)}));function t(i,r,s){return n.apply(this,arguments)}return t}()},{key:"partialUpdateMessage",value:function(){var n=De(W.default.mark(function i(r,s,l,d){var f;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(r){x.next=2;break}throw Error("Please specify the message id when calling partialUpdateMessage");case 2:return f=l,l!=null&&xp(l)&&(f={id:l}),x.next=6,this.put(this.baseURL+"/messages/".concat(r),wt(wt(wt({},s),d),{},{user:f}));case 6:return x.abrupt("return",x.sent);case 7:case"end":return x.stop()}},i,this)}));function t(i,r,s,l){return n.apply(this,arguments)}return t}()},{key:"deleteMessage",value:function(){var n=De(W.default.mark(function i(r,s){var l;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return l={},s&&(l={hard:!0}),f.next=4,this.delete(this.baseURL+"/messages/".concat(r),l);case 4:return f.abrupt("return",f.sent);case 5:case"end":return f.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"undeleteMessage",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.post(this.baseURL+"/messages/".concat(r,"/undelete"),{undeleted_by:s});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"getMessage",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.get(this.baseURL+"/messages/".concat(encodeURIComponent(r)),wt({},s));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"queryThreads",value:function(){var n=De(W.default.mark(function i(r){var s=this,l,d;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=wt({limit:10,participant_limit:10,reply_limit:3,watch:!0},r),v.next=3,this.post(this.baseURL+"/threads",l);case 3:return d=v.sent,v.abrupt("return",{threads:d.threads.map(function(x){return new VF(s,x)}),next:d.next});case 5:case"end":return v.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"getThread",value:function(){var n=De(W.default.mark(function i(r){var s,l,d,f=arguments;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(s=f.length>1&&f[1]!==void 0?f[1]:{},r){x.next=3;break}throw Error("Please specify the message id when calling partialUpdateThread");case 3:return l=wt({participant_limit:100,reply_limit:3,watch:!0},s),x.next=6,this.get(this.baseURL+"/threads/".concat(r),l);case 6:return d=x.sent,x.abrupt("return",new VF(this,d.thread));case 8:case"end":return x.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"partialUpdateThread",value:function(){var n=De(W.default.mark(function i(r,s){var l,d;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(r){v.next=2;break}throw Error("Please specify the message id when calling partialUpdateThread");case 2:l=["created_at","id","last_message_at","type","updated_at","user","reply_count","participants","channel"],v.t0=W.default.keys(wt(wt({},s.set),s.unset));case 4:if((v.t1=v.t0()).done){v.next=10;break}if(d=v.t1.value,!l.includes(d)){v.next=8;break}throw Error("You cannot set ".concat(d," field on Thread object. ").concat(d," is reserved for server-side use. Please omit ").concat(d," from your set object."));case 8:v.next=4;break;case 10:return v.next=12,this.patch(this.baseURL+"/threads/".concat(r),s);case 12:return v.abrupt("return",v.sent);case 13:case"end":return v.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"getUserAgent",value:function(){return this.userAgent||"stream-chat-javascript-client-".concat(this.node?"node":"browser","-","8.33.0")}},{key:"setUserAgent",value:function(t){this.userAgent=t}},{key:"_enrichAxiosOptions",value:function(){var t,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{params:{},headers:{},config:{}},r=this._getToken(),s=r?{Authorization:r}:void 0,l=null;this.nextRequestAbortController!==null&&(l=this.nextRequestAbortController.signal,this.nextRequestAbortController=null),(t=i.headers)!==null&&t!==void 0&&t["x-client-request-id"]||(i.headers=wt(wt({},i.headers),{},{"x-client-request-id":Mp()}));var d=this.options.axiosRequestConfig||{},f=d.params,v=d.headers,x=ag(d,ZG);return wt(wt(wt({params:wt(wt({user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key},i.params),f||{}),headers:wt(wt(wt({},s),{},{"stream-auth-type":this.getAuthType(),"X-Stream-Client":this.getUserAgent()},i.headers),v||{})},l?{signal:l}:{}),i.config),x||{})}},{key:"_getToken",value:function(){return!this.tokenManager||this.anonymous?null:this.tokenManager.getToken()}},{key:"_startCleaning",value:function(){var t=this;this.cleaningIntervalRef==null&&(this.cleaningIntervalRef=setInterval(function(){for(var i=0,r=Object.values(t.activeChannels);i<r.length;i++){var s=r[i];s.clean()}},500))}},{key:"verifyWebhook",value:function(t,i){return!!this.secret&&AG(t,this.secret,i)}},{key:"getPermission",value:function(t){return this.get("".concat(this.baseURL,"/permissions/").concat(t))}},{key:"createPermission",value:function(t){return this.post("".concat(this.baseURL,"/permissions"),wt({},t))}},{key:"updatePermission",value:function(t,i){return this.put("".concat(this.baseURL,"/permissions/").concat(t),wt({},i))}},{key:"deletePermission",value:function(t){return this.delete("".concat(this.baseURL,"/permissions/").concat(t))}},{key:"listPermissions",value:function(){return this.get("".concat(this.baseURL,"/permissions"))}},{key:"createRole",value:function(t){return this.post("".concat(this.baseURL,"/roles"),{name:t})}},{key:"listRoles",value:function(){return this.get("".concat(this.baseURL,"/roles"))}},{key:"deleteRole",value:function(t){return this.delete("".concat(this.baseURL,"/roles/").concat(t))}},{key:"sync",value:function(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.post("".concat(this.baseURL,"/sync"),wt({channel_cids:t,last_sync_at:i},r))}},{key:"sendUserCustomEvent",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.post("".concat(this.baseURL,"/users/").concat(r,"/event"),{event:s});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"createBlockList",value:function(t){return this.post("".concat(this.baseURL,"/blocklists"),t)}},{key:"listBlockLists",value:function(){return this.get("".concat(this.baseURL,"/blocklists"))}},{key:"getBlockList",value:function(t){return this.get("".concat(this.baseURL,"/blocklists/").concat(t))}},{key:"updateBlockList",value:function(t,i){return this.put("".concat(this.baseURL,"/blocklists/").concat(t),i)}},{key:"deleteBlockList",value:function(t){return this.delete("".concat(this.baseURL,"/blocklists/").concat(t))}},{key:"exportChannels",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=wt({channels:t},i);return this.post("".concat(this.baseURL,"/export_channels"),r)}},{key:"exportUsers",value:function(t){return this.post("".concat(this.baseURL,"/export/users"),t)}},{key:"exportChannel",value:function(t,i){return this.exportChannels([t],i)}},{key:"getExportChannelStatus",value:function(t){return this.get("".concat(this.baseURL,"/export_channels/").concat(t))}},{key:"campaign",value:function(t,i){return t&&br(t)==="object"?new FF(this,null,t):new FF(this,t,i)}},{key:"segment",value:function(t,i,r){return typeof i=="string"?new LF(this,t,i,r):new LF(this,t,null,i)}},{key:"validateServerSideAuth",value:function(){if(!this.secret)throw new Error("Campaigns is a server-side only feature. Please initialize the client with a secret to use this feature.")}},{key:"createSegment",value:function(){var n=De(W.default.mark(function i(r,s,l){var d;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return this.validateServerSideAuth(),d=wt({id:s,type:r},l),v.abrupt("return",this.post(this.baseURL+"/segments",d));case 3:case"end":return v.stop()}},i,this)}));function t(i,r,s){return n.apply(this,arguments)}return t}()},{key:"createUserSegment",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.validateServerSideAuth(),d.abrupt("return",this.createSegment("user",r,s));case 2:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"createChannelSegment",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.validateServerSideAuth(),d.abrupt("return",this.createSegment("channel",r,s));case 2:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"getSegment",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.validateServerSideAuth(),l.abrupt("return",this.get(this.baseURL+"/segments/".concat(r)));case 2:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"updateSegment",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.validateServerSideAuth(),d.abrupt("return",this.put(this.baseURL+"/segments/".concat(r),s));case 2:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"addSegmentTargets",value:function(){var n=De(W.default.mark(function i(r,s){var l;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.validateServerSideAuth(),l={target_ids:s},f.abrupt("return",this.post(this.baseURL+"/segments/".concat(r,"/addtargets"),l));case 3:case"end":return f.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"querySegmentTargets",value:function(){var n=De(W.default.mark(function i(r){var s,l,d,f=arguments;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return s=f.length>1&&f[1]!==void 0?f[1]:{},l=f.length>2&&f[2]!==void 0?f[2]:[],d=f.length>3&&f[3]!==void 0?f[3]:{},this.validateServerSideAuth(),x.abrupt("return",this.post(this.baseURL+"/segments/".concat(r,"/targets/query"),wt({filter:s||{},sort:l||[]},d)));case 5:case"end":return x.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"removeSegmentTargets",value:function(){var n=De(W.default.mark(function i(r,s){var l;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.validateServerSideAuth(),l={target_ids:s},f.abrupt("return",this.post(this.baseURL+"/segments/".concat(r,"/deletetargets"),l));case 3:case"end":return f.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"querySegments",value:function(){var n=De(W.default.mark(function i(r,s){var l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=d.length>2&&d[2]!==void 0?d[2]:{},this.validateServerSideAuth(),v.abrupt("return",this.post(this.baseURL+"/segments/query",wt({filter:r,sort:s},l)));case 3:case"end":return v.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"deleteSegment",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.validateServerSideAuth(),l.abrupt("return",this.delete(this.baseURL+"/segments/".concat(r)));case 2:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"segmentTargetExists",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.validateServerSideAuth(),d.abrupt("return",this.get(this.baseURL+"/segments/".concat(r,"/target/").concat(s)));case 2:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"createCampaign",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.validateServerSideAuth(),l.abrupt("return",this.post(this.baseURL+"/campaigns",wt({},r)));case 2:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"getCampaign",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.validateServerSideAuth(),l.abrupt("return",this.get(this.baseURL+"/campaigns/".concat(r)));case 2:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"startCampaign",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.validateServerSideAuth(),d.abrupt("return",this.post(this.baseURL+"/campaigns/".concat(r,"/start"),{scheduled_for:s?.scheduledFor,stop_at:s?.stopAt}));case 2:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"queryCampaigns",value:function(){var n=De(W.default.mark(function i(r,s,l){return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.validateServerSideAuth(),f.next=3,this.post(this.baseURL+"/campaigns/query",wt({filter:r,sort:s},l||{}));case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i,this)}));function t(i,r,s){return n.apply(this,arguments)}return t}()},{key:"updateCampaign",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.validateServerSideAuth(),d.abrupt("return",this.put(this.baseURL+"/campaigns/".concat(r),s));case 2:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"deleteCampaign",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.validateServerSideAuth(),l.abrupt("return",this.delete(this.baseURL+"/campaigns/".concat(r)));case 2:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"stopCampaign",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.validateServerSideAuth(),l.abrupt("return",this.post(this.baseURL+"/campaigns/".concat(r,"/stop")));case 2:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"enrichURL",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.get(this.baseURL+"/og",{url:r}));case 1:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"getTask",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.get("".concat(this.baseURL,"/tasks/").concat(r)));case 1:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"deleteChannels",value:function(){var n=De(W.default.mark(function i(r){var s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=l.length>1&&l[1]!==void 0?l[1]:{},f.next=3,this.post(this.baseURL+"/channels/delete",wt({cids:r},s));case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"deleteUsers",value:function(){var n=De(W.default.mark(function i(r){var s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(s=l.length>1&&l[1]!==void 0?l[1]:{},!(typeof s.user<"u"&&!["soft","hard","pruning"].includes(s.user))){f.next=3;break}throw new Error("Invalid delete user options. user must be one of [soft hard pruning]");case 3:if(!(typeof s.conversations<"u"&&!["soft","hard"].includes(s.conversations))){f.next=5;break}throw new Error("Invalid delete user options. conversations must be one of [soft hard]");case 5:if(!(typeof s.messages<"u"&&!["soft","hard","pruning"].includes(s.messages))){f.next=7;break}throw new Error("Invalid delete user options. messages must be one of [soft hard pruning]");case 7:return f.next=9,this.post(this.baseURL+"/users/delete",wt({user_ids:r},s));case 9:return f.abrupt("return",f.sent);case 10:case"end":return f.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"_createImportURL",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/import_urls",{filename:r});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"_createImport",value:function(){var n=De(W.default.mark(function i(r){var s,l=arguments;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=l.length>1&&l[1]!==void 0?l[1]:{mode:"upsert"},f.next=3,this.post(this.baseURL+"/imports",wt({path:r},s));case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"_getImport",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.get(this.baseURL+"/imports/".concat(r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"_listImports",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.get(this.baseURL+"/imports",r);case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"upsertPushProvider",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/push_providers",{push_provider:r});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"deletePushProvider",value:function(){var n=De(W.default.mark(function i(r){var s,l;return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=r.type,l=r.name,f.next=3,this.delete(this.baseURL+"/push_providers/".concat(s,"/").concat(l));case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"listPushProviders",value:function(){var n=De(W.default.mark(function i(){return W.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.get(this.baseURL+"/push_providers");case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"createAbortControllerForNextRequest",value:function(){return this.nextRequestAbortController=new AbortController}},{key:"commitMessage",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/messages/".concat(r,"/commit"));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"createPoll",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/polls",r);case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"getPoll",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.get(this.baseURL+"/polls/".concat(r),wt({},s?{user_id:s}:{}));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"updatePoll",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.put(this.baseURL+"/polls",r);case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"partialUpdatePoll",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.patch(this.baseURL+"/polls/".concat(r),s);case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"deletePoll",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.delete(this.baseURL+"/polls/".concat(r),wt({},s?{user_id:s}:{}));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"closePoll",value:function(){var n=De(W.default.mark(function i(r){return W.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.partialUpdatePoll(r,{set:{is_closed:!0}}));case 1:case"end":return l.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"createPollOption",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.post(this.baseURL+"/polls/".concat(r,"/options"),s);case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"getPollOption",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.get(this.baseURL+"/polls/".concat(r,"/options/").concat(s));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"updatePollOption",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.put(this.baseURL+"/polls/".concat(r,"/options"),s);case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"deletePollOption",value:function(){var n=De(W.default.mark(function i(r,s){return W.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.delete(this.baseURL+"/polls/".concat(r,"/options/").concat(s));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i,this)}));function t(i,r){return n.apply(this,arguments)}return t}()},{key:"castPollVote",value:function(){var n=De(W.default.mark(function i(r,s,l){var d,f=arguments;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return d=f.length>3&&f[3]!==void 0?f[3]:{},x.next=3,this.post(this.baseURL+"/messages/".concat(r,"/polls/").concat(s,"/vote"),wt({vote:l},d));case 3:return x.abrupt("return",x.sent);case 4:case"end":return x.stop()}},i,this)}));function t(i,r,s){return n.apply(this,arguments)}return t}()},{key:"addPollAnswer",value:function(){var n=De(W.default.mark(function i(r,s,l){return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this.castPollVote(r,s,{answer_text:l}));case 1:case"end":return f.stop()}},i,this)}));function t(i,r,s){return n.apply(this,arguments)}return t}()},{key:"removePollVote",value:function(){var n=De(W.default.mark(function i(r,s,l){return W.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.delete(this.baseURL+"/messages/".concat(r,"/polls/").concat(s,"/vote/").concat(l));case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},i,this)}));function t(i,r,s){return n.apply(this,arguments)}return t}()},{key:"queryPolls",value:function(){var n=De(W.default.mark(function i(){var r,s,l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return r=d.length>0&&d[0]!==void 0?d[0]:{},s=d.length>1&&d[1]!==void 0?d[1]:[],l=d.length>2&&d[2]!==void 0?d[2]:{},v.next=5,this.post(this.baseURL+"/polls/query",wt({filter:r,sort:Ha(s)},l));case 5:return v.abrupt("return",v.sent);case 6:case"end":return v.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"queryPollVotes",value:function(){var n=De(W.default.mark(function i(r){var s,l,d,f=arguments;return W.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return s=f.length>1&&f[1]!==void 0?f[1]:{},l=f.length>2&&f[2]!==void 0?f[2]:[],d=f.length>3&&f[3]!==void 0?f[3]:{},x.next=5,this.post(this.baseURL+"/polls/".concat(r,"/votes"),wt({filter:s,sort:Ha(l)},d));case 5:return x.abrupt("return",x.sent);case 6:case"end":return x.stop()}},i,this)}));function t(i){return n.apply(this,arguments)}return t}()},{key:"queryMessageHistory",value:function(){var n=De(W.default.mark(function i(){var r,s,l,d=arguments;return W.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return r=d.length>0&&d[0]!==void 0?d[0]:{},s=d.length>1&&d[1]!==void 0?d[1]:[],l=d.length>2&&d[2]!==void 0?d[2]:{},v.next=5,this.post(this.baseURL+"/messages/history",wt({filter:r,sort:Ha(s)},l));case 5:return v.abrupt("return",v.sent);case 6:case"end":return v.stop()}},i,this)}));function t(){return n.apply(this,arguments)}return t}()}],[{key:"getInstance",value:function(t,i,r){return e._instance||(typeof i=="string"?e._instance=new e(t,i,r):e._instance=new e(t,i)),e._instance}}]),e}();_e(nT,"_instance",void 0);var QF="Allow",KG="Deny",iT=["*"],rT=["*"],QG=999,JG=1,JF=function e(n,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:iT,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:rT,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:QF;Ls(this,e),_e(this,"name",void 0),_e(this,"action",void 0),_e(this,"owner",void 0),_e(this,"priority",void 0),_e(this,"resources",void 0),_e(this,"roles",void 0),this.name=n,this.action=l,this.owner=s,this.priority=t,this.resources=i,this.roles=r},Kye=new JF("Allow all",QG,iT,rT,!1,QF),Qye=new JF("Deny all",JG,iT,rT,!1,KG);var ob,XG=new Uint8Array(16);function sT(){if(!ob&&(ob=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ob))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ob(XG)}var is=[];for(let e=0;e<256;++e)is.push((e+256).toString(16).slice(1));function XF(e,n=0){return is[e[n+0]]+is[e[n+1]]+is[e[n+2]]+is[e[n+3]]+"-"+is[e[n+4]]+is[e[n+5]]+"-"+is[e[n+6]]+is[e[n+7]]+"-"+is[e[n+8]]+is[e[n+9]]+"-"+is[e[n+10]]+is[e[n+11]]+is[e[n+12]]+is[e[n+13]]+is[e[n+14]]+is[e[n+15]]}var eW=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),aT={randomUUID:eW};function tW(e,n,t){if(aT.randomUUID&&!n&&!e)return aT.randomUUID();e=e||{};let i=e.random||(e.rng||sT)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,n){t=t||0;for(let r=0;r<16;++r)n[t+r]=i[r];return n}return XF(i)}var xg=tW;var Dp=class{},eL=(()=>{class e extends Dp{getTranslation(t){return zt({})}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Aa(e)))(r||e)}})();static \u0275prov=ct({token:e,factory:e.\u0275fac})}return e})(),Mg=class{},tL=(()=>{class e{handle(t){return t.key}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ct({token:e,factory:e.\u0275fac})}return e})();function Dg(e,n){if(e===n)return!0;if(e===null||n===null)return!1;if(e!==e&&n!==n)return!0;let t=typeof e,i=typeof n,r,s,l;if(t==i&&t=="object")if(Array.isArray(e)){if(!Array.isArray(n))return!1;if((r=e.length)==n.length){for(s=0;s<r;s++)if(!Dg(e[s],n[s]))return!1;return!0}}else{if(Array.isArray(n))return!1;l=Object.create(null);for(s in e){if(!Dg(e[s],n[s]))return!1;l[s]=!0}for(s in n)if(!(s in l)&&typeof n[s]<"u")return!1;return!0}return!1}function ga(e){return typeof e<"u"&&e!==null}function oT(e){return e&&typeof e=="object"&&!Array.isArray(e)}function rL(e,n){let t=Object.assign({},e);return oT(e)&&oT(n)&&Object.keys(n).forEach(i=>{oT(n[i])?i in e?t[i]=rL(e[i],n[i]):Object.assign(t,{[i]:n[i]}):Object.assign(t,{[i]:n[i]})}),t}var Tp=class{},nL=(()=>{class e extends Tp{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,i){let r;return typeof t=="string"?r=this.interpolateString(t,i):typeof t=="function"?r=this.interpolateFunction(t,i):r=t,r}getValue(t,i){let r=typeof i=="string"?i.split("."):[i];i="";do i+=r.shift(),ga(t)&&ga(t[i])&&(typeof t[i]=="object"||!r.length)?(t=t[i],i=""):r.length?i+=".":t=void 0;while(r.length);return t}interpolateFunction(t,i){return t(i)}interpolateString(t,i){return i?t.replace(this.templateMatcher,(r,s)=>{let l=this.getValue(i,s);return ga(l)?l:r}):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Aa(e)))(r||e)}})();static \u0275prov=ct({token:e,factory:e.\u0275fac})}return e})(),Sp=class{},iL=(()=>{class e extends Sp{compile(t,i){return t}compileTranslations(t,i){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Aa(e)))(r||e)}})();static \u0275prov=ct({token:e,factory:e.\u0275fac})}return e})(),cb=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Zt;onLangChange=new Zt;onDefaultLangChange=new Zt},cT=new Lt("USE_STORE"),lT=new Lt("USE_DEFAULT_LANG"),uT=new Lt("DEFAULT_LANGUAGE"),dT=new Lt("USE_EXTEND"),Op=(()=>{class e{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new Zt;_onLangChange=new Zt;_onDefaultLangChange=new Zt;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}constructor(t,i,r,s,l,d=!0,f=!1,v=!1,x){this.store=t,this.currentLoader=i,this.compiler=r,this.parser=s,this.missingTranslationHandler=l,this.useDefaultLang=d,this.isolate=f,this.extend=v,x&&this.setDefaultLang(x)}setDefaultLang(t){if(t===this.defaultLang)return;let i=this.retrieveTranslations(t);typeof i<"u"?(this.defaultLang==null&&(this.defaultLang=t),i.pipe(ti(1)).subscribe(r=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return zt(this.translations[t]);let i=this.retrieveTranslations(t);return typeof i<"u"?(this.currentLang||(this.currentLang=t),i.pipe(ti(1)).subscribe(r=>{this.changeLang(t)}),i):(this.changeLang(t),zt(this.translations[t]))}retrieveTranslations(t){let i;return(typeof this.translations[t]>"u"||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),i=this._translationRequests[t]),i}getTranslation(t){this.pending=!0;let i=this.currentLoader.getTranslation(t).pipe(Mr(1),ti(1));return this.loadingTranslations=i.pipe(Ft(r=>this.compiler.compileTranslations(r,t)),Mr(1),ti(1)),this.loadingTranslations.subscribe({next:r=>{this.translations[t]=this.extend&&this.translations[t]?it(it({},r),this.translations[t]):r,this.updateLangs(),this.pending=!1},error:r=>{this.pending=!1}}),i}setTranslation(t,i,r=!1){i=this.compiler.compileTranslations(i,t),(r||this.extend)&&this.translations[t]?this.translations[t]=rL(this.translations[t],i):this.translations[t]=i,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(i=>{this.langs.indexOf(i)===-1&&this.langs.push(i)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,i,r){let s;if(i instanceof Array){let l={},d=!1;for(let f of i)l[f]=this.getParsedResult(t,f,r),Ia(l[f])&&(d=!0);if(d){let f=i.map(v=>Ia(l[v])?l[v]:zt(l[v]));return Hf(f).pipe(Ft(v=>{let x={};return v.forEach((O,A)=>{x[i[A]]=O}),x}))}return l}if(t&&(s=this.parser.interpolate(this.parser.getValue(t,i),r)),typeof s>"u"&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(s=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],i),r)),typeof s>"u"){let l={key:i,translateService:this};typeof r<"u"&&(l.interpolateParams=r),s=this.missingTranslationHandler.handle(l)}return typeof s<"u"?s:i}get(t,i){if(!ga(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(ao(r=>(r=this.getParsedResult(r,t,i),Ia(r)?r:zt(r))));{let r=this.getParsedResult(this.translations[this.currentLang],t,i);return Ia(r)?r:zt(r)}}getStreamOnTranslationChange(t,i){if(!ga(t)||!t.length)throw new Error('Parameter "key" required');return ua(Cu(()=>this.get(t,i)),this.onTranslationChange.pipe(Wi(r=>{let s=this.getParsedResult(r.translations,t,i);return typeof s.subscribe=="function"?s:zt(s)})))}stream(t,i){if(!ga(t)||!t.length)throw new Error('Parameter "key" required');return ua(Cu(()=>this.get(t,i)),this.onLangChange.pipe(Wi(r=>{let s=this.getParsedResult(r.translations,t,i);return Ia(s)?s:zt(s)})))}instant(t,i){if(!ga(t)||!t.length)throw new Error('Parameter "key" required');let r=this.getParsedResult(this.translations[this.currentLang],t,i);if(Ia(r)){if(t instanceof Array){let s={};return t.forEach((l,d)=>{s[t[d]]=t[d]}),s}return t}else return r}set(t,i,r=this.currentLang){this.translations[r][t]=this.compiler.compile(i,r),this.updateLangs(),this.onTranslationChange.emit({lang:r,translations:this.translations[r]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),this.defaultLang==null&&this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;if(t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,!(typeof t>"u"))return t.indexOf("-")!==-1&&(t=t.split("-")[0]),t.indexOf("_")!==-1&&(t=t.split("_")[0]),t}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}static \u0275fac=function(i){return new(i||e)(xt(cb),xt(Dp),xt(Sp),xt(Tp),xt(Mg),xt(lT),xt(cT),xt(dT),xt(uT))};static \u0275prov=ct({token:e,factory:e.\u0275fac})}return e})(),Ip=(()=>{class e{translateService;element;_ref;key;lastParams;currentParams;onLangChangeSub;onDefaultLangChangeSub;onTranslationChangeSub;set translate(t){t&&(this.key=t,this.checkNodes())}set translateParams(t){Dg(this.currentParams,t)||(this.currentParams=t,this.checkNodes(!0))}constructor(t,i,r){this.translateService=t,this.element=i,this._ref=r,this.onTranslationChangeSub||(this.onTranslationChangeSub=this.translateService.onTranslationChange.subscribe(s=>{s.lang===this.translateService.currentLang&&this.checkNodes(!0,s.translations)})),this.onLangChangeSub||(this.onLangChangeSub=this.translateService.onLangChange.subscribe(s=>{this.checkNodes(!0,s.translations)})),this.onDefaultLangChangeSub||(this.onDefaultLangChangeSub=this.translateService.onDefaultLangChange.subscribe(s=>{this.checkNodes(!0)}))}ngAfterViewChecked(){this.checkNodes()}checkNodes(t=!1,i){let r=this.element.nativeElement.childNodes;r.length||(this.setContent(this.element.nativeElement,this.key),r=this.element.nativeElement.childNodes);for(let s=0;s<r.length;++s){let l=r[s];if(l.nodeType===3){let d;if(t&&(l.lastKey=null),ga(l.lookupKey))d=l.lookupKey;else if(this.key)d=this.key;else{let f=this.getContent(l),v=f.trim();v.length&&(l.lookupKey=v,f!==l.currentValue?(d=v,l.originalContent=f||l.originalContent):l.originalContent?d=l.originalContent.trim():f!==l.currentValue&&(d=v,l.originalContent=f||l.originalContent))}this.updateValue(d,l,i)}}}updateValue(t,i,r){if(t){if(i.lastKey===t&&this.lastParams===this.currentParams)return;this.lastParams=this.currentParams;let s=l=>{l!==t&&(i.lastKey=t),i.originalContent||(i.originalContent=this.getContent(i)),i.currentValue=ga(l)?l:i.originalContent||t,this.setContent(i,this.key?i.currentValue:i.originalContent.replace(t,i.currentValue)),this._ref.markForCheck()};if(ga(r)){let l=this.translateService.getParsedResult(r,t,this.currentParams);Ia(l)?l.subscribe({next:s}):s(l)}else this.translateService.get(t,this.currentParams).subscribe(s)}}getContent(t){return ga(t.textContent)?t.textContent:t.data}setContent(t,i){ga(t.textContent)?t.textContent=i:t.data=i}ngOnDestroy(){this.onLangChangeSub&&this.onLangChangeSub.unsubscribe(),this.onDefaultLangChangeSub&&this.onDefaultLangChangeSub.unsubscribe(),this.onTranslationChangeSub&&this.onTranslationChangeSub.unsubscribe()}static \u0275fac=function(i){return new(i||e)(Ce(Op),Ce(ji),Ce(pi))};static \u0275dir=Zn({type:e,selectors:[["","translate",""],["","ngx-translate",""]],inputs:{translate:"translate",translateParams:"translateParams"}})}return e})(),Xs=(()=>{class e{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(t,i){this.translate=t,this._ref=i}updateValue(t,i,r){let s=l=>{this.value=l!==void 0?l:t,this.lastKey=t,this._ref.markForCheck()};if(r){let l=this.translate.getParsedResult(r,t,i);Ia(l.subscribe)?l.subscribe(s):s(l)}this.translate.get(t,i).subscribe(s)}transform(t,...i){if(!t||!t.length)return t;if(Dg(t,this.lastKey)&&Dg(i,this.lastParams))return this.value;let r;if(ga(i[0])&&i.length)if(typeof i[0]=="string"&&i[0].length){let s=i[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{r=JSON.parse(s)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${i[0]}`)}}else typeof i[0]=="object"&&!Array.isArray(i[0])&&(r=i[0]);return this.lastKey=t,this.lastParams=i,this.updateValue(t,r),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(s=>{this.lastKey&&s.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,r,s.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(s=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,r,s.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,r))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(i){return new(i||e)(Ce(Op,16),Ce(pi,16))};static \u0275pipe=pm({name:"translate",type:e,pure:!1});static \u0275prov=ct({token:e,factory:e.\u0275fac})}return e})(),Ep=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[t.loader||{provide:Dp,useClass:eL},t.compiler||{provide:Sp,useClass:iL},t.parser||{provide:Tp,useClass:nL},t.missingTranslationHandler||{provide:Mg,useClass:tL},cb,{provide:cT,useValue:t.isolate},{provide:lT,useValue:t.useDefaultLang},{provide:dT,useValue:t.extend},{provide:uT,useValue:t.defaultLanguage},Op]}}static forChild(t={}){return{ngModule:e,providers:[t.loader||{provide:Dp,useClass:eL},t.compiler||{provide:Sp,useClass:iL},t.parser||{provide:Tp,useClass:nL},t.missingTranslationHandler||{provide:Mg,useClass:tL},{provide:cT,useValue:t.isolate},{provide:lT,useValue:t.useDefaultLang},{provide:dT,useValue:t.extend},{provide:uT,useValue:t.defaultLanguage},Op]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=vn({type:e});static \u0275inj=_n({})}return e})();var PT=Lo(oL()),wb=Lo(cL()),m3=Lo(lL()),g3=Lo(uL());var dL=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;var pL=["top","right","bottom","left"],hL=["start","end"],vT=pL.reduce((e,n)=>e.concat(n,n+"-"+hL[0],n+"-"+hL[1]),[]),$l=Math.min,Uc=Math.max,Og=Math.round,Ig=Math.floor,$c=e=>({x:e,y:e}),oW={left:"right",right:"left",bottom:"top",top:"bottom"},cW={start:"end",end:"start"};function lb(e,n,t){return Uc(e,$l(n,t))}function Hc(e,n){return typeof e=="function"?e(n):e}function yo(e){return e.split("-")[0]}function bo(e){return e.split("-")[1]}function ub(e){return e==="x"?"y":"x"}function db(e){return e==="y"?"height":"width"}function Pp(e){return["top","bottom"].includes(yo(e))?"y":"x"}function hb(e){return ub(Pp(e))}function yT(e,n,t){t===void 0&&(t=!1);let i=bo(e),r=hb(e),s=db(r),l=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return n.reference[s]>n.floating[s]&&(l=Sg(l)),[l,Sg(l)]}function fL(e){let n=Sg(e);return[Tg(e),n,Tg(n)]}function Tg(e){return e.replace(/start|end/g,n=>cW[n])}function lW(e,n,t){let i=["left","right"],r=["right","left"],s=["top","bottom"],l=["bottom","top"];switch(e){case"top":case"bottom":return t?n?r:i:n?i:r;case"left":case"right":return n?s:l;default:return[]}}function mL(e,n,t,i){let r=bo(e),s=lW(yo(e),t==="start",i);return r&&(s=s.map(l=>l+"-"+r),n&&(s=s.concat(s.map(Tg)))),s}function Sg(e){return e.replace(/left|right|bottom|top/g,n=>oW[n])}function uW(e){return it({top:0,right:0,bottom:0,left:0},e)}function bT(e){return typeof e!="number"?uW(e):{top:e,right:e,bottom:e,left:e}}function rd(e){let{x:n,y:t,width:i,height:r}=e;return{width:i,height:r,top:t,left:n,right:n+i,bottom:t+r,x:n,y:t}}function gL(e,n,t){let{reference:i,floating:r}=e,s=Pp(n),l=hb(n),d=db(l),f=yo(n),v=s==="y",x=i.x+i.width/2-r.width/2,O=i.y+i.height/2-r.height/2,A=i[d]/2-r[d]/2,L;switch(f){case"top":L={x,y:i.y-r.height};break;case"bottom":L={x,y:i.y+i.height};break;case"right":L={x:i.x+i.width,y:O};break;case"left":L={x:i.x-r.width,y:O};break;default:L={x:i.x,y:i.y}}switch(bo(n)){case"start":L[l]-=A*(t&&v?-1:1);break;case"end":L[l]+=A*(t&&v?-1:1);break}return L}var _L=(e,n,t)=>Zr(void 0,null,function*(){let{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:l}=t,d=s.filter(Boolean),f=yield l.isRTL==null?void 0:l.isRTL(n),v=yield l.getElementRects({reference:e,floating:n,strategy:r}),{x,y:O}=gL(v,i,f),A=i,L={},U=0;for(let te=0;te<d.length;te++){let{name:ce,fn:fe}=d[te],{x:ye,y:Re,data:Ae,reset:We}=yield fe({x,y:O,initialPlacement:i,placement:A,strategy:r,middlewareData:L,rects:v,platform:l,elements:{reference:e,floating:n}});x=ye??x,O=Re??O,L=Pn(it({},L),{[ce]:it(it({},L[ce]),Ae)}),We&&U<=50&&(U++,typeof We=="object"&&(We.placement&&(A=We.placement),We.rects&&(v=We.rects===!0?yield l.getElementRects({reference:e,floating:n,strategy:r}):We.rects),{x,y:O}=gL(v,A,f)),te=-1)}return{x,y:O,placement:A,strategy:r,middlewareData:L}});function pb(e,n){return Zr(this,null,function*(){var t;n===void 0&&(n={});let{x:i,y:r,platform:s,rects:l,elements:d,strategy:f}=e,{boundary:v="clippingAncestors",rootBoundary:x="viewport",elementContext:O="floating",altBoundary:A=!1,padding:L=0}=Hc(n,e),U=bT(L),ce=d[A?O==="floating"?"reference":"floating":O],fe=rd(yield s.getClippingRect({element:(t=yield s.isElement==null?void 0:s.isElement(ce))==null||t?ce:ce.contextElement||(yield s.getDocumentElement==null?void 0:s.getDocumentElement(d.floating)),boundary:v,rootBoundary:x,strategy:f})),ye=O==="floating"?{x:i,y:r,width:l.floating.width,height:l.floating.height}:l.reference,Re=yield s.getOffsetParent==null?void 0:s.getOffsetParent(d.floating),Ae=(yield s.isElement==null?void 0:s.isElement(Re))?(yield s.getScale==null?void 0:s.getScale(Re))||{x:1,y:1}:{x:1,y:1},We=rd(s.convertOffsetParentRelativeRectToViewportRelativeRect?yield s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:ye,offsetParent:Re,strategy:f}):ye);return{top:(fe.top-We.top+U.top)/Ae.y,bottom:(We.bottom-fe.bottom+U.bottom)/Ae.y,left:(fe.left-We.left+U.left)/Ae.x,right:(We.right-fe.right+U.right)/Ae.x}})}var vL=e=>({name:"arrow",options:e,fn(t){return Zr(this,null,function*(){let{x:i,y:r,placement:s,rects:l,platform:d,elements:f,middlewareData:v}=t,{element:x,padding:O=0}=Hc(e,t)||{};if(x==null)return{};let A=bT(O),L={x:i,y:r},U=hb(s),te=db(U),ce=yield d.getDimensions(x),fe=U==="y",ye=fe?"top":"left",Re=fe?"bottom":"right",Ae=fe?"clientHeight":"clientWidth",We=l.reference[te]+l.reference[U]-L[U]-l.floating[te],ft=L[U]-l.reference[U],Et=yield d.getOffsetParent==null?void 0:d.getOffsetParent(x),Pt=Et?Et[Ae]:0;(!Pt||!(yield d.isElement==null?void 0:d.isElement(Et)))&&(Pt=f.floating[Ae]||l.floating[te]);let rt=We/2-ft/2,nn=Pt/2-ce[te]/2-1,Qt=$l(A[ye],nn),st=$l(A[Re],nn),Je=Qt,Ye=Pt-ce[te]-st,lt=Pt/2-ce[te]/2+rt,Te=lb(Je,lt,Ye),Se=!v.arrow&&bo(s)!=null&&lt!==Te&&l.reference[te]/2-(lt<Je?Qt:st)-ce[te]/2<0,Pe=Se?lt<Je?lt-Je:lt-Ye:0;return{[U]:L[U]+Pe,data:it({[U]:Te,centerOffset:lt-Te-Pe},Se&&{alignmentOffset:Pe}),reset:Se}})}});function dW(e,n,t){return(e?[...t.filter(r=>bo(r)===e),...t.filter(r=>bo(r)!==e)]:t.filter(r=>yo(r)===r)).filter(r=>e?bo(r)===e||(n?Tg(r)!==r:!1):!0)}var yL=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,fn(t){return Zr(this,null,function*(){var i,r,s;let{rects:l,middlewareData:d,placement:f,platform:v,elements:x}=t,Qt=Hc(e,t),{crossAxis:O=!1,alignment:A,allowedPlacements:L=vT,autoAlignment:U=!0}=Qt,te=Vf(Qt,["crossAxis","alignment","allowedPlacements","autoAlignment"]),ce=A!==void 0||L===vT?dW(A||null,U,L):L,fe=yield pb(t,te),ye=((i=d.autoPlacement)==null?void 0:i.index)||0,Re=ce[ye];if(Re==null)return{};let Ae=yT(Re,l,yield v.isRTL==null?void 0:v.isRTL(x.floating));if(f!==Re)return{reset:{placement:ce[0]}};let We=[fe[yo(Re)],fe[Ae[0]],fe[Ae[1]]],ft=[...((r=d.autoPlacement)==null?void 0:r.overflows)||[],{placement:Re,overflows:We}],Et=ce[ye+1];if(Et)return{data:{index:ye+1,overflows:ft},reset:{placement:Et}};let Pt=ft.map(st=>{let Je=bo(st.placement);return[st.placement,Je&&O?st.overflows.slice(0,2).reduce((Ye,lt)=>Ye+lt,0):st.overflows[0],st.overflows]}).sort((st,Je)=>st[1]-Je[1]),nn=((s=Pt.filter(st=>st[2].slice(0,bo(st[0])?2:3).every(Je=>Je<=0))[0])==null?void 0:s[0])||Pt[0][0];return nn!==f?{data:{index:ye+1,overflows:ft},reset:{placement:nn}}:{}})}}},bL=function(e){return e===void 0&&(e={}),{name:"flip",options:e,fn(t){return Zr(this,null,function*(){var i,r;let{placement:s,middlewareData:l,rects:d,initialPlacement:f,platform:v,elements:x}=t,Je=Hc(e,t),{mainAxis:O=!0,crossAxis:A=!0,fallbackPlacements:L,fallbackStrategy:U="bestFit",fallbackAxisSideDirection:te="none",flipAlignment:ce=!0}=Je,fe=Vf(Je,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((i=l.arrow)!=null&&i.alignmentOffset)return{};let ye=yo(s),Re=yo(f)===f,Ae=yield v.isRTL==null?void 0:v.isRTL(x.floating),We=L||(Re||!ce?[Sg(f)]:fL(f));!L&&te!=="none"&&We.push(...mL(f,ce,te,Ae));let ft=[f,...We],Et=yield pb(t,fe),Pt=[],rt=((r=l.flip)==null?void 0:r.overflows)||[];if(O&&Pt.push(Et[ye]),A){let Ye=yT(s,d,Ae);Pt.push(Et[Ye[0]],Et[Ye[1]])}if(rt=[...rt,{placement:s,overflows:Pt}],!Pt.every(Ye=>Ye<=0)){var nn,Qt;let Ye=(((nn=l.flip)==null?void 0:nn.index)||0)+1,lt=ft[Ye];if(lt)return{data:{index:Ye,overflows:rt},reset:{placement:lt}};let Te=(Qt=rt.filter(Se=>Se.overflows[0]<=0).sort((Se,Pe)=>Se.overflows[1]-Pe.overflows[1])[0])==null?void 0:Qt.placement;if(!Te)switch(U){case"bestFit":{var st;let Se=(st=rt.map(Pe=>[Pe.placement,Pe.overflows.filter(Ke=>Ke>0).reduce((Ke,ut)=>Ke+ut,0)]).sort((Pe,Ke)=>Pe[1]-Ke[1])[0])==null?void 0:st[0];Se&&(Te=Se);break}case"initialPlacement":Te=f;break}if(s!==Te)return{reset:{placement:Te}}}return{}})}}};function hW(e,n){return Zr(this,null,function*(){let{placement:t,platform:i,elements:r}=e,s=yield i.isRTL==null?void 0:i.isRTL(r.floating),l=yo(t),d=bo(t),f=Pp(t)==="y",v=["left","top"].includes(l)?-1:1,x=s&&f?-1:1,O=Hc(n,e),{mainAxis:A,crossAxis:L,alignmentAxis:U}=typeof O=="number"?{mainAxis:O,crossAxis:0,alignmentAxis:null}:it({mainAxis:0,crossAxis:0,alignmentAxis:null},O);return d&&typeof U=="number"&&(L=d==="end"?U*-1:U),f?{x:L*x,y:A*v}:{x:A*v,y:L*x}})}var wL=function(e){return e===void 0&&(e=0),{name:"offset",options:e,fn(t){return Zr(this,null,function*(){var i,r;let{x:s,y:l,placement:d,middlewareData:f}=t,v=yield hW(t,e);return d===((i=f.offset)==null?void 0:i.placement)&&(r=f.arrow)!=null&&r.alignmentOffset?{}:{x:s+v.x,y:l+v.y,data:Pn(it({},v),{placement:d})}})}}},CL=function(e){return e===void 0&&(e={}),{name:"shift",options:e,fn(t){return Zr(this,null,function*(){let{x:i,y:r,placement:s}=t,fe=Hc(e,t),{mainAxis:l=!0,crossAxis:d=!1,limiter:f={fn:ye=>{let{x:Re,y:Ae}=ye;return{x:Re,y:Ae}}}}=fe,v=Vf(fe,["mainAxis","crossAxis","limiter"]),x={x:i,y:r},O=yield pb(t,v),A=Pp(yo(s)),L=ub(A),U=x[L],te=x[A];if(l){let ye=L==="y"?"top":"left",Re=L==="y"?"bottom":"right",Ae=U+O[ye],We=U-O[Re];U=lb(Ae,U,We)}if(d){let ye=A==="y"?"top":"left",Re=A==="y"?"bottom":"right",Ae=te+O[ye],We=te-O[Re];te=lb(Ae,te,We)}let ce=f.fn(Pn(it({},t),{[L]:U,[A]:te}));return Pn(it({},ce),{data:{x:ce.x-i,y:ce.y-r}})})}}},xL=function(e){return e===void 0&&(e={}),{options:e,fn(n){let{x:t,y:i,placement:r,rects:s,middlewareData:l}=n,{offset:d=0,mainAxis:f=!0,crossAxis:v=!0}=Hc(e,n),x={x:t,y:i},O=Pp(r),A=ub(O),L=x[A],U=x[O],te=Hc(d,n),ce=typeof te=="number"?{mainAxis:te,crossAxis:0}:it({mainAxis:0,crossAxis:0},te);if(f){let Re=A==="y"?"height":"width",Ae=s.reference[A]-s.floating[Re]+ce.mainAxis,We=s.reference[A]+s.reference[Re]-ce.mainAxis;L<Ae?L=Ae:L>We&&(L=We)}if(v){var fe,ye;let Re=A==="y"?"width":"height",Ae=["top","left"].includes(yo(r)),We=s.reference[O]-s.floating[Re]+(Ae&&((fe=l.offset)==null?void 0:fe[O])||0)+(Ae?0:ce.crossAxis),ft=s.reference[O]+s.reference[Re]+(Ae?0:((ye=l.offset)==null?void 0:ye[O])||0)-(Ae?ce.crossAxis:0);U<We?U=We:U>ft&&(U=ft)}return{[A]:L,[O]:U}}}};function sd(e){return DL(e)?(e.nodeName||"").toLowerCase():"#document"}function ea(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function ec(e){var n;return(n=(DL(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function DL(e){return e instanceof Node||e instanceof ea(e).Node}function wo(e){return e instanceof Element||e instanceof ea(e).Element}function Co(e){return e instanceof HTMLElement||e instanceof ea(e).HTMLElement}function ML(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ea(e).ShadowRoot}function Ap(e){let{overflow:n,overflowX:t,overflowY:i,display:r}=qa(e);return/auto|scroll|overlay|hidden|clip/.test(n+i+t)&&!["inline","contents"].includes(r)}function TL(e){return["table","td","th"].includes(sd(e))}function fb(e){let n=mb(),t=qa(e);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!n&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!n&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function SL(e){let n=qc(e);for(;Co(n)&&!ad(n);){if(fb(n))return n;n=qc(n)}return null}function mb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ad(e){return["html","body","#document"].includes(sd(e))}function qa(e){return ea(e).getComputedStyle(e)}function Eg(e){return wo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function qc(e){if(sd(e)==="html")return e;let n=e.assignedSlot||e.parentNode||ML(e)&&e.host||ec(e);return ML(n)?n.host:n}function OL(e){let n=qc(e);return ad(n)?e.ownerDocument?e.ownerDocument.body:e.body:Co(n)&&Ap(n)?n:OL(n)}function kp(e,n,t){var i;n===void 0&&(n=[]),t===void 0&&(t=!0);let r=OL(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),l=ea(r);return s?n.concat(l,l.visualViewport||[],Ap(r)?r:[],l.frameElement&&t?kp(l.frameElement):[]):n.concat(r,kp(r,[],t))}function PL(e){let n=qa(e),t=parseFloat(n.width)||0,i=parseFloat(n.height)||0,r=Co(e),s=r?e.offsetWidth:t,l=r?e.offsetHeight:i,d=Og(t)!==s||Og(i)!==l;return d&&(t=s,i=l),{width:t,height:i,$:d}}function CT(e){return wo(e)?e:e.contextElement}function Rp(e){let n=CT(e);if(!Co(n))return $c(1);let t=n.getBoundingClientRect(),{width:i,height:r,$:s}=PL(n),l=(s?Og(t.width):t.width)/i,d=(s?Og(t.height):t.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!d||!Number.isFinite(d))&&(d=1),{x:l,y:d}}var pW=$c(0);function kL(e){let n=ea(e);return!mb()||!n.visualViewport?pW:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function fW(e,n,t){return n===void 0&&(n=!1),!t||n&&t!==ea(e)?!1:n}function od(e,n,t,i){n===void 0&&(n=!1),t===void 0&&(t=!1);let r=e.getBoundingClientRect(),s=CT(e),l=$c(1);n&&(i?wo(i)&&(l=Rp(i)):l=Rp(e));let d=fW(s,t,i)?kL(s):$c(0),f=(r.left+d.x)/l.x,v=(r.top+d.y)/l.y,x=r.width/l.x,O=r.height/l.y;if(s){let A=ea(s),L=i&&wo(i)?ea(i):i,U=A,te=U.frameElement;for(;te&&i&&L!==U;){let ce=Rp(te),fe=te.getBoundingClientRect(),ye=qa(te),Re=fe.left+(te.clientLeft+parseFloat(ye.paddingLeft))*ce.x,Ae=fe.top+(te.clientTop+parseFloat(ye.paddingTop))*ce.y;f*=ce.x,v*=ce.y,x*=ce.x,O*=ce.y,f+=Re,v+=Ae,U=ea(te),te=U.frameElement}}return rd({width:x,height:O,x:f,y:v})}var mW=[":popover-open",":modal"];function xT(e){return mW.some(n=>{try{return e.matches(n)}catch{return!1}})}function gW(e){let{elements:n,rect:t,offsetParent:i,strategy:r}=e,s=r==="fixed",l=ec(i),d=n?xT(n.floating):!1;if(i===l||d&&s)return t;let f={scrollLeft:0,scrollTop:0},v=$c(1),x=$c(0),O=Co(i);if((O||!O&&!s)&&((sd(i)!=="body"||Ap(l))&&(f=Eg(i)),Co(i))){let A=od(i);v=Rp(i),x.x=A.x+i.clientLeft,x.y=A.y+i.clientTop}return{width:t.width*v.x,height:t.height*v.y,x:t.x*v.x-f.scrollLeft*v.x+x.x,y:t.y*v.y-f.scrollTop*v.y+x.y}}function _W(e){return Array.from(e.getClientRects())}function AL(e){return od(ec(e)).left+Eg(e).scrollLeft}function vW(e){let n=ec(e),t=Eg(e),i=e.ownerDocument.body,r=Uc(n.scrollWidth,n.clientWidth,i.scrollWidth,i.clientWidth),s=Uc(n.scrollHeight,n.clientHeight,i.scrollHeight,i.clientHeight),l=-t.scrollLeft+AL(e),d=-t.scrollTop;return qa(i).direction==="rtl"&&(l+=Uc(n.clientWidth,i.clientWidth)-r),{width:r,height:s,x:l,y:d}}function yW(e,n){let t=ea(e),i=ec(e),r=t.visualViewport,s=i.clientWidth,l=i.clientHeight,d=0,f=0;if(r){s=r.width,l=r.height;let v=mb();(!v||v&&n==="fixed")&&(d=r.offsetLeft,f=r.offsetTop)}return{width:s,height:l,x:d,y:f}}function bW(e,n){let t=od(e,!0,n==="fixed"),i=t.top+e.clientTop,r=t.left+e.clientLeft,s=Co(e)?Rp(e):$c(1),l=e.clientWidth*s.x,d=e.clientHeight*s.y,f=r*s.x,v=i*s.y;return{width:l,height:d,x:f,y:v}}function IL(e,n,t){let i;if(n==="viewport")i=yW(e,t);else if(n==="document")i=vW(ec(e));else if(wo(n))i=bW(n,t);else{let r=kL(e);i=Pn(it({},n),{x:n.x-r.x,y:n.y-r.y})}return rd(i)}function RL(e,n){let t=qc(e);return t===n||!wo(t)||ad(t)?!1:qa(t).position==="fixed"||RL(t,n)}function wW(e,n){let t=n.get(e);if(t)return t;let i=kp(e,[],!1).filter(d=>wo(d)&&sd(d)!=="body"),r=null,s=qa(e).position==="fixed",l=s?qc(e):e;for(;wo(l)&&!ad(l);){let d=qa(l),f=fb(l);!f&&d.position==="fixed"&&(r=null),(s?!f&&!r:!f&&d.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Ap(l)&&!f&&RL(e,l))?i=i.filter(x=>x!==l):r=d,l=qc(l)}return n.set(e,i),i}function CW(e){let{element:n,boundary:t,rootBoundary:i,strategy:r}=e,l=[...t==="clippingAncestors"?xT(n)?[]:wW(n,this._c):[].concat(t),i],d=l[0],f=l.reduce((v,x)=>{let O=IL(n,x,r);return v.top=Uc(O.top,v.top),v.right=$l(O.right,v.right),v.bottom=$l(O.bottom,v.bottom),v.left=Uc(O.left,v.left),v},IL(n,d,r));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function xW(e){let{width:n,height:t}=PL(e);return{width:n,height:t}}function MW(e,n,t){let i=Co(n),r=ec(n),s=t==="fixed",l=od(e,!0,s,n),d={scrollLeft:0,scrollTop:0},f=$c(0);if(i||!i&&!s)if((sd(n)!=="body"||Ap(r))&&(d=Eg(n)),i){let O=od(n,!0,s,n);f.x=O.x+n.clientLeft,f.y=O.y+n.clientTop}else r&&(f.x=AL(r));let v=l.left+d.scrollLeft-f.x,x=l.top+d.scrollTop-f.y;return{x:v,y:x,width:l.width,height:l.height}}function wT(e){return qa(e).position==="static"}function EL(e,n){return!Co(e)||qa(e).position==="fixed"?null:n?n(e):e.offsetParent}function FL(e,n){let t=ea(e);if(xT(e))return t;if(!Co(e)){let r=qc(e);for(;r&&!ad(r);){if(wo(r)&&!wT(r))return r;r=qc(r)}return t}let i=EL(e,n);for(;i&&TL(i)&&wT(i);)i=EL(i,n);return i&&ad(i)&&wT(i)&&!fb(i)?t:i||SL(e)||t}var DW=function(e){return Zr(this,null,function*(){let n=this.getOffsetParent||FL,t=this.getDimensions,i=yield t(e.floating);return{reference:MW(e.reference,yield n(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}})};function TW(e){return qa(e).direction==="rtl"}var SW={convertOffsetParentRelativeRectToViewportRelativeRect:gW,getDocumentElement:ec,getClippingRect:CW,getOffsetParent:FL,getElementRects:DW,getClientRects:_W,getDimensions:xW,getScale:Rp,isElement:wo,isRTL:TW};function OW(e,n){let t=null,i,r=ec(e);function s(){var d;clearTimeout(i),(d=t)==null||d.disconnect(),t=null}function l(d,f){d===void 0&&(d=!1),f===void 0&&(f=1),s();let{left:v,top:x,width:O,height:A}=e.getBoundingClientRect();if(d||n(),!O||!A)return;let L=Ig(x),U=Ig(r.clientWidth-(v+O)),te=Ig(r.clientHeight-(x+A)),ce=Ig(v),ye={rootMargin:-L+"px "+-U+"px "+-te+"px "+-ce+"px",threshold:Uc(0,$l(1,f))||1},Re=!0;function Ae(We){let ft=We[0].intersectionRatio;if(ft!==f){if(!Re)return l();ft?l(!1,ft):i=setTimeout(()=>{l(!1,1e-7)},1e3)}Re=!1}try{t=new IntersectionObserver(Ae,Pn(it({},ye),{root:r.ownerDocument}))}catch{t=new IntersectionObserver(Ae,ye)}t.observe(e)}return l(!0),s}function LL(e,n,t,i){i===void 0&&(i={});let{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:f=!1}=i,v=CT(e),x=r||s?[...v?kp(v):[],...kp(n)]:[];x.forEach(fe=>{r&&fe.addEventListener("scroll",t,{passive:!0}),s&&fe.addEventListener("resize",t)});let O=v&&d?OW(v,t):null,A=-1,L=null;l&&(L=new ResizeObserver(fe=>{let[ye]=fe;ye&&ye.target===v&&L&&(L.unobserve(n),cancelAnimationFrame(A),A=requestAnimationFrame(()=>{var Re;(Re=L)==null||Re.observe(n)})),t()}),v&&!f&&L.observe(v),L.observe(n));let U,te=f?od(e):null;f&&ce();function ce(){let fe=od(e);te&&(fe.x!==te.x||fe.y!==te.y||fe.width!==te.width||fe.height!==te.height)&&t(),te=fe,U=requestAnimationFrame(ce)}return t(),()=>{var fe;x.forEach(ye=>{r&&ye.removeEventListener("scroll",t),s&&ye.removeEventListener("resize",t)}),O?.(),(fe=L)==null||fe.disconnect(),L=null,f&&cancelAnimationFrame(U)}}var NL=wL,BL=yL,jL=CL,VL=bL;var zL=vL;var UL=xL,$L=(e,n,t)=>{let i=new Map,r=it({platform:SW},t),s=Pn(it({},r.platform),{_c:i});return _L(e,n,Pn(it({},r),{platform:s}))};var IW=["popperViewRef"],HL=["*","*"];function EW(e,n){if(e&1&&(K(0,"div",5),Qs(1),Q()),e&2){let t=Y();H("innerHTML",t.text,Wo)}}function PW(e,n){e&1&&(K(0,"div",6),Qs(1,1),Q())}var Ga=function(e){return e.click="click",e.hover="hover",e.mousedown="mousedown",e.none="none",e}(Ga||{}),MT=(()=>{class e{elRef;_viewRef;_changeDetectorRef;static nextId=0;ariaHidden;arrowColor=null;displayType;id=`ngx_poppperjs_${++e.nextId}`;isMouseOver=!1;onHidden=new Zt;onUpdate;opacity;popperInstance;popperOptions={disableAnimation:!1,disableDefaultStyling:!1,boundariesElement:"",trigger:Ga.hover,positionFixed:!1,appendToBody:!1,popperModifiers:[]};popperViewRef;referenceObject;state;text;_destroy$=new kn;_resizeCtrl$=new kn;_styleId=`${this.id}_style`;constructor(t,i,r){this.elRef=t,this._viewRef=i,this._changeDetectorRef=r,this._toggleVisibility(!1)}clean(){this.toggleVisibility(!1),this.popperInstance&&this.popperInstance()}extractAppliedClassListExpr(t=[]){return(Array.isArray(t)?t:typeof t=="string"?t.replace(/ /,"").split(","):[]).reduce((r,s)=>(r[s]=!0,r),{})}hide(){this.popperInstance&&this.popperInstance(),this.toggleVisibility(!1),this.onHidden.emit()}ngOnDestroy(){this._destroy$.next(),this.clean(),this.popperOptions.appendTo&&this.elRef&&this.elRef.nativeElement&&this.elRef.nativeElement.parentNode&&(this._viewRef.detach(),this.elRef.nativeElement.parentNode.removeChild(this.elRef.nativeElement))}onDocumentResize(){this.update()}onMouseOver(){this.isMouseOver=!0}show(){this.referenceObject&&(this._resizeCtrl$.next(),this._determineArrowColor(),this.popperInstance=LL(this.referenceObject,this.popperViewRef.nativeElement,()=>{this._computePosition()}),mr(document,"resize").pipe(Yn(this._resizeCtrl$),Yn(this._destroy$)).subscribe({next:()=>this.onDocumentResize()}))}showOnLeave(){this.isMouseOver=!1,!(this.popperOptions.trigger!==Ga.hover&&!this.popperOptions.hideOnMouseLeave)&&this.hide()}toggleVisibility(t){this._toggleVisibility(t),this._changeDetectorRef.destroyed||this._changeDetectorRef.detectChanges()}update(){this._computePosition()}_computePosition(){let t=this.popperOptions.appendTo&&document.querySelector(this.popperOptions.appendTo);t&&this.elRef.nativeElement.parentNode!==t&&(this.elRef.nativeElement.parentNode&&this.elRef.nativeElement.parentNode.removeChild(this.elRef.nativeElement),t.appendChild(this.elRef.nativeElement));let i=this.elRef.nativeElement.querySelector(".ngxp__arrow"),r=i.offsetWidth,s=Math.sqrt(2*r**2)/2,l=[];this.popperOptions.flip&&l.push(VL()),this.popperOptions.preventOverflow&&l.push(jL({limiter:UL()}));let d={placement:this.popperOptions.placement,strategy:this.popperOptions.positionFixed?"fixed":"absolute",middleware:[NL(s),...l,zL({element:i,padding:4})]};if(!this.popperOptions.preventOverflow&&!d.placement){let f=this.popperOptions.boundariesElement&&document.querySelector(this.popperOptions.boundariesElement);d.middleware.push(BL({boundary:f}))}$L(this.referenceObject,this.popperViewRef.nativeElement,d).then(({middlewareData:f,x:v,y:x,placement:O})=>{let A=O.split("-")[0];if(this.popperViewRef.nativeElement.setAttribute("data-popper-placement",A),f.arrow){let L={top:"bottom",right:"left",bottom:"top",left:"right"}[A];Object.assign(i.style,{left:f.arrow.x!=null?`${f.arrow.x}px`:"",top:f.arrow.y!=null?`${f.arrow.y}px`:"",[L]:`${-r/2}px`})}Object.assign(this.popperViewRef.nativeElement.style,{left:`${v}px`,top:`${x}px`}),this.toggleVisibility(!0),this.onUpdate?.()})}_createArrowSelector(){return`div#${this.id}.ngxp__container > .ngxp__arrow.ngxp__force-arrow`}_determineArrowColor(){if(!this.popperOptions.styles||this.arrowColor)return!1;let t=this.popperOptions.styles["background-color"]||this.popperOptions.styles.backgroundColor;if(this.arrowColor===t)return!1;this.arrowColor=t;let i=document.querySelector(`#${this._styleId}`),r=this.arrowColor?`${this._createArrowSelector()}:before { background-color: ${this.arrowColor}; }`:"";i||(i=document.createElement("style"),i.id=this._styleId,i.setAttribute("type","text/css"),document.head.appendChild(i)),i.styleSheet?i.styleSheet.cssText=r:i.innerHTML=r}_toggleVisibility(t){this.displayType=["none","block"][+t],this.opacity=+t,this.ariaHidden=`${!t}`,this.state=t}static \u0275fac=function(i){return new(i||e)(Ce(ji),Ce(Dr),Ce(pi))};static \u0275cmp=Wt({type:e,selectors:[["popper-content"]],viewQuery:function(i,r){if(i&1&&bi(IW,7),i&2){let s;ui(s=di())&&(r.popperViewRef=s.first)}},hostBindings:function(i,r){i&1&&nt("mouseover",function(){return r.onMouseOver()})("mouseleave",function(){return r.showOnLeave()})},exportAs:["ngxPopperjsContent"],standalone:!0,features:[Sc],ngContentSelectors:HL,decls:5,vars:19,consts:[["popperViewRef",""],[3,"ngStyle","ngClass"],["class","ngxp__inner",3,"innerHTML",4,"ngIf"],["class","ngxp__inner",4,"ngIf"],[1,"ngxp__arrow",3,"ngClass"],[1,"ngxp__inner",3,"innerHTML"],[1,"ngxp__inner"]],template:function(i,r){i&1&&(mo(HL),K(0,"div",1,0),de(2,EW,2,1,"div",2)(3,PW,2,0,"div",3),Me(4,"div",4),Q()),i&2&&(Ra("display",r.displayType)("opacity",r.opacity),Rn("ngxp__container",!r.popperOptions.disableDefaultStyling)("ngxp__animation",!r.popperOptions.disableAnimation),H("ngStyle",r.popperOptions.styles)("ngClass",r.extractAppliedClassListExpr(r.popperOptions.applyClass)),_s("id",r.id)("aria-hidden",r.ariaHidden)("aria-describedby",r.popperOptions.ariaDescribe||null)("role",r.popperOptions.ariaRole),V(2),H("ngIf",r.text),V(),H("ngIf",!r.text),V(),Rn("ngxp__force-arrow",r.arrowColor),H("ngClass",r.extractAppliedClassListExpr(r.popperOptions.applyArrowClass)))},dependencies:[Ec,$v,Zi],styles:[`popper-content{position:relative;display:block}.ngxp__container{display:none;position:absolute;border-radius:3px;border:1px solid grey;box-shadow:0 0 2px #00000080;padding:10px}.ngxp__container.ngxp__animation{animation:ngxp-fadeIn .15s ease-out}.ngxp__container>.ngxp__arrow{position:absolute;width:10px;height:10px;z-index:-1;transform:rotate(45deg);background-color:red}.ngxp__container[data-popper-placement^=top]>.ngxp__arrow{bottom:-5px}.ngxp__container[data-popper-placement^=bottom]>.ngxp__arrow{top:-5px}.ngxp__container[data-popper-placement^=left]>.ngxp__arrow{right:-5px}.ngxp__container[data-popper-placement^=right]>.ngxp__arrow{left:-5px}@keyframes ngxp-fadeIn{0%{display:none;opacity:0}1%{display:block;opacity:0}to{display:block;opacity:1}}
`],encapsulation:2,changeDetection:0})}return e})(),GL=new Lt("NGX_POPPERJS_DEFAULTS"),Pg=class{static coerceBooleanProperty(n){return n!=null&&`${n}`!="false"}},gb=class e{_changeDetectorRef;_elementRef;_vcr;_popperDefaults;static baseOptions={showDelay:0,hideOnClickOutside:!0,hideOnMouseLeave:!1,hideOnScroll:!1,appendTo:void 0,ariaRole:"popper",ariaDescribe:"",styles:{},trigger:Ga.click};set applyClass(n){n!==this._applyClass&&(this._applyClass=n,this._checkExisting("applyClass",n))}get applyClass(){return this._applyClass}set hideOnClickOutside(n){this._hideOnClickOutside=Pg.coerceBooleanProperty(n)}get hideOnClickOutside(){return this._hideOnClickOutside}set content(n){n!==this._content&&(this._content=n,this._popperContent&&(typeof n=="string"?this._popperContent.text=n:this._popperContent=n))}get content(){return this._content}set flip(n){this._flip=Pg.coerceBooleanProperty(n),this._checkExisting("preventOverflow",this._preventOverflow)}get flip(){return this._flip}set placement(n){this._placement=n,this._checkExisting("placement",n)}get placement(){return this._placement}set preventOverflow(n){this._preventOverflow=Pg.coerceBooleanProperty(n),this._checkExisting("preventOverflow",this._preventOverflow)}get preventOverflow(){return this._preventOverflow}set popperApplyArrowClass(n){if(n!==this._applyArrowClass&&(this._applyArrowClass=n,this._popperContent)){if(this._popperContent.popperOptions.applyArrowClass=n,!this._shown)return;this._popperContent.update()}}get popperApplyArrowClass(){return this._applyArrowClass}set disabled(n){n!==this._disabled&&(this._disabled=!!n,this._shown&&this.hide())}get disabled(){return this._disabled}ariaDescribe;ariaRole;boundariesElement;disableAnimation;disableStyle;hideOnMouseLeave;hideOnScroll;hideTimeout=0;popperAppendTo;popperOnHidden=new Zt;popperOnShown=new Zt;popperOnUpdate=new Zt;positionFixed;showDelay;showOnStart;showTrigger;styles;targetElement;timeoutAfterShow=0;_applyArrowClass;_applyClass;_content;_destroy$=new kn;_disabled;_flip=!0;_globalEventListenersCtrl$=new kn;_hideOnClickOutside=!0;_placement;_popperContent;_popperContentClass=MT;_popperContentRef;_preventOverflow=!0;_scheduledHideTimeoutCtrl$=new kn;_scheduledShowTimeoutCtrl$=new kn;_shown=!1;constructor(n,t,i,r={}){this._changeDetectorRef=n,this._elementRef=t,this._vcr=i,this._popperDefaults=r,e.baseOptions=it(it({},e.baseOptions),this._popperDefaults)}static assignDefined(n,...t){for(let i of t)for(let r of Object.keys(i)){let s=i[r];s!==void 0&&(n[r]=s)}return n}applyTriggerListeners(){switch(this.showTrigger){case Ga.click:this._addListener("click",this.toggle.bind(this));break;case Ga.mousedown:this._addListener("mousedown",this.toggle.bind(this));break;case Ga.hover:this._addListener("mouseenter",this.scheduledShow.bind(this,this.showDelay)),["touchend","touchcancel","mouseleave"].forEach(n=>{this._addListener(n,this.scheduledHide.bind(this,null,this.hideTimeout))});break}this.showTrigger!==Ga.hover&&this.hideOnMouseLeave&&["touchend","touchcancel","mouseleave"].forEach(n=>{this._addListener(n,this.scheduledHide.bind(this,null,this.hideTimeout))})}getRefElement(){return this.targetElement||this._elementRef.nativeElement}hide(){if(!this.disabled){if(!this._shown){this._scheduledShowTimeoutCtrl$.next();return}this._shown=!1,this._popperContentRef?this._popperContentRef.instance.hide():this._popperContent.hide(),this.popperOnHidden.emit(this),this._globalEventListenersCtrl$.next()}}hideOnClickOutsideHandler(n){this.disabled||!this.hideOnClickOutside||n.target===this._popperContent.elRef.nativeElement||this._popperContent.elRef.nativeElement.contains(n.target)||this.scheduledHide(n,this.hideTimeout)}hideOnScrollHandler(n){this.disabled||!this.hideOnScroll||this.scheduledHide(n,this.hideTimeout)}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._popperContent&&this._popperContent.clean()}ngOnInit(){typeof this.content=="string"?(this._popperContent=this._constructContent(),this._popperContent.text=this.content):typeof this.content>"u"?(this._popperContent=this._constructContent(),this._popperContent.text=""):this._popperContent=this.content;let n=this._popperContent;n.referenceObject=this.getRefElement(),this._setContentProperties(n),this._setDefaults(),this.applyTriggerListeners(),this.showOnStart&&this.scheduledShow()}scheduledHide(n=null,t=this.hideTimeout){this.disabled||(this._scheduledShowTimeoutCtrl$.next(),Bo(t).pipe(Yn(this._scheduledHideTimeoutCtrl$),Yn(this._destroy$)).subscribe({next:()=>{let i=n?n.toElement:null,r=this._popperContent.popperViewRef?this._popperContent.popperViewRef.nativeElement:!1;!r||r===i||r.contains(i)||this.content&&this.content.isMouseOver||(this.hide(),this._applyChanges())}}))}scheduledShow(n=this.showDelay){this.disabled||(this._scheduledHideTimeoutCtrl$.next(),Bo(n).pipe(Yn(this._scheduledShowTimeoutCtrl$),Yn(this._destroy$)).subscribe({next:()=>{this.show(),this._applyChanges()}}))}show(){if(this._shown){this._scheduledHideTimeoutCtrl$.next();return}this._shown=!0;let n=this._popperContent,t=this.getRefElement();n.referenceObject!==t&&(n.referenceObject=t),this._setContentProperties(n),n.show(),this.popperOnShown.emit(this),this.timeoutAfterShow>0&&this.scheduledHide(null,this.timeoutAfterShow),mr(document,"click").pipe(Yn(this._globalEventListenersCtrl$),Yn(this._destroy$)).subscribe({next:i=>this.hideOnClickOutsideHandler(i)}),mr(this._getScrollParent(this.getRefElement()),"scroll").pipe(Yn(this._globalEventListenersCtrl$),Yn(this._destroy$)).subscribe({next:i=>{this.hideOnScrollHandler(i)}})}toggle(){this.disabled||(this._shown?this.scheduledHide(null,this.hideTimeout):this.scheduledShow())}_addListener(n,t){mr(this._elementRef.nativeElement,n).pipe(Yn(this._destroy$)).subscribe({next:t})}_applyChanges(){this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges()}_checkExisting(n,t){if(this._popperContent){if(this._popperContent.popperOptions[n]=t,!this._shown)return;this._popperContent.update()}}_constructContent(){return this._popperContentRef=this._vcr.createComponent(this._popperContentClass),this._popperContentRef.instance}_getScrollParent(n){let i=n instanceof HTMLElement&&window.getComputedStyle(n).overflowY,r=i!=="visible"&&i!=="hidden";if(n){if(r&&n.scrollHeight>n.clientHeight)return n}else return null;return this._getScrollParent(n.parentNode)||document}_onPopperUpdate(n){this.popperOnUpdate.emit(n)}_setContentProperties(n){n.popperOptions=e.assignDefined(n.popperOptions,e.baseOptions,{showDelay:this.showDelay,disableAnimation:this.disableAnimation,disableDefaultStyling:this.disableStyle,placement:this.placement,boundariesElement:this.boundariesElement,trigger:this.showTrigger,positionFixed:this.positionFixed,ariaDescribe:this.ariaDescribe,ariaRole:this.ariaRole,applyClass:this.applyClass,applyArrowClass:this.popperApplyArrowClass,hideOnMouseLeave:this.hideOnMouseLeave,styles:this.styles,appendTo:this.popperAppendTo,preventOverflow:this.preventOverflow}),n.onUpdate=this._onPopperUpdate.bind(this),n.onHidden.pipe(Yn(this._destroy$)).subscribe(this.hide.bind(this))}_setDefaults(){["showDelay","hideOnScroll","hideOnMouseLeave","hideOnClickOutside","ariaRole","ariaDescribe"].forEach(n=>{this[n]=this[n]===void 0?e.baseOptions[n]:this[n]}),this.showTrigger=this.showTrigger||e.baseOptions.trigger,this.styles=this.styles===void 0?it({},e.baseOptions.styles):this.styles}static \u0275fac=function(t){return new(t||e)(Ce(pi),Ce(ji),Ce(Dr),Ce(GL))};static \u0275dir=Zn({type:e,selectors:[["","popper",""]],inputs:{applyClass:[Sn.None,"popperApplyClass","applyClass"],hideOnClickOutside:[Sn.None,"popperHideOnClickOutside","hideOnClickOutside"],content:[Sn.None,"popper","content"],flip:[Sn.None,"popperFlip","flip"],placement:[Sn.None,"popperPlacement","placement"],preventOverflow:[Sn.None,"popperPreventOverflow","preventOverflow"],popperApplyArrowClass:"popperApplyArrowClass",disabled:[Sn.None,"popperDisabled","disabled"],ariaDescribe:[Sn.None,"popperAriaDescribeBy","ariaDescribe"],ariaRole:[Sn.None,"popperAriaRole","ariaRole"],boundariesElement:[Sn.None,"popperBoundaries","boundariesElement"],disableAnimation:[Sn.None,"popperDisableAnimation","disableAnimation"],disableStyle:[Sn.None,"popperDisableStyle","disableStyle"],hideOnMouseLeave:[Sn.None,"popperHideOnMouseLeave","hideOnMouseLeave"],hideOnScroll:[Sn.None,"popperHideOnScroll","hideOnScroll"],hideTimeout:[Sn.None,"popperTimeout","hideTimeout"],popperAppendTo:"popperAppendTo",positionFixed:[Sn.None,"popperPositionFixed","positionFixed"],showDelay:[Sn.None,"popperDelay","showDelay"],showOnStart:[Sn.None,"popperShowOnStart","showOnStart"],showTrigger:[Sn.None,"popperTrigger","showTrigger"],styles:[Sn.None,"popperStyles","styles"],targetElement:[Sn.None,"popperTarget","targetElement"],timeoutAfterShow:[Sn.None,"popperTimeoutAfterShow","timeoutAfterShow"]},outputs:{popperOnHidden:"popperOnHidden",popperOnShown:"popperOnShown",popperOnUpdate:"popperOnUpdate"},exportAs:["popper"],standalone:!0})};var kg=function(e){return e.TOP="top",e.BOTTOM="bottom",e.LEFT="left",e.RIGHT="right",e.TOPSTART="top-start",e.BOTTOMSTART="bottom-start",e.LEFTSTART="left-start",e.RIGHTSTART="right-start",e.TOPEND="top-end",e.BOTTOMEND="bottom-end",e.LEFTEND="left-end",e.RIGHTEND="right-end",e}(kg||{});function qL(e={}){return[{provide:GL,useValue:e}]}var WL=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[qL(t)]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=vn({type:e});static \u0275inj=_n({providers:[qL()],imports:[Na]})}return e})();var XL=Lo(JL(),1);function DT(){return DT=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},DT.apply(this,arguments)}var XW=/[|\\{}()[\]^$+*?.]/g,eZ=function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(XW,"\\$&")},tZ=[["\xDF","ss"],["\u1E9E","Ss"],["\xE4","ae"],["\xC4","Ae"],["\xF6","oe"],["\xD6","Oe"],["\xFC","ue"],["\xDC","Ue"],["\xC0","A"],["\xC1","A"],["\xC2","A"],["\xC3","A"],["\xC4","Ae"],["\xC5","A"],["\xC6","AE"],["\xC7","C"],["\xC8","E"],["\xC9","E"],["\xCA","E"],["\xCB","E"],["\xCC","I"],["\xCD","I"],["\xCE","I"],["\xCF","I"],["\xD0","D"],["\xD1","N"],["\xD2","O"],["\xD3","O"],["\xD4","O"],["\xD5","O"],["\xD6","Oe"],["\u0150","O"],["\xD8","O"],["\xD9","U"],["\xDA","U"],["\xDB","U"],["\xDC","Ue"],["\u0170","U"],["\xDD","Y"],["\xDE","TH"],["\xDF","ss"],["\xE0","a"],["\xE1","a"],["\xE2","a"],["\xE3","a"],["\xE4","ae"],["\xE5","a"],["\xE6","ae"],["\xE7","c"],["\xE8","e"],["\xE9","e"],["\xEA","e"],["\xEB","e"],["\xEC","i"],["\xED","i"],["\xEE","i"],["\xEF","i"],["\xF0","d"],["\xF1","n"],["\xF2","o"],["\xF3","o"],["\xF4","o"],["\xF5","o"],["\xF6","oe"],["\u0151","o"],["\xF8","o"],["\xF9","u"],["\xFA","u"],["\xFB","u"],["\xFC","ue"],["\u0171","u"],["\xFD","y"],["\xFE","th"],["\xFF","y"],["\u1E9E","SS"],["\xE0","a"],["\xC0","A"],["\xE1","a"],["\xC1","A"],["\xE2","a"],["\xC2","A"],["\xE3","a"],["\xC3","A"],["\xE8","e"],["\xC8","E"],["\xE9","e"],["\xC9","E"],["\xEA","e"],["\xCA","E"],["\xEC","i"],["\xCC","I"],["\xED","i"],["\xCD","I"],["\xF2","o"],["\xD2","O"],["\xF3","o"],["\xD3","O"],["\xF4","o"],["\xD4","O"],["\xF5","o"],["\xD5","O"],["\xF9","u"],["\xD9","U"],["\xFA","u"],["\xDA","U"],["\xFD","y"],["\xDD","Y"],["\u0103","a"],["\u0102","A"],["\u0110","D"],["\u0111","d"],["\u0129","i"],["\u0128","I"],["\u0169","u"],["\u0168","U"],["\u01A1","o"],["\u01A0","O"],["\u01B0","u"],["\u01AF","U"],["\u1EA1","a"],["\u1EA0","A"],["\u1EA3","a"],["\u1EA2","A"],["\u1EA5","a"],["\u1EA4","A"],["\u1EA7","a"],["\u1EA6","A"],["\u1EA9","a"],["\u1EA8","A"],["\u1EAB","a"],["\u1EAA","A"],["\u1EAD","a"],["\u1EAC","A"],["\u1EAF","a"],["\u1EAE","A"],["\u1EB1","a"],["\u1EB0","A"],["\u1EB3","a"],["\u1EB2","A"],["\u1EB5","a"],["\u1EB4","A"],["\u1EB7","a"],["\u1EB6","A"],["\u1EB9","e"],["\u1EB8","E"],["\u1EBB","e"],["\u1EBA","E"],["\u1EBD","e"],["\u1EBC","E"],["\u1EBF","e"],["\u1EBE","E"],["\u1EC1","e"],["\u1EC0","E"],["\u1EC3","e"],["\u1EC2","E"],["\u1EC5","e"],["\u1EC4","E"],["\u1EC7","e"],["\u1EC6","E"],["\u1EC9","i"],["\u1EC8","I"],["\u1ECB","i"],["\u1ECA","I"],["\u1ECD","o"],["\u1ECC","O"],["\u1ECF","o"],["\u1ECE","O"],["\u1ED1","o"],["\u1ED0","O"],["\u1ED3","o"],["\u1ED2","O"],["\u1ED5","o"],["\u1ED4","O"],["\u1ED7","o"],["\u1ED6","O"],["\u1ED9","o"],["\u1ED8","O"],["\u1EDB","o"],["\u1EDA","O"],["\u1EDD","o"],["\u1EDC","O"],["\u1EDF","o"],["\u1EDE","O"],["\u1EE1","o"],["\u1EE0","O"],["\u1EE3","o"],["\u1EE2","O"],["\u1EE5","u"],["\u1EE4","U"],["\u1EE7","u"],["\u1EE6","U"],["\u1EE9","u"],["\u1EE8","U"],["\u1EEB","u"],["\u1EEA","U"],["\u1EED","u"],["\u1EEC","U"],["\u1EEF","u"],["\u1EEE","U"],["\u1EF1","u"],["\u1EF0","U"],["\u1EF3","y"],["\u1EF2","Y"],["\u1EF5","y"],["\u1EF4","Y"],["\u1EF7","y"],["\u1EF6","Y"],["\u1EF9","y"],["\u1EF8","Y"],["\u0621","e"],["\u0622","a"],["\u0623","a"],["\u0624","w"],["\u0625","i"],["\u0626","y"],["\u0627","a"],["\u0628","b"],["\u0629","t"],["\u062A","t"],["\u062B","th"],["\u062C","j"],["\u062D","h"],["\u062E","kh"],["\u062F","d"],["\u0630","dh"],["\u0631","r"],["\u0632","z"],["\u0633","s"],["\u0634","sh"],["\u0635","s"],["\u0636","d"],["\u0637","t"],["\u0638","z"],["\u0639","e"],["\u063A","gh"],["\u0640","_"],["\u0641","f"],["\u0642","q"],["\u0643","k"],["\u0644","l"],["\u0645","m"],["\u0646","n"],["\u0647","h"],["\u0648","w"],["\u0649","a"],["\u064A","y"],["\u064E\u200E","a"],["\u064F","u"],["\u0650\u200E","i"],["\u0660","0"],["\u0661","1"],["\u0662","2"],["\u0663","3"],["\u0664","4"],["\u0665","5"],["\u0666","6"],["\u0667","7"],["\u0668","8"],["\u0669","9"],["\u0686","ch"],["\u06A9","k"],["\u06AF","g"],["\u067E","p"],["\u0698","zh"],["\u06CC","y"],["\u06F0","0"],["\u06F1","1"],["\u06F2","2"],["\u06F3","3"],["\u06F4","4"],["\u06F5","5"],["\u06F6","6"],["\u06F7","7"],["\u06F8","8"],["\u06F9","9"],["\u067C","p"],["\u0681","z"],["\u0685","c"],["\u0689","d"],["\uFEAB","d"],["\uFEAD","r"],["\u0693","r"],["\uFEAF","z"],["\u0696","g"],["\u069A","x"],["\u06AB","g"],["\u06BC","n"],["\u06C0","e"],["\u06D0","e"],["\u06CD","ai"],["\u0679","t"],["\u0688","d"],["\u0691","r"],["\u06BA","n"],["\u06C1","h"],["\u06BE","h"],["\u06D2","e"],["\u0410","A"],["\u0430","a"],["\u0411","B"],["\u0431","b"],["\u0412","V"],["\u0432","v"],["\u0413","G"],["\u0433","g"],["\u0414","D"],["\u0434","d"],["\u044A\u0435","ye"],["\u042A\u0435","Ye"],["\u044A\u0415","yE"],["\u042A\u0415","YE"],["\u0415","E"],["\u0435","e"],["\u0401","Yo"],["\u0451","yo"],["\u0416","Zh"],["\u0436","zh"],["\u0417","Z"],["\u0437","z"],["\u0418","I"],["\u0438","i"],["\u044B\u0439","iy"],["\u042B\u0439","Iy"],["\u042B\u0419","IY"],["\u044B\u0419","iY"],["\u0419","Y"],["\u0439","y"],["\u041A","K"],["\u043A","k"],["\u041B","L"],["\u043B","l"],["\u041C","M"],["\u043C","m"],["\u041D","N"],["\u043D","n"],["\u041E","O"],["\u043E","o"],["\u041F","P"],["\u043F","p"],["\u0420","R"],["\u0440","r"],["\u0421","S"],["\u0441","s"],["\u0422","T"],["\u0442","t"],["\u0423","U"],["\u0443","u"],["\u0424","F"],["\u0444","f"],["\u0425","Kh"],["\u0445","kh"],["\u0426","Ts"],["\u0446","ts"],["\u0427","Ch"],["\u0447","ch"],["\u0428","Sh"],["\u0448","sh"],["\u0429","Sch"],["\u0449","sch"],["\u042A",""],["\u044A",""],["\u042B","Y"],["\u044B","y"],["\u042C",""],["\u044C",""],["\u042D","E"],["\u044D","e"],["\u042E","Yu"],["\u044E","yu"],["\u042F","Ya"],["\u044F","ya"],["\u0103","a"],["\u0102","A"],["\u0219","s"],["\u0218","S"],["\u021B","t"],["\u021A","T"],["\u0163","t"],["\u0162","T"],["\u015F","s"],["\u015E","S"],["\xE7","c"],["\xC7","C"],["\u011F","g"],["\u011E","G"],["\u0131","i"],["\u0130","I"],["\u0561","a"],["\u0531","A"],["\u0562","b"],["\u0532","B"],["\u0563","g"],["\u0533","G"],["\u0564","d"],["\u0534","D"],["\u0565","ye"],["\u0535","Ye"],["\u0566","z"],["\u0536","Z"],["\u0567","e"],["\u0537","E"],["\u0568","y"],["\u0538","Y"],["\u0569","t"],["\u0539","T"],["\u056A","zh"],["\u053A","Zh"],["\u056B","i"],["\u053B","I"],["\u056C","l"],["\u053C","L"],["\u056D","kh"],["\u053D","Kh"],["\u056E","ts"],["\u053E","Ts"],["\u056F","k"],["\u053F","K"],["\u0570","h"],["\u0540","H"],["\u0571","dz"],["\u0541","Dz"],["\u0572","gh"],["\u0542","Gh"],["\u0573","tch"],["\u0543","Tch"],["\u0574","m"],["\u0544","M"],["\u0575","y"],["\u0545","Y"],["\u0576","n"],["\u0546","N"],["\u0577","sh"],["\u0547","Sh"],["\u0578","vo"],["\u0548","Vo"],["\u0579","ch"],["\u0549","Ch"],["\u057A","p"],["\u054A","P"],["\u057B","j"],["\u054B","J"],["\u057C","r"],["\u054C","R"],["\u057D","s"],["\u054D","S"],["\u057E","v"],["\u054E","V"],["\u057F","t"],["\u054F","T"],["\u0580","r"],["\u0550","R"],["\u0581","c"],["\u0551","C"],["\u0578\u0582","u"],["\u0548\u0552","U"],["\u0548\u0582","U"],["\u0583","p"],["\u0553","P"],["\u0584","q"],["\u0554","Q"],["\u0585","o"],["\u0555","O"],["\u0586","f"],["\u0556","F"],["\u0587","yev"],["\u10D0","a"],["\u10D1","b"],["\u10D2","g"],["\u10D3","d"],["\u10D4","e"],["\u10D5","v"],["\u10D6","z"],["\u10D7","t"],["\u10D8","i"],["\u10D9","k"],["\u10DA","l"],["\u10DB","m"],["\u10DC","n"],["\u10DD","o"],["\u10DE","p"],["\u10DF","zh"],["\u10E0","r"],["\u10E1","s"],["\u10E2","t"],["\u10E3","u"],["\u10E4","ph"],["\u10E5","q"],["\u10E6","gh"],["\u10E7","k"],["\u10E8","sh"],["\u10E9","ch"],["\u10EA","ts"],["\u10EB","dz"],["\u10EC","ts"],["\u10ED","tch"],["\u10EE","kh"],["\u10EF","j"],["\u10F0","h"],["\u010D","c"],["\u010F","d"],["\u011B","e"],["\u0148","n"],["\u0159","r"],["\u0161","s"],["\u0165","t"],["\u016F","u"],["\u017E","z"],["\u010C","C"],["\u010E","D"],["\u011A","E"],["\u0147","N"],["\u0158","R"],["\u0160","S"],["\u0164","T"],["\u016E","U"],["\u017D","Z"],["\u0780","h"],["\u0781","sh"],["\u0782","n"],["\u0783","r"],["\u0784","b"],["\u0785","lh"],["\u0786","k"],["\u0787","a"],["\u0788","v"],["\u0789","m"],["\u078A","f"],["\u078B","dh"],["\u078C","th"],["\u078D","l"],["\u078E","g"],["\u078F","gn"],["\u0790","s"],["\u0791","d"],["\u0792","z"],["\u0793","t"],["\u0794","y"],["\u0795","p"],["\u0796","j"],["\u0797","ch"],["\u0798","tt"],["\u0799","hh"],["\u079A","kh"],["\u079B","th"],["\u079C","z"],["\u079D","sh"],["\u079E","s"],["\u079F","d"],["\u07A0","t"],["\u07A1","z"],["\u07A2","a"],["\u07A3","gh"],["\u07A4","q"],["\u07A5","w"],["\u07A6","a"],["\u07A7","aa"],["\u07A8","i"],["\u07A9","ee"],["\u07AA","u"],["\u07AB","oo"],["\u07AC","e"],["\u07AD","ey"],["\u07AE","o"],["\u07AF","oa"],["\u07B0",""],["\u03B1","a"],["\u03B2","v"],["\u03B3","g"],["\u03B4","d"],["\u03B5","e"],["\u03B6","z"],["\u03B7","i"],["\u03B8","th"],["\u03B9","i"],["\u03BA","k"],["\u03BB","l"],["\u03BC","m"],["\u03BD","n"],["\u03BE","ks"],["\u03BF","o"],["\u03C0","p"],["\u03C1","r"],["\u03C3","s"],["\u03C4","t"],["\u03C5","y"],["\u03C6","f"],["\u03C7","x"],["\u03C8","ps"],["\u03C9","o"],["\u03AC","a"],["\u03AD","e"],["\u03AF","i"],["\u03CC","o"],["\u03CD","y"],["\u03AE","i"],["\u03CE","o"],["\u03C2","s"],["\u03CA","i"],["\u03B0","y"],["\u03CB","y"],["\u0390","i"],["\u0391","A"],["\u0392","B"],["\u0393","G"],["\u0394","D"],["\u0395","E"],["\u0396","Z"],["\u0397","I"],["\u0398","TH"],["\u0399","I"],["\u039A","K"],["\u039B","L"],["\u039C","M"],["\u039D","N"],["\u039E","KS"],["\u039F","O"],["\u03A0","P"],["\u03A1","R"],["\u03A3","S"],["\u03A4","T"],["\u03A5","Y"],["\u03A6","F"],["\u03A7","X"],["\u03A8","PS"],["\u03A9","O"],["\u0386","A"],["\u0388","E"],["\u038A","I"],["\u038C","O"],["\u038E","Y"],["\u0389","I"],["\u038F","O"],["\u03AA","I"],["\u03AB","Y"],["\u0101","a"],["\u0113","e"],["\u0123","g"],["\u012B","i"],["\u0137","k"],["\u013C","l"],["\u0146","n"],["\u016B","u"],["\u0100","A"],["\u0112","E"],["\u0122","G"],["\u012A","I"],["\u0136","K"],["\u013B","L"],["\u0145","N"],["\u016A","U"],["\u010D","c"],["\u0161","s"],["\u017E","z"],["\u010C","C"],["\u0160","S"],["\u017D","Z"],["\u0105","a"],["\u010D","c"],["\u0119","e"],["\u0117","e"],["\u012F","i"],["\u0161","s"],["\u0173","u"],["\u016B","u"],["\u017E","z"],["\u0104","A"],["\u010C","C"],["\u0118","E"],["\u0116","E"],["\u012E","I"],["\u0160","S"],["\u0172","U"],["\u016A","U"],["\u040C","Kj"],["\u045C","kj"],["\u0409","Lj"],["\u0459","lj"],["\u040A","Nj"],["\u045A","nj"],["\u0422\u0441","Ts"],["\u0442\u0441","ts"],["\u0105","a"],["\u0107","c"],["\u0119","e"],["\u0142","l"],["\u0144","n"],["\u015B","s"],["\u017A","z"],["\u017C","z"],["\u0104","A"],["\u0106","C"],["\u0118","E"],["\u0141","L"],["\u0143","N"],["\u015A","S"],["\u0179","Z"],["\u017B","Z"],["\u0404","Ye"],["\u0406","I"],["\u0407","Yi"],["\u0490","G"],["\u0454","ye"],["\u0456","i"],["\u0457","yi"],["\u0491","g"],["\u0132","IJ"],["\u0133","ij"],["\xA2","c"],["\xA5","Y"],["\u07FF","b"],["\u09F3","t"],["\u0AF1","Bo"],["\u0E3F","B"],["\u20A0","CE"],["\u20A1","C"],["\u20A2","Cr"],["\u20A3","F"],["\u20A5","m"],["\u20A6","N"],["\u20A7","Pt"],["\u20A8","Rs"],["\u20A9","W"],["\u20AB","s"],["\u20AC","E"],["\u20AD","K"],["\u20AE","T"],["\u20AF","Dp"],["\u20B0","S"],["\u20B1","P"],["\u20B2","G"],["\u20B3","A"],["\u20B4","S"],["\u20B5","C"],["\u20B6","tt"],["\u20B7","S"],["\u20B8","T"],["\u20B9","R"],["\u20BA","L"],["\u20BD","P"],["\u20BF","B"],["\uFE69","$"],["\uFFE0","c"],["\uFFE5","Y"],["\uFFE6","W"],["\u{1D400}","A"],["\u{1D401}","B"],["\u{1D402}","C"],["\u{1D403}","D"],["\u{1D404}","E"],["\u{1D405}","F"],["\u{1D406}","G"],["\u{1D407}","H"],["\u{1D408}","I"],["\u{1D409}","J"],["\u{1D40A}","K"],["\u{1D40B}","L"],["\u{1D40C}","M"],["\u{1D40D}","N"],["\u{1D40E}","O"],["\u{1D40F}","P"],["\u{1D410}","Q"],["\u{1D411}","R"],["\u{1D412}","S"],["\u{1D413}","T"],["\u{1D414}","U"],["\u{1D415}","V"],["\u{1D416}","W"],["\u{1D417}","X"],["\u{1D418}","Y"],["\u{1D419}","Z"],["\u{1D41A}","a"],["\u{1D41B}","b"],["\u{1D41C}","c"],["\u{1D41D}","d"],["\u{1D41E}","e"],["\u{1D41F}","f"],["\u{1D420}","g"],["\u{1D421}","h"],["\u{1D422}","i"],["\u{1D423}","j"],["\u{1D424}","k"],["\u{1D425}","l"],["\u{1D426}","m"],["\u{1D427}","n"],["\u{1D428}","o"],["\u{1D429}","p"],["\u{1D42A}","q"],["\u{1D42B}","r"],["\u{1D42C}","s"],["\u{1D42D}","t"],["\u{1D42E}","u"],["\u{1D42F}","v"],["\u{1D430}","w"],["\u{1D431}","x"],["\u{1D432}","y"],["\u{1D433}","z"],["\u{1D434}","A"],["\u{1D435}","B"],["\u{1D436}","C"],["\u{1D437}","D"],["\u{1D438}","E"],["\u{1D439}","F"],["\u{1D43A}","G"],["\u{1D43B}","H"],["\u{1D43C}","I"],["\u{1D43D}","J"],["\u{1D43E}","K"],["\u{1D43F}","L"],["\u{1D440}","M"],["\u{1D441}","N"],["\u{1D442}","O"],["\u{1D443}","P"],["\u{1D444}","Q"],["\u{1D445}","R"],["\u{1D446}","S"],["\u{1D447}","T"],["\u{1D448}","U"],["\u{1D449}","V"],["\u{1D44A}","W"],["\u{1D44B}","X"],["\u{1D44C}","Y"],["\u{1D44D}","Z"],["\u{1D44E}","a"],["\u{1D44F}","b"],["\u{1D450}","c"],["\u{1D451}","d"],["\u{1D452}","e"],["\u{1D453}","f"],["\u{1D454}","g"],["\u{1D456}","i"],["\u{1D457}","j"],["\u{1D458}","k"],["\u{1D459}","l"],["\u{1D45A}","m"],["\u{1D45B}","n"],["\u{1D45C}","o"],["\u{1D45D}","p"],["\u{1D45E}","q"],["\u{1D45F}","r"],["\u{1D460}","s"],["\u{1D461}","t"],["\u{1D462}","u"],["\u{1D463}","v"],["\u{1D464}","w"],["\u{1D465}","x"],["\u{1D466}","y"],["\u{1D467}","z"],["\u{1D468}","A"],["\u{1D469}","B"],["\u{1D46A}","C"],["\u{1D46B}","D"],["\u{1D46C}","E"],["\u{1D46D}","F"],["\u{1D46E}","G"],["\u{1D46F}","H"],["\u{1D470}","I"],["\u{1D471}","J"],["\u{1D472}","K"],["\u{1D473}","L"],["\u{1D474}","M"],["\u{1D475}","N"],["\u{1D476}","O"],["\u{1D477}","P"],["\u{1D478}","Q"],["\u{1D479}","R"],["\u{1D47A}","S"],["\u{1D47B}","T"],["\u{1D47C}","U"],["\u{1D47D}","V"],["\u{1D47E}","W"],["\u{1D47F}","X"],["\u{1D480}","Y"],["\u{1D481}","Z"],["\u{1D482}","a"],["\u{1D483}","b"],["\u{1D484}","c"],["\u{1D485}","d"],["\u{1D486}","e"],["\u{1D487}","f"],["\u{1D488}","g"],["\u{1D489}","h"],["\u{1D48A}","i"],["\u{1D48B}","j"],["\u{1D48C}","k"],["\u{1D48D}","l"],["\u{1D48E}","m"],["\u{1D48F}","n"],["\u{1D490}","o"],["\u{1D491}","p"],["\u{1D492}","q"],["\u{1D493}","r"],["\u{1D494}","s"],["\u{1D495}","t"],["\u{1D496}","u"],["\u{1D497}","v"],["\u{1D498}","w"],["\u{1D499}","x"],["\u{1D49A}","y"],["\u{1D49B}","z"],["\u{1D49C}","A"],["\u{1D49E}","C"],["\u{1D49F}","D"],["\u{1D4A2}","g"],["\u{1D4A5}","J"],["\u{1D4A6}","K"],["\u{1D4A9}","N"],["\u{1D4AA}","O"],["\u{1D4AB}","P"],["\u{1D4AC}","Q"],["\u{1D4AE}","S"],["\u{1D4AF}","T"],["\u{1D4B0}","U"],["\u{1D4B1}","V"],["\u{1D4B2}","W"],["\u{1D4B3}","X"],["\u{1D4B4}","Y"],["\u{1D4B5}","Z"],["\u{1D4B6}","a"],["\u{1D4B7}","b"],["\u{1D4B8}","c"],["\u{1D4B9}","d"],["\u{1D4BB}","f"],["\u{1D4BD}","h"],["\u{1D4BE}","i"],["\u{1D4BF}","j"],["\u{1D4C0}","h"],["\u{1D4C1}","l"],["\u{1D4C2}","m"],["\u{1D4C3}","n"],["\u{1D4C5}","p"],["\u{1D4C6}","q"],["\u{1D4C7}","r"],["\u{1D4C8}","s"],["\u{1D4C9}","t"],["\u{1D4CA}","u"],["\u{1D4CB}","v"],["\u{1D4CC}","w"],["\u{1D4CD}","x"],["\u{1D4CE}","y"],["\u{1D4CF}","z"],["\u{1D4D0}","A"],["\u{1D4D1}","B"],["\u{1D4D2}","C"],["\u{1D4D3}","D"],["\u{1D4D4}","E"],["\u{1D4D5}","F"],["\u{1D4D6}","G"],["\u{1D4D7}","H"],["\u{1D4D8}","I"],["\u{1D4D9}","J"],["\u{1D4DA}","K"],["\u{1D4DB}","L"],["\u{1D4DC}","M"],["\u{1D4DD}","N"],["\u{1D4DE}","O"],["\u{1D4DF}","P"],["\u{1D4E0}","Q"],["\u{1D4E1}","R"],["\u{1D4E2}","S"],["\u{1D4E3}","T"],["\u{1D4E4}","U"],["\u{1D4E5}","V"],["\u{1D4E6}","W"],["\u{1D4E7}","X"],["\u{1D4E8}","Y"],["\u{1D4E9}","Z"],["\u{1D4EA}","a"],["\u{1D4EB}","b"],["\u{1D4EC}","c"],["\u{1D4ED}","d"],["\u{1D4EE}","e"],["\u{1D4EF}","f"],["\u{1D4F0}","g"],["\u{1D4F1}","h"],["\u{1D4F2}","i"],["\u{1D4F3}","j"],["\u{1D4F4}","k"],["\u{1D4F5}","l"],["\u{1D4F6}","m"],["\u{1D4F7}","n"],["\u{1D4F8}","o"],["\u{1D4F9}","p"],["\u{1D4FA}","q"],["\u{1D4FB}","r"],["\u{1D4FC}","s"],["\u{1D4FD}","t"],["\u{1D4FE}","u"],["\u{1D4FF}","v"],["\u{1D500}","w"],["\u{1D501}","x"],["\u{1D502}","y"],["\u{1D503}","z"],["\u{1D504}","A"],["\u{1D505}","B"],["\u{1D507}","D"],["\u{1D508}","E"],["\u{1D509}","F"],["\u{1D50A}","G"],["\u{1D50D}","J"],["\u{1D50E}","K"],["\u{1D50F}","L"],["\u{1D510}","M"],["\u{1D511}","N"],["\u{1D512}","O"],["\u{1D513}","P"],["\u{1D514}","Q"],["\u{1D516}","S"],["\u{1D517}","T"],["\u{1D518}","U"],["\u{1D519}","V"],["\u{1D51A}","W"],["\u{1D51B}","X"],["\u{1D51C}","Y"],["\u{1D51E}","a"],["\u{1D51F}","b"],["\u{1D520}","c"],["\u{1D521}","d"],["\u{1D522}","e"],["\u{1D523}","f"],["\u{1D524}","g"],["\u{1D525}","h"],["\u{1D526}","i"],["\u{1D527}","j"],["\u{1D528}","k"],["\u{1D529}","l"],["\u{1D52A}","m"],["\u{1D52B}","n"],["\u{1D52C}","o"],["\u{1D52D}","p"],["\u{1D52E}","q"],["\u{1D52F}","r"],["\u{1D530}","s"],["\u{1D531}","t"],["\u{1D532}","u"],["\u{1D533}","v"],["\u{1D534}","w"],["\u{1D535}","x"],["\u{1D536}","y"],["\u{1D537}","z"],["\u{1D538}","A"],["\u{1D539}","B"],["\u{1D53B}","D"],["\u{1D53C}","E"],["\u{1D53D}","F"],["\u{1D53E}","G"],["\u{1D540}","I"],["\u{1D541}","J"],["\u{1D542}","K"],["\u{1D543}","L"],["\u{1D544}","M"],["\u{1D546}","N"],["\u{1D54A}","S"],["\u{1D54B}","T"],["\u{1D54C}","U"],["\u{1D54D}","V"],["\u{1D54E}","W"],["\u{1D54F}","X"],["\u{1D550}","Y"],["\u{1D552}","a"],["\u{1D553}","b"],["\u{1D554}","c"],["\u{1D555}","d"],["\u{1D556}","e"],["\u{1D557}","f"],["\u{1D558}","g"],["\u{1D559}","h"],["\u{1D55A}","i"],["\u{1D55B}","j"],["\u{1D55C}","k"],["\u{1D55D}","l"],["\u{1D55E}","m"],["\u{1D55F}","n"],["\u{1D560}","o"],["\u{1D561}","p"],["\u{1D562}","q"],["\u{1D563}","r"],["\u{1D564}","s"],["\u{1D565}","t"],["\u{1D566}","u"],["\u{1D567}","v"],["\u{1D568}","w"],["\u{1D569}","x"],["\u{1D56A}","y"],["\u{1D56B}","z"],["\u{1D56C}","A"],["\u{1D56D}","B"],["\u{1D56E}","C"],["\u{1D56F}","D"],["\u{1D570}","E"],["\u{1D571}","F"],["\u{1D572}","G"],["\u{1D573}","H"],["\u{1D574}","I"],["\u{1D575}","J"],["\u{1D576}","K"],["\u{1D577}","L"],["\u{1D578}","M"],["\u{1D579}","N"],["\u{1D57A}","O"],["\u{1D57B}","P"],["\u{1D57C}","Q"],["\u{1D57D}","R"],["\u{1D57E}","S"],["\u{1D57F}","T"],["\u{1D580}","U"],["\u{1D581}","V"],["\u{1D582}","W"],["\u{1D583}","X"],["\u{1D584}","Y"],["\u{1D585}","Z"],["\u{1D586}","a"],["\u{1D587}","b"],["\u{1D588}","c"],["\u{1D589}","d"],["\u{1D58A}","e"],["\u{1D58B}","f"],["\u{1D58C}","g"],["\u{1D58D}","h"],["\u{1D58E}","i"],["\u{1D58F}","j"],["\u{1D590}","k"],["\u{1D591}","l"],["\u{1D592}","m"],["\u{1D593}","n"],["\u{1D594}","o"],["\u{1D595}","p"],["\u{1D596}","q"],["\u{1D597}","r"],["\u{1D598}","s"],["\u{1D599}","t"],["\u{1D59A}","u"],["\u{1D59B}","v"],["\u{1D59C}","w"],["\u{1D59D}","x"],["\u{1D59E}","y"],["\u{1D59F}","z"],["\u{1D5A0}","A"],["\u{1D5A1}","B"],["\u{1D5A2}","C"],["\u{1D5A3}","D"],["\u{1D5A4}","E"],["\u{1D5A5}","F"],["\u{1D5A6}","G"],["\u{1D5A7}","H"],["\u{1D5A8}","I"],["\u{1D5A9}","J"],["\u{1D5AA}","K"],["\u{1D5AB}","L"],["\u{1D5AC}","M"],["\u{1D5AD}","N"],["\u{1D5AE}","O"],["\u{1D5AF}","P"],["\u{1D5B0}","Q"],["\u{1D5B1}","R"],["\u{1D5B2}","S"],["\u{1D5B3}","T"],["\u{1D5B4}","U"],["\u{1D5B5}","V"],["\u{1D5B6}","W"],["\u{1D5B7}","X"],["\u{1D5B8}","Y"],["\u{1D5B9}","Z"],["\u{1D5BA}","a"],["\u{1D5BB}","b"],["\u{1D5BC}","c"],["\u{1D5BD}","d"],["\u{1D5BE}","e"],["\u{1D5BF}","f"],["\u{1D5C0}","g"],["\u{1D5C1}","h"],["\u{1D5C2}","i"],["\u{1D5C3}","j"],["\u{1D5C4}","k"],["\u{1D5C5}","l"],["\u{1D5C6}","m"],["\u{1D5C7}","n"],["\u{1D5C8}","o"],["\u{1D5C9}","p"],["\u{1D5CA}","q"],["\u{1D5CB}","r"],["\u{1D5CC}","s"],["\u{1D5CD}","t"],["\u{1D5CE}","u"],["\u{1D5CF}","v"],["\u{1D5D0}","w"],["\u{1D5D1}","x"],["\u{1D5D2}","y"],["\u{1D5D3}","z"],["\u{1D5D4}","A"],["\u{1D5D5}","B"],["\u{1D5D6}","C"],["\u{1D5D7}","D"],["\u{1D5D8}","E"],["\u{1D5D9}","F"],["\u{1D5DA}","G"],["\u{1D5DB}","H"],["\u{1D5DC}","I"],["\u{1D5DD}","J"],["\u{1D5DE}","K"],["\u{1D5DF}","L"],["\u{1D5E0}","M"],["\u{1D5E1}","N"],["\u{1D5E2}","O"],["\u{1D5E3}","P"],["\u{1D5E4}","Q"],["\u{1D5E5}","R"],["\u{1D5E6}","S"],["\u{1D5E7}","T"],["\u{1D5E8}","U"],["\u{1D5E9}","V"],["\u{1D5EA}","W"],["\u{1D5EB}","X"],["\u{1D5EC}","Y"],["\u{1D5ED}","Z"],["\u{1D5EE}","a"],["\u{1D5EF}","b"],["\u{1D5F0}","c"],["\u{1D5F1}","d"],["\u{1D5F2}","e"],["\u{1D5F3}","f"],["\u{1D5F4}","g"],["\u{1D5F5}","h"],["\u{1D5F6}","i"],["\u{1D5F7}","j"],["\u{1D5F8}","k"],["\u{1D5F9}","l"],["\u{1D5FA}","m"],["\u{1D5FB}","n"],["\u{1D5FC}","o"],["\u{1D5FD}","p"],["\u{1D5FE}","q"],["\u{1D5FF}","r"],["\u{1D600}","s"],["\u{1D601}","t"],["\u{1D602}","u"],["\u{1D603}","v"],["\u{1D604}","w"],["\u{1D605}","x"],["\u{1D606}","y"],["\u{1D607}","z"],["\u{1D608}","A"],["\u{1D609}","B"],["\u{1D60A}","C"],["\u{1D60B}","D"],["\u{1D60C}","E"],["\u{1D60D}","F"],["\u{1D60E}","G"],["\u{1D60F}","H"],["\u{1D610}","I"],["\u{1D611}","J"],["\u{1D612}","K"],["\u{1D613}","L"],["\u{1D614}","M"],["\u{1D615}","N"],["\u{1D616}","O"],["\u{1D617}","P"],["\u{1D618}","Q"],["\u{1D619}","R"],["\u{1D61A}","S"],["\u{1D61B}","T"],["\u{1D61C}","U"],["\u{1D61D}","V"],["\u{1D61E}","W"],["\u{1D61F}","X"],["\u{1D620}","Y"],["\u{1D621}","Z"],["\u{1D622}","a"],["\u{1D623}","b"],["\u{1D624}","c"],["\u{1D625}","d"],["\u{1D626}","e"],["\u{1D627}","f"],["\u{1D628}","g"],["\u{1D629}","h"],["\u{1D62A}","i"],["\u{1D62B}","j"],["\u{1D62C}","k"],["\u{1D62D}","l"],["\u{1D62E}","m"],["\u{1D62F}","n"],["\u{1D630}","o"],["\u{1D631}","p"],["\u{1D632}","q"],["\u{1D633}","r"],["\u{1D634}","s"],["\u{1D635}","t"],["\u{1D636}","u"],["\u{1D637}","v"],["\u{1D638}","w"],["\u{1D639}","x"],["\u{1D63A}","y"],["\u{1D63B}","z"],["\u{1D63C}","A"],["\u{1D63D}","B"],["\u{1D63E}","C"],["\u{1D63F}","D"],["\u{1D640}","E"],["\u{1D641}","F"],["\u{1D642}","G"],["\u{1D643}","H"],["\u{1D644}","I"],["\u{1D645}","J"],["\u{1D646}","K"],["\u{1D647}","L"],["\u{1D648}","M"],["\u{1D649}","N"],["\u{1D64A}","O"],["\u{1D64B}","P"],["\u{1D64C}","Q"],["\u{1D64D}","R"],["\u{1D64E}","S"],["\u{1D64F}","T"],["\u{1D650}","U"],["\u{1D651}","V"],["\u{1D652}","W"],["\u{1D653}","X"],["\u{1D654}","Y"],["\u{1D655}","Z"],["\u{1D656}","a"],["\u{1D657}","b"],["\u{1D658}","c"],["\u{1D659}","d"],["\u{1D65A}","e"],["\u{1D65B}","f"],["\u{1D65C}","g"],["\u{1D65D}","h"],["\u{1D65E}","i"],["\u{1D65F}","j"],["\u{1D660}","k"],["\u{1D661}","l"],["\u{1D662}","m"],["\u{1D663}","n"],["\u{1D664}","o"],["\u{1D665}","p"],["\u{1D666}","q"],["\u{1D667}","r"],["\u{1D668}","s"],["\u{1D669}","t"],["\u{1D66A}","u"],["\u{1D66B}","v"],["\u{1D66C}","w"],["\u{1D66D}","x"],["\u{1D66E}","y"],["\u{1D66F}","z"],["\u{1D670}","A"],["\u{1D671}","B"],["\u{1D672}","C"],["\u{1D673}","D"],["\u{1D674}","E"],["\u{1D675}","F"],["\u{1D676}","G"],["\u{1D677}","H"],["\u{1D678}","I"],["\u{1D679}","J"],["\u{1D67A}","K"],["\u{1D67B}","L"],["\u{1D67C}","M"],["\u{1D67D}","N"],["\u{1D67E}","O"],["\u{1D67F}","P"],["\u{1D680}","Q"],["\u{1D681}","R"],["\u{1D682}","S"],["\u{1D683}","T"],["\u{1D684}","U"],["\u{1D685}","V"],["\u{1D686}","W"],["\u{1D687}","X"],["\u{1D688}","Y"],["\u{1D689}","Z"],["\u{1D68A}","a"],["\u{1D68B}","b"],["\u{1D68C}","c"],["\u{1D68D}","d"],["\u{1D68E}","e"],["\u{1D68F}","f"],["\u{1D690}","g"],["\u{1D691}","h"],["\u{1D692}","i"],["\u{1D693}","j"],["\u{1D694}","k"],["\u{1D695}","l"],["\u{1D696}","m"],["\u{1D697}","n"],["\u{1D698}","o"],["\u{1D699}","p"],["\u{1D69A}","q"],["\u{1D69B}","r"],["\u{1D69C}","s"],["\u{1D69D}","t"],["\u{1D69E}","u"],["\u{1D69F}","v"],["\u{1D6A0}","w"],["\u{1D6A1}","x"],["\u{1D6A2}","y"],["\u{1D6A3}","z"],["\u{1D6A4}","l"],["\u{1D6A5}","j"],["\u{1D6E2}","A"],["\u{1D6E3}","B"],["\u{1D6E4}","G"],["\u{1D6E5}","D"],["\u{1D6E6}","E"],["\u{1D6E7}","Z"],["\u{1D6E8}","I"],["\u{1D6E9}","TH"],["\u{1D6EA}","I"],["\u{1D6EB}","K"],["\u{1D6EC}","L"],["\u{1D6ED}","M"],["\u{1D6EE}","N"],["\u{1D6EF}","KS"],["\u{1D6F0}","O"],["\u{1D6F1}","P"],["\u{1D6F2}","R"],["\u{1D6F3}","TH"],["\u{1D6F4}","S"],["\u{1D6F5}","T"],["\u{1D6F6}","Y"],["\u{1D6F7}","F"],["\u{1D6F8}","x"],["\u{1D6F9}","PS"],["\u{1D6FA}","O"],["\u{1D6FB}","D"],["\u{1D6FC}","a"],["\u{1D6FD}","b"],["\u{1D6FE}","g"],["\u{1D6FF}","d"],["\u{1D700}","e"],["\u{1D701}","z"],["\u{1D702}","i"],["\u{1D703}","th"],["\u{1D704}","i"],["\u{1D705}","k"],["\u{1D706}","l"],["\u{1D707}","m"],["\u{1D708}","n"],["\u{1D709}","ks"],["\u{1D70A}","o"],["\u{1D70B}","p"],["\u{1D70C}","r"],["\u{1D70D}","s"],["\u{1D70E}","s"],["\u{1D70F}","t"],["\u{1D710}","y"],["\u{1D711}","f"],["\u{1D712}","x"],["\u{1D713}","ps"],["\u{1D714}","o"],["\u{1D715}","d"],["\u{1D716}","E"],["\u{1D717}","TH"],["\u{1D718}","K"],["\u{1D719}","f"],["\u{1D71A}","r"],["\u{1D71B}","p"],["\u{1D71C}","A"],["\u{1D71D}","V"],["\u{1D71E}","G"],["\u{1D71F}","D"],["\u{1D720}","E"],["\u{1D721}","Z"],["\u{1D722}","I"],["\u{1D723}","TH"],["\u{1D724}","I"],["\u{1D725}","K"],["\u{1D726}","L"],["\u{1D727}","M"],["\u{1D728}","N"],["\u{1D729}","KS"],["\u{1D72A}","O"],["\u{1D72B}","P"],["\u{1D72C}","S"],["\u{1D72D}","TH"],["\u{1D72E}","S"],["\u{1D72F}","T"],["\u{1D730}","Y"],["\u{1D731}","F"],["\u{1D732}","X"],["\u{1D733}","PS"],["\u{1D734}","O"],["\u{1D735}","D"],["\u{1D736}","a"],["\u{1D737}","v"],["\u{1D738}","g"],["\u{1D739}","d"],["\u{1D73A}","e"],["\u{1D73B}","z"],["\u{1D73C}","i"],["\u{1D73D}","th"],["\u{1D73E}","i"],["\u{1D73F}","k"],["\u{1D740}","l"],["\u{1D741}","m"],["\u{1D742}","n"],["\u{1D743}","ks"],["\u{1D744}","o"],["\u{1D745}","p"],["\u{1D746}","r"],["\u{1D747}","s"],["\u{1D748}","s"],["\u{1D749}","t"],["\u{1D74A}","y"],["\u{1D74B}","f"],["\u{1D74C}","x"],["\u{1D74D}","ps"],["\u{1D74E}","o"],["\u{1D74F}","a"],["\u{1D750}","e"],["\u{1D751}","i"],["\u{1D752}","k"],["\u{1D753}","f"],["\u{1D754}","r"],["\u{1D755}","p"],["\u{1D756}","A"],["\u{1D757}","B"],["\u{1D758}","G"],["\u{1D759}","D"],["\u{1D75A}","E"],["\u{1D75B}","Z"],["\u{1D75C}","I"],["\u{1D75D}","TH"],["\u{1D75E}","I"],["\u{1D75F}","K"],["\u{1D760}","L"],["\u{1D761}","M"],["\u{1D762}","N"],["\u{1D763}","KS"],["\u{1D764}","O"],["\u{1D765}","P"],["\u{1D766}","R"],["\u{1D767}","TH"],["\u{1D768}","S"],["\u{1D769}","T"],["\u{1D76A}","Y"],["\u{1D76B}","F"],["\u{1D76C}","X"],["\u{1D76D}","PS"],["\u{1D76E}","O"],["\u{1D76F}","D"],["\u{1D770}","a"],["\u{1D771}","v"],["\u{1D772}","g"],["\u{1D773}","d"],["\u{1D774}","e"],["\u{1D775}","z"],["\u{1D776}","i"],["\u{1D777}","th"],["\u{1D778}","i"],["\u{1D779}","k"],["\u{1D77A}","l"],["\u{1D77B}","m"],["\u{1D77C}","n"],["\u{1D77D}","ks"],["\u{1D77E}","o"],["\u{1D77F}","p"],["\u{1D780}","r"],["\u{1D781}","s"],["\u{1D782}","s"],["\u{1D783}","t"],["\u{1D784}","y"],["\u{1D785}","f"],["\u{1D786}","x"],["\u{1D787}","ps"],["\u{1D788}","o"],["\u{1D789}","a"],["\u{1D78A}","e"],["\u{1D78B}","i"],["\u{1D78C}","k"],["\u{1D78D}","f"],["\u{1D78E}","r"],["\u{1D78F}","p"],["\u{1D790}","A"],["\u{1D791}","V"],["\u{1D792}","G"],["\u{1D793}","D"],["\u{1D794}","E"],["\u{1D795}","Z"],["\u{1D796}","I"],["\u{1D797}","TH"],["\u{1D798}","I"],["\u{1D799}","K"],["\u{1D79A}","L"],["\u{1D79B}","M"],["\u{1D79C}","N"],["\u{1D79D}","KS"],["\u{1D79E}","O"],["\u{1D79F}","P"],["\u{1D7A0}","S"],["\u{1D7A1}","TH"],["\u{1D7A2}","S"],["\u{1D7A3}","T"],["\u{1D7A4}","Y"],["\u{1D7A5}","F"],["\u{1D7A6}","X"],["\u{1D7A7}","PS"],["\u{1D7A8}","O"],["\u{1D7A9}","D"],["\u{1D7AA}","av"],["\u{1D7AB}","g"],["\u{1D7AC}","d"],["\u{1D7AD}","e"],["\u{1D7AE}","z"],["\u{1D7AF}","i"],["\u{1D7B0}","i"],["\u{1D7B1}","th"],["\u{1D7B2}","i"],["\u{1D7B3}","k"],["\u{1D7B4}","l"],["\u{1D7B5}","m"],["\u{1D7B6}","n"],["\u{1D7B7}","ks"],["\u{1D7B8}","o"],["\u{1D7B9}","p"],["\u{1D7BA}","r"],["\u{1D7BB}","s"],["\u{1D7BC}","s"],["\u{1D7BD}","t"],["\u{1D7BE}","y"],["\u{1D7BF}","f"],["\u{1D7C0}","x"],["\u{1D7C1}","ps"],["\u{1D7C2}","o"],["\u{1D7C3}","a"],["\u{1D7C4}","e"],["\u{1D7C5}","i"],["\u{1D7C6}","k"],["\u{1D7C7}","f"],["\u{1D7C8}","r"],["\u{1D7C9}","p"],["\u{1D7CA}","F"],["\u{1D7CB}","f"],["\u249C","(a)"],["\u249D","(b)"],["\u249E","(c)"],["\u249F","(d)"],["\u24A0","(e)"],["\u24A1","(f)"],["\u24A2","(g)"],["\u24A3","(h)"],["\u24A4","(i)"],["\u24A5","(j)"],["\u24A6","(k)"],["\u24A7","(l)"],["\u24A8","(m)"],["\u24A9","(n)"],["\u24AA","(o)"],["\u24AB","(p)"],["\u24AC","(q)"],["\u24AD","(r)"],["\u24AE","(s)"],["\u24AF","(t)"],["\u24B0","(u)"],["\u24B1","(v)"],["\u24B2","(w)"],["\u24B3","(x)"],["\u24B4","(y)"],["\u24B5","(z)"],["\u24B6","(A)"],["\u24B7","(B)"],["\u24B8","(C)"],["\u24B9","(D)"],["\u24BA","(E)"],["\u24BB","(F)"],["\u24BC","(G)"],["\u24BD","(H)"],["\u24BE","(I)"],["\u24BF","(J)"],["\u24C0","(K)"],["\u24C1","(L)"],["\u24C3","(N)"],["\u24C4","(O)"],["\u24C5","(P)"],["\u24C6","(Q)"],["\u24C7","(R)"],["\u24C8","(S)"],["\u24C9","(T)"],["\u24CA","(U)"],["\u24CB","(V)"],["\u24CC","(W)"],["\u24CD","(X)"],["\u24CE","(Y)"],["\u24CF","(Z)"],["\u24D0","(a)"],["\u24D1","(b)"],["\u24D2","(b)"],["\u24D3","(c)"],["\u24D4","(e)"],["\u24D5","(f)"],["\u24D6","(g)"],["\u24D7","(h)"],["\u24D8","(i)"],["\u24D9","(j)"],["\u24DA","(k)"],["\u24DB","(l)"],["\u24DC","(m)"],["\u24DD","(n)"],["\u24DE","(o)"],["\u24DF","(p)"],["\u24E0","(q)"],["\u24E1","(r)"],["\u24E2","(s)"],["\u24E3","(t)"],["\u24E4","(u)"],["\u24E5","(v)"],["\u24E6","(w)"],["\u24E7","(x)"],["\u24E8","(y)"],["\u24E9","(z)"],["\u010A","C"],["\u010B","c"],["\u0120","G"],["\u0121","g"],["\u0126","H"],["\u0127","h"],["\u017B","Z"],["\u017C","z"],["\u{1D7CE}","0"],["\u{1D7CF}","1"],["\u{1D7D0}","2"],["\u{1D7D1}","3"],["\u{1D7D2}","4"],["\u{1D7D3}","5"],["\u{1D7D4}","6"],["\u{1D7D5}","7"],["\u{1D7D6}","8"],["\u{1D7D7}","9"],["\u{1D7D8}","0"],["\u{1D7D9}","1"],["\u{1D7DA}","2"],["\u{1D7DB}","3"],["\u{1D7DC}","4"],["\u{1D7DD}","5"],["\u{1D7DE}","6"],["\u{1D7DF}","7"],["\u{1D7E0}","8"],["\u{1D7E1}","9"],["\u{1D7E2}","0"],["\u{1D7E3}","1"],["\u{1D7E4}","2"],["\u{1D7E5}","3"],["\u{1D7E6}","4"],["\u{1D7E7}","5"],["\u{1D7E8}","6"],["\u{1D7E9}","7"],["\u{1D7EA}","8"],["\u{1D7EB}","9"],["\u{1D7EC}","0"],["\u{1D7ED}","1"],["\u{1D7EE}","2"],["\u{1D7EF}","3"],["\u{1D7F0}","4"],["\u{1D7F1}","5"],["\u{1D7F2}","6"],["\u{1D7F3}","7"],["\u{1D7F4}","8"],["\u{1D7F5}","9"],["\u{1D7F6}","0"],["\u{1D7F7}","1"],["\u{1D7F8}","2"],["\u{1D7F9}","3"],["\u{1D7FA}","4"],["\u{1D7FB}","5"],["\u{1D7FC}","6"],["\u{1D7FD}","7"],["\u{1D7FE}","8"],["\u{1D7FF}","9"],["\u2460","1"],["\u2461","2"],["\u2462","3"],["\u2463","4"],["\u2464","5"],["\u2465","6"],["\u2466","7"],["\u2467","8"],["\u2468","9"],["\u2469","10"],["\u246A","11"],["\u246B","12"],["\u246C","13"],["\u246D","14"],["\u246E","15"],["\u246F","16"],["\u2470","17"],["\u2471","18"],["\u2472","19"],["\u2473","20"],["\u2474","1"],["\u2475","2"],["\u2476","3"],["\u2477","4"],["\u2478","5"],["\u2479","6"],["\u247A","7"],["\u247B","8"],["\u247C","9"],["\u247D","10"],["\u247E","11"],["\u247F","12"],["\u2480","13"],["\u2481","14"],["\u2482","15"],["\u2483","16"],["\u2484","17"],["\u2485","18"],["\u2486","19"],["\u2487","20"],["\u2488","1."],["\u2489","2."],["\u248A","3."],["\u248B","4."],["\u248C","5."],["\u248D","6."],["\u248E","7."],["\u248F","8."],["\u2490","9."],["\u2491","10."],["\u2492","11."],["\u2493","12."],["\u2494","13."],["\u2495","14."],["\u2496","15."],["\u2497","16."],["\u2498","17."],["\u2499","18."],["\u249A","19."],["\u249B","20."],["\u24EA","0"],["\u24EB","11"],["\u24EC","12"],["\u24ED","13"],["\u24EE","14"],["\u24EF","15"],["\u24F0","16"],["\u24F1","17"],["\u24F2","18"],["\u24F3","19"],["\u24F4","20"],["\u24F5","1"],["\u24F6","2"],["\u24F7","3"],["\u24F8","4"],["\u24F9","5"],["\u24FA","6"],["\u24FB","7"],["\u24FC","8"],["\u24FD","9"],["\u24FE","10"],["\u24FF","0"],["\u{1F670}","&"],["\u{1F671}","&"],["\u{1F672}","&"],["\u{1F673}","&"],["\u{1F674}","&"],["\u{1F675}","&"],["\u{1F676}",'"'],["\u{1F677}",'"'],["\u{1F678}",'"'],["\u203D","?!"],["\u{1F679}","?!"],["\u{1F67A}","?!"],["\u{1F67B}","?!"],["\u{1F67C}","/"],["\u{1F67D}","\\"],["\u{1F707}","AR"],["\u{1F708}","V"],["\u{1F709}","V"],["\u{1F706}","VR"],["\u{1F705}","VF"],["\u{1F729}","2"],["\u{1F72A}","5"],["\u{1F761}","f"],["\u{1F762}","W"],["\u{1F763}","U"],["\u{1F767}","V"],["\u{1F768}","T"],["\u{1F76A}","V"],["\u{1F76B}","MB"],["\u{1F76C}","VB"],["\u{1F772}","3B"],["\u{1F773}","3B"],["\u{1F4AF}","100"],["\u{1F519}","BACK"],["\u{1F51A}","END"],["\u{1F51B}","ON!"],["\u{1F51C}","SOON"],["\u{1F51D}","TOP"],["\u{1F51E}","18"],["\u{1F524}","abc"],["\u{1F520}","ABCD"],["\u{1F521}","abcd"],["\u{1F522}","1234"],["\u{1F523}","T&@%"],["#\uFE0F\u20E3","#"],["*\uFE0F\u20E3","*"],["0\uFE0F\u20E3","0"],["1\uFE0F\u20E3","1"],["2\uFE0F\u20E3","2"],["3\uFE0F\u20E3","3"],["4\uFE0F\u20E3","4"],["5\uFE0F\u20E3","5"],["6\uFE0F\u20E3","6"],["7\uFE0F\u20E3","7"],["8\uFE0F\u20E3","8"],["9\uFE0F\u20E3","9"],["\u{1F51F}","10"],["\u{1F170}\uFE0F","A"],["\u{1F171}\uFE0F","B"],["\u{1F18E}","AB"],["\u{1F191}","CL"],["\u{1F17E}\uFE0F","O"],["\u{1F17F}","P"],["\u{1F198}","SOS"],["\u{1F172}","C"],["\u{1F173}","D"],["\u{1F174}","E"],["\u{1F175}","F"],["\u{1F176}","G"],["\u{1F177}","H"],["\u{1F178}","I"],["\u{1F179}","J"],["\u{1F17A}","K"],["\u{1F17B}","L"],["\u{1F17C}","M"],["\u{1F17D}","N"],["\u{1F180}","Q"],["\u{1F181}","R"],["\u{1F182}","S"],["\u{1F183}","T"],["\u{1F184}","U"],["\u{1F185}","V"],["\u{1F186}","W"],["\u{1F187}","X"],["\u{1F188}","Y"],["\u{1F189}","Z"]];function e3(e,n){if(typeof e!="string")throw new TypeError(`Expected a string, got \`${typeof e}\``);n=DT({customReplacements:[]},n);let t=new Map([...tZ,...n.customReplacements]);return e=((i,r)=>{for(let[s,l]of r)i=i.replace(new RegExp(eZ(s),"g"),l);return i})(e=e.normalize(),t),(0,XL.default)(e)}var nZ=["list"],iZ=["defaultItemTemplate"],rZ=e=>({item:e});function sZ(e,n){if(e&1&&je(0),e&2){let t=n.item,i=Y();Rt(" ",t[i.labelKey]," ")}}function aZ(e,n){}function oZ(e,n){if(e&1){let t=kt();K(0,"li")(1,"a",4),nt("mousedown",function(r){let s=Le(t).index,l=Y();return l.activeIndex=s,l.itemClick.emit(),Ne(r.preventDefault())}),de(2,aZ,0,0,"ng-template",5),Q()()}if(e&2){let t=n.$implicit,i=n.index,r=Y();Rn("active",r.activeIndex==i)("mention-active",!r.styleOff&&r.activeIndex==i),V(),Rn("mention-item",!r.styleOff),V(),H("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",wi(8,rZ,t))}}function cZ(e,n){Ag(e)?e.value=n:e.textContent=n}function s3(e){return Ag(e)?e.value:e.textContent}function TT(e,n,t,i,r,s=!1){if(lZ(e)){let v=s3(e);cZ(e,v.substring(0,n)+i+v.substring(t,v.length)),a3(e,n+i.length,r)}else if(!s){let v=yb(r);if(v&&v.rangeCount>0){var l=v.getRangeAt(0),d=l.startOffset,f=v.anchorNode;TT(f,d-(t-n),d,i,r,!0)}}}function Ag(e){return e!=null&&(e.nodeName=="INPUT"||e.nodeName=="TEXTAREA")}function lZ(e){return e!=null&&(e.nodeName=="INPUT"||e.nodeName=="TEXTAREA"||e.nodeName=="#text")}function a3(e,n,t=null){if(Ag(e)&&e.selectionStart)e.focus(),e.setSelectionRange(n,n);else{let i=ST(t).createRange();i.setStart(e,n),i.collapse(!0);let r=yb(t);r.removeAllRanges(),r.addRange(i)}}function t3(e,n=null){if(Ag(e)){var t=e.value;return t.slice(0,e.selectionStart).length}else{var i=yb(n);if(i.rangeCount>0){var r=i.getRangeAt(0),s=r.cloneRange();s.selectNodeContents(e),s.setEnd(r.endContainer,r.endOffset);var l=s.toString().length;return l}}}function ST(e){return e?e.contentWindow.document:document}function yb(e){return e?e.contentWindow.getSelection():window.getSelection()}function n3(e){let n="\uFEFF",t="sel_"+new Date().getTime()+"_"+Math.random().toString().substr(2),i=ST(e?e.iframe:null),r=yb(e?e.iframe:null),s=r.getRangeAt(0),l=i.createRange();l.setStart(r.anchorNode,s.startOffset),l.setEnd(r.anchorNode,s.startOffset),l.collapse(!1);let d=i.createElement("span");d.id=t,d.appendChild(i.createTextNode(n)),l.insertNode(d),r.removeAllRanges(),r.addRange(s);let f={left:0,top:d.offsetHeight};return uZ(e,d,f),d.parentNode.removeChild(d),f}function uZ(e,n,t){let i=n,r=e?e.iframe:null;for(;i&&!(e.parent!=null&&e.parent==i);)t.left+=i.offsetLeft+i.clientLeft,t.top+=i.offsetTop+i.clientTop,i=i.offsetParent,!i&&r&&(i=r,r=null);for(i=n,r=e?e.iframe:null;i!==ST(null).body&&i!=null&&!(e.parent!=null&&e.parent==i);)i.scrollTop&&i.scrollTop>0&&(t.top-=i.scrollTop),i.scrollLeft&&i.scrollLeft>0&&(t.left-=i.scrollLeft),i=i.parentNode,!i&&r&&(i=r,r=null)}var dZ=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],o3=typeof window<"u",hZ=o3&&window.mozInnerScreenX!=null;function pZ(e,n,t){if(!o3)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var i=t&&t.debug||!1;if(i){var r=document.querySelector("#input-textarea-caret-position-mirror-div");r&&r.parentNode.removeChild(r)}var s=document.createElement("div");s.id="input-textarea-caret-position-mirror-div",document.body.appendChild(s);var l=s.style,d=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,f=e.nodeName==="INPUT";l.whiteSpace="pre-wrap",f||(l.wordWrap="break-word"),l.position="absolute",i||(l.visibility="hidden"),dZ.forEach(function(O){if(f&&O==="lineHeight")if(d.boxSizing==="border-box"){var A=parseInt(d.height),L=parseInt(d.paddingTop)+parseInt(d.paddingBottom)+parseInt(d.borderTopWidth)+parseInt(d.borderBottomWidth),U=L+parseInt(d.lineHeight);A>U?l.lineHeight=A-L+"px":A===U?l.lineHeight=d.lineHeight:l.lineHeight="0"}else l.lineHeight=d.height;else l[O]=d[O]}),hZ?e.scrollHeight>parseInt(d.height)&&(l.overflowY="scroll"):l.overflow="hidden",s.textContent=e.value.substring(0,n),f&&(s.textContent=s.textContent.replace(/\s/g,"\xA0"));var v=document.createElement("span");v.textContent=e.value.substring(n)||".",s.appendChild(v);var x={top:v.offsetTop+parseInt(d.borderTopWidth),left:v.offsetLeft+parseInt(d.borderLeftWidth),height:parseInt(d.lineHeight)};return i?v.style.backgroundColor="#aaa":document.body.removeChild(s),x}var fZ=(()=>{class e{constructor(t){this.element=t,this.labelKey="label",this.itemClick=new Zt,this.items=[],this.activeIndex=0,this.hidden=!1,this.dropUp=!1,this.styleOff=!1,this.coords={top:0,left:0},this.offset=0}ngAfterContentChecked(){this.itemTemplate||(this.itemTemplate=this.defaultItemTemplate)}position(t,i=null){if(Ag(t))this.coords=pZ(t,t.selectionStart,null),this.coords.top=t.offsetTop+this.coords.top-t.scrollTop,this.coords.left=t.offsetLeft+this.coords.left-t.scrollLeft,this.offset=this.getBlockCursorDimensions(t).height;else if(i){let r={iframe:i,parent:i.offsetParent};this.coords=n3(r)}else{let r=document.documentElement,s=(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0),l=(window.pageYOffset||r.scrollTop)-(r.clientTop||0),d=n3({iframe:i}),f=t.getBoundingClientRect();this.coords.top=d.top-f.top+t.offsetTop-l,this.coords.left=d.left-f.left+t.offsetLeft-s}this.positionElement()}get activeItem(){return this.items[this.activeIndex]}activateNextItem(){let t=this.list.nativeElement,i=t.getElementsByClassName("active").item(0);if(i){let r=i.nextSibling;if(r&&r.nodeName=="LI"){let s=r.getBoundingClientRect();s.bottom>t.getBoundingClientRect().bottom&&(t.scrollTop=r.offsetTop+s.height-t.clientHeight)}}this.activeIndex=Math.max(Math.min(this.activeIndex+1,this.items.length-1),0)}activatePreviousItem(){let t=this.list.nativeElement,i=t.getElementsByClassName("active").item(0);if(i){let r=i.previousSibling;r&&r.nodeName=="LI"&&r.getBoundingClientRect().top<t.getBoundingClientRect().top&&(t.scrollTop=r.offsetTop)}this.activeIndex=Math.max(Math.min(this.activeIndex-1,this.items.length-1),0)}reset(){this.list.nativeElement.scrollTop=0,this.checkBounds()}checkBounds(){let t=this.coords.left,i=this.coords.top,r=this.dropUp,s=this.list.nativeElement.getBoundingClientRect();s.left+s.width>window.innerWidth&&(t-=s.left+s.width-window.innerWidth+10),s.top<0&&(r=!1),this.positionElement(t,i,r)}positionElement(t=this.coords.left,i=this.coords.top,r=this.dropUp){let s=this.element.nativeElement;i+=r?0:this.offset,s.className=r?"dropup":null,s.style.position="absolute",s.style.left=t+"px",s.style.top=i+"px"}getBlockCursorDimensions(t){let i=window.getComputedStyle(t);return{height:parseFloat(i.lineHeight),width:parseFloat(i.fontSize)}}}return e.\u0275fac=function(t){return new(t||e)(Ce(ji))},e.\u0275cmp=Wt({type:e,selectors:[["mention-list"]],viewQuery:function(t,i){if(t&1&&(bi(nZ,7),bi(iZ,7)),t&2){let r;ui(r=di())&&(i.list=r.first),ui(r=di())&&(i.defaultItemTemplate=r.first)}},inputs:{labelKey:"labelKey",itemTemplate:"itemTemplate"},outputs:{itemClick:"itemClick"},decls:5,vars:6,consts:[["defaultItemTemplate",""],["list",""],[1,"dropdown-menu","scrollable-menu",3,"hidden"],[3,"active","mention-active",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"mousedown"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){t&1&&(de(0,sZ,1,1,"ng-template",null,0,mt),K(2,"ul",2,1),de(4,oZ,3,10,"li",3),Q()),t&2&&(V(2),Rn("mention-menu",!i.styleOff)("mention-dropdown",!i.styleOff&&i.dropUp),H("hidden",i.hidden),V(2),H("ngForOf",i.items))},dependencies:[ys,Ii],styles:[".mention-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:11em;padding:.5em 0;margin:.125em 0 0;font-size:1em;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25em}.mention-item[_ngcontent-%COMP%]{display:block;padding:.2em 1.5em;line-height:1.5em;clear:both;font-weight:400;color:#212529;text-align:inherit;white-space:nowrap;background-color:transparent;border:0}.mention-active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;background-color:#337ab7;outline:0}.scrollable-menu[_ngcontent-%COMP%]{display:block;height:auto;max-height:292px;overflow:auto}[hidden][_ngcontent-%COMP%]{display:none}.mention-dropdown[_ngcontent-%COMP%]{bottom:100%;top:auto;margin-bottom:2px}"]}),e})(),_b=8,i3=9,vb=13,mZ=16,gZ=27,_Z=32;var vZ=38;var yZ=40,r3=229,c3=(()=>{class e{constructor(t,i,r){this._element=t,this._componentResolver=i,this._viewContainerRef=r,this.mentionConfig={items:[]},this.DEFAULT_CONFIG={items:[],triggerChar:"@",labelKey:"label",maxItems:-1,allowSpace:!1,returnTrigger:!1,mentionSelect:(s,l)=>this.activeConfig.triggerChar+s[this.activeConfig.labelKey],mentionFilter:(s,l)=>{let d=s.toLowerCase();return l.filter(f=>f[this.activeConfig.labelKey].toLowerCase().startsWith(d))}},this.searchTerm=new Zt,this.itemSelected=new Zt,this.opened=new Zt,this.closed=new Zt,this.triggerChars={}}set mention(t){this.mentionItems=t}ngOnChanges(t){(t.mention||t.mentionConfig)&&this.updateConfig()}updateConfig(){let t=this.mentionConfig;this.triggerChars={},this.mentionItems&&(t.items=this.mentionItems),this.addConfig(t),t.mentions&&t.mentions.forEach(i=>this.addConfig(i))}addConfig(t){let i=Object.assign({},this.DEFAULT_CONFIG);t=Object.assign(i,t);let r=t.items;r&&r.length>0&&(typeof r[0]=="string"&&(r=r.map(s=>{let l={};return l[t.labelKey]=s,l})),t.labelKey&&(r=r.filter(s=>s[t.labelKey]),t.disableSort||r.sort((s,l)=>s[t.labelKey].localeCompare(l[t.labelKey])))),t.items=r,this.triggerChars[t.triggerChar]=t,this.activeConfig&&this.activeConfig.triggerChar==t.triggerChar&&(this.activeConfig=t,this.updateSearchList())}setIframe(t){this.iframe=t}stopEvent(t){t.wasClick||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())}blurHandler(t){this.stopEvent(t),this.stopSearch()}inputHandler(t,i=this._element.nativeElement){if(this.lastKeyCode===r3&&t.data){let r=t.data.charCodeAt(0);this.keyHandler({keyCode:r,inputEvent:!0},i)}}keyHandler(t,i=this._element.nativeElement){if(this.lastKeyCode=t.keyCode,t.isComposing||t.keyCode===r3)return;let r=s3(i),s=t3(i,this.iframe),l=t.key;if(!l){let f=t.which||t.keyCode;!t.shiftKey&&f>=65&&f<=90?l=String.fromCharCode(f+32):l=String.fromCharCode(t.which||t.keyCode)}t.keyCode==vb&&t.wasClick&&s<this.startPos&&(s=this.startNode.length,a3(this.startNode,s,this.iframe));let d=this.triggerChars[l];if(d)this.activeConfig=d,this.startPos=t.inputEvent?s-1:s,this.startNode=(this.iframe?this.iframe.contentWindow.getSelection():window.getSelection()).anchorNode,this.searching=!0,this.searchString=null,this.showSearchList(i),this.updateSearchList(),d.returnTrigger&&this.searchTerm.emit(d.triggerChar);else if(this.startPos>=0&&this.searching){if(s<=this.startPos)this.searchList.hidden=!0;else if(t.keyCode!==mZ&&!t.metaKey&&!t.altKey&&!t.ctrlKey&&s>this.startPos){if(!this.activeConfig.allowSpace&&t.keyCode===_Z)this.startPos=-1;else if(t.keyCode===_b&&s>0)s--,s==this.startPos&&this.stopSearch();else if(this.searchList.hidden){if(t.keyCode===i3||t.keyCode===vb){this.stopSearch();return}}else if(!this.searchList.hidden)if(t.keyCode===i3||t.keyCode===vb){this.stopEvent(t),this.itemSelected.emit(this.searchList.activeItem);let f=this.activeConfig.mentionSelect(this.searchList.activeItem,this.activeConfig.triggerChar);if(TT(i,this.startPos,s,f,this.iframe),"createEvent"in document){let v=document.createEvent("HTMLEvents");this.iframe?v.initEvent("change",!0,!1):v.initEvent("input",!0,!1),this._element.nativeElement.dispatchEvent(v)}return this.startPos=-1,this.stopSearch(),!1}else{if(t.keyCode===gZ)return this.stopEvent(t),this.stopSearch(),!1;if(t.keyCode===yZ)return this.stopEvent(t),this.searchList.activateNextItem(),!1;if(t.keyCode===vZ)return this.stopEvent(t),this.searchList.activatePreviousItem(),!1}if(l.length!=1&&t.keyCode!=_b)return this.stopEvent(t),!1;if(this.searching){let f=r.substring(this.startPos+1,s);if(t.keyCode!==_b&&!t.inputEvent&&(f+=l),this.searchString=f,this.activeConfig.returnTrigger){let v=this.searchString||t.keyCode===_b?r.substring(this.startPos,this.startPos+1):"";this.searchTerm.emit(v+this.searchString)}else this.searchTerm.emit(this.searchString);this.updateSearchList()}}}}startSearch(t,i=this._element.nativeElement){t=t||this.mentionConfig.triggerChar||this.DEFAULT_CONFIG.triggerChar;let r=t3(i,this.iframe);TT(i,r,r,t,this.iframe),this.keyHandler({key:t,inputEvent:!0},i)}stopSearch(){this.searchList&&!this.searchList.hidden&&(this.searchList.hidden=!0,this.closed.emit()),this.activeConfig=null,this.searching=!1}updateSearchList(){let t=[];if(this.activeConfig&&this.activeConfig.items){let i=this.activeConfig.items;!this.activeConfig.disableSearch&&this.searchString&&this.activeConfig.labelKey&&this.activeConfig.mentionFilter&&(i=this.activeConfig.mentionFilter(this.searchString,i)),t=i,this.activeConfig.maxItems>0&&(t=t.slice(0,this.activeConfig.maxItems))}this.searchList&&(this.searchList.items=t,this.searchList.hidden=t.length==0)}showSearchList(t){if(this.opened.emit(),this.searchList==null){let i=this._componentResolver.resolveComponentFactory(fZ),r=this._viewContainerRef.createComponent(i);this.searchList=r.instance,this.searchList.itemTemplate=this.mentionListTemplate,r.instance.itemClick.subscribe(()=>{t.focus();let s={key:"Enter",keyCode:vb,wasClick:!0};this.keyHandler(s,t)})}this.searchList.labelKey=this.activeConfig.labelKey,this.searchList.dropUp=this.activeConfig.dropUp,this.searchList.styleOff=this.mentionConfig.disableStyle,this.searchList.activeIndex=0,this.searchList.position(t,this.iframe),window.requestAnimationFrame(()=>this.searchList.reset())}}return e.\u0275fac=function(t){return new(t||e)(Ce(ji),Ce(Cl),Ce(Dr))},e.\u0275dir=Zn({type:e,selectors:[["","mention",""],["","mentionConfig",""]],hostAttrs:["autocomplete","off"],hostBindings:function(t,i){t&1&&nt("keydown",function(s){return i.keyHandler(s)})("input",function(s){return i.inputHandler(s)})("blur",function(s){return i.blurHandler(s)})},inputs:{mention:"mention",mentionConfig:"mentionConfig",mentionListTemplate:"mentionListTemplate"},outputs:{searchTerm:"searchTerm",itemSelected:"itemSelected",opened:"opened",closed:"closed"},features:[ni]}),e})(),l3=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vn({type:e}),e.\u0275inj=_n({imports:[Na]}),e})();var wZ=(e,n,t,i,r)=>({flexBasis:e,fontSize:n,height:t,lineHeight:i,width:r}),CZ=(e,n,t)=>({flexBasis:e,height:n,objectFit:"cover",width:t});function xZ(e,n){if(e&1){let t=kt();K(0,"img",4),nt("error",function(){Le(t);let r=Y();return Ne(r.isError=!0)}),Q()}if(e&2){let t=Y();Oi("src",t.imageUrl||t.fallbackChannelImage,vr),Oi("alt",t.initials),H("ngStyle",$h(3,CZ,"calc(var(--str-chat__spacing-px, 1px) * "+t.size+")","calc(var(--str-chat__spacing-px, 1px) * "+t.size+")","calc(var(--str-chat__spacing-px, 1px) * "+t.size+")"))}}function MZ(e,n){if(e&1&&(K(0,"div",5),je(1),Q()),e&2){let t=Y();V(),Rt(" ",t.initials," ")}}function DZ(e,n){e&1&&Me(0,"div",6)}function TZ(e,n){if(e&1&&Me(0,"stream-avatar",2),e&2){let t=n.name,i=n.imageUrl,r=n.size,s=n.type,l=n.channel,d=n.user,f=n.location,v=n.initialsType,x=n.showOnlineIndicator;H("name",t)("imageUrl",i)("size",r)("type",s)("channel",l)("user",d)("location",f)("initialsType",v)("showOnlineIndicator",x)}}function SZ(e,n){e&1&&St(0)}function OZ(e,n){e&1&&(li(),K(0,"svg",25),Me(1,"path",26),Q())}function IZ(e,n){e&1&&(li(),K(0,"svg",27),Me(1,"path",28),Q())}function EZ(e,n){e&1&&(li(),K(0,"svg",29)(1,"g",30),Me(2,"path",31)(3,"path",32),Q()())}function PZ(e,n){e&1&&(li(),K(0,"svg",33)(1,"title"),je(2,"Combined Shape"),Q(),K(3,"desc"),je(4,"Created with Sketch."),Q(),K(5,"g",34)(6,"g",35)(7,"g",36),Me(8,"path",37),Q()()()())}function kZ(e,n){e&1&&(li(),K(0,"svg",38)(1,"title",39),je(2,"streamChat.Send"),Q(),Me(3,"path",40),Q())}function AZ(e,n){e&1&&(li(),K(0,"svg",41)(1,"title",39),je(2,"streamChat.Attach files"),Q(),Me(3,"path",42),Q())}function RZ(e,n){e&1&&(li(),K(0,"svg",43),Me(1,"path",44),Q())}function FZ(e,n){e&1&&(li(),K(0,"svg",45),Me(1,"rect",46)(2,"circle",47)(3,"path",48),Q())}function LZ(e,n){if(e&1&&(li(),K(0,"svg",49),Me(1,"path",50),Q()),e&2){let t=Y();_s("height",t.size||20)("width",t.size||20)}}function NZ(e,n){e&1&&(li(),K(0,"svg",51),Me(1,"path",52)(2,"path",53)(3,"path",54)(4,"path",55)(5,"path",56),K(6,"defs")(7,"linearGradient",57),Me(8,"stop",58)(9,"stop",59),Q()()())}function BZ(e,n){e&1&&(li(),K(0,"svg",60),Me(1,"path",61),Q())}function jZ(e,n){e&1&&(li(),K(0,"svg",62),Me(1,"path",63),Q())}function VZ(e,n){e&1&&(li(),K(0,"svg",64),Me(1,"path",65),Q())}function zZ(e,n){e&1&&(li(),K(0,"svg",66),Me(1,"path",67),Q())}function UZ(e,n){e&1&&(li(),K(0,"svg",68),Me(1,"path",69),Q())}function $Z(e,n){e&1&&(li(),K(0,"svg",70),Me(1,"path",71),Q())}function HZ(e,n){e&1&&(li(),K(0,"svg",72),Me(1,"path",73),Q())}function qZ(e,n){e&1&&(li(),K(0,"svg",74),Me(1,"path",75),Q())}function GZ(e,n){e&1&&(li(),K(0,"svg",76),Me(1,"path",77),Q())}function WZ(e,n){e&1&&(li(),K(0,"svg",78)(1,"g",79),Me(2,"path",80),Q(),K(3,"defs")(4,"clipPath",81),Me(5,"rect",82),Q()()())}function ZZ(e,n){e&1&&(li(),K(0,"svg",83),Me(1,"path",84),Q())}function YZ(e,n){if(e&1&&(li(),K(0,"svg",85),Me(1,"path",86)(2,"path",87),Q()),e&2){let t,i,r=Y();_s("width",(t=r.size)!==null&&t!==void 0?t:24)("height",(i=r.size)!==null&&i!==void 0?i:24)}}function KZ(e,n){e&1&&(li(),K(0,"svg",88),Me(1,"path",89),Q())}function QZ(e,n){e&1&&(li(),K(0,"svg",88),Me(1,"path",90),Q())}function JZ(e,n){if(e&1&&(li(),K(0,"svg",91),Me(1,"path",92)(2,"path",93)(3,"path",94)(4,"path",53)(5,"path",95),Q()),e&2){let t=Y();_s("height",t.size||20)("width",t.size||20)}}function XZ(e,n){e&1&&(li(),K(0,"svg",96),Me(1,"path",97),Q())}function eY(e,n){if(e&1&&Me(0,"stream-icon",2),e&2){let t=n.icon,i=n.size;H("icon",t)("size",i)}}function tY(e,n){e&1&&St(0)}var nY=e=>({stopColor:e});function iY(e,n){if(e&1&&Me(0,"stream-loading-indicator",2),e&2){let t=n.size,i=n.color;H("size",t)("color",i)}}function rY(e,n){e&1&&St(0)}function sY(e,n){e&1&&St(0)}function aY(e,n){if(e&1&&(Nt(0),de(1,sY,1,0,"ng-container",5),tt(2,"async"),Bt()),e&2){let t=n.$implicit,i=Y(),r=Xe(5);V(),H("ngTemplateOutlet",ht(2,2,i.customTemplatesService.messageActionsBoxItemTemplate$)||r)("ngTemplateOutletContext",i.getMessageActionTemplateContext(t))}}function oY(e,n){if(e&1){let t=kt();K(0,"button",6),nt("click",function(){let r=Le(t).actionHandler,s=Y();return Ne(r(s.message,s.isMine))}),K(1,"li",7),je(2),tt(3,"translate"),Q()()}if(e&2){let t=n.actionName,i=n.actionLabelOrTranslationKey,r=Y();_s("data-testid",t+"-action"),V(2),Rt(" ",ht(3,2,r.getActionLabel(i))," ")}}var cY=["modalInner"],Cb=["*"];function lY(e,n){e&1&&St(0)}function uY(e,n){if(e&1&&(Nt(0),de(1,lY,1,0,"ng-container",7),Bt()),e&2){let t=Y();V(),H("ngTemplateOutlet",t.content)}}function dY(e,n){e&1&&Qs(0)}var kT=["container"],hY=e=>({"inset-inline-start":e});function pY(e,n){if(e&1&&Me(0,"div",4),e&2){let t=n.$implicit,i=n.index,r=Y();Ra("--str-chat__wave-progress-bar__amplitude-bar-height",t?t*100+"%":"0%"),Rn("str-chat__wave-progress-bar__amplitude-bar--active",r.progress>i/r.resampledWaveFormData.length)}}var fY=["audioElement"],mY=()=>[];function gY(e,n){e&1&&(Nt(0),K(1,"div",15),Me(2,"stream-icon-placeholder",16),K(3,"span",17),je(4),tt(5,"translate"),Q()(),Bt()),e&2&&(V(2),H("size",20),V(2),hi(ht(5,2,"streamChat.Error playing audio")))}function _Y(e,n){if(e&1&&(K(0,"span",22),je(1),Q()),e&2){let t=Y(2),i=Xe(2);V(),Rt(" ",t.secondsElapsed>0||!i.paused?t.secondsElapsedFormatted:t.durationFormatted,"")}}function vY(e,n){if(e&1&&(K(0,"span",23),je(1),Q()),e&2){let t=Y(2);V(),Rt(" ",t.fileSize," ")}}function yY(e,n){if(e&1&&Me(0,"stream-voice-recording-wavebar",24),e&2){let t=Y(2),i=Xe(2);H("waveFormData",(t.attachment==null?null:t.attachment.waveform_data)||_m(3,mY))("duration",t.attachment==null?null:t.attachment.duration)("audioElement",i)}}function bY(e,n){if(e&1&&(K(0,"div",18)(1,"div",19),de(2,_Y,2,1,"span",20)(3,vY,2,1,"ng-template",null,3,mt),Q(),de(5,yY,1,4,"stream-voice-recording-wavebar",21),Q()),e&2){let t=Xe(4),i=Y();V(2),H("ngIf",!!(i.attachment!=null&&i.attachment.duration))("ngIfElse",t),V(3),H("ngIf",(i.attachment==null?null:i.attachment.waveform_data)&&(i.attachment==null?null:i.attachment.duration))}}function wY(e,n){if(e&1){let t=kt();K(0,"button",25),nt("click",function(){Le(t);let r=Y();return Ne(r.setPlaybackRate())}),je(1),tt(2,"number"),Q()}if(e&2){Y();let t=Xe(2);V(),Rt(" ",La(2,1,t==null?null:t.playbackRate,"1.1-1"),"x ")}}function CY(e,n){e&1&&Me(0,"stream-icon-placeholder",26),e&2&&H("size",40)}var xY=["modalContent"],xb=(e,n)=>({height:e,width:n}),MY=(e,n,t)=>({"background-image":e,height:n,width:t}),DY=e=>({imageCount:e}),TY=(e,n)=>({width:e,height:n}),u3=e=>({visibility:e});function SY(e,n){e&1&&St(0)}function OY(e,n){if(e&1){let t=kt();K(0,"img",18,3),nt("click",function(){let r=Le(t).attachment,s=Y(4);return Ne(s.openImageModal([r]))})("keyup.enter",function(){let r=Le(t).attachment,s=Y(4);return Ne(s.openImageModal([r]))}),Q()}if(e&2){let t=n.attachment,i=Xe(1),r=Y(4);Ra("--original-height",r.getImageAttachmentConfiguration(t,"single",i).originalHeight)("--original-width",r.getImageAttachmentConfiguration(t,"single",i).originalWidth),H("src",r.getImageAttachmentConfiguration(t,"single",i).url,vr)("alt",t==null?null:t.fallback)("ngStyle",Js(7,xb,r.getImageAttachmentConfiguration(t,"single",i).height,r.getImageAttachmentConfiguration(t,"single",i).width))}}function IY(e,n){if(e&1&&(Nt(0),de(1,SY,1,0,"ng-container",17),tt(2,"async"),de(3,OY,2,10,"ng-template",null,2,mt),Bt()),e&2){let t=Xe(4),i=Y().$implicit,r=Y(2);V(),H("ngTemplateOutlet",ht(2,2,r.customTemplatesService.imageAttachmentTemplate$)||t)("ngTemplateOutletContext",r.getAttachmentContext(i))}}function EY(e,n){e&1&&St(0)}function PY(e,n){if(e&1){let t=kt();K(0,"button",22),nt("click",function(){Le(t);let r=Y().index,s=Y().attachment,l=Y(4);return Ne(l.openImageModal(s.images,r))})("keyup.enter",function(){Le(t);let r=Y().index,s=Y().attachment,l=Y(4);return Ne(l.openImageModal(s.images,r))}),Me(1,"img",23,3),Q()}if(e&2){let t=Xe(2),i=Y().$implicit,r=Y(5);Rn("str-chat__message-attachment--svg-image",r.isSvg(i)),V(),Ra("--original-height",r.getImageAttachmentConfiguration(i,"gallery",t).originalHeight)("--original-width",r.getImageAttachmentConfiguration(i,"gallery",t).originalWidth),H("src",r.getImageAttachmentConfiguration(i,"gallery",t).url,vr)("alt",i.fallback)("ngStyle",Js(9,xb,r.getImageAttachmentConfiguration(i,"gallery",t).height,r.getImageAttachmentConfiguration(i,"gallery",t).width))}}function kY(e,n){if(e&1){let t=kt();K(0,"button",24,5),nt("click",function(){Le(t);let r=Y().index,s=Y().attachment,l=Y(4);return Ne(l.openImageModal(s.images,r))})("keyup.enter",function(){Le(t);let r=Y().index,s=Y().attachment,l=Y(4);return Ne(l.openImageModal(s.images,r))}),Me(2,"p",25),tt(3,"translate"),Q()}if(e&2){let t=Xe(1),i=Y().$implicit,r=Y().attachment,s=Y(4);Ra("--original-height",s.getImageAttachmentConfiguration(i,"gallery",t).originalHeight)("--original-width",s.getImageAttachmentConfiguration(i,"gallery",t).originalWidth),Rn("str-chat__message-attachment--svg-image",s.isSvg(i)),H("ngStyle",$h(11,MY,"url("+s.getImageAttachmentConfiguration(i,"gallery",t).url+")",s.getImageAttachmentConfiguration(i,"gallery",t).height,s.getImageAttachmentConfiguration(i,"gallery",t).width)),V(2),H("innerHTML",La(3,8,"streamChat.{{ imageCount }} more",wi(15,DY,r.images.length-4)),Wo)}}function AY(e,n){if(e&1&&(Nt(0),de(1,PY,3,12,"button",20)(2,kY,4,17,"button",21),Bt()),e&2){let t=n.index,i=n.last;V(),H("ngIf",t<3||t===3&&i),V(),H("ngIf",t===3&&!i)}}function RY(e,n){if(e&1&&(K(0,"div",19),de(1,AY,3,2,"ng-container",14),Q()),e&2){let t=n.attachment,i=Y(4);Rn("str-chat__gallery--square",(t==null?null:t.images.length)>3)("str-chat__gallery-two-rows",(t==null?null:t.images.length)>2),V(),H("ngForOf",t.images)("ngForTrackBy",i.trackByImageUrl)}}function FY(e,n){if(e&1&&(Nt(0),de(1,EY,1,0,"ng-container",17),tt(2,"async"),de(3,RY,2,6,"ng-template",null,4,mt),Bt()),e&2){let t=Xe(4),i=Y().$implicit,r=Y(2);V(),H("ngTemplateOutlet",ht(2,2,r.customTemplatesService.galleryAttachmentTemplate$)||t)("ngTemplateOutletContext",r.getAttachmentContext(i))}}function LY(e,n){e&1&&St(0)}function NY(e,n){if(e&1&&(K(0,"div",26),Me(1,"video",27,7),Q()),e&2){let t=n.attachment,i=Xe(2),r=Y(4);Ra("--original-height",r.getVideoAttachmentConfiguration(t,i).originalHeight)("--original-width",r.getVideoAttachmentConfiguration(t,i).originalWidth),H("ngStyle",Js(7,xb,r.getVideoAttachmentConfiguration(t,i).height,r.getVideoAttachmentConfiguration(t,i).width)),V(),H("src",r.getVideoAttachmentConfiguration(t,i).url,vr)("poster",r.getVideoAttachmentConfiguration(t,i).thumbUrl,vr)}}function BY(e,n){if(e&1&&(Nt(0),de(1,LY,1,0,"ng-container",17),tt(2,"async"),de(3,NY,3,10,"ng-template",null,6,mt),Bt()),e&2){let t=Xe(4),i=Y().$implicit,r=Y(2);V(),H("ngTemplateOutlet",ht(2,2,r.customTemplatesService.videoAttachmentTemplate$)||t)("ngTemplateOutletContext",r.getAttachmentContext(i))}}function jY(e,n){e&1&&St(0)}function VY(e,n){e&1&&Me(0,"stream-icon-placeholder",36),e&2&&H("size",30)}function zY(e,n){e&1&&Me(0,"stream-icon-placeholder",37),e&2&&H("size",30)}function UY(e,n){if(e&1&&(K(0,"span",38),je(1),Q()),e&2){let t=Y().attachment,i=Y(4);V(),hi(i.getFileSize(t))}}function $Y(e,n){if(e&1&&(K(0,"div",28),de(1,VY,1,1,"stream-icon-placeholder",29)(2,zY,1,1,"stream-icon-placeholder",30),K(3,"div",31)(4,"a",32)(5,"div",33),je(6),Q(),Me(7,"stream-icon-placeholder",34),Q(),de(8,UY,2,1,"span",35),Q()()),e&2){let t=n.attachment,i=Y(4);V(),H("ngIf",i.themeVersion==="1"),V(),H("ngIf",i.themeVersion==="2"),V(2),Oi("href",t.asset_url,vr),V(2),Rt(" ",t.title," "),V(2),H("ngIf",i.hasFileSize(t))}}function HY(e,n){if(e&1&&(Nt(0),de(1,jY,1,0,"ng-container",17),tt(2,"async"),de(3,$Y,9,5,"ng-template",null,8,mt),Bt()),e&2){let t=Xe(4),i=Y().$implicit,r=Y(2);V(),H("ngTemplateOutlet",ht(2,2,r.customTemplatesService.fileAttachmentTemplate$)||t)("ngTemplateOutletContext",r.getAttachmentContext(i))}}function qY(e,n){e&1&&St(0)}function GY(e,n){if(e&1&&Me(0,"stream-voice-recording",39),e&2){let t=Y(2).$implicit;H("attachment",t)}}function WY(e,n){if(e&1&&(Nt(0),de(1,qY,1,0,"ng-container",17),tt(2,"async"),de(3,GY,1,1,"ng-template",null,9,mt),Bt()),e&2){let t=Xe(4),i=Y().$implicit,r=Y(2);V(),H("ngTemplateOutlet",ht(2,2,r.customTemplatesService.voiceRecordingAttachmentTemplate$)||t)("ngTemplateOutletContext",r.getAttachmentContext(i))}}function ZY(e,n){e&1&&St(0)}function YY(e,n){if(e&1&&(K(0,"div",46),Me(1,"img",47),Q()),e&2){let t=Y(2).ngIf;V(),Oi("alt",t.url),Oi("src",t.url,vr),H("ngStyle",Js(3,xb,t.height,t.width))}}function KY(e,n){if(e&1&&(K(0,"div",48),je(1),Q()),e&2){let t=Y().attachment;V(),Rt(" ",t.title," ")}}function QY(e,n){if(e&1&&(K(0,"div",49),je(1),Q()),e&2){let t=Y().attachment;V(),Rt(" ",t.text," ")}}function JY(e,n){if(e&1&&(K(0,"a",50),je(1),Q()),e&2){let t=Y().attachment,i=Y(4);Oi("href",t.title_link||t.og_scrape_url,vr),V(),Rt(" ",i.trimUrl(t.title_link||t.og_scrape_url)," ")}}function XY(e,n){if(e&1&&(K(0,"div"),de(1,YY,2,6,"div",40),K(2,"div",41)(3,"div",42),de(4,KY,2,1,"div",43)(5,QY,2,1,"div",44)(6,JY,2,2,"a",45),Q()()()),e&2){let t=n.attachment,i=Y().ngIf;ha("str-chat__message-attachment-card str-chat__message-attachment-card--",t.type,""),V(),H("ngIf",i.url),V(3),H("ngIf",t.title),V(),H("ngIf",t.text),V(),H("ngIf",t.title_link||t.og_scrape_url)}}function eK(e,n){if(e&1&&(Nt(0),de(1,ZY,1,0,"ng-container",17),tt(2,"async"),de(3,XY,7,7,"ng-template",null,10,mt),Bt()),e&2){let t=Xe(4),i=Y().$implicit,r=Y(2);V(),H("ngTemplateOutlet",ht(2,2,r.customTemplatesService.cardAttachmentTemplate$)||t)("ngTemplateOutletContext",r.getAttachmentContext(i))}}function tK(e,n){e&1&&St(0)}function nK(e,n){if(e&1){let t=kt();K(0,"button",54),nt("click",function(){let r=Le(t).$implicit,s=Y(5);return Ne(s.sendAction(r))})("keyup.enter",function(){let r=Le(t).$implicit,s=Y(5);return Ne(s.sendAction(r))}),je(1),Q()}if(e&2){let t=n.$implicit;ha("str-chat__message-attachment-actions-button str-chat__message-attachment-actions-button--",t.style,""),V(),Rt(" ",t.text," ")}}function iK(e,n){if(e&1&&(K(0,"div",51)(1,"div",52),de(2,nK,2,4,"button",53),Q()()),e&2){let t=n.attachment,i=Y(4);V(2),H("ngForOf",t.actions)("ngForTrackBy",i.trackByActionValue)}}function rK(e,n){if(e&1&&(Nt(0),de(1,tK,1,0,"ng-container",17),tt(2,"async"),de(3,iK,3,2,"ng-template",null,11,mt),Bt()),e&2){let t=Xe(4),i=Y().$implicit,r=Y(2);V(),H("ngTemplateOutlet",ht(2,2,r.customTemplatesService.attachmentActionsTemplate$)||t)("ngTemplateOutletContext",r.getAttachmentContext(i))}}function sK(e,n){if(e&1&&(Nt(0),K(1,"div",16),de(2,IY,5,4,"ng-container",15)(3,FY,5,4,"ng-container",15)(4,BY,5,4,"ng-container",15)(5,HY,5,4,"ng-container",15)(6,WY,5,4,"ng-container",15)(7,eK,5,4,"ng-container",15)(8,rK,5,4,"ng-container",15),Q(),Bt()),e&2){let t=n.$implicit,i=Y(2);V(),ha("str-chat__message-attachment str-chat__message-attachment--",t.type," str-chat__message-attachment-dynamic-size"),Rn("str-chat__message-attachment--card",i.isCard(t))("str-chat-angular__message-attachment-file-single",i.isFile(t))("str-chat__message-attachment--voice-recording",i.isVoiceMessage(t))("str-chat__message-attachment-with-actions",t.actions&&t.actions.length>0)("str-chat__message-attachment--svg-image",i.isSvg(t)),V(),H("ngIf",i.isImage(t)),V(),H("ngIf",i.isGallery(t)),V(),H("ngIf",i.isVideo(t)),V(),H("ngIf",i.isFile(t)),V(),H("ngIf",i.isVoiceMessage(t)),V(),H("ngIf",i.isCard(t)&&i.getCardAttachmentConfiguration(t)),V(),H("ngIf",t.actions&&t.actions.length>0)}}function aK(e,n){e&1&&St(0)}function oK(e,n){if(e&1&&(Nt(0),de(1,aK,1,0,"ng-container",17),tt(2,"async"),Bt()),e&2){let t=Y(2),i=Xe(2);V(),H("ngTemplateOutlet",ht(2,2,t.customTemplatesService.modalTemplate$)||i)("ngTemplateOutletContext",t.getModalContext())}}function cK(e,n){if(e&1&&(K(0,"div",13),de(1,sK,9,20,"ng-container",14)(2,oK,3,4,"ng-container",15),Q()),e&2){let t=Y();V(),H("ngForOf",t.orderedAttachments)("ngForTrackBy",t.trackByUrl),V(),H("ngIf",t.imagesToView&&t.imagesToView.length>0)}}function lK(e,n){if(e&1){let t=kt();K(0,"stream-modal",55),nt("isOpenChange",function(r){let s=Le(t).isOpenChangeHandler;return Ne(s(r))}),Q()}if(e&2){let t=n.isOpen,i=n.content;H("isOpen",t)("content",i)}}function uK(e,n){if(e&1){let t=kt();K(0,"div",56),Me(1,"img",57,3),K(3,"div")(4,"button",58),nt("click",function(){Le(t);let r=Y();return Ne(r.stepImages(-1))})("keyup.enter",function(){Le(t);let r=Y();return Ne(r.stepImages(-1))}),Me(5,"stream-icon-placeholder",59),Q(),K(6,"button",60),nt("click",function(){Le(t);let r=Y();return Ne(r.stepImages(1))})("keyup.enter",function(){Le(t);let r=Y();return Ne(r.stepImages(1))}),Me(7,"stream-icon-placeholder",61),Q()()()}if(e&2){let t=Xe(2),i=Y();V(),Ra("--original-height",i.getCarouselImageAttachmentConfiguration(i.imagesToView[i.imagesToViewCurrentIndex],t).originalHeight)("--original-width",i.getCarouselImageAttachmentConfiguration(i.imagesToView[i.imagesToViewCurrentIndex],t).originalWidth),H("src",i.getCarouselImageAttachmentConfiguration(i.imagesToView[i.imagesToViewCurrentIndex],t).url,vr)("alt",i.imagesToView[i.imagesToViewCurrentIndex].fallback)("ngStyle",Js(9,TY,i.getCarouselImageAttachmentConfiguration(i.imagesToView[i.imagesToViewCurrentIndex],t).width,i.getCarouselImageAttachmentConfiguration(i.imagesToView[i.imagesToViewCurrentIndex],t).height)),V(3),H("ngStyle",wi(12,u3,i.isImageModalPrevButtonVisible?"visible":"hidden")),V(2),H("ngStyle",wi(14,u3,i.isImageModalNextButtonVisible?"visible":"hidden"))}}var bb=e=>({attachmentUpload:e});function dK(e,n){if(e&1){let t=kt();K(0,"div",16),nt("click",function(){Le(t);let r=Y(2).$implicit,s=Y(2);return Ne(s.attachmentUploadRetried(r.file))})("keyup.enter",function(){Le(t);let r=Y(2).$implicit,s=Y(2);return Ne(s.attachmentUploadRetried(r.file))}),Me(1,"stream-icon-placeholder",17),Q()}}function hK(e,n){if(e&1&&Me(0,"img",18),e&2){let t=Y(2).$implicit;Oi("src",t.url?t.url:t.previewUri,vr),Oi("alt",t.file.name)}}function pK(e,n){e&1&&Me(0,"stream-loading-indicator-placeholder",19)}function fK(e,n){if(e&1){let t=kt();K(0,"div",8),de(1,dK,2,0,"div",9),K(2,"div",10)(3,"div",11)(4,"div",12),nt("click",function(){Le(t);let r=Y().$implicit,s=Y(2);return Ne(s.attachmentDeleted(r))})("keyup.enter",function(){Le(t);let r=Y().$implicit,s=Y(2);return Ne(s.attachmentDeleted(r))}),Me(5,"stream-icon-placeholder",13),Q()(),de(6,hK,1,2,"img",14),Q(),de(7,pK,1,0,"stream-loading-indicator-placeholder",15),Q()}if(e&2){let t=Y().$implicit;Rn("rfu-image-previewer__image--loaded",t.state==="success"),V(),H("ngIf",t.state==="error"),V(5),H("ngIf",t.url||t.previewUri),V(),H("ngIf",t.state==="uploading")}}function mK(e,n){if(e&1){let t=kt();Nt(0),K(1,"div",27),nt("click",function(){Le(t);let r=Y(2).$implicit,s=Y(2);return Ne(s.attachmentUploadRetried(r.file))})("keyup.enter",function(){Le(t);let r=Y(2).$implicit,s=Y(2);return Ne(s.attachmentUploadRetried(r.file))}),je(2," streamChat.failed "),Q(),K(3,"div",28),nt("click",function(){Le(t);let r=Y(2).$implicit,s=Y(2);return Ne(s.attachmentUploadRetried(r.file))})("keyup.enter",function(){Le(t);let r=Y(2).$implicit,s=Y(2);return Ne(s.attachmentUploadRetried(r.file))}),je(4," streamChat.retry "),Q(),Bt()}}function gK(e,n){e&1&&(K(0,"div",29),Me(1,"stream-loading-indicator-placeholder"),Q())}function _K(e,n){if(e&1){let t=kt();K(0,"div",20)(1,"ol")(2,"li",21),Me(3,"stream-icon-placeholder",22),K(4,"a",23),nt("click",function(r){Le(t);let s=Y().$implicit;return Ne(s.url?null:r.preventDefault())})("keyup.enter",function(r){Le(t);let s=Y().$implicit;return Ne(s.url?null:r.preventDefault())}),je(5),de(6,mK,5,0,"ng-container",24),Q(),K(7,"span",25),nt("click",function(){Le(t);let r=Y().$implicit,s=Y(2);return Ne(s.attachmentDeleted(r))})("keyup.enter",function(){Le(t);let r=Y().$implicit,s=Y(2);return Ne(s.attachmentDeleted(r))}),Me(8,"stream-icon-placeholder",13),Q(),de(9,gK,2,0,"div",26),Q()()()}if(e&2){let t=Y().$implicit;V(2),Rn("rfu-file-previewer__file--uploading",t.state==="uploading")("rfu-file-previewer__file--failed",t.state==="error"),V(2),Oi("href",t.url,vr),V(),Rt(" ",t.file.name," "),V(),H("ngIf",t.state==="error"),V(3),H("ngIf",t.state==="uploading")}}function vK(e,n){if(e&1&&(Nt(0),de(1,fK,8,5,"div",6)(2,_K,10,8,"div",7),Bt()),e&2){let t=n.$implicit;V(),H("ngIf",t.type==="image"),V(),H("ngIf",t.type==="file"||t.type==="video")}}function yK(e,n){if(e&1&&(K(0,"div",4),de(1,vK,3,2,"ng-container",5),tt(2,"async"),Q()),e&2){let t=Y();V(),H("ngForOf",ht(2,2,t.attachmentUploads$))("ngForTrackBy",t.trackByFile)}}function bK(e,n){e&1&&St(0)}function wK(e,n){e&1&&(K(0,"div",38),Me(1,"stream-loading-indicator-placeholder",39),Q()),e&2&&(V(),H("size",18))}function CK(e,n){e&1&&St(0)}function xK(e,n){if(e&1&&Me(0,"img",40),e&2){let t=Y(2).$implicit;Oi("src",t.url?t.url:t.previewUri,vr),Oi("alt",t.file.name)}}function MK(e,n){if(e&1&&(K(0,"div",34),de(1,bK,1,0,"ng-container",35)(2,wK,2,1,"div",36)(3,CK,1,0,"ng-container",35)(4,xK,1,2,"img",37),Q()),e&2){let t=Y().$implicit;Y(2);let i=Xe(5),r=Xe(7);V(),H("ngTemplateOutlet",i)("ngTemplateOutletContext",wi(6,bb,t)),V(),H("ngIf",t.state==="uploading"),V(),H("ngTemplateOutlet",r)("ngTemplateOutletContext",wi(8,bb,t)),V(),H("ngIf",t.url||t.previewUri)}}function DK(e,n){if(e&1){let t=kt();K(0,"a",47),nt("click",function(r){Le(t);let s=Y(2).$implicit;return Ne(s.url?null:r.preventDefault())})("keyup.enter",function(r){Le(t);let s=Y(2).$implicit;return Ne(s.url?null:r.preventDefault())}),Me(1,"stream-icon-placeholder",48),Q()}if(e&2){let t=Y(2).$implicit;Oi("href",t.url,vr)}}function TK(e,n){e&1&&Me(0,"stream-loading-indicator-placeholder",39),e&2&&H("size",18)}function SK(e,n){e&1&&St(0)}function OK(e,n){e&1&&St(0)}function IK(e,n){if(e&1&&(K(0,"div",41),Me(1,"stream-icon-placeholder",42),K(2,"div",43)(3,"div",44),je(4),Q(),de(5,DK,2,1,"a",45)(6,TK,1,1,"stream-loading-indicator-placeholder",46),Q(),de(7,SK,1,0,"ng-container",35)(8,OK,1,0,"ng-container",35),Q()),e&2){let t=Y().$implicit;Y(2);let i=Xe(5),r=Xe(7);V(4),Rt(" ",t.file.name," "),V(),H("ngIf",t.state==="success"),V(),H("ngIf",t.state==="uploading"),V(),H("ngTemplateOutlet",i)("ngTemplateOutletContext",wi(7,bb,t)),V(),H("ngTemplateOutlet",r)("ngTemplateOutletContext",wi(9,bb,t))}}function EK(e,n){if(e&1&&(Nt(0),de(1,MK,5,10,"div",32)(2,IK,9,11,"div",33),Bt()),e&2){let t=n.$implicit;V(),H("ngIf",t.type==="image"),V(),H("ngIf",t.type==="file"||t.type==="video")}}function PK(e,n){if(e&1&&(K(0,"div",30)(1,"div",31),de(2,EK,3,2,"ng-container",5),tt(3,"async"),Q()()),e&2){let t=Y();V(2),H("ngForOf",ht(3,2,t.attachmentUploads$))("ngForTrackBy",t.trackByFile)}}function kK(e,n){if(e&1){let t=kt();K(0,"div",49),nt("click",function(){let r=Le(t).attachmentUpload,s=Y();return Ne(s.attachmentDeleted(r))})("keyup.enter",function(){let r=Le(t).attachmentUpload,s=Y();return Ne(s.attachmentDeleted(r))}),Me(1,"stream-icon-placeholder",13),Q()}}function AK(e,n){if(e&1){let t=kt();K(0,"div",51),nt("click",function(){Le(t);let r=Y().attachmentUpload,s=Y();return Ne(s.attachmentUploadRetried(r.file))})("keyup.enter",function(){Le(t);let r=Y().attachmentUpload,s=Y();return Ne(s.attachmentUploadRetried(r.file))}),Me(1,"stream-icon-placeholder",17),Q()}if(e&2){let t=Y().attachmentUpload;ha("str-chat__attachment-preview-error str-chat__attachment-preview-error-",t.type==="image"?"image":"file","")}}function RK(e,n){if(e&1&&de(0,AK,2,3,"div",50),e&2){let t=n.attachmentUpload;H("ngIf",t.state==="error")}}var FK=["fileInput"];function LK(e,n){if(e&1&&Me(0,"stream-attachment-list",25),e&2){let t=Y(3);H("attachments",t.quotedMessageAttachments)("messageId",t.quotedMessage==null?null:t.quotedMessage.id)}}function NK(e,n){if(e&1){let t=kt();K(0,"div",16)(1,"div",17)(2,"div"),je(3),tt(4,"translate"),Q(),K(5,"button",18),nt("click",function(){Le(t);let r=Y(2);return Ne(r.deselectMessageToQuote())})("keyup.enter",function(){Le(t);let r=Y(2);return Ne(r.deselectMessageToQuote())}),Me(6,"stream-icon-placeholder",19),Q()(),K(7,"div",20),Me(8,"stream-avatar-placeholder",21),K(9,"div",22),de(10,LK,1,2,"stream-attachment-list",23),Me(11,"div",24),Q()()()}if(e&2){let t=Y(2);V(3),hi(ht(4,7,"streamChat.Reply to Message")),V(5),H("imageUrl",t.quotedMessage==null||t.quotedMessage.user==null?null:t.quotedMessage.user.image)("name",(t.quotedMessage==null||t.quotedMessage.user==null?null:t.quotedMessage.user.name)||(t.quotedMessage==null||t.quotedMessage.user==null?null:t.quotedMessage.user.id))("size",20)("user",(t.quotedMessage==null?null:t.quotedMessage.user)||void 0),V(2),H("ngIf",(t.quotedMessage==null?null:t.quotedMessage.attachments)&&(t.quotedMessage==null||t.quotedMessage.attachments==null?null:t.quotedMessage.attachments.length)),V(),H("innerHTML",(t.message==null||t.message.quoted_message==null?null:t.message.quoted_message.translation)||(t.quotedMessage==null?null:t.quotedMessage.html)||(t.quotedMessage==null?null:t.quotedMessage.text),Wo)}}function BK(e,n){if(e&1){let t=kt();K(0,"stream-attachment-preview-list",26),nt("retryAttachmentUpload",function(r){let s=Le(t).retryUploadHandler;return Ne(s(r))})("deleteAttachment",function(r){let s=Le(t).deleteUploadHandler;return Ne(s(r))}),Q()}if(e&2){let t=n.attachmentUploads$;H("attachmentUploads$",t)}}function jK(e,n){e&1&&St(0)}function VK(e,n){e&1&&St(0)}function zK(e,n){if(e&1&&(Nt(0,27),K(1,"div",28),de(2,VK,1,0,"ng-container",9),Q(),Bt()),e&2){let t=Y(2);V(2),H("ngTemplateOutlet",t.emojiPickerTemplate)("ngTemplateOutletContext",t.getEmojiPickerContext())}}function UK(e,n){if(e&1){let t=kt();Nt(0)(1,29),Uh("valueChange",function(r){Le(t);let s=Y(2);return gm(s.textareaValue,r)||(s.textareaValue=r),Ne(r)}),nt("valueChange",function(){Le(t);let r=Y(2);return Ne(r.typingStart$.next())})("send",function(){Le(t);let r=Y(2);return Ne(r.messageSent())})("userMentions",function(r){Le(t);let s=Y(2);return Ne(s.mentionedUsers=r)}),Bt()()}if(e&2){let t=Y(2);V(),zh("value",t.textareaValue),H("componentRef",t.textareaRef)("areMentionsEnabled",t.areMentionsEnabled)("mentionScope",t.mentionScope)("placeholder",t.textareaPlaceholder)("inputMode",t.inputMode)("autoFocus",t.autoFocus)}}function $K(e,n){if(e&1&&(Me(0,"textarea",30),tt(1,"translate")),e&2){let t=Y(2);H("value",ht(1,1,t.disabledTextareaText))}}function HK(e,n){e&1&&St(0)}function qK(e,n){if(e&1){let t=kt();K(0,"div",31)(1,"div",32),je(2),tt(3,"translate"),Q(),K(4,"div",33)(5,"label")(6,"input",34,3),nt("change",function(){Le(t);let r=Xe(7),s=Y(3);return Ne(s.filesSelected(r.files))}),Q(),K(8,"span",35),Me(9,"stream-icon-placeholder",36),Q()()()()}if(e&2){let t=Y(3);V(2),Rt(" ",ht(3,2,"streamChat.Attach files")," "),V(4),H("multiple",t.isMultipleFileUploadEnabled)}}function GK(e,n){if(e&1&&(Nt(0),de(1,HK,1,0,"ng-container",9)(2,qK,10,4,"ng-template",null,2,mt),Bt()),e&2){let t=Xe(3),i=Y(2);V(),H("ngTemplateOutlet",i.customAttachmentUploadTemplate||t)("ngTemplateOutletContext",i.getAttachmentUploadContext())}}function WK(e,n){if(e&1){let t=kt();K(0,"button",37),nt("click",function(){Le(t);let r=Y(2);return Ne(r.messageSent())})("keyup.enter",function(){Le(t);let r=Y(2);return Ne(r.messageSent())}),Me(1,"stream-icon-placeholder",38),Q()}}function ZK(e,n){if(e&1&&(K(0,"div",39)(1,"div",40),je(2),tt(3,"async"),Q()()),e&2){let t=Y(2);V(2),Rt(" ",ht(3,1,t.cooldown$)," ")}}function YK(e,n){if(e&1&&(K(0,"div"),tt(1,"async"),de(2,NK,12,9,"div",7),K(3,"div",8)(4,"div"),de(5,BK,1,1,"ng-template",null,0,mt)(7,jK,1,0,"ng-container",9),K(8,"div",10),de(9,zK,3,2,"ng-container",11)(10,UK,2,7,"ng-container",12)(11,$K,2,3,"ng-template",null,1,mt),Q(),de(13,GK,4,2,"ng-container",13),Q(),de(14,WK,2,0,"button",14)(15,ZK,4,3,"div",15),Q()()),e&2){let t=Xe(6),i=Xe(12),r=Y();vs(r.mode==="main"?"str-chat__input-flat":"str-chat__small-message-input"),Rn("str-chat__input-flat-has-attachments",ht(1,19,r.attachmentUploads$).length>0)("str-chat__input-flat-quoted",!!r.quotedMessage),V(2),H("ngIf",r.quotedMessage),V(2),vs(r.mode==="main"?"str-chat__input-flat--textarea-wrapper":"str-chat__small-message-input--textarea-wrapper"),V(3),H("ngTemplateOutlet",r.attachmentPreviewListTemplate||t)("ngTemplateOutletContext",r.getAttachmentPreviewListContext()),V(2),H("ngIf",r.emojiPickerTemplate),V(),H("ngIf",r.canSendMessages)("ngIfElse",i),V(3),H("ngIf",r.isFileUploadEnabled&&r.isFileUploadAuthorized&&r.canSendMessages),V(),H("ngIf",r.canSendMessages&&!r.isCooldownInProgress),V(),H("ngIf",r.isCooldownInProgress)}}function KK(e,n){if(e&1){let t=kt();K(0,"div",43)(1,"div",44),je(2),tt(3,"translate"),Q(),K(4,"button",45),nt("click",function(){Le(t);let r=Y(2);return Ne(r.deselectMessageToQuote())})("keyup.enter",function(){Le(t);let r=Y(2);return Ne(r.deselectMessageToQuote())}),Me(5,"stream-icon-placeholder",19),Q()()}e&2&&(V(2),Rt(" ",ht(3,1,"streamChat.Reply to Message")," "))}function QK(e,n){e&1&&St(0)}function JK(e,n){if(e&1){let t=kt();K(0,"div",53)(1,"input",54,3),nt("change",function(){Le(t);let r=Xe(2),s=Y(4);return Ne(s.filesSelected(r.files))}),Q(),K(3,"label",55),Me(4,"stream-icon-placeholder",56),Q()()}if(e&2){let t=Y(4);V(),Oi("id",t.fileInputId),H("multiple",t.isMultipleFileUploadEnabled),V(2),Oi("for",t.fileInputId)}}function XK(e,n){if(e&1&&(Nt(0),de(1,QK,1,0,"ng-container",9)(2,JK,5,3,"ng-template",null,2,mt),Bt()),e&2){let t=Xe(3),i=Y(3);V(),H("ngTemplateOutlet",i.customAttachmentUploadTemplate||t)("ngTemplateOutletContext",i.getAttachmentUploadContext())}}function eQ(e,n){if(e&1&&Me(0,"stream-attachment-list",25),e&2){let t=Y(4);H("attachments",t.quotedMessageAttachments)("messageId",t.quotedMessage==null?null:t.quotedMessage.id)}}function tQ(e,n){if(e&1&&(K(0,"div",57),Me(1,"stream-avatar-placeholder",58),K(2,"div",59),de(3,eQ,1,2,"stream-attachment-list",23),Me(4,"div",60),Q()()),e&2){let t=Y(3);V(),H("imageUrl",t.quotedMessage==null||t.quotedMessage.user==null?null:t.quotedMessage.user.image)("name",(t.quotedMessage==null||t.quotedMessage.user==null?null:t.quotedMessage.user.name)||(t.quotedMessage==null||t.quotedMessage.user==null?null:t.quotedMessage.user.id))("size",20)("user",(t.quotedMessage==null?null:t.quotedMessage.user)||void 0),V(2),H("ngIf",(t.quotedMessage==null?null:t.quotedMessage.attachments)&&(t.quotedMessage==null||t.quotedMessage.attachments==null?null:t.quotedMessage.attachments.length)),V(),H("innerHTML",(t.quotedMessage==null?null:t.quotedMessage.translation)||(t.quotedMessage==null?null:t.quotedMessage.html)||(t.quotedMessage==null?null:t.quotedMessage.text),Wo)}}function nQ(e,n){if(e&1){let t=kt();K(0,"stream-attachment-preview-list",61),nt("retryAttachmentUpload",function(r){let s=Le(t).retryUploadHandler;return Ne(s(r))})("deleteAttachment",function(r){let s=Le(t).deleteUploadHandler;return Ne(s(r))}),Q()}if(e&2){let t=n.attachmentUploads$;H("attachmentUploads$",t)}}function iQ(e,n){e&1&&St(0)}function rQ(e,n){e&1&&St(0)}function sQ(e,n){if(e&1&&(Nt(0,27),de(1,rQ,1,0,"ng-container",9),Bt()),e&2){let t=Y(3);V(),H("ngTemplateOutlet",t.emojiPickerTemplate)("ngTemplateOutletContext",t.getEmojiPickerContext())}}function aQ(e,n){if(e&1){let t=kt();K(0,"button",62),tt(1,"async"),tt(2,"async"),nt("click",function(){Le(t);let r=Y(3);return Ne(r.messageSent())})("keyup.enter",function(){Le(t);let r=Y(3);return Ne(r.messageSent())}),Me(3,"stream-icon-placeholder",63),Q()}if(e&2){let t=Y(3);H("disabled",ht(1,1,t.attachmentUploadInProgressCounter$)>0||!t.textareaValue&&ht(2,3,t.attachmentUploads$).length===0)}}function oQ(e,n){if(e&1&&(K(0,"div",64),je(1),tt(2,"async"),Q()),e&2){let t=Y(3);V(),Rt(" ",ht(2,1,t.cooldown$)," ")}}function cQ(e,n){if(e&1){let t=kt();Nt(0),K(1,"div",46),de(2,XK,4,2,"ng-container",13),K(3,"div",47),de(4,tQ,5,6,"div",48)(5,nQ,1,1,"ng-template",null,0,mt)(7,iQ,1,0,"ng-container",9),K(8,"div",49),Nt(9,50),Uh("valueChange",function(r){Le(t);let s=Y(2);return gm(s.textareaValue,r)||(s.textareaValue=r),Ne(r)}),nt("valueChange",function(){Le(t);let r=Y(2);return Ne(r.typingStart$.next())})("send",function(){Le(t);let r=Y(2);return Ne(r.messageSent())})("userMentions",function(r){Le(t);let s=Y(2);return Ne(s.mentionedUsers=r)}),Bt(),de(10,sQ,2,2,"ng-container",11),Q()(),de(11,aQ,4,5,"button",51)(12,oQ,3,3,"div",52),Q(),Bt()}if(e&2){let t=Xe(6),i=Y(2);V(2),H("ngIf",i.isFileUploadEnabled&&i.isFileUploadAuthorized&&i.canSendMessages),V(2),H("ngIf",i.quotedMessage),V(3),H("ngTemplateOutlet",i.attachmentPreviewListTemplate||t)("ngTemplateOutletContext",i.getAttachmentPreviewListContext()),V(2),zh("value",i.textareaValue),H("componentRef",i.textareaRef)("areMentionsEnabled",i.areMentionsEnabled)("mentionScope",i.mentionScope)("inputMode",i.inputMode)("autoFocus",i.autoFocus)("placeholder",i.textareaPlaceholder),V(),H("ngIf",i.emojiPickerTemplate),V(),H("ngIf",i.canSendMessages&&!i.isCooldownInProgress&&!i.message),V(),H("ngIf",i.isCooldownInProgress)}}function lQ(e,n){if(e&1&&(K(0,"div",65),je(1),tt(2,"translate"),Q()),e&2){let t=Y(2);V(),Rt(" ",ht(2,1,t.disabledTextareaText)," ")}}function uQ(e,n){if(e&1&&(K(0,"div",41),de(1,KK,6,3,"div",42)(2,cQ,13,14,"ng-container",12)(3,lQ,3,3,"ng-template",null,4,mt),Q()),e&2){let t=Xe(4),i=Y();V(),H("ngIf",i.quotedMessage),V(),H("ngIf",i.canSendMessages)("ngIfElse",t)}}function dQ(e,n){e&1&&St(0)}function hQ(e,n){if(e&1&&(Nt(0),de(1,dQ,1,0,"ng-container",3),Bt()),e&2){let t=Y();V(),H("ngTemplateOutlet",t.content)}}function pQ(e,n){e&1&&Qs(0)}var fQ=(e,n)=>({type:e,content:n});function mQ(e,n){if(e&1&&(K(0,"div",7),je(1),tt(2,"translate"),Q()),e&2){let t=Y(2).$implicit;V(),Rt(" ",La(2,1,t.text,t.translateParams)," ")}}function gQ(e,n){e&1&&St(0)}function _Q(e,n){if(e&1&&(Nt(0),de(1,gQ,1,0,"ng-container",4),Bt()),e&2){let t=Y(2).$implicit,i=Y();V(),H("ngTemplateOutlet",t.template)("ngTemplateOutletContext",i.getNotificationContentContext(t))}}function vQ(e,n){if(e&1&&de(0,mQ,3,4,"div",5)(1,_Q,2,2,"ng-container",6),e&2){let t=Y().$implicit;H("ngIf",t.text!==void 0),V(),H("ngIf",t.template!==void 0)}}function yQ(e,n){e&1&&St(0)}function bQ(e,n){if(e&1&&(Nt(0),de(1,vQ,2,2,"ng-template",null,1,mt)(3,yQ,1,0,"ng-container",4),tt(4,"async"),Bt()),e&2){let t=n.$implicit,i=Xe(2),r=Y(),s=Xe(5);V(3),H("ngTemplateOutlet",ht(4,2,r.customTemplatesService.notificationTemplate$)||s)("ngTemplateOutletContext",Js(4,fQ,t.type,i))}}function wQ(e,n){if(e&1&&Me(0,"stream-notification",8),e&2){let t=n.type,i=n.content;H("type",t)("content",i)}}var CQ=["editMessageForm"];function xQ(e,n){e&1&&St(0)}function MQ(e,n){if(e&1){let t=kt();K(0,"stream-modal",5),nt("isOpenChange",function(r){Le(t);let s=Y().isOpenChangeHandler;return Ne(s(r))}),Q()}if(e&2){let t=Y(),i=t.isOpen,r=t.content;H("isOpen",i)("content",r)}}function DQ(e,n){if(e&1&&de(0,MQ,1,2,"stream-modal",4),e&2){let t=n.isOpen;H("ngIf",t)}}function TQ(e,n){if(e&1){let t=kt();K(0,"stream-message-input",11),nt("messageUpdate",function(){let r=Le(t).messageUpdateHandler;return Ne(r())}),Q()}if(e&2){let t=n.message,i=n.sendMessage$;H("message",t)("sendMessage$",i)}}function SQ(e,n){e&1&&St(0)}function OQ(e,n){if(e&1){let t=kt();K(0,"div",6),de(1,TQ,1,2,"ng-template",null,2,mt)(3,SQ,1,0,"ng-container",3),tt(4,"async"),Me(5,"stream-notification-list"),K(6,"div",7)(7,"div",8)(8,"button",9),nt("click",function(){Le(t);let r=Y();return Ne(r.dismissed())}),je(9," streamChat.Cancel "),Q(),K(10,"button",10),nt("click",function(){Le(t);let r=Y();return Ne(r.sendClicked())})("keyup.enter",function(){Le(t);let r=Y();return Ne(r.sendClicked())}),je(11," streamChat.Send "),Q()()()()}if(e&2){let t=Xe(2),i=Y();V(3),H("ngTemplateOutlet",ht(4,2,i.customTemplatesService.messageInputTemplate$)||t)("ngTemplateOutletContext",i.getMessageInputContext())}}var IQ=(e,n,t,i)=>({message:e,isOpen:n,isOpenChangeHandler:t,content:i});function EQ(e,n){e&1&&St(0)}function PQ(e,n){if(e&1){let t=kt();K(0,"stream-modal",4),nt("isOpenChange",function(r){Le(t);let s=Y().isOpenChangeHandler;return Ne(s(r))}),Q()}if(e&2){let t=Y(),i=t.isOpen,r=t.content;H("isOpen",i)("content",r)}}function kQ(e,n){if(e&1&&de(0,PQ,1,2,"stream-modal",3),e&2){let t=n.isOpen;H("ngIf",t)}}function AQ(e,n){if(e&1){let t=kt();K(0,"div",5)(1,"div",6),je(2),tt(3,"translate"),Q(),K(4,"div",7)(5,"button",8),nt("click",function(){Le(t);let r=Y();return Ne(r.editMessage())})("keyup.enter",function(){Le(t);let r=Y();return Ne(r.editMessage())}),je(6),tt(7,"translate"),Q(),K(8,"button",9),nt("click",function(){Le(t);let r=Y();return Ne(r.resendMessage())})("keyup.enter",function(){Le(t);let r=Y();return Ne(r.resendMessage())}),je(9),tt(10,"translate"),Q(),K(11,"button",10),nt("click",function(){Le(t);let r=Y();return Ne(r.deleteMessage())})("keyup.enter",function(){Le(t);let r=Y();return Ne(r.deleteMessage())}),je(12),tt(13,"translate"),Q()()()}e&2&&(V(2),Rt(" ",ht(3,4,"streamChat.This message did not meet our content guidelines")," "),V(4),Rt(" ",ht(7,6,"streamChat.Edit Message")," "),V(3),Rt(" ",ht(10,8,"streamChat.Send Anyway")," "),V(3),Rt(" ",ht(13,10,"streamChat.Delete")," "))}var RQ=["*",[["","name","thread"]]],FQ=["*",'[name="thread"]'];function LQ(e,n){e&1&&St(0)}function NQ(e,n){e&1&&Me(0,"stream-edit-message-form")}function BQ(e,n){e&1&&St(0)}function jQ(e,n){e&1&&Me(0,"stream-message-bounce-prompt")}function VQ(e,n){e&1&&Qs(0,1,["*ngIf","isActiveThread$ | async"])}function zQ(e,n){if(e&1&&(K(0,"div",4),de(1,LQ,1,0,"ng-container",5),tt(2,"async"),de(3,NQ,1,0,"ng-template",null,1,mt)(5,BQ,1,0,"ng-container",5),tt(6,"async"),de(7,jQ,1,0,"ng-template",null,2,mt),K(9,"div",6),Qs(10),Q(),de(11,VQ,1,0,"ng-content",7),tt(12,"async"),Q()),e&2){let t=Xe(4),i=Xe(8),r=Y();V(),H("ngTemplateOutlet",ht(2,3,r.customTemplatesService.editMessageFormTemplate$)||t),V(4),H("ngTemplateOutlet",ht(6,5,r.customTemplatesService.messageBouncePromptTemplate$)||i),V(6),H("ngIf",ht(12,7,r.isActiveThread$))}}function UQ(e,n){e&1&&(K(0,"div",10),Me(1,"stream-icon",11),K(2,"p",12),je(3),tt(4,"translate"),Q(),K(5,"div",13),Me(6,"stream-notification-list"),Q()()),e&2&&(V(3),Rt(" ",ht(4,1,"streamChat.No chats here yet\u2026")," "))}function $Q(e,n){e&1&&(K(0,"div",14)(1,"div",15),Me(2,"div",16),K(3,"div",17),Me(4,"div",18)(5,"div",19),Q()(),K(6,"div",20)(7,"div",21),Me(8,"div",22),K(9,"div",23),Me(10,"div",24),K(11,"div",25),Me(12,"div",26)(13,"div",27),Q()()(),K(14,"div",21),Me(15,"div",22),K(16,"div",23),Me(17,"div",24),K(18,"div",25),Me(19,"div",26)(20,"div",27),Q()()(),K(21,"div",21),Me(22,"div",22),K(23,"div",23),Me(24,"div",24),K(25,"div",25),Me(26,"div",26)(27,"div",27),Q()()()(),K(28,"div",28),Me(29,"div",29)(30,"div",30),Q()())}function HQ(e,n){if(e&1&&(de(0,UQ,7,3,"div",8),tt(1,"async"),tt(2,"async"),tt(3,"async"),de(4,$Q,31,0,"div",9),tt(5,"async"),tt(6,"async"),tt(7,"async")),e&2){let t=Y();H("ngIf",ht(1,2,t.isInitializing$)===!1&&(ht(2,4,t.isError$)===!0||ht(3,6,t.isActiveChannel$)===!1)),V(4),H("ngIf",ht(5,8,t.isInitializing$)===!0&&ht(6,10,t.isError$)===!1&&ht(7,12,t.isActiveChannel$)===!1)}}function qQ(e,n){e&1&&St(0)}function GQ(e,n){if(e&1&&(K(0,"p",9),je(1),tt(2,"translate"),tt(3,"translate"),Q()),e&2){let t=Y();V(),Ev(" ",La(2,2,"streamChat.{{ memberCount }} members",t.memberCountParam)," ",t.canReceiveConnectEvents?La(3,5,"streamChat.{{ watcherCount }} online",t.watcherCountParam):""," ")}}function WQ(e,n){e&1&&St(0)}function ZQ(e,n){if(e&1&&(Nt(0),de(1,WQ,1,0,"ng-container",7),Bt()),e&2){let t=Y();V(),H("ngTemplateOutlet",t.channelActionsTemplate)("ngTemplateOutletContext",t.getChannelActionsContext())}}var YQ=(e,n,t,i,r,s,l)=>({channelDisplayTitle:e,channel:n,unreadCount:t,latestMessageText:i,latestMessageStatus:r,latestMessageTime:s,latestMessage:l});function KQ(e,n){e&1&&St(0)}function QQ(e,n){if(e&1&&(K(0,"div",16),je(1),Q()),e&2){let t=Y().unreadCount;V(),Rt(" ",t," ")}}function JQ(e,n){if(e&1&&(Nt(0),je(1),tt(2,"translate"),Bt()),e&2){let t=Y().latestMessageText;V(),Rt(" ",ht(2,1,t)," ")}}function XQ(e,n){if(e&1&&(Me(0,"span",17),tt(1,"translate")),e&2){let t=Y().latestMessageText;H("innerHTML",ht(1,1,t),Wo)}}function eJ(e,n){if(e&1&&(K(0,"div",18),Me(1,"stream-icon-placeholder",19),Q()),e&2){let t=Y().latestMessageStatus;ha("str-chat__channel-preview-messenger--status str-chat__channel-preview-messenger--status-",t,""),V(),H("icon",t==="delivered"?"delivered-icon":"read-icon")}}function tJ(e,n){if(e&1&&(K(0,"div",20),je(1),Q()),e&2){let t=Y().latestMessageTime;V(),Rt(" ",t," ")}}function nJ(e,n){if(e&1&&(K(0,"div",7)(1,"div",8)(2,"span",9),je(3),Q()(),de(4,QQ,2,1,"div",10),Q(),K(5,"div",11)(6,"div",12),de(7,JQ,3,3,"ng-container",13)(8,XQ,2,3,"ng-template",null,1,mt),Q(),de(10,eJ,2,4,"div",14)(11,tJ,2,1,"div",15),Q()),e&2){let t=n.channelDisplayTitle,i=n.unreadCount,r=n.latestMessageStatus,s=n.latestMessageTime,l=Xe(9),d=Y();V(3),hi(t),V(),H("ngIf",i),V(3),H("ngIf",d.displayAs==="text")("ngIfElse",l),V(3),H("ngIf",r),V(),H("ngIf",s)}}var iJ=[[["","channel-list-top",""]],[["","channel-list-bottom",""]]],rJ=["[channel-list-top]","[channel-list-bottom]"],sJ=e=>({channel:e});function aJ(e,n){e&1&&(K(0,"div",15),Me(1,"stream-icon",16),K(2,"p",17),je(3),tt(4,"translate"),Q()()),e&2&&(V(3),Rt(" ",ht(4,1,"streamChat.You have no channels currently")," "))}function oJ(e,n){e&1&&(K(0,"p",18),je(1),tt(2,"translate"),Q()),e&2&&(V(),Rt(" ",ht(2,1,"streamChat.You have no channels currently")," "))}function cJ(e,n){if(e&1&&Me(0,"stream-channel-preview",21),e&2){let t=n.channel;H("channel",t)}}function lJ(e,n){e&1&&St(0)}function uJ(e,n){if(e&1){let t=kt();Nt(0),de(1,cJ,1,1,"ng-template",null,5,mt),K(3,"div",19),nt("click",function(){Le(t);let r=Y(2);return Ne(r.channelSelected())})("keyup.enter",function(){Le(t);let r=Y(2);return Ne(r.channelSelected())}),de(4,lJ,1,0,"ng-container",20),Q(),Bt()}if(e&2){let t=n.$implicit,i=Xe(2),r=Y(2);V(4),H("ngTemplateOutlet",r.customChannelPreviewTemplate||i)("ngTemplateOutletContext",wi(2,sJ,t))}}function dJ(e,n){e&1&&(K(0,"span"),je(1),tt(2,"translate"),Q()),e&2&&(V(),hi(ht(2,1,"Load more")))}function hJ(e,n){e&1&&Me(0,"stream-loading-indicator-placeholder")}function pJ(e,n){if(e&1){let t=kt();K(0,"div",22),nt("click",function(){Le(t);let r=Y(2);return Ne(r.loadMoreChannels())})("keyup.enter",function(){Le(t);let r=Y(2);return Ne(r.loadMoreChannels())}),K(1,"button",23),de(2,dJ,3,3,"span",24)(3,hJ,1,0,"ng-template",null,6,mt),Q()()}if(e&2){let t=Xe(4),i=Y(2);V(),H("disabled",i.isLoadingMoreChannels),V(),H("ngIf",!i.isLoadingMoreChannels)("ngIfElse",t)}}function fJ(e,n){if(e&1&&(K(0,"div",9)(1,"div",10),Qs(2),de(3,aJ,5,3,"div",11),tt(4,"async"),de(5,oJ,3,3,"p",12),tt(6,"async"),de(7,uJ,5,4,"ng-container",13),tt(8,"async"),de(9,pJ,5,3,"div",14),tt(10,"async"),Qs(11,1),Q()()),e&2){let t,i,r=Y();V(3),H("ngIf",!((t=ht(4,5,r.channels$))!=null&&t.length)),V(2),H("ngIf",!((i=ht(6,7,r.channels$))!=null&&i.length)),V(2),H("ngForOf",ht(8,9,r.channels$))("ngForTrackBy",r.trackByChannelId),V(2),H("ngIf",ht(10,11,r.hasMoreChannels$))}}function mJ(e,n){e&1&&St(0)}function gJ(e,n){if(e&1&&(Nt(0),de(1,mJ,1,0,"ng-container",26),Bt()),e&2){Y(2);let t=Xe(10);V(),H("ngTemplateOutlet",t)}}function _J(e,n){e&1&&St(0)}function vJ(e,n){if(e&1&&(Nt(0),de(1,_J,1,0,"ng-container",26),Bt()),e&2){Y(2);let t=Xe(12);V(),H("ngTemplateOutlet",t)}}function yJ(e,n){if(e&1&&(de(0,gJ,2,1,"ng-container",25),tt(1,"async"),de(2,vJ,2,1,"ng-container",25),tt(3,"async")),e&2){let t=Y();H("ngIf",ht(1,2,t.isError$)),V(2),H("ngIf",ht(3,4,t.isInitializing$))}}function bJ(e,n){e&1&&St(0)}function wJ(e,n){if(e&1&&(K(0,"div",27),de(1,bJ,1,0,"ng-container",26),K(2,"div",28),Me(3,"stream-icon-placeholder",29),K(4,"h1"),je(5),tt(6,"translate"),Q(),K(7,"h3"),je(8),tt(9,"translate"),Q()()()),e&2){Y();let t=Xe(12);V(),H("ngTemplateOutlet",t),V(4),hi(ht(6,3,"streamChat.Connection error")),V(3),Rt(" ",ht(9,5,"streamChat.Error connecting to chat, refresh the page to try again.")," ")}}function CJ(e,n){e&1&&St(0)}function xJ(e,n){e&1&&St(0)}function MJ(e,n){e&1&&St(0)}function DJ(e,n){if(e&1&&(K(0,"div",30),de(1,CJ,1,0,"ng-container",26)(2,xJ,1,0,"ng-container",26)(3,MJ,1,0,"ng-container",26),Q()),e&2){Y();let t=Xe(14);V(),H("ngTemplateOutlet",t),V(),H("ngTemplateOutlet",t),V(),H("ngTemplateOutlet",t)}}function TJ(e,n){e&1&&(K(0,"div",31),Me(1,"div",32),K(2,"div",33),Me(3,"div",34)(4,"div",35),Q()())}var SJ=["selectorContainer"],OJ=["selectorTooltip"],_3=e=>({cursor:e}),IJ=(e,n)=>({left:e,visibility:n}),EJ=e=>({left:e}),PJ=(e,n,t,i,r)=>({isOpen:e,messageId:n,reactionType:t,isOpenChangeHandler:i,content:r});function kJ(e,n){if(e&1){let t=kt();K(0,"li",13),nt("click",function(){let r=Le(t).$implicit,s=Y(2);return Ne(s.reactionSelected(r))})("keyup.enter",function(){let r=Le(t).$implicit,s=Y(2);return Ne(s.reactionSelected(r))}),K(1,"span",14),je(2),Q(),K(3,"span",15),je(4),Q()()}if(e&2){let t=n.$implicit,i=Y(2);Rn("str-chat__message-reaction-own",i.isOwnReaction(t)),H("ngStyle",wi(5,_3,i.shouldHandleReactionClick?"pointer":"default")),V(2),Rt(" ",i.getEmojiByReaction(t),"\xA0 "),V(2),Rt(" ",i.messageReactionCounts[t]," ")}}function AJ(e,n){if(e&1&&(K(0,"div",9)(1,"ul",10),de(2,kJ,5,7,"li",11),K(3,"li")(4,"span",12),je(5),Q()()()()),e&2){let t=Y();Rn("str-chat__reaction-list--reverse",!0)("str-chat__reaction-list-hidden",t.isSelectorOpen),V(2),H("ngForOf",t.existingReactions)("ngForTrackBy",t.trackByMessageReaction),V(3),hi(t.reactionsCount)}}function RJ(e,n){if(e&1&&(K(0,"div",20,3),Me(2,"div",21),K(3,"span",22),je(4),Q()()),e&2){let t=Y(2);H("ngStyle",Js(3,IJ,(t.tooltipPositions==null?null:t.tooltipPositions.tooltip)+"px",t.tooltipPositions?"visible":"hidden")),V(2),H("ngStyle",wi(6,EJ,(t.tooltipPositions==null?null:t.tooltipPositions.arrow)+"px")),V(2),Rt(" ",t.tooltipText," ")}}function FJ(e,n){if(e&1){let t=kt();K(0,"div",27),nt("click",function(){Le(t);let r=Y(3);return Ne(r.hideTooltip())})("keyup.enter",function(){Le(t);let r=Y(3);return Ne(r.hideTooltip())})("mouseenter",function(r){Le(t);let s=Y().$implicit,l=Y(2);return Ne(l.showTooltip(r,s))})("mouseleave",function(){Le(t);let r=Y(3);return Ne(r.hideTooltip())}),Me(1,"stream-avatar-placeholder",28),Q()}if(e&2){let t=n.ngIf,i=Y().$implicit;jh("data-testid","",i,"-last-user"),V(),jh("data-testid","",i,"-avatar"),H("imageUrl",t.image)("name",t.name||t.id)("size",20)}}function LJ(e,n){if(e&1&&(K(0,"span",29),je(1),Q()),e&2){let t=Y().$implicit,i=Y(2);jh("data-testid","",t,"-reaction-count"),V(),Rt(" ",i.messageReactionCounts[t]," ")}}function NJ(e,n){if(e&1){let t=kt();K(0,"li",23),nt("click",function(){let r=Le(t).$implicit,s=Y(2);return Ne(s.react(r))})("keyup.enter",function(){let r=Le(t).$implicit,s=Y(2);return Ne(s.react(r))}),de(1,FJ,2,7,"div",24),K(2,"span",25),je(3),Q(),de(4,LJ,2,3,"span",26),Q()}if(e&2){let t=n.$implicit,i=Y(2);Rn("str-chat__message-reactions-option-selected",i.isOwnReaction(t)),V(),H("ngIf",i.getLatestUserByReaction(t)),V(2),Rt(" ",i.getEmojiByReaction(t)," "),V(),H("ngIf",i.messageReactionCounts[t]&&i.messageReactionCounts[t]>0)}}function BJ(e,n){if(e&1&&(K(0,"div",16,2),de(2,RJ,5,8,"div",17),K(3,"ul",18),de(4,NJ,5,5,"li",19),Q()()),e&2){let t=Y();V(2),H("ngIf",t.tooltipText),V(2),H("ngForOf",t.reactionOptions)("ngForTrackBy",t.trackByMessageReaction)}}function jJ(e,n){e&1&&St(0)}function VJ(e,n){if(e&1&&(Nt(0),de(1,jJ,1,0,"ng-container",30),tt(2,"async"),Bt()),e&2){let t=Y(),i=Xe(4),r=Xe(6);V(),H("ngTemplateOutlet",ht(2,2,t.customTemplatesService.modalTemplate$)||i)("ngTemplateOutletContext",hx(4,PJ,!!t.selectedReactionType,t.messageId,t.selectedReactionType,t.isOpenChange,r))}}function zJ(e,n){if(e&1){let t=kt();K(0,"stream-modal",31),nt("isOpenChange",function(r){let s=Le(t).isOpenChangeHandler;return Ne(s(r))}),Q()}if(e&2){let t=n.isOpen,i=n.content;H("isOpen",t)("content",i)}}function UJ(e,n){if(e&1){let t=kt();K(0,"div",38),nt("click",function(){let r=Le(t).$implicit;Y();let s=Xe(6),l=Y();return l.selectedReactionType=r,Ne(s.scrollTop=0)})("keyup.enter",function(){let r=Le(t).$implicit;Y();let s=Xe(6),l=Y();return l.selectedReactionType=r,Ne(s.scrollTop=0)}),K(1,"span",14),je(2),Q(),K(3,"span",39),je(4),Q()()}if(e&2){let t=n.$implicit,i=Y(2);Rn("str-chat__message-reactions-details-reaction-type--selected",t===i.selectedReactionType),jh("data-testid","reaction-details-selector-",t,""),H("ngStyle",wi(7,_3,i.shouldHandleReactionClick?"pointer":"default")),V(2),Rt(" ",i.getEmojiByReaction(t),"\xA0 "),V(2),Rt(" ",i.messageReactionCounts[t]," ")}}function $J(e,n){e&1&&Me(0,"stream-loading-indicator")}function HJ(e,n){if(e&1&&(K(0,"div",41),Me(1,"stream-avatar-placeholder",42),K(2,"span",43),je(3),Q()()),e&2){let t=n.$implicit;V(),H("size",30)("imageUrl",t.image)("name",t.name)("user",t),V(2),hi(t.name)}}function qJ(e,n){if(e&1&&de(0,HJ,4,5,"div",40),e&2){let t=Y(2);H("ngForOf",t.getAllUsersByReaction(t.selectedReactionType))("ngForTrackBy",t.trackByUserId)}}function GJ(e,n){if(e&1&&(K(0,"div",32)(1,"div",33),de(2,UJ,5,9,"div",34),Q(),K(3,"div",35),je(4),Q(),K(5,"div",36,4),de(7,$J,1,0,"stream-loading-indicator",37)(8,qJ,1,2,"ng-template",null,5,mt),Q()()),e&2){let t=Xe(9),i=Y();V(2),H("ngForOf",i.existingReactions)("ngForTrackBy",i.trackByMessageReaction),V(2),Rt(" ",i.getEmojiByReaction(i.selectedReactionType)," "),V(3),H("ngIf",i.isLoading)("ngIfElse",t)}}var d3=()=>({position:"inside-message-bubble"}),WJ=e=>({position:"outside-message-bubble",message:e}),ZJ=()=>({position:"outside-message-bubble"}),YJ=(e,n)=>({"str-chat__message-edited-timestamp--open":e,"str-chat__message-edited-timestamp--collapsed":n});function KJ(e,n){e&1&&St(0)}function QJ(e,n){if(e&1&&(Nt(0),de(1,KJ,1,0,"ng-container",36),Bt()),e&2){Y(3);let t=Xe(12);V(),H("ngTemplateOutlet",t)}}function JJ(e,n){if(e&1){let t=kt();K(0,"stream-message-actions-box",43),nt("click",function(){Le(t),Y(2);let r=Xe(4),s=Y(3);return Ne(s.messageActionsBoxClicked(r))}),Q()}if(e&2){let t=Y(),i=t.isOpen,r=t.isMine,s=t.enabledActions,l=t.message,d=t.customActions;H("isOpen",i)("isMine",r)("enabledActions",s)("customActions",d)("message",l)}}function XJ(e,n){if(e&1&&de(0,JJ,1,5,"stream-message-actions-box",42),e&2){let t=n.isOpen;H("ngIf",t)}}function eX(e,n){e&1&&St(0)}function tX(e,n){if(e&1){let t=kt();K(0,"div",44),nt("click",function(){Le(t);let r=Y(4);return Ne(r.messageActionsClicked())})("keyup.enter",function(){Le(t);let r=Y(4);return Ne(r.messageActionsClicked())}),Me(1,"stream-icon-placeholder",45),Q()}}function nX(e,n){if(e&1){let t=kt();K(0,"div",46),nt("click",function(){Le(t);let r=Y(4);return Ne(r.setAsActiveParentMessage())})("keyup.enter",function(){Le(t);let r=Y(4);return Ne(r.setAsActiveParentMessage())}),Me(1,"stream-icon-placeholder",47),Q()}}function iX(e,n){if(e&1){let t=kt();K(0,"div",48),nt("click",function(){Le(t);let r=Y(4);return Ne(r.isReactionSelectorOpen=!r.isReactionSelectorOpen)})("keyup.enter",function(){Le(t);let r=Y(4);return Ne(r.isReactionSelectorOpen=!r.isReactionSelectorOpen)}),Me(1,"stream-icon-placeholder",49),Q()}}function rX(e,n){if(e&1){let t=kt();K(0,"div",37)(1,"div",38,9),nt("popperOnHidden",function(){Le(t);let r=Y(3);return Ne(r.isActionBoxOpen=!1)}),K(3,"popper-content",null,10),de(5,XJ,1,1,"ng-template",null,11,mt)(7,eX,1,0,"ng-container",32),tt(8,"async"),Q(),de(9,tX,2,0,"div",39),Q(),de(10,nX,2,0,"div",40)(11,iX,2,0,"div",41),Q()}if(e&2){let t=Xe(4),i=Xe(6),r=Y(3);Rn("str-chat__message-actions-open",r.isActionBoxOpen),V(),H("popper",t)("popperTrigger",r.popperTriggerClick)("popperPlacement",r.popperPlacementAuto)("popperHideOnScroll",!1)("popperHideOnClickOutside",!0)("popperHideOnMouseLeave",!1)("popperDisableAnimation",!0),V(6),H("ngTemplateOutlet",ht(8,14,r.customTemplatesService.messageActionsBoxTemplate$)||i)("ngTemplateOutletContext",r.getMessageActionsBoxContext()),V(2),H("ngIf",r.visibleMessageActionsCount>0),V(),H("ngIf",r.enabledMessageActions.indexOf("send-reply")!==-1&&r.mode==="main"),V(),H("ngIf",r.canReactToMessage)}}function sX(e,n){if(e&1){let t=kt();K(0,"stream-message-reactions",50),nt("isSelectorOpenChange",function(r){let s=Le(t).isSelectorOpenChangeHandler;return Ne(s(r))}),Q()}if(e&2){let t=n.messageReactionCounts,i=n.latestReactions,r=n.isSelectorOpen,s=n.messageId,l=n.ownReactions;H("messageReactionCounts",t)("latestReactions",i)("isSelectorOpen",r)("messageId",s)("ownReactions",l)}}function aX(e,n){e&1&&St(0)}function oX(e,n){e&1&&St(0)}function cX(e,n){if(e&1&&(Nt(0),de(1,oX,1,0,"ng-container",36),Bt()),e&2){Y(3);let t=Xe(16);V(),H("ngTemplateOutlet",t)}}function lX(e,n){e&1&&St(0)}function uX(e,n){e&1&&St(0)}function dX(e,n){if(e&1&&(Nt(0),de(1,uX,1,0,"ng-container",36),Bt()),e&2){Y(4);let t=Xe(16);V(),H("ngTemplateOutlet",t)}}function hX(e,n){e&1&&(Nt(0),je(1),tt(2,"translate"),Bt()),e&2&&(V(),hi(ht(2,1,"streamChat.Error \xB7 Unsent")))}function pX(e,n){if(e&1&&(K(0,"div",56),de(1,hX,3,3,"ng-container",27),Q()),e&2){let t=Y(4);V(),H("ngIf",!(t.message!=null&&t.message.moderation_details))}}function fX(e,n){if(e&1&&(K(0,"div",57),je(1),tt(2,"translate"),Q()),e&2){let t=Y(4);V(),Rt(" ",ht(2,1,(t.message==null?null:t.message.errorStatusCode)===403?"streamChat.Message Failed \xB7 Unauthorized":"streamChat.Message Failed \xB7 Click to try again")," ")}}function mX(e,n){if(e&1&&Me(0,"span",60),e&2){let t=Y().$implicit;H("innerHTML",t.content,Wo)}}function gX(e,n){if(e&1&&(K(0,"span",61),je(1),Q()),e&2){let t=n.content;V(),hi(t)}}function _X(e,n){e&1&&St(0)}function vX(e,n){if(e&1&&(de(0,gX,2,1,"ng-template",null,14,mt)(2,_X,1,0,"ng-container",32),tt(3,"async")),e&2){let t=Xe(1),i=Y().$implicit,r=Y(5);V(2),H("ngTemplateOutlet",ht(3,2,r.customTemplatesService.mentionTemplate$)||t)("ngTemplateOutletContext",r.getMentionContext(i))}}function yX(e,n){if(e&1&&(Nt(0),de(1,mX,1,1,"span",59)(2,vX,4,4,"ng-template",null,13,mt),Bt()),e&2){let t=n.$implicit,i=Xe(3);V(),H("ngIf",t.type==="text")("ngIfElse",i)}}function bX(e,n){if(e&1&&(Nt(0),de(1,yX,4,2,"ng-container",58),Bt()),e&2){let t=Y(4);V(),H("ngForOf",t.messageTextParts)}}function wX(e,n){if(e&1&&(Nt(0),je(1),Bt()),e&2){let t=Y(5);V(),Rt(" ",t.messageText||""," ")}}function CX(e,n){if(e&1&&Me(0,"span",62),e&2){let t=Y(5);H("innerHTML",t.messageText,Wo)}}function xX(e,n){if(e&1&&de(0,wX,2,1,"ng-container",26)(1,CX,1,1,"ng-template",null,15,mt),e&2){let t=Xe(2),i=Y(4);H("ngIf",i.displayAs==="text")("ngIfElse",t)}}function MX(e,n){if(e&1){let t=kt();K(0,"div",51),nt("click",function(){Le(t);let r=Y(3);return Ne(r.messageClicked())})("keyup.enter",function(){Le(t);let r=Y(3);return Ne(r.messageClicked())}),K(1,"div",52),de(2,lX,1,0,"ng-container",36)(3,dX,2,1,"ng-container",27)(4,pX,2,1,"div",53)(5,fX,3,3,"div",54),K(6,"div",55)(7,"p"),de(8,bX,2,1,"ng-container",26)(9,xX,3,2,"ng-template",null,12,mt),Q()()()()}if(e&2){let t=Xe(10),i=Y(3),r=Xe(8);Rn("str-chat__message-text--pointer-cursor",(i.message==null?null:i.message.status)==="failed"&&(i.message==null?null:i.message.errorStatusCode)!==403||(i.message==null?null:i.message.type)==="error"&&(i.message==null?null:i.message.moderation_details)||(i.message==null?null:i.message.message_text_updated_at)),V(),Rn("str-chat__message-light-text-inner--has-attachment",i.hasAttachment),V(),H("ngTemplateOutlet",r),V(),H("ngIf",i.hasAttachment&&(i.message==null?null:i.message.quoted_message)),V(),H("ngIf",(i.message==null?null:i.message.type)==="error"),V(),H("ngIf",(i.message==null?null:i.message.status)==="failed"),V(3),H("ngIf",i.messageTextParts)("ngIfElse",t)}}function DX(e,n){e&1&&Me(0,"stream-icon-placeholder",63)}function TX(e,n){e&1&&St(0)}function SX(e,n){e&1&&St(0)}function OX(e,n){e&1&&St(0)}function IX(e,n){e&1&&St(0)}function EX(e,n){if(e&1&&(Nt(0),de(1,QJ,2,1,"ng-container",27),Me(2,"stream-avatar-placeholder",28),K(3,"div",29),de(4,rX,12,16,"div",30),K(5,"div",31),de(6,sX,1,5,"ng-template",null,8,mt)(8,aX,1,0,"ng-container",32),tt(9,"async"),Q(),K(10,"div",33),de(11,cX,2,1,"ng-container",27)(12,MX,11,10,"div",34)(13,DX,1,0,"stream-icon-placeholder",35),Q(),de(14,TX,1,0,"ng-container",32)(15,SX,1,0,"ng-container",32),Q(),de(16,OX,1,0,"ng-container",32)(17,IX,1,0,"ng-container",32),Bt()),e&2){let t=Xe(7),i=Y(2),r=Xe(10),s=Xe(14);V(),H("ngIf",i.themeVersion==="1"),V(),H("imageUrl",i.message==null||i.message.user==null?null:i.message.user.image)("name",(i.message==null||i.message.user==null?null:i.message.user.name)||(i.message==null||i.message.user==null?null:i.message.user.id))("user",(i.message==null?null:i.message.user)||void 0),V(2),H("ngIf",i.areOptionsVisible),V(4),H("ngTemplateOutlet",ht(9,20,i.customTemplatesService.messageReactionsTemplate$)||t)("ngTemplateOutletContext",i.getMessageReactionsContext()),V(2),Rn("str-chat-angular__message-bubble--attachment-modal-open",i.imageAttachmentModalState==="opened"),V(),H("ngIf",i.hasAttachment&&!(i.message!=null&&i.message.quoted_message)),V(),H("ngIf",(i.message==null?null:i.message.text)||(i.message==null?null:i.message.quoted_message)&&i.hasAttachment),V(),H("ngIf",i.themeVersion==="2"),V(),H("ngTemplateOutlet",s)("ngTemplateOutletContext",_m(22,d3)),V(),H("ngTemplateOutlet",r)("ngTemplateOutletContext",_m(23,d3)),V(),H("ngTemplateOutlet",s)("ngTemplateOutletContext",wi(24,WJ,i.message)),V(),H("ngTemplateOutlet",r)("ngTemplateOutletContext",_m(26,ZJ))}}function PX(e,n){if(e&1&&(Nt(0),de(1,EX,18,27,"ng-container",26),Bt()),e&2){let t=Y(),i=Xe(6);V(),H("ngIf",(t.message==null?null:t.message.type)!=="system")("ngIfElse",i)}}function kX(e,n){e&1&&(K(0,"div",64)(1,"div",65),je(2," streamChat.This message was deleted... "),Q()())}function AX(e,n){e&1&&St(0)}function RX(e,n){if(e&1&&(K(0,"div",66)(1,"div",67),Me(2,"div",68),K(3,"p"),je(4),Q(),Me(5,"div",68),Q(),K(6,"div",69),je(7),Q()()),e&2){let t=n.message,i=Y(2);V(4),hi(t==null?null:t.text),V(3),Rt(" ",i.parsedDate," ")}}function FX(e,n){if(e&1&&(de(0,AX,1,0,"ng-container",32),tt(1,"async"),de(2,RX,8,2,"ng-template",null,16,mt)),e&2){let t=Xe(3),i=Y();H("ngTemplateOutlet",ht(1,2,i.customTemplatesService.systemMessageTemplate$)||t)("ngTemplateOutletContext",i.getMessageContext())}}function LX(e,n){if(e&1){let t=kt();K(0,"stream-attachment-list",75),nt("imageModalStateChange",function(r){let s=Le(t).imageModalStateChangeHandler;return Ne(s(r))}),Q()}if(e&2){let t=n.messageId,i=n.attachments,r=n.parentMessageId;H("messageId",t)("attachments",i)("parentMessageId",r)}}function NX(e,n){e&1&&St(0)}function BX(e,n){if(e&1&&(Nt(0),de(1,LX,1,3,"ng-template",null,17,mt)(3,NX,1,0,"ng-container",32),tt(4,"async"),Bt()),e&2){let t=Xe(2),i=Y(3);V(3),H("ngTemplateOutlet",ht(4,2,i.customTemplatesService.attachmentListTemplate$)||t)("ngTemplateOutletContext",i.getQuotedMessageAttachmentListContext())}}function jX(e,n){if(e&1){let t=kt();K(0,"div",71),nt("click",function(){Le(t);let r=Y(2);return Ne(r.jumpToMessage(r.message==null?null:r.message.quoted_message.id,r.message==null||r.message.quoted_message==null?null:r.message.quoted_message.parent_id))})("keyup.enter",function(){Le(t);let r=Y(2);return Ne(r.jumpToMessage(r.message==null?null:r.message.quoted_message.id,r.message==null||r.message.quoted_message==null?null:r.message.quoted_message.parent_id))}),Me(1,"stream-avatar-placeholder",72),K(2,"div",73),de(3,BX,5,4,"ng-container",27),Me(4,"div",74),Q()()}if(e&2){let t=Y(2);Rn("mine",t.isSentByCurrentUser),V(),H("imageUrl",t.message==null||t.message.quoted_message==null||t.message.quoted_message.user==null?null:t.message.quoted_message.user.image)("name",(t.message==null||t.message.quoted_message==null||t.message.quoted_message.user==null?null:t.message.quoted_message.user.name)||(t.message==null||t.message.quoted_message==null||t.message.quoted_message.user==null?null:t.message.quoted_message.user.id))("size",20)("user",(t.message==null||t.message.quoted_message==null?null:t.message.quoted_message.user)||void 0),V(2),H("ngIf",(t.message==null||t.message.quoted_message==null?null:t.message.quoted_message.attachments)&&(t.message==null||t.message.quoted_message==null||t.message.quoted_message.attachments==null?null:t.message.quoted_message.attachments.length)),V(),H("innerHTML",(t.message==null||t.message.quoted_message==null?null:t.message.quoted_message.translation)||(t.message==null||t.message.quoted_message==null?null:t.message.quoted_message.html)||(t.message==null||t.message.quoted_message==null?null:t.message.quoted_message.text),Wo)}}function VX(e,n){if(e&1&&de(0,jX,5,8,"div",70),e&2){let t=Y();H("ngIf",t.message==null?null:t.message.quoted_message)}}function zX(e,n){if(e&1){let t=kt();K(0,"button",83),nt("click",function(){Le(t);let r=Y(4);return Ne(r.displayOriginalMessage())})("keyup.enter",function(){Le(t);let r=Y(4);return Ne(r.displayOriginalMessage())}),je(1," streamChat.See original (automatically translated) "),Q()}}function UX(e,n){if(e&1){let t=kt();K(0,"button",84),nt("click",function(){Le(t);let r=Y(4);return Ne(r.displayTranslatedMessage())})("keyup.enter",function(){Le(t);let r=Y(4);return Ne(r.displayTranslatedMessage())}),je(1," streamChat.See translation "),Q()}}function $X(e,n){if(e&1&&(K(0,"div",80),de(1,zX,2,0,"button",81)(2,UX,2,0,"button",82),Q()),e&2){let t=Y(3);V(),H("ngIf",t.displayedMessageTextContent==="translation"),V(),H("ngIf",t.displayedMessageTextContent==="original")}}function HX(e,n){e&1&&St(0)}function qX(e,n){if(e&1&&(Nt(0),K(1,"div",85),de(2,HX,1,0,"ng-container",32),tt(3,"async"),Q(),Bt()),e&2){let t=Y(3);V(2),H("ngTemplateOutlet",ht(3,2,t.customTemplatesService.customMessageMetadataTemplate$))("ngTemplateOutletContext",t.getMessageMetadataContext())}}function GX(e,n){e&1&&St(0)}function WX(e,n){if(e&1&&(Nt(0),de(1,GX,1,0,"ng-container",36),Bt()),e&2){Y(3);let t=Xe(12);V(),H("ngTemplateOutlet",t)}}function ZX(e,n){if(e&1&&(K(0,"span",86),je(1),Q()),e&2){let t=Y(3);V(),Rt(" ",!(t.message==null||t.message.user==null)&&t.message.user.name?t.message==null||t.message.user==null?null:t.message.user.name:t.message==null||t.message.user==null?null:t.message.user.id," ")}}function YX(e,n){if(e&1&&(Nt(0),K(1,"span",87),je(2,"streamChat.Edited"),Q(),K(3,"div",88)(4,"span",89),je(5,"streamChat.Edited"),Q(),K(6,"time",90),je(7),Q()(),Bt()),e&2){let t=Y(3);V(3),H("ngClass",Js(4,YJ,t.isEditedFlagOpened,!t.isEditedFlagOpened)),V(3),Oi("dateTime",t.message==null?null:t.message.message_text_updated_at),Oi("title",t.message==null?null:t.message.message_text_updated_at),V(),Rt(" ",t.pasedEditedDate," ")}}function KX(e,n){if(e&1&&(Nt(0),de(1,$X,3,2,"div",76)(2,qX,4,4,"ng-container",27),tt(3,"async"),K(4,"div",77),de(5,WX,2,1,"ng-container",27)(6,ZX,2,1,"span",78),K(7,"span",79),je(8),Q(),de(9,YX,8,7,"ng-container",27),Q(),Bt()),e&2){let t=Y(2);V(),H("ngIf",t.shouldDisplayTranslationNotice),V(),H("ngIf",ht(3,6,t.customTemplatesService.customMessageMetadataTemplate$)),V(3),H("ngIf",t.themeVersion==="2"),V(),H("ngIf",!t.isSentByCurrentUser),V(2),Rt(" ",t.parsedDate," "),V(),H("ngIf",t.message==null?null:t.message.message_text_updated_at)}}function QX(e,n){if(e&1&&de(0,KX,10,8,"ng-container",27),e&2){let t=n.position,i=Y();H("ngIf",t==="inside-message-bubble"&&i.themeVersion==="1"||t==="outside-message-bubble"&&i.themeVersion==="2")}}function JX(e,n){e&1&&St(0)}function XX(e,n){if(e&1&&(Nt(0),de(1,JX,1,0,"ng-container",36),Bt()),e&2){Y();let t=Xe(9);V(),H("ngTemplateOutlet",t)}}function eee(e,n){e&1&&St(0)}function tee(e,n){if(e&1&&(Nt(0),de(1,eee,1,0,"ng-container",36),Bt()),e&2){Y(2);let t=Xe(13);V(),H("ngTemplateOutlet",t)}}function nee(e,n){if(e&1&&de(0,tee,2,1,"ng-container",26),e&2){Y();let t=Xe(5),i=Y(2);H("ngIf",i.mode==="main"&&i.isMessageDeliveredAndRead&&i.canDisplayReadStatus)("ngIfElse",t)}}function iee(e,n){e&1&&St(0)}function ree(e,n){if(e&1&&(de(0,iee,1,0,"ng-container",32),tt(1,"async")),e&2){Y();let t=Xe(7),i=Y(2);H("ngTemplateOutlet",ht(1,2,i.customTemplatesService.deliveredStatusTemplate$)||t)("ngTemplateOutletContext",i.getDeliveredStatusContext())}}function see(e,n){if(e&1){let t=kt();K(0,"span",92),nt("hover",function(r){return Le(t),Ne(r.stopPropagation())}),K(1,"popper-content",null,10)(3,"div",93),je(4),tt(5,"translate"),Q()(),Me(6,"stream-icon-placeholder",94),Q()}if(e&2){let t=Xe(2),i=Y(4);H("popper",t)("popperTrigger",i.popperTriggerHover)("popperPlacement",i.popperPlacementTop)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),V(4),Rt(" ",ht(5,6,"streamChat.Delivered")," ")}}function aee(e,n){if(e&1&&de(0,see,7,8,"span",91),e&2){let t=Y(3);H("ngIf",t.mode==="main")}}function oee(e,n){e&1&&St(0)}function cee(e,n){if(e&1&&(de(0,oee,1,0,"ng-container",32),tt(1,"async")),e&2){Y();let t=Xe(11),i=Y(2);H("ngTemplateOutlet",ht(1,2,i.customTemplatesService.sendingStatusTemplate$)||t)("ngTemplateOutletContext",i.getSendingStatusContext())}}function lee(e,n){if(e&1){let t=kt();K(0,"span",95),nt("hover",function(r){return Le(t),Ne(r.stopPropagation())}),K(1,"popper-content",null,10)(3,"div",93),je(4),tt(5,"translate"),Q()(),Me(6,"stream-loading-indicator-placeholder",96),Q()}if(e&2){let t=Xe(2),i=Y(3);H("popper",t)("popperTrigger",i.popperTriggerHover)("popperPlacement",i.popperPlacementTop)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),V(4),Rt(" ",ht(5,6,"streamChat.Sending...")," ")}}function uee(e,n){e&1&&St(0)}function dee(e,n){if(e&1&&(de(0,uee,1,0,"ng-container",32),tt(1,"async")),e&2){Y();let t=Xe(15),i=Y(2);H("ngTemplateOutlet",ht(1,2,i.customTemplatesService.readStatusTemplate$)||t)("ngTemplateOutletContext",i.getReadStatusContext())}}function hee(e,n){if(e&1){let t=kt();K(0,"span",97),nt("hover",function(r){return Le(t),Ne(r.stopPropagation())}),K(1,"popper-content",null,10)(3,"div",98),je(4),Q()(),Me(5,"stream-icon-placeholder",99),Q()}if(e&2){let t=n.readByText,i=Xe(2),r=Y(3);H("popper",i)("popperTrigger",r.popperTriggerHover)("popperPlacement",r.popperPlacementTop)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),V(4),Rt(" ",t," ")}}function pee(e,n){if(e&1&&(Nt(0),de(1,XX,2,1,"ng-container",26)(2,nee,1,2,"ng-template",null,18,mt)(4,ree,2,4,"ng-template",null,19,mt)(6,aee,1,1,"ng-template",null,20,mt)(8,cee,2,4,"ng-template",null,21,mt)(10,lee,7,8,"ng-template",null,22,mt)(12,dee,2,4,"ng-template",null,23,mt)(14,hee,6,6,"ng-template",null,24,mt),Bt()),e&2){let t=Xe(3),i=Y(2);V(),H("ngIf",(i.message==null?null:i.message.status)==="sending")("ngIfElse",t)}}function fee(e,n){if(e&1&&de(0,pee,16,2,"ng-container",27),e&2){let t=Y();H("ngIf",t.isSentByCurrentUser&&(t.isLastSentMessage&&(t.message==null?null:t.message.status)==="received"||(t.message==null?null:t.message.status)==="sending"))}}function mee(e,n){e&1&&Me(0,"stream-icon-placeholder",105)}function gee(e,n){if(e&1){let t=kt();K(0,"button",103),nt("click",function(){Le(t);let r=Y(3);return Ne(r.setAsActiveParentMessage())}),de(1,mee,1,0,"stream-icon-placeholder",104),je(2),tt(3,"translate"),tt(4,"translate"),Q()}if(e&2){let t=Y(3);V(),H("ngIf",t.themeVersion==="1"),V(),Rt(" ",(t.message==null?null:t.message.reply_count)===1?ht(3,2,"streamChat.1 reply"):La(4,4,"streamChat.{{ replyCount }} replies",t.replyCountParam)," ")}}function _ee(e,n){if(e&1&&(K(0,"div",101),de(1,gee,5,7,"button",102),Q()),e&2){let t=Y(2);V(),H("ngIf",t.shouldDisplayThreadLink)}}function vee(e,n){if(e&1&&de(0,_ee,2,1,"div",100),e&2){let t=n.position,i=Y();H("ngIf",t==="inside-message-bubble"&&i.themeVersion==="1"||t==="outside-message-bubble"&&i.themeVersion==="2")}}function yee(e,n){if(e&1){let t=kt();K(0,"stream-attachment-list",75),nt("imageModalStateChange",function(r){let s=Le(t).imageModalStateChangeHandler;return Ne(s(r))}),Q()}if(e&2){let t=n.messageId,i=n.attachments,r=n.parentMessageId;H("messageId",t)("attachments",i)("parentMessageId",r)}}function bee(e,n){e&1&&St(0)}function wee(e,n){if(e&1&&(de(0,yee,1,3,"ng-template",null,17,mt)(2,bee,1,0,"ng-container",32),tt(3,"async")),e&2){let t=Xe(1),i=Y();V(2),H("ngTemplateOutlet",ht(3,2,i.customTemplatesService.attachmentListTemplate$)||t)("ngTemplateOutletContext",i.getAttachmentListContext())}}var Cee=["input"],v3=e=>({item:e}),xee=e=>({height:e});function Mee(e,n){e&1&&St(0)}function Dee(e,n){if(e&1&&(K(0,"div",7),de(1,Mee,1,0,"ng-container",8),Q()),e&2){let t=Y().item,i=Y(),r=Xe(8);V(),H("ngTemplateOutlet",i.mentionAutocompleteItemTemplate||r)("ngTemplateOutletContext",wi(2,v3,t))}}function Tee(e,n){e&1&&St(0)}function See(e,n){if(e&1&&(K(0,"div",7),de(1,Tee,1,0,"ng-container",8),Q()),e&2){let t=Y().item,i=Y(),r=Xe(6);V(),H("ngTemplateOutlet",i.commandAutocompleteItemTemplate||r)("ngTemplateOutletContext",wi(2,v3,t))}}function Oee(e,n){if(e&1&&(K(0,"div",5),de(1,Dee,2,4,"div",6)(2,See,2,4,"div",6),Q()),e&2){let t=n.item;H("ngSwitch",t.type),V(),H("ngSwitchCase","mention"),V(),H("ngSwitchCase","command")}}function Iee(e,n){if(e&1&&(K(0,"div",9)(1,"span",10)(2,"strong",11),je(3),Q(),K(4,"span",12),je(5),Q()(),Me(6,"br"),Q()),e&2){let t=n.item;V(3),hi(t.name),V(2),Ev("/",t.name," ",t.args,"")}}function Eee(e,n){if(e&1&&(K(0,"div",13),Me(1,"stream-avatar-placeholder",14),K(2,"span",15),je(3),Q()()),e&2){let t=n.item,i=Y();V(),H("ngStyle",wi(6,xee,i.themeVersion==="2"?30:"20px"))("size",i.themeVersion==="2"?30:20)("imageUrl",t.image||(t.user==null?null:t.user.image))("name",t.autocompleteLabel)("user",t.user||t),V(2),hi(t.autocompleteLabel)}}var Pee=["scrollContainer"],kee=["parentMessageElement"],Aee=(e,n,t)=>({unreadCount:e,onDismiss:n,onJump:t}),y3=e=>({count:e}),Ree=e=>({message:e,index:"parent"}),Fee=(e,n)=>({message:e,index:n}),AT=(e,n)=>({date:e,parsedDate:n}),Lee=e=>({unreadCount:e}),Nee=e=>({user:e}),Bee=e=>({users:e}),jee=(e,n,t,i,r,s)=>({message:e,isLastSentMessage:n,enabledMessageActions:t,mode:i,isHighlighted:r,customActions:s});function Vee(e,n){e&1&&St(0)}function zee(e,n){if(e&1&&(Nt(0),de(1,Vee,1,0,"ng-container",17),Bt()),e&2){let t=Y(),i=Xe(2);V(),H("ngTemplateOutlet",t.customnewMessagesNotificationTemplate||i)("ngTemplateOutletContext",$h(2,Aee,t.unreadCount,t.messageNotificationDismissClicked,t.messageNotificationJumpClicked))}}function Uee(e,n){if(e&1&&(Nt(0),je(1),tt(2,"translate"),Bt()),e&2){let t=Y().unreadCount;V(),Rt(" ",La(2,1,t===1?"streamChat.{{count}} unread message":"streamChat.{{count}} unread messages",wi(4,y3,t))," ")}}function $ee(e,n){e&1&&(je(0),tt(1,"translate")),e&2&&Rt(" ",ht(1,1,"streamChat.Unread messages")," ")}function Hee(e,n){if(e&1){let t=kt();K(0,"div",20)(1,"button",21),nt("click",function(){let r=Le(t).onJump;return Ne(r())}),de(2,Uee,3,6,"ng-container",22)(3,$ee,2,3,"ng-template",null,6,mt),Q(),K(5,"button",23),nt("click",function(){let r=Le(t).onDismiss;return Ne(r())}),Me(6,"stream-icon-placeholder",24),Q()()}if(e&2){let t=n.unreadCount,i=Xe(4),r=Y();V(2),H("ngIf",t>0&&!r.hideUnreadCountForNotificationAndIndicator)("ngIfElse",i)}}function qee(e,n){e&1&&St(0)}function Gee(e,n){if(e&1&&(Nt(0),de(1,qee,1,0,"ng-container",25),Bt()),e&2){let t=Y();V(),H("ngTemplateOutlet",t.emptyListTemplate)}}function Wee(e,n){e&1&&St(0)}function Zee(e,n){if(e&1&&(K(0,"li",26,7),de(2,Wee,1,0,"ng-container",17),K(3,"div",27),je(4),tt(5,"translate"),tt(6,"translate"),Q()()),e&2){let t=Y(),i=Xe(20);V(2),H("ngTemplateOutlet",i)("ngTemplateOutletContext",wi(8,Ree,t.parentMessage)),V(2),Rt(" ",(t.parentMessage==null?null:t.parentMessage.reply_count)===1?ht(5,3,"streamChat.1 reply"):La(6,5,"streamChat.{{ replyCount }} replies",t.replyCountParam)," ")}}function Yee(e,n){e&1&&St(0)}function Kee(e,n){if(e&1&&(Nt(0),de(1,Yee,1,0,"ng-container",25),Bt()),e&2){let t=Y();V(),H("ngTemplateOutlet",t.emptyListTemplate)}}function Qee(e,n){e&1&&Me(0,"stream-loading-indicator",28)}function Jee(e,n){e&1&&St(0)}function Xee(e,n){if(e&1&&(Nt(0),de(1,Jee,1,0,"ng-container",17),Bt()),e&2){let t=Y().$implicit,i=Y(2),r=Xe(22);V(),H("ngTemplateOutlet",r)("ngTemplateOutletContext",Js(2,AT,t.created_at,i.parseDate(t.created_at)))}}function ete(e,n){e&1&&St(0)}function tte(e,n){e&1&&St(0)}function nte(e,n){if(e&1&&(K(0,"li",32),de(1,tte,1,0,"ng-container",17),Q()),e&2){let t=Y(4),i=Xe(24);V(),H("ngTemplateOutlet",t.customnewMessagesIndicatorTemplate||i)("ngTemplateOutletContext",wi(2,Lee,t.unreadCount))}}function ite(e,n){if(e&1&&(Nt(0),de(1,nte,2,4,"li",31),Bt()),e&2){let t=Y(3);V(),H("ngIf",t.displayUnreadSeparator)}}function rte(e,n){e&1&&St(0)}function ste(e,n){if(e&1&&(Nt(0),de(1,rte,1,0,"ng-container",17),Bt()),e&2){let t=Y().index,i=Y().ngIf,r=Y(),s=Xe(22);V(),H("ngTemplateOutlet",s)("ngTemplateOutletContext",Js(2,AT,i[t+1].created_at,r.parseDate(i[t+1].created_at)))}}function ate(e,n){if(e&1&&(Nt(0),de(1,Xee,2,5,"ng-container",10),K(2,"li",30),de(3,ete,1,0,"ng-container",17),Q(),de(4,ite,2,1,"ng-container",10)(5,ste,2,5,"ng-container",10),Bt()),e&2){let t=n.$implicit,i=n.index,r=n.first,s=Y().ngIf,l=Y(),d=Xe(20);V(),H("ngIf",r),V(),ha("str-chat__li str-chat__li--",l.groupStyles[i],""),Oi("id",t.id),V(),H("ngTemplateOutlet",d)("ngTemplateOutletContext",Js(9,Fee,t,i)),V(),H("ngIf",l.lastReadMessageId===(t==null?null:t.id)&&l.direction==="bottom-to-top"||l.direction==="top-to-bottom"&&l.lastReadMessageId===(s[i+1]==null?null:s[i+1].id)),V(),H("ngIf",l.isNextMessageOnSeparateDate[i])}}function ote(e,n){if(e&1&&(Nt(0),de(1,ate,6,12,"ng-container",29),Bt()),e&2){let t=n.ngIf,i=Y();V(),H("ngForOf",t)("ngForTrackBy",i.trackByMessageId)}}function cte(e,n){e&1&&Me(0,"stream-loading-indicator",33)}function lte(e,n){if(e&1&&(K(0,"div",35)(1,"div",36),Me(2,"span",37)(3,"span",37)(4,"span",37),Q(),K(5,"div",38),je(6),tt(7,"translate"),tt(8,"translate"),Q()()),e&2){let t=Y().ngIf,i=Y(2);V(6),Rt(" ",t.length===1?La(7,1,"streamChat.user is typing",wi(7,Nee,i.getTypingIndicatorText(t))):La(8,4,"streamChat.users are typing",wi(9,Bee,i.getTypingIndicatorText(t)))," ")}}function ute(e,n){if(e&1&&(Nt(0),de(1,lte,9,11,"div",34),Bt()),e&2){let t=n.ngIf;V(),H("ngIf",t.length>0)}}function dte(e,n){if(e&1&&(de(0,ute,2,1,"ng-container",10),tt(1,"async")),e&2){let t=n.usersTyping$;H("ngIf",ht(1,1,t))}}function hte(e,n){e&1&&St(0)}function pte(e,n){if(e&1&&(K(0,"div",42),je(1),Q()),e&2){let t=Y(2);V(),Rt(" ",t.newMessageCountWhileBeingScrolled," ")}}function fte(e,n){if(e&1){let t=kt();K(0,"button",39),nt("keyup.enter",function(){Le(t);let r=Y();return Ne(r.jumpToLatestMessage())})("click",function(){Le(t);let r=Y();return Ne(r.jumpToLatestMessage())}),Me(1,"stream-icon",40),de(2,pte,2,1,"div",41),Q()}if(e&2){let t=Y();V(),H("icon",t.direction==="bottom-to-top"?"arrow-down":"arrow-up"),V(),H("ngIf",t.newMessageCountWhileBeingScrolled>0)}}function mte(e,n){if(e&1&&Me(0,"stream-message",43),e&2){let t=n.message,i=n.isLastSentMessage,r=n.enabledMessageActions,s=n.mode,l=n.isHighlighted,d=n.customActions;H("message",t)("isLastSentMessage",i)("enabledMessageActions",r)("mode",s)("isHighlighted",l)("customActions",d)}}function gte(e,n){e&1&&St(0)}function _te(e,n){if(e&1&&de(0,mte,1,6,"ng-template",null,8,mt)(2,gte,1,0,"ng-container",17),e&2){let t=n.message,i=Xe(1),r=Y();V(2),H("ngTemplateOutlet",r.messageTemplate||i)("ngTemplateOutletContext",iP(2,jee,t,!!(r.lastSentMessageId&&(t==null?null:t.id)===r.lastSentMessageId),r.enabledMessageActions,r.mode,(t==null?null:t.id)===r.highlightedMessageId,r.customMessageActions))}}function vte(e,n){e&1&&St(0)}function yte(e,n){if(e&1&&(Nt(0),de(1,vte,1,0,"ng-container",17),Bt()),e&2){let t=Y(),i=t.date,r=t.parsedDate,s=Xe(2),l=Y();V(),H("ngTemplateOutlet",l.customDateSeparatorTemplate||s)("ngTemplateOutletContext",Js(2,AT,i,r))}}function bte(e,n){e&1&&Me(0,"hr",47)}function wte(e,n){e&1&&Me(0,"hr",47)}function Cte(e,n){if(e&1&&(K(0,"div",44),de(1,bte,1,0,"hr",45),K(2,"div",46),je(3),Q(),de(4,wte,1,0,"hr",45),Q()),e&2){let t=n.parsedDate,i=Y(2);V(),H("ngIf",i.dateSeparatorTextPos==="right"||i.dateSeparatorTextPos==="center"),V(2),Rt(" ",t," "),V(),H("ngIf",i.dateSeparatorTextPos==="left"||i.dateSeparatorTextPos==="center")}}function xte(e,n){if(e&1&&de(0,yte,2,5,"ng-container",10)(1,Cte,5,3,"ng-template",null,9,mt),e&2){let t=Y();H("ngIf",t.displayDateSeparator)}}function Mte(e,n){if(e&1&&(Nt(0),je(1),tt(2,"translate"),Bt()),e&2){let t=Y().unreadCount;V(),Rt(" ",La(2,1,t===1?"streamChat.{{count}} unread message":"streamChat.{{count}} unread messages",wi(4,y3,t))," ")}}function Dte(e,n){e&1&&(je(0),tt(1,"translate")),e&2&&Rt(" ",ht(1,1,"streamChat.Unread messages")," ")}function Tte(e,n){if(e&1&&(K(0,"div",48),de(1,Mte,3,6,"ng-container",22)(2,Dte,2,3,"ng-template",null,6,mt),Q()),e&2){let t=n.unreadCount,i=Xe(3),r=Y();V(),H("ngIf",t>0&&!r.hideUnreadCountForNotificationAndIndicator)("ngIfElse",i)}}function Ste(e,n){e&1&&St(0)}function Ote(e,n){if(e&1){let t=kt();K(0,"div",3)(1,"div",4)(2,"div",5),je(3," streamChat.Thread "),Q(),K(4,"div",6),je(5),Q()(),K(6,"button",7),nt("click",function(){let r=Le(t).closeThreadHandler;return Ne(r())}),Me(7,"stream-icon-placeholder",8),Q()()}if(e&2){let t=Y();V(5),Rt(" ",t.channelName," ")}}var Ite="4.66.6",Lp=(()=>{class e{constructor(){this.notificationsSubject=new Ct([]),this.notifications$=this.notificationsSubject.asObservable()}addTemporaryNotification(t,i="error",r=5e3,s,l){let d=this.createNotification(t,i,s,l),f=setTimeout(()=>this.removeNotification(d.id),r);return d.dismissFn=()=>{clearTimeout(f),this.removeNotification(d.id)},this.notificationsSubject.next([...this.notificationsSubject.getValue(),d]),d.dismissFn}addPermanentNotification(t,i="error",r,s){let l=this.createNotification(t,i,r,s);return this.notificationsSubject.next([...this.notificationsSubject.getValue(),l]),l.dismissFn}createNotification(t,i,r,s){let l=new Date().getTime().toString()+Math.random().toString();return{id:l,[typeof t=="string"?"text":"template"]:t,type:i,translateParams:r,templateContext:s,dismissFn:()=>this.removeNotification(l)}}removeNotification(t){let i=this.notificationsSubject.getValue(),r=i.findIndex(s=>s.id===t);r!==-1&&(i.splice(r,1),this.notificationsSubject.next([...i]))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Wa=(()=>{class e{constructor(t,i){this.ngZone=t,this.notificationService=i,this.notificationSubject=new No(1),this.connectionStateSubject=new No(1),this.appSettingsSubject=new Ct(void 0),this.pendingInvitesSubject=new Ct([]),this.userSubject=new No(1),this.subscriptions=[],this.events$=this.notificationSubject.asObservable(),this.connectionState$=this.connectionStateSubject.asObservable(),this.appSettings$=this.appSettingsSubject.asObservable(),this.pendingInvites$=this.pendingInvitesSubject.asObservable(),this.user$=this.userSubject.asObservable()}init(t,i,r,s){var l;return sn(this,void 0,void 0,function*(){this.chatClient=nT.getInstance(t,s),this.chatClient.recoverStateOnReconnect=!1,this.chatClient.devToken;let d;yield this.ngZone.runOutsideAngular(()=>sn(this,void 0,void 0,function*(){var x;let O=typeof i=="string"?{id:i}:i;try{d=yield((x={guest:()=>this.chatClient.setGuestUser(O),anonymous:()=>this.chatClient.connectAnonymousUser()}[`${r}`])!==null&&x!==void 0?x:()=>this.chatClient.connectUser(O,r))()}catch(L){throw this.notificationService.addPermanentNotification("streamChat.Error connecting to chat, refresh the page to try again.","error"),L}this.userSubject.next(this.chatClient.user?Object.assign({},this.chatClient.user):void 0);let A="stream-chat-angular";this.chatClient.getUserAgent().includes(A)||this.chatClient.setUserAgent(`${A}-${Ite}-${this.chatClient.getUserAgent()}`)}));let f=yield this.chatClient.queryChannels({invite:"pending"},{},{user_id:(l=this.chatClient.user)===null||l===void 0?void 0:l.id});this.pendingInvitesSubject.next(f),this.appSettingsSubject.next(void 0),this.subscriptions.push(this.chatClient.on(x=>{this.updateUser(x),this.updatePendingInvites(x),this.notificationSubject.next({eventType:x.type,event:x})}));let v;return this.subscriptions.push(this.chatClient.on("connection.changed",x=>{this.ngZone.run(()=>{let O=x.online;O?v&&v():v=this.notificationService.addPermanentNotification("streamChat.Connection failure, reconnecting now..."),this.connectionStateSubject.next(O?"online":"offline")})})),d})}disconnectUser(){return sn(this,void 0,void 0,function*(){this.pendingInvitesSubject.next([]),yield this.chatClient.disconnectUser(),this.userSubject.next(void 0),this.subscriptions.forEach(t=>t.unsubscribe())})}getAppSettings(){return sn(this,void 0,void 0,function*(){if(this.appSettingsSubject.getValue())return;let t=yield this.chatClient.getAppSettings();this.appSettingsSubject.next(t.app||{})})}flagMessage(t){return sn(this,void 0,void 0,function*(){yield this.chatClient.flagMessage(t)})}autocompleteUsers(t){return sn(this,void 0,void 0,function*(){return t?(yield this.chatClient.queryUsers({$or:[{id:{$autocomplete:t}},{name:{$autocomplete:t}}],id:{$ne:this.chatClient.userID}})).users:[]})}updatePendingInvites(t){var i,r,s;if(((r=(i=t.member)===null||i===void 0?void 0:i.user)===null||r===void 0?void 0:r.id)===((s=this.chatClient.user)===null||s===void 0?void 0:s.id)&&t.channel){let l=this.pendingInvitesSubject.getValue();if(t.type==="notification.invited")this.pendingInvitesSubject.next([...l,t.channel]);else if(t.type==="notification.invite_accepted"||t.type==="notification.invite_rejected"){let d=l.findIndex(f=>{var v;return f?.cid===((v=t.channel)===null||v===void 0?void 0:v.cid)});d!==-1&&(l.splice(d,1),this.pendingInvitesSubject.next([...l]))}}}updateUser(t){var i;if(typeof t.total_unread_count<"u"){let r;this.userSubject.pipe(ti(1)).subscribe(s=>{r=s}),r&&r.total_unread_count!==t.total_unread_count&&this.userSubject.next(Object.assign(Object.assign({},r),{total_unread_count:t.total_unread_count}))}if(typeof t.unread_channels<"u"){let r;this.userSubject.pipe(ti(1)).subscribe(s=>{r=s}),r&&r.unread_channels!==t.unread_channels&&this.userSubject.next(Object.assign(Object.assign({},r),{unread_channels:t.unread_channels}))}if(typeof t.unread_count<"u"){let r;this.userSubject.pipe(ti(1)).subscribe(s=>{r=s}),r&&r.unread_count!==t.unread_count&&this.userSubject.next(Object.assign(Object.assign({},r),{unread_count:t.unread_count}))}t.type==="user.updated"&&this.chatClient.user&&((i=t.user)===null||i===void 0?void 0:i.id)===this.chatClient.user.id&&this.userSubject.next(Object.assign({},this.chatClient.user))}}return e.\u0275fac=function(t){return new(t||e)(xt(On),xt(Lp))},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Hl=(e,n,t)=>{var i,r;let s=t?.language||((i=n?.data)===null||i===void 0?void 0:i.auto_translation_language);if(s&&e?.i18n&&((r=e?.user)===null||r===void 0?void 0:r.id)!==t?.id)return e.i18n[`${s}_text`]},Ete=(e,n,t=[],i=[],r=void 0,s=void 0,l)=>{let d=`${e.id}-${xg()}`;return Object.assign({__html:n,created_at:new Date,html:n,id:d,reactions:[],status:"sending",text:n,type:"regular",user:e,attachments:t,mentioned_users:i,parent_id:r,quoted_message_id:s},l)},Fp=(e,n)=>{let t=[];return Object.keys(n.state.read).forEach(i=>{var r;n.state.read[i].last_read.getTime()>=e.created_at.getTime()&&((r=e.user)===null||r===void 0?void 0:r.id)!==i&&t.push(n.state.read[i].user)}),t},Or=(()=>{class e{constructor(t,i,r){this.chatClientService=t,this.ngZone=i,this.notificationService=r,this.channelsSubject=new Ct(void 0),this.activeChannelSubject=new Ct(void 0),this.activeChannelMessagesSubject=new Ct([]),this.activeChannelPinnedMessagesSubject=new Ct([]),this.hasMoreChannelsSubject=new No(1),this.activeChannelSubscriptions=[],this.channelSubscriptions={},this.activeParentMessageIdSubject=new Ct(void 0),this.activeThreadMessagesSubject=new Ct([]),this.jumpToMessageSubject=new Ct({id:void 0,parentId:void 0}),this.latestMessageDateByUserByChannelsSubject=new Ct({}),this.messagePageSize=25,this.messageToQuoteSubject=new Ct(void 0),this.usersTypingInChannelSubject=new Ct([]),this.usersTypingInThreadSubject=new Ct([]),this._shouldMarkActiveChannelAsRead=!0,this.isStateRecoveryInProgress=!1,this.channelQueryStateSubject=new Ct(void 0),this.channelListSetter=(s,l=!0)=>{let d=this.channelsSubject.getValue()||[],f=s.filter(x=>!d.find(O=>O.cid===x.cid)),v=d.filter(x=>!s?.find(O=>O.cid===x.cid));this.addChannelsFromNotification(f),this.removeChannelsFromChannelList(v.map(x=>x.cid),l)},this.messageListSetter=s=>{this.activeChannelMessagesSubject.next(s)},this.threadListSetter=s=>{this.activeThreadMessagesSubject.next(s)},this.parentMessageSetter=s=>{this.activeParentMessageIdSubject.next(s?.id)},this.areReadEventsPaused=!1,this.channels$=this.channelsSubject.asObservable().pipe(Mr(1)),this.activeChannel$=this.activeChannelSubject.asObservable().pipe(Mr(1)),this.activeChannelMessages$=this.activeChannelMessagesSubject.pipe(Ft(s=>{let l=this.activeChannelSubject.getValue();return s.map(d=>this.transformToStreamMessage(d,l))}),Mr(1)),this.bouncedMessage$=new Ct(void 0),this.hasMoreChannels$=this.hasMoreChannelsSubject.asObservable().pipe(Mr(1)),this.activeParentMessageId$=this.activeParentMessageIdSubject.asObservable().pipe(Mr(1)),this.activeThreadMessages$=this.activeThreadMessagesSubject.pipe(Ft(s=>{let l=this.activeChannelSubject.getValue();return s.map(d=>this.transformToStreamMessage(d,l))}),Mr(1)),this.activeParentMessage$=so([this.activeChannelMessages$,this.activeParentMessageId$]).pipe(Ft(([s,l])=>{if(l){let d=s.find(f=>f.id===l);if(d)return d;this.setAsActiveParentMessage(void 0);return}else return}),Mr(1)),this.messageToQuote$=this.messageToQuoteSubject.asObservable().pipe(Mr(1)),this.jumpToMessage$=this.jumpToMessageSubject.asObservable().pipe(Mr(1)),this.usersTypingInChannel$=this.usersTypingInChannelSubject.asObservable().pipe(Mr(1)),this.usersTypingInThread$=this.usersTypingInThreadSubject.asObservable().pipe(Mr(1)),this.latestMessageDateByUserByChannels$=this.latestMessageDateByUserByChannelsSubject.asObservable().pipe(Mr(1)),this.activeChannelPinnedMessages$=this.activeChannelPinnedMessagesSubject.asObservable().pipe(Mr(1)),this.channelQueryState$=this.channelQueryStateSubject.asObservable().pipe(Mr(1))}get shouldMarkActiveChannelAsRead(){return this._shouldMarkActiveChannelAsRead}set shouldMarkActiveChannelAsRead(t){if(!this._shouldMarkActiveChannelAsRead&&t){let i=this.activeChannelSubject.getValue();i&&this.canSendReadEvents&&i.markRead()}this._shouldMarkActiveChannelAsRead=t}setAsActiveChannel(t){var i,r;let s=this.activeChannelSubject.getValue();if(s?.cid===t.cid)return;this.stopWatchForActiveChannelEvents(s),this.areReadEventsPaused=!1;let l=t.state.read[((i=this.chatClientService.chatClient.user)===null||i===void 0?void 0:i.id)||""];this.activeChannelLastReadMessageId=l?.last_read_message_id,((r=t.state.latestMessages[t.state.latestMessages.length-1])===null||r===void 0?void 0:r.id)===this.activeChannelLastReadMessageId&&(this.activeChannelLastReadMessageId=void 0),this.activeChannelUnreadCount=l?.unread_messages||0,this.watchForActiveChannelEvents(t),this.addChannel(t),this.activeChannelSubject.next(t);let d=t.state.latestMessages.length;d>2*this.messagePageSize&&(t.state.latestMessages=t.state.latestMessages.slice(d-2*this.messagePageSize)),this.setChannelState(t)}deselectActiveChannel(){let t=this.activeChannelSubject.getValue();t&&(this.stopWatchForActiveChannelEvents(t),this.activeChannelMessagesSubject.next([]),this.activeChannelSubject.next(void 0),this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([]),this.latestMessageDateByUserByChannelsSubject.next({}),this.selectMessageToQuote(void 0),this.jumpToMessageSubject.next({id:void 0,parentId:void 0}),this.activeChannelPinnedMessagesSubject.next([]),this.usersTypingInChannelSubject.next([]),this.usersTypingInThreadSubject.next([]),this.activeChannelLastReadMessageId=void 0,this.activeChannelUnreadCount=void 0,this.areReadEventsPaused=!1)}setAsActiveParentMessage(t,i="request"){var r;return sn(this,void 0,void 0,function*(){let s=this.messageToQuoteSubject.getValue();if(s&&s.parent_id&&this.messageToQuoteSubject.next(void 0),t){this.activeParentMessageIdSubject.next(t.id);let l=this.activeChannelSubject.getValue();if(i==="request"){let d=yield l?.getReplies(t.id,{limit:(r=this.options)===null||r===void 0?void 0:r.message_limit});this.activeThreadMessagesSubject.next(d?.messages||[])}else this.activeThreadMessagesSubject.next(l?.state.threads[t.id]||[])}else{this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([]);let l=this.jumpToMessageSubject.getValue();l&&l.parentId&&this.jumpToMessageSubject.next({id:void 0,parentId:void 0})}})}loadMoreMessages(t="older"){var i,r,s,l;let d=this.activeChannelSubject.getValue(),f=this.activeChannelMessagesSubject.getValue(),v=(i=f[t==="older"?0:f.length-1])===null||i===void 0?void 0:i.id;return t==="newer"&&((r=d?.state)===null||r===void 0?void 0:r.latestMessages)===((s=d?.state)===null||s===void 0?void 0:s.messages)?!1:d?.query({messages:{limit:(l=this.options)===null||l===void 0?void 0:l.message_limit,[t==="older"?"id_lt":"id_gt"]:v},members:{limit:0},watchers:{limit:0}}).then(x=>{var O,A,L;return((O=d?.data)===null||O===void 0?void 0:O.id)===((L=(A=this.activeChannelSubject.getValue())===null||A===void 0?void 0:A.data)===null||L===void 0?void 0:L.id)&&this.activeChannelMessagesSubject.next([...d.state.messages]),x})}loadMoreThreadReplies(t="older"){var i,r;return sn(this,void 0,void 0,function*(){if(t==="newer")return;let s=this.activeChannelSubject.getValue(),l=this.activeParentMessageIdSubject.getValue();if(!l)return;let d=this.activeThreadMessagesSubject.getValue(),f=(i=d[t==="older"?0:d.length-1])===null||i===void 0?void 0:i.id;yield s?.getReplies(l,{limit:(r=this.options)===null||r===void 0?void 0:r.message_limit,[t==="older"?"id_lt":"id_gt"]:f}),this.activeThreadMessagesSubject.next(s?.state.threads[l]||[])})}init(t,i,r,s=!0){return sn(this,void 0,void 0,function*(){this.filters=t,this.options=Object.assign({limit:25,state:!0,presence:!0,watch:!0,message_limit:this.messagePageSize},r),this.sort=i||{last_message_at:-1},this.shouldSetActiveChannel=s,this.clientEventsSubscription=this.chatClientService.events$.subscribe(l=>void this.handleNotification(l));try{return yield this.queryChannels(this.shouldSetActiveChannel)}catch(l){throw this.dismissErrorNotification=this.notificationService.addPermanentNotification("streamChat.Error loading channels","error"),l}})}reset(){var t,i;this.deselectActiveChannel(),this.channelsSubject.next(void 0),this.channelQueryStateSubject.next(void 0),(t=this.clientEventsSubscription)===null||t===void 0||t.unsubscribe(),(i=this.dismissErrorNotification)===null||i===void 0||i.call(this),this.dismissErrorNotification=void 0,Object.keys(this.channelSubscriptions).forEach(r=>{this.channelSubscriptions[r]()}),this.channelSubscriptions={},this.nextPageConfiguration=void 0}loadMoreChannels(){return sn(this,void 0,void 0,function*(){yield this.queryChannels(!1)})}addReaction(t,i,r){var s;return sn(this,void 0,void 0,function*(){yield(s=this.activeChannelSubject.getValue())===null||s===void 0?void 0:s.sendReaction(t,Object.assign({type:i},r))})}removeReaction(t,i){var r;return sn(this,void 0,void 0,function*(){yield(r=this.activeChannelSubject.getValue())===null||r===void 0?void 0:r.deleteReaction(t,i)})}sendMessage(t,i=[],r=[],s=void 0,l=void 0,d=void 0){return sn(this,void 0,void 0,function*(){let f={text:t,attachments:i,mentionedUsers:r,parentId:s,quotedMessageId:l,customData:d};this.beforeSendMessage&&(f=yield this.beforeSendMessage(f));let v=Ete(this.chatClientService.chatClient.user,f.text,f.attachments,f.mentionedUsers,f.parentId,f.quotedMessageId,f.customData),x=this.activeChannelSubject.getValue();return v.readBy=[],x.state.addMessageSorted(v,!0),yield this.sendMessageRequest(v,f.customData)})}resendMessage(t){return sn(this,void 0,void 0,function*(){return this.activeChannelSubject.getValue().state.addMessageSorted(Object.assign(Object.assign({},t),{errorStatusCode:void 0,status:"sending"}),!0),this.sendMessageRequest(t,void 0,!0)})}updateMessage(t){var i;return sn(this,void 0,void 0,function*(){let r=Object.assign({},t);if(delete r.i18n,this.beforeUpdateMessage&&(r=yield this.beforeUpdateMessage(r)),t.moderation_details)return this.resendMessage(t);let s=yield this.chatClientService.chatClient.updateMessage(r),l=(i=this.channelsSubject.getValue())===null||i===void 0?void 0:i.find(d=>d.cid===t.cid);return s.message.type==="error"&&s.message.moderation_details?(this.notificationService.addTemporaryNotification("streamChat.This message did not meet our content guidelines"),t):this.transformToStreamMessage(s.message,l)})}deleteMessage(t,i=!1){return sn(this,void 0,void 0,function*(){if(i&&this.activeChannel){this.activeChannel.state.removeMessage({id:t.id,parent_id:t.parent_id})&&(t.parent_id?this.activeThreadMessagesSubject.next(this.activeChannel.state.threads[t.parent_id]):this.activeChannelMessagesSubject.next(this.activeChannel.state.messages));return}this.messageDeleteConfirmationHandler?(yield this.messageDeleteConfirmationHandler(t))&&(yield this.chatClientService.chatClient.deleteMessage(t.id)):yield this.chatClientService.chatClient.deleteMessage(t.id)})}uploadAttachments(t){return sn(this,void 0,void 0,function*(){let i=[],r=this.activeChannelSubject.getValue();return(yield Promise.allSettled(t.map(l=>l.type==="image"?this.customImageUploadRequest?this.customImageUploadRequest(l.file,r):r.sendImage(l.file,l.file.name,l.file.type):this.customFileUploadRequest?this.customFileUploadRequest(l.file,r):r.sendFile(l.file,l.file.name,l.file.type)))).forEach((l,d)=>{var f,v,x,O,A,L,U;let te=t[d].file,ce=t[d].type;if(l.status==="fulfilled")i.push({file:te,type:ce,state:"success",url:l.value.file,thumb_url:l.value.thumb_url});else{let fe="unknown",ye,Re=(v=(f=l.reason.response)===null||f===void 0?void 0:f.data)===null||v===void 0?void 0:v.message,Ae=(O=(x=l.reason.response)===null||x===void 0?void 0:x.data)===null||O===void 0?void 0:O.code;Ae===22?(fe="file-size",ye={param:((A=/\d+MB/.exec(Re||""))===null||A===void 0?void 0:A[0])||"100MB"}):Ae===4&&(!((L=Re?.toLowerCase())===null||L===void 0)&&L.includes("file extension"))&&(fe="file-extension",ye={param:((U=/\.\w+/.exec(Re))===null||U===void 0?void 0:U[0])||""}),i.push({file:te,type:ce,state:"error",errorReason:fe,errorExtraInfo:ye?[ye]:void 0})}}),i})}deleteAttachment(t){return sn(this,void 0,void 0,function*(){let i=this.activeChannelSubject.getValue();yield t.type==="image"?this.customImageDeleteRequest?this.customImageDeleteRequest(t.url,i):i.deleteImage(t.url):this.customFileDeleteRequest?this.customFileDeleteRequest(t.url,i):i.deleteFile(t.url)})}autocompleteMembers(t){return sn(this,void 0,void 0,function*(){let i=this.activeChannelSubject.getValue();if(!i)return[];if(Object.keys(i.state.members).length<100)return Object.values(i.state.members).filter(r=>{var s;return((s=r.user)===null||s===void 0?void 0:s.id)!==this.chatClientService.chatClient.userID});{if(!t)return[];let r=yield i.queryMembers({name:{$autocomplete:t},id:{$ne:this.chatClientService.chatClient.userID}});return Object.values(r.members)}})}sendAction(t,i,r){return sn(this,void 0,void 0,function*(){let s=this.activeChannelSubject.getValue(),l=yield s.sendAction(t,i);l?.message?(s.state.addMessageSorted(Object.assign(Object.assign({},l.message),{status:"received"})),!!l.message.parent_id?this.activeThreadMessagesSubject.next([...s.state.threads[l.message.parent_id]]):this.activeChannelMessagesSubject.next([...s.state.messages])):(s.state.removeMessage({id:t,parent_id:r}),r?this.activeThreadMessagesSubject.next(s.state.threads[this.activeParentMessageIdSubject.getValue()]):this.activeChannelMessagesSubject.next([...s.state.messages]))})}selectMessageToQuote(t){this.messageToQuoteSubject.next(t)}addChannel(t){this.channels.find(i=>i.cid===t.cid)||(this.channelsSubject.next([t,...this.channels]),this.watchForChannelEvents(t))}sendMessageRequest(t,i,r=!1){var s,l,d,f;return sn(this,void 0,void 0,function*(){let v=this.activeChannelSubject.getValue(),x=!!t.parent_id;x?this.activeThreadMessagesSubject.next([...v.state.threads[t.parent_id]]):this.activeChannelMessagesSubject.next([...v.state.messages]);try{let O=yield v.sendMessage(Object.assign({id:t.id,text:t.text,attachments:t.attachments,mentioned_users:(s=t.mentioned_users)===null||s===void 0?void 0:s.map(U=>U.id),parent_id:t.parent_id,quoted_message_id:t.quoted_message_id},i));v.state.addMessageSorted(Object.assign(Object.assign({},O.message),{status:"received"}),!0),x?this.activeThreadMessagesSubject.next([...v.state.threads[t.parent_id]]):this.activeChannelMessagesSubject.next([...v.state.messages]);let A;return(x?this.activeThreadMessages$:this.activeChannelMessages$).pipe(ti(1)).subscribe(U=>A=U),A[A.length-1]}catch(O){let A=JSON.stringify(O),L=A?JSON.parse(A):{},U=!1;r&&L.status===400&&L.code===4&&!((f=(d=(l=L?.response)===null||l===void 0?void 0:l.data)===null||d===void 0?void 0:d.message)===null||f===void 0)&&f.includes("already exists")&&(U=!0),v.state.addMessageSorted(Object.assign(Object.assign({},t),{errorStatusCode:U?void 0:L.status||void 0,status:U?"received":"failed"}),!0),x?this.activeThreadMessagesSubject.next([...v.state.threads[t.parent_id]]):this.activeChannelMessagesSubject.next([...v.state.messages]);let te;return(x?this.activeThreadMessages$:this.activeChannelMessages$).pipe(ti(1)).subscribe(fe=>te=fe),te[te.length-1]}})}jumpToMessage(t,i){return sn(this,void 0,void 0,function*(){let r=this.activeChannelSubject.getValue();try{yield r?.state.loadMessageIntoState(t,i);let s=r?.state.messages||[];if(this.activeChannelMessagesSubject.next([...s]),i){let l=s.find(d=>d.id===i);this.setAsActiveParentMessage(l,"state")}this.jumpToMessageSubject.next({id:t,parentId:i})}catch(s){throw this.notificationService.addTemporaryNotification("streamChat.Message not found"),s}})}pinMessage(t){var i;return sn(this,void 0,void 0,function*(){try{yield(i=this.chatClientService.chatClient)===null||i===void 0?void 0:i.pinMessage(t),this.notificationService.addTemporaryNotification("streamChat.Message pinned","success")}catch(r){throw this.notificationService.addTemporaryNotification("streamChat.Error pinning message"),r}})}unpinMessage(t){var i;return sn(this,void 0,void 0,function*(){try{yield(i=this.chatClientService.chatClient)===null||i===void 0?void 0:i.unpinMessage(t),this.notificationService.addTemporaryNotification("streamChat.Message unpinned","success")}catch(r){throw this.notificationService.addTemporaryNotification("streamChat.Error removing message pin"),r}})}handleNotification(t){switch(t.eventType){case"connection.recovered":{this.ngZone.run(()=>sn(this,void 0,void 0,function*(){if(!this.isStateRecoveryInProgress){this.isStateRecoveryInProgress=!0;try{this.nextPageConfiguration=void 0;let i=this.shouldSetActiveChannel&&!this.activeChannelSubject.getValue();if(yield this.queryChannels(i||!1,!0),this.activeChannelSubject.getValue()){this.setAsActiveParentMessage(void 0);let r=this.messageToQuoteSubject.getValue();this.setChannelState(this.activeChannelSubject.getValue());let s;this.activeChannelMessages$.pipe(ti(1)).subscribe(d=>s=d);let l=s.find(d=>d.id===r?.id);l&&this.selectMessageToQuote(l)}this.isStateRecoveryInProgress=!1}catch{this.isStateRecoveryInProgress=!1}}}));break}case"notification.message_new":{this.ngZone.run(()=>{this.customNewMessageNotificationHandler?this.customNewMessageNotificationHandler(t,this.channelListSetter):this.handleNewMessageNotification(t)});break}case"notification.added_to_channel":{this.ngZone.run(()=>{this.customAddedToChannelNotificationHandler?this.customAddedToChannelNotificationHandler(t,this.channelListSetter):this.handleAddedToChannelNotification(t)});break}case"notification.removed_from_channel":{this.ngZone.run(()=>{this.customRemovedFromChannelNotificationHandler?this.customRemovedFromChannelNotificationHandler(t,this.channelListSetter):this.handleRemovedFromChannelNotification(t)});break}case"user.updated":{this.ngZone.run(()=>{var i;let r=(i=this.channelsSubject.getValue())===null||i===void 0?void 0:i.map(l=>this.chatClientService.chatClient.activeChannels[l.cid]?this.chatClientService.chatClient.activeChannels[l.cid]:l);this.channelsSubject.next(r);let s=this.activeChannelSubject.getValue();if(s){this.activeChannelSubject.next(this.chatClientService.chatClient.activeChannels[s.cid]||s),this.activeChannelMessagesSubject.next(s.state.messages.map(d=>(d.readBy=Fp(d,s),Object.assign({},d))));let l=this.activeParentMessageIdSubject.getValue();if(l){let d=s.state.threads[l];this.activeThreadMessagesSubject.next([...d])}this.activeChannelPinnedMessagesSubject.next([...s.state.pinnedMessages])}});break}}}handleRemovedFromChannelNotification(t){let i=t.event.channel.cid;this.removeChannelsFromChannelList([i],!0)}handleNewMessageNotification(t){t.event.channel&&this.addChannelsFromNotification([t.event.channel])}handleAddedToChannelNotification(t){t.event.channel&&this.addChannelsFromNotification([t.event.channel])}addChannelsFromNotification(t){return sn(this,void 0,void 0,function*(){let i=[],r=[];t.forEach(l=>{let d=this.chatClientService.chatClient.channel(l.type,l.id);r.push(d.watch()),i.push(d)}),yield Promise.all(r);let s=this.channelsSubject.getValue()||[];i=i.filter(l=>!s.find(d=>d.cid===l.cid)),i.length>0&&(i.forEach(l=>this.watchForChannelEvents(l)),this.channelsSubject.next([...i,...s]))})}removeChannelsFromChannelList(t,i){var r;let s=this.channels.filter(l=>!t.includes(l.cid||""));i&&t.forEach(l=>{var d;this.channelSubscriptions[l]&&(this.channelSubscriptions[l](),delete this.channelSubscriptions.cid),(d=this.chatClientService.chatClient.activeChannels[l])===null||d===void 0||d.stopWatching()}),s.length<this.channels.length&&(this.channelsSubject.next(s),t.includes(((r=this.activeChannelSubject.getValue())===null||r===void 0?void 0:r.cid)||"")&&(s.length>0?this.setAsActiveChannel(s[0]):this.activeChannelSubject.next(void 0)))}watchForActiveChannelEvents(t){this.activeChannelSubscriptions.push(t.on("message.new",i=>{this.ngZone.run(()=>{i.message&&i.message.parent_id?i.message.parent_id===this.activeParentMessageIdSubject.getValue()&&this.activeThreadMessagesSubject.next([...t.state.threads[i.message.parent_id]]):this.activeChannelMessagesSubject.next([...t.state.messages]),this.activeChannel$.pipe(Qr()).subscribe(r=>{r&&this.markRead(r)}),this.updateLatestMessages(i)})})),this.activeChannelSubscriptions.push(t.on("message.updated",i=>this.messageUpdated(i))),this.activeChannelSubscriptions.push(t.on("message.deleted",i=>this.messageUpdated(i))),this.activeChannelSubscriptions.push(t.on("reaction.new",i=>this.messageReactionEventReceived(i))),this.activeChannelSubscriptions.push(t.on("reaction.deleted",i=>this.messageReactionEventReceived(i))),this.activeChannelSubscriptions.push(t.on("reaction.updated",i=>this.messageReactionEventReceived(i))),this.activeChannelSubscriptions.push(t.on("message.read",i=>{this.ngZone.run(()=>{let r,s;this.activeChannelMessages$.pipe(Qr()).subscribe(l=>{s=l,r=s[s.length-1]}),!(!r||!i.user)&&(r.readBy?r.readBy.splice(0,r.readBy.length):r.readBy=[],r.readBy.push(...Fp(r,t)),s[s.length-1]=Object.assign({},r),this.activeChannelMessagesSubject.next([...s]))})})),this.activeChannelSubscriptions.push(this.chatClientService.events$.pipe(ci(i=>i.eventType==="notification.mark_unread"&&i.event.channel_id===t.id),Ft(i=>i.event)).subscribe(i=>{this.ngZone.run(()=>{this.activeChannelLastReadMessageId=i.last_read_message_id,this.activeChannelUnreadCount=i.unread_messages,this.activeChannelSubject.next(this.activeChannel)})})),this.activeChannelSubscriptions.push(t.on("typing.start",i=>this.ngZone.run(()=>this.handleTypingStartEvent(i)))),this.activeChannelSubscriptions.push(t.on("typing.stop",i=>this.ngZone.run(()=>this.handleTypingStopEvent(i))))}typingStarted(t){return sn(this,void 0,void 0,function*(){let i=this.activeChannelSubject.getValue();yield i?.keystroke(t)})}typingStopped(t){return sn(this,void 0,void 0,function*(){let i=this.activeChannelSubject.getValue();yield i?.stopTyping(t)})}get channels(){return this.channelsSubject.getValue()||[]}get activeChannel(){return this.activeChannelSubject.getValue()||void 0}get activeChannelMessages(){return this.activeChannelMessagesSubject.getValue()||[]}getMessageReactions(t){var i,r;return sn(this,void 0,void 0,function*(){let s=[],d=0,f=e.MAX_MESSAGE_REACTIONS_TO_FETCH,v=300;for(;v===300&&s.length<f;)try{let x=yield(i=this.activeChannel)===null||i===void 0?void 0:i.getReactions(t,{offset:d,limit:300});v=((r=x?.reactions)===null||r===void 0?void 0:r.length)||0,v>0&&s.push(...x.reactions),d+=v}catch(x){throw this.notificationService.addTemporaryNotification("streamChat.Error loading reactions"),x}return s})}markMessageUnread(t){var i,r,s,l;return sn(this,void 0,void 0,function*(){if(this.activeChannel)try{let d=yield this.activeChannel.markUnread({message_id:t});return this.areReadEventsPaused=!0,d}catch(d){let f=JSON.parse(JSON.stringify(d)),v=(i=f?.response)===null||i===void 0?void 0:i.data;if(v&&v.code===4&&v.StatusCode===400&&(!((r=v.message)===null||r===void 0)&&r.includes("it is older than last"))){let x=(l=(s=/\d+ channel messages/.exec(v.message))===null||s===void 0?void 0:s[0].match(/\d+/))===null||l===void 0?void 0:l[0];if(x)throw this.notificationService.addTemporaryNotification("streamChat.Error, only the first {{count}} message can be marked as unread",void 0,void 0,{count:x}),d}throw this.notificationService.addTemporaryNotification("streamChat.Error marking message as unread"),d}})}messageUpdated(t){this.ngZone.run(()=>{var i;let r=t.message&&t.message.parent_id,s=this.activeChannelSubject.getValue();if(!s)return;let l=r?s.state.threads[((i=t?.message)===null||i===void 0?void 0:i.parent_id)||""]:s.state.messages;if(!l)return;l.findIndex(f=>{var v;return f.id===((v=t?.message)===null||v===void 0?void 0:v.id)})!==-1&&(r?this.activeThreadMessagesSubject.next([...l]):this.activeChannelMessagesSubject.next([...l]),this.activeChannelPinnedMessagesSubject.next([...s.state.pinnedMessages]))})}messageReactionEventReceived(t){this.ngZone.run(()=>{var i,r,s,l;let d=t.message&&t.message.parent_id,f;(d?this.activeThreadMessages$:this.activeChannelMessages$).pipe(Qr()).subscribe(O=>f=O);let v=f.findIndex(O=>{var A;return O.id===((A=t?.message)===null||A===void 0?void 0:A.id)});if(v===-1)return;let x=f[v];x.reaction_counts=Object.assign({},(i=t.message)===null||i===void 0?void 0:i.reaction_counts),x.reaction_scores=Object.assign({},(r=t.message)===null||r===void 0?void 0:r.reaction_scores),x.latest_reactions=[...((s=t.message)===null||s===void 0?void 0:s.latest_reactions)||[]],x.own_reactions=[...((l=t.message)===null||l===void 0?void 0:l.own_reactions)||[]],f[v]=Object.assign({},x),d?this.activeThreadMessagesSubject.next([...f]):this.activeChannelMessagesSubject.next([...f])})}formatMessage(t){let i=t;return i.pinned_at=t.pinned_at?new Date(t.pinned_at):null,i.created_at=t.created_at?new Date(t.created_at):new Date,i.updated_at=t.updated_at?new Date(t.updated_at):new Date,t.status=t.status||"received",i}isStreamMessage(t){return!!t.readBy}isFormatMessageResponse(t){return t.created_at instanceof Date}stopWatchForActiveChannelEvents(t){t&&(this.activeChannelSubscriptions.forEach(i=>i.unsubscribe()),this.activeChannelSubscriptions=[])}queryChannels(t,i=!1){var r,s;return sn(this,void 0,void 0,function*(){try{this.channelQueryStateSubject.next({state:"in-progress"});let l,d;this.nextPageConfiguration?this.nextPageConfiguration.type==="filter"?(l=Object.assign(Object.assign({},this.filters),this.nextPageConfiguration.paginationFilter),d=this.options):(d=Object.assign(Object.assign({},this.options),{offset:this.nextPageConfiguration.offset}),l=this.filters):(l=this.filters,d=this.options);let f=yield this.chatClientService.chatClient.queryChannels(l,this.sort||{},d);this.setNextPageConfiguration(f),f.forEach(U=>this.watchForChannelEvents(U));let v=i?[]:this.channelsSubject.getValue()||[],x=f.filter(U=>!v.find(te=>te.cid===U.cid)),O=this.activeChannelSubject.getValue(),A=!1,L=[...v,...x];if(i&&O&&!x.find(U=>U.cid===O?.cid))try{yield O.watch(),L.unshift(O)}catch{A=!0}return this.channelsSubject.next(L),A&&this.deselectActiveChannel(),x.length>0&&!O&&t&&(this.setAsActiveChannel(x[0]),O=this.activeChannelSubject.getValue()),this.hasMoreChannelsSubject.next(f.length>=this.options.limit),this.channelQueryStateSubject.next({state:"success"}),!((r=this.options)===null||r===void 0)&&r.keepAliveChannels$OnError&&this.dismissErrorNotification&&this.dismissErrorNotification(),f}catch(l){throw!((s=this.options)===null||s===void 0)&&s.keepAliveChannels$OnError||this.channelsSubject.error(l),this.channelQueryStateSubject.next({state:"error",error:l}),l}})}watchForChannelEvents(t){let i=t.on(r=>{switch(r.type){case"message.new":{this.ngZone.run(()=>{this.customNewMessageHandler?this.customNewMessageHandler(r,t,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleNewMessage(r,t)});break}case"channel.hidden":{this.ngZone.run(()=>{this.customChannelHiddenHandler?this.customChannelHiddenHandler(r,t,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelHidden(r)});break}case"channel.deleted":{this.ngZone.run(()=>{this.customChannelDeletedHandler?this.customChannelDeletedHandler(r,t,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelDeleted(r)});break}case"channel.visible":{this.ngZone.run(()=>{this.customChannelVisibleHandler?this.customChannelVisibleHandler(r,t,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelVisible(r,t)});break}case"channel.updated":{this.ngZone.run(()=>{this.customChannelUpdatedHandler?this.customChannelUpdatedHandler(r,t,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelUpdate(r)});break}case"channel.truncated":{this.ngZone.run(()=>{this.customChannelTruncatedHandler?this.customChannelTruncatedHandler(r,t,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelTruncate(r)});break}case"capabilities.changed":{this.ngZone.run(()=>{var l;let d=r.cid;if(d){let f=this.channelsSubject.getValue(),v=f?.findIndex(x=>x.cid===d);v!==-1&&v!==void 0&&(this.channelsSubject.next([...f]),d===((l=this.activeChannelSubject.getValue())===null||l===void 0?void 0:l.cid)&&this.activeChannelSubject.next(this.activeChannelSubject.getValue()))}});break}}});this.channelSubscriptions[t.cid]=i.unsubscribe}handleNewMessage(t,i){let r=this.channels.findIndex(s=>s.cid===i.cid);this.channels.splice(r,1),this.channelsSubject.next([i,...this.channels])}handleChannelHidden(t){this.removeChannelsFromChannelList([t.channel.cid],!1)}handleChannelDeleted(t){this.removeChannelsFromChannelList([t.channel.cid],!1)}handleChannelVisible(t,i){this.channels.find(r=>r.cid===t.cid)||this.ngZone.run(()=>this.channelsSubject.next([...this.channels,i]))}handleChannelUpdate(t){var i,r,s,l;let d=this.channels.findIndex(f=>f.cid===t.channel.cid);if(d!==-1){let f=this.channels[d],v={hidden:((i=f.data)===null||i===void 0?void 0:i.hidden)||!1,own_capabilities:((r=f.data)===null||r===void 0?void 0:r.own_capabilities)||[]};f.data=Object.assign(Object.assign({},t.channel),v),this.channelsSubject.next([...this.channels]),((s=t.channel)===null||s===void 0?void 0:s.cid)===((l=this.activeChannelSubject.getValue())===null||l===void 0?void 0:l.cid)&&this.activeChannelSubject.next(f)}}handleChannelTruncate(t){var i,r;let s=this.channels.findIndex(l=>l.cid===t.channel.cid);if(s!==-1&&(this.channels[s].state.messages=[],this.channelsSubject.next([...this.channels]),((i=t.channel)===null||i===void 0?void 0:i.cid)===((r=this.activeChannelSubject.getValue())===null||r===void 0?void 0:r.cid))){let l=this.activeChannelSubject.getValue();l.state.messages=[],this.activeChannelSubject.next(l),this.activeChannelMessagesSubject.next([]),this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([])}}get canSendReadEvents(){var t;let i=this.activeChannelSubject.getValue();return i?((t=i.data)===null||t===void 0?void 0:t.own_capabilities).indexOf("read-events")!==-1:!1}transformToStreamMessage(t,i){let r=!!t.parent_id;return this.isStreamMessage(t)&&this.isFormatMessageResponse(t)?(t.quoted_message&&(t.quoted_message.translation=Hl(t.quoted_message,i,this.chatClientService.chatClient.user)),t.translation=Hl(t,i,this.chatClientService.chatClient.user),t):(t.quoted_message&&(t.quoted_message.translation=Hl(t.quoted_message,i,this.chatClientService.chatClient.user)),this.isFormatMessageResponse(t)?(t.readBy=r?[]:i?Fp(t,i):[],t.translation=Hl(t,i,this.chatClientService.chatClient.user),t):(t=this.formatMessage(t),t.readBy=r?[]:i?Fp(t,i):[],t.translation=Hl(t,i,this.chatClientService.chatClient.user),t))}handleTypingStartEvent(t){var i,r;if(((i=t.user)===null||i===void 0?void 0:i.id)===((r=this.chatClientService.chatClient.user)===null||r===void 0?void 0:r.id))return;let s=!!t.parent_id;if(s&&t.parent_id!==this.activeParentMessageIdSubject.getValue())return;let l=s?this.usersTypingInThreadSubject:this.usersTypingInChannelSubject,d=l.getValue(),f=t.user;f&&!d.find(v=>v.id===f.id)&&(d.push(f),l.next([...d]))}handleTypingStopEvent(t){let i=this.usersTypingInChannelSubject.getValue(),r=this.usersTypingInThreadSubject.getValue(),s=t.user;if(s&&i.find(l=>l.id===s.id)){i.splice(i.findIndex(l=>l.id===s.id),1),this.usersTypingInChannelSubject.next([...i]);return}if(s&&r.find(l=>l.id===s.id)){r.splice(r.findIndex(l=>l.id===s.id),1),this.usersTypingInThreadSubject.next([...r]);return}}updateLatestMessages(t){var i,r,s,l,d,f,v;if(((r=(i=t.message)===null||i===void 0?void 0:i.user)===null||r===void 0?void 0:r.id)!==((l=(s=this.chatClientService)===null||s===void 0?void 0:s.chatClient.user)===null||l===void 0?void 0:l.id))return;let x=this.latestMessageDateByUserByChannelsSubject.getValue();if(!(!((d=t.message)===null||d===void 0)&&d.created_at))return;let O=(f=t?.message)===null||f===void 0?void 0:f.cid;if(!O)return;let A=new Date(t.message.created_at);(!x[O]||((v=x[O])===null||v===void 0?void 0:v.getTime())<A.getTime())&&(x[O]=A,this.latestMessageDateByUserByChannelsSubject.next(Object.assign({},x)))}setChannelState(t){t.state.messages.forEach(i=>{i.readBy=Fp(i,t),i.translation=Hl(i,t,this.chatClientService.chatClient.user),i.quoted_message&&(i.quoted_message.translation=Hl(i.quoted_message,t,this.chatClientService.chatClient.user))}),this.markRead(t),this.activeChannelMessagesSubject.next([...t.state.messages]),this.activeChannelPinnedMessagesSubject.next([...t.state.pinnedMessages]),this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([]),this.messageToQuoteSubject.next(void 0),this.usersTypingInChannelSubject.next([]),this.usersTypingInThreadSubject.next([])}markRead(t){this.canSendReadEvents&&this.shouldMarkActiveChannelAsRead&&!this.areReadEventsPaused&&t.markRead()}setNextPageConfiguration(t){var i;this.customPaginator?this.nextPageConfiguration=this.customPaginator(t):this.nextPageConfiguration={type:"offset",offset:(((i=this.nextPageConfiguration)===null||i===void 0?void 0:i.type)==="offset"?this.nextPageConfiguration.offset:0)+t.length}}}return e.MAX_MESSAGE_REACTIONS_TO_FETCH=1200,e.\u0275fac=function(t){return new(t||e)(xt(Wa),xt(On),xt(Lp))},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Gc=(()=>{class e{constructor(){this.theme$=new Ct("light"),this.defaultDarkModeVariables={"--bg-gradient-end":"#101214","--bg-gradient-start":"#070a0d","--black":"#ffffff","--blue-alice":"#00193d","--border":"#141924","--button-background":"#ffffff","--button-text":"#005fff","--grey":"#7a7a7a","--grey-gainsboro":"#2d2f2f","--grey-whisper":"#1c1e22","--modal-shadow":"#000000","--overlay":"#00000066","--overlay-dark":"#ffffffcc","--shadow-icon":"#00000080","--targetedMessageBackground":"#302d22","--transparent":"transparent","--white":"#101418","--white-smoke":"#13151b","--white-snow":"#070a0d"},this.variablesToDelete=[],this.theme$.subscribe(t=>{let i=this.customDarkThemeVariables?Object.assign(Object.assign({},this.defaultDarkModeVariables),this.customDarkThemeVariables):this.defaultDarkModeVariables,r=this.customLightThemeVariables?this.customLightThemeVariables:{};this.variablesToDelete.forEach(s=>this.deleteVariables(s)),t==="dark"?(this.deleteVariables(r),this.setVariables(i)):(this.deleteVariables(i),this.setVariables(r))}),this.themeVersion=getComputedStyle(document.documentElement).getPropertyValue("--str-chat__theme-version").replace(" ","")||"1"}get customLightThemeVariables(){return this._customLightThemeVariables}set customLightThemeVariables(t){let i=this.customLightThemeVariables;i&&this.variablesToDelete.push(i),this._customLightThemeVariables=t,this.theme$.getValue()==="light"&&this.theme$.next("light")}get customDarkThemeVariables(){return this._customDarkThemeVariables}set customDarkThemeVariables(t){let i=this.customDarkThemeVariables;i&&this.variablesToDelete.push(i),this._customDarkThemeVariables=t,this.theme$.getValue()==="dark"&&this.theme$.next("dark")}deleteVariables(t){t&&Object.keys(t).forEach(i=>document.documentElement.style.setProperty(i,null))}setVariables(t){t&&Object.keys(t).forEach(i=>document.documentElement.style.setProperty(i,t[i]))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),b3=e=>e.type.startsWith("image/")&&!e.type.endsWith(".photoshop"),w3=e=>e.type==="image"&&!e.title_link&&!e.og_scrape_url,h3=(()=>{class e{constructor(t,i){this.channelService=t,this.notificationService=i,this.attachmentUploadInProgressCounterSubject=new Ct(0),this.attachmentUploadsSubject=new Ct([]),this.attachmentUploadInProgressCounter$=this.attachmentUploadInProgressCounterSubject.asObservable(),this.attachmentUploads$=this.attachmentUploadsSubject.asObservable()}resetAttachmentUploads(){this.attachmentUploadsSubject.next([])}filesSelected(t){return sn(this,void 0,void 0,function*(){if(!t)return;let i=[],r=[],s=[];Array.from(t).forEach(d=>{b3(d)?i.push(d):d.type.startsWith("video/")?s.push(d):r.push(d)}),i.forEach(d=>this.createPreview(d));let l=[...i.map(d=>({file:d,state:"uploading",type:"image"})),...s.map(d=>({file:d,state:"uploading",type:"video"})),...r.map(d=>({file:d,state:"uploading",type:"file"}))];this.attachmentUploadsSubject.next([...this.attachmentUploadsSubject.getValue(),...l]),yield this.uploadAttachments(l)})}addAttachment(t){t.isCustomAttachment=!0,this.createFromAttachments([t])}retryAttachmentUpload(t){return sn(this,void 0,void 0,function*(){let i=this.attachmentUploadsSubject.getValue(),r=i.find(s=>s.file===t);r&&(r.state="uploading",this.attachmentUploadsSubject.next([...i]),yield this.uploadAttachments([r]))})}deleteAttachment(t){var i;return sn(this,void 0,void 0,function*(){let r=this.attachmentUploadsSubject.getValue(),s;if(t.state==="success"&&!(!((i=t.fromAttachment)===null||i===void 0)&&i.isCustomAttachment))try{yield this.channelService.deleteAttachment(t),s=[...r];let l=r.indexOf(t);s.splice(l,1)}catch{s=r,this.notificationService.addTemporaryNotification("streamChat.Error deleting attachment")}else{s=[...r];let l=r.indexOf(t);s.splice(l,1)}this.attachmentUploadsSubject.next([...s])})}mapToAttachments(){return this.attachmentUploadsSubject.getValue().filter(i=>i.state==="success").map(i=>{var r,s,l,d;let f={type:i.type};return i.fromAttachment?i.fromAttachment:(f.mime_type=(r=i.file)===null||r===void 0?void 0:r.type,i.type==="image"?(f.fallback=(s=i.file)===null||s===void 0?void 0:s.name,f.image_url=i.url):(f.asset_url=i.url,f.title=(l=i.file)===null||l===void 0?void 0:l.name,f.file_size=(d=i.file)===null||d===void 0?void 0:d.size,f.thumb_url=i.thumb_url),f)})}createFromAttachments(t){let i=[];t.forEach(r=>{w3(r)?i.push({url:r.img_url||r.thumb_url||r.image_url,state:"success",type:"image",file:{name:r.fallback,type:r.mime_type},fromAttachment:r}):(r.type==="file"||r.type==="video")&&i.push({url:r.asset_url,state:"success",file:{name:r.title,size:r.file_size,type:r.mime_type},type:r.type,thumb_url:r.thumb_url,fromAttachment:r})}),i.length>0&&this.attachmentUploadsSubject.next([...this.attachmentUploadsSubject.getValue(),...i])}createPreview(t){let i=new FileReader;i.onload=r=>{var s;let l=this.attachmentUploadsSubject.getValue(),d=l.find(f=>f.file===t);d&&(d.previewUri=((s=r.target)===null||s===void 0?void 0:s.result)||void 0,this.attachmentUploadsSubject.next([...l]))},i.readAsDataURL(t)}uploadAttachments(t){return sn(this,void 0,void 0,function*(){this.attachmentUploadInProgressCounterSubject.next(this.attachmentUploadInProgressCounterSubject.getValue()+1);let i=yield this.channelService.uploadAttachments(t),r=this.attachmentUploadsSubject.getValue();i.forEach(s=>{var l,d,f,v;let x=r.find(O=>O.file===s.file);if(!x){s.url&&this.channelService.deleteAttachment(s);return}if(x.state=s.state,x.url=s.url,x.thumb_url=s.thumb_url,x.state==="error"){x.errorReason=s.errorReason,x.errorExtraInfo=s.errorExtraInfo;let O,A={name:x.file.name};switch(x.errorReason){case"file-extension":O="streamChat.Error uploading file, extension not supported",A.ext=(d=(l=x.errorExtraInfo)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.param;break;case"file-size":O="streamChat.Error uploading file, maximum file size exceeded",A.limit=(v=(f=x.errorExtraInfo)===null||f===void 0?void 0:f[0])===null||v===void 0?void 0:v.param;break;default:O="streamChat.Error uploading file"}this.notificationService.addTemporaryNotification(O,"error",void 0,A)}}),this.attachmentUploadInProgressCounterSubject.next(this.attachmentUploadInProgressCounterSubject.getValue()-1),this.attachmentUploadsSubject.next([...r])})}}return e.\u0275fac=function(t){return new(t||e)(xt(Or),xt(Lp))},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Pte=(()=>{class e{constructor(){this.shouldGenerateVideoThumbnail=!0}getImageAttachmentConfiguration(t,i,r){if(this.customImageAttachmentConfigurationHandler)return this.customImageAttachmentConfigurationHandler(t,i,r);let s=1e6,l=t.img_url||t.thumb_url||t.image_url||"",d;try{d=new URL(l)}catch{return{url:l,width:"",height:"",originalHeight:s,originalWidth:s}}let f=Number(d.searchParams.get("oh"))>1?Number(d.searchParams.get("oh")):s,v=Number(d.searchParams.get("ow"))>1?Number(d.searchParams.get("ow")):s,x=i==="gallery"||i==="single",O=this.getSizingRestrictions(d,r,x);return O&&(O.height*=2,O.width*=2,this.addResizingParamsToUrl(O,d)),{url:d.href,width:"",height:"",originalHeight:f,originalWidth:v}}getVideoAttachmentConfiguration(t,i){if(this.customVideoAttachmentConfigurationHandler)return this.customVideoAttachmentConfigurationHandler(t,i);let r,s=1e6,l=1e6;if(t.thumb_url&&this.shouldGenerateVideoThumbnail){let d;try{d=new URL(t.thumb_url),s=Number(d.searchParams.get("oh"))>1?Number(d.searchParams.get("oh")):s,l=Number(d.searchParams.get("ow"))>1?Number(d.searchParams.get("ow")):l;let v=this.getSizingRestrictions(d,i,!0);v&&(v.height*=2,v.width*=2,this.addResizingParamsToUrl(v,d)),r=d.href}catch{r=t.thumb_url}}return{url:t.asset_url||"",width:"",height:"",thumbUrl:r,originalHeight:s,originalWidth:l}}getGiphyAttachmentConfiguration(t){var i;if(this.customGiphyAttachmentConfigurationHandler)return this.customGiphyAttachmentConfigurationHandler(t);let r=(i=t.giphy)===null||i===void 0?void 0:i.fixed_height_downsampled;return{url:r?.url||t.image_url||t.thumb_url||"",height:r?.height?`${r?.height}px`:"300px",width:r?.width?`${r?.width}px`:""}}getScrapedImageAttachmentConfiguration(t){return this.customScrapedImageAttachmentConfigurationHandler?this.customScrapedImageAttachmentConfigurationHandler(t):{url:t.image_url||t.thumb_url||"",width:"",height:""}}addResizingParamsToUrl(t,i){i.searchParams.set("h",t.height.toString()),i.searchParams.set("w",t.width.toString())}getSizingRestrictions(t,i,r=!1){let s=t.searchParams,l=Number(s.get("oh"))||1,d=Number(s.get("ow"))||1,f=this.getCSSSizeRestriction(i),v;return(f.maxHeight||f.height)&&f.maxWidth?v=this.getSizeRestrictions(l,d,f.maxHeight||f.height,f.maxWidth):(v=void 0,r&&console.warn(`Invalid value set for height/max-height and/or max-width for HTML element, this can cause scrolling issues inside the message list, more info https://getstream.io/chat/docs/sdk/angular/components/AttachmentListComponent/#image-and-video-sizing, attachment URL: ${t.toString()}`)),v}getSizeRestrictions(t,i,r,s){return{height:Math.round(Math.max(r,s/i*t)),width:Math.round(Math.max(r,s/t*i))}}getCSSSizeRestriction(t){let i=getComputedStyle(t),r=this.getValueRepresentationOfCSSProperty(i.getPropertyValue("height")),s=this.getValueRepresentationOfCSSProperty(i.getPropertyValue("max-height")),l=this.getValueRepresentationOfCSSProperty(i.getPropertyValue("max-width"));return{height:r,maxHeight:s,maxWidth:l}}getValueRepresentationOfCSSProperty(t){return Number(t.replace("px",""))||void 0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),kte={streamChat:{"1 reply":"1 reply","Attach files":"Attach files",Cancel:"Cancel","Channel Missing":"Channel Missing",Close:"Close","Close emoji picker":"Close emoji picker","Commands matching":"Commands matching","Connection failure, reconnecting now...":"Connection failure, reconnecting now...",Delete:"Delete",Delivered:"Delivered","Edit Message":"Edit Message","Edit message request failed":"Edit message request failed","Emoji matching":"Emoji matching","Empty message...":"Empty message...","Error adding flag":"Error adding flag","Error connecting to chat, refresh the page to try again.":"Error connecting to chat, refresh the page to try again","Error deleting message":"Error deleting message","Error loading reactions":"Error loading reactions","Error muting a user ...":"Error muting a user ...","Error pinning message":"Error pinning message","Error removing message pin":"Error removing message pin","Error unmuting a user ...":"Error unmuting a user ...","Error uploading file":'Error uploading file "{{ name }}"',"Error uploading file, maximum file size exceeded":'Error uploading "{{ name }}", maximum file size {{ limit }} exceeded',"Error uploading file, extension not supported":'Error uploading "{{ name }}", type {{ ext }} not supported',"Error deleting attachment":"Error deleting attachment","Error \xB7 Unsent":"Message couldn't be sent","Error: {{ errorMessage }}":"Error: {{ errorMessage }}",Flag:"Flag","Message Failed":"Message Failed","Message Failed \xB7 Unauthorized":"Unauthorized to send message","Message Failed \xB7 Click to try again":"Message couldn't be sent, click to try again","Message deleted":"Message deleted","Message has been successfully flagged":"Message has been successfully flagged","Message pinned":"Message pinned","Message unpinned":"Message unpinned",Mute:"Mute",New:"New","New Messages!":"New Messages!","No results found":"No results found","Nothing yet...":"Nothing yet...","Only visible to you":"Only visible to you","Open emoji picker":"Open emoji picker","People matching":"People matching","Pick your emoji":"Pick your emoji",Pin:"Pin","Pinned by":"Pinned by",Reply:"Reply","Reply to Message":"Reply to Message",Search:"Search","Searching...":"Searching...",Send:"Send","Send message request failed":"Send message request failed","Sending...":"Sending...","Slow Mode ON":"Slow Mode ON","Start of a new thread":"Start of a new thread","This message was deleted...":"This message was deleted...",Thread:"Thread reply","Type your message":"Type your message",Unmute:"Unmute",Unpin:"Unpin","Wait until all attachments have uploaded":"Wait until all attachments have uploaded","You have no channels currently":"You have no channels currently","You've reached the maximum number of files":"You've reached the maximum number of files",live:"live","this content could not be displayed":"this content could not be displayed","{{ commaSeparatedUsers }} and {{ moreCount }} more":"{{ commaSeparatedUsers }} and {{ moreCount }} more","{{ commaSeparatedUsers }}, and {{ lastUser }}":"{{ commaSeparatedUsers }}, and {{ lastUser }}","{{ firstUser }} and {{ secondUser }}":"{{ firstUser }} and {{ secondUser }}","{{ imageCount }} more":"{{ imageCount }} more","{{ memberCount }} members":"{{ memberCount }} members","{{ replyCount }} replies":"{{ replyCount }} replies","{{ user }} has been muted":"{{ user }} has been muted","{{ user }} has been unmuted":"{{ user }} has been unmuted","{{ watcherCount }} online":"{{ watcherCount }} online","\u{1F3D9} Attachment...":"\u{1F3D9} Attachment...","Connection error":"Connection error","Load more":"Load more",failed:"failed",retry:"retry",test:"success","Sending links is not allowed in this conversation":"Sending links is not allowed in this conversation","You can't send messages in this channel":"You can't send messages in this channel","You can't send thread replies in this channel":"You can't send thread replies in this channel","Message not found":"Message not found","No chats here yet\u2026":"No chats here yet\u2026","user is typing":"{{ user }} is typing","users are typing":"{{ users }} are typing","Error loading channels":"Error loading channels","See original (automatically translated)":"See original (automatically translated)","See translation":"See translation","Mark as unread":"Mark as unread","Error marking message as unread":"Error marking message as unread","Error, only the first {{count}} message can be marked as unread":"Error, only the first {{count}} message can be marked as unread","Unread messages":"Unread messages","{{count}} unread messages":"{{count}} unread messages","{{count}} unread message":"{{count}} unread message","This message did not meet our content guidelines":"This message did not meet our content guidelines","Send Anyway":"Send Anyway",Edited:"Edited","Error playing audio":"Error playing audio"}},C3=(()=>{class e{constructor(t){this.translteService=t}setTranslation(t="en",i){this.translteService.defaultLang||(this.translteService.defaultLang=t),this.translteService.setTranslation(t,{streamChat:Object.assign(Object.assign({},kte.streamChat),i)},!0)}}return e.\u0275fac=function(t){return new(t||e)(xt(Op))},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ate=(()=>{class e{constructor(t,i,r){this.chatClientService=t,this.ngZone=i,this.cdRef=r,this.size=32,this.showOnlineIndicator=!0,this.initialsType="first-letter-of-first-word",this.isError=!1,this.isOnline=!1,this.initials="",this.isViewInited=!1,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.chatClientService.user$.subscribe(t=>{t?.id!==this.userId&&(this.userId=t?.id,(this.type||this.channel||this.name)&&(this.setInitials(),this.setFallbackChannelImage(),this.updateIsOnlineSubscription()),this.isViewInited&&this.cdRef.detectChanges())}))}ngOnChanges(t){t.channel&&this.updateIsOnlineSubscription(),(t.type||t.name||t.channel)&&this.setInitials(),(t.type||t.channel)&&this.setFallbackChannelImage()}setFallbackChannelImage(){if(this.type!=="channel")this.fallbackChannelImage=void 0;else{let t=this.getOtherMemberIfOneToOneChannel();t?this.fallbackChannelImage=t.image:this.fallbackChannelImage=void 0}}setInitials(){var t,i,r,s,l;let d="";if(this.type==="user")d=((t=this.name)===null||t===void 0?void 0:t.toString())||"";else if(this.type==="channel")if(!((r=(i=this.channel)===null||i===void 0?void 0:i.data)===null||r===void 0)&&r.name)d=(l=(s=this.channel)===null||s===void 0?void 0:s.data)===null||l===void 0?void 0:l.name;else{let x=this.getOtherMemberIfOneToOneChannel();x?d=x.name||x.id||"":d="#"}let f=d.split(" "),v;this.initialsType==="first-letter-of-each-word"?v=f.map(x=>x.charAt(0)||"").join(""):v=f[0].charAt(0)||"",this.initials=v}updateIsOnlineSubscription(){var t,i;if(this.channel){let r=this.getOtherMemberIfOneToOneChannel();r?(this.isOnline=r.online||!1,this.isOnlineSubscription=this.chatClientService.events$.pipe(ci(s=>s.eventType==="user.presence.changed")).subscribe(s=>{var l;((l=s.event.user)===null||l===void 0?void 0:l.id)===r.id&&this.ngZone.run(()=>{var d;this.isOnline=((d=s.event.user)===null||d===void 0?void 0:d.online)||!1})})):(this.isOnline=!1,(t=this.isOnlineSubscription)===null||t===void 0||t.unsubscribe())}else this.isOnline=!1,(i=this.isOnlineSubscription)===null||i===void 0||i.unsubscribe()}ngAfterViewInit(){this.isViewInited=!0}getOtherMemberIfOneToOneChannel(){var t,i;let r=Object.values(((i=(t=this.channel)===null||t===void 0?void 0:t.state)===null||i===void 0?void 0:i.members)||{}).filter(s=>s.user_id!==this.userId);if(r.length===1)return r[0].user}}return e.\u0275fac=function(t){return new(t||e)(Ce(Wa),Ce(On),Ce(pi))},e.\u0275cmp=Wt({type:e,selectors:[["stream-avatar"]],inputs:{name:"name",imageUrl:"imageUrl",size:"size",location:"location",channel:"channel",user:"user",type:"type",showOnlineIndicator:"showOnlineIndicator",initialsType:"initialsType"},features:[ni],decls:5,vars:14,consts:[["fallback",""],[3,"title","ngStyle"],["class","str-chat__avatar-image str-chat__avatar-image","data-testid","avatar-img","fetchpriority","high",3,"src","alt","ngStyle","error",4,"ngIf","ngIfElse"],["data-testid","online-indicator","class","str-chat__avatar--online-indicator",4,"ngIf"],["data-testid","avatar-img","fetchpriority","high",1,"str-chat__avatar-image","str-chat__avatar-image",3,"error","src","alt","ngStyle"],["data-testid","fallback-img",1,"str-chat__avatar-fallback"],["data-testid","online-indicator",1,"str-chat__avatar--online-indicator"]],template:function(t,i){if(t&1&&(K(0,"div",1),de(1,xZ,1,7,"img",2)(2,MZ,2,1,"ng-template",null,0,mt)(4,DZ,1,0,"div",3),Q()),t&2){let r=Xe(3);ha("str-chat__avatar str-chat__avatar--circle stream-chat__avatar--",i.location,""),Oi("title",i.name),H("ngStyle",hx(8,wZ,"calc(var(--str-chat__spacing-px, 1px) * "+i.size+")",i.initialsType==="first-letter-of-first-word"?"calc(var(--str-chat__spacing-px, 1px) * "+i.size/2+")":"calc(var(--str-chat__spacing-px, 1px) * "+i.size/3+")","calc(var(--str-chat__spacing-px, 1px) * "+i.size+")","calc(var(--str-chat__spacing-px, 1px) * "+i.size+")","calc(var(--str-chat__spacing-px, 1px) * "+i.size+")")),V(),H("ngIf",(i.imageUrl||i.fallbackChannelImage)&&!i.isError)("ngIfElse",r),V(3),H("ngIf",i.isOnline&&i.showOnlineIndicator)}},dependencies:[Ec,Zi]}),e})(),Cr=(()=>{class e{constructor(){this.mentionAutocompleteItemTemplate$=new Ct(void 0),this.commandAutocompleteItemTemplate$=new Ct(void 0),this.channelPreviewTemplate$=new Ct(void 0),this.messageInputTemplate$=new Ct(void 0),this.mentionTemplate$=new Ct(void 0),this.emojiPickerTemplate$=new Ct(void 0),this.typingIndicatorTemplate$=new Ct(void 0),this.messageTemplate$=new Ct(void 0),this.channelActionsTemplate$=new Ct(void 0),this.attachmentListTemplate$=new Ct(void 0),this.attachmentPreviewListTemplate$=new Ct(void 0),this.avatarTemplate$=new Ct(void 0),this.iconTemplate$=new Ct(void 0),this.loadingIndicatorTemplate$=new Ct(void 0),this.messageActionsBoxTemplate$=new Ct(void 0),this.messageActionsBoxItemTemplate$=new Ct(void 0),this.messageReactionsTemplate$=new Ct(void 0),this.modalTemplate$=new Ct(void 0),this.notificationTemplate$=new Ct(void 0),this.threadHeaderTemplate$=new Ct(void 0),this.deliveredStatusTemplate$=new Ct(void 0),this.sendingStatusTemplate$=new Ct(void 0),this.readStatusTemplate$=new Ct(void 0),this.customMessageMetadataTemplate$=new Ct(void 0),this.channelHeaderInfoTemplate$=new Ct(void 0),this.customAttachmentUploadTemplate$=new Ct(void 0),this.imageAttachmentTemplate$=new Ct(void 0),this.voiceRecordingAttachmentTemplate$=new Ct(void 0),this.videoAttachmentTemplate$=new Ct(void 0),this.galleryAttachmentTemplate$=new Ct(void 0),this.fileAttachmentTemplate$=new Ct(void 0),this.cardAttachmentTemplate$=new Ct(void 0),this.attachmentActionsTemplate$=new Ct(void 0),this.systemMessageTemplate$=new Ct(void 0),this.dateSeparatorTemplate$=new Ct(void 0),this.newMessagesIndicatorTemplate$=new Ct(void 0),this.newMessagesNotificationTemplate$=new Ct(void 0),this.emptyMainMessageListPlaceholder$=new Ct(void 0),this.emptyThreadMessageListPlaceholder$=new Ct(void 0),this.editMessageFormTemplate$=new Ct(void 0),this.messageBouncePromptTemplate$=new Ct(void 0),this.channelPreviewInfoTemplate$=new Ct(void 0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Np=(()=>{class e{constructor(t){this.customTemplatesService=t,this.size=32,this.initialsType="first-letter-of-first-word",this.showOnlineIndicator=!0,this.context={name:void 0,imageUrl:void 0,size:void 0,location:void 0,channel:void 0,user:void 0,type:void 0,initialsType:void 0,showOnlineIndicator:void 0}}ngOnChanges(){this.context={name:this.name,imageUrl:this.imageUrl,size:this.size,location:this.location,type:this.type,user:this.user,channel:this.channel,initialsType:this.initialsType,showOnlineIndicator:this.showOnlineIndicator}}}return e.\u0275fac=function(t){return new(t||e)(Ce(Cr))},e.\u0275cmp=Wt({type:e,selectors:[["stream-avatar-placeholder"]],inputs:{name:"name",imageUrl:"imageUrl",size:"size",location:"location",channel:"channel",user:"user",type:"type",initialsType:"initialsType",showOnlineIndicator:"showOnlineIndicator"},features:[ni],decls:4,vars:4,consts:[["defaultAvatar",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"name","imageUrl","size","type","channel","user","location","initialsType","showOnlineIndicator"]],template:function(t,i){if(t&1&&(de(0,TZ,1,9,"ng-template",null,0,mt)(2,SZ,1,0,"ng-container",1),tt(3,"async")),t&2){let r=Xe(1);V(2),H("ngTemplateOutlet",ht(3,2,i.customTemplatesService.avatarTemplate$)||r)("ngTemplateOutletContext",i.context)}},dependencies:[Ate,Ii,Fr],encapsulation:2}),e})(),Mb=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Wt({type:e,selectors:[["stream-icon"]],inputs:{icon:"icon",size:"size"},decls:26,vars:26,consts:[["data-testid","action-icon","height","4","viewBox","0 0 11 4","width","11","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","delivered-icon","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["height","12","viewBox","0 0 12 12","width","12","xmlns","http://www.w3.org/2000/svg","data-testid","reaction-icon",4,"ngIf"],["data-testid","connection-error","width","78px","height","78px","viewBox","0 0 78 78","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",4,"ngIf"],["data-testid","send","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","file-upload","height","14","width","14","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","retry","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","close","width","28","height","28","viewBox","0 0 28 28","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","file","className","rfu-file-icon--small fa-file-fallback","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 384 512",4,"ngIf"],["data-testid","unspecified-filetype","width","34","height","40","viewBox","0 0 34 40","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","reply","height","15","width","18","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","close-no-outline","viewBox","0 0 24 24","width","24","height","24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["height","10","width","14","xmlns","http://www.w3.org/2000/svg","data-testid","reply-in-thread",4,"ngIf"],["data-testid","arrow-left","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","arrow-right","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","menu","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","arrow-up","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","arrow-down","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","chat-bubble","viewBox","0 0 136 136","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","attach","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","download","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","error","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["fill","none","viewBox","0 0 12 14","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["class","rfu-file-audio","fill","none","viewBox","0 0 34 40","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","action-icon","height","4","viewBox","0 0 11 4","width","11","xmlns","http://www.w3.org/2000/svg"],["d","M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z","fillRule","nonzero"],["data-testid","delivered-icon","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M8.9999 16.2L4.7999 12L3.3999 13.4L8.9999 19L20.9999 6.99998L19.5999 5.59998L8.9999 16.2Z","fill","black"],["height","12","viewBox","0 0 12 12","width","12","xmlns","http://www.w3.org/2000/svg","data-testid","reaction-icon"],["clipRule","evenodd","fillRule","evenodd"],["d","M6 1.2C3.3 1.2 1.2 3.3 1.2 6c0 2.7 2.1 4.8 4.8 4.8 2.7 0 4.8-2.1 4.8-4.8 0-2.7-2.1-4.8-4.8-4.8zM0 6c0-3.3 2.7-6 6-6s6 2.7 6 6-2.7 6-6 6-6-2.7-6-6z"],["d","M5.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM8.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM3.3 6.7c.3-.2.6-.1.8.1.3.4.8.9 1.5 1 .6.2 1.4.1 2.4-1 .2-.2.6-.3.8 0 .2.2.3.6 0 .8-1.1 1.3-2.4 1.7-3.5 1.5-1-.2-1.8-.9-2.2-1.5-.2-.3-.1-.7.2-.9z"],["data-testid","connection-error","width","78px","height","78px","viewBox","0 0 78 78","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["id","Interactions","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["id","Connection-Error-_-Connectivity","transform","translate(-270.000000, -30.000000)","fill","#CF1F25"],["id","109-network-connection","transform","translate(270.000000, 30.000000)"],["d","M66.4609744,11.414231 C81.6225232,26.5757798 81.6225232,51.157545 66.4609744,66.3188467 C51.2994256,81.4803954 26.7176604,81.4803954 11.5563587,66.3188467 C-3.60519004,51.1572979 -3.60519004,26.5755327 11.5563587,11.414231 C26.7179075,-3.74731776 51.2996727,-3.74731776 66.4609744,11.414231 Z M54.7853215,45.8823776 L54.7853215,40.5882574 C54.7853215,39.613638 53.9952341,38.8235506 53.0206147,38.8235506 L44.9576695,38.8235506 L41.428256,42.3529641 L51.255555,42.3529641 L51.255555,45.8823776 L54.7853215,45.8823776 Z M40.6659027,43.1153174 L37.8988425,45.8823776 L40.6659027,45.8823776 L40.6659027,43.1153174 Z M51.1764962,56.4702653 L58.2353232,56.4702653 C59.2099355,56.4702653 60.00003,55.6801708 60.00003,54.7055585 L60.00003,51.176145 C60.00003,50.2015327 59.2099355,49.4114382 58.2353232,49.4114382 L51.1764962,49.4114382 C50.2018839,49.4114382 49.4117894,50.2015327 49.4117894,51.176145 L49.4117894,54.7055585 C49.4117894,55.6801708 50.2018839,56.4702653 51.1764962,56.4702653 Z M35.2941353,56.4702653 L42.3529624,56.4702653 C43.3275746,56.4702653 44.1176691,55.6801708 44.1176691,54.7055585 L44.1176691,51.176145 C44.1176691,50.2015327 43.3275746,49.4114382 42.3529624,49.4114382 L35.2941353,49.4114382 C34.319523,49.4114382 33.5294285,50.2015327 33.5294285,51.176145 L33.5294285,54.7055585 C33.5294285,55.6801708 34.319523,56.4702653 35.2941353,56.4702653 Z M56.6964989,19.0874231 C56.007381,18.3985134 54.8903216,18.3985134 54.2012036,19.087423 L45.882376,27.4062507 L45.882376,19.4117761 C45.882376,18.4371568 45.0922885,17.6470693 44.1176692,17.6470693 L33.5294286,17.6470693 C32.5548092,17.6470694 31.7647218,18.4371568 31.7647218,19.4117761 L31.7647218,30.0000167 C31.7647219,30.9746363 32.5548092,31.7647237 33.5294285,31.7647237 L41.5239031,31.7647237 L34.4650761,38.8235508 L24.7058947,38.8235508 C23.7312753,38.8235508 22.9411879,39.6136382 22.9411879,40.5882575 L22.9411879,45.8823778 L26.4706014,45.8823778 L26.4706014,42.3529643 L30.9356624,42.3529643 L23.8768354,49.4117914 L19.4117743,49.4117914 C18.4371549,49.4117914 17.6470675,50.2018788 17.6470675,51.1764981 L17.6470675,54.7059117 C17.6504049,54.9674302 17.7129076,55.2248042 17.8298886,55.4587302 L16.4456526,56.8429662 C15.7446193,57.5200453 15.7252005,58.6372282 16.4022825,59.3382615 C17.0793616,60.0392948 18.1965445,60.0587136 18.8975778,59.3816316 C18.9122847,59.3674273 18.9267436,59.3529684 18.940948,59.3382615 L56.6964963,21.5830662 C57.3856425,20.8939094 57.3856425,19.7765747 56.6964963,19.0874179 Z","id","Combined-Shape"],["data-testid","send","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["translate",""],["d","M4.00952 22L24 12L4.00952 2L4 9.77778L18.2857 12L4 14.2222L4.00952 22Z","fill","black"],["data-testid","file-upload","height","14","width","14","xmlns","http://www.w3.org/2000/svg"],["d","M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z","fillRule","nonzero"],["data-testid","retry","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M17.6449 6.35C16.1949 4.9 14.2049 4 11.9949 4C7.57488 4 4.00488 7.58 4.00488 12C4.00488 16.42 7.57488 20 11.9949 20C15.7249 20 18.8349 17.45 19.7249 14H17.6449C16.8249 16.33 14.6049 18 11.9949 18C8.68488 18 5.99488 15.31 5.99488 12C5.99488 8.69 8.68488 6 11.9949 6C13.6549 6 15.1349 6.69 16.2149 7.78L12.9949 11H19.9949V4L17.6449 6.35Z","fill","black"],["data-testid","close","width","28","height","28","viewBox","0 0 28 28","fill","none","xmlns","http://www.w3.org/2000/svg"],["width","28","height","28","rx","14","fill","#72767E"],["cx","14","cy","14","r","12","fill","#72767E"],["fill-rule","evenodd","clip-rule","evenodd","d","M28 14C28 21.732 21.732 28 14 28C6.26801 28 0 21.732 0 14C0 6.26801 6.26801 0 14 0C21.732 0 28 6.26801 28 14ZM26 14C26 20.6274 20.6274 26 14 26C7.37258 26 2 20.6274 2 14C2 7.37258 7.37258 2 14 2C20.6274 2 26 7.37258 26 14ZM19.59 7L21 8.41L15.41 14L21 19.59L19.59 21L14 15.41L8.41 21L7 19.59L12.59 14L7 8.41L8.41 7L14 12.59L19.59 7Z","fill","white"],["data-testid","file","className","rfu-file-icon--small fa-file-fallback","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 384 512"],["d","M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z","fill","#414D54"],["data-testid","unspecified-filetype","width","34","height","40","viewBox","0 0 34 40","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 3C0 1.34315 1.34315 0 3 0H23L34 11V37C34 38.6569 32.6569 40 31 40H3C1.34315 40 0 38.6569 0 37V3Z","fill","url(#paint0_linear)"],["d","M34 11L26 11C24.3431 11 23 9.65685 23 8V0L34 11Z","fill","#DBDBDB"],["fill-rule","evenodd","clip-rule","evenodd","d","M8 13H23V15H8V13Z","fill","#CFCFCF"],["fill-rule","evenodd","clip-rule","evenodd","d","M8 17H18V19H8V17Z","fill","#CFCFCF"],["fill-rule","evenodd","clip-rule","evenodd","d","M8 21H23V23H8V21Z","fill","#CFCFCF"],["id","paint0_linear","x1","0","y1","0","x2","0","y2","40","gradientUnits","userSpaceOnUse"],["stop-color","white"],["offset","1","stop-color","#DBDBDB"],["data-testid","reply","height","15","width","18","xmlns","http://www.w3.org/2000/svg"],["d","M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z","fillRule","nonzero"],["data-testid","close-no-outline","viewBox","0 0 24 24","width","24","height","24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z","fill","black"],["height","10","width","14","xmlns","http://www.w3.org/2000/svg","data-testid","reply-in-thread"],["d","M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z","fillRule","evenodd"],["data-testid","arrow-left","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M15.7049 7.41L14.2949 6L8.29492 12L14.2949 18L15.7049 16.59L11.1249 12L15.7049 7.41Z","fill","var(--black)"],["data-testid","arrow-right","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z","fill","var(--black)"],["data-testid","menu","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M3 8V6H21V8H3ZM3 13H21V11H3V13ZM3 18H21V16H3V18Z","fill","black"],["data-testid","arrow-up","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M16.59 15.7051L12 11.1251L7.41 15.7051L6 14.2951L12 8.29508L18 14.2951L16.59 15.7051Z","fill","var(--primary-color)"],["data-testid","arrow-down","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.41 8.29504L12 12.875L16.59 8.29504L18 9.70504L12 15.705L6 9.70504L7.41 8.29504Z","fill","var(--primary-color)"],["data-testid","chat-bubble","viewBox","0 0 136 136","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M106 24.5H30C24.775 24.5 20.5 28.775 20.5 34V119.5L39.5 100.5H106C111.225 100.5 115.5 96.225 115.5 91V34C115.5 28.775 111.225 24.5 106 24.5ZM106 91H39.5L30 100.5V34H106V91Z","fill","#B4B7BB"],["data-testid","attach","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_10878_5)"],["d","M12.9997 6.99993L10.9997 6.99993L10.9997 10.9999L6.99972 10.9999L6.99972 12.9999L10.9997 12.9999L10.9997 16.9999L12.9997 16.9999L12.9997 12.9999L16.9997 12.9999L16.9997 10.9999L12.9997 10.9999L12.9997 6.99993ZM11.9997 1.99992C6.47972 1.99992 1.99972 6.47993 1.99972 11.9999C1.99972 17.5199 6.47972 21.9999 11.9997 21.9999C17.5197 21.9999 21.9997 17.5199 21.9997 11.9999C21.9997 6.47993 17.5197 1.99992 11.9997 1.99992ZM11.9997 19.9999C7.58972 19.9999 3.99972 16.4099 3.99972 11.9999C3.99972 7.58993 7.58972 3.99993 11.9997 3.99993C16.4097 3.99993 19.9997 7.58993 19.9997 11.9999C19.9997 16.4099 16.4097 19.9999 11.9997 19.9999Z","fill","black"],["id","clip0_10878_5"],["width","24","height","24","fill","white"],["data-testid","download","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19.35 10.04C18.67 6.59 15.64 4 12 4C9.11 4 6.6 5.64 5.35 8.04C2.34 8.36 0 10.91 0 14C0 17.31 2.69 20 6 20H19C21.76 20 24 17.76 24 15C24 12.36 21.95 10.22 19.35 10.04ZM19 18H6C3.79 18 2 16.21 2 14C2 11.95 3.53 10.24 5.56 10.03L6.63 9.92L7.13 8.97C8.08 7.14 9.94 6 12 6C14.62 6 16.88 7.86 17.39 10.43L17.69 11.93L19.22 12.04C20.78 12.14 22 13.45 22 15C22 16.65 20.65 18 19 18ZM13.45 10H10.55V13H8L12 17L16 13H13.45V10Z","fill","black"],["data-testid","error","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","background","d","M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2Z","fill","var(--str-chat__message-error-message-color)"],["d","M13 17H11V15H13V17ZM13 13H11V7H13V13Z","fill","white"],["fill","none","viewBox","0 0 12 14","xmlns","http://www.w3.org/2000/svg"],["d","M0.5 0V14L11.5 7L0.5 0Z","fill","#080707"],["d","M0 14H4V0H0V14ZM8 0V14H12V0H8Z","fill","#080707"],["fill","none","viewBox","0 0 34 40","xmlns","http://www.w3.org/2000/svg",1,"rfu-file-audio"],["clip-rule","evenodd","d","M17.7168 33.172C18.2348 33.172 18.4238 33.655 18.4238 34.18C18.4238 34.642 18.2978 35.195 17.7168 35.195C17.1708 35.195 16.9888 34.642 16.9888 34.145C16.9888 33.683 17.1708 33.172 17.7168 33.172ZM19.5718 31.002H18.3818V32.7589H18.3678C18.1228 32.43 17.7798 32.262 17.3318 32.262C16.3028 32.262 15.7988 33.158 15.7988 34.103C15.7988 35.125 16.2818 36.1049 17.4228 36.1049C17.8428 36.1049 18.1928 35.923 18.4238 35.58H18.4378V36H19.5718V31.002ZM12.7095 34.1872C12.7095 33.7252 12.8775 33.1722 13.4305 33.1722C13.9835 33.1722 14.1585 33.7252 14.1585 34.1872C14.1585 34.6492 13.9835 35.1952 13.4305 35.1952C12.8775 35.1952 12.7095 34.6492 12.7095 34.1872ZM11.5195 34.1872C11.5195 35.2792 12.3035 36.1052 13.4305 36.1052C14.5575 36.1052 15.3485 35.2792 15.3485 34.1872C15.3485 33.0952 14.5575 32.2622 13.4305 32.2622C12.3035 32.2622 11.5195 33.0952 11.5195 34.1872ZM21.839 32.3671H22.574V33.1371H21.839V34.7891C21.839 35.0761 22.007 35.1391 22.266 35.1391C22.3142 35.1391 22.364 35.1357 22.4147 35.1323C22.4672 35.1287 22.5206 35.1251 22.574 35.1251V36.0001C22.481 36.0031 22.388 36.0099 22.295 36.0168C22.171 36.0259 22.047 36.0351 21.923 36.0351C20.908 36.0351 20.649 35.7411 20.649 34.7541V33.1371H20.047V32.3671H20.649V31.2681H21.839V32.3671Z","fill","white","fill-rule","evenodd"],["d","M0 28H34V37C34 38.6569 32.6569 40 31 40H3C1.34315 40 0 38.6569 0 37V28Z","fill","#2727B0"],["d","M0 3C0 1.34315 1.34315 0 3 0H23L34 11V28H0V3Z","fill","#F5F5F5"],["clip-rule","evenodd","d","M8.87912 21.941H12.298L16.9521 24.7493C17.0307 24.8138 17.1293 24.849 17.2311 24.849C17.4738 24.8488 17.6705 24.6519 17.6703 24.4092V12.4399C17.6704 12.3381 17.6352 12.2396 17.5707 12.1609C17.4168 11.9732 17.1398 11.9457 16.9521 12.0996L12.298 14.908H8.87912C8.3936 14.908 8 15.3016 8 15.7871V21.0619C8 21.5474 8.3936 21.941 8.87912 21.941ZM12.9258 16.6664L15.9122 15.2224V21.6268L12.9258 20.1829H9.7583V16.6664H12.9258ZM19.8511 16.3517C19.474 16.4092 19.2397 16.6637 19.3283 16.9191L19.3262 16.92C19.5295 17.4995 19.6305 18.098 19.6284 18.6953C19.6305 19.2975 19.5237 19.9014 19.3196 20.4909C19.229 20.7462 19.4682 20.9996 19.8474 21.06C19.9008 21.0683 19.9542 21.072 20.0076 21.072C20.3259 21.072 20.6156 20.9234 20.6922 20.7057C20.9194 20.0451 21.0337 19.37 21.0374 18.6953C21.0349 18.0251 20.9211 17.3575 20.6955 16.7035C20.6053 16.4477 20.229 16.2908 19.8511 16.3517ZM22.1605 14.6028C22.5252 14.5163 22.9259 14.6454 23.055 14.8938C23.6891 16.1157 24 17.4042 24 18.6923C24.0004 19.9895 23.6796 21.2839 23.0521 22.5153C22.9503 22.7123 22.6763 22.8344 22.3828 22.8344C22.3071 22.8344 22.2301 22.8261 22.1543 22.8092C21.7863 22.7251 21.5914 22.4536 21.7185 22.2077C22.2988 21.0761 22.5922 19.8836 22.5931 18.6919C22.5931 17.5056 22.3054 16.3222 21.7276 15.2025C21.6001 14.9563 21.795 14.686 22.1605 14.6028Z","fill","#2727B0","fill-rule","evenodd"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M15.7071 7.29289C16.0976 7.68342 16.0976 8.31658 15.7071 8.70711L11.4142 13L13 14.5858L20.2929 7.29289C20.6834 6.90237 21.3166 6.90237 21.7071 7.29289C22.0976 7.68342 22.0976 8.31658 21.7071 8.70711L13.7071 16.7071C13.3166 17.0976 12.6834 17.0976 12.2929 16.7071L10 14.4142L7.70711 16.7071C7.31658 17.0976 6.68342 17.0976 6.29289 16.7071L6.29206 16.7063L2.29289 12.7071C1.90237 12.3166 1.90237 11.6834 2.29289 11.2929C2.68342 10.9024 3.31658 10.9024 3.70711 11.2929L7 14.5858L9.29214 12.2936L9.29289 12.2929L9.29364 12.2921L14.2929 7.29289C14.6834 6.90237 15.3166 6.90237 15.7071 7.29289Z","fill","black"]],template:function(t,i){t&1&&de(0,OZ,2,0,"svg",0)(1,IZ,2,0,"svg",1)(2,EZ,4,0,"svg",2)(3,PZ,9,0,"svg",3)(4,kZ,4,0,"svg",4)(5,AZ,4,0,"svg",5)(6,RZ,2,0,"svg",6)(7,FZ,4,0,"svg",7)(8,LZ,2,2,"svg",8)(9,NZ,10,0,"svg",9)(10,BZ,2,0,"svg",10)(11,jZ,2,0,"svg",11)(12,VZ,2,0,"svg",12)(13,zZ,2,0,"svg",13)(14,UZ,2,0,"svg",14)(15,$Z,2,0,"svg",15)(16,HZ,2,0,"svg",16)(17,qZ,2,0,"svg",17)(18,GZ,2,0,"svg",18)(19,WZ,6,0,"svg",19)(20,ZZ,2,0,"svg",20)(21,YZ,3,2,"svg",21)(22,KZ,2,0,"svg",22)(23,QZ,2,0,"svg",22)(24,JZ,6,2,"svg",23)(25,XZ,2,0,"svg",24),t&2&&(H("ngIf",i.icon==="action-icon"),V(),H("ngIf",i.icon==="delivered-icon"),V(),H("ngIf",i.icon==="reaction-icon"),V(),H("ngIf",i.icon==="connection-error"),V(),H("ngIf",i.icon==="send"),V(),H("ngIf",i.icon==="file-upload"),V(),H("ngIf",i.icon==="retry"),V(),H("ngIf",i.icon==="close"),V(),H("ngIf",i.icon==="file"),V(),H("ngIf",i.icon==="unspecified-filetype"),V(),H("ngIf",i.icon==="reply"),V(),H("ngIf",i.icon==="close-no-outline"),V(),H("ngIf",i.icon==="reply-in-thread"),V(),H("ngIf",i.icon==="arrow-left"),V(),H("ngIf",i.icon==="arrow-right"),V(),H("ngIf",i.icon==="menu"),V(),H("ngIf",i.icon==="arrow-up"),V(),H("ngIf",i.icon==="arrow-down"),V(),H("ngIf",i.icon==="chat-bubble"),V(),H("ngIf",i.icon==="attach"),V(),H("ngIf",i.icon==="download"),V(),H("ngIf",i.icon==="error"),V(),H("ngIf",i.icon==="play"),V(),H("ngIf",i.icon==="pause"),V(),H("ngIf",i.icon==="audio-file"),V(),H("ngIf",i.icon==="read-icon"))},dependencies:[Zi,Ip],encapsulation:2}),e})(),xo=(()=>{class e{constructor(t){this.customTemplatesService=t,this.iconContext={icon:void 0,size:void 0}}ngOnChanges(){this.iconContext={icon:this.icon,size:this.size}}}return e.\u0275fac=function(t){return new(t||e)(Ce(Cr))},e.\u0275cmp=Wt({type:e,selectors:[["stream-icon-placeholder"]],inputs:{icon:"icon",size:"size"},features:[ni],decls:4,vars:4,consts:[["defaultIcon",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"icon","size"]],template:function(t,i){if(t&1&&(de(0,eY,1,2,"ng-template",null,0,mt)(2,tY,1,0,"ng-container",1),tt(3,"async")),t&2){let r=Xe(1);V(2),H("ngTemplateOutlet",ht(3,2,i.customTemplatesService.iconTemplate$)||r)("ngTemplateOutletContext",i.iconContext)}},dependencies:[Mb,Ii,Fr],encapsulation:2}),e})(),RT=(()=>{class e{constructor(){this.size=15,this.color="var(--str-chat__loading-indicator-color, var(--str-chat__primary-color, '#006CFF'))",this.linearGradientId=xg()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Wt({type:e,selectors:[["stream-loading-indicator"]],inputs:{size:"size",color:"color"},decls:7,vars:8,consts:[[1,"str-chat__loading-indicator"],["viewBox","0 0 30 30","data-testid","loading-indicator","xmlns","http://www.w3.org/2000/svg"],["x1","50%","x2","50%","y1","0%","y2","100%",3,"id"],["offset","0%","stop-color","#FFF","stop-opacity","0"],["data-testid","stop-color","offset","100%","stop-opacity","1",3,"ngStyle"],["d","M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z","fillRule","evenodd"]],template:function(t,i){t&1&&(K(0,"div",0),li(),K(1,"svg",1)(2,"defs")(3,"linearGradient",2),Me(4,"stop",3)(5,"stop",4),Q()(),Me(6,"path",5),Q()()),t&2&&(V(),_s("height",i.size)("width",i.size),V(2),Oi("id",i.linearGradientId),V(2),H("ngStyle",wi(6,nY,i.color)),_s("stop-color",i.color),V(),_s("fill","url(#"+i.linearGradientId+")"))},dependencies:[Ec],encapsulation:2}),e})(),FT=(()=>{class e{constructor(t){this.customTemplatesService=t,this.size=15,this.color="var(--str-chat__loading-indicator-color, var(--str-chat__primary-color, '#006CFF'))"}getLoadingIndicatorContext(){return{size:this.size,color:this.color}}}return e.\u0275fac=function(t){return new(t||e)(Ce(Cr))},e.\u0275cmp=Wt({type:e,selectors:[["stream-loading-indicator-placeholder"]],inputs:{size:"size",color:"color"},decls:4,vars:4,consts:[["defaultLoadingIndicator",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"size","color"]],template:function(t,i){if(t&1&&(de(0,iY,1,2,"ng-template",null,0,mt)(2,rY,1,0,"ng-container",1),tt(3,"async")),t&2){let r=Xe(1);V(2),H("ngTemplateOutlet",ht(3,2,i.customTemplatesService.loadingIndicatorTemplate$)||r)("ngTemplateOutletContext",i.getLoadingIndicatorContext())}},dependencies:[RT,Ii,Fr],encapsulation:2}),e})(),Rg=(()=>{class e{constructor(t,i,r){this.chatClientService=t,this.notificationService=i,this.channelService=r,this.defaultActions=[{actionName:"mark-unread",actionLabelOrTranslationKey:"streamChat.Mark as unread",actionHandler:s=>this.channelService.markMessageUnread(s.id),isVisible:(s,l,d)=>s.indexOf("read-events")!==-1&&!d.parent_id},{actionName:"quote",actionLabelOrTranslationKey:"streamChat.Reply",actionHandler:s=>this.channelService.selectMessageToQuote(s),isVisible:s=>s.indexOf("quote-message")!==-1},{actionName:"pin",actionLabelOrTranslationKey:s=>s.pinned?"streamChat.Unpin":"streamChat.Pin",actionHandler:s=>s.pinned?this.channelService.unpinMessage(s):this.channelService.pinMessage(s),isVisible:s=>s.indexOf("pin-message")!==-1},{actionName:"flag",actionLabelOrTranslationKey:"streamChat.Flag",actionHandler:s=>sn(this,void 0,void 0,function*(){try{yield this.chatClientService.flagMessage(s.id),this.notificationService.addTemporaryNotification("streamChat.Message has been successfully flagged","success")}catch{this.notificationService.addTemporaryNotification("streamChat.Error adding flag")}}),isVisible:(s,l)=>s.indexOf("flag-message")!==-1&&!l},{actionName:"edit",actionLabelOrTranslationKey:"streamChat.Edit Message",actionHandler:s=>{this.messageToEdit$.next(s)},isVisible:(s,l)=>s.indexOf("update-own-message")!==-1&&l||s.indexOf("update-any-message")!==-1},{actionName:"delete",actionLabelOrTranslationKey:"streamChat.Delete",actionHandler:s=>sn(this,void 0,void 0,function*(){try{yield this.channelService.deleteMessage(s)}catch{this.notificationService.addTemporaryNotification("streamChat.Error deleting message")}}),isVisible:(s,l)=>(s.indexOf("delete")!==-1||s.indexOf("delete-own-message")!==-1)&&l||s.indexOf("delete-any")!==-1||s.indexOf("delete-any-message")!==-1}],this.messageToEdit$=new Ct(void 0),this.customActions$=new Ct([])}getAuthorizedMessageActionsCount(t,i){var r;let s=this.customActions$.getValue()||[],l=[...this.defaultActions,...s],d=(r=this.chatClientService.chatClient.user)===null||r===void 0?void 0:r.id,f=t.user_id===d;return l.filter(v=>v.isVisible(i,f,t)).length}}return e.\u0275fac=function(t){return new(t||e)(xt(Wa),xt(Lp),xt(Or))},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Rte=(()=>{class e{constructor(t,i,r){this.customTemplatesService=t,this.messageActionsService=i,this.cdRef=r,this.isOpen=!1,this.isMine=!1,this.enabledActions=[],this.customActions=[],this.displayedActionsCount=new Zt,this.isEditing=new Zt,this.visibleMessageActionItems=[],this.isEditModalOpen=!1,this.subscriptions=[],this.isViewInited=!1,this.messageActionItems=this.messageActionsService.defaultActions}ngOnInit(){this.subscriptions.push(this.messageActionsService.messageToEdit$.subscribe(t=>{var i;let r=!1;t&&t.id===((i=this.message)===null||i===void 0?void 0:i.id)&&(r=!0),r!==this.isEditModalOpen&&(this.isEditModalOpen=r,this.isEditing.emit(this.isEditModalOpen),this.isViewInited&&this.cdRef.detectChanges())}))}ngOnChanges(t){(t.isMine||t.enabledActions||t.message||t.customActions)&&this.setVisibleActions()}ngAfterViewInit(){this.isViewInited=!0}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}getActionLabel(t){return typeof t=="string"?t:t(this.message)}getMessageActionTemplateContext(t){return{actionHandler:t.actionHandler,isMine:this.isMine,actionName:t.actionName,message:this.message,actionLabelOrTranslationKey:t.actionLabelOrTranslationKey}}trackByActionName(t,i){return i.actionName}setVisibleActions(){this.visibleMessageActionItems=[...this.messageActionItems,...this.customActions].filter(t=>t.isVisible(this.enabledActions,this.isMine,this.message)),this.displayedActionsCount.emit(this.visibleMessageActionItems.length)}}return e.\u0275fac=function(t){return new(t||e)(Ce(Cr),Ce(Rg),Ce(pi))},e.\u0275cmp=Wt({type:e,selectors:[["stream-message-actions-box"]],inputs:{isOpen:"isOpen",isMine:"isMine",message:"message",enabledActions:"enabledActions",customActions:"customActions"},outputs:{displayedActionsCount:"displayedActionsCount",isEditing:"isEditing"},features:[ni],decls:6,vars:4,consts:[["actionBox",""],["defaultMessageActionItem",""],["data-testid","action-box",1,"str-chat__message-actions-box","str-chat__message-actions-box-angular"],[1,"str-chat__message-actions-list"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__message-actions-list-item-button",3,"click"],[1,"str-chat__message-actions-list-item"]],template:function(t,i){t&1&&(K(0,"div",2,0)(2,"ul",3),de(3,aY,3,4,"ng-container",4),Q()(),de(4,oY,4,4,"ng-template",null,1,mt)),t&2&&(Rn("str-chat__message-actions-box--open",!0),V(3),H("ngForOf",i.visibleMessageActionItems)("ngForTrackBy",i.trackByActionName))},dependencies:[ys,Ii,Fr,Xs],encapsulation:2}),e})(),Db=(()=>{class e{constructor(){this.isOpen=!1,this.isOpenChange=new Zt,this.watchForEscPress=t=>{t.key==="Escape"&&this.close()},this.stopWatchForEscPress=()=>{window.removeEventListener("keyup",this.watchForEscPress)},this.watchForOutsideClicks=t=>{var i;!((i=this.innerContainer)===null||i===void 0)&&i.nativeElement.contains(t.target)||this.close()}}ngOnChanges(t){t.isOpen&&(this.isOpen?(window.addEventListener("keyup",this.watchForEscPress),setTimeout(()=>window.addEventListener("click",this.watchForOutsideClicks),0)):(this.stopWatchForOutsideClicks(),this.stopWatchForEscPress()))}close(){this.isOpen=!1,this.isOpenChange.emit(!1),this.stopWatchForOutsideClicks(),this.stopWatchForEscPress()}stopWatchForOutsideClicks(){window.removeEventListener("click",this.watchForOutsideClicks)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Wt({type:e,selectors:[["stream-modal"]],viewQuery:function(t,i){if(t&1&&bi(cY,5),t&2){let r;ui(r=di())&&(i.innerContainer=r.first)}},inputs:{isOpen:"isOpen",content:"content"},outputs:{isOpenChange:"isOpenChange"},features:[ni],ngContentSelectors:Cb,decls:8,vars:5,consts:[["modalInner",""],["elseContent",""],["data-testid","modal"],["data-testid","close",1,"str-chat__modal__close-button",3,"click","keyup.enter"],["icon","close"],[1,"str-chat__modal__inner"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"]],template:function(t,i){if(t&1){let r=kt();mo(),K(0,"div",2)(1,"div",3),nt("click",function(){return Le(r),Ne(i.close())})("keyup.enter",function(){return Le(r),Ne(i.close())}),Me(2,"stream-icon-placeholder",4),Q(),K(3,"div",5,0),de(5,uY,2,1,"ng-container",6)(6,dY,1,0,"ng-template",null,1,mt),Q()()}if(t&2){let r=Xe(7);ha("str-chat__modal str-chat__modal--",i.isOpen?"open":"close",""),V(5),H("ngIf",i.content)("ngIfElse",r)}},dependencies:[xo,Zi,Ii],encapsulation:2}),e})(),x3=new Lt("textareaInjectionToken"),p3=(()=>{class e{constructor(t){this.viewContainerRef=t,this.value="",this.valueChange=new Zt,this.send=new Zt,this.userMentions=new Zt,this.subscriptions=[],this.unpropagatedChanges=[]}ngOnChanges(t){var i,r;if(this.unpropagatedChanges.push(t),!this.componentRef)return;t.componentRef&&(this.subscriptions.forEach(l=>l.unsubscribe()),this.componentRef&&(this.subscriptions.push(this.componentRef.instance.valueChange.subscribe(l=>this.valueChange.next(l))),this.subscriptions.push(this.componentRef.instance.send.subscribe(l=>this.send.next(l))),this.componentRef.instance.userMentions&&this.subscriptions.push(this.componentRef.instance.userMentions.subscribe(l=>this.userMentions.next(l))),this.componentRef.instance.areMentionsEnabled=this.areMentionsEnabled,this.componentRef.instance.mentionScope=this.mentionScope,this.componentRef.instance.value=this.value,this.componentRef.instance.placeholder=this.placeholder,this.componentRef.instance.inputMode=this.inputMode,this.componentRef.instance.autoFocus=this.autoFocus)),t.areMentionsEnabled&&(this.componentRef.instance.areMentionsEnabled=this.areMentionsEnabled),t.mentionScope&&(this.componentRef.instance.mentionScope=this.mentionScope),t.value&&(this.componentRef.instance.value=this.value),t.placeholder&&(this.componentRef.instance.placeholder=this.placeholder),t.inputMode&&(this.componentRef.instance.inputMode=this.inputMode),t.autoFocus&&(this.componentRef.instance.autoFocus=this.autoFocus);let s={};this.unpropagatedChanges.forEach(l=>s=Object.assign(Object.assign({},s),l)),(r=(i=this.componentRef.instance).ngOnChanges)===null||r===void 0||r.call(i,s),this.unpropagatedChanges=[]}}return e.\u0275fac=function(t){return new(t||e)(Ce(Dr))},e.\u0275dir=Zn({type:e,selectors:[["","streamTextarea",""]],inputs:{componentRef:"componentRef",areMentionsEnabled:"areMentionsEnabled",mentionScope:"mentionScope",inputMode:"inputMode",value:"value",placeholder:"placeholder",autoFocus:"autoFocus"},outputs:{valueChange:"valueChange",send:"send",userMentions:"userMentions"},features:[ni]}),e})(),IT=(()=>{class e{constructor(){this.emojiInput$=new kn}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Fte=(()=>{class e{constructor(){this.isFileUploadEnabled=!0,this.areMentionsEnabled=!0,this.isMultipleFileUploadEnabled=!0,this.mentionScope="channel",this.inputMode="desktop"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Lte=(()=>{class e{constructor(t,i){this.ngZone=t,this.cdRef=i,this.waveFormData=[],this.resampledWaveFormData=[],this.progress=0,this.isDragging=!1,this.sampleSize=40,this.isViewInited=!1,this.upsample=()=>{if(this.sampleSize===this.waveFormData.length)return this.waveFormData;let[r,s]=this.divMod(this.sampleSize,this.waveFormData.length),l=[];for(let d=0;d<this.waveFormData.length;d++){let f=s&&s--?1:0;l.push(...Array(r+f).fill(this.waveFormData[d]))}return l},this.getNextBucketMean=(r,s,l)=>{let d=Math.floor(s*l)+1,f=Math.floor((s+1)*l)+1;return f=f<r.length?f:r.length,this.mean(r.slice(d,f))},this.mean=r=>r.reduce((s,l)=>s+l,0)/r.length,this.triangleAreaHeron=(r,s,l)=>{let d=(r+s+l)/2;return Math.sqrt(d*(d-r)*(d-s)*(d-l))},this.triangleBase=(r,s)=>Math.sqrt(Math.pow(r,2)+Math.pow(s,2)),this.divMod=(r,s)=>[Math.floor(r/s),r%s]}ngOnInit(){var t;this.containerSizeChanged(),!((t=this.container)===null||t===void 0)&&t.nativeElement&&this.ngZone.runOutsideAngular(()=>{new ResizeObserver(()=>{this.containerSizeChanged()}).observe(this.container.nativeElement)})}ngOnChanges(t){t.waveFormData&&(this.resampledWaveFormData=this.waveFormData.length>this.sampleSize?this.downsample():this.upsample()),t.audioElement&&this.ngZone.runOutsideAngular(()=>{var i;(i=this.audioElement)===null||i===void 0||i.addEventListener("timeupdate",()=>{var r;let s=(((r=this.audioElement)===null||r===void 0?void 0:r.currentTime)||0)/(this.duration||0)||0;Math.abs(s-this.progress)>=.02&&this.ngZone.run(()=>{this.progress=s,this.cdRef.detectChanges()})})})}ngAfterViewInit(){this.isViewInited=!0}seek(t){var i,r,s,l,d;let f=((r=(i=this.container)===null||i===void 0?void 0:i.nativeElement)===null||r===void 0?void 0:r.getBoundingClientRect().width)||0,v=((d=(l=(s=this.container)===null||s===void 0?void 0:s.nativeElement)===null||l===void 0?void 0:l.getBoundingClientRect())===null||d===void 0?void 0:d.x)||0,x=(t.x-v)/f;if(!isNaN(x)&&this.audioElement){let A=(this.duration||0)*x;this.audioElement.currentTime=A}}trackByIndex(t){return t}containerSizeChanged(){var t;if(!(!((t=this.container)===null||t===void 0)&&t.nativeElement))return;let i=this.container.nativeElement.clientWidth;if(i===0)return;let r=+getComputedStyle(this.container.nativeElement).getPropertyValue("--str-chat__voice-recording-amplitude-bar-width").replace("px",""),s=+getComputedStyle(this.container.nativeElement).getPropertyValue("--str-chat__voice-recording-amplitude-bar-gap-width").replace("px","");if(!isNaN(r)&&!isNaN(s)){let l=Math.floor(i/(r+s));l!==this.sampleSize&&!isNaN(l)&&l!==1/0&&this.ngZone.run(()=>{this.sampleSize=l,this.resampledWaveFormData=this.waveFormData.length>this.sampleSize?this.downsample():this.upsample(),this.isViewInited&&this.cdRef.detectChanges()})}}downsample(){if(this.waveFormData.length<=this.sampleSize)return this.waveFormData;if(this.sampleSize===1)return[this.mean(this.waveFormData)];let t=[],i=(this.waveFormData.length-2)/(this.sampleSize-2),r=0;t.push(this.waveFormData[r]);let s,l,d;for(let f=1;f<this.sampleSize-1;f++){let v=this.waveFormData[r],x=this.getNextBucketMean(this.waveFormData,f,i),O=Math.floor((f-1)*i)+1,A=Math.floor(f*i)+1,L=1+A-O;l=d=-1;for(let U=O;U<A;U++){let te=Math.abs(U-O)+1,ce=L-te,fe=this.waveFormData[U];d=this.triangleAreaHeron(this.triangleBase(Math.abs(v-fe),te),this.triangleBase(Math.abs(fe-x),ce),this.triangleBase(Math.abs(v-x),L)),d>l&&(l=d,s=this.waveFormData[U],r=U)}typeof s<"u"&&t.push(s)}return t.push(this.waveFormData[this.waveFormData.length-1]),t}}return e.\u0275fac=function(t){return new(t||e)(Ce(On),Ce(pi))},e.\u0275cmp=Wt({type:e,selectors:[["stream-voice-recording-wavebar"]],viewQuery:function(t,i){if(t&1&&bi(kT,7),t&2){let r;ui(r=di())&&(i.container=r.first)}},inputs:{audioElement:"audioElement",waveFormData:"waveFormData",duration:"duration"},features:[ni],decls:4,vars:5,consts:[["container",""],["data-testid","wave-progress-bar-track","role","progressbar",1,"str-chat__wave-progress-bar__track",3,"mousedown","mouseup","mouseleave","mousemove","click","keyup.enter"],["class","str-chat__wave-progress-bar__amplitude-bar",3,"str-chat__wave-progress-bar__amplitude-bar--active","--str-chat__wave-progress-bar__amplitude-bar-height",4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","wave-progress-bar-progress-indicator",1,"str-chat__wave-progress-bar__progress-indicator",3,"ngStyle"],[1,"str-chat__wave-progress-bar__amplitude-bar"]],template:function(t,i){if(t&1){let r=kt();K(0,"div",1,0),nt("mousedown",function(){return Le(r),Ne(i.isDragging=!0)})("mouseup",function(){return Le(r),Ne(i.isDragging=!1)})("mouseleave",function(){return Le(r),Ne(i.isDragging=!1)})("mousemove",function(l){return Le(r),Ne(i.isDragging?i.seek(l):null)})("click",function(l){return Le(r),Ne(i.seek(l))})("keyup.enter",function(l){return Le(r),Ne(i.seek(l))}),de(2,pY,1,4,"div",2),Me(3,"div",3),Q()}t&2&&(V(2),H("ngForOf",i.resampledWaveFormData)("ngForTrackBy",i.trackByIndex),V(),H("ngStyle",wi(3,hY,i.progress*100+"%")))},dependencies:[ys,Ec],encapsulation:2}),e})(),Nte=(()=>{class e{constructor(t,i){this.ngZone=t,this.cdRef=i,this.fileSize="",this.durationFormatted="",this.secondsElapsed=0,this.isError=!1,this.secondsElapsedFormatted=this.getFormattedDuration(this.secondsElapsed)}ngOnChanges(t){var i;t.attachment&&(this.fileSize=this.getFileSize(),this.durationFormatted=this.getFormattedDuration((i=this.attachment)===null||i===void 0?void 0:i.duration))}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{var t;(t=this.audioElement)===null||t===void 0||t.nativeElement.addEventListener("timeupdate",()=>{var i,r,s,l,d;let f=!((r=(i=this.audioElement)===null||i===void 0?void 0:i.nativeElement)===null||r===void 0)&&r.ended?((s=this.attachment)===null||s===void 0?void 0:s.duration)||0:Math.round(((d=(l=this.audioElement)===null||l===void 0?void 0:l.nativeElement)===null||d===void 0?void 0:d.currentTime)||0);this.secondsElapsed!==f&&this.ngZone.run(()=>{this.secondsElapsed=f,this.secondsElapsedFormatted=this.getFormattedDuration(this.secondsElapsed),this.cdRef.detectChanges()})})})}togglePlay(){var t,i;return sn(this,void 0,void 0,function*(){if(!(!this.audioElement||!(!((t=this.attachment)===null||t===void 0)&&t.asset_url)))try{!((i=this.audioElement)===null||i===void 0)&&i.nativeElement.paused?yield this.audioElement.nativeElement.play():this.audioElement.nativeElement.pause(),this.isError=!1}catch{this.isError=!0}})}setPlaybackRate(){var t,i,r;if(!(!((t=this.audioElement)===null||t===void 0)&&t.nativeElement))return;let s=((r=(i=this.audioElement)===null||i===void 0?void 0:i.nativeElement)===null||r===void 0?void 0:r.playbackRate)+.5;s>2&&(s=1),this.audioElement.nativeElement.playbackRate=s}getFormattedDuration(t){if(t===void 0||t<=0)return"00:00";let[i,r]=this.divMod(t,3600),[s,l]=this.divMod(r,60),d=Math.ceil(l),f=i.toString().length===1?"0":"",v=s.toString().length===1?"0":"",x=d.toString().length===1?"0":"",O=`${v}${s}:${x}${d}`;return i?`${f}${i}:`+O:O}getFileSize(){var t,i;return((t=this.attachment)===null||t===void 0?void 0:t.file_size)===void 0||((i=this.attachment)===null||i===void 0?void 0:i.file_size)===null?"":(0,PT.default)(Number(this.attachment.file_size||0))}divMod(t,i){return[Math.floor(t/i),t%i]}}return e.\u0275fac=function(t){return new(t||e)(Ce(On),Ce(pi))},e.\u0275cmp=Wt({type:e,selectors:[["stream-voice-recording"]],viewQuery:function(t,i){if(t&1&&bi(fY,5),t&2){let r;ui(r=di())&&(i.audioElement=r.first)}},inputs:{attachment:"attachment"},features:[ni],decls:17,vars:11,consts:[["audioElement",""],["state",""],["fileIcon",""],["fileSizeTemplate",""],["data-testid","voice-recording-widget",1,"str-chat__message-attachment__voice-recording-widget"],[3,"play","pause","ended","error","abort"],["data-testid","audio-source",3,"src","type"],["data-testid","play-button",1,"str-chat__message-attachment-audio-widget--play-button",3,"click"],[3,"icon"],[1,"str-chat__message-attachment__voice-recording-widget__metadata"],[1,"str-chat__message-attachment-voice-recording-widget--first-row"],["data-testid","voice-recording-title",1,"str-chat__message-attachment__voice-recording-widget__title",3,"title"],[4,"ngIf","ngIfElse"],[1,"str-chat__message-attachment__voice-recording-widget__right-section"],["class","str-chat__message_attachment__playback-rate-button","data-testid","playback-rate-button",3,"click",4,"ngIf","ngIfElse"],[1,"str-chat__message-attachment__voice-recording-widget__error-message"],["icon","error",3,"size"],["data-testid","error-message"],[1,"str-chat__message-attachment__voice-recording-widget__audio-state"],[1,"str-chat__message-attachment__voice-recording-widget__timer"],["data-testid","duration",4,"ngIf","ngIfElse"],[3,"waveFormData","duration","audioElement",4,"ngIf"],["data-testid","duration"],["data-testid","file-size-indicator",1,"str-chat__message-attachment-file--item-size"],[3,"waveFormData","duration","audioElement"],["data-testid","playback-rate-button",1,"str-chat__message_attachment__playback-rate-button",3,"click"],["icon","audio-file",3,"size"]],template:function(t,i){if(t&1){let r=kt();K(0,"div",4)(1,"audio",5,0),nt("play",function(){return Le(r),Ne(null)})("pause",function(){return Le(r),Ne(null)})("ended",function(){return Le(r),Ne(null)})("error",function(){return Le(r),Ne(i.isError=!0)})("abort",function(){return Le(r),Ne(i.isError=!0)}),Me(3,"source",6),Q(),K(4,"button",7),nt("click",function(){return Le(r),Ne(i.togglePlay())}),Me(5,"stream-icon-placeholder",8),Q(),K(6,"div",9)(7,"div",10)(8,"div",11),je(9),Q()(),de(10,gY,6,4,"ng-container",12)(11,bY,6,3,"ng-template",null,1,mt),Q(),K(13,"div",13),de(14,wY,3,4,"button",14)(15,CY,1,1,"ng-template",null,2,mt),Q()()}if(t&2){let r=Xe(2),s=Xe(12),l=Xe(16);Rn("str-chat__message-attachment__voice-recording-widget--error",i.isError),V(3),H("src",i.attachment==null?null:i.attachment.asset_url,vr)("type",i.attachment==null?null:i.attachment.mime_type),V(2),H("icon",r!=null&&r.paused?"play":"pause"),V(3),H("title",i.attachment==null?null:i.attachment.title),V(),Rt(" ",i.attachment==null?null:i.attachment.title," "),V(),H("ngIf",i.isError)("ngIfElse",s),V(4),H("ngIf",!(r!=null&&r.paused))("ngIfElse",l)}},dependencies:[xo,Lte,Zi,Xs,kP],encapsulation:2}),e})(),M3=(()=>{class e{constructor(t,i,r,s){this.customTemplatesService=t,this.channelService=i,this.attachmentConfigurationService=r,this.attachments=[],this.imageModalStateChange=new Zt,this.class="str-chat__attachment-list-angular-host",this.orderedAttachments=[],this.imagesToView=[],this.imagesToViewCurrentIndex=0,this.attachmentConfigurations=new Map,this.themeVersion=s.themeVersion}ngOnChanges(t){if(t.attachments){let i=this.attachments.filter(this.isImage),r=i.length>=2;this.orderedAttachments=[...r?this.createGallery(i):i,...this.attachments.filter(s=>this.isVideo(s)),...this.attachments.filter(s=>this.isVoiceMessage(s)),...this.attachments.filter(s=>this.isFile(s))],this.attachmentConfigurations=new Map,this.orderedAttachments.length===0&&this.orderedAttachments.push(...this.attachments.filter(s=>this.isCard(s)))}}trackByUrl(t,i){return i.image_url||i.img_url||i.asset_url||i.thumb_url}isImage(t){return w3(t)}isSvg(t){return!!(t.fallback||"").toLowerCase().endsWith(".svg")}isFile(t){return t.type==="file"}isGallery(t){return t.type==="gallery"}isVideo(t){return t.type==="video"&&t.asset_url&&!t.og_scrape_url}isCard(t){return!t.type||t.type==="image"&&!this.isImage(t)||t.type==="giphy"}isVoiceMessage(t){return t.type==="voiceRecording"}hasFileSize(t){return t.file_size&&Number.isFinite(Number(t.file_size))}getFileSize(t){return(0,PT.default)(Number(t.file_size))}getModalContext(){return{isOpen:this.imagesToView&&this.imagesToView.length>0,isOpenChangeHandler:t=>t?null:this.closeImageModal(),content:this.modalContent}}trimUrl(t){if(t!=null){let[i]=t.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").split("/");return i}return null}sendAction(t){this.channelService.sendAction(this.messageId,{[t.name]:t.value},this.parentMessageId)}trackByActionValue(t,i){return i.value}openImageModal(t,i=0){this.imageModalStateChange.next("opened"),this.imagesToView=t,this.imagesToViewCurrentIndex=i}stepImages(t){this.imagesToViewCurrentIndex+=t*1}trackByImageUrl(t,i){return i.image_url||i.img_url||i.thumb_url}getAttachmentContext(t){return{attachment:t}}getImageAttachmentConfiguration(t,i,r){let s=this.attachmentConfigurations.get(t);if(s)return s;let l=this.attachmentConfigurationService.getImageAttachmentConfiguration(t,i,r);return this.attachmentConfigurations.set(t,l),l}getCarouselImageAttachmentConfiguration(t,i){return this.attachmentConfigurationService.getImageAttachmentConfiguration(t,"carousel",i)}getVideoAttachmentConfiguration(t,i){let r=this.attachmentConfigurations.get(t);if(r)return r;let s=this.attachmentConfigurationService.getVideoAttachmentConfiguration(t,i);return this.attachmentConfigurations.set(t,s),s}getCardAttachmentConfiguration(t){let i=this.attachmentConfigurations.get(t);if(i)return i;if(t.type==="giphy")return this.attachmentConfigurationService.getGiphyAttachmentConfiguration(t);{let r=this.attachmentConfigurationService.getScrapedImageAttachmentConfiguration(t);return this.attachmentConfigurations.set(t,r),r}}get isImageModalPrevButtonVisible(){return this.imagesToViewCurrentIndex!==0}get isImageModalNextButtonVisible(){return this.imagesToViewCurrentIndex!==this.imagesToView.length-1}createGallery(t){return[{type:"gallery",images:t}]}closeImageModal(){this.imageModalStateChange.next("closed"),this.imagesToView=[]}}return e.\u0275fac=function(t){return new(t||e)(Ce(Cr),Ce(Or),Ce(Pte),Ce(Gc))},e.\u0275cmp=Wt({type:e,selectors:[["stream-attachment-list"]],viewQuery:function(t,i){if(t&1&&bi(xY,7),t&2){let r;ui(r=di())&&(i.modalContent=r.first)}},hostVars:2,hostBindings:function(t,i){t&2&&vs(i.class)},inputs:{messageId:"messageId",parentMessageId:"parentMessageId",attachments:"attachments"},outputs:{imageModalStateChange:"imageModalStateChange"},features:[ni],decls:5,vars:1,consts:[["defaultModal",""],["modalContent",""],["defaultImage",""],["imgElement",""],["defaultGallery",""],["element",""],["defaultVideo",""],["videoElement",""],["defaultFile",""],["defaultRecording",""],["defaultCard",""],["defaultActions",""],["class","str-chat__attachment-list",4,"ngIf"],[1,"str-chat__attachment-list"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["data-testclass","attachment-container"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["data-testclass","image",1,"str-chat__message-attachment--img",3,"click","keyup.enter","src","alt","ngStyle"],["data-testid","image-gallery",1,"str-chat__gallery"],["class","str-chat__gallery-image","data-testclass","gallery-image",3,"str-chat__message-attachment--svg-image","click","keyup.enter",4,"ngIf"],["class","str-chat__gallery-placeholder","data-testclass","gallery-image","data-testid","more-image-button",3,"str-chat__message-attachment--svg-image","--original-height","--original-width","ngStyle","click","keyup.enter",4,"ngIf"],["data-testclass","gallery-image",1,"str-chat__gallery-image",3,"click","keyup.enter"],["fetchpriority","low","loading","lazy",3,"src","alt","ngStyle"],["data-testclass","gallery-image","data-testid","more-image-button",1,"str-chat__gallery-placeholder",3,"click","keyup.enter","ngStyle"],[3,"innerHTML"],["data-testclass","video-attachment-parent",1,"str-chat__player-wrapper",3,"ngStyle"],["controls","","data-testclass","video-attachment",1,"str-chat__video-angular",3,"src","poster"],[1,"str-chat__message-attachment-file--item","str-chat-angular__message-attachment-file-single"],["icon","file",3,"size",4,"ngIf"],["icon","unspecified-filetype",3,"size",4,"ngIf"],[1,"str-chat__message-attachment-file--item-text"],["data-testclass","file-link","target","_blank",1,"str-chat__message-attachment-file--item-first-row",3,"href"],["data-testclass","file-title",1,"str-chat__message-attachment-file--item-name"],["icon","download",1,"str-chat__message-attachment-download-icon"],["class","str-chat__message-attachment-file--item-size","data-testclass","size",4,"ngIf"],["icon","file",3,"size"],["icon","unspecified-filetype",3,"size"],["data-testclass","size",1,"str-chat__message-attachment-file--item-size"],["data-testclass","voice-recording",3,"attachment"],["class","str-chat__message-attachment-card--header",4,"ngIf"],[1,"str-chat__message-attachment-card--content"],[1,"str-chat__message-attachment-card--flex"],["data-testclass","card-title","class","str-chat__message-attachment-card--title",4,"ngIf"],["class","str-chat__message-attachment-card--text","data-testclass","card-text",4,"ngIf"],["class","str-chat__message-attachment-card--url","data-testclass","url-link","noopener","","noreferrer","","target","_blank",3,"href",4,"ngIf"],[1,"str-chat__message-attachment-card--header"],["fetchpriority","low","loading","lazy","data-testclass","card-img",3,"alt","src","ngStyle"],["data-testclass","card-title",1,"str-chat__message-attachment-card--title"],["data-testclass","card-text",1,"str-chat__message-attachment-card--text"],["data-testclass","url-link","noopener","","noreferrer","","target","_blank",1,"str-chat__message-attachment-card--url",3,"href"],[1,"str-chat__message-attachment-actions"],[1,"str-chat__message-attachment-actions-form"],["data-testclass","attachment-action",3,"class","click","keyup.enter",4,"ngFor","ngForOf","ngForTrackBy"],["data-testclass","attachment-action",3,"click","keyup.enter"],[1,"stream-chat-angular__image-modal-host",3,"isOpenChange","isOpen","content"],[1,"stream-chat-angular__image-modal","str-chat__image-carousel"],["data-testid","modal-image",1,"stream-chat-angular__image-modal-image","str-chat__image-carousel-image",3,"src","alt","ngStyle"],["data-testid","image-modal-prev","type","button",1,"stream-chat-angular__image-modal-stepper","str-chat__image-carousel-stepper","str-chat__image-carousel-stepper-prev",3,"click","keyup.enter","ngStyle"],["icon","arrow-left"],["type","button","data-testid","image-modal-next",1,"stream-chat-angular__image-modal-stepper","str-chat__image-carousel-stepper","str-chat__image-carousel-stepper-next",3,"click","keyup.enter","ngStyle"],["icon","arrow-right"]],template:function(t,i){t&1&&de(0,cK,3,3,"div",12)(1,lK,1,2,"ng-template",null,0,mt)(3,uK,8,16,"ng-template",null,1,mt),t&2&&H("ngIf",i.orderedAttachments.length>0)},dependencies:[xo,Nte,Db,Zi,ys,Ii,Ec,Fr,Xs],encapsulation:2}),e})(),Bte=(()=>{class e{constructor(t){this.retryAttachmentUpload=new Zt,this.deleteAttachment=new Zt,this.themeVersion=t.themeVersion}attachmentUploadRetried(t){this.retryAttachmentUpload.emit(t)}attachmentDeleted(t){this.deleteAttachment.emit(t)}trackByFile(t,i){return i.file}}return e.\u0275fac=function(t){return new(t||e)(Ce(Gc))},e.\u0275cmp=Wt({type:e,selectors:[["stream-attachment-preview-list"]],inputs:{attachmentUploads$:"attachmentUploads$"},outputs:{retryAttachmentUpload:"retryAttachmentUpload",deleteAttachment:"deleteAttachment"},decls:8,vars:6,consts:[["deleteButton",""],["retryButton",""],["class","rfu-image-previewer",4,"ngIf"],["class","str-chat__attachment-preview-list",4,"ngIf"],[1,"rfu-image-previewer"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","rfu-image-previewer__image","data-testclass","attachment-image-preview",3,"rfu-image-previewer__image--loaded",4,"ngIf"],["class","rfu-file-previewer","data-testclass","attachment-file-preview",4,"ngIf"],["data-testclass","attachment-image-preview",1,"rfu-image-previewer__image"],["class","rfu-image-previewer__retry","data-testclass","upload-retry",3,"click","keyup.enter",4,"ngIf"],[1,"rfu-thumbnail__wrapper"],[1,"rfu-thumbnail__overlay"],["data-testclass","file-delete","role","button",1,"rfu-icon-button",3,"click","keyup.enter"],["icon","close-no-outline"],["class","rfu-thumbnail__image","data-testclass","attachment-image",3,"src","alt",4,"ngIf"],["data-testclass","loading-indicator","color","rgba(255,255,255,0.7)",4,"ngIf"],["data-testclass","upload-retry",1,"rfu-image-previewer__retry",3,"click","keyup.enter"],["icon","retry"],["data-testclass","attachment-image",1,"rfu-thumbnail__image",3,"src","alt"],["data-testclass","loading-indicator","color","rgba(255,255,255,0.7)"],["data-testclass","attachment-file-preview",1,"rfu-file-previewer"],[1,"rfu-file-previewer__file"],["icon","file"],["data-testclass","file-download-link","download","",3,"click","keyup.enter","href"],[4,"ngIf"],["data-testclass","file-delete",1,"rfu-file-previewer__close-button",3,"click","keyup.enter"],["class","rfu-file-previewer__loading-indicator",4,"ngIf"],["data-testclass","upload-retry","translate","",1,"rfu-file-previewer__failed",3,"click","keyup.enter"],["translate","",1,"rfu-file-previewer__retry",3,"click","keyup.enter"],[1,"rfu-file-previewer__loading-indicator"],[1,"str-chat__attachment-preview-list"],[1,"str-chat__attachment-list-scroll-container"],["class","str-chat__attachment-preview-image","data-testclass","attachment-image-preview",4,"ngIf"],["class","str-chat__attachment-preview-file","data-testclass","attachment-file-preview",4,"ngIf"],["data-testclass","attachment-image-preview",1,"str-chat__attachment-preview-image"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","str-chat__attachment-preview-image-loading",4,"ngIf"],["class","str-chat__attachment-preview-thumbnail","data-testclass","attachment-image",3,"src","alt",4,"ngIf"],[1,"str-chat__attachment-preview-image-loading"],["data-testclass","loading-indicator",3,"size"],["data-testclass","attachment-image",1,"str-chat__attachment-preview-thumbnail",3,"src","alt"],["data-testclass","attachment-file-preview",1,"str-chat__attachment-preview-file"],["icon","unspecified-filetype"],[1,"str-chat__attachment-preview-file-end"],[1,"str-chat__attachment-preview-file-name"],["class","str-chat__attachment-preview-file-download","data-testclass","file-download-link","download","",3,"href","click","keyup.enter",4,"ngIf"],["data-testclass","loading-indicator",3,"size",4,"ngIf"],["data-testclass","file-download-link","download","",1,"str-chat__attachment-preview-file-download",3,"click","keyup.enter","href"],["icon","download"],["data-testclass","file-delete","role","button",1,"str-chat__attachment-preview-delete",3,"click","keyup.enter"],["data-testclass","upload-retry",3,"class","click","keyup.enter",4,"ngIf"],["data-testclass","upload-retry",3,"click","keyup.enter"]],template:function(t,i){if(t&1&&(de(0,yK,3,4,"div",2),tt(1,"async"),de(2,PK,4,4,"div",3),tt(3,"async"),de(4,kK,2,0,"ng-template",null,0,mt)(6,RK,1,1,"ng-template",null,1,mt)),t&2){let r,s;H("ngIf",((r=ht(1,2,i.attachmentUploads$))==null?null:r.length)&&i.themeVersion==="1"),V(2),H("ngIf",((s=ht(3,4,i.attachmentUploads$))==null?null:s.length)&&i.themeVersion==="2")}},dependencies:[xo,FT,Zi,ys,Ip,Ii,Fr],encapsulation:2}),e})(),LT=(()=>{class e{constructor(t,i,r,s,l,d,f,v,x,O,A){this.channelService=t,this.notificationService=i,this.attachmentService=r,this.configService=s,this.textareaType=l,this.componentFactoryResolver=d,this.cdRef=f,this.chatClient=v,this.emojiInputService=x,this.customTemplatesService=O,this.mode="main",this.autoFocus=!0,this.messageUpdate=new Zt,this.class="str-chat__message-input-angular-host",this.textareaValue="",this.mentionedUsers=[],this.typingStart$=new kn,this.isCooldownInProgress=!1,this.fileInputId=xg(),this.subscriptions=[],this.isViewInited=!1,this.defaultTextareaPlaceholder="streamChat.Type your message",this.slowModeTextareaPlaceholder="streamChat.Slow Mode ON",this.themeVersion=A.themeVersion,this.textareaPlaceholder=this.defaultTextareaPlaceholder,this.subscriptions.push(this.attachmentService.attachmentUploadInProgressCounter$.subscribe(L=>{L===0&&this.hideNotification&&(this.hideNotification(),this.hideNotification=void 0)})),this.subscriptions.push(this.channelService.activeChannel$.subscribe(L=>{var U;L&&this.channel&&L.id!==this.channel.id&&(this.textareaValue="",this.attachmentService.resetAttachmentUploads());let te=(U=L?.data)===null||U===void 0?void 0:U.own_capabilities;te&&(this.isFileUploadAuthorized=te.indexOf("upload-file")!==-1,this.canSendLinks=te.indexOf("send-links")!==-1,this.channel=L,this.setCanSendMessages())})),this.subscriptions.push(this.chatClient.appSettings$.subscribe(L=>this.appSettings=L)),this.subscriptions.push(this.channelService.messageToQuote$.subscribe(L=>{let U=L&&L.parent_id;(this.mode==="thread"&&U||this.mode==="thread"&&this.quotedMessage&&!L||this.mode==="main"&&!U)&&(this.quotedMessage=L)})),this.attachmentUploads$=this.attachmentService.attachmentUploads$,this.attachmentUploadInProgressCounter$=this.attachmentService.attachmentUploadInProgressCounter$,this.isFileUploadEnabled=this.configService.isFileUploadEnabled,this.isMultipleFileUploadEnabled=this.configService.isMultipleFileUploadEnabled,this.areMentionsEnabled=this.configService.areMentionsEnabled,this.mentionScope=this.configService.mentionScope,this.inputMode=this.configService.inputMode,this.subscriptions.push(this.typingStart$.subscribe(()=>void this.channelService.typingStarted(this.parentMessageId))),this.subscriptions.push(so([this.channelService.latestMessageDateByUserByChannels$,this.channelService.activeChannel$]).pipe(Ft(([L,U])=>[L[U?.cid||""],U])).subscribe(([L,U])=>{var te,ce,fe;let ye=((te=U?.data)===null||te===void 0?void 0:te.cooldown)&&L&&Math.round(((ce=U?.data)===null||ce===void 0?void 0:ce.cooldown)-(new Date().getTime()-L.getTime())/1e3);ye&&ye>0&&((fe=U?.data)===null||fe===void 0?void 0:fe.own_capabilities).includes("slow-mode")?this.startCooldown(ye):this.isCooldownInProgress&&this.stopCooldown()}))}ngOnInit(){this.subscriptions.push(this.customTemplatesService.emojiPickerTemplate$.subscribe(t=>{this.emojiPickerTemplate=t,this.cdRef.detectChanges()})),this.subscriptions.push(this.customTemplatesService.attachmentPreviewListTemplate$.subscribe(t=>{this.attachmentPreviewListTemplate=t,this.cdRef.detectChanges()})),this.subscriptions.push(this.customTemplatesService.customAttachmentUploadTemplate$.subscribe(t=>{this.customAttachmentUploadTemplate=t,this.cdRef.detectChanges()}))}ngAfterViewInit(){this.isViewInited=!0,this.initTextarea()}ngOnChanges(t){t.message&&(this.attachmentService.resetAttachmentUploads(),this.isUpdate&&(this.attachmentService.createFromAttachments(this.message.attachments||[]),this.textareaValue=this.message.text||"")),t.isFileUploadEnabled&&(this.configService.isFileUploadEnabled=this.isFileUploadEnabled),t.isMultipleFileUploadEnabled&&(this.configService.isMultipleFileUploadEnabled=this.isMultipleFileUploadEnabled),t.areMentionsEnabled&&(this.configService.areMentionsEnabled=this.areMentionsEnabled),t.mentionScope&&(this.configService.mentionScope=this.mentionScope),t.mode&&this.setCanSendMessages(),t.inputMode&&(this.configService.inputMode=this.inputMode),t.sendMessage$&&(this.sendMessageSubcription&&this.sendMessageSubcription.unsubscribe(),this.sendMessage$&&(this.sendMessageSubcription=this.sendMessage$.subscribe(()=>void this.messageSent())))}ngOnDestroy(){this.sendMessageSubcription&&this.sendMessageSubcription.unsubscribe(),this.subscriptions.forEach(t=>t.unsubscribe())}messageSent(){var t;return sn(this,void 0,void 0,function*(){if(this.isCooldownInProgress)return;let i;if(this.attachmentService.attachmentUploadInProgressCounter$.pipe(Qr()).subscribe(d=>i=d),i>0){this.hideNotification||(this.hideNotification=this.notificationService.addPermanentNotification("streamChat.Wait until all attachments have uploaded"));return}let r=this.attachmentService.mapToAttachments(),s=this.textareaValue;s=s.replace(/^\n+/g,""),s=s.replace(/\n+$/g,"");let l=!s.replace(/ /g,"");if(!((!s||l)&&(!r||r.length===0))){if(l&&(s=""),this.containsLinks&&!this.canSendLinks){this.notificationService.addTemporaryNotification("streamChat.Sending links is not allowed in this conversation");return}this.isUpdate||(this.textareaValue="");try{let d=yield this.isUpdate?this.channelService.updateMessage(Object.assign(Object.assign({},this.message),{text:s,attachments:r})):this.channelService.sendMessage(s,r,this.mentionedUsers,this.parentMessageId,(t=this.quotedMessage)===null||t===void 0?void 0:t.id);this.messageUpdate.emit({message:d}),this.isUpdate||this.attachmentService.resetAttachmentUploads()}catch{this.isUpdate&&this.notificationService.addTemporaryNotification("streamChat.Edit message request failed")}this.channelService.typingStopped(this.parentMessageId),this.quotedMessage&&this.deselectMessageToQuote()}})}get containsLinks(){return/(?:(?:https?|ftp):\/\/)?[\w/\-?=%.]+\.[\w/\-&?=%.]+/.test(this.textareaValue)}get quotedMessageAttachments(){var t;let i=(t=this.quotedMessage)===null||t===void 0?void 0:t.attachments;return i&&i.length?[i[0]]:[]}get disabledTextareaText(){return this.canSendMessages?"":this.mode==="thread"?"streamChat.You can't send thread replies in this channel":"streamChat.You can't send messages in this channel"}filesSelected(t){return sn(this,void 0,void 0,function*(){(yield this.areAttachemntsValid(t))&&(yield this.attachmentService.filesSelected(t),this.clearFileInput())})}deselectMessageToQuote(){this.channelService.selectMessageToQuote(void 0)}getEmojiPickerContext(){return{emojiInput$:this.emojiInputService.emojiInput$}}getAttachmentPreviewListContext(){return{attachmentUploads$:this.attachmentService.attachmentUploads$,deleteUploadHandler:this.deleteUpload.bind(this),retryUploadHandler:this.retryUpload.bind(this)}}getAttachmentUploadContext(){return{isMultipleFileUploadEnabled:this.isMultipleFileUploadEnabled,attachmentService:this.attachmentService}}deleteUpload(t){this.isUpdate?setTimeout(()=>{this.attachmentService.deleteAttachment(t)}):this.attachmentService.deleteAttachment(t)}retryUpload(t){this.attachmentService.retryAttachmentUpload(t)}clearFileInput(){this.fileInput.nativeElement.value=""}get isUpdate(){return!!this.message}initTextarea(){if(this.canSendMessages||(this.textareaRef=void 0),!this.canSendMessages||this.textareaRef||!this.textareaAnchor)return;let t=this.componentFactoryResolver.resolveComponentFactory(this.textareaType);this.textareaRef=this.textareaAnchor.viewContainerRef.createComponent(t),this.cdRef.detectChanges()}areAttachemntsValid(t){return sn(this,void 0,void 0,function*(){if(!t)return!0;this.appSettings||(yield this.chatClient.getAppSettings());let i=!0;return Array.from(t).forEach(r=>{var s,l,d,f,v,x,O,A,L,U,te,ce,fe,ye,Re,Ae,We,ft,Et,Pt,rt,nn,Qt,st,Je,Ye,lt,Te,Se,Pe,Ke,ut,yt,Yt,Jt,yn;let bn,In,$n,Ln;b3(r)?(bn=!!(!((d=(l=(s=this.appSettings)===null||s===void 0?void 0:s.image_upload_config)===null||l===void 0?void 0:l.blocked_file_extensions)===null||d===void 0)&&d.find(Nn=>r.name.endsWith(Nn))),In=!!(!((x=(v=(f=this.appSettings)===null||f===void 0?void 0:f.image_upload_config)===null||v===void 0?void 0:v.blocked_mime_types)===null||x===void 0)&&x.find(Nn=>r.type===Nn)),$n=!!(!((L=(A=(O=this.appSettings)===null||O===void 0?void 0:O.image_upload_config)===null||A===void 0?void 0:A.allowed_file_extensions)===null||L===void 0)&&L.length)&&!(!((ce=(te=(U=this.appSettings)===null||U===void 0?void 0:U.image_upload_config)===null||te===void 0?void 0:te.allowed_file_extensions)===null||ce===void 0)&&ce.find(Nn=>r.name.endsWith(Nn))),Ln=!!(!((Re=(ye=(fe=this.appSettings)===null||fe===void 0?void 0:fe.image_upload_config)===null||ye===void 0?void 0:ye.allowed_mime_types)===null||Re===void 0)&&Re.length)&&!(!((ft=(We=(Ae=this.appSettings)===null||Ae===void 0?void 0:Ae.image_upload_config)===null||We===void 0?void 0:We.allowed_mime_types)===null||ft===void 0)&&ft.find(Nn=>r.type===Nn))):(bn=!!(!((rt=(Pt=(Et=this.appSettings)===null||Et===void 0?void 0:Et.file_upload_config)===null||Pt===void 0?void 0:Pt.blocked_file_extensions)===null||rt===void 0)&&rt.find(Nn=>r.name.endsWith(Nn))),In=!!(!((st=(Qt=(nn=this.appSettings)===null||nn===void 0?void 0:nn.file_upload_config)===null||Qt===void 0?void 0:Qt.blocked_mime_types)===null||st===void 0)&&st.find(Nn=>r.type===Nn)),$n=!!(!((lt=(Ye=(Je=this.appSettings)===null||Je===void 0?void 0:Je.file_upload_config)===null||Ye===void 0?void 0:Ye.allowed_file_extensions)===null||lt===void 0)&&lt.length)&&!(!((Pe=(Se=(Te=this.appSettings)===null||Te===void 0?void 0:Te.file_upload_config)===null||Se===void 0?void 0:Se.allowed_file_extensions)===null||Pe===void 0)&&Pe.find(Nn=>r.name.endsWith(Nn))),Ln=!!(!((yt=(ut=(Ke=this.appSettings)===null||Ke===void 0?void 0:Ke.file_upload_config)===null||ut===void 0?void 0:ut.allowed_mime_types)===null||yt===void 0)&&yt.length)&&!(!((yn=(Jt=(Yt=this.appSettings)===null||Yt===void 0?void 0:Yt.file_upload_config)===null||Jt===void 0?void 0:Jt.allowed_mime_types)===null||yn===void 0)&&yn.find(Nn=>r.type===Nn))),(bn||In||$n||Ln)&&(this.notificationService.addTemporaryNotification("streamChat.Error uploading file, extension not supported",void 0,void 0,{name:r.name,ext:r.type}),i=!1)}),i})}setCanSendMessages(){var t,i;let r=(i=(t=this.channel)===null||t===void 0?void 0:t.data)===null||i===void 0?void 0:i.own_capabilities;r?this.canSendMessages=r.indexOf(this.mode==="main"?"send-message":"send-reply")!==-1:this.canSendMessages=!1,this.isViewInited&&(this.cdRef.detectChanges(),this.initTextarea())}get parentMessageId(){let t;return this.mode==="thread"&&this.channelService.activeParentMessageId$.pipe(Qr()).subscribe(i=>t=i),t}startCooldown(t){this.textareaPlaceholder=this.slowModeTextareaPlaceholder,this.isCooldownInProgress=!0,this.cooldown$=Bo(0,1e3).pipe(ti(t+1),Ft(i=>t-i),ri(i=>{i===0&&this.stopCooldown()}))}stopCooldown(){this.cooldown$=void 0,this.isCooldownInProgress=!1,this.textareaPlaceholder=this.defaultTextareaPlaceholder}}return e.\u0275fac=function(t){return new(t||e)(Ce(Or),Ce(Lp),Ce(h3),Ce(Fte),Ce(x3),Ce(Cl),Ce(pi),Ce(Wa),Ce(IT),Ce(Cr),Ce(Gc))},e.\u0275cmp=Wt({type:e,selectors:[["stream-message-input"]],viewQuery:function(t,i){if(t&1&&(bi(FK,5),bi(p3,5)),t&2){let r;ui(r=di())&&(i.fileInput=r.first),ui(r=di())&&(i.textareaAnchor=r.first)}},hostVars:2,hostBindings:function(t,i){t&2&&vs(i.class)},inputs:{isFileUploadEnabled:"isFileUploadEnabled",areMentionsEnabled:"areMentionsEnabled",mentionScope:"mentionScope",mode:"mode",isMultipleFileUploadEnabled:"isMultipleFileUploadEnabled",message:"message",sendMessage$:"sendMessage$",inputMode:"inputMode",autoFocus:"autoFocus"},outputs:{messageUpdate:"messageUpdate"},features:[Fa([h3,IT]),ni],decls:2,vars:2,consts:[["defaultAttachmentsPreview",""],["disabledTextarea",""],["defaultAttachmentUpload",""],["fileInput",""],["notAllowed",""],[3,"class","str-chat__input-flat-has-attachments","str-chat__input-flat-quoted",4,"ngIf"],["class","str-chat__message-input str-chat-angular__message-input",4,"ngIf"],["class","quoted-message-preview",4,"ngIf"],[1,"str-chat__input-flat-wrapper"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"rta","str-chat__textarea","str-chat-angular__textarea"],["data-testid","emoji-picker",4,"ngIf"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["data-testid","send-button","class","str-chat__send-button",3,"click","keyup.enter",4,"ngIf"],["class","str-chat__input-flat-cooldown","data-testid","cooldown-timer",4,"ngIf"],[1,"quoted-message-preview"],[1,"quoted-message-preview-header"],["data-testid","remove-quote",1,"str-chat__square-button",3,"click","keyup.enter"],["icon","close-no-outline"],[1,"quoted-message-preview-content"],["data-testid","qouted-message-avatar","type","user","location","quoted-message-sender",1,"str-chat-angular__avatar-host",3,"imageUrl","name","size","user"],[1,"quoted-message-preview-content-inner"],[3,"attachments","messageId",4,"ngIf"],["data-testid","quoted-message-text",3,"innerHTML"],[3,"attachments","messageId"],[1,"rfu-image-previewer-angular-host",3,"retryAttachmentUpload","deleteAttachment","attachmentUploads$"],["data-testid","emoji-picker"],[1,"str-chat__input-flat-emojiselect","str-chat-angular__emojiselect"],["streamTextarea","",3,"valueChange","send","userMentions","value","componentRef","areMentionsEnabled","mentionScope","placeholder","inputMode","autoFocus"],["disabled","","rows","1","data-testid","disabled-textarea",1,"rta__textarea","str-chat__textarea__textarea",3,"value"],["data-testid","file-upload-button",1,"str-chat__fileupload-wrapper"],[1,"str-chat__tooltip"],[1,"rfu-file-upload-button"],["type","file","data-testid","file-input",1,"rfu-file-input",3,"change","multiple"],[1,"str-chat__input-flat-fileupload"],["icon","file-upload"],["data-testid","send-button",1,"str-chat__send-button",3,"click","keyup.enter"],["icon","send",1,"str-chat__send-button-angular"],["data-testid","cooldown-timer",1,"str-chat__input-flat-cooldown"],[1,"str-chat__message-input-cooldown-text"],[1,"str-chat__message-input","str-chat-angular__message-input"],["class","str-chat__quoted-message-preview-header",4,"ngIf"],[1,"str-chat__quoted-message-preview-header"],[1,"str-chat__quoted-message-reply-to-message"],["data-testid","remove-quote",1,"str-chat__quoted-message-remove",3,"click","keyup.enter"],[1,"str-chat__message-input-inner","str-chat-angular__message-input-inner"],[1,"str-chat__message-textarea-container"],["data-testid","quoted-message-container","class","str-chat__quoted-message-preview",4,"ngIf"],[1,"str-chat__message-textarea-with-emoji-picker"],["streamTextarea","",3,"valueChange","send","userMentions","value","componentRef","areMentionsEnabled","mentionScope","inputMode","autoFocus","placeholder"],["data-testid","send-button","class","str-chat__send-button",3,"disabled","click","keyup.enter",4,"ngIf"],["class","str-chat__message-input-cooldown","data-testid","cooldown-timer",4,"ngIf"],["data-testid","file-upload-button",1,"str-chat__file-input-container"],["type","file","data-testid","file-input",1,"str-chat__file-input",3,"change","multiple","id"],[1,"str-chat__file-input-label",3,"for"],["icon","attach"],["data-testid","quoted-message-container",1,"str-chat__quoted-message-preview"],["data-testid","qouted-message-avatar","type","user","location","quoted-message-sender",1,"str-chat-angular__avatar-host","str-chat__message-sender-avatar",3,"imageUrl","name","size","user"],[1,"quoted-message-preview-content-inner","str-chat__quoted-message-bubble"],["data-testid","quoted-message-text",1,"str-chat__quoted-message-text",3,"innerHTML"],[1,"str-chat__attachment-preview-list-angular-host",3,"retryAttachmentUpload","deleteAttachment","attachmentUploads$"],["data-testid","send-button",1,"str-chat__send-button",3,"click","keyup.enter","disabled"],["icon","send"],["data-testid","cooldown-timer",1,"str-chat__message-input-cooldown"],["data-testid","disabled-textarea",1,"str-chat__message-input-not-allowed"]],template:function(t,i){t&1&&de(0,YK,16,21,"div",5)(1,uQ,5,3,"div",6),t&2&&(H("ngIf",i.themeVersion!=="2"),V(),H("ngIf",i.themeVersion==="2"))},dependencies:[xo,Np,M3,Bte,Zi,Ii,p3,Fr,Xs],encapsulation:2}),e})(),jte=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Wt({type:e,selectors:[["stream-notification"]],inputs:{type:"type",content:"content"},ngContentSelectors:Cb,decls:4,vars:5,consts:[["elseContent",""],["data-testid","custom-notification"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"]],template:function(t,i){if(t&1&&(mo(),K(0,"div",1),de(1,hQ,2,1,"ng-container",2)(2,pQ,1,0,"ng-template",null,0,mt),Q()),t&2){let r=Xe(3);ha("str-chat__custom-notification notification-",i.type," str-chat__notification"),V(),H("ngIf",i.content)("ngIfElse",r)}},dependencies:[Zi,Ii],encapsulation:2}),e})(),Tb=(()=>{class e{constructor(t,i,r){this.customTemplatesService=t,this.notificationService=i,this.themeService=r,this.notifications$=this.notificationService.notifications$,this.theme$=this.themeService.theme$,this.themeVersion=this.themeService.themeVersion}trackById(t,i){return i.id}getNotificationContentContext(t){return Object.assign(Object.assign({},t.templateContext),{dismissFn:t.dismissFn})}}return e.\u0275fac=function(t){return new(t||e)(Ce(Cr),Ce(Lp),Ce(Gc))},e.\u0275cmp=Wt({type:e,selectors:[["stream-notification-list"]],decls:6,vars:11,consts:[["defaultNotification",""],["notificationContent",""],["data-testid","notification-list"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["data-testclass","notification-content",4,"ngIf"],[4,"ngIf"],["data-testclass","notification-content"],[3,"type","content"]],template:function(t,i){t&1&&(K(0,"div",2),tt(1,"async"),de(2,bQ,5,7,"ng-container",3),tt(3,"async"),Q(),de(4,wQ,1,2,"ng-template",null,0,mt)),t&2&&(ha("str-chat__theme-",ht(1,7,i.theme$)," str-chat__list-notifications"),Rn("str-chat",i.themeVersion==="2"),V(2),H("ngForOf",ht(3,9,i.notifications$))("ngForTrackBy",i.trackById))},dependencies:[jte,ys,Zi,Ii,Fr,Xs],encapsulation:2}),e})(),Vte=(()=>{class e{constructor(t,i){this.customTemplatesService=t,this.messageActionsService=i,this.class="str-chat-angular__edit-message-form",this.isModalOpen=!1,this.sendMessageSubject=new kn,this.subscriptions=[],this.sendMessage$=this.sendMessageSubject.asObservable()}ngOnInit(){this.messageActionsService.messageToEdit$.subscribe(t=>{(t&&!this.isModalOpen||!t&&this.isModalOpen)&&(this.message=t,this.isModalOpen=!!t)})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}getEditModalContext(){return{isOpen:this.isModalOpen,isOpenChangeHandler:t=>{this.isModalOpen=t,this.isModalOpen||this.dismissed()},content:this.modalContent}}getMessageInputContext(){return{message:this.message,messageUpdateHandler:()=>{this.dismissed()},isFileUploadEnabled:void 0,areMentionsEnabled:void 0,isMultipleFileUploadEnabled:void 0,mentionScope:void 0,mode:void 0,sendMessage$:this.sendMessage$}}sendClicked(){this.sendMessageSubject.next()}dismissed(){this.isModalOpen=!1,this.message=void 0,this.messageActionsService.messageToEdit$.next(void 0)}}return e.\u0275fac=function(t){return new(t||e)(Ce(Cr),Ce(Rg))},e.\u0275cmp=Wt({type:e,selectors:[["stream-edit-message-form"]],viewQuery:function(t,i){if(t&1&&bi(CQ,7),t&2){let r;ui(r=di())&&(i.modalContent=r.first)}},hostVars:2,hostBindings:function(t,i){t&2&&vs(i.class)},decls:6,vars:4,consts:[["defaultModal",""],["editMessageForm",""],["defaultInput",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"isOpen","content","isOpenChange",4,"ngIf"],[3,"isOpenChange","isOpen","content"],[1,"str-chat__edit-message-form"],[1,"str-chat__message-team-form-footer","str-chat__message-team-form-footer-angular"],[1,"str-chat__edit-message-form-options"],["translate","","data-testid","cancel-button",1,"str-chat__edit-message-cancel",3,"click"],["type","submit","translate","","data-testid","send-button",1,"str-chat__edit-message-send",3,"click","keyup.enter"],[3,"messageUpdate","message","sendMessage$"]],template:function(t,i){if(t&1&&(de(0,xQ,1,0,"ng-container",3),tt(1,"async"),de(2,DQ,1,1,"ng-template",null,0,mt)(4,OQ,12,4,"ng-template",null,1,mt)),t&2){let r=Xe(3);H("ngTemplateOutlet",ht(1,2,i.customTemplatesService.modalTemplate$)||r)("ngTemplateOutletContext",i.getEditModalContext())}},dependencies:[Db,LT,Tb,Ii,Zi,Ip,Fr],encapsulation:2}),e})(),zte=(()=>{class e{constructor(t,i,r){this.channelService=t,this.customTemplatesService=i,this.messageActionsService=r,this.class="str-chat__message-bounce-prompt",this.isModalOpen=!1,this.subscriptions=[],this.messageBounceModalOpenChanged=s=>{this.isModalOpen=s,s||(this.message=void 0,this.channelService.bouncedMessage$.next(void 0))},this.subscriptions.push(this.channelService.bouncedMessage$.subscribe(s=>{s!==this.message&&(this.message=s,this.message&&(this.isModalOpen=!0))}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}resendMessage(){return sn(this,void 0,void 0,function*(){this.isModalOpen=!1,yield this.channelService.resendMessage(this.message),this.message=void 0,this.channelService.bouncedMessage$.next(void 0)})}deleteMessage(){return sn(this,void 0,void 0,function*(){this.message&&(this.isModalOpen=!1,yield this.channelService.deleteMessage(this.message,!0),this.message=void 0,this.channelService.bouncedMessage$.next(void 0))})}editMessage(){this.isModalOpen=!1,this.messageActionsService.messageToEdit$.next(this.message),this.message=void 0,this.channelService.bouncedMessage$.next(void 0)}}return e.\u0275fac=function(t){return new(t||e)(Ce(Or),Ce(Cr),Ce(Rg))},e.\u0275cmp=Wt({type:e,selectors:[["stream-message-bounce-prompt"]],hostVars:2,hostBindings:function(t,i){t&2&&vs(i.class)},decls:6,vars:9,consts:[["defaultModal",""],["modalContent",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"isOpen","content","isOpenChange",4,"ngIf"],[3,"isOpenChange","isOpen","content"],["data-testid","message-bounce-prompt",1,"str-chat__message-bounce-prompt"],[1,"str-chat__message-bounce-prompt-header"],[1,"str-chat__message-bounce-actions"],["data-testid","message-bounce-edit","type","button",1,"str-chat__message-bounce-edit",3,"click","keyup.enter"],["data-testid","message-bounce-send",1,"str-chat__message-bounce-send",3,"click","keyup.enter"],["data-testid","message-bounce-delete",1,"str-chat__message-bounce-delete",3,"click","keyup.enter"]],template:function(t,i){if(t&1&&(de(0,EQ,1,0,"ng-container",2),tt(1,"async"),de(2,kQ,1,1,"ng-template",null,0,mt)(4,AQ,14,12,"ng-template",null,1,mt)),t&2){let r=Xe(3),s=Xe(5);H("ngTemplateOutlet",ht(1,2,i.customTemplatesService.modalTemplate$)||r)("ngTemplateOutletContext",nP(4,IQ,i.message,i.isModalOpen,i.messageBounceModalOpenChanged,s))}},dependencies:[Db,Ii,Zi,Fr,Xs],encapsulation:2}),e})(),D3=(()=>{class e{constructor(t,i,r){this.channelService=t,this.themeService=i,this.customTemplatesService=r,this.subscriptions=[],this.isError$=so([this.channelService.channelQueryState$,this.channelService.activeChannel$]).pipe(Ft(([s,l])=>!l&&s?.state==="error")),this.isInitializing$=so([this.channelService.channelQueryState$,this.channelService.activeChannel$]).pipe(Ft(([s,l])=>!l&&s?.state==="in-progress")),this.isActiveThread$=this.channelService.activeParentMessageId$.pipe(Ft(s=>!!s)),this.theme$=this.themeService.theme$,this.isActiveChannel$=this.channelService.activeChannel$.pipe(Ft(s=>!!s))}}return e.\u0275fac=function(t){return new(t||e)(Ce(Or),Ce(Gc),Ce(Cr))},e.\u0275cmp=Wt({type:e,selectors:[["stream-channel"]],ngContentSelectors:FQ,decls:8,vars:13,consts:[["noChannel",""],["defaultEditMessageForm",""],["defaultMessageBouncePrompt",""],["class","str-chat__container",4,"ngIf","ngIfElse"],[1,"str-chat__container"],[4,"ngTemplateOutlet"],[1,"str-chat__main-panel"],[4,"ngIf"],["class","str-chat__empty-channel",4,"ngIf"],["class","str-chat__loading-channel",4,"ngIf"],[1,"str-chat__empty-channel"],["icon","chat-bubble"],[1,"str-chat__empty-channel-text"],[1,"str-chat__empty-channel-notifications"],[1,"str-chat__loading-channel"],[1,"str-chat__loading-channel-header"],[1,"str-chat__loading-channel-header-avatar"],[1,"str-chat__loading-channel-header-end"],[1,"str-chat__loading-channel-header-name"],[1,"str-chat__loading-channel-header-info"],[1,"str-chat__loading-channel-message-list"],[1,"str-chat__loading-channel-message"],[1,"str-chat__loading-channel-message-avatar"],[1,"str-chat__loading-channel-message-end"],[1,"str-chat__loading-channel-message-sender"],[1,"str-chat__loading-channel-message-last-row"],[1,"str-chat__loading-channel-message-text"],[1,"str-chat__loading-channel-message-date"],[1,"str-chat__loading-channel-message-input-row"],[1,"str-chat__loading-channel-message-input"],[1,"str-chat__loading-channel-message-send"]],template:function(t,i){if(t&1&&(mo(RQ),K(0,"div"),tt(1,"async"),de(2,zQ,13,9,"div",3),tt(3,"async"),tt(4,"async"),tt(5,"async"),de(6,HQ,8,14,"ng-template",null,0,mt),Q()),t&2){let r=Xe(7);ha("str-chat str-chat-channel messaging str-chat__channel str-chat__theme-",ht(1,5,i.theme$),""),V(2),H("ngIf",ht(3,7,i.isError$)===!1&&ht(4,9,i.isInitializing$)===!1&&ht(5,11,i.isActiveChannel$)===!0)("ngIfElse",r)}},dependencies:[Vte,zte,Mb,Tb,Zi,Ii,Fr,Xs],encapsulation:2}),e})(),NT=e=>{let n="",t=e.map(s=>s.name||s.id).slice(0,5),i=e.length-t.length;return n=t.join(", "),i>0&&(n+=` +${i}`),n},BT=(e,n)=>{var t;if(!((t=e.data)===null||t===void 0)&&t.name)return e.data.name;if(e.state.members&&Object.keys(e.state.members).length>0){let i=Object.values(e.state.members).map(r=>r.user||{id:r.user_id}).filter(r=>r.id!==n?.id);return NT(i)}return e.id},T3=(()=>{class e{constructor(){this.isOpenSubject=new Ct(!1),this.isOpen$=this.isOpenSubject.asObservable().pipe(xu()),this.isOpen$.pipe(ci(t=>t)).subscribe(()=>{this.watchForOutsideClicks()})}open(){this.isOpenSubject.next(!0)}close(){this.isOpenSubject.next(!1)}toggle(){this.isOpenSubject.getValue()?this.close():this.open()}setMenuElement(t){this.menuElement=t}channelSelected(){this.close()}watchForOutsideClicks(){if(!this.menuElement)return;let t=i=>{this.menuElement.contains(i.target)||(this.close(),window.removeEventListener("click",t))};window.addEventListener("click",t),this.isOpen$.pipe(ci(i=>!i),Qr()).subscribe(()=>window.removeEventListener("click",t))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),S3=(()=>{class e{constructor(t,i,r,s,l){this.channelService=t,this.channelListToggleService=i,this.customTemplatesService=r,this.cdRef=s,this.chatClientService=l,this.subscriptions=[],this.channelService.activeChannel$.subscribe(d=>{var f,v;this.activeChannel=d;let x=(v=(f=this.activeChannel)===null||f===void 0?void 0:f.data)===null||v===void 0?void 0:v.own_capabilities;x&&(this.canReceiveConnectEvents=x.indexOf("connect-events")!==-1)})}ngOnInit(){this.subscriptions.push(this.customTemplatesService.channelActionsTemplate$.subscribe(t=>{this.channelActionsTemplate=t,this.cdRef.detectChanges()})),this.subscriptions.push(this.customTemplatesService.channelHeaderInfoTemplate$.subscribe(t=>{this.channelHeaderInfoTemplate=t,this.cdRef.detectChanges()}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}toggleMenu(t){t.stopPropagation(),this.channelListToggleService.toggle()}getChannelActionsContext(){return{channel:this.activeChannel}}getChannelInfoContext(){return{channel:this.activeChannel}}get memberCountParam(){var t,i;return{memberCount:((i=(t=this.activeChannel)===null||t===void 0?void 0:t.data)===null||i===void 0?void 0:i.member_count)||0}}get watcherCountParam(){var t,i;return{watcherCount:((i=(t=this.activeChannel)===null||t===void 0?void 0:t.state)===null||i===void 0?void 0:i.watcher_count)||0}}get displayText(){return this.activeChannel?BT(this.activeChannel,this.chatClientService.chatClient.user):""}get avatarName(){var t,i;return(i=(t=this.activeChannel)===null||t===void 0?void 0:t.data)===null||i===void 0?void 0:i.name}}return e.\u0275fac=function(t){return new(t||e)(Ce(Or),Ce(T3),Ce(Cr),Ce(pi),Ce(Wa))},e.\u0275cmp=Wt({type:e,selectors:[["stream-channel-header"]],ngContentSelectors:Cb,decls:12,vars:8,consts:[["defaultChannelInfo",""],[1,"str-chat__header-livestream","str-chat__channel-header"],[1,"str-chat__header-hamburger",3,"click","keyup.enter"],["icon","menu"],["type","channel","location","channel-header",3,"imageUrl","name","channel","size"],[1,"str-chat__header-livestream-left","str-chat__channel-header-end"],["data-testid","name",1,"str-chat__header-livestream-left--title","str-chat__channel-header-title"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],["data-testid","info",1,"str-chat__header-livestream-left--members","str-chat__channel-header-info"]],template:function(t,i){if(t&1){let r=kt();mo(),K(0,"div",1)(1,"div",2),nt("click",function(l){return Le(r),Ne(i.toggleMenu(l))})("keyup.enter",function(l){return Le(r),Ne(i.toggleMenu(l))}),Me(2,"stream-icon-placeholder",3),Q(),Qs(3),Me(4,"stream-avatar-placeholder",4),K(5,"div",5)(6,"p",6),je(7),Q(),de(8,qQ,1,0,"ng-container",7)(9,GQ,4,8,"ng-template",null,0,mt),Q(),de(11,ZQ,2,2,"ng-container",8),Q()}if(t&2){let r=Xe(10);V(4),Oi("imageUrl",i.activeChannel==null||i.activeChannel.data==null?null:i.activeChannel.data.image),Oi("name",i.avatarName),H("channel",i.activeChannel)("size",40),V(3),Rt(" ",i.displayText," "),V(),H("ngTemplateOutlet",i.channelHeaderInfoTemplate||r)("ngTemplateOutletContext",i.getChannelInfoContext()),V(3),H("ngIf",i.channelActionsTemplate)}},dependencies:[xo,Np,Ii,Zi,Xs],encapsulation:2}),e})(),O3=(e,n)=>e.getDate()!==n.getDate()?!0:e.getFullYear()!==n.getFullYear()||e.getMonth()!==n.getMonth(),I3=(()=>{class e{constructor(){this.displayAs="text"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();wb.default.extend(m3.default);wb.default.extend(g3.default);var OT=(e,n="date-time")=>{let t=(0,wb.default)(e);switch(n){case"date":return t.calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"MM/DD/YYYY"});case"date-time":return t.calendar();case"time":return t.format("h:mm A")}},jT=(()=>{class e{constructor(){}parseTime(t){return this.customTimeParser?this.customTimeParser(t):OT(t,"time")}parseDate(t){return this.customDateParser?this.customDateParser(t):OT(t,"date")}parseDateTime(t){return this.customDateTimeParser?this.customDateTimeParser(t):OT(t,"date-time")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ute=(()=>{class e{constructor(t,i,r,s,l,d){this.channelService=t,this.ngZone=i,this.chatClientService=r,this.customTemplatesService=l,this.dateParser=d,this.isActive=!1,this.isUnreadMessageWasCalled=!1,this.isUnread=!1,this.latestMessageText="streamChat.Nothing yet...",this.subscriptions=[],this.canSendReadEvents=!0,this.displayAs=s.displayAs}ngOnInit(){var t,i,r,s;this.subscriptions.push(this.chatClientService.user$.subscribe(f=>{f?.id!==this.userId&&(this.userId=f?.id)})),this.subscriptions.push(this.channelService.activeChannel$.subscribe(f=>{var v;return this.isActive=f?.id===((v=this.channel)===null||v===void 0?void 0:v.id)}));let l=(i=(t=this.channel)===null||t===void 0?void 0:t.state)===null||i===void 0?void 0:i.latestMessages;l&&l.length>0&&this.setLatestMessage(l[l.length-1]),this.updateUnreadState();let d=((s=(r=this.channel)===null||r===void 0?void 0:r.data)===null||s===void 0?void 0:s.own_capabilities)||[];this.canSendReadEvents=d.indexOf("read-events")!==-1,this.subscriptions.push(this.channel.on("message.new",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("message.updated",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("message.deleted",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("channel.truncated",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("message.read",()=>this.ngZone.run(()=>{this.isUnreadMessageWasCalled=!1,this.updateUnreadState()}))),this.subscriptions.push(this.chatClientService.events$.pipe(ci(f=>{var v;return f.eventType==="notification.mark_unread"&&this.channel.id===((v=f.event)===null||v===void 0?void 0:v.channel_id)})).subscribe(()=>{this.ngZone.run(()=>{this.isUnreadMessageWasCalled=!0,this.updateUnreadState()})}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}get avatarImage(){var t,i;return(i=(t=this.channel)===null||t===void 0?void 0:t.data)===null||i===void 0?void 0:i.image}get avatarName(){var t,i;return(i=(t=this.channel)===null||t===void 0?void 0:t.data)===null||i===void 0?void 0:i.name}get title(){return this.channel?BT(this.channel,this.chatClientService.chatClient.user):""}setAsActiveChannel(){this.channelService.setAsActiveChannel(this.channel)}handleMessageEvent(t){this.ngZone.run(()=>{var i,r,s;if(((i=this.channel)===null||i===void 0?void 0:i.state.latestMessages.length)===0){this.latestMessage=void 0,this.latestMessageStatus=void 0,this.latestMessageText="streamChat.Nothing yet...",this.latestMessageTime=void 0;return}let l=(r=this.channel)===null||r===void 0?void 0:r.state.latestMessages[((s=this.channel)===null||s===void 0?void 0:s.state.latestMessages.length)-1];!t.message||l?.id!==t.message.id||(this.setLatestMessage(l),this.updateUnreadState())})}setLatestMessage(t){this.latestMessage=t,t?.deleted_at?this.latestMessageText="streamChat.Message deleted":t?.text?this.latestMessageText=Hl(t,this.channel,this.chatClientService.chatClient.user)||t.text:t?.attachments&&t.attachments.length&&(this.latestMessageText="streamChat.\u{1F3D9} Attachment..."),this.latestMessage&&this.latestMessage.type==="regular"?this.latestMessageTime=O3(new Date,this.latestMessage.created_at)?this.dateParser.parseDate(this.latestMessage.created_at):this.dateParser.parseTime(this.latestMessage.created_at):this.latestMessageTime=void 0}updateUnreadState(){var t;if(this.channel&&this.latestMessage&&((t=this.latestMessage.user)===null||t===void 0?void 0:t.id)===this.userId&&this.latestMessage.status==="received"&&this.latestMessage.type==="regular"?this.latestMessageStatus=Fp(this.latestMessage,this.channel).length>0?"read":"delivered":this.latestMessageStatus=void 0,this.isActive&&!this.isUnreadMessageWasCalled||!this.canSendReadEvents){this.unreadCount=0,this.isUnread=!1;return}this.unreadCount=this.channel.countUnread(),this.isUnread=!!this.unreadCount}}return e.\u0275fac=function(t){return new(t||e)(Ce(Or),Ce(On),Ce(Wa),Ce(I3),Ce(Cr),Ce(jT))},e.\u0275cmp=Wt({type:e,selectors:[["stream-channel-preview"]],inputs:{channel:"channel"},decls:8,vars:22,consts:[["defaultChannelInfo",""],["asHTML",""],["data-testid","channel-preview-container",1,"str-chat__channel-preview-messenger","str-chat__channel-preview",3,"click"],[1,"str-chat__channel-preview-messenger--left"],["type","channel","location","channel-preview",3,"name","imageUrl","channel","size"],[1,"str-chat__channel-preview-messenger--right","str-chat__channel-preview-end"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__channel-preview-end-first-row"],[1,"str-chat__channel-preview-messenger--name"],["data-testid","channel-preview-title"],["data-testid","unread-badge","class","str-chat__channel-preview-unread-badge",4,"ngIf"],[1,"str-chat__channel-preview-end-second-row"],["data-testid","latest-message",1,"str-chat__channel-preview-messenger--last-message"],[4,"ngIf","ngIfElse"],["data-testid","latest-message-status",3,"class",4,"ngIf"],["data-testid","latest-message-time","class","str-chat__channel-preview-messenger--time",4,"ngIf"],["data-testid","unread-badge",1,"str-chat__channel-preview-unread-badge"],["data-testid","html-content",3,"innerHTML"],["data-testid","latest-message-status"],[3,"icon"],["data-testid","latest-message-time",1,"str-chat__channel-preview-messenger--time"]],template:function(t,i){if(t&1){let r=kt();K(0,"button",2),nt("click",function(){return Le(r),Ne(i.setAsActiveChannel())}),K(1,"div",3),Me(2,"stream-avatar-placeholder",4),Q(),K(3,"div",5),de(4,KQ,1,0,"ng-container",6),tt(5,"async"),de(6,nJ,12,6,"ng-template",null,0,mt),Q()()}if(t&2){let r=Xe(7);Rn("str-chat__channel-preview-messenger--active",i.isActive)("str-chat__channel-preview--active",i.isActive)("str-chat__channel-preview-messenger--unread",i.isUnread),V(2),Oi("name",i.avatarName),Oi("imageUrl",i.avatarImage),H("channel",i.channel)("size",49),V(2),H("ngTemplateOutlet",ht(5,12,i.customTemplatesService.channelPreviewInfoTemplate$)||r)("ngTemplateOutletContext",rP(14,YQ,i.title,i.channel,i.unreadCount,i.latestMessageText,i.latestMessageStatus,i.latestMessageTime,i.latestMessage))}},dependencies:[Np,xo,Ii,Zi,Fr,Xs],encapsulation:2}),e})(),E3=(()=>{class e{constructor(t,i,r,s){this.channelService=t,this.channelListToggleService=i,this.customTemplatesService=r,this.themeService=s,this.isLoadingMoreChannels=!1,this.subscriptions=[],this.theme$=this.themeService.theme$,this.isOpen$=this.channelListToggleService.isOpen$,this.channels$=this.channelService.channels$,this.hasMoreChannels$=this.channelService.hasMoreChannels$,this.isError$=this.channelService.channelQueryState$.pipe(Ft(l=>!this.isLoadingMoreChannels&&l?.state==="error")),this.isInitializing$=this.channelService.channelQueryState$.pipe(Ft(l=>!this.isLoadingMoreChannels&&l?.state==="in-progress")),this.subscriptions.push(this.customTemplatesService.channelPreviewTemplate$.subscribe(l=>this.customChannelPreviewTemplate=l))}ngAfterViewInit(){this.channelListToggleService.setMenuElement(this.container.nativeElement)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}loadMoreChannels(){return sn(this,void 0,void 0,function*(){this.isLoadingMoreChannels=!0,yield this.channelService.loadMoreChannels(),this.isLoadingMoreChannels=!1})}trackByChannelId(t,i){return i.cid}channelSelected(){this.channelListToggleService.channelSelected()}}return e.\u0275fac=function(t){return new(t||e)(Ce(Or),Ce(T3),Ce(Cr),Ce(Gc))},e.\u0275cmp=Wt({type:e,selectors:[["stream-channel-list"]],viewQuery:function(t,i){if(t&1&&bi(kT,5),t&2){let r;ui(r=di())&&(i.container=r.first)}},ngContentSelectors:rJ,decls:15,vars:15,consts:[["container",""],["statusIndicator",""],["chatDown",""],["loadingChannels",""],["loadingChannel",""],["defaultTemplate",""],["loadingIndicator",""],["data-testid","channel-list-container"],["class","str-chat__channel-list-messenger",4,"ngIf","ngIfElse"],[1,"str-chat__channel-list-messenger"],[1,"str-chat__channel-list-messenger__main"],["class","str-chat__channel-list-empty",4,"ngIf"],["class","str-chat__channel-list-empty-v1","data-testid","empty-channel-list-indicator",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","str-chat__load-more-button","data-testid","load-more",3,"click","keyup.enter",4,"ngIf"],[1,"str-chat__channel-list-empty"],["icon","chat-bubble"],["data-testid","empty-channel-list-indicator"],["data-testid","empty-channel-list-indicator",1,"str-chat__channel-list-empty-v1"],[3,"click","keyup.enter"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["data-testclass","channel-preview",3,"channel"],["data-testid","load-more",1,"str-chat__load-more-button",3,"click","keyup.enter"],["data-testid","load-more-button",1,"str-chat__load-more-button__button","str-chat__cta-button",3,"disabled"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[4,"ngTemplateOutlet"],["data-testid","chatdown-container",1,"str-chat__down"],[1,"str-chat__down-main"],["icon","connection-error"],["data-testid","loading-indicator",1,"str-chat__loading-channels"],[1,"str-chat__loading-channels-item","str-chat__channel-preview-loading"],[1,"str-chat__loading-channels-avatar"],[1,"str-chat__loading-channels-meta","str-chat__channel-preview-end-loading"],[1,"str-chat__loading-channels-username"],[1,"str-chat__loading-channels-status"]],template:function(t,i){if(t&1&&(mo(iJ),K(0,"div",7,0),tt(2,"async"),tt(3,"async"),de(4,fJ,12,13,"div",8),tt(5,"async"),tt(6,"async"),Q(),de(7,yJ,4,6,"ng-template",null,1,mt)(9,wJ,10,7,"ng-template",null,2,mt)(11,DJ,4,3,"ng-template",null,3,mt)(13,TJ,5,0,"ng-template",null,4,mt)),t&2){let r=Xe(8);ha("str-chat str-chat__channel-list str-chat-channel-list messaging str-chat__theme-",ht(2,7,i.theme$),""),Rn("str-chat-channel-list--open",ht(3,9,i.isOpen$)===!0),V(4),H("ngIf",ht(5,11,i.isError$)===!1&&ht(6,13,i.isInitializing$)===!1)("ngIfElse",r)}},dependencies:[Mb,Ute,FT,xo,Zi,ys,Ii,Fr,Xs],encapsulation:2}),e})(),$te=(()=>{class e{constructor(){this.reactions$=new Ct({like:"\u{1F44D}",angry:"\u{1F620}",love:"\u2764\uFE0F",haha:"\u{1F602}",wow:"\u{1F62E}",sad:"\u{1F61E}"})}set reactions(t){this.reactions$.next(t)}get reactions(){return this.reactions$.getValue()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Hte=(()=>{class e{constructor(t,i,r,s,l){this.cdRef=t,this.channelService=i,this.messageReactionsService=r,this.customTemplatesService=s,this.themeService=l,this.messageReactionCounts={},this.isSelectorOpen=!1,this.latestReactions=[],this.ownReactions=[],this.isSelectorOpenChange=new Zt,this.popperTriggerHover=Ga.hover,this.popperPlacementAuto=kg.AUTO,this.isLoading=!0,this.reactions=[],this.shouldHandleReactionClick=!0,this.existingReactions=[],this.reactionsCount=0,this.reactionOptions=[],this.subscriptions=[],this.isViewInited=!1,this.isOpenChange=d=>{this.selectedReactionType=d?this.selectedReactionType:void 0},this.eventHandler=d=>{var f;!((f=this.selectorContainer)===null||f===void 0)&&f.nativeElement.contains(d.target)||this.isSelectorOpenChange.emit(!1)}}ngOnInit(){this.subscriptions.push(this.messageReactionsService.reactions$.subscribe(t=>{this.reactionOptions=Object.keys(t),this.setExistingReactions(),this.isViewInited&&this.cdRef.detectChanges()}))}ngOnChanges(t){if(t.isSelectorOpen&&(this.isSelectorOpen?setTimeout(()=>this.watchForOutsideClicks()):this.stopWatchForOutsideClicks()),t.messageReactionCounts&&this.setExistingReactions(),t.messageReactionCounts&&this.messageReactionCounts){let i=Object.keys(this.messageReactionCounts).reduce((r,s)=>r+(this.messageReactionCounts[s]||0),0);this.shouldHandleReactionClick=i<=Or.MAX_MESSAGE_REACTIONS_TO_FETCH||!!this.messageReactionsService.customReactionClickHandler}}ngAfterViewInit(){this.isViewInited=!0}ngAfterViewChecked(){this.tooltipText&&!this.tooltipPositions&&(this.setTooltipPosition(),this.cdRef.detectChanges())}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}getLatestUserByReaction(t){var i;return(i=this.latestReactions.find(r=>r.type===t&&r.user))===null||i===void 0?void 0:i.user}getEmojiByReaction(t){return this.messageReactionsService.reactions[t]}reactionSelected(t){this.shouldHandleReactionClick&&this.themeService.themeVersion!=="1"&&this.messageId&&(this.messageReactionsService.customReactionClickHandler?this.messageReactionsService.customReactionClickHandler({messageId:this.messageId,reactionType:t}):(this.selectedReactionType=t,this.fetchAllReactions()))}getUsersByReaction(t){return this.latestReactions.filter(i=>i.type===t).map(i=>{var r,s;return((r=i.user)===null||r===void 0?void 0:r.name)||((s=i.user)===null||s===void 0?void 0:s.id)}).filter(i=>!!i).join(", ")}getAllUsersByReaction(t){if(!t)return[];let i=this.reactions.filter(r=>r.type===t).map(r=>r.user).filter(r=>!!r);return i.sort((r,s)=>{var l,d;let f=(l=r.name)===null||l===void 0?void 0:l.toLowerCase(),v=(d=s.name)===null||d===void 0?void 0:d.toLowerCase();return f?v?f===v?0:f<v?-1:1:-1:1}),i}showTooltip(t,i){this.currentTooltipTarget=t.target,this.tooltipText=this.getUsersByReaction(i)}hideTooltip(){this.tooltipText=void 0,this.currentTooltipTarget=void 0,this.tooltipPositions=void 0}trackByMessageReaction(t,i){return i}trackByUserId(t,i){return i.id}react(t){return sn(this,void 0,void 0,function*(){this.ownReactions.find(i=>i.type===t)?yield this.channelService.removeReaction(this.messageId,t):yield this.channelService.addReaction(this.messageId,t),this.isSelectorOpenChange.emit(!1)})}isOwnReaction(t){return!!this.ownReactions.find(i=>i.type===t)}watchForOutsideClicks(){window.addEventListener("click",this.eventHandler)}stopWatchForOutsideClicks(){window.removeEventListener("click",this.eventHandler)}setTooltipPosition(){var t,i,r;let s=(t=this.selectorTooltip)===null||t===void 0?void 0:t.nativeElement.getBoundingClientRect(),l=(i=this.currentTooltipTarget)===null||i===void 0?void 0:i.getBoundingClientRect(),d=(r=this.selectorContainer)===null||r===void 0?void 0:r.nativeElement.getBoundingClientRect();if(!s||!l||!d)return;let f=s.width===d.width||s.x<d.x?0:l.left+l.width/2-d.left-s.width/2,v=l.x-s.x+l.width/2-f;this.tooltipPositions={tooltip:f,arrow:v}}fetchAllReactions(){return sn(this,void 0,void 0,function*(){if(this.messageId){this.isLoading=!0;try{this.reactions=yield this.channelService.getMessageReactions(this.messageId)}catch{this.selectedReactionType=void 0}finally{this.isLoading=!1,this.cdRef.detectChanges()}}})}setExistingReactions(){this.existingReactions=Object.keys(this.messageReactionCounts).filter(t=>this.reactionOptions.indexOf(t)!==-1).filter(t=>this.messageReactionCounts[t]>0),this.reactionsCount=this.existingReactions.reduce((t,i)=>t+this.messageReactionCounts[i],0)}}return e.\u0275fac=function(t){return new(t||e)(Ce(pi),Ce(Or),Ce($te),Ce(Cr),Ce(Gc))},e.\u0275cmp=Wt({type:e,selectors:[["stream-message-reactions"]],viewQuery:function(t,i){if(t&1&&(bi(SJ,5),bi(OJ,5)),t&2){let r;ui(r=di())&&(i.selectorContainer=r.first),ui(r=di())&&(i.selectorTooltip=r.first)}},inputs:{messageId:"messageId",messageReactionCounts:"messageReactionCounts",isSelectorOpen:"isSelectorOpen",latestReactions:"latestReactions",ownReactions:"ownReactions"},outputs:{isSelectorOpenChange:"isSelectorOpenChange"},features:[ni],decls:7,vars:3,consts:[["defaultModal",""],["modalContent",""],["selectorContainer",""],["selectorTooltip",""],["allUsers",""],["reactions",""],["class","str-chat__reaction-list str-chat__message-reactions-container","data-testid","reaction-list",3,"str-chat__reaction-list--reverse","str-chat__reaction-list-hidden",4,"ngIf"],["class","str-chat__reaction-selector str-chat__message-reaction-selector","data-testid","reaction-selector",4,"ngIf"],[4,"ngIf"],["data-testid","reaction-list",1,"str-chat__reaction-list","str-chat__message-reactions-container"],[1,"str-chat__message-reactions"],["class","str-chat__message-reaction","data-testclass","emoji",3,"ngStyle","str-chat__message-reaction-own","click","keyup.enter",4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","reactions-count",1,"str-chat__reaction-list--counter"],["data-testclass","emoji",1,"str-chat__message-reaction",3,"click","keyup.enter","ngStyle"],[1,"emoji","str-chat__message-reaction-emoji"],["data-testclass","reaction-list-reaction-count",1,"str-chat__message-reaction-count"],["data-testid","reaction-selector",1,"str-chat__reaction-selector","str-chat__message-reaction-selector"],["data-testid","tooltip","class","str-chat__reaction-selector-tooltip",3,"ngStyle",4,"ngIf"],[1,"str-chat__message-reactions-list","str-chat__message-reactions-options"],["class",`
        str-chat__message-reactions-option
        str-chat__message-reactions-list-item
        str-chat__emoji
      `,"data-testclass","emoji-option",3,"str-chat__message-reactions-option-selected","click","keyup.enter",4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","tooltip",1,"str-chat__reaction-selector-tooltip",3,"ngStyle"],[1,"arrow",3,"ngStyle"],[1,"latest-user-username"],["data-testclass","emoji-option",1,"str-chat__message-reactions-option","str-chat__message-reactions-list-item","str-chat__emoji",3,"click","keyup.enter"],["class","latest-user str-chat__message-reactions-last-user",3,"click","keyup.enter","mouseenter","mouseleave",4,"ngIf"],[1,"emoji","str-chat__emoji-selector-emoji-angular","str-chat__message-reaction-emoji"],["class","str-chat__message-reactions-list-item__count",4,"ngIf"],[1,"latest-user","str-chat__message-reactions-last-user",3,"click","keyup.enter","mouseenter","mouseleave"],["location","reaction",3,"imageUrl","name","size"],[1,"str-chat__message-reactions-list-item__count"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__message-reactions-details-modal",3,"isOpenChange","isOpen","content"],[1,"str-chat__message-reactions-details"],[1,"str-chat__message-reactions-details-reaction-types"],["class","str-chat__message-reactions-details-reaction-type",3,"ngStyle","str-chat__message-reactions-details-reaction-type--selected","click","keyup.enter",4,"ngFor","ngForOf","ngForTrackBy"],[1,"emoji","str-chat__message-reaction-emoji","str-chat__message-reaction-emoji-big"],["data-testid","all-reacting-users",1,"str-chat__message-reactions-details-reacting-users"],[4,"ngIf","ngIfElse"],[1,"str-chat__message-reactions-details-reaction-type",3,"click","keyup.enter","ngStyle"],[1,"str-chat__message-reaction-count"],["class","str-chat__message-reactions-details-reacting-user",4,"ngFor","ngForOf","ngForTrackBy"],[1,"str-chat__message-reactions-details-reacting-user"],["data-testclass","avatar","type","user","location","reaction",1,"str-chat__avatar","str-chat__avatar--circle",3,"size","imageUrl","name","user"],["data-testclass","reaction-user-username",1,"str-chat__user-item--name"]],template:function(t,i){t&1&&de(0,AJ,6,7,"div",6)(1,BJ,5,3,"div",7)(2,VJ,3,10,"ng-container",8)(3,zJ,1,2,"ng-template",null,0,mt)(5,GJ,10,5,"ng-template",null,1,mt),t&2&&(H("ngIf",i.existingReactions.length>0),V(),H("ngIf",i.isSelectorOpen),V(),H("ngIf",i.selectedReactionType))},dependencies:[Np,Db,RT,Zi,ys,Ec,Ii,Fr],encapsulation:2}),e})(),qte=(()=>{class e{constructor(t,i,r,s,l,d,f,v,x){this.chatClientService=t,this.channelService=i,this.customTemplatesService=r,this.cdRef=s,this.dateParser=d,this.ngZone=f,this.messageService=v,this.messageActionsService=x,this.enabledMessageActions=[],this.mode="main",this.isHighlighted=!1,this.customActions=[],this.isActionBoxOpen=!1,this.isEditedFlagOpened=!1,this.isReactionSelectorOpen=!1,this.visibleMessageActionsCount=0,this.messageTextParts=[],this.popperTriggerClick=Ga.click,this.popperTriggerHover=Ga.hover,this.popperPlacementAuto=kg.AUTO,this.popperPlacementTop=kg.TOP,this.shouldDisplayTranslationNotice=!1,this.displayedMessageTextContent="original",this.imageAttachmentModalState="closed",this.shouldDisplayThreadLink=!1,this.isSentByCurrentUser=!1,this.readByText="",this.lastReadUser=void 0,this.isOnlyReadByMe=!1,this.isReadByMultipleUsers=!1,this.isMessageDeliveredAndRead=!1,this.parsedDate="",this.pasedEditedDate="",this.areOptionsVisible=!1,this.hasAttachment=!1,this.hasReactions=!1,this.replyCountParam={replyCount:void 0},this.canDisplayReadStatus=!1,this.subscriptions=[],this.isViewInited=!1,this.urlRegexp=/(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#/%=~_|$?!:,.])*(?:\([-A-Z0-9+&@#/%=~_|$?!:,.]*\)|[A-Z0-9+&@#/%=~_|$])/gim,this.emojiRegexp=new RegExp(dL(),"g"),this.themeVersion=l.themeVersion,this.displayAs=this.messageService.displayAs}ngOnInit(){this.subscriptions.push(this.chatClientService.user$.subscribe(t=>{t?.id!==this.userId&&(this.userId=t?.id,this.setIsSentByCurrentUser(),this.setLastReadUser(),this.isViewInited&&this.cdRef.detectChanges())}))}ngOnChanges(t){var i,r,s,l,d,f,v;if(t.message){this.shouldDisplayTranslationNotice=!1,this.displayedMessageTextContent="original",this.createMessageParts();let x=(r=(i=this.message)===null||i===void 0?void 0:i.quoted_message)===null||r===void 0?void 0:r.attachments;this.quotedMessageAttachments=x&&x.length?[x[0]]:[],this.setIsSentByCurrentUser(),this.setLastReadUser(),this.readByText=!((s=this.message)===null||s===void 0)&&s.readBy?NT(this.message.readBy):"",this.isOnlyReadByMe=!!(this.message&&this.message.readBy&&this.message.readBy.length===0),this.isReadByMultipleUsers=!!(this.message&&this.message.readBy&&this.message.readBy.length>1),this.isMessageDeliveredAndRead=!!(this.message&&this.message.readBy&&this.message.status==="received"&&this.message.readBy.length>0),this.parsedDate=this.message&&this.message.created_at&&this.dateParser.parseDateTime(this.message.created_at)||"",this.pasedEditedDate=this.message&&this.message.message_text_updated_at&&this.dateParser.parseDateTime(new Date(this.message.message_text_updated_at))||"",this.hasAttachment=!!(!((l=this.message)===null||l===void 0)&&l.attachments)&&!!this.message.attachments.length,this.hasReactions=!!(!((d=this.message)===null||d===void 0)&&d.reaction_counts)&&Object.keys(this.message.reaction_counts).length>0,this.replyCountParam={replyCount:(f=this.message)===null||f===void 0?void 0:f.reply_count}}t.enabledMessageActions&&(this.canReactToMessage=this.enabledMessageActions.indexOf("send-reaction")!==-1,this.canReceiveReadEvents=this.enabledMessageActions.indexOf("read-events")!==-1,this.canDisplayReadStatus=this.canReceiveReadEvents!==!1&&this.enabledMessageActions.indexOf("read-events")!==-1),(t.message||t.enabledMessageActions||t.mode)&&(this.shouldDisplayThreadLink=!!(!((v=this.message)===null||v===void 0)&&v.reply_count)&&this.mode!=="thread"),(t.message||t.mode)&&(this.areOptionsVisible=this.message?!(!this.message.type||this.message.type==="error"||this.message.type==="system"||this.message.type==="ephemeral"||this.message.status==="failed"||this.message.status==="sending"||this.mode==="thread"&&!this.message.parent_id):!1),(t.message||t.enabledMessageActions||t.customActions)&&(this.message?this.visibleMessageActionsCount=this.messageActionsService.getAuthorizedMessageActionsCount(this.message,this.enabledMessageActions):this.visibleMessageActionsCount=0)}ngAfterViewInit(){this.isViewInited=!0}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}messageActionsClicked(){this.message&&(this.messageActionsService.customActionClickHandler?this.messageActionsService.customActionClickHandler({message:this.message,enabledActions:this.enabledMessageActions,customActions:this.customActions,isMine:this.isSentByCurrentUser}):this.isActionBoxOpen=!this.isActionBoxOpen)}messageActionsBoxClicked(t){t.hide()}getAttachmentListContext(){var t,i,r;return{messageId:((t=this.message)===null||t===void 0?void 0:t.id)||"",attachments:((i=this.message)===null||i===void 0?void 0:i.attachments)||[],parentMessageId:(r=this.message)===null||r===void 0?void 0:r.parent_id,imageModalStateChangeHandler:s=>this.imageAttachmentModalState=s}}getMessageContext(){return{message:this.message,enabledMessageActions:this.enabledMessageActions,isHighlighted:this.isHighlighted,isLastSentMessage:this.isLastSentMessage,mode:this.mode,customActions:this.customActions,parsedDate:this.parsedDate}}getQuotedMessageAttachmentListContext(){var t,i,r,s;return{messageId:((i=(t=this.message)===null||t===void 0?void 0:t.quoted_message)===null||i===void 0?void 0:i.id)||"",attachments:this.quotedMessageAttachments,parentMessageId:(s=(r=this===null||this===void 0?void 0:this.message)===null||r===void 0?void 0:r.quoted_message)===null||s===void 0?void 0:s.parent_id}}getMessageReactionsContext(){var t,i,r,s;return{messageReactionCounts:((t=this.message)===null||t===void 0?void 0:t.reaction_counts)||{},latestReactions:((i=this.message)===null||i===void 0?void 0:i.latest_reactions)||[],isSelectorOpen:this.isReactionSelectorOpen,isSelectorOpenChangeHandler:l=>this.isReactionSelectorOpen=l,messageId:(r=this.message)===null||r===void 0?void 0:r.id,ownReactions:((s=this.message)===null||s===void 0?void 0:s.own_reactions)||[]}}messageClicked(){var t,i,r,s;((t=this.message)===null||t===void 0?void 0:t.status)==="failed"&&((i=this.message)===null||i===void 0?void 0:i.errorStatusCode)!==403?this.resendMessage():((r=this.message)===null||r===void 0?void 0:r.type)==="error"&&(!((s=this.message)===null||s===void 0)&&s.moderation_details)?this.openMessageBouncePrompt():this.isEditedFlagOpened=!this.isEditedFlagOpened}resendMessage(){this.channelService.resendMessage(this.message)}setAsActiveParentMessage(){this.channelService.setAsActiveParentMessage(this.message)}getMentionContext(t){return{content:t.content,user:t.user}}getMessageActionsBoxContext(){return{isOpen:this.isActionBoxOpen,isMine:this.isSentByCurrentUser,enabledActions:this.enabledMessageActions,message:this.message,displayedActionsCountChaneHanler:t=>{this.visibleMessageActionsCount=t,this.cdRef.detectChanges()},displayedActionsCountChangeHandler:t=>{this.visibleMessageActionsCount=t,this.cdRef.detectChanges()},customActions:this.customActions||[]}}getDeliveredStatusContext(){return{message:this.message}}getSendingStatusContext(){return{message:this.message}}getReadStatusContext(){return{message:this.message,readByText:this.readByText}}getMessageMetadataContext(){return{message:this.message}}jumpToMessage(t,i){this.channelService.jumpToMessage(t,i)}displayTranslatedMessage(){this.createMessageParts(!0)}displayOriginalMessage(){this.createMessageParts(!1)}openMessageBouncePrompt(){this.channelService.bouncedMessage$.next(this.message)}createMessageParts(t=!0){this.messageTextParts=void 0,this.messageText=void 0;let i=this.getMessageContent(t);if((!this.message.mentioned_users||this.message.mentioned_users.length===0)&&!i?.match(this.emojiRegexp)&&!i?.match(this.urlRegexp)){this.messageTextParts=void 0,this.messageText=i;return}if(i)if(!this.message.mentioned_users||this.message.mentioned_users.length===0)i=this.fixEmojiDisplay(i),i=this.wrapLinksWithAnchorTag(i),this.messageTextParts=[{content:i,type:"text"}];else{this.messageTextParts=[];let r=i;this.message.mentioned_users.forEach(s=>{let l=`@${s.name||s.id}`,d=r.substring(0,r.indexOf(l)),f=this.fixEmojiDisplay(d);f=this.wrapLinksWithAnchorTag(f),this.messageTextParts.push({content:f,type:"text"}),this.messageTextParts.push({content:l,type:"mention",user:s}),r=r.replace(d+l,"")}),r&&(r=this.fixEmojiDisplay(r),r=this.wrapLinksWithAnchorTag(r),this.messageTextParts.push({content:r,type:"text"}))}}getMessageContent(t){var i,r;let s=(i=this.message)===null||i===void 0?void 0:i.text;if(t){let l=(r=this.message)===null||r===void 0?void 0:r.translation;return l&&(this.shouldDisplayTranslationNotice=!0,this.displayedMessageTextContent="translation"),l||s}else return this.displayedMessageTextContent="original",s}fixEmojiDisplay(t){let i=!!window.chrome&&typeof window.opr>"u";return t=t.replace(this.emojiRegexp,r=>`<span ${i?'class="str-chat__emoji-display-fix"':""}>${r}</span>`),t}wrapLinksWithAnchorTag(t){return this.displayAs==="html"||(t=t.replace(this.urlRegexp,i=>this.messageService.customLinkRenderer?this.messageService.customLinkRenderer(i):`<a href="${i}" target="_blank" rel="nofollow">${i}</a>`)),t}setIsSentByCurrentUser(){var t,i;this.isSentByCurrentUser=((i=(t=this.message)===null||t===void 0?void 0:t.user)===null||i===void 0?void 0:i.id)===this.userId}setLastReadUser(){var t,i;this.lastReadUser=(i=(t=this.message)===null||t===void 0?void 0:t.readBy)===null||i===void 0?void 0:i.filter(r=>r.id!==this.userId)[0]}}return e.\u0275fac=function(t){return new(t||e)(Ce(Wa),Ce(Or),Ce(Cr),Ce(pi),Ce(Gc),Ce(jT),Ce(On),Ce(I3),Ce(Rg))},e.\u0275cmp=Wt({type:e,selectors:[["stream-message"]],viewQuery:function(t,i){if(t&1&&bi(kT,5),t&2){let r;ui(r=di())&&(i.container=r.first)}},inputs:{message:"message",enabledMessageActions:"enabledMessageActions",isLastSentMessage:"isLastSentMessage",mode:"mode",isHighlighted:"isHighlighted",customActions:"customActions"},features:[ni],decls:17,vars:23,consts:[["container",""],["deletedMessage",""],["systemMessage",""],["quotedMessage",""],["messageDateAndSender",""],["messageStatus",""],["replyCountButton",""],["attachmentsTemplate",""],["defaultMessageReactions",""],["messageActionsToggle",""],["popperContent",""],["defaultMessageActionsBox",""],["defaultContent",""],["mention",""],["defaultMention",""],["asHTML",""],["defaultSystemMessage",""],["defaultAttachments",""],["sentStatus",""],["deliveredStatus",""],["defaultDeliveredStatus",""],["sendingStatus",""],["defaultSendingStatus",""],["readStatus",""],["defaultReadStatus",""],["data-testid","message-container"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["data-testid","avatar","type","user","location","message-sender",1,"str-chat-angular__avatar-host","str-chat__message-sender-avatar",3,"imageUrl","name","user"],[1,"str-chat__message-inner"],["class","str-chat__message-simple__actions str-chat__message-options","data-testid","message-options",3,"str-chat__message-actions-open",4,"ngIf"],[1,"str-chat__message-reactions-host"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__message-bubble","str-chat-angular__message-bubble"],["class","str-chat__message-text","tabindex","0",3,"str-chat__message-text--pointer-cursor","click","keyup.enter",4,"ngIf"],["class","str-chat__message-error-icon","icon","error",4,"ngIf"],[4,"ngTemplateOutlet"],["data-testid","message-options",1,"str-chat__message-simple__actions","str-chat__message-options"],["data-testid","message-actions-container",1,"str-chat__message-actions-container","str-chat__message-simple__actions__action","str-chat__message-simple__actions__action--options",3,"popperOnHidden","popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","popperHideOnMouseLeave","popperDisableAnimation"],["class","str-chat__message-actions-box-button","data-testid","action-icon",3,"click","keyup.enter",4,"ngIf"],["class",`
              str-chat__message-simple__actions__action
              str-chat__message-simple__actions__action--thread
              str-chat__message-reply-in-thread-button
            `,"data-testid","reply-in-thread",3,"click","keyup.enter",4,"ngIf"],["class",`
              str-chat__message-simple__actions__action
              str-chat__message-simple__actions__action--reactions
              str-chat__message-reactions-button
            `,"data-testid","reaction-icon",3,"click","keyup.enter",4,"ngIf"],[3,"isOpen","isMine","enabledActions","customActions","message","click",4,"ngIf"],[3,"click","isOpen","isMine","enabledActions","customActions","message"],["data-testid","action-icon",1,"str-chat__message-actions-box-button",3,"click","keyup.enter"],["icon","action-icon",1,"str-chat__message-action-icon"],["data-testid","reply-in-thread",1,"str-chat__message-simple__actions__action","str-chat__message-simple__actions__action--thread","str-chat__message-reply-in-thread-button",3,"click","keyup.enter"],["icon","reply-in-thread",1,"str-chat__message-action-icon"],["data-testid","reaction-icon",1,"str-chat__message-simple__actions__action","str-chat__message-simple__actions__action--reactions","str-chat__message-reactions-button",3,"click","keyup.enter"],["icon","reaction-icon",1,"str-chat__message-action-icon"],[3,"isSelectorOpenChange","messageReactionCounts","latestReactions","isSelectorOpen","messageId","ownReactions"],["tabindex","0",1,"str-chat__message-text",3,"click","keyup.enter"],["data-testid","inner-message",1,"str-chat__message-text-inner","str-chat__message-simple-text-inner"],["data-testid","client-error-message","class",`
                  str-chat__simple-message--error-message
                  str-chat__message--error-message
                `,4,"ngIf"],["data-testid","error-message","class",`
                  str-chat__simple-message--error-message
                  str-chat__message--error-message
                `,4,"ngIf"],["data-testid","text"],["data-testid","client-error-message",1,"str-chat__simple-message--error-message","str-chat__message--error-message"],["data-testid","error-message",1,"str-chat__simple-message--error-message","str-chat__message--error-message"],[4,"ngFor","ngForOf"],[3,"innerHTML",4,"ngIf","ngIfElse"],[3,"innerHTML"],[1,"str-chat__message-mention"],["data-testid","html-content",3,"innerHTML"],["icon","error",1,"str-chat__message-error-icon"],["data-testid","message-deleted-component"],["translate","",1,"str-chat__message--deleted-inner"],["data-testid","system-message",1,"str-chat__message--system"],[1,"str-chat__message--system__text"],[1,"str-chat__message--system__line"],[1,"str-chat__message--system__date"],["class","quoted-message str-chat__quoted-message-preview","data-testid","quoted-message-container",3,"mine","click","keyup.enter",4,"ngIf"],["data-testid","quoted-message-container",1,"quoted-message","str-chat__quoted-message-preview",3,"click","keyup.enter"],["data-testid","qouted-message-avatar","type","user","location","quoted-message-sender",1,"str-chat-angular__avatar-host","str-chat__message-sender-avatar",3,"imageUrl","name","size","user"],[1,"quoted-message-inner","str-chat__quoted-message-bubble"],["data-testid","quoted-message-text",3,"innerHTML"],[3,"imageModalStateChange","messageId","attachments","parentMessageId"],["class","str-chat__translation-notice","data-testid","translation-notice",4,"ngIf"],[1,"str-chat__message-data","str-chat__message-simple-data","str-chat__message-metadata"],["data-testid","sender","class","str-chat__message-simple-name str-chat__message-sender-name",4,"ngIf"],["data-testid","date",1,"str-chat__message-simple-timestamp","str-chat__message-simple-time"],["data-testid","translation-notice",1,"str-chat__translation-notice"],["data-testid","see-original","translate","",3,"click","keyup.enter",4,"ngIf"],["data-testid","see-translation","translate","",3,"click","keyup.enter",4,"ngIf"],["data-testid","see-original","translate","",3,"click","keyup.enter"],["data-testid","see-translation","translate","",3,"click","keyup.enter"],[1,"str-chat__custom-message-metadata"],["data-testid","sender",1,"str-chat__message-simple-name","str-chat__message-sender-name"],["data-testid","edited-flag","translate","",1,"str-chat__mesage-simple-edited"],["data-testid","edited-timestamp",1,"str-chat__message-edited-timestamp",3,"ngClass"],["translate",""],[3,"dateTime","title"],["class",`
          str-chat__message-simple-status
          str-chat__message-simple-status-angular
          str-chat__message-status
        `,"data-testid","delivered-indicator","tabindex","0",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover",4,"ngIf"],["data-testid","delivered-indicator","tabindex","0",1,"str-chat__message-simple-status","str-chat__message-simple-status-angular","str-chat__message-status",3,"hover","popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside"],[1,"str-chat__tooltip","str-chat__tooltip-angular"],["data-testid","delivered-icon","icon","delivered-icon"],["data-testid","sending-indicator","tabindex","0",1,"str-chat__message-simple-status","str-chat__message-simple-status-angular","str-chat__message-status",3,"hover","popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside"],["data-testid","loading-indicator"],["data-testid","read-indicator","tabindex","0",1,"str-chat__message-simple-status","str-chat__message-simple-status-angular","str-chat__message-status",3,"hover","popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside"],["data-testid","read-by-tooltip",1,"str-chat__tooltip","str-chat__tooltip-angular"],["icon","read-icon"],["class",`
      str-chat__message-simple-reply-button
      str-chat__message-replies-count-button-wrapper
    `,4,"ngIf"],[1,"str-chat__message-simple-reply-button","str-chat__message-replies-count-button-wrapper"],["class","str-chat__message-replies-count-button","data-testid","reply-count-button",3,"click",4,"ngIf"],["data-testid","reply-count-button",1,"str-chat__message-replies-count-button",3,"click"],["stream-icon-placeholder","","icon","reply",4,"ngIf"],["stream-icon-placeholder","","icon","reply"]],template:function(t,i){if(t&1&&(K(0,"div",25,0),de(2,PX,2,2,"ng-container",26),Q(),de(3,kX,3,0,"ng-template",null,1,mt)(5,FX,4,4,"ng-template",null,2,mt)(7,VX,1,1,"ng-template",null,3,mt)(9,QX,1,1,"ng-template",null,4,mt)(11,fee,1,1,"ng-template",null,5,mt)(13,vee,1,1,"ng-template",null,6,mt)(15,wee,4,4,"ng-template",null,7,mt)),t&2){let r=Xe(4);JE("str-chat__message-simple str-chat__message str-chat__message--",i.message==null?null:i.message.type," str-chat__message--",i.message==null?null:i.message.status," ",i.message!=null&&i.message.text?"str-chat__message--has-text":"has-no-text",""),Rn("str-chat__message--me",i.isSentByCurrentUser)("str-chat__message--other",!i.isSentByCurrentUser)("str-chat__message-simple--me",i.isSentByCurrentUser)("str-chat__message--has-attachment",i.hasAttachment)("str-chat__message--with-reactions",i.hasReactions)("str-chat__message--highlighted",i.isHighlighted)("str-chat__message-with-thread-link",i.shouldDisplayThreadLink)("str-chat__message-send-can-be-retried",(i.message==null?null:i.message.status)==="failed"&&(i.message==null?null:i.message.errorStatusCode)!==403||(i.message==null?null:i.message.type)==="error"&&(i.message==null?null:i.message.moderation_details)),V(2),H("ngIf",!(i.message!=null&&i.message.deleted_at))("ngIfElse",r)}},dependencies:[Np,MT,Rte,xo,Hte,M3,FT,Zi,Ii,gb,ys,Ip,$v,Fr,Xs],encapsulation:2,changeDetection:0}),e})();var Gte=(()=>{class e{constructor(){}transliterate(t){return e3(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Wte=(()=>{class e{constructor(t,i,r,s,l,d,f){this.channelService=t,this.chatClientService=i,this.transliterationService=r,this.emojiInputService=s,this.customTemplatesService=l,this.themeService=d,this.cdRef=f,this.class="str-chat__textarea str-chat__message-textarea-angular-host",this.value="",this.placeholder="",this.areMentionsEnabled=!0,this.mentionScope="channel",this.autoFocus=!0,this.valueChange=new Zt,this.send=new Zt,this.userMentions=new Zt,this.autocompleteKey="autocompleteLabel",this.mentionTriggerChar="@",this.commandTriggerChar="/",this.autocompleteConfig={mentions:[]},this.subscriptions=[],this.mentionedUsers=[],this.userMentionConfig={triggerChar:this.mentionTriggerChar,dropUp:!0,labelKey:this.autocompleteKey,returnTrigger:!0,mentionFilter:(v,x)=>this.filter(v,x),mentionSelect:(v,x)=>this.itemSelectedFromAutocompleteList(v,x)},this.slashCommandConfig={triggerChar:this.commandTriggerChar,dropUp:!0,labelKey:"name",returnTrigger:!0,mentionFilter:(v,x)=>this.filter(v,x),mentionSelect:(v,x)=>this.itemSelectedFromAutocompleteList(v,x)},this.searchTerm$=new Ct(""),this.searchTerm$.pipe(gh(300)).subscribe(v=>{v.startsWith(this.mentionTriggerChar)&&this.updateMentionOptions(v)}),this.subscriptions.push(this.channelService.activeChannel$.subscribe(v=>{var x;let O=((x=v?.getConfig())===null||x===void 0?void 0:x.commands)||[];this.slashCommandConfig.items=O.map(A=>Object.assign(Object.assign({},A),{[this.autocompleteKey]:A.name,type:"command"})),this.mentionedUsers=[],this.userMentions.next([...this.mentionedUsers]),this.updateMentionOptions(this.searchTerm$.getValue())})),this.subscriptions.push(this.emojiInputService.emojiInput$.subscribe(v=>{this.messageInput.nativeElement.focus();let{selectionStart:x}=this.messageInput.nativeElement;this.messageInput.nativeElement.setRangeText(v),this.messageInput.nativeElement.selectionStart=x+v.length,this.messageInput.nativeElement.selectionEnd=x+v.length,this.inputChanged()})),this.subscriptions.push(this.customTemplatesService.mentionAutocompleteItemTemplate$.subscribe(v=>this.mentionAutocompleteItemTemplate=v)),this.subscriptions.push(this.customTemplatesService.commandAutocompleteItemTemplate$.subscribe(v=>this.commandAutocompleteItemTemplate=v)),this.autocompleteConfig.mentions=[this.userMentionConfig,this.slashCommandConfig],this.themeVersion=this.themeService.themeVersion}ngOnChanges(t){t.areMentionsEnabled&&(this.areMentionsEnabled?(this.autocompleteConfig.mentions=[this.userMentionConfig,this.slashCommandConfig],this.autocompleteConfig=Object.assign({},this.autocompleteConfig)):(this.autocompleteConfig.mentions=[this.slashCommandConfig],this.autocompleteConfig=Object.assign({},this.autocompleteConfig))),t.mentionScope&&this.updateMentionOptions(this.searchTerm$.getValue()),t.value&&!this.value&&this.messageInput&&(this.messageInput.nativeElement.style.height="auto",this.updateMentionedUsersFromText())}ngAfterViewInit(){this.messageInput.nativeElement.scrollHeight>0&&this.adjustTextareaHeight()}filter(t,i){return i.filter(r=>this.transliterate(r.autocompleteLabel.toLowerCase()).includes(this.transliterate(t.toLowerCase())))}itemSelectedFromAutocompleteList(t,i=""){return i===this.mentionTriggerChar&&(this.mentionedUsers.push(t.user?t.user:t),this.userMentions.next([...this.mentionedUsers])),i+t.autocompleteLabel+(i===this.commandTriggerChar?" ":"")}autcompleteSearchTermChanged(t){t===this.mentionTriggerChar?this.updateMentionOptions():this.searchTerm$.next(t)}inputChanged(){this.valueChange.emit(this.messageInput.nativeElement.value),this.adjustTextareaHeight()}inputLeft(){this.updateMentionedUsersFromText()}enterHit(t){this.inputMode==="desktop"&&(t.preventDefault(),this.updateMentionedUsersFromText(),this.send.next())}adjustTextareaHeight(){this.themeVersion==="2"&&(this.messageInput.nativeElement.style.height="",this.messageInput.nativeElement.style.height=`${this.messageInput.nativeElement.scrollHeight}px`)}transliterate(t){return this.transliterationService?this.transliterationService.transliterate(t):t}updateMentionOptions(t){return sn(this,void 0,void 0,function*(){if(!this.areMentionsEnabled)return;t=t?.replace(this.mentionTriggerChar,"");let r=yield(this.mentionScope==="application"?l=>this.chatClientService.autocompleteUsers(l):l=>this.channelService.autocompleteMembers(l))(t||""),s=this.filter(t||"",r.map(l=>{let d=l.user?l.user:l;return Object.assign(Object.assign({},l),{autocompleteLabel:d.name||d.id,type:"mention"})}));this.userMentionConfig.items=s,this.autocompleteConfig.mentions=[this.userMentionConfig,this.slashCommandConfig],this.autocompleteConfig=Object.assign({},this.autocompleteConfig),this.cdRef.detectChanges()})}updateMentionedUsersFromText(){let t=[];this.mentionedUsers.forEach(i=>{let r=i.name||i.id;this.value.includes(`${this.mentionTriggerChar}${r}`)&&t.push(i)}),t.length!==this.mentionedUsers.length&&(this.userMentions.next([...t]),this.mentionedUsers=t)}}return e.\u0275fac=function(t){return new(t||e)(Ce(Or),Ce(Wa),Ce(Gte),Ce(IT),Ce(Cr),Ce(Gc),Ce(pi))},e.\u0275cmp=Wt({type:e,selectors:[["stream-autocomplete-textarea"]],viewQuery:function(t,i){if(t&1&&bi(Cee,5),t&2){let r;ui(r=di())&&(i.messageInput=r.first)}},hostVars:2,hostBindings:function(t,i){t&2&&vs(i.class)},inputs:{value:"value",placeholder:"placeholder",areMentionsEnabled:"areMentionsEnabled",inputMode:"inputMode",mentionScope:"mentionScope",autoFocus:"autoFocus"},outputs:{valueChange:"valueChange",send:"send",userMentions:"userMentions"},features:[ni],decls:9,vars:7,consts:[["input",""],["autocompleteItem",""],["defaultCommandTemplate",""],["defaultMentionTemplate",""],["data-testid","textarea","rows","1",1,"rta__textarea","str-chat__textarea__textarea","str-chat__angular-textarea","str-chat__message-textarea",3,"input","keydown.enter","searchTerm","blur","value","autofocus","placeholder","mentionConfig","mentionListTemplate"],[1,"rta","rta__item","str-chat__emojisearch__item",3,"ngSwitch"],["class","rta__entity",4,"ngSwitchCase"],[1,"rta__entity"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__slash-command"],[1,"str-chat__slash-command-header"],["data-testclass","command-name",1,"str-chat__slash-command-name"],[1,"str-chat__slash-command-args"],[1,"str-chat__user-item"],["data-testclass","avatar","type","user","location","autocomplete-item",1,"str-chat__avatar","str-chat__avatar--circle",3,"ngStyle","size","imageUrl","name","user"],["data-testclass","username",1,"str-chat__user-item--name"]],template:function(t,i){if(t&1){let r=kt();K(0,"textarea",4,0),tt(2,"translate"),nt("input",function(){return Le(r),Ne(i.inputChanged())})("keydown.enter",function(l){return Le(r),Ne(i.enterHit(l))})("searchTerm",function(l){return Le(r),Ne(i.autcompleteSearchTermChanged(l))})("blur",function(){return Le(r),Ne(i.inputLeft())}),Q(),de(3,Oee,3,3,"ng-template",null,1,mt)(5,Iee,7,3,"ng-template",null,2,mt)(7,Eee,4,8,"ng-template",null,3,mt)}if(t&2){let r=Xe(4);Oi("placeholder",ht(2,5,i.placeholder)),H("value",i.value||"")("autofocus",i.autoFocus)("mentionConfig",i.autocompleteConfig)("mentionListTemplate",r)}},dependencies:[Np,c3,Rx,EP,Ii,Ec,Xs],encapsulation:2}),e})(),Zte=(e,n,t,i={noGroupByUser:!1,lastReadMessageId:void 0,noGroupByReadState:!1})=>{var r,s,l,d,f,v;if(i.noGroupByUser||e.attachments&&e.attachments.length!==0)return"single";let x=!n||!f3(n.created_at,e.created_at)||n.type==="system"||n.attachments&&((r=n.attachments)===null||r===void 0?void 0:r.length)!==0||((s=e.user)===null||s===void 0?void 0:s.id)!==((l=n.user)===null||l===void 0?void 0:l.id)||n.type==="error"||n.deleted_at||n.id===i.lastReadMessageId&&!i.noGroupByReadState||n.message_text_updated_at||e.reaction_counts&&Object.keys(e.reaction_counts).length>0,O=!t||!f3(e.created_at,t.created_at)||t.type==="system"||t.attachments&&((d=t.attachments)===null||d===void 0?void 0:d.length)!==0||((f=e.user)===null||f===void 0?void 0:f.id)!==((v=t.user)===null||v===void 0?void 0:v.id)||t.type==="error"||t.deleted_at||e.id===i.lastReadMessageId&&!i.noGroupByReadState||e.message_text_updated_at||t.reaction_counts&&Object.keys(t.reaction_counts).length>0;return!x&&!O?e.deleted_at||e.type==="error"?"single":"middle":O?x||e.deleted_at||e.type==="error"?"single":"bottom":x?"top":""},f3=(e,n)=>e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate(),P3=(()=>{class e{constructor(t,i,r,s,l,d,f){this.channelService=t,this.chatClientService=i,this.customTemplatesService=r,this.dateParser=s,this.ngZone=l,this.cdRef=d,this.messageActionsService=f,this.mode="main",this.direction="bottom-to-top",this.messageOptionsTrigger="message-row",this.hideJumpToLatestButtonDuringScroll=!1,this.customMessageActions=[],this.displayDateSeparator=!0,this.displayUnreadSeparator=!0,this.dateSeparatorTextPos="center",this.openMessageListAt="last-message",this.hideUnreadCountForNotificationAndIndicator=!1,this.displayLoadingIndicator=!0,this.emptyMainMessageListTemplate=null,this.emptyThreadMessageListTemplate=null,this.enabledMessageActions=[],this.isEmpty=!0,this.newMessageCountWhileBeingScrolled=0,this.groupStyles=[],this.isNextMessageOnSeparateDate=[],this.isLoading=!1,this.isUnreadNotificationVisible=!0,this.isJumpingToLatestUnreadMessage=!1,this.isJumpToLatestButtonVisible=!0,this.subscriptions=[],this.isLatestMessageInList=!0,this.parsedDates=new Map,this.isViewInited=!1,this.messageNotificationJumpClicked=()=>{this.jumpToFirstUnreadMessage(),this.isUnreadNotificationVisible=!1},this.messageNotificationDismissClicked=()=>{this.isUnreadNotificationVisible=!1},this.usersTypingInChannel$=this.channelService.usersTypingInChannel$,this.usersTypingInThread$=this.channelService.usersTypingInThread$}get class(){return`str-chat-angular__main-panel-inner str-chat-angular__message-list-host str-chat__main-panel-inner ${this.isEmpty?"str-chat-angular__message-list-host--empty":""}`}ngOnInit(){this.subscriptions.push(this.channelService.activeChannel$.subscribe(t=>{var i,r,s,l,d,f,v;(r=(i=this.chatClientService.chatClient)===null||i===void 0?void 0:i.logger)===null||r===void 0||r.call(i,"info",`${t?.cid||"undefined"} selected`,{tags:`message list ${this.mode}`});let x=!1;if(this.channelId!==t?.id&&(x=!0,this.checkIfUnreadNotificationIsVisibleTimeout&&clearTimeout(this.checkIfUnreadNotificationIsVisibleTimeout),this.isUnreadNotificationVisible=!1,(d=(l=(s=this.chatClientService)===null||s===void 0?void 0:s.chatClient)===null||l===void 0?void 0:l.logger)===null||d===void 0||d.call(l,"info","new channel is different from prev channel, reseting scroll state",{tags:`message list ${this.mode}`}),this.parsedDates=new Map,this.resetScrollState(),this.channelId=t?.id,this.isViewInited&&this.cdRef.detectChanges()),this.mode==="main"){let U=this.channelService.activeChannelLastReadMessageId,te=this.channelService.activeChannelUnreadCount;(U!==this.lastReadMessageId||te!==this.unreadCount)&&(this.lastReadMessageId=U,this.unreadCount=te||0,x&&this.lastReadMessageId&&(this.openMessageListAt==="last-read-message"?this.jumpToFirstUnreadMessage():setTimeout(()=>{var ce,fe,ye,Re;let Ae=document.getElementById("stream-chat-new-message-indicator");(!Ae||Ae?.offsetTop<((fe=(ce=this.scrollContainer)===null||ce===void 0?void 0:ce.nativeElement)===null||fe===void 0?void 0:fe.scrollHeight)-((Re=(ye=this.scrollContainer)===null||ye===void 0?void 0:ye.nativeElement)===null||Re===void 0?void 0:Re.clientHeight))&&(this.isUnreadNotificationVisible=!0,this.isViewInited&&this.cdRef.detectChanges())},100)),this.isViewInited&&this.cdRef.detectChanges())}else this.lastReadMessageId&&(this.lastReadMessageId=void 0,this.unreadCount=0,this.isViewInited&&this.cdRef.detectChanges());let O=(f=t?.data)===null||f===void 0?void 0:f.own_capabilities,A=[...O||[]].sort().join(""),L=[...this.enabledMessageActions||[]].sort().join("");A!==L&&(this.enabledMessageActions=O||[],this.isViewInited&&this.cdRef.detectChanges()),(v=this.newMessageSubscription)===null||v===void 0||v.unsubscribe(),t&&(this.newMessageSubscription=t.on("message.new",U=>{!U.message||t.state.messages===t.state.latestMessages||this.mode==="thread"||this.newMessageReceived({id:U.message.id,user:U.message.user,created_at:new Date(U.message.created_at||"")})}))})),this.subscriptions.push(this.messageActionsService.customActions$.subscribe(t=>{t!==this.customMessageActions&&(this.customMessageActions=t,this.isViewInited&&this.cdRef.detectChanges())})),this.subscriptions.push(this.channelService.activeParentMessage$.subscribe(t=>{t&&this.parentMessage&&t.id!==this.parentMessage.id&&this.mode==="thread"&&this.resetScrollState(),this.parentMessage!==t&&(this.parentMessage=t,this.isViewInited&&this.cdRef.detectChanges())})),this.subscriptions.push(this.customTemplatesService.messageTemplate$.subscribe(t=>{this.messageTemplate!==t&&(this.messageTemplate=t,this.isViewInited&&this.cdRef.detectChanges())})),this.subscriptions.push(this.customTemplatesService.dateSeparatorTemplate$.subscribe(t=>{this.customDateSeparatorTemplate!==t&&(this.customDateSeparatorTemplate=t,this.isViewInited&&this.cdRef.detectChanges())})),this.subscriptions.push(this.customTemplatesService.newMessagesIndicatorTemplate$.subscribe(t=>{this.customnewMessagesIndicatorTemplate!==t&&(this.customnewMessagesIndicatorTemplate=t,this.isViewInited&&this.cdRef.detectChanges())})),this.subscriptions.push(this.customTemplatesService.newMessagesNotificationTemplate$.subscribe(t=>{this.customnewMessagesNotificationTemplate!==t&&(this.customnewMessagesNotificationTemplate=t,this.isViewInited&&this.cdRef.detectChanges())})),this.subscriptions.push(this.customTemplatesService.typingIndicatorTemplate$.subscribe(t=>{this.typingIndicatorTemplate!==t&&(this.typingIndicatorTemplate=t,this.isViewInited&&this.cdRef.detectChanges())})),this.subscriptions.push(this.channelService.jumpToMessage$.pipe(ci(t=>!!t.id)).subscribe(t=>{var i,r;let s;this.mode==="main"?s=t.parentId||t.id:t.parentId&&(s=t.id),(r=(i=this.chatClientService.chatClient)===null||i===void 0?void 0:i.logger)===null||r===void 0||r.call(i,"info",`Jumping to ${s||""}`,{tags:`message list ${this.mode}`}),s&&(s==="latest"?(this.scrollToLatestMessage(),this.isViewInited&&this.cdRef.detectChanges()):this.isJumpingToLatestUnreadMessage?(this.scrollMessageIntoView(this.firstUnreadMessageId||s),this.highlightedMessageId=this.firstUnreadMessageId||s):(this.scrollMessageIntoView(s),this.highlightedMessageId=s))})),this.subscriptions.push(this.customTemplatesService.emptyMainMessageListPlaceholder$.subscribe(t=>{let i=this.emptyMainMessageListTemplate!==t;this.emptyMainMessageListTemplate=t||null,i&&this.isViewInited&&this.cdRef.detectChanges()})),this.subscriptions.push(this.customTemplatesService.emptyThreadMessageListPlaceholder$.subscribe(t=>{let i=this.emptyThreadMessageListTemplate!==t;this.emptyThreadMessageListTemplate=t||null,i&&this.isViewInited&&this.cdRef.detectChanges()})),this.setMessages$()}ngOnChanges(t){var i;(t.mode||t.direction)&&this.setMessages$(),t.direction&&!((i=this.scrollContainer)===null||i===void 0)&&i.nativeElement&&this.jumpToLatestMessage(),t.customMessageActions&&this.messageActionsService.customActions$.next(this.customMessageActions)}ngAfterViewInit(){this.isViewInited=!0,this.ngZone.runOutsideAngular(()=>{this.scrollContainer.nativeElement.addEventListener("scroll",()=>this.scrolled())})}ngAfterViewChecked(){var t,i,r,s,l,d;this.highlightedMessageId&&(this.hasNewMessages=!1,this.olderMassagesLoaded=!1),this.direction==="top-to-bottom"?this.hasNewMessages&&(this.isNewMessageSentByUser||!this.isUserScrolled)&&(this.isLatestMessageInList?this.scrollToTop():this.jumpToLatestMessage(),this.hasNewMessages=!1,this.containerHeight=this.scrollContainer.nativeElement.scrollHeight):this.hasNewMessages?((!this.isUserScrolled||this.isNewMessageSentByUser)&&((i=(t=this.chatClientService.chatClient)===null||t===void 0?void 0:t.logger)===null||i===void 0||i.call(t,"info",`User has new messages, and not scrolled or sent new messages, therefore we ${this.isLatestMessageInList?"scroll":"jump"} to latest message`,{tags:`message list ${this.mode}`}),this.isLatestMessageInList?this.scrollToBottom():this.jumpToLatestMessage()),this.hasNewMessages=!1,this.containerHeight=this.scrollContainer.nativeElement.scrollHeight):this.olderMassagesLoaded?((s=(r=this.chatClientService.chatClient)===null||r===void 0?void 0:r.logger)===null||s===void 0||s.call(r,"info","Older messages are loaded, we preserve the scroll position",{tags:`message list ${this.mode}`}),this.preserveScrollbarPosition(),this.containerHeight=this.scrollContainer.nativeElement.scrollHeight,this.olderMassagesLoaded=!1):this.getScrollPosition()!=="bottom"&&!this.isUserScrolled&&!this.highlightedMessageId&&((d=(l=this.chatClientService.chatClient)===null||l===void 0?void 0:l.logger)===null||d===void 0||d.call(l,"info",`Container grew and user didn't scroll therefore we ${this.isLatestMessageInList?"scroll":"jump"} to latest message`,{tags:`message list ${this.mode}`}),this.isLatestMessageInList?this.scrollToBottom():this.jumpToLatestMessage(),this.containerHeight=this.scrollContainer.nativeElement.scrollHeight)}ngOnDestroy(){var t;this.subscriptions.forEach(i=>i.unsubscribe()),(t=this.newMessageSubscription)===null||t===void 0||t.unsubscribe(),this.scrollEndTimeout&&clearTimeout(this.scrollEndTimeout),this.checkIfUnreadNotificationIsVisibleTimeout&&clearTimeout(this.checkIfUnreadNotificationIsVisibleTimeout),this.jumpToLatestButtonVisibilityTimeout&&clearTimeout(this.jumpToLatestButtonVisibilityTimeout)}trackByMessageId(t,i){return i.id}trackByUserId(t,i){return i.id}jumpToLatestMessage(){var t;this.channelService.jumpToMessage("latest",this.mode==="thread"?(t=this.parentMessage)===null||t===void 0?void 0:t.id:void 0)}scrollToBottom(){this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight+.1,this.forceRepaint()}scrollToTop(){this.scrollContainer.nativeElement.scrollTop=0}scrolled(){var t,i;if(this.scrollContainer.nativeElement.scrollHeight===this.scrollContainer.nativeElement.clientHeight)return;let r=this.getScrollPosition();(i=(t=this.chatClientService.chatClient)===null||t===void 0?void 0:t.logger)===null||i===void 0||i.call(t,"info",`Scrolled - scroll position: ${r}, container height: ${this.scrollContainer.nativeElement.scrollHeight}`,{tags:`message list ${this.mode}`});let s=(this.direction==="bottom-to-top"?r!=="bottom":r!=="top")||!this.isLatestMessageInList;this.isUserScrolled!==s&&this.ngZone.run(()=>{this.isUserScrolled=s,this.isUserScrolled||(this.newMessageCountWhileBeingScrolled=0),this.cdRef.detectChanges()}),this.hideJumpToLatestButtonDuringScroll&&(this.isJumpToLatestButtonVisible&&(this.isJumpToLatestButtonVisible=!1,this.cdRef.detectChanges()),this.jumpToLatestButtonVisibilityTimeout&&clearTimeout(this.jumpToLatestButtonVisibilityTimeout),this.jumpToLatestButtonVisibilityTimeout=setTimeout(()=>{this.isUserScrolled&&(this.isJumpToLatestButtonVisible=!0,this.jumpToLatestButtonVisibilityTimeout=void 0,this.cdRef.detectChanges())},100)),this.shouldLoadMoreMessages(r)&&this.ngZone.run(()=>{var l,d;this.containerHeight=this.scrollContainer.nativeElement.scrollHeight;let f;this.direction==="top-to-bottom"?f=r==="top"?"newer":"older":f=r==="top"?"older":"newer",(this.mode==="main"?this.channelService.loadMoreMessages(f):this.channelService.loadMoreThreadReplies(f))&&((d=(l=this.chatClientService.chatClient)===null||l===void 0?void 0:l.logger)===null||d===void 0||d.call(l,"info","Displaying loading indicator",{tags:`message list ${this.mode}`}),this.isLoading=!0),this.cdRef.detectChanges()}),this.prevScrollTop=this.scrollContainer.nativeElement.scrollTop}jumpToFirstUnreadMessage(){this.lastReadMessageId&&(this.isJumpingToLatestUnreadMessage=!0,this.channelService.jumpToMessage(this.lastReadMessageId))}getTypingIndicatorContext(){return{usersTyping$:this.usersTyping$}}getTypingIndicatorText(t){return NT(t)}isSentByCurrentUser(t){var i,r;return t?((i=t.user)===null||i===void 0?void 0:i.id)===((r=this.chatClientService.chatClient.user)===null||r===void 0?void 0:r.id):!1}parseDate(t){if(this.parsedDates.has(t))return this.parsedDates.get(t);let i=this.dateParser.parseDate(t);return this.parsedDates.set(t,i),i}get replyCountParam(){var t;return{replyCount:(t=this.parentMessage)===null||t===void 0?void 0:t.reply_count}}get emptyListTemplate(){return this.mode==="main"?this.emptyMainMessageListTemplate:this.emptyThreadMessageListTemplate}preserveScrollbarPosition(){this.scrollContainer.nativeElement.scrollTop=(this.prevScrollTop||0)+(this.scrollContainer.nativeElement.scrollHeight-this.containerHeight)}forceRepaint(){this.scrollContainer.nativeElement.style.display="none",this.scrollContainer.nativeElement.offsetHeight,this.scrollContainer.nativeElement.style.display=""}getScrollPosition(){var t,i;let r="middle";return Math.floor(this.scrollContainer.nativeElement.scrollTop)<=(((t=this.parentMessageElement)===null||t===void 0?void 0:t.nativeElement.clientHeight)||0)&&(this.prevScrollTop===void 0||this.prevScrollTop>(((i=this.parentMessageElement)===null||i===void 0?void 0:i.nativeElement.clientHeight)||0))?r="top":Math.ceil(this.scrollContainer.nativeElement.scrollTop)+this.scrollContainer.nativeElement.clientHeight>=this.scrollContainer.nativeElement.scrollHeight&&(r="bottom"),r}shouldLoadMoreMessages(t){return t!=="middle"&&!this.highlightedMessageId}setMessages$(){this.messages$=(this.mode==="main"?this.channelService.activeChannelMessages$:this.channelService.activeThreadMessages$).pipe(ri(t=>{var i,r,s,l;if(this.isLoading=!1,t.length===0){(r=(i=this.chatClientService.chatClient)===null||i===void 0?void 0:i.logger)===null||r===void 0||r.call(i,"info","Empty messages array, reseting scroll state",{tags:`message list ${this.mode}`}),this.resetScrollState();return}this.isEmpty&&setTimeout(()=>this.isEmpty=!1,0),(l=(s=this.chatClientService.chatClient)===null||s===void 0?void 0:s.logger)===null||l===void 0||l.call(s,"info","Received one or more messages",{tags:`message list ${this.mode}`});let d=t[t.length-1];this.newMessageReceived(d);let f=t[0];!this.oldestMessage||!t.find(v=>v.id===this.oldestMessage.id)?this.oldestMessage=f:this.oldestMessage.created_at.getTime()>f.created_at.getTime()&&(this.oldestMessage=f,this.olderMassagesLoaded=!0)}),ri(t=>{var i;if(this.isJumpingToLatestUnreadMessage&&!this.firstUnreadMessageId&&this.lastReadMessageId){let r=t.findIndex(s=>s.id===this.lastReadMessageId);this.firstUnreadMessageId=((i=t[r+1])===null||i===void 0?void 0:i.id)||this.lastReadMessageId}}),ri(t=>{var i;return this.lastSentMessageId=(i=[...t].reverse().find(r=>{var s,l,d;return((s=r.user)===null||s===void 0?void 0:s.id)===((d=(l=this.chatClientService.chatClient)===null||l===void 0?void 0:l.user)===null||d===void 0?void 0:d.id)&&r.status!=="sending"}))===null||i===void 0?void 0:i.id}),ri(t=>{this.isLatestMessageInList=!this.latestMessage||t.length===0||t[t.length-1].id===this.latestMessage.id||this.mode==="thread",this.isLatestMessageInList||(this.isUserScrolled=!0)}),Ft(t=>this.direction==="bottom-to-top"?t:[...t].reverse()),ri(t=>{this.groupStyles=t.map((i,r)=>Zte(i,t[r-1],t[r+1],{lastReadMessageId:this.lastReadMessageId})),this.isNextMessageOnSeparateDate=t.map((i,r)=>this.checkIfOnSeparateDates(i,t[r+1]))}))}resetScrollState(){this.isEmpty=!0,this.latestMessage=void 0,this.hasNewMessages=!0,this.isUserScrolled=!1,this.containerHeight=void 0,this.olderMassagesLoaded=!1,this.oldestMessage=void 0,this.newMessageCountWhileBeingScrolled=0,this.prevScrollTop=void 0,this.isNewMessageSentByUser=void 0,this.isLatestMessageInList=!0}get usersTyping$(){return this.mode==="thread"?this.usersTypingInThread$:this.usersTypingInChannel$}scrollMessageIntoView(t,i=!0){let r=document.getElementById(t);!r&&i?setTimeout(()=>this.scrollMessageIntoView(t,!1)):r&&(r.scrollIntoView({block:"center"}),setTimeout(()=>{this.highlightedMessageId=void 0,this.firstUnreadMessageId=void 0,this.isJumpingToLatestUnreadMessage=!1,this.cdRef.detectChanges()},1e3))}scrollToLatestMessage(t=!0){document.getElementById(this.latestMessage.id)?this.direction==="bottom-to-top"?this.scrollToBottom():this.scrollToTop():t&&setTimeout(()=>this.scrollToLatestMessage(!1),0)}newMessageReceived(t){var i,r,s,l,d,f,v,x,O;let A=(r=(i=this.channelService.activeChannel)===null||i===void 0?void 0:i.state)===null||r===void 0?void 0:r.latestMessages;if(!this.latestMessage||((s=this.latestMessage.created_at)===null||s===void 0?void 0:s.getTime())<t.created_at.getTime()||this.mode==="main"&&A&&this.latestMessage&&((l=A[A.length-1])===null||l===void 0?void 0:l.id)!==this.latestMessage.id){(f=(d=this.chatClientService.chatClient)===null||d===void 0?void 0:d.logger)===null||f===void 0||f.call(d,"info","Received new message",{tags:`message list ${this.mode}`});let L=!this.latestMessage;this.latestMessage=t,this.hasNewMessages=!0,this.isNewMessageSentByUser=((v=t.user)===null||v===void 0?void 0:v.id)===((O=(x=this.chatClientService.chatClient)===null||x===void 0?void 0:x.user)===null||O===void 0?void 0:O.id),this.isUserScrolled&&this.newMessageCountWhileBeingScrolled++,!this.isNewMessageSentByUser&&this.unreadCount!==void 0&&!L&&this.unreadCount++,this.cdRef.detectChanges()}}checkIfOnSeparateDates(t,i){return!t||!i?!1:O3(t.created_at,i.created_at)}}return e.\u0275fac=function(t){return new(t||e)(Ce(Or),Ce(Wa),Ce(Cr),Ce(jT),Ce(On),Ce(pi),Ce(Rg))},e.\u0275cmp=Wt({type:e,selectors:[["stream-message-list"]],viewQuery:function(t,i){if(t&1&&(bi(Pee,5),bi(kee,5)),t&2){let r;ui(r=di())&&(i.scrollContainer=r.first),ui(r=di())&&(i.parentMessageElement=r.first)}},hostVars:2,hostBindings:function(t,i){t&2&&vs(i.class)},inputs:{mode:"mode",direction:"direction",messageOptionsTrigger:"messageOptionsTrigger",hideJumpToLatestButtonDuringScroll:"hideJumpToLatestButtonDuringScroll",customMessageActions:"customMessageActions",displayDateSeparator:"displayDateSeparator",displayUnreadSeparator:"displayUnreadSeparator",dateSeparatorTextPos:"dateSeparatorTextPos",openMessageListAt:"openMessageListAt",hideUnreadCountForNotificationAndIndicator:"hideUnreadCountForNotificationAndIndicator",displayLoadingIndicator:"displayLoadingIndicator"},features:[ni],decls:25,vars:14,consts:[["defaultUnreadMessagesNotification",""],["scrollContainer",""],["defaultTypingIndicator",""],["messageTemplateContainer",""],["dateSeparator",""],["defaultNewMessagesIndicator",""],["noUnreadCount",""],["parentMessageElement",""],["defaultMessageTemplate",""],["defaultDateSeparator",""],[4,"ngIf"],["data-testid","scroll-container",1,"str-chat__list"],[1,"str-chat__reverse-infinite-scroll","str-chat__message-list-scroll"],[1,"str-chat__ul"],["data-testid","parent-message","class","str-chat__parent-message-li",4,"ngIf"],["data-testid","top-loading-indicator",4,"ngIf"],["data-testid","bottom-loading-indicator",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__jump-to-latest-message"],["data-testid","scroll-to-latest","class",`
      str-chat__message-notification-scroll-to-latest
      str-chat__message-notification-scroll-to-latest-right
      str-chat__circle-fab
    `,3,"keyup.enter","click",4,"ngIf"],["data-testid","unread-messages-notification",1,"str-chat__unread-messages-notification"],["data-testid","unread-messages-notification-jump-to-message",3,"click"],[4,"ngIf","ngIfElse"],["data-testid","unread-messages-notification-dismiss",3,"click"],["icon","close"],[4,"ngTemplateOutlet"],["data-testid","parent-message",1,"str-chat__parent-message-li"],["data-testid","reply-count",1,"str-chat__thread-start"],["data-testid","top-loading-indicator"],[4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","0","data-testclass","message",3,"id"],["id","stream-chat-new-message-indicator","data-testid","new-messages-indicator","class","str-chat__li str-chat__unread-messages-separator-wrapper",4,"ngIf"],["id","stream-chat-new-message-indicator","data-testid","new-messages-indicator",1,"str-chat__li","str-chat__unread-messages-separator-wrapper"],["data-testid","bottom-loading-indicator"],["data-testid","typing-indicator","class","str-chat__typing-indicator str-chat__typing-indicator--typing",4,"ngIf"],["data-testid","typing-indicator",1,"str-chat__typing-indicator","str-chat__typing-indicator--typing"],[1,"str-chat__typing-indicator__dots"],[1,"str-chat__typing-indicator__dot"],["data-testid","typing-users",1,"str-chat__typing-indicator__users"],["data-testid","scroll-to-latest",1,"str-chat__message-notification-scroll-to-latest","str-chat__message-notification-scroll-to-latest-right","str-chat__circle-fab",3,"keyup.enter","click"],[1,"str-chat__jump-to-latest-icon","str-chat__circle-fab-icon",3,"icon"],["class",`
        str-chat__message-notification
        str-chat__message-notification-scroll-to-latest-unread-count
        str-chat__jump-to-latest-unread-count
      `,4,"ngIf"],[1,"str-chat__message-notification","str-chat__message-notification-scroll-to-latest-unread-count","str-chat__jump-to-latest-unread-count"],[3,"message","isLastSentMessage","enabledMessageActions","mode","isHighlighted","customActions"],["data-testid","date-separator",1,"str-chat__date-separator"],["class","str-chat__date-separator-line",4,"ngIf"],[1,"str-chat__date-separator-date"],[1,"str-chat__date-separator-line"],[1,"str-chat__unread-messages-separator"]],template:function(t,i){if(t&1&&(de(0,zee,2,6,"ng-container",10)(1,Hee,7,2,"ng-template",null,0,mt),K(3,"div",11,1),de(5,Gee,2,1,"ng-container",10),K(6,"div",12)(7,"ul",13),de(8,Zee,7,10,"li",14)(9,Kee,2,1,"ng-container",10)(10,Qee,1,0,"stream-loading-indicator",15)(11,ote,2,2,"ng-container",10),tt(12,"async"),de(13,cte,1,0,"stream-loading-indicator",16),Q(),de(14,dte,2,3,"ng-template",null,2,mt)(16,hte,1,0,"ng-container",17),Q()(),K(17,"div",18),de(18,fte,3,2,"button",19),Q(),de(19,_te,3,9,"ng-template",null,3,mt)(21,xte,3,1,"ng-template",null,4,mt)(23,Tte,4,2,"ng-template",null,5,mt)),t&2){let r=Xe(15);H("ngIf",i.lastReadMessageId&&i.isUnreadNotificationVisible&&i.openMessageListAt==="last-message"&&i.displayUnreadSeparator),V(5),H("ngIf",i.mode==="main"&&i.isEmpty&&i.emptyListTemplate),V(2),Rn("str-chat__message-options-in-bubble",i.messageOptionsTrigger==="message-bubble"),V(),H("ngIf",i.mode==="thread"&&i.parentMessage),V(),H("ngIf",i.mode==="thread"&&i.isEmpty&&i.emptyListTemplate),V(),H("ngIf",i.isLoading&&i.direction==="bottom-to-top"&&i.displayLoadingIndicator),V(),H("ngIf",ht(12,12,i.messages$)),V(2),H("ngIf",i.isLoading&&i.direction==="top-to-bottom"&&i.displayLoadingIndicator),V(3),H("ngTemplateOutlet",i.typingIndicatorTemplate||r)("ngTemplateOutletContext",i.getTypingIndicatorContext()),V(2),H("ngIf",i.isUserScrolled&&i.isJumpToLatestButtonVisible)}},dependencies:[xo,RT,Mb,qte,Zi,Ii,ys,Xs,Fr],encapsulation:2,changeDetection:0}),e})();var k3=(()=>{class e{constructor(t,i,r){this.customTemplatesService=t,this.channelService=i,this.chatClientService=r,this.class="str-chat__thread",this.subscriptions=[],this.subscriptions.push(this.channelService.activeParentMessage$.subscribe(s=>this.parentMessage=s)),this.subscriptions.push(this.channelService.activeChannel$.subscribe(s=>this.channel=s))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}getThreadHeaderContext(){return{parentMessage:this.parentMessage,closeThreadHandler:()=>this.closeThread()}}closeThread(){this.channelService.setAsActiveParentMessage(void 0)}get channelName(){return!this.channel||!this.chatClientService.chatClient.user?"":BT(this.channel,this.chatClientService.chatClient.user)}}return e.\u0275fac=function(t){return new(t||e)(Ce(Cr),Ce(Or),Ce(Wa))},e.\u0275cmp=Wt({type:e,selectors:[["stream-thread"]],hostVars:2,hostBindings:function(t,i){t&2&&vs(i.class)},ngContentSelectors:Cb,decls:6,vars:4,consts:[["defaultThreadHeader",""],[1,"str-chat__thread-container"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__thread-header"],[1,"str-chat__thread-header-details"],["translate","",1,"str-chat__thread-header-name"],["data-testid","channel-name",1,"str-chat__thread-header-channel-name"],["data-testid","close-button",1,"str-chat__square-button","str-chat__close-thread-button",3,"click"],["icon","close-no-outline"]],template:function(t,i){if(t&1&&(mo(),K(0,"div",1),de(1,Ste,1,0,"ng-container",2),tt(2,"async"),Qs(3),Q(),de(4,Ote,8,1,"ng-template",null,0,mt)),t&2){let r=Xe(5);V(),H("ngTemplateOutlet",ht(2,2,i.customTemplatesService.threadHeaderTemplate$)||r)("ngTemplateOutletContext",i.getThreadHeaderContext())}},dependencies:[xo,Ii,Ip,Fr],encapsulation:2}),e})(),ET=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vn({type:e}),e.\u0275inj=_n({imports:[[Na,Ep]]}),e})(),A3=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vn({type:e}),e.\u0275inj=_n({imports:[[Na,Ep,ET,WL],ET]}),e})(),R3=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vn({type:e}),e.\u0275inj=_n({providers:[{provide:x3,useValue:Wte}],imports:[[Na,Ep,l3,ET]]}),e})();var L3=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Wt({type:n,selectors:[["app-message"]],inputs:{message:"message"},decls:4,vars:2,template:function(r,s){r&1&&(K(0,"div")(1,"b"),je(2),Q(),je(3),Q()),r&2&&(V(2),hi(s.message==null||s.message.user==null?null:s.message.user.name),V(),Rt(" ",s.message==null?null:s.message.text,`
`))},styles:["b[_ngcontent-%COMP%]{margin-right:4px}"]});let e=n;return e})();var N3=(()=>{let n=class n{constructor(i){this.channelService=i}ngOnChanges(){let i=this?.channel?.state?.messages;i&&(this.messagePreview=i[i.length-1].text?.slice(0,30))}setAsActiveChannel(){this.channelService.setAsActiveChannel(this.channel)}};n.\u0275fac=function(r){return new(r||n)(Ce(Or))},n.\u0275cmp=Wt({type:n,selectors:[["app-channel-preview"]],inputs:{channel:"channel"},features:[ni],decls:5,vars:2,consts:[[1,"container",3,"click"],[1,"preview"]],template:function(r,s){r&1&&(K(0,"div",0),nt("click",function(){return s.setAsActiveChannel()}),K(1,"div"),je(2),Q(),K(3,"div",1),je(4),Q()()),r&2&&(V(2),hi((s.channel==null||s.channel.data==null?null:s.channel.data.name)||"Unnamed Channel"),V(2),hi(s.messagePreview))},styles:[".container[_ngcontent-%COMP%]{margin:12px}.preview[_ngcontent-%COMP%]{font-size:14px}"]});let e=n;return e})();var Qte=["customMessageTemplate"],Jte=["customChannelPreviewTemplate"];function Xte(e,n){if(e&1&&Me(0,"app-message",5),e&2){let t=n.message;H("message",t)}}function ene(e,n){if(e&1&&Me(0,"app-channel-preview",6),e&2){let t=n.channel;H("channel",t)}}var B3=(()=>{let n=class n{constructor(i,r,s,l){this.chatService=i,this.channelService=r,this.streamI18nService=s,this.customTemplatesService=l,this.chatService.init("dz5f4d5kzrue","dawn-bush-4","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZGF3bi1idXNoLTQiLCJleHAiOjE3MTY2NTY3NTl9.zVS2wjzPDwef9oUcRq_gAByw2l1Rq4A7YcQQN4Cd4ok"),this.streamI18nService.setTranslation()}ngOnInit(){return Zr(this,null,function*(){yield this.chatService.chatClient.channel("messaging","talking-about-angular",{image:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/Angular_full_color_logo.svg/2048px-Angular_full_color_logo.svg.png",name:"Talking about Angular"}).create(),this.channelService.init({type:"messaging",id:{$eq:"talking-about-angular"}})})}ngAfterViewInit(){this.customTemplatesService.messageTemplate$.next(this.messageTemplate),this.customTemplatesService.channelPreviewTemplate$.next(this.channelPreviewTemplate)}};n.\u0275fac=function(r){return new(r||n)(Ce(Wa),Ce(Or),Ce(C3),Ce(Cr))},n.\u0275cmp=Wt({type:n,selectors:[["app-chats"]],viewQuery:function(r,s){if(r&1&&(bi(Qte,5),bi(Jte,5)),r&2){let l;ui(l=di())&&(s.messageTemplate=l.first),ui(l=di())&&(s.channelPreviewTemplate=l.first)}},decls:14,vars:0,consts:[["customMessageTemplate",""],["customChannelPreviewTemplate",""],["id","root"],["name","thread"],["mode","thread"],[3,"message"],[3,"channel"]],template:function(r,s){r&1&&(K(0,"div",2),Me(1,"stream-channel-list"),K(2,"stream-channel"),Me(3,"stream-channel-header")(4,"stream-message-list")(5,"stream-notification-list")(6,"stream-message-input"),K(7,"stream-thread",3),Me(8,"stream-message-list",4)(9,"stream-message-input",4),Q()()(),de(10,Xte,1,1,"ng-template",null,0,mt)(12,ene,1,1,"ng-template",null,1,mt))},dependencies:[D3,S3,E3,LT,P3,Tb,k3,L3,N3],styles:['@charset "UTF-8";.str-chat[_ngcontent-%COMP%]{box-sizing:border-box;font-family:var(--str-chat__font-family)}.str-chat[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.str-chat[_ngcontent-%COMP%]   .ngxp__container[_ngcontent-%COMP%], .str-chat[_ngcontent-%COMP%]   .float-ui-container[_ngcontent-%COMP%]{z-index:1;padding:0!important;box-shadow:none!important;border-color:transparent!important}.str-chat[_ngcontent-%COMP%]   .ngxp__container[_ngcontent-%COMP%]   .ngxp__arrow[_ngcontent-%COMP%], .str-chat[_ngcontent-%COMP%]   .float-ui-container[_ngcontent-%COMP%]   .ngxp__arrow[_ngcontent-%COMP%]{display:none}stream-icon[_ngcontent-%COMP%], stream-icon-placeholder[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}[_ngcontent-%COMP%]:root{--str-chat__theme-version: 2}.str-chat[_ngcontent-%COMP%]{--str-chat__spacing-px: 1px;--str-chat__spacing-0_5: .125rem;--str-chat__spacing-1: .25rem;--str-chat__spacing-1_5: .375rem;--str-chat__spacing-2: .5rem;--str-chat__spacing-2_5: .625rem;--str-chat__spacing-3: .75rem;--str-chat__spacing-3_5: .875rem;--str-chat__spacing-4: 1rem;--str-chat__spacing-5: 1.25rem;--str-chat__spacing-6: 1.5rem;--str-chat__spacing-7: 1.75rem;--str-chat__spacing-8: 2rem;--str-chat__spacing-9: 2.25rem;--str-chat__spacing-10: 2.5rem;--str-chat__spacing-11: 2.75rem;--str-chat__spacing-12: 3rem;--str-chat__spacing-14: 3.5rem;--str-chat__spacing-16: 4rem}.str-chat[_ngcontent-%COMP%]{--str-chat__image-fallback-icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9ImN1cnJlbnRDb2xvciIgY2xhc3M9InN0ci1jaGF0X19pbWFnZS1mYWxsYmFja19faWNvbiIgdmlld0JveD0iMCAwIDE4IDE4Ij48cGF0aCBkPSJNMTYgMnYxNEgyVjJoMTRabTAtMkgyQy45IDAgMCAuOSAwIDJ2MTRjMCAxLjEuOSAyIDIgMmgxNGMxLjEgMCAyLS45IDItMlYyYzAtMS4xLS45LTItMi0yWm0tNC44NiA4Ljg2LTMgMy44N0w2IDEwLjE0IDMgMTRoMTJsLTMuODYtNS4xNFoiLz48L3N2Zz4=)}@font-face{font-family:stream-chat-icons;src:url("./media/stream-chat-icons-OMUEI5OH.eot");src:url("./media/stream-chat-icons-OMUEI5OH.eot#iefix") format("embedded-opentype"),url("./media/stream-chat-icons-6DQ66IRQ.woff") format("woff2"),url("./media/stream-chat-icons-6DQ66IRQ.woff") format("woff"),url("./media/stream-chat-icons-AVXEJL3B.ttf") format("truetype"),url("./media/stream-chat-icons-5HWU6A3J.svg#stream-chat-icons") format("svg");font-weight:400;font-style:normal}@media screen and (-webkit-min-device-pixel-ratio: 0){@font-face{font-family:stream-chat-icons;src:url("./media/stream-chat-icons-5HWU6A3J.svg#stream-chat-icons") format("svg")}}.str-chat[_ngcontent-%COMP%]{--str-chat__avatar-size: calc(var(--str-chat__spacing-px) * 32)}.str-chat[_ngcontent-%COMP%]   .stream-chat__avatar--autocomplete-item[_ngcontent-%COMP%]{--str-chat__avatar-size: calc(var(--str-chat__spacing-px) * 30)}.str-chat[_ngcontent-%COMP%]   .stream-chat__avatar--channel-header[_ngcontent-%COMP%]{--str-chat__avatar-size: calc(var(--str-chat__spacing-px) * 40)}.str-chat[_ngcontent-%COMP%]   .stream-chat__avatar--channel-preview[_ngcontent-%COMP%]{--str-chat__avatar-size: calc(var(--str-chat__spacing-px) * 49)}.str-chat[_ngcontent-%COMP%]   .stream-chat__avatar--quoted-message-sender[_ngcontent-%COMP%]{--str-chat__avatar-size: calc(var(--str-chat__spacing-px) * 20)}.str-chat[_ngcontent-%COMP%]   .stream-chat__avatar--reaction[_ngcontent-%COMP%]{--str-chat__avatar-size: calc(var(--str-chat__spacing-px) * 30)}.str-chat__avatar[_ngcontent-%COMP%]{position:relative}.str-chat__avatar[_ngcontent-%COMP%]   .str-chat__avatar-fallback[_ngcontent-%COMP%]{text-align:center;height:inherit;width:inherit}.str-chat__avatar[_ngcontent-%COMP%]   .str-chat__avatar--online-indicator[_ngcontent-%COMP%]{position:absolute;width:calc(var(--str-chat__spacing-px) * 12);height:calc(var(--str-chat__spacing-px) * 12);inset-inline-end:3%;inset-block-start:2%}.str-chat__loading-channels-avatar[_ngcontent-%COMP%]{flex-shrink:0;width:calc(var(--str-chat__spacing-px) * 49);height:calc(var(--str-chat__spacing-px) * 49)}.str-chat-angular__avatar[_ngcontent-%COMP%]{height:var(--str-chat__avatar-size);line-height:var(--str-chat__avatar-size);width:var(--str-chat__avatar-size)}.str-chat-angular__avatar.stream-chat__avatar--one-letter[_ngcontent-%COMP%]{font-size:calc(var(--str-chat__avatar-size) * .5)}.str-chat-angular__avatar.stream-chat__avatar--multiple-letters[_ngcontent-%COMP%]{font-size:calc(var(--str-chat__avatar-size) * .3)}.str-chat-angular__avatar[_ngcontent-%COMP%]   .str-chat__avatar-image[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:cover}.str-chat[_ngcontent-%COMP%]{--str-chat__attachment-margin: var(--str-chat__spacing-0_5);--str-chat__gif-height: calc(var(--str-chat__spacing-px) * 200);--str-chat__voice-recording-amplitude-bar-width: 2px;--str-chat__voice-recording-amplitude-bar-gap-width: var(--str-chat__spacing-px)}.str-chat__attachment-list[_ngcontent-%COMP%]{--str-chat__attachment-max-width: calc( var(--str-chat__message-max-width) - calc(2 * var(--str-chat__attachment-margin)) );--str-chat__video-height: var(--str-chat__attachment-max-width);--str-chat__scraped-image-height: calc(var(--str-chat__attachment-max-width) * calc(1 / 1.91));--str-chat__scraped-video-height: calc(var(--str-chat__attachment-max-width) * .5625 );display:flex;flex-direction:column;align-items:stretch;min-width:0}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--card[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]{position:relative}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--card[_ngcontent-%COMP%]   .str-chat__message-attachment-card--source-link[_ngcontent-%COMP%]{padding-bottom:var(--str-chat__spacing-2)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--card[_ngcontent-%COMP%]   .str-chat__message-attachment-card--text[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--image[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--video[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]{width:auto;display:flex;justify-content:center;align-items:center;overflow:hidden}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]{height:var(--str-chat__scraped-image-height)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;max-height:100%;max-width:100%;width:100%;height:100%;cursor:default}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card-react--header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:zoom-in}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--giphy[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]{height:var(--str-chat__gif-height)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--giphy[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;max-height:100%;max-width:100%;cursor:default}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--giphy[_ngcontent-%COMP%]   .str-chat__message-attachment-card-react--header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:zoom-in}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--image[_ngcontent-%COMP%]:not(.str-chat__message-attachment--card) > img[_ngcontent-%COMP%]{height:min(var(--str-chat__attachment-max-width),min(var(--str-chat__attachment-max-width, 1000000) / var(--original-width, 1000000),1px) * var(--original-height, 1000000));max-width:var(--str-chat__attachment-max-width);max-height:var(--str-chat__attachment-max-width);object-fit:cover;width:100%;cursor:zoom-in}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--video[_ngcontent-%COMP%]:not(.str-chat__message-attachment--card), .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--video[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]{max-width:var(--str-chat__attachment-max-width);display:flex}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--video[_ngcontent-%COMP%]:not(.str-chat__message-attachment--card)   .str-chat__player-wrapper[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--video[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]   .str-chat__player-wrapper[_ngcontent-%COMP%]{height:100%;width:100%;min-width:0;max-width:var(--str-chat__attachment-max-width);display:flex;flex-direction:column}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--video[_ngcontent-%COMP%]:not(.str-chat__message-attachment--card)   .str-chat__player-wrapper[_ngcontent-%COMP%]   .react-player[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--video[_ngcontent-%COMP%]:not(.str-chat__message-attachment--card)   .str-chat__player-wrapper[_ngcontent-%COMP%]   .str-chat__video-angular[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--video[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]   .str-chat__player-wrapper[_ngcontent-%COMP%]   .react-player[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--video[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]   .str-chat__player-wrapper[_ngcontent-%COMP%]   .str-chat__video-angular[_ngcontent-%COMP%]{height:100%;width:100%;max-width:var(--str-chat__attachment-max-width);max-height:100%;min-height:0}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--video[_ngcontent-%COMP%]:not(.str-chat__message-attachment--card):not(.str-chat__message-attachment-dynamic-size){height:var(--str-chat__video-height)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--video.str-chat__message-attachment-dynamic-size[_ngcontent-%COMP%]:not(.str-chat__message-attachment--card){max-height:var(--str-chat__video-height)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--video.str-chat__message-attachment-dynamic-size[_ngcontent-%COMP%]:not(.str-chat__message-attachment--card)   .str-chat__player-wrapper[_ngcontent-%COMP%]{height:min(var(--str-chat__video-height),min(var(--str-chat__attachment-max-width, 1000000) / var(--original-width, 1000000),1px) * var(--original-height, 1000000));max-height:var(--str-chat__video-height)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--video.str-chat__message-attachment-dynamic-size[_ngcontent-%COMP%]:not(.str-chat__message-attachment--card)   .str-chat__video-angular[_ngcontent-%COMP%]{max-height:var(--str-chat__video-height)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--video[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]{height:var(--str-chat__scraped-video-height)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--video[_ngcontent-%COMP%]:not(.str-chat__message-attachment--card), .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--image[_ngcontent-%COMP%]:not(.str-chat__message-attachment--card){margin:var(--str-chat__attachment-margin)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--gallery[_ngcontent-%COMP%]{margin:var(--str-chat__attachment-margin)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--gallery[_ngcontent-%COMP%]   .str-chat__gallery[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%;overflow:hidden;width:fit-content;gap:var(--str-chat__spacing-0_5);max-width:var(--str-chat__attachment-max-width);height:var(--str-chat__attachment-max-width)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--gallery[_ngcontent-%COMP%]   .str-chat__gallery.str-chat__gallery-two-rows[_ngcontent-%COMP%]{grid-template-rows:50% 50%}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--gallery[_ngcontent-%COMP%]   .str-chat__gallery[_ngcontent-%COMP%]   .str-chat__gallery-image[_ngcontent-%COMP%]{padding:0;margin:0;position:relative}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--gallery[_ngcontent-%COMP%]   .str-chat__gallery[_ngcontent-%COMP%]   .str-chat__gallery-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;cursor:zoom-in;max-width:var(--str-chat__attachment-max-width)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--gallery[_ngcontent-%COMP%]   .str-chat__gallery[_ngcontent-%COMP%]   .str-chat__gallery-placeholder[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;background-size:cover;background-position:top left;background-repeat:no-repeat;margin:0;cursor:zoom-in;max-width:var(--str-chat__attachment-max-width)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--gallery[_ngcontent-%COMP%]   .str-chat__gallery[_ngcontent-%COMP%]   .str-chat__gallery-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;z-index:1}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--gallery[_ngcontent-%COMP%]   .str-chat__gallery[_ngcontent-%COMP%]   .str-chat__gallery-placeholder[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;z-index:0}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__gallery[_ngcontent-%COMP%]   .str-chat__message-attachment--svg-image[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--image.str-chat__message-attachment--svg-image[_ngcontent-%COMP%]{padding:var(--str-chat__spacing-6)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__gallery[_ngcontent-%COMP%]   .str-chat__message-attachment--svg-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--image.str-chat__message-attachment--svg-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;max-width:calc(var(--str-chat__attachment-max-width) - var(--str-chat__spacing-6));max-height:calc(var(--str-chat__attachment-max-width) - var(--str-chat__spacing-6))}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-unsupported[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:var(--str-chat__spacing-2);column-gap:var(--str-chat__spacing-4);margin:var(--str-chat__attachment-margin)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-unsupported[_ngcontent-%COMP%]   .str-chat__file-icon[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 30)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-unsupported[_ngcontent-%COMP%]   .str-chat__message-attachment-unsupported__metadata[_ngcontent-%COMP%]{min-width:0;flex:1;display:flex;flex-direction:column;align-items:flex-start;justify-content:center}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-unsupported[_ngcontent-%COMP%]   .str-chat__message-attachment-unsupported__title[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis;max-width:100%}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:var(--str-chat__spacing-2);column-gap:var(--str-chat__spacing-4);margin:var(--str-chat__attachment-margin)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;row-gap:var(--str-chat__spacing-0_5);min-width:0}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;column-gap:var(--str-chat__spacing-2)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-name[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--title[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-name[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--title[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-name[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--title[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-name[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--title[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-name[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--title[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-name[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--title[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-name[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--title[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-name[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--title[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis;min-width:0}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-download-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-download-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-download-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-download-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-download-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-download-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-download-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-first-row[_ngcontent-%COMP%]   .str-chat__message-attachment-download-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 24);height:calc(var(--str-chat__spacing-px) * 16)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__file-icon[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 34)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--play-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--progress-track[_ngcontent-%COMP%]{max-width:calc(var(--str-chat__spacing-px) * 120)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-second-row[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;grid-column-gap:var(--str-chat__spacing-5);padding-top:var(--str-chat__spacing-2_5)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--text-second-row[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-size[_ngcontent-%COMP%]{line-height:calc(var(--str-chat__spacing-px) * 14)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--progress-track[_ngcontent-%COMP%]{position:relative;height:calc(var(--str-chat__spacing-px) * 5);flex:1;cursor:pointer}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--progress-track[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--progress-indicator[_ngcontent-%COMP%]{position:absolute;inset-inline-start:0;height:inherit}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]{display:grid;grid-template-columns:36px auto 55px;align-items:center;justify-content:center;gap:calc(var(--str-chat__spacing-px) * 9);padding:var(--str-chat__spacing-2);margin:var(--str-chat__attachment-margin)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__metadata[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:var(--str-chat__spacing-2)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__metadata[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__metadata[_ngcontent-%COMP%]   .str-chat__message-attachment-voice-recording-widget--first-row[_ngcontent-%COMP%]{overflow-y:visible;overflow-x:hidden;overflow-x:clip;min-width:0;width:100%;display:flex;align-items:center;justify-content:space-between;gap:var(--str-chat__spacing-1)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__metadata[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__title[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis;min-width:0}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__metadata[_ngcontent-%COMP%]   .str-chat__message-attachment-download-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 24);height:calc(var(--str-chat__spacing-px) * 16)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__metadata[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__audio-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--str-chat__spacing-1_5);height:100%}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__metadata[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__error-message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:var(--str-chat__spacing-1)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__right-section[_ngcontent-%COMP%]{justify-self:center}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__timer[_ngcontent-%COMP%]{min-width:calc(var(--str-chat__spacing-px) * 45);width:calc(var(--str-chat__spacing-px) * 45)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   stream-voice-recording-wavebar[_ngcontent-%COMP%]{flex:1}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__track[_ngcontent-%COMP%]{position:relative;flex:1;width:100%;height:calc(var(--str-chat__spacing-px) * 25);display:flex;align-items:center;justify-content:space-between;gap:var(--str-chat__voice-recording-amplitude-bar-gap-width)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__track[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__amplitude-bar[_ngcontent-%COMP%]{width:var(--str-chat__voice-recording-amplitude-bar-width);min-width:var(--str-chat__voice-recording-amplitude-bar-width);height:calc(var(--str-chat__wave-progress-bar__amplitude-bar-height) + 2px)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__track[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__progress-indicator[_ngcontent-%COMP%]{position:absolute;left:0;height:calc(100% + 4px);width:calc(var(--str-chat__spacing-px) * 6)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message_attachment__playback-rate-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;padding:var(--str-chat__spacing-1_5) var(--str-chat__spacing-2_5)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card[_ngcontent-%COMP%]{min-width:0;max-width:var(--str-chat__attachment-max-width);margin:var(--str-chat__attachment-margin)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card[_ngcontent-%COMP%]   .str-chat__message-attachment-card--content[_ngcontent-%COMP%]{padding:var(--str-chat__spacing-2_5)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card[_ngcontent-%COMP%]   .str-chat__message-attachment-card--content[_ngcontent-%COMP%]   .str-chat__message-attachment-card--title[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--audio[_ngcontent-%COMP%]   .str-chat__message-attachment-card--content[_ngcontent-%COMP%]{padding:0}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--audio[_ngcontent-%COMP%]   .str-chat__message-attachment-card--content[_ngcontent-%COMP%]   .str-chat__message-attachment-card-audio-widget[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:var(--str-chat__spacing-2_5);width:100%;padding:var(--str-chat__spacing-2)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--audio[_ngcontent-%COMP%]   .str-chat__message-attachment-card--content[_ngcontent-%COMP%]   .str-chat__message-attachment-card-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-card-audio-widget--first-row[_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:var(--str-chat__spacing-3_5)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-actions[_ngcontent-%COMP%]   .str-chat__message-attachment-actions-form[_ngcontent-%COMP%]{display:flex;justify-content:stretch}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-actions[_ngcontent-%COMP%]   .str-chat__message-attachment-actions-form[_ngcontent-%COMP%]   .str-chat__message-attachment-actions-button[_ngcontent-%COMP%]{cursor:pointer;width:100%;padding:var(--str-chat__spacing-3) var(--str-chat__spacing-4);white-space:nowrap}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-with-actions.str-chat__message-attachment--giphy[_ngcontent-%COMP%]   .str-chat__message-attachment-card[_ngcontent-%COMP%]   .str-chat__message-attachment-card--content[_ngcontent-%COMP%]{display:none}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat-angular__message-attachment-file-single[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-download-icon[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 16)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__attachment-type-icon[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 37)}.str-chat__message-attachment-audio-widget--play-button[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 24);display:flex;align-items:center;justify-content:center;height:calc(var(--str-chat__spacing-px) * 36);width:calc(var(--str-chat__spacing-px) * 36);cursor:pointer}.str-chat__message-attachment-audio-widget--play-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:var(--str-chat__spacing-3)}.str-chat__quoted-message-preview[_ngcontent-%COMP%]{--str-chat__attachment-margin: 0px}.str-chat__quoted-message-preview[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer!important}.str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-attachment-card[_ngcontent-%COMP%]   .str-chat__message-attachment-card--source-link[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-attachment-card[_ngcontent-%COMP%]   .str-chat__message-attachment-card--content[_ngcontent-%COMP%]{display:none}.str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__track[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--play-button[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-download[_ngcontent-%COMP%]{display:none}.str-chat__message[_ngcontent-%COMP%]   .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]{padding:0}.str-chat__audio_recorder__waveform-box[_ngcontent-%COMP%], .str-chat__wave-progress-bar__track[_ngcontent-%COMP%]{position:relative;flex:1;width:120px;height:calc(var(--str-chat__spacing-px) * 25);display:flex;align-items:center;gap:var(--str-chat__spacing-px)}.str-chat__audio_recorder__waveform-box[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__amplitude-bar[_ngcontent-%COMP%], .str-chat__wave-progress-bar__track[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__amplitude-bar[_ngcontent-%COMP%]{width:2px;min-width:2px;height:calc(var(--str-chat__wave-progress-bar__amplitude-bar-height) + 2px)}.str-chat__audio_recorder__waveform-box[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__progress-indicator[_ngcontent-%COMP%], .str-chat__wave-progress-bar__track[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__progress-indicator[_ngcontent-%COMP%]{position:absolute;left:0;height:calc(100% + 4px);width:calc(var(--str-chat__spacing-px) * 6)}.str-chat__attachment-list-angular-host[_ngcontent-%COMP%]{min-width:0}.str-chat__attachment-preview-list[_ngcontent-%COMP%]{--str-chat__loading-indicator-size: calc(var(--str-chat__spacing-px) * 18);display:flex;align-items:center;justify-content:center;padding:var(--str-chat__spacing-1_5);width:100%}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-list-scroll-container[_ngcontent-%COMP%]{overflow-y:hidden;overflow-x:auto;width:100%;max-width:100%;display:flex;align-items:center;justify-content:flex-start;column-gap:var(--str-chat__spacing-2)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-image[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;height:calc(var(--str-chat__spacing-px) * 72);width:calc(var(--str-chat__spacing-px) * 72);min-width:calc(var(--str-chat__spacing-px) * 72);overflow:hidden}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-image[_ngcontent-%COMP%]   .str-chat__attachment-preview-image-loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;width:100%;height:100%}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-image[_ngcontent-%COMP%]   .str-chat__attachment-preview-thumbnail[_ngcontent-%COMP%]{object-fit:cover;height:calc(var(--str-chat__spacing-px) * 72);width:calc(var(--str-chat__spacing-px) * 72);word-break:break-all;overflow:hidden}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;height:calc(var(--str-chat__spacing-px) * 72);width:calc(var(--str-chat__spacing-px) * 200);position:relative;padding:0 var(--str-chat__spacing-4);column-gap:var(--str-chat__spacing-2)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%]   .str-chat__attachment-preview-metadata[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-end[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%]   .str-chat__attachment-preview-metadata[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-end[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-metadata[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-end[_ngcontent-%COMP%]{overflow-y:visible;overflow-x:hidden;overflow-x:clip;min-width:0;flex:1;display:flex;flex-direction:column;align-items:flex-start;justify-content:center}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%]   .str-chat__attachment-preview-metadata[_ngcontent-%COMP%]   .str-chat__attachment-preview-title[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%]   .str-chat__attachment-preview-metadata[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-name[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-end[_ngcontent-%COMP%]   .str-chat__attachment-preview-title[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-end[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-name[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%]   .str-chat__attachment-preview-metadata[_ngcontent-%COMP%]   .str-chat__attachment-preview-title[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%]   .str-chat__attachment-preview-metadata[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-name[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-end[_ngcontent-%COMP%]   .str-chat__attachment-preview-title[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-end[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-name[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-metadata[_ngcontent-%COMP%]   .str-chat__attachment-preview-title[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-metadata[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-name[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-end[_ngcontent-%COMP%]   .str-chat__attachment-preview-title[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-end[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-name[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis;max-width:100%}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-icon[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-icon[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-icon[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 37);--str-chat-icon-width: auto;display:flex;align-items:center;justify-content:center}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:calc(var(--str-chat__spacing-px) * 37);width:unset}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-end[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-download[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 16);line-height:calc(var(--str-chat__spacing-px) * 13)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-end[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-download[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 16);height:calc(var(--str-chat__spacing-px) * 16)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   button.str-chat__attachment-preview-delete[_ngcontent-%COMP%]{padding:unset;background:unset;border:unset;border-radius:var(--str-chat__border-radius-circle);display:flex}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-delete[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 24);position:absolute;top:calc(var(--str-chat__spacing-px) * 2);inset-inline-end:calc(var(--str-chat__spacing-px) * 2);cursor:pointer;z-index:1}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-delete[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 24);height:calc(var(--str-chat__spacing-px) * 24)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-error[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 24);display:flex;align-items:center;justify-content:center;position:absolute;width:100%;height:100%;padding:unset;background:unset;border:unset;border-radius:unset;inset-inline-start:0;cursor:pointer;z-index:1}.str-chat__attachment-preview-list-angular-host[_ngcontent-%COMP%]{width:100%;max-width:100%}.str-chat__message-textarea-angular-host[_ngcontent-%COMP%]{position:relative}.str-chat__message-textarea-angular-host[_ngcontent-%COMP%]   mention-list[_ngcontent-%COMP%]{width:100%}.str-chat__message-textarea-angular-host[_ngcontent-%COMP%]   .mention-menu[_ngcontent-%COMP%]{padding:var(--str-chat__spacing-2) 0!important;margin:0!important;max-width:100%}.str-chat__message-textarea-angular-host[_ngcontent-%COMP%]   .mention-menu[_ngcontent-%COMP%]   .mention-item[_ngcontent-%COMP%]{padding:0!important}.str-chat__suggestion-list-container[_ngcontent-%COMP%]{position:absolute;bottom:var(--str-chat__spacing-7);width:100%;padding:var(--str-chat__spacing-2) 0}.str-chat__suggestion-list-container[_ngcontent-%COMP%]   .str-chat__suggestion-list[_ngcontent-%COMP%]{overflow-y:auto;max-height:calc(var(--str-chat__spacing-px) * 320);display:flex;flex-direction:column;list-style:none;padding:unset;margin:unset}.str-chat__slash-command[_ngcontent-%COMP%]{padding:var(--str-chat__spacing-2_5)}.str-chat__slash-command[_ngcontent-%COMP%]   .str-chat__slash-command-header[_ngcontent-%COMP%]   .str-chat__slash-command-args[_ngcontent-%COMP%]{margin-inline-start:var(--str-chat__spacing-2)}.str-chat__user-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:var(--str-chat__spacing-2_5);column-gap:var(--str-chat__spacing-2)}.str-chat__user-item[_ngcontent-%COMP%]   .str-chat__user-item--name[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis;overflow-y:hidden;width:100%}.str-chat__emoji-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:var(--str-chat__spacing-2_5);column-gap:var(--str-chat__spacing-2)}.str-chat__emoji-item[_ngcontent-%COMP%]   .str-chat__emoji-item--name[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis;width:100%}.str-chat__message-textarea-angular-host--autocomplete-hidden[_ngcontent-%COMP%]   mention-list[_ngcontent-%COMP%]{display:none}.str-chat__audio_recorder-container[_ngcontent-%COMP%]{bottom:0;display:flex;align-items:center;justify-content:flex-end;width:100%;min-height:3.25rem;padding-inline:1rem}.str-chat__audio_recorder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.375rem}.str-chat__audio_recorder[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:32px;width:32px;padding:0}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__cancel-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:28px}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__toggle-playback-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:16px}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__pause-recording-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:12px}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__resume-recording-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:24px}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__stop-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:12px}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__complete-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:16px}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__recording-timer[_ngcontent-%COMP%]{display:flex;align-items:center;width:3rem}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__recording-timer--hours[_ngcontent-%COMP%]{width:3.75rem}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__track-container[_ngcontent-%COMP%]{padding-block:.5rem;overflow-x:auto;height:fit-content}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__waveform-box-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:flex-end;width:100%}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__waveform-box[_ngcontent-%COMP%], .str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__track[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;flex-wrap:nowrap;height:2rem;margin-inline:1rem}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__track[_ngcontent-%COMP%]{width:120px}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__waveform-box[_ngcontent-%COMP%]{overflow-x:hidden}.str-chat__base-image[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-download[_ngcontent-%COMP%]{display:block}.str-chat__message-attachment-card--header[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-download[_ngcontent-%COMP%], .str-chat__gallery-image[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-download[_ngcontent-%COMP%], .str-chat__message-attachment--image[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-download[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:1rem}.str-chat__attachment-preview-image[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-download[_ngcontent-%COMP%]{display:none}.str-chat__channel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;position:relative}.str-chat__channel[_ngcontent-%COMP%]   .str-chat__container[_ngcontent-%COMP%]{height:100%;display:flex}.str-chat__channel[_ngcontent-%COMP%]   .str-chat__container[_ngcontent-%COMP%]   .str-chat__main-panel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;width:100%;min-width:0}.str-chat__channel[_ngcontent-%COMP%]   .str-chat__container[_ngcontent-%COMP%]   .str-chat__main-panel--hideOnThread[_ngcontent-%COMP%]{display:none}.str-chat__empty-channel[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 136);height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--str-chat__spacing-4);position:relative}.str-chat__empty-channel[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 136);height:calc(var(--str-chat__spacing-px) * 136)}.str-chat__empty-channel[_ngcontent-%COMP%]   .str-chat__empty-channel-notifications[_ngcontent-%COMP%]{position:absolute;inset-block-end:var(--str-chat__spacing-2)}.str-chat__loading-channel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-header[_ngcontent-%COMP%]{display:flex;padding:var(--str-chat__spacing-2);column-gap:var(--str-chat__spacing-4);align-items:center}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-header[_ngcontent-%COMP%]   .str-chat__loading-channel-header-avatar[_ngcontent-%COMP%]{flex-shrink:0;width:calc(var(--str-chat__spacing-px) * 40);height:calc(var(--str-chat__spacing-px) * 40);border-radius:var(--str-chat__avatar-border-radius)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-header[_ngcontent-%COMP%]   .str-chat__loading-channel-header-end[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:hidden;overflow-x:hidden;flex:1;row-gap:var(--str-chat__spacing-1_5)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-header[_ngcontent-%COMP%]   .str-chat__loading-channel-header-end[_ngcontent-%COMP%]   .str-chat__loading-channel-header-name[_ngcontent-%COMP%]{border-radius:var(--str-chat__border-radius-xs);height:calc(var(--str-chat__spacing-px) * 16);width:calc(var(--str-chat__spacing-px) * 170)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-header[_ngcontent-%COMP%]   .str-chat__loading-channel-header-end[_ngcontent-%COMP%]   .str-chat__loading-channel-header-info[_ngcontent-%COMP%]{border-radius:var(--str-chat__border-radius-xs);height:calc(var(--str-chat__spacing-px) * 16);width:calc(var(--str-chat__spacing-px) * 66)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]{padding:0 var(--str-chat__spacing-2);height:100%}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__li[_ngcontent-%COMP%]{margin-inline:calc(-1 * var(--str-chat__spacing-2));padding-inline:var(--str-chat__spacing-2)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]{margin-inline:calc(-1 * var(--str-chat__spacing-2))}@media only screen and (min-device-width: 768px){.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]{padding:0 min(var(--str-chat__spacing-10),4%)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__li[_ngcontent-%COMP%]{margin-inline:calc(-1*min(var(--str-chat__spacing-10),4%));padding-inline:min(var(--str-chat__spacing-10),4%)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]{margin-inline:calc(-1*min(var(--str-chat__spacing-10),4%) - 2px)}}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message[_ngcontent-%COMP%]{display:flex;width:100%;column-gap:var(--str-chat__spacing-2);padding:var(--str-chat__spacing-4) 0}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message[_ngcontent-%COMP%]   .str-chat__loading-channel-message-avatar[_ngcontent-%COMP%]{flex-shrink:0;width:calc(var(--str-chat__spacing-px) * 49);height:calc(var(--str-chat__spacing-px) * 49)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message[_ngcontent-%COMP%]   .str-chat__loading-channel-message-end[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;row-gap:var(--str-chat__spacing-2)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message[_ngcontent-%COMP%]   .str-chat__loading-channel-message-end[_ngcontent-%COMP%]   .str-chat__loading-channel-message-last-row[_ngcontent-%COMP%]{display:flex;width:100%;column-gap:var(--str-chat__spacing-2)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message[_ngcontent-%COMP%]   .str-chat__loading-channel-message-sender[_ngcontent-%COMP%]{height:calc(var(--str-chat__spacing-px) * 16);width:calc(var(--str-chat__spacing-px) * 66)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message[_ngcontent-%COMP%]   .str-chat__loading-channel-message-text[_ngcontent-%COMP%]{height:calc(var(--str-chat__spacing-px) * 16);width:100%}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message[_ngcontent-%COMP%]   .str-chat__loading-channel-message-date[_ngcontent-%COMP%]{height:calc(var(--str-chat__spacing-px) * 16);width:calc(var(--str-chat__spacing-px) * 50)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message[_ngcontent-%COMP%]:nth-of-type(2){flex-direction:row-reverse}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message[_ngcontent-%COMP%]:nth-of-type(2)   .str-chat__loading-channel-message-sender[_ngcontent-%COMP%]{align-self:end}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message[_ngcontent-%COMP%]:nth-of-type(2)   .str-chat__loading-channel-message-last-row[_ngcontent-%COMP%]{flex-direction:row-reverse}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-input-row[_ngcontent-%COMP%]{display:flex;column-gap:var(--str-chat__spacing-2);padding:var(--str-chat__spacing-2)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-input-row[_ngcontent-%COMP%]   .str-chat__loading-channel-message-input[_ngcontent-%COMP%]{width:100%;height:calc(var(--str-chat__spacing-px) * 36)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-input-row[_ngcontent-%COMP%]   .str-chat__loading-channel-message-send[_ngcontent-%COMP%]{height:calc(var(--str-chat__spacing-px) * 36);width:calc(var(--str-chat__spacing-px) * 36)}.str-chat__channel-header[_ngcontent-%COMP%]{display:flex;padding:var(--str-chat__spacing-2);column-gap:var(--str-chat__spacing-4);align-items:center}.str-chat__channel-header[_ngcontent-%COMP%]   .str-chat__header-hamburger[_ngcontent-%COMP%]{display:none}.str-chat__channel-header[_ngcontent-%COMP%]   .str-chat__channel-header-end[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:hidden;overflow-x:hidden;flex:1;row-gap:var(--str-chat__spacing-1_5)}.str-chat__channel-header[_ngcontent-%COMP%]   .str-chat__channel-header-end[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.str-chat__channel-header[_ngcontent-%COMP%]   .str-chat__channel-header-end[_ngcontent-%COMP%]   .str-chat__channel-header-title[_ngcontent-%COMP%], .str-chat__channel-header[_ngcontent-%COMP%]   .str-chat__channel-header-end[_ngcontent-%COMP%]   .str-chat__channel-header-info[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis}.str-chat__channel-header[_ngcontent-%COMP%]   .str-chat__channel-header-end[_ngcontent-%COMP%]   .str-chat__channel-header-title[_ngcontent-%COMP%]{overflow-y:hidden}.str-chat__channel-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow-y:auto;overflow-x:hidden}.str-chat__channel-list[_ngcontent-%COMP%]   .str-chat__channel-list-messenger[_ngcontent-%COMP%], .str-chat__channel-list[_ngcontent-%COMP%]   .str-chat__channel-list-messenger[_ngcontent-%COMP%]   .str-chat__channel-list-messenger__main[_ngcontent-%COMP%]{height:100%}.str-chat__channel-list[_ngcontent-%COMP%]   .str-chat__channel-list-messenger[_ngcontent-%COMP%]   .str-chat__channel-list-messenger__main[_ngcontent-%COMP%]   .str-chat__channel-list-empty[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 136);height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--str-chat__spacing-4)}.str-chat__channel-list[_ngcontent-%COMP%]   .str-chat__channel-list-messenger[_ngcontent-%COMP%]   .str-chat__channel-list-messenger__main[_ngcontent-%COMP%]   .str-chat__channel-list-empty[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 136);height:calc(var(--str-chat__spacing-px) * 136)}.str-chat__channel-list[_ngcontent-%COMP%]   .str-chat__channel-list-messenger[_ngcontent-%COMP%]   .str-chat__channel-list-messenger__main[_ngcontent-%COMP%]   .str-chat__channel-list-empty-v1[_ngcontent-%COMP%]{display:none}.str-chat__channel-list[_ngcontent-%COMP%]   .str-chat__load-more-button[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:var(--str-chat__spacing-2) 0}.str-chat__channel-list[_ngcontent-%COMP%]   .str-chat__load-more-button[_ngcontent-%COMP%]   .str-chat__load-more-button__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.str-chat__channel-list[_ngcontent-%COMP%]   .str-chat__down-main[_ngcontent-%COMP%]{display:none}.str-chat__channel-list-react[_ngcontent-%COMP%]{overflow:hidden}.str-chat__channel-list-react[_ngcontent-%COMP%]   .str-chat__channel-list-messenger-react[_ngcontent-%COMP%]{overflow:hidden;padding-bottom:var(--str-chat__spacing-2_5)}.str-chat__channel-list-react[_ngcontent-%COMP%]   .str-chat__channel-list-messenger-react[_ngcontent-%COMP%]   .str-chat__channel-list-messenger-react__main[_ngcontent-%COMP%]{overflow-y:auto}.str-chat__channel-preview[_ngcontent-%COMP%]{display:flex;column-gap:var(--str-chat__spacing-2);align-items:center;justify-content:flex-start;width:100%;padding:var(--str-chat__spacing-3) var(--str-chat__spacing-2);margin:0;text-align:start;cursor:pointer}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:var(--str-chat__spacing-0_5);width:100%;overflow-y:visible;overflow-x:hidden;overflow-x:clip;min-width:0}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end[_ngcontent-%COMP%]   .str-chat__channel-preview-end-first-row[_ngcontent-%COMP%]{display:flex;column-gap:var(--str-chat__spacing-1);align-items:stretch}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end[_ngcontent-%COMP%]   .str-chat__channel-preview-end-first-row[_ngcontent-%COMP%]   .str-chat__channel-preview-unread-badge[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 var(--str-chat__spacing-2)}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end[_ngcontent-%COMP%]   .str-chat__channel-preview-end-first-row[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--name[_ngcontent-%COMP%]{width:100%}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end[_ngcontent-%COMP%]   .str-chat__channel-preview-end-second-row[_ngcontent-%COMP%]{overflow-y:visible;overflow-x:hidden;overflow-x:clip;min-width:0;display:flex;column-gap:var(--str-chat__spacing-1);align-items:center}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end[_ngcontent-%COMP%]   .str-chat__channel-preview-end-second-row[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--last-message[_ngcontent-%COMP%]{flex:1}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end[_ngcontent-%COMP%]   .str-chat__channel-preview-end-second-row[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--status[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 15)}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end[_ngcontent-%COMP%]   .str-chat__channel-preview-end-second-row[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--status[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 15);height:calc(var(--str-chat__spacing-px) * 15)}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--name[_ngcontent-%COMP%], .str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--last-message[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis;overflow-y:hidden;min-width:0}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--last-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis;margin:0}.str-chat__channel-preview-loading[_ngcontent-%COMP%]{display:flex;column-gap:var(--str-chat__spacing-2);align-items:center;justify-content:flex-start;width:100%;padding:var(--str-chat__spacing-3) var(--str-chat__spacing-2);margin:0;text-align:start}.str-chat__channel-preview-loading[_ngcontent-%COMP%]   .str-chat__channel-preview-end-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:var(--str-chat__spacing-0_5);width:100%}.str-chat__channel-preview-loading[_ngcontent-%COMP%]   .str-chat__loading-channels-username[_ngcontent-%COMP%]{height:calc(var(--str-chat__spacing-px) * 16);width:calc(var(--str-chat__spacing-px) * 66)}.str-chat__channel-preview-loading[_ngcontent-%COMP%]   .str-chat__loading-channels-status[_ngcontent-%COMP%]{height:calc(var(--str-chat__spacing-px) * 16);width:100%}.str-chat__channel-search[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center}.str-chat__channel-search.str-chat__channel-search--with-results.str-chat__channel-search--inline[_ngcontent-%COMP%]{height:100%}.str-chat__channel-search.str-chat__channel-search--inline[_ngcontent-%COMP%]{min-height:0}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:var(--str-chat__spacing-2_5);height:65px}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-bar[_ngcontent-%COMP%]   .str-chat__channel-search-bar-button[_ngcontent-%COMP%]{background:none;border:none;width:calc(var(--str-chat__spacing-px) * 40);height:calc(var(--str-chat__spacing-px) * 40);padding:var(--str-chat__spacing-2_5);cursor:pointer}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-bar[_ngcontent-%COMP%]   .str-chat__channel-search-input--wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;padding:var(--str-chat__spacing-2_5);min-width:0}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-bar[_ngcontent-%COMP%]   .str-chat__channel-search-input--wrapper[_ngcontent-%COMP%]   .str-chat__channel-search-input--icon[_ngcontent-%COMP%], .str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-bar[_ngcontent-%COMP%]   .str-chat__channel-search-input--wrapper[_ngcontent-%COMP%]   .str-chat__channel-search-input--clear-button[_ngcontent-%COMP%]{display:inline-flex;padding:0 var(--str-chat__spacing-2_5)}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-bar[_ngcontent-%COMP%]   .str-chat__channel-search-input--wrapper[_ngcontent-%COMP%]   .str-chat__channel-search-input--clear-button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-bar[_ngcontent-%COMP%]   .str-chat__channel-search-input--wrapper[_ngcontent-%COMP%]   .str-chat__channel-search-input--clear-button[_ngcontent-%COMP%]:disabled{cursor:default}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-bar[_ngcontent-%COMP%]   .str-chat__channel-search-input--wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;min-width:0}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-container-searching[_ngcontent-%COMP%], .str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-results-header[_ngcontent-%COMP%]{width:100%;padding:var(--str-chat__spacing-5) var(--str-chat__spacing-4)}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-result-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-result-list.inline[_ngcontent-%COMP%]{flex:1}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-result-list.popup[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:65px;height:400px;z-index:1}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-result-list[_ngcontent-%COMP%]   .str-chat__channel-search-container-empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;padding:var(--str-chat__spacing-5) var(--str-chat__spacing-4)}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-result-list[_ngcontent-%COMP%]   .str-chat__channel-search-container-empty[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:calc(var(--str-chat__spacing-px) * 90 + var(--str-chat__spacing-20));width:calc(var(--str-chat__spacing-px) * 90);padding:var(--str-chat__spacing-10) 0}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-result-list[_ngcontent-%COMP%]   .str-chat__channel-search-result[_ngcontent-%COMP%]{background:none;border:none;display:flex;align-items:center;width:100%;column-gap:var(--str-chat__spacing-2);padding:var(--str-chat__spacing-3) var(--str-chat__spacing-2)}.str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-result-list[_ngcontent-%COMP%]   .str-chat__channel-search-result[_ngcontent-%COMP%]   .channel-search__result-text[_ngcontent-%COMP%], .str-chat__channel-search[_ngcontent-%COMP%]   .str-chat__channel-search-result-list[_ngcontent-%COMP%]   .str-chat__channel-search-result[_ngcontent-%COMP%]   .str-chat__channel-search-result--display-name[_ngcontent-%COMP%]{overflow-y:hidden}.str-chat__cta-button[_ngcontent-%COMP%]{padding:var(--str-chat__spacing-3_5) var(--str-chat__spacing-6);cursor:pointer}.str-chat__circle-fab[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 42);height:calc(var(--str-chat__spacing-px) * 42);padding:0;cursor:pointer;display:flex;justify-content:center;align-items:center}.str-chat__circle-fab[_ngcontent-%COMP%]   .str-chat__circle-fab-icon[_ngcontent-%COMP%]{display:inline-block;height:calc(var(--str-chat__spacing-px) * 24)}.str-chat__edit-message-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;justify-content:center;row-gap:var(--str-chat__spacing-5);width:100%;height:100%;min-height:0;min-width:0;max-width:100%;max-height:100%}.str-chat__edit-message-form[_ngcontent-%COMP%]   .str-chat__edit-message-form-options[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.str-chat__edit-message-form[_ngcontent-%COMP%]   .str-chat__edit-message-form-options[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;margin:0}.str-chat-angular__edit-message-form[_ngcontent-%COMP%]   .str-chat__message-input-angular-host[_ngcontent-%COMP%]{max-height:100%;min-height:0;display:flex;min-width:0;max-width:100%}.str-chat-angular__edit-message-form[_ngcontent-%COMP%]   .str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner[_ngcontent-%COMP%]{height:40%;max-height:80%;min-width:90%;max-width:90%;width:90%;flex-basis:min-content}@media only screen and (min-device-width: 768px){.str-chat-angular__edit-message-form[_ngcontent-%COMP%]   .str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner[_ngcontent-%COMP%]{min-width:40%;max-width:60%;width:min-content}}.str-chat__image-carousel[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;min-height:0;min-width:0;max-width:100%;max-height:100%;height:100%}.str-chat__image-carousel[_ngcontent-%COMP%]   .str-chat__image-carousel-stepper[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 30);padding:var(--str-chat__spacing-2_5);border:none;cursor:pointer;background:transparent}.str-chat__image-carousel[_ngcontent-%COMP%]   .str-chat__image-carousel-image[_ngcontent-%COMP%]{object-fit:contain;min-height:0;max-height:100%;min-width:0;max-width:100%;height:100%;width:100%}.str-chat__message[_ngcontent-%COMP%]   .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner[_ngcontent-%COMP%]{height:80%;width:80%}@media only screen and (max-device-width: 768px){.str-chat__message[_ngcontent-%COMP%]   .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner[_ngcontent-%COMP%]{height:100%;width:100%}}[dir=rtl][_ngcontent-%COMP%]   .str-chat__image-carousel-stepper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scaleX(-1)}.str-chat[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 24);--str-chat-icon-width: auto}.str-chat__icon[_ngcontent-%COMP%]{display:flex;font-family:stream-chat-icons;font-style:normal;font-weight:400;font-size:var(--str-chat-icon-height);line-height:var(--str-chat-icon-height);height:var(--str-chat-icon-height);width:var(--str-chat-icon-width)}.str-chat__icon[_ngcontent-%COMP%]:before{line-height:var(--str-chat-icon-height)}.str-chat__icon--unspecified-filetype[_ngcontent-%COMP%]{content:url(data:image/svg+xml;base64,PHN2ZwogIGRhdGEtdGVzdGlkPSJ1bnNwZWNpZmllZC1maWxldHlwZSIKICB3aWR0aD0iMzQiCiAgaGVpZ2h0PSI0MCIKICB2aWV3Qm94PSIwIDAgMzQgNDAiCiAgZmlsbD0ibm9uZSIKICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCj4KICA8cGF0aAogICAgZD0iTTAgM0MwIDEuMzQzMTUgMS4zNDMxNSAwIDMgMEgyM0wzNCAxMVYzN0MzNCAzOC42NTY5IDMyLjY1NjkgNDAgMzEgNDBIM0MxLjM0MzE1IDQwIDAgMzguNjU2OSAwIDM3VjNaIgogICAgZmlsbD0idXJsKCNwYWludDBfbGluZWFyKSIKICAvPgogIDxwYXRoIGQ9Ik0zNCAxMUwyNiAxMUMyNC4zNDMxIDExIDIzIDkuNjU2ODUgMjMgOFYwTDM0IDExWiIgZmlsbD0iI0RCREJEQiIgLz4KICA8cGF0aAogICAgZmlsbC1ydWxlPSJldmVub2RkIgogICAgY2xpcC1ydWxlPSJldmVub2RkIgogICAgZD0iTTggMTNIMjNWMTVIOFYxM1oiCiAgICBmaWxsPSIjQ0ZDRkNGIgogIC8+CiAgPHBhdGgKICAgIGZpbGwtcnVsZT0iZXZlbm9kZCIKICAgIGNsaXAtcnVsZT0iZXZlbm9kZCIKICAgIGQ9Ik04IDE3SDE4VjE5SDhWMTdaIgogICAgZmlsbD0iI0NGQ0ZDRiIKICAvPgogIDxwYXRoCiAgICBmaWxsLXJ1bGU9ImV2ZW5vZGQiCiAgICBjbGlwLXJ1bGU9ImV2ZW5vZGQiCiAgICBkPSJNOCAyMUgyM1YyM0g4VjIxWiIKICAgIGZpbGw9IiNDRkNGQ0YiCiAgLz4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICBpZD0icGFpbnQwX2xpbmVhciIKICAgICAgeDE9IjAiCiAgICAgIHkxPSIwIgogICAgICB4Mj0iMCIKICAgICAgeTI9IjQwIgogICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgID4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0id2hpdGUiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0RCREJEQiIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgo8L3N2Zz4=)}.str-chat__icon--audio-file[_ngcontent-%COMP%]{content:url(data:image/svg+xml;base64,PHN2ZwogIGNsYXNzPSJyZnUtZmlsZS1hdWRpbyIKICBmaWxsPSJub25lIgogIHZpZXdCb3g9IjAgMCAzNCA0MCIKICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgaGVpZ2h0PSIyMCIKICB3aWR0aD0iMjAiCj4KICA8cGF0aAogICAgY2xpcC1ydWxlPSJldmVub2RkIgogICAgZD0iTTE3LjcxNjggMzMuMTcyQzE4LjIzNDggMzMuMTcyIDE4LjQyMzggMzMuNjU1IDE4LjQyMzggMzQuMThDMTguNDIzOCAzNC42NDIgMTguMjk3OCAzNS4xOTUgMTcuNzE2OCAzNS4xOTVDMTcuMTcwOCAzNS4xOTUgMTYuOTg4OCAzNC42NDIgMTYuOTg4OCAzNC4xNDVDMTYuOTg4OCAzMy42ODMgMTcuMTcwOCAzMy4xNzIgMTcuNzE2OCAzMy4xNzJaTTE5LjU3MTggMzEuMDAySDE4LjM4MThWMzIuNzU4OUgxOC4zNjc4QzE4LjEyMjggMzIuNDMgMTcuNzc5OCAzMi4yNjIgMTcuMzMxOCAzMi4yNjJDMTYuMzAyOCAzMi4yNjIgMTUuNzk4OCAzMy4xNTggMTUuNzk4OCAzNC4xMDNDMTUuNzk4OCAzNS4xMjUgMTYuMjgxOCAzNi4xMDQ5IDE3LjQyMjggMzYuMTA0OUMxNy44NDI4IDM2LjEwNDkgMTguMTkyOCAzNS45MjMgMTguNDIzOCAzNS41OEgxOC40Mzc4VjM2SDE5LjU3MThWMzEuMDAyWk0xMi43MDk1IDM0LjE4NzJDMTIuNzA5NSAzMy43MjUyIDEyLjg3NzUgMzMuMTcyMiAxMy40MzA1IDMzLjE3MjJDMTMuOTgzNSAzMy4xNzIyIDE0LjE1ODUgMzMuNzI1MiAxNC4xNTg1IDM0LjE4NzJDMTQuMTU4NSAzNC42NDkyIDEzLjk4MzUgMzUuMTk1MiAxMy40MzA1IDM1LjE5NTJDMTIuODc3NSAzNS4xOTUyIDEyLjcwOTUgMzQuNjQ5MiAxMi43MDk1IDM0LjE4NzJaTTExLjUxOTUgMzQuMTg3MkMxMS41MTk1IDM1LjI3OTIgMTIuMzAzNSAzNi4xMDUyIDEzLjQzMDUgMzYuMTA1MkMxNC41NTc1IDM2LjEwNTIgMTUuMzQ4NSAzNS4yNzkyIDE1LjM0ODUgMzQuMTg3MkMxNS4zNDg1IDMzLjA5NTIgMTQuNTU3NSAzMi4yNjIyIDEzLjQzMDUgMzIuMjYyMkMxMi4zMDM1IDMyLjI2MjIgMTEuNTE5NSAzMy4wOTUyIDExLjUxOTUgMzQuMTg3MlpNMjEuODM5IDMyLjM2NzFIMjIuNTc0VjMzLjEzNzFIMjEuODM5VjM0Ljc4OTFDMjEuODM5IDM1LjA3NjEgMjIuMDA3IDM1LjEzOTEgMjIuMjY2IDM1LjEzOTFDMjIuMzE0MiAzNS4xMzkxIDIyLjM2NCAzNS4xMzU3IDIyLjQxNDcgMzUuMTMyM0MyMi40NjcyIDM1LjEyODcgMjIuNTIwNiAzNS4xMjUxIDIyLjU3NCAzNS4xMjUxVjM2LjAwMDFDMjIuNDgxIDM2LjAwMzEgMjIuMzg4IDM2LjAwOTkgMjIuMjk1IDM2LjAxNjhDMjIuMTcxIDM2LjAyNTkgMjIuMDQ3IDM2LjAzNTEgMjEuOTIzIDM2LjAzNTFDMjAuOTA4IDM2LjAzNTEgMjAuNjQ5IDM1Ljc0MTEgMjAuNjQ5IDM0Ljc1NDFWMzMuMTM3MUgyMC4wNDdWMzIuMzY3MUgyMC42NDlWMzEuMjY4MUgyMS44MzlWMzIuMzY3MVoiCiAgICBmaWxsPSJ3aGl0ZSIKICAgIGZpbGwtcnVsZT0iZXZlbm9kZCIKICA+PC9wYXRoPgogIDxwYXRoCiAgICBkPSJNMCAyOEgzNFYzN0MzNCAzOC42NTY5IDMyLjY1NjkgNDAgMzEgNDBIM0MxLjM0MzE1IDQwIDAgMzguNjU2OSAwIDM3VjI4WiIKICAgIGZpbGw9IiMyNzI3QjAiCiAgPjwvcGF0aD4KICA8cGF0aCBkPSJNMCAzQzAgMS4zNDMxNSAxLjM0MzE1IDAgMyAwSDIzTDM0IDExVjI4SDBWM1oiIGZpbGw9IiNGNUY1RjUiPjwvcGF0aD4KICA8cGF0aAogICAgZD0iTTM0IDExTDI2IDExQzI0LjM0MzEgMTEgMjMgOS42NTY4NSAyMyA4VjBMMzQgMTFaIgogICAgZmlsbD0iI0RCREJEQiIKICA+PC9wYXRoPgogIDxwYXRoCiAgICBjbGlwLXJ1bGU9ImV2ZW5vZGQiCiAgICBkPSJNOC44NzkxMiAyMS45NDFIMTIuMjk4TDE2Ljk1MjEgMjQuNzQ5M0MxNy4wMzA3IDI0LjgxMzggMTcuMTI5MyAyNC44NDkgMTcuMjMxMSAyNC44NDlDMTcuNDczOCAyNC44NDg4IDE3LjY3MDUgMjQuNjUxOSAxNy42NzAzIDI0LjQwOTJWMTIuNDM5OUMxNy42NzA0IDEyLjMzODEgMTcuNjM1MiAxMi4yMzk2IDE3LjU3MDcgMTIuMTYwOUMxNy40MTY4IDExLjk3MzIgMTcuMTM5OCAxMS45NDU3IDE2Ljk1MjEgMTIuMDk5NkwxMi4yOTggMTQuOTA4SDguODc5MTJDOC4zOTM2IDE0LjkwOCA4IDE1LjMwMTYgOCAxNS43ODcxVjIxLjA2MTlDOCAyMS41NDc0IDguMzkzNiAyMS45NDEgOC44NzkxMiAyMS45NDFaTTEyLjkyNTggMTYuNjY2NEwxNS45MTIyIDE1LjIyMjRWMjEuNjI2OEwxMi45MjU4IDIwLjE4MjlIOS43NTgzVjE2LjY2NjRIMTIuOTI1OFpNMTkuODUxMSAxNi4zNTE3QzE5LjQ3NCAxNi40MDkyIDE5LjIzOTcgMTYuNjYzNyAxOS4zMjgzIDE2LjkxOTFMMTkuMzI2MiAxNi45MkMxOS41Mjk1IDE3LjQ5OTUgMTkuNjMwNSAxOC4wOTggMTkuNjI4NCAxOC42OTUzQzE5LjYzMDUgMTkuMjk3NSAxOS41MjM3IDE5LjkwMTQgMTkuMzE5NiAyMC40OTA5QzE5LjIyOSAyMC43NDYyIDE5LjQ2ODIgMjAuOTk5NiAxOS44NDc0IDIxLjA2QzE5LjkwMDggMjEuMDY4MyAxOS45NTQyIDIxLjA3MiAyMC4wMDc2IDIxLjA3MkMyMC4zMjU5IDIxLjA3MiAyMC42MTU2IDIwLjkyMzQgMjAuNjkyMiAyMC43MDU3QzIwLjkxOTQgMjAuMDQ1MSAyMS4wMzM3IDE5LjM3IDIxLjAzNzQgMTguNjk1M0MyMS4wMzQ5IDE4LjAyNTEgMjAuOTIxMSAxNy4zNTc1IDIwLjY5NTUgMTYuNzAzNUMyMC42MDUzIDE2LjQ0NzcgMjAuMjI5IDE2LjI5MDggMTkuODUxMSAxNi4zNTE3Wk0yMi4xNjA1IDE0LjYwMjhDMjIuNTI1MiAxNC41MTYzIDIyLjkyNTkgMTQuNjQ1NCAyMy4wNTUgMTQuODkzOEMyMy42ODkxIDE2LjExNTcgMjQgMTcuNDA0MiAyNCAxOC42OTIzQzI0LjAwMDQgMTkuOTg5NSAyMy42Nzk2IDIxLjI4MzkgMjMuMDUyMSAyMi41MTUzQzIyLjk1MDMgMjIuNzEyMyAyMi42NzYzIDIyLjgzNDQgMjIuMzgyOCAyMi44MzQ0QzIyLjMwNzEgMjIuODM0NCAyMi4yMzAxIDIyLjgyNjEgMjIuMTU0MyAyMi44MDkyQzIxLjc4NjMgMjIuNzI1MSAyMS41OTE0IDIyLjQ1MzYgMjEuNzE4NSAyMi4yMDc3QzIyLjI5ODggMjEuMDc2MSAyMi41OTIyIDE5Ljg4MzYgMjIuNTkzMSAxOC42OTE5QzIyLjU5MzEgMTcuNTA1NiAyMi4zMDU0IDE2LjMyMjIgMjEuNzI3NiAxNS4yMDI1QzIxLjYwMDEgMTQuOTU2MyAyMS43OTUgMTQuNjg2IDIyLjE2MDUgMTQuNjAyOFoiCiAgICBmaWxsPSIjMjcyN0IwIgogICAgZmlsbC1ydWxlPSJldmVub2RkIgogID48L3BhdGg+Cjwvc3ZnPg==)}.str-chat__icon--action[_ngcontent-%COMP%]:before{content:"\\e800"}.str-chat__icon--arrow-down[_ngcontent-%COMP%]:before{content:"\\e801"}.str-chat__icon--arrow-left[_ngcontent-%COMP%]:before{content:"\\e802"}.str-chat__icon--arrow-right[_ngcontent-%COMP%]:before{content:"\\e803"}.str-chat__icon--close[_ngcontent-%COMP%]:before{content:"\\e804"}.str-chat__icon--arrow-up[_ngcontent-%COMP%]:before{content:"\\e805"}.str-chat__icon--chat-bubble[_ngcontent-%COMP%]:before{content:"\\e806"}.str-chat__icon--pause[_ngcontent-%COMP%]:before{content:"\\e807"}.str-chat__icon--download[_ngcontent-%COMP%]:before{content:"\\e808"}.str-chat__icon--delivered[_ngcontent-%COMP%]:before{content:"\\e809"}.str-chat__icon--play[_ngcontent-%COMP%]:before{content:"\\e80a"}.str-chat__icon--reaction[_ngcontent-%COMP%]:before{content:"\\e80b"}.str-chat__icon--error[_ngcontent-%COMP%]:before{content:"\\e80c"}.str-chat__icon--read[_ngcontent-%COMP%]:before{content:"\\e80d"}.str-chat__icon--retry[_ngcontent-%COMP%]:before{content:"\\e80e"}.str-chat__icon--reply-in-thread[_ngcontent-%COMP%]:before{content:"\\e80f"}.str-chat__icon--send[_ngcontent-%COMP%]:before{content:"\\e810"}.str-chat__icon--attach[_ngcontent-%COMP%]:before{content:"\\e811"}.str-chat__link-preview-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem;width:100%;margin-bottom:.75rem;padding-inline:.75rem}.str-chat__link-preview-card[_ngcontent-%COMP%]{width:100%;min-width:0;display:flex;align-items:center;justify-content:space-around;gap:1rem}.str-chat__link-preview-card[_ngcontent-%COMP%]   .str-chat__tooltip[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis;display:block;max-width:calc(var(--str-chat__spacing-px) * 250);padding-inline:.5rem}.str-chat__link-preview-card[_ngcontent-%COMP%]   .str-chat__link-preview-card__icon-container[_ngcontent-%COMP%]{display:flex;align-items:center}.str-chat__link-preview-card[_ngcontent-%COMP%]   .str-chat__link-preview-card__content[_ngcontent-%COMP%]{width:100%;min-width:0;flex:1;padding-inline:.5rem}.str-chat__link-preview-card[_ngcontent-%COMP%]   .str-chat__link-preview-card__content[_ngcontent-%COMP%]   .str-chat__link-preview-card__content-title[_ngcontent-%COMP%], .str-chat__link-preview-card[_ngcontent-%COMP%]   .str-chat__link-preview-card__content[_ngcontent-%COMP%]   .str-chat__link-preview-card__content-description[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis}.str-chat__link-preview-card[_ngcontent-%COMP%]   .str-chat__link-preview-card__dismiss-button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer}.str-chat[_ngcontent-%COMP%]{--str-chat__loading-indicator-size: calc(var(--str-chat__spacing-px) * 15)}.str-chat__loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_rotate 1s linear infinite}.str-chat__loading-indicator[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:var(--str-chat__loading-indicator-size);height:var(--str-chat__loading-indicator-size)}@-webkit-keyframes _ngcontent-%COMP%_rotate{0%{-webkit-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_rotate{0%{-ms-transform:rotate(0deg);-moz-transform:rotate(0deg);-webkit-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0)}to{-ms-transform:rotate(360deg);-moz-transform:rotate(360deg);-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.str-chat[_ngcontent-%COMP%]{--str-chat__message-options-button-size: calc(var(--str-chat__spacing-px) * 26);--str-chat__message-max-width: calc(var(--str-chat__spacing-px) * 480);--str-chat__message-with-attachment-max-width: calc(var(--str-chat__spacing-px) * 300);--str-chat__quoted-message-max-width: calc(var(--str-chat__spacing-px) * 250);--str-chat__quoted-message-inside-message-input-max-width: calc( var(--str-chat__spacing-px) * 200 );--str-chat__quoted-message-inside-message-input-max-height: calc( var(--str-chat__quoted-message-inside-message-input-max-width) + calc(var(--str-chat__spacing-px) * 50) )}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]{max-width:var(--str-chat__message-max-width)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__message-options-button-size) * .7)}.str-chat__message.str-chat__message--has-attachment[_ngcontent-%COMP%]{--str-chat__message-max-width: var(--str-chat__message-with-attachment-max-width)}.str-chat__message.str-chat__message--has-attachment[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]{max-width:var(--str-chat__message-max-width)}.str-chat__quoted-message-preview[_ngcontent-%COMP%]{--str-chat__message-max-width: var(--str-chat__quoted-message-max-width)}.str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__quoted-message-bubble[_ngcontent-%COMP%]{pointer-events:none;max-width:var(--str-chat__message-max-width)}.str-chat__message[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]{display:grid;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto;overflow-wrap:break-word}.str-chat__message.str-chat__message--other[_ngcontent-%COMP%], .str-chat__message.str-chat__quoted-message-preview[_ngcontent-%COMP%], .str-chat__quoted-message-preview.str-chat__message--other[_ngcontent-%COMP%], .str-chat__quoted-message-preview.str-chat__quoted-message-preview[_ngcontent-%COMP%]{grid-template-areas:"avatar message" ". replies" ". translation-notice" ". custom-metadata" ". metadata";column-gap:var(--str-chat__spacing-2);grid-template-columns:auto 1fr;justify-items:flex-start}.str-chat__message.str-chat__message--me[_ngcontent-%COMP%], .str-chat__quoted-message-preview.str-chat__message--me[_ngcontent-%COMP%]{grid-template-areas:"message" "replies" "translation-notice" "custom-metadata" "metadata";justify-items:end}.str-chat__message.str-chat__message--me[_ngcontent-%COMP%] > .str-chat__message-sender-avatar[_ngcontent-%COMP%], .str-chat__quoted-message-preview.str-chat__message--me[_ngcontent-%COMP%] > .str-chat__message-sender-avatar[_ngcontent-%COMP%]{display:none}.str-chat__message.str-chat__message--deleted[_ngcontent-%COMP%], .str-chat__quoted-message-preview.str-chat__message--deleted[_ngcontent-%COMP%]{grid-template-areas:"message"}.str-chat__message.str-chat__message--system[_ngcontent-%COMP%], .str-chat__quoted-message-preview.str-chat__message--system[_ngcontent-%COMP%]{grid-template-areas:"message";grid-template-columns:auto}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-sender-avatar[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-sender-avatar[_ngcontent-%COMP%]{grid-area:avatar;align-self:end}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]{grid-area:message;display:grid;grid-template-areas:"reactions reactions" "message-bubble options";grid-template-columns:auto 1fr;column-gap:var(--str-chat__spacing-2);position:relative}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]{grid-area:options;align-items:flex-start;justify-content:flex-end;flex-direction:row-reverse;width:calc(3 * var(--str-chat__message-options-button-size))}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-actions-box-button[_ngcontent-%COMP%], .str-chat__message[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-reply-in-thread-button[_ngcontent-%COMP%], .str-chat__message[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-reactions-button[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-actions-box-button[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-reply-in-thread-button[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-reactions-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer;width:var(--str-chat__message-options-button-size);height:var(--str-chat__message-options-button-size)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-actions-box-button[_ngcontent-%COMP%], .str-chat__message[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-actions-container[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-actions-box-button[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-actions-container[_ngcontent-%COMP%]{position:relative}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-reactions-host[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-reactions-host[_ngcontent-%COMP%]{grid-area:reactions}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]{grid-area:message-bubble;position:relative;min-width:0}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]   .str-chat__message-text[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]   .str-chat__message-text[_ngcontent-%COMP%]{padding:var(--str-chat__spacing-2) var(--str-chat__spacing-4)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]   .str-chat__message-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]   .str-chat__message-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]   .str-chat__message-text[_ngcontent-%COMP%]   .str-chat__message-text-inner[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]   .str-chat__message-text[_ngcontent-%COMP%]   .str-chat__message-text-inner[_ngcontent-%COMP%]{overflow-y:hidden}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]   .str-chat__message-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]   .str-chat__message-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:pre-line}.str-chat__message.str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__quoted-message-preview.str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]{grid-template-areas:"reactions reactions" "options message-bubble";grid-template-columns:1fr auto}.str-chat__message.str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%], .str-chat__quoted-message-preview.str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]{flex-direction:row}.str-chat__message[_ngcontent-%COMP%]   .str-chat__translation-notice[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__translation-notice[_ngcontent-%COMP%]{grid-area:translation-notice}.str-chat__message[_ngcontent-%COMP%]   .str-chat__translation-notice[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__translation-notice[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;padding:var(--str-chat__spacing-1) 0;margin:0}.str-chat__message[_ngcontent-%COMP%]   .str-chat__custom-message-metadata[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__custom-message-metadata[_ngcontent-%COMP%]{grid-area:custom-metadata;margin-block-start:var(--str-chat__spacing-0_5)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%]{grid-area:metadata;display:flex;flex-wrap:wrap;align-items:center;column-gap:var(--str-chat__spacing-1);margin-block-start:var(--str-chat__spacing-0_5)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%]   .str-chat__message-simple-name[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%]   .str-chat__message-simple-name[_ngcontent-%COMP%]{overflow-y:hidden}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%]   .str-chat__message-simple-timestamp[_ngcontent-%COMP%] + .str-chat__mesage-simple-edited[_ngcontent-%COMP%]:before, .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%]   .str-chat__message-simple-timestamp[_ngcontent-%COMP%] + .str-chat__mesage-simple-edited[_ngcontent-%COMP%]:before{content:"\\2022";margin-right:var(--str-chat__spacing-1)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%]   .str-chat__message-edited-timestamp[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%]   .str-chat__message-edited-timestamp[_ngcontent-%COMP%]{--str-chat__message-edited-timestamp-height: 1rem;flex-basis:100%}.str-chat__message.str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%], .str-chat__quoted-message-preview.str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%]{justify-content:flex-end;text-align:right}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-status[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-status[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 15);display:flex;align-items:center;justify-content:center;column-gap:var(--str-chat__spacing-0_5);position:relative}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-status[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-status[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 15);height:calc(var(--str-chat__spacing-px) * 15)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-replies-count-button-wrapper[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-replies-count-button-wrapper[_ngcontent-%COMP%]{grid-area:replies}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-replies-count-button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-replies-count-button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;padding:0}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message--deleted-inner[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message--deleted-inner[_ngcontent-%COMP%]{padding:var(--str-chat__spacing-2) var(--str-chat__spacing-4)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message--deleted-inner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message--deleted-inner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.str-chat__message[_ngcontent-%COMP%]   .str-chat__quoted-message-bubble[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__quoted-message-bubble[_ngcontent-%COMP%]{padding:var(--str-chat__spacing-2) var(--str-chat__spacing-4);display:flex;column-gap:var(--str-chat__spacing-1);min-width:0;width:100%}.str-chat__message[_ngcontent-%COMP%]   .str-chat__quoted-message-bubble[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__quoted-message-bubble[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.str-chat__message[_ngcontent-%COMP%]   .str-chat__emoji-display-fix[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__emoji-display-fix[_ngcontent-%COMP%]{display:inline-block;width:1.25em}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-error-icon[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__message-error-icon[_ngcontent-%COMP%]{display:none}.str-chat__message[_ngcontent-%COMP%]   .str-chat__simple-message--error-failed[_ngcontent-%COMP%], .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__simple-message--error-failed[_ngcontent-%COMP%]{cursor:pointer}.str-chat__message.str-chat__message--error[_ngcontent-%COMP%]   .str-chat__message-error-icon[_ngcontent-%COMP%], .str-chat__message.str-chat__message--failed[_ngcontent-%COMP%]   .str-chat__message-error-icon[_ngcontent-%COMP%], .str-chat__quoted-message-preview.str-chat__message--error[_ngcontent-%COMP%]   .str-chat__message-error-icon[_ngcontent-%COMP%], .str-chat__quoted-message-preview.str-chat__message--failed[_ngcontent-%COMP%]   .str-chat__message-error-icon[_ngcontent-%COMP%]{display:block;position:absolute;bottom:0;inset-inline-end:calc(-1 * calc(var(--str-chat__spacing-px) * 18) / 2)}.str-chat__message.str-chat__message--error[_ngcontent-%COMP%]   .str-chat__message-error-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .str-chat__message.str-chat__message--failed[_ngcontent-%COMP%]   .str-chat__message-error-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .str-chat__quoted-message-preview.str-chat__message--error[_ngcontent-%COMP%]   .str-chat__message-error-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .str-chat__quoted-message-preview.str-chat__message--failed[_ngcontent-%COMP%]   .str-chat__message-error-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 18);height:calc(var(--str-chat__spacing-px) * 18)}.str-chat__ul[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:hover:not(:has(.str-chat__reaction-list:hover, .str-chat__modal--open))[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%], .str-chat__ul[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:focus-within:not(:has(.str-chat__reaction-list:focus-within, .str-chat__modal--open))[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%], .str-chat__virtual-list[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:hover:not(:has(.str-chat__reaction-list:hover, .str-chat__modal--open))[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%], .str-chat__virtual-list[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:focus-within:not(:has(.str-chat__reaction-list:focus-within, .str-chat__modal--open))[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]{display:flex}.str-chat__ul[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:hover:not(:has(.str-chat__reaction-list:hover, .str-chat__modal--open))[_ngcontent-%COMP%]   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__ul[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:focus-within:not(:has(.str-chat__reaction-list:focus-within, .str-chat__modal--open))[_ngcontent-%COMP%]   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__virtual-list[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:hover:not(:has(.str-chat__reaction-list:hover, .str-chat__modal--open))[_ngcontent-%COMP%]   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__virtual-list[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:focus-within:not(:has(.str-chat__reaction-list:focus-within, .str-chat__modal--open))[_ngcontent-%COMP%]   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]{margin-inline-end:0}.str-chat__ul[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:hover:not(:has(.str-chat__reaction-list:hover, .str-chat__modal--open))[_ngcontent-%COMP%]   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__ul[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:focus-within:not(:has(.str-chat__reaction-list:focus-within, .str-chat__modal--open))[_ngcontent-%COMP%]   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__virtual-list[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:hover:not(:has(.str-chat__reaction-list:hover, .str-chat__modal--open))[_ngcontent-%COMP%]   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__virtual-list[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:focus-within:not(:has(.str-chat__reaction-list:focus-within, .str-chat__modal--open))[_ngcontent-%COMP%]   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]{margin-inline-start:0}@supports not selector(:has(a,b)){.str-chat__ul[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:hover   .str-chat__message-options[_ngcontent-%COMP%], .str-chat__ul[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:focus-within   .str-chat__message-options[_ngcontent-%COMP%], .str-chat__virtual-list[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:hover   .str-chat__message-options[_ngcontent-%COMP%], .str-chat__virtual-list[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:focus-within   .str-chat__message-options[_ngcontent-%COMP%]{display:flex}.str-chat__ul[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:hover   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__ul[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:focus-within   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__virtual-list[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:hover   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__virtual-list[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:focus-within   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]{margin-inline-end:0}.str-chat__ul[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:hover   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__ul[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:focus-within   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__virtual-list[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:hover   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%], .str-chat__virtual-list[_ngcontent-%COMP%]:not(.str-chat__message-options-in-bubble)   .str-chat__li[_ngcontent-%COMP%]:focus-within   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]{margin-inline-start:0}}.str-chat__ul.str-chat__message-options-in-bubble[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]:hover   .str-chat__message-options[_ngcontent-%COMP%], .str-chat__virtual-list.str-chat__message-options-in-bubble[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]:hover   .str-chat__message-options[_ngcontent-%COMP%]{display:flex}.str-chat__ul.str-chat__message-options-in-bubble[_ngcontent-%COMP%]   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]:hover, .str-chat__virtual-list.str-chat__message-options-in-bubble[_ngcontent-%COMP%]   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]:hover{margin-inline-end:0}.str-chat__ul.str-chat__message-options-in-bubble[_ngcontent-%COMP%]   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]:hover, .str-chat__virtual-list.str-chat__message-options-in-bubble[_ngcontent-%COMP%]   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]:hover{margin-inline-start:0}.str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]{display:none}.str-chat__message-inner[_ngcontent-%COMP%]   .str-chat__message-actions-open.str-chat__message-options[_ngcontent-%COMP%]{display:flex}.str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]{margin-inline-end:calc(var(--str-chat__message-options-button-size) * 3)}.str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-inner[_ngcontent-%COMP%]{margin-inline-start:calc(var(--str-chat__message-options-button-size) * 3)}.str-chat__li--middle[_ngcontent-%COMP%]   .str-chat__message[_ngcontent-%COMP%], .str-chat__li--top[_ngcontent-%COMP%]   .str-chat__message[_ngcontent-%COMP%]{margin-block-end:var(--str-chat__spacing-0_5)}.str-chat__li--middle[_ngcontent-%COMP%]   .str-chat__message[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%], .str-chat__li--top[_ngcontent-%COMP%]   .str-chat__message[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%]{display:none}.str-chat__li--middle[_ngcontent-%COMP%]   .str-chat__message[_ngcontent-%COMP%] > .str-chat__message-sender-avatar[_ngcontent-%COMP%], .str-chat__li--top[_ngcontent-%COMP%]   .str-chat__message[_ngcontent-%COMP%] > .str-chat__message-sender-avatar[_ngcontent-%COMP%]{visibility:hidden}.str-chat__li--bottom[_ngcontent-%COMP%]   .str-chat__message[_ngcontent-%COMP%], .str-chat__li--single[_ngcontent-%COMP%]   .str-chat__message[_ngcontent-%COMP%]{margin-block-end:var(--str-chat__spacing-2)}.str-chat__date-separator[_ngcontent-%COMP%]{display:flex;padding:var(--str-chat__spacing-8);align-items:center}.str-chat__date-separator-line[_ngcontent-%COMP%]{flex:1;height:var(--str-chat__spacing-px)}.str-chat__date-separator[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child){margin-right:var(--str-chat__spacing-4)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__quoted-message-preview[_ngcontent-%COMP%]{margin-block-end:var(--str-chat__spacing-2)}.str-chat__message--system[_ngcontent-%COMP%]{width:100%;text-align:center}.str-chat__message--system[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__quoted-message-bubble[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;row-gap:var(--str-chat__spacing-1);flex-basis:min-content}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__quoted-message-preview[_ngcontent-%COMP%]{--str-chat__message-max-width: var(--str-chat__quoted-message-inside-message-input-max-width)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__quoted-message-bubble[_ngcontent-%COMP%]{max-height:var(--str-chat__quoted-message-inside-message-input-max-height)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__quoted-message-bubble[_ngcontent-%COMP%]   .str-chat__quoted-message-text[_ngcontent-%COMP%]{max-height:100%;min-height:0}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__quoted-message-bubble[_ngcontent-%COMP%]   .str-chat__quoted-message-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-height:100%;overflow-y:auto;overflow-x:hidden}.str-chat__unread-messages-separator-wrapper[_ngcontent-%COMP%]{padding-block:.5rem}.str-chat__unread-messages-separator-wrapper[_ngcontent-%COMP%]   .str-chat__unread-messages-separator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;padding:.5rem}.str-chat__unread-messages-notification[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 16);position:absolute;top:.75rem;z-index:2;display:flex;align-items:center;overflow:clip}.str-chat__unread-messages-notification[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding-block:.5rem;height:100%;width:100%;white-space:nowrap}.str-chat__unread-messages-notification[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{padding-inline:.75rem .375rem}.str-chat__unread-messages-notification[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{padding-inline:.375rem .75rem}.str-chat__unread-messages-notification[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type   svg[_ngcontent-%COMP%]{width:.875rem}.str-chat-angular__message-bubble[_ngcontent-%COMP%]{transform:translateZ(0)}.str-chat-angular__message-bubble.str-chat-angular__message-bubble--attachment-modal-open[_ngcontent-%COMP%]{transform:none}.str-chat__message-edited-timestamp[_ngcontent-%COMP%]{overflow:hidden;transition:height .1s}.str-chat__message-edited-timestamp--open[_ngcontent-%COMP%]{height:var(--str-chat__message-edited-timestamp-height, 1rem)}.str-chat__message-edited-timestamp--collapsed[_ngcontent-%COMP%]{height:0}.str-chat__message-text--pointer-cursor[_ngcontent-%COMP%]{cursor:pointer}.str-chat__message-actions-box[_ngcontent-%COMP%]{overflow:hidden}.str-chat__message-actions-box[_ngcontent-%COMP%]   .str-chat__message-actions-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;min-width:10rem}.str-chat__message-actions-box[_ngcontent-%COMP%]   .str-chat__message-actions-list[_ngcontent-%COMP%]   .str-chat__message-actions-list-item-button[_ngcontent-%COMP%]{padding:var(--str-chat__spacing-2) var(--str-chat__spacing-4);margin:0;cursor:pointer;width:100%;text-align:start}.str-chat__message-actions-box[_ngcontent-%COMP%]:not(.str-chat__message-actions-box-angular){display:none;z-index:1}.str-chat__message-actions-box[_ngcontent-%COMP%]:not(.str-chat__message-actions-box-angular).str-chat__message-actions-box--open{display:block}.str-chat__message-bounce-prompt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--str-chat__spacing-9)}.str-chat__message-bounce-prompt[_ngcontent-%COMP%]   .str-chat__message-bounce-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--str-chat__spacing-2)}.str-chat__message-bounce-prompt[_ngcontent-%COMP%]   .str-chat__message-bounce-edit[_ngcontent-%COMP%], .str-chat__message-bounce-prompt[_ngcontent-%COMP%]   .str-chat__message-bounce-send[_ngcontent-%COMP%], .str-chat__message-bounce-prompt[_ngcontent-%COMP%]   .str-chat__message-bounce-delete[_ngcontent-%COMP%]{cursor:pointer;padding:var(--str-chat__spacing-2)}.str-chat__message-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;padding:var(--str-chat__spacing-1) var(--str-chat__spacing-2);position:relative}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__quoted-message-preview-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__quoted-message-preview-header[_ngcontent-%COMP%]   .str-chat__quoted-message-reply-to-message[_ngcontent-%COMP%]{width:100%;text-align:center}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__quoted-message-preview-header[_ngcontent-%COMP%]   .str-chat__quoted-message-remove[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 40);height:calc(var(--str-chat__spacing-px) * 40);cursor:pointer}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__dropzone-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;height:100%;width:100%;z-index:5}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__dropzone-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:unset}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-inner[_ngcontent-%COMP%]{flex-grow:1;width:100%;display:flex;align-items:center;justify-content:center}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-inner[_ngcontent-%COMP%]   .str-chat__file-input-container[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 24);display:flex;align-items:center;justify-content:center;width:calc(var(--str-chat__spacing-px) * 45);height:calc(var(--str-chat__spacing-px) * 45);cursor:pointer}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-inner[_ngcontent-%COMP%]   .str-chat__file-input-container[_ngcontent-%COMP%]   .str-chat__file-input[_ngcontent-%COMP%]{display:none}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-inner[_ngcontent-%COMP%]   .str-chat__file-input-container[_ngcontent-%COMP%]   .str-chat__file-input-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-inner[_ngcontent-%COMP%]   .str-chat__message-textarea-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;min-width:0;max-height:100%}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-inner[_ngcontent-%COMP%]   .str-chat__message-textarea-container[_ngcontent-%COMP%]   .str-chat__message-textarea-with-emoji-picker[_ngcontent-%COMP%]{width:100%;min-height:0;max-height:100%;display:flex;padding:var(--str-chat__spacing-2) var(--str-chat__spacing-4);column-gap:var(--str-chat__spacing-2)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-inner[_ngcontent-%COMP%]   .str-chat__message-textarea-container[_ngcontent-%COMP%]   .str-chat__message-textarea-with-emoji-picker[_ngcontent-%COMP%]   .str-chat__message-textarea[_ngcontent-%COMP%]{width:100%;display:flex;max-height:100%;overflow-y:auto;overflow-x:hidden;padding:0}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-inner[_ngcontent-%COMP%]   .str-chat__message-textarea-container[_ngcontent-%COMP%]   .str-chat__message-textarea-with-emoji-picker[_ngcontent-%COMP%]   .str-chat__message-textarea-emoji-picker[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:calc(var(--str-chat__spacing-px) * 27);height:calc(var(--str-chat__spacing-px) * 27);font-size:calc(var(--str-chat__spacing-px) * 27);align-self:end}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-inner[_ngcontent-%COMP%]   .str-chat__message-textarea-container[_ngcontent-%COMP%]   .str-chat__message-textarea-with-emoji-picker[_ngcontent-%COMP%]   .str-chat__message-textarea-emoji-picker[_ngcontent-%COMP%]   .str-chat__message-textarea-emoji-picker-container[_ngcontent-%COMP%]{z-index:5}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-inner[_ngcontent-%COMP%]   .str-chat__message-textarea-container[_ngcontent-%COMP%]   .str-chat__message-textarea-with-emoji-picker[_ngcontent-%COMP%]   .str-chat__message-textarea-emoji-picker[_ngcontent-%COMP%]   .str-chat__message-textarea-emoji-picker-container[_ngcontent-%COMP%]   .str-chat__emoji-picker-container[_ngcontent-%COMP%]{display:flex}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-inner[_ngcontent-%COMP%]   .str-chat__message-textarea-container[_ngcontent-%COMP%]   .str-chat__message-textarea-with-emoji-picker[_ngcontent-%COMP%]   .str-chat__message-textarea-emoji-picker[_ngcontent-%COMP%]   .str-chat__emoji-picker-button[_ngcontent-%COMP%]{padding:unset;background:unset;border:unset;border-radius:var(--str-chat__border-radius-circle);display:flex;cursor:pointer}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-inner[_ngcontent-%COMP%]   .str-chat__message-textarea-container[_ngcontent-%COMP%]   .str-chat__message-textarea-with-emoji-picker[_ngcontent-%COMP%]   .str-chat__message-textarea-emoji-picker[_ngcontent-%COMP%]   .str-chat__emoji-picker-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 24);height:calc(var(--str-chat__spacing-px) * 24)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-inner[_ngcontent-%COMP%]   .str-chat__message-textarea-container[_ngcontent-%COMP%]   .str-chat__message-textarea-with-emoji-picker[_ngcontent-%COMP%]   .str-chat__message-textarea-emoji-picker[_ngcontent-%COMP%]   .str-chat__emoji-picker-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__message-input-tools-color)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-textarea-angular-host[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-textarea-react-host[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:100%}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__send-button[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 32);display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0;width:calc(var(--str-chat__spacing-px) * 45);height:calc(var(--str-chat__spacing-px) * 45);min-width:calc(var(--str-chat__spacing-px) * 45)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__send-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 32);height:calc(var(--str-chat__spacing-px) * 32)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__start-recording-audio-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0;width:calc(var(--str-chat__spacing-px) * 40);height:calc(var(--str-chat__spacing-px) * 40);min-width:calc(var(--str-chat__spacing-px) * 40)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__start-recording-audio-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:calc(var(--str-chat__spacing-px) * 25)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-cooldown[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-inline-start:var(--str-chat__spacing-2);margin-block:calc(var(--str-chat__spacing-2) / 2);min-width:calc(calc(var(--str-chat__spacing-px) * 45) - var(--str-chat__spacing-2));min-height:calc(calc(var(--str-chat__spacing-px) * 45) - var(--str-chat__spacing-2))}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-not-allowed[_ngcontent-%COMP%]{align-self:center;padding:var(--str-chat__spacing-3)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__quoted-message-preview[_ngcontent-%COMP%]{padding:var(--str-chat__spacing-2)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__recording-permission-denied-notification[_ngcontent-%COMP%]{position:absolute;left:.5rem;max-width:100%;bottom:100%;padding:1rem;margin-inline:.5rem;z-index:2}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__recording-permission-denied-notification[_ngcontent-%COMP%]   .str-chat__recording-permission-denied-notification__dismiss-button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.str-chat__message-input-angular-host[_ngcontent-%COMP%]{max-height:50%}.str-chat-angular__message-input[_ngcontent-%COMP%]{height:100%;max-height:100%}.str-chat-angular__message-input-inner[_ngcontent-%COMP%]{height:100%;max-height:100%;min-height:0;flex-grow:initial}[dir=rtl][_ngcontent-%COMP%]   .str-chat__send-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .str-chat__start-recording-audio-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scaleX(-1)}.str-chat__main-panel-inner[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;min-height:0;position:relative;align-items:center}.str-chat__list[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto;overscroll-behavior:none;width:100%;height:100%;max-height:100%}.str-chat__list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%]{padding:0 var(--str-chat__spacing-2)}.str-chat__list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%]   .str-chat__li[_ngcontent-%COMP%]{margin-inline:calc(-1 * var(--str-chat__spacing-2));padding-inline:var(--str-chat__spacing-2)}.str-chat__list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]{margin-inline:calc(-1 * var(--str-chat__spacing-2))}@media only screen and (min-device-width: 768px){.str-chat__list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%]{padding:0 min(var(--str-chat__spacing-10),4%)}.str-chat__list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%]   .str-chat__li[_ngcontent-%COMP%]{margin-inline:calc(-1*min(var(--str-chat__spacing-10),4%));padding-inline:min(var(--str-chat__spacing-10),4%)}.str-chat__list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]{margin-inline:calc(-1*min(var(--str-chat__spacing-10),4%) - 2px)}}.str-chat__list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%]   .str-chat__ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.str-chat__list[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]{padding-block-end:var(--str-chat__spacing-4);margin-block-end:var(--str-chat__spacing-4)}.str-chat__list[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]   .str-chat__thread-start[_ngcontent-%COMP%]{text-align:start;padding-top:var(--str-chat__spacing-3)}.str-chat__jump-to-latest-message[_ngcontent-%COMP%]{position:absolute;inset-block-end:var(--str-chat__spacing-4);inset-inline-end:var(--str-chat__spacing-2);z-index:2}.str-chat__jump-to-latest-message[_ngcontent-%COMP%]   .str-chat__jump-to-latest-unread-count[_ngcontent-%COMP%]{position:absolute;padding:var(--str-chat__spacing-0_5) var(--str-chat__spacing-2);left:50%;transform:translate(-50%) translateY(-100%)}.str-chat__thread[_ngcontent-%COMP%]   .str-chat__main-panel-inner[_ngcontent-%COMP%]{height:auto}.str-chat__main-panel[_ngcontent-%COMP%]   .str-chat__ul[_ngcontent-%COMP%]   .str-chat__li[_ngcontent-%COMP%]:first-of-type{padding-top:4.5rem}.str-chat__main-panel[_ngcontent-%COMP%]   .str-chat__ul[_ngcontent-%COMP%]   .str-chat__date-separator[_ngcontent-%COMP%] + .str-chat__li[_ngcontent-%COMP%]:first-of-type{padding-top:inherit}.str-chat__virtual-list[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto;position:relative;flex:1;-webkit-overflow-scrolling:touch;margin:0;width:100%;height:100%}.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%]{overscroll-behavior:none}.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:0 var(--str-chat__spacing-2)}.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .str-chat__li[_ngcontent-%COMP%]{margin-inline:calc(-1 * var(--str-chat__spacing-2));padding-inline:var(--str-chat__spacing-2)}.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]{margin-inline:calc(-1 * var(--str-chat__spacing-2))}@media only screen and (min-device-width: 768px){.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:0 min(var(--str-chat__spacing-10),4%)}.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .str-chat__li[_ngcontent-%COMP%]{margin-inline:calc(-1*min(var(--str-chat__spacing-10),4%));padding-inline:min(var(--str-chat__spacing-10),4%)}.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__message-list-scroll[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]{margin-inline:calc(-1*min(var(--str-chat__spacing-10),4%) - 2px)}}.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]{padding-block-end:var(--str-chat__spacing-4)}.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]   .str-chat__thread-start[_ngcontent-%COMP%]{text-align:start;padding-top:var(--str-chat__spacing-3)}.str-chat__virtual-list__loading[_ngcontent-%COMP%]{display:flex;padding-top:var(--str-chat__spacing-2);justify-content:center;width:100%;position:absolute}.str-chat__virtual-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0!important}.str-chat__virtual-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{white-space:pre-line;overflow:hidden;word-wrap:break-word}.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__message[_ngcontent-%COMP%]{margin-block-end:0!important}.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__virtual-list-message-wrapper[_ngcontent-%COMP%]{padding-block-end:var(--str-chat__spacing-0_5)}.str-chat__thread--virtualized[_ngcontent-%COMP%]   .str-chat__main-panel-inner[_ngcontent-%COMP%]{height:100%}.str-chat__thread--virtualized[_ngcontent-%COMP%]   .str-chat__main-panel-inner[_ngcontent-%COMP%]   .str-chat__virtual-list-message-wrapper[_ngcontent-%COMP%]:first-of-type{padding-block-start:var(--str-chat__spacing-4)}.str-chat__message-reactions-container[_ngcontent-%COMP%]{display:flex}.str-chat__message-reactions-container[_ngcontent-%COMP%]   .str-chat__message-reactions[_ngcontent-%COMP%]{overflow-y:hidden;overflow-x:auto;scrollbar-width:none;list-style:none;display:flex;margin-block-start:var(--str-chat__spacing-0_5);margin-block-end:var(--str-chat__spacing-0_5);column-gap:var(--str-chat__spacing-0_5);width:fit-content;padding:0;position:relative}.str-chat__message-reactions-container[_ngcontent-%COMP%]   .str-chat__message-reactions[_ngcontent-%COMP%]   .str-chat__message-reaction[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:var(--str-chat__spacing-1_5);position:relative;cursor:pointer;flex-shrink:0}.str-chat__message-reactions-container[_ngcontent-%COMP%]   .str-chat__message-reactions[_ngcontent-%COMP%]   .str-chat__message-reaction[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;display:flex;align-items:center;justify-content:center;padding:0}.str-chat__message-reactions-container[_ngcontent-%COMP%]   .str-chat__message-reactions[_ngcontent-%COMP%]   .str-chat__message-reaction[_ngcontent-%COMP%]   .str-chat__message-reaction-emoji[_ngcontent-%COMP%]{height:calc(var(--str-chat__spacing-px) * 13);display:flex!important;align-items:center;justify-content:center}.str-chat__message-reactions-container[_ngcontent-%COMP%]   .str-chat__message-reactions[_ngcontent-%COMP%]   .str-chat__reaction-list--counter[_ngcontent-%COMP%], .str-chat__message-reactions-container[_ngcontent-%COMP%]   .str-chat__message-reactions[_ngcontent-%COMP%]   .str-chat__simple-reactions-list-item--last-number[_ngcontent-%COMP%]{display:none}.str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-reactions-container[_ngcontent-%COMP%]{justify-content:flex-end}.str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-reactions-container[_ngcontent-%COMP%]{justify-content:flex-start}.str-chat__message-reactions-details-modal[_ngcontent-%COMP%]   .str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner[_ngcontent-%COMP%]{height:40%;max-height:80%;min-width:90%;max-width:90%;width:90%;flex-basis:min-content}@media only screen and (min-device-width: 768px){.str-chat__message-reactions-details-modal[_ngcontent-%COMP%]   .str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner[_ngcontent-%COMP%]{min-width:40%;max-width:60%;width:min-content}}.str-chat__message-reactions-details[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:var(--str-chat__spacing-4);max-height:100%;height:100%;min-height:0}.str-chat__message-reactions-details[_ngcontent-%COMP%]   .str-chat__message-reactions-details-reaction-types[_ngcontent-%COMP%]{max-width:100%;width:100%;min-width:0;overflow-x:auto;gap:var(--str-chat__spacing-4);display:flex;align-items:center;flex-shrink:0}.str-chat__message-reactions-details[_ngcontent-%COMP%]   .str-chat__message-reactions-details-reaction-types[_ngcontent-%COMP%]   .str-chat__message-reactions-details-reaction-type[_ngcontent-%COMP%]{display:flex;align-items:center;padding:var(--str-chat__spacing-1) 0;flex-shrink:0;cursor:pointer}.str-chat__message-reactions-details[_ngcontent-%COMP%]   .str-chat__message-reactions-details-reaction-types[_ngcontent-%COMP%]   .str-chat__message-reactions-details-reaction-type[_ngcontent-%COMP%]   .str-chat__message-reaction-emoji--with-fallback[_ngcontent-%COMP%]{width:18px;line-height:18px}.str-chat__message-reactions-details[_ngcontent-%COMP%]   .str-chat__message-reaction-emoji-big[_ngcontent-%COMP%]{--str-chat__stream-emoji-size: 1em;align-self:center;font-size:2rem}.str-chat__message-reactions-details[_ngcontent-%COMP%]   .str-chat__message-reaction-emoji-big.str-chat__message-reaction-emoji--with-fallback[_ngcontent-%COMP%]{line-height:2rem}.str-chat__message-reactions-details[_ngcontent-%COMP%]   .str-chat__message-reactions-details-reacting-users[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--str-chat__spacing-3);max-height:100%;overflow-y:auto;min-height:30vh}.str-chat__message-reactions-details[_ngcontent-%COMP%]   .str-chat__message-reactions-details-reacting-users[_ngcontent-%COMP%]   .str-chat__loading-indicator[_ngcontent-%COMP%]{margin:auto}.str-chat__message-reactions-details[_ngcontent-%COMP%]   .str-chat__message-reactions-details-reacting-users[_ngcontent-%COMP%]   .str-chat__message-reactions-details-reacting-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--str-chat__spacing-2)}.str-chat__message-reaction-selector[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;position:absolute;inset-block-end:100%}.str-chat__message-reaction-selector[_ngcontent-%COMP%]   .str-chat__message-reactions-options[_ngcontent-%COMP%]{list-style:none;display:flex;margin-block-end:var(--str-chat__spacing-0_5);width:fit-content;column-gap:var(--str-chat__spacing-1);padding:var(--str-chat__spacing-2)}.str-chat__message-reaction-selector[_ngcontent-%COMP%]   .str-chat__message-reactions-options[_ngcontent-%COMP%]   .str-chat__message-reactions-option[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer;width:calc(var(--str-chat__spacing-px) * 40);height:calc(var(--str-chat__spacing-px) * 40)}.str-chat__message-reaction-selector[_ngcontent-%COMP%]   .str-chat__message-reactions-options[_ngcontent-%COMP%]   .str-chat__message-reactions-option[_ngcontent-%COMP%]   .str-chat__message-reaction-emoji[_ngcontent-%COMP%]{height:calc(var(--str-chat__spacing-px) * 20);display:flex!important;align-items:center;justify-content:center}.str-chat__message-reaction-selector[_ngcontent-%COMP%]   .str-chat__message-reactions-options[_ngcontent-%COMP%]   .str-chat__message-reactions-last-user[_ngcontent-%COMP%], .str-chat__message-reaction-selector[_ngcontent-%COMP%]   .str-chat__message-reactions-options[_ngcontent-%COMP%]   .str-chat__message-reactions-list-item__count[_ngcontent-%COMP%]{display:none}.str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-reaction-selector[_ngcontent-%COMP%]{inset-inline-end:0}.str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-reaction-selector[_ngcontent-%COMP%]{inset-inline-start:0}.str-chat__modal--open[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;position:fixed;inset:0;width:100%;height:100%;z-index:100}.str-chat__modal--open[_ngcontent-%COMP%]   button.str-chat__modal__close-button[_ngcontent-%COMP%]{padding:unset;background:unset;border:unset;border-radius:var(--str-chat__border-radius-circle);margin:var(--str-chat__spacing-2);cursor:pointer}.str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__close-button[_ngcontent-%COMP%]{--str-chat-icon-height: calc(var(--str-chat__spacing-px) * 28);display:flex;align-items:center;justify-content:center;padding:var(--str-chat__spacing-2);position:absolute;inset-block-start:0;inset-inline-end:0;cursor:pointer}.str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--str-chat__spacing-8) var(--str-chat__spacing-4);width:40%;min-width:0;min-height:0}.str-chat__modal--close[_ngcontent-%COMP%]{display:none}.str-chat__message-notification[_ngcontent-%COMP%]{display:block;position:absolute;align-self:center;padding:var(--str-chat__spacing-1) var(--str-chat__spacing-2);bottom:calc(var(--str-chat__spacing-px) * 10);z-index:101}.str-chat__list-notifications[_ngcontent-%COMP%]{position:relative}.str-chat__list-notifications[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;justify-content:center;row-gap:var(--str-chat__spacing-1);margin:var(--str-chat__spacing-1_5);width:auto}.str-chat__notification[_ngcontent-%COMP%]{padding:var(--str-chat__spacing-3_5) var(--str-chat__spacing-4)}.str-chat-react__notification[_ngcontent-%COMP%]{z-index:101}.str-chat__thread-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;width:100%}.str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]{display:flex;padding:var(--str-chat__spacing-2);column-gap:var(--str-chat__spacing-4);align-items:center}.str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__thread-header-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:hidden;overflow-x:hidden;flex:1;row-gap:var(--str-chat__spacing-1_5)}.str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__thread-header-details[_ngcontent-%COMP%]   .str-chat__thread-header-name[_ngcontent-%COMP%], .str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__thread-header-details[_ngcontent-%COMP%]   .str-chat__thread-header-reply-count[_ngcontent-%COMP%], .str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__thread-header-details[_ngcontent-%COMP%]   .str-chat__thread-header-channel-name[_ngcontent-%COMP%], .str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__thread-header-details[_ngcontent-%COMP%]   .str-chat__thread-header-subtitle[_ngcontent-%COMP%], .str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__thread-header-details[_ngcontent-%COMP%]   .str-chat__thread-header-title[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis}.str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__thread-header-details[_ngcontent-%COMP%]   .str-chat__thread-header-subtitle[_ngcontent-%COMP%]{overflow-y:hidden}.str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__close-thread-button[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:flex-end;width:calc(var(--str-chat__spacing-px) * 40);height:calc(var(--str-chat__spacing-px) * 40);cursor:pointer;line-height:calc(var(--str-chat__spacing-px) * 21);font-size:calc(var(--str-chat__spacing-px) * 21)}.str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__close-thread-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:calc(var(--str-chat__spacing-px) * 21);width:calc(var(--str-chat__spacing-px) * 21)}.str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-list[_ngcontent-%COMP%]{height:auto}.str-chat__main-panel--hideOnThread[_ngcontent-%COMP%] + .str-chat__thread-container[_ngcontent-%COMP%]{flex:1}.str-chat__parent-message-li[_ngcontent-%COMP%]{padding:var(--str-chat__spacing-2)}.str-chat__tooltip[_ngcontent-%COMP%]{overflow-y:hidden;display:flex;padding:var(--str-chat__spacing-2);z-index:1;max-width:calc(var(--str-chat__spacing-px) * 150);width:max-content}.str-chat__typing-indicator-react-host[_ngcontent-%COMP%]{position:static!important}.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__typing-indicator[_ngcontent-%COMP%]{position:static}.str-chat__typing-indicator[_ngcontent-%COMP%]{padding:var(--str-chat__spacing-1_5);display:flex;justify-content:flex-start;align-items:center;column-gap:var(--str-chat__spacing-1);position:absolute;inset-block-end:0;inset-inline-start:0;inset-inline-end:0}.str-chat__typing-indicator[_ngcontent-%COMP%]   .str-chat__typing-indicator__dots[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;column-gap:var(--str-chat__spacing-0_5)}.str-chat__typing-indicator[_ngcontent-%COMP%]   .str-chat__typing-indicator__dots[_ngcontent-%COMP%]   .str-chat__typing-indicator__dot[_ngcontent-%COMP%]{width:calc(var(--str-chat__spacing-px) * 4);height:calc(var(--str-chat__spacing-px) * 4)}.str-chat[_ngcontent-%COMP%]{--str-chat__blue950: #001333;--str-chat__blue900: #00163d;--str-chat__blue800: #002666;--str-chat__blue700: #003999;--str-chat__blue600: #004ccc;--str-chat__blue500: #005fff;--str-chat__blue400: #337eff;--str-chat__blue300: #669fff;--str-chat__blue200: #ccdfff;--str-chat__blue100: #e0f0ff;--str-chat__blue50: #ebf5ff;--str-chat__grey950: #080707;--str-chat__grey900: #17191c;--str-chat__grey800: #1c1e22;--str-chat__grey700: #272a30;--str-chat__grey600: #4c525c;--str-chat__grey500: #72767e;--str-chat__grey400: #b4b7bb;--str-chat__grey300: #dbdde1;--str-chat__grey200: #e9eaed;--str-chat__grey100: #f4f4f5;--str-chat__grey50: #ffffff;--str-chat__red900: #330003;--str-chat__red800: #660006;--str-chat__red700: #990008;--str-chat__red600: #cc000b;--str-chat__red500: #ff000e;--str-chat__red400: #ff3742;--str-chat__red300: #ff666e;--str-chat__red200: #ff999f;--str-chat__red100: #ffe5e7;--str-chat__green900: #062d16;--str-chat__green800: #0d592c;--str-chat__green700: #138643;--str-chat__green600: #19b359;--str-chat__green500: #20e070;--str-chat__green400: #4ce68c;--str-chat__green300: #79eca9;--str-chat__green200: #a6f2c6;--str-chat__green100: #e9f1ff;--str-chat__yellow900: #332500;--str-chat__yellow800: #664900;--str-chat__yellow700: #996e00;--str-chat__yellow600: #cc9200;--str-chat__yellow500: #ffb700;--str-chat__yellow400: #ffd466;--str-chat__yellow300: #ffe299;--str-chat__yellow200: #fff1cc;--str-chat__yellow100: #fff8e5}.str-chat[_ngcontent-%COMP%]{--str-chat__border-radius-xs: 8px;--str-chat__border-radius-sm: 14px;--str-chat__border-radius-md: 18px;--str-chat__border-radius-lg: 20px;--str-chat__border-radius-circle: 999px;--str-chat__font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen-Sans, Ubuntu, Cantarell, Helvetica Neue, sans-serif;--str-chat__caption-text: .75rem/1.3 var(--str-chat__font-family);--str-chat__caption-medium-text: 500 .75rem/1.3 var(--str-chat__font-family);--str-chat__caption-strong-text: 700 .75rem/1.3 var(--str-chat__font-family);--str-chat__body-text: .875rem/1.2 var(--str-chat__font-family);--str-chat__body-medium-text: 500 .875rem/1.2 var(--str-chat__font-family);--str-chat__body2-text: .9375rem/1.2 var(--str-chat__font-family);--str-chat__body2-medium-text: 500 .9375rem/1.2 var(--str-chat__font-family);--str-chat__subtitle-text: 1rem/1.1.25 var(--str-chat__font-family);--str-chat__subtitle-medium-text: 500 1rem/1.25 var(--str-chat__font-family);--str-chat__subtitle2-text: 1.25rem/1.2 var(--str-chat__font-family);--str-chat__subtitle2-medium-text: 500 1.25rem/1.2 var(--str-chat__font-family);--str-chat__headline-text: 1.5rem/1.2 var(--str-chat__font-family);--str-chat__headline2-text: 1.8rem/1.2 var(--str-chat__font-family)}.str-chat[_ngcontent-%COMP%], .str-chat__theme-light[_ngcontent-%COMP%]{--str-chat__primary-color: var(--str-chat__blue500);--str-chat__primary-overlay-color: rgba(0, 95, 255, .6);--str-chat__primary-color-low-emphasis: var(--str-chat__blue300);--str-chat__active-primary-color: var(--str-chat__blue600);--str-chat__on-primary-color: var(--str-chat__grey50);--str-chat__background-color: var(--str-chat__grey50);--str-chat__secondary-background-color: var(--str-chat__grey50);--str-chat__primary-surface-color: var(--str-chat__blue100);--str-chat__primary-surface-color-low-emphasis: var(--str-chat__blue50);--str-chat__surface-color: var(--str-chat__grey300);--str-chat__secondary-surface-color: var(--str-chat__grey200);--str-chat__tertiary-surface-color: var(--str-chat__grey100);--str-chat__text-color: var(--str-chat__grey950);--str-chat__text-low-emphasis-color: var(--str-chat__grey500);--str-chat__disabled-color: var(--str-chat__grey400);--str-chat__on-disabled-color: var(--str-chat__grey50);--str-chat__danger-color: var(--str-chat__red400);--str-chat__message-highlight-color: var(--str-chat__yellow100);--str-chat__unread-badge-color: var(--str-chat__red400);--str-chat__on-unread-badge-color: var(--str-chat__grey50);--str-chat__overlay-color: rgba(252, 252, 252, .9);--str-chat__secondary-overlay-color: rgba(0, 0, 0, .2);--str-chat__secondary-overlay-text-color: var(--str-chat__grey50);--str-chat__opaque-surface-background-color: rgba(0, 0, 0, .8);--str-chat__opaque-surface-text-color: var(--str-chat__grey50);--str-chat__box-shadow-color: rgba(0, 0, 0, .18);--str-chat__info-color: var(--str-chat__green500)}.str-chat__theme-dark[_ngcontent-%COMP%]{--str-chat__primary-color: var(--str-chat__blue400);--str-chat__primary-overlay-color: rgba(51, 126, 255, .6);--str-chat__primary-color-low-emphasis: var(--str-chat__blue700);--str-chat__active-primary-color: var(--str-chat__blue600);--str-chat__on-primary-color: var(--str-chat__grey50);--str-chat__background-color: var(--str-chat__grey950);--str-chat__secondary-background-color: var(--str-chat__grey900);--str-chat__primary-surface-color: var(--str-chat__blue900);--str-chat__primary-surface-color-low-emphasis: var(--str-chat__blue950);--str-chat__surface-color: var(--str-chat__grey700);--str-chat__secondary-surface-color: var(--str-chat__grey800);--str-chat__tertiary-surface-color: var(--str-chat__grey900);--str-chat__text-color: var(--str-chat__grey50);--str-chat__text-low-emphasis-color: var(--str-chat__grey500);--str-chat__disabled-color: var(--str-chat__grey600);--str-chat__on-disabled-color: var(--str-chat__grey50);--str-chat__danger-color: var(--str-chat__red600);--str-chat__message-highlight-color: var(--str-chat__yellow900);--str-chat__unread-badge-color: var(--str-chat__red400);--str-chat__on-unread-badge-color: var(--str-chat__grey50);--str-chat__overlay-color: rgba(0, 0, 0, .7);--str-chat__secondary-overlay-color: rgba(0, 0, 0, .4);--str-chat__secondary-overlay-text-color: var(--str-chat__grey50);--str-chat__opaque-surface-background-color: rgba(250, 250, 250, .85);--str-chat__opaque-surface-text-color: var(--str-chat__grey900);--str-chat__box-shadow-color: rgba(0, 0, 0, .8);--str-chat__info-color: var(--str-chat__green500)}.image-gallery-icon[_ngcontent-%COMP%]{color:#fff;transition:all .3s ease-out;appearance:none;background-color:transparent;border:0;cursor:pointer;outline:none;position:absolute;z-index:4;filter:drop-shadow(0 2px 2px #1a1a1a)}@media (hover: hover) and (pointer: fine){.image-gallery-icon[_ngcontent-%COMP%]:hover{color:#337ab7}.image-gallery-icon[_ngcontent-%COMP%]:hover   .image-gallery-svg[_ngcontent-%COMP%]{transform:scale(1.1)}}.image-gallery-icon[_ngcontent-%COMP%]:focus{outline:2px solid #337ab7}.image-gallery-using-mouse[_ngcontent-%COMP%]   .image-gallery-icon[_ngcontent-%COMP%]:focus{outline:none}.image-gallery-fullscreen-button[_ngcontent-%COMP%]{bottom:0;padding:20px}.image-gallery-fullscreen-button[_ngcontent-%COMP%]   .image-gallery-svg[_ngcontent-%COMP%]{height:28px;width:28px}@media (max-width: 768px){.image-gallery-fullscreen-button[_ngcontent-%COMP%]{padding:15px}.image-gallery-fullscreen-button[_ngcontent-%COMP%]   .image-gallery-svg[_ngcontent-%COMP%]{height:24px;width:24px}}@media (max-width: 480px){.image-gallery-fullscreen-button[_ngcontent-%COMP%]{padding:10px}.image-gallery-fullscreen-button[_ngcontent-%COMP%]   .image-gallery-svg[_ngcontent-%COMP%]{height:16px;width:16px}}.image-gallery-fullscreen-button[_ngcontent-%COMP%]{right:0}.image-gallery-left-nav[_ngcontent-%COMP%], .image-gallery-right-nav[_ngcontent-%COMP%]{padding:50px 10px;top:50%;transform:translateY(-50%)}.image-gallery-left-nav[_ngcontent-%COMP%]   .image-gallery-svg[_ngcontent-%COMP%], .image-gallery-right-nav[_ngcontent-%COMP%]   .image-gallery-svg[_ngcontent-%COMP%]{height:120px;width:60px}@media (max-width: 768px){.image-gallery-left-nav[_ngcontent-%COMP%]   .image-gallery-svg[_ngcontent-%COMP%], .image-gallery-right-nav[_ngcontent-%COMP%]   .image-gallery-svg[_ngcontent-%COMP%]{height:72px;width:36px}}@media (max-width: 480px){.image-gallery-left-nav[_ngcontent-%COMP%]   .image-gallery-svg[_ngcontent-%COMP%], .image-gallery-right-nav[_ngcontent-%COMP%]   .image-gallery-svg[_ngcontent-%COMP%]{height:48px;width:24px}}.image-gallery-left-nav[disabled][_ngcontent-%COMP%], .image-gallery-right-nav[disabled][_ngcontent-%COMP%]{cursor:disabled;opacity:.6;pointer-events:none}.image-gallery-left-nav[_ngcontent-%COMP%]{left:0}.image-gallery-right-nav[_ngcontent-%COMP%]{right:0}.image-gallery[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative;display:flex;justify-content:center;align-items:center}.image-gallery.fullscreen-modal[_ngcontent-%COMP%]{background:#000;height:100%;inset:0;position:fixed;width:100%;z-index:5}.image-gallery.fullscreen-modal[_ngcontent-%COMP%]   .image-gallery-content[_ngcontent-%COMP%]{top:50%;transform:translateY(-50%)}.image-gallery-content[_ngcontent-%COMP%]{position:relative;line-height:0;top:0}.image-gallery-content[_ngcontent-%COMP%]   .image-gallery-slide[_ngcontent-%COMP%]{background-color:var(--str-chat__secondary-surface-color)}.image-gallery-content[_ngcontent-%COMP%]   .image-gallery-slide[_ngcontent-%COMP%]   .str-chat__base-image--load-failed[_ngcontent-%COMP%]{height:var(--str-chat__attachment-max-width);width:var(--str-chat__attachment-max-width);font-size:0}.image-gallery-content[_ngcontent-%COMP%]   .image-gallery-slide[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-download[_ngcontent-%COMP%]{position:absolute;left:.375rem;top:.375rem}.image-gallery-content.fullscreen[_ngcontent-%COMP%]{background:#000}.image-gallery-content.fullscreen[_ngcontent-%COMP%]   .image-gallery-slide[_ngcontent-%COMP%]   .image-gallery-image[_ngcontent-%COMP%]{max-width:100%}.image-gallery-content[_ngcontent-%COMP%]   .image-gallery-slide[_ngcontent-%COMP%]   .image-gallery-image[_ngcontent-%COMP%]{max-height:calc(100vh - 80px);max-width:unset;object-fit:contain}.image-gallery-content.left[_ngcontent-%COMP%]   .image-gallery-slide[_ngcontent-%COMP%]   .image-gallery-image[_ngcontent-%COMP%], .image-gallery-content.right[_ngcontent-%COMP%]   .image-gallery-slide[_ngcontent-%COMP%]   .image-gallery-image[_ngcontent-%COMP%], .image-gallery-content.image-gallery-thumbnails-left[_ngcontent-%COMP%]   .image-gallery-slide[_ngcontent-%COMP%]   .image-gallery-image[_ngcontent-%COMP%], .image-gallery-content.image-gallery-thumbnails-right[_ngcontent-%COMP%]   .image-gallery-slide[_ngcontent-%COMP%]   .image-gallery-image[_ngcontent-%COMP%]{max-height:100vh}.image-gallery-slide-wrapper[_ngcontent-%COMP%]{position:relative}.image-gallery-slide-wrapper.left[_ngcontent-%COMP%], .image-gallery-slide-wrapper.right[_ngcontent-%COMP%], .image-gallery-slide-wrapper.image-gallery-thumbnails-left[_ngcontent-%COMP%], .image-gallery-slide-wrapper.image-gallery-thumbnails-right[_ngcontent-%COMP%]{display:inline-block;width:calc(100% - 110px)}@media (max-width: 768px){.image-gallery-slide-wrapper.left[_ngcontent-%COMP%], .image-gallery-slide-wrapper.right[_ngcontent-%COMP%], .image-gallery-slide-wrapper.image-gallery-thumbnails-left[_ngcontent-%COMP%], .image-gallery-slide-wrapper.image-gallery-thumbnails-right[_ngcontent-%COMP%]{width:calc(100% - 87px)}}.image-gallery-slide-wrapper.image-gallery-rtl[_ngcontent-%COMP%]{direction:rtl}.image-gallery-slides[_ngcontent-%COMP%]{line-height:0;overflow:hidden;position:relative;white-space:nowrap;text-align:center}.image-gallery-slide[_ngcontent-%COMP%]{left:0;position:absolute;top:0;width:100%}.image-gallery-slide.center[_ngcontent-%COMP%], .image-gallery-slide.image-gallery-center[_ngcontent-%COMP%]{position:relative}.image-gallery-slide[_ngcontent-%COMP%]   .image-gallery-image[_ngcontent-%COMP%]{width:100%;object-fit:contain}.image-gallery-index[_ngcontent-%COMP%]{background:#0006;color:#fff;line-height:1;padding:10px 20px;position:absolute;right:0;top:0;z-index:4}@media (max-width: 768px){.image-gallery-index[_ngcontent-%COMP%]{font-size:.8em;padding:5px 10px}}.str-chat[_ngcontent-%COMP%]{--str-chat__cta-button-border-radius: var(--str-chat__border-radius-xs);--str-chat__cta-button-color: var(--str-chat__on-primary-color);--str-chat__cta-button-background-color: var(--str-chat__primary-color);--str-chat__cta-button-border-block-start: none;--str-chat__cta-button-border-block-end: none;--str-chat__cta-button-border-inline-start: none;--str-chat__cta-button-border-inline-end: none;--str-chat__cta-button-box-shadow: none;--str-chat__cta-button-pressed-background-color: var(--str-chat__active-primary-color);--str-chat__cta-button-disabled-background-color: var(--str-chat__disabled-color);--str-chat__cta-button-disabled-color: var(--str-chat__on-disabled-color)}.str-chat__cta-button[_ngcontent-%COMP%]{background:var(--str-chat__cta-button-background-color);color:var(--str-chat__cta-button-color);box-shadow:var(--str-chat__cta-button-box-shadow);border-radius:var(--str-chat__cta-button-border-radius);border-block-start:var(--str-chat__cta-button-border-block-start);border-block-end:var(--str-chat__cta-button-border-block-end);border-inline-start:var(--str-chat__cta-button-border-inline-start);border-inline-end:var(--str-chat__cta-button-border-inline-end);font:var(--str-chat__subtitle-text)}.str-chat__cta-button[_ngcontent-%COMP%]:active{background-color:var(--str-chat__cta-button-pressed-background-color)}.str-chat__cta-button[_ngcontent-%COMP%]:disabled{background-color:var(--str-chat__cta-button-disabled-background-color);color:var(--str-chat__cta-button-disabled-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__circle-fab-border-radius: var(--str-chat__border-radius-circle);--str-chat__circle-fab-color: var(--str-chat__primary-color);--str-chat__circle-fab-background-color: var(--str-chat__secondary-background-color);--str-chat__circle-fab-pressed-background-color: var(--str-chat__surface-color);--str-chat__circle-fab-box-shadow: 0 2px 4px rgba(0, 0, 0, .25);--str-chat__circle-fab-border-block-start: none;--str-chat__circle-fab-border-block-end: none;--str-chat__circle-fab-border-inline-start: none;--str-chat__circle-fab-border-inline-end: none}.str-chat__circle-fab[_ngcontent-%COMP%]{background:var(--str-chat__circle-fab-background-color);color:var(--str-chat__circle-fab-color);box-shadow:var(--str-chat__circle-fab-box-shadow);border-radius:var(--str-chat__circle-fab-border-radius);border-block-start:var(--str-chat__circle-fab-border-block-start);border-block-end:var(--str-chat__circle-fab-border-block-end);border-inline-start:var(--str-chat__circle-fab-border-inline-start);border-inline-end:var(--str-chat__circle-fab-border-inline-end)}.str-chat__circle-fab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__circle-fab-color)}.str-chat__circle-fab[_ngcontent-%COMP%]:active{background-color:var(--str-chat__circle-fab-pressed-background-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__avatar-border-radius: var(--str-chat__border-radius-circle);--str-chat__avatar-color: var(--str-chat__on-primary-color);--str-chat__avatar-background-color: var(--str-chat__primary-color);--str-chat__avatar-border-block-start: none;--str-chat__avatar-border-block-end: none;--str-chat__avatar-border-inline-start: none;--str-chat__avatar-border-inline-end: none;--str-chat__avatar-box-shadow: none;--str-chat__avatar-online-indicator-color: var(--str-chat__info-color);--str-chat__avatar-online-indicator-border-radius: var(--str-chat__border-radius-circle)}.str-chat__avatar[_ngcontent-%COMP%]   .str-chat__avatar-image[_ngcontent-%COMP%]{background:var(--str-chat__avatar-background-color);color:var(--str-chat__avatar-color);box-shadow:var(--str-chat__avatar-box-shadow);border-radius:var(--str-chat__avatar-border-radius);border-block-start:var(--str-chat__avatar-border-block-start);border-block-end:var(--str-chat__avatar-border-block-end);border-inline-start:var(--str-chat__avatar-border-inline-start);border-inline-end:var(--str-chat__avatar-border-inline-end);display:block}.str-chat__avatar[_ngcontent-%COMP%]   .str-chat__avatar-fallback[_ngcontent-%COMP%]{background:var(--str-chat__avatar-background-color);color:var(--str-chat__avatar-color);box-shadow:var(--str-chat__avatar-box-shadow);border-radius:var(--str-chat__avatar-border-radius);border-block-start:var(--str-chat__avatar-border-block-start);border-block-end:var(--str-chat__avatar-border-block-end);border-inline-start:var(--str-chat__avatar-border-inline-start);border-inline-end:var(--str-chat__avatar-border-inline-end);text-transform:uppercase}.str-chat__avatar[_ngcontent-%COMP%]   .str-chat__avatar--online-indicator[_ngcontent-%COMP%]{background-color:var(--str-chat__avatar-online-indicator-color);border-radius:var(--str-chat__avatar-online-indicator-border-radius)}.str-chat__loading-channels-avatar[_ngcontent-%COMP%]{border-radius:var(--str-chat__avatar-border-radius)}.str-chat[_ngcontent-%COMP%]{--str-chat__attachment-list-border-radius: 0;--str-chat__attachment-list-color: var(--str-chat__text-color);--str-chat__attachment-list-background-color: transparent;--str-chat__attachment-list-border-block-start: none;--str-chat__attachment-list-border-block-end: none;--str-chat__attachment-list-border-inline-start: none;--str-chat__attachment-list-border-inline-end: none;--str-chat__attachment-list-box-shadow: none;--str-chat__image-attachment-border-radius: calc( var(--str-chat__message-bubble-border-radius) - var(--str-chat__attachment-margin) );--str-chat__image-attachment-color: var(--str-chat__text-color);--str-chat__image-attachment-background-color: var(--str-chat__secondary-surface-color);--str-chat__image-attachment-border-block-start: none;--str-chat__image-attachment-border-block-end: none;--str-chat__image-attachment-border-inline-start: none;--str-chat__image-attachment-border-inline-end: none;--str-chat__image-attachment-box-shadow: none;--str-chat__image-gallery-attachment-border-radius: calc( var(--str-chat__message-bubble-border-radius) - var(--str-chat__attachment-margin) );--str-chat__image-gallery-attachment-color: var(--str-chat__text-color);--str-chat__image-gallery-attachment-background-color: transparent;--str-chat__image-gallery-attachment-border-block-start: none;--str-chat__image-gallery-attachment-border-block-end: none;--str-chat__image-gallery-attachment-border-inline-start: none;--str-chat__image-gallery-attachment-border-inline-end: none;--str-chat__image-gallery-attachment-box-shadow: none;--str-chat__image-gallery-attachment-overlay: var(--str-chat__secondary-overlay-color);--str-chat__image-gallery-attachment-overlay-text-color: var( --str-chat__secondary-overlay-text-color );--str-chat__card-attachment-border-radius: 0;--str-chat__card-attachment-color: var(--str-chat__text-color);--str-chat__card-attachment-link-color: var(--str-chat__primary-color);--str-chat__card-attachment-background-color: transparent;--str-chat__card-attachment-border-block-start: none;--str-chat__card-attachment-border-block-end: none;--str-chat__card-attachment-border-inline-start: none;--str-chat__card-attachment-border-inline-end: none;--str-chat__card-attachment-box-shadow: none;--str-chat__file-attachment-border-radius: calc( var(--str-chat__message-bubble-border-radius) - var(--str-chat__attachment-margin) );--str-chat__file-attachment-color: var(--str-chat__text-color);--str-chat__file-attachment-secondary-color: var(--str-chat__text-low-emphasis-color);--str-chat__file-attachment-background-color: var(--str-chat__secondary-background-color);--str-chat__file-attachment-border-block-start: none;--str-chat__file-attachment-border-block-end: none;--str-chat__file-attachment-border-inline-start: none;--str-chat__file-attachment-border-inline-end: none;--str-chat__file-attachment-box-shadow: none;--str-chat__audio-attachment-widget-border-radius: calc( var(--str-chat__message-bubble-border-radius) - var(--str-chat__attachment-margin) );--str-chat__audio-attachment-widget-color: var(--str-chat__text-color);--str-chat__audio-attachment-widget-secondary-color: var(--str-chat__text-low-emphasis-color);--str-chat__audio-attachment-widget-background-color: var(--str-chat__secondary-background-color);--str-chat__audio-attachment-widget-border-block-start: none;--str-chat__audio-attachment-widget-border-block-end: none;--str-chat__audio-attachment-widget-border-inline-start: none;--str-chat__audio-attachment-widget-border-inline-end: none;--str-chat__audio-attachment-widget-box-shadow: none;--str-chat__voice-recording-attachment-widget-border-radius: calc( var(--str-chat__message-bubble-border-radius) - var(--str-chat__attachment-margin) );--str-chat__voice-recording-attachment-widget-color: var(--str-chat__text-color);--str-chat__voice-recording-attachment-widget-secondary-color: var( --str-chat__text-low-emphasis-color );--str-chat__voice-recording-attachment-widget-background-color: var( --str-chat__secondary-background-color );--str-chat__voice-recording-attachment-widget-border-block-start: none;--str-chat__voice-recording-attachment-widget-border-block-end: none;--str-chat__voice-recording-attachment-widget-border-inline-start: none;--str-chat__voice-recording-attachment-widget-border-inline-end: none;--str-chat__voice-recording-attachment-widget-box-shadow: none;--str-chat__audio-attachment-controls-button-border-radius: var(--str-chat__border-radius-circle);--str-chat__audio-attachment-controls-button-color: var(--str-chat__text-color);--str-chat__audio-attachment-controls-button-background-color: var( --str-chat__secondary-background-color );--str-chat__audio-attachment-controls-button-pressed-background-color: var( --str-chat__surface-color );--str-chat__audio-attachment-controls-button-border-block-start: none;--str-chat__audio-attachment-controls-button-border-block-end: none;--str-chat__audio-attachment-controls-button-border-inline-start: none;--str-chat__audio-attachment-controls-button-border-inline-end: none;--str-chat__audio-attachment-controls-button-box-shadow: var(--str-chat__circle-fab-box-shadow);--str-chat__attachment-actions-border-radius: 0;--str-chat__attachment-actions-color: var(--str-chat__text-color);--str-chat__attachment-actions-background-color: transparent;--str-chat__attachment-actions-border-block-start: none;--str-chat__attachment-actions-border-block-end: none;--str-chat__attachment-actions-border-inline-start: none;--str-chat__attachment-actions-border-inline-end: none;--str-chat__attachment-actions-box-shadow: none;--str-chat__attachment-action-border-radius: 0;--str-chat__attachment-action-color: var(--str-chat__text-low-emphasis-color);--str-chat__attachment-action-background-color: var(--str-chat__secondary-background-color);--str-chat__attachment-action-border-block-start: var(--str-chat__surface-color) 1px solid;--str-chat__attachment-action-border-block-end: var(--str-chat__surface-color) 1px solid;--str-chat__attachment-action-border-inline-start: var(--str-chat__surface-color) 1px solid;--str-chat__attachment-action-border-inline-end: var(--str-chat__surface-color) 1px solid;--str-chat__attachment-action-box-shadow: none;--str-chat__attachment-action-active-color: var(--str-chat__primary-color)}.str-chat__attachment-list[_ngcontent-%COMP%]{background:var(--str-chat__attachment-list-background-color);color:var(--str-chat__attachment-list-color);box-shadow:var(--str-chat__attachment-list-box-shadow);border-radius:var(--str-chat__attachment-list-border-radius);border-block-start:var(--str-chat__attachment-list-border-block-start);border-block-end:var(--str-chat__attachment-list-border-block-end);border-inline-start:var(--str-chat__attachment-list-border-inline-start);border-inline-end:var(--str-chat__attachment-list-border-inline-end)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--image[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--video[_ngcontent-%COMP%]{background:var(--str-chat__image-attachment-background-color);color:var(--str-chat__image-attachment-color);box-shadow:var(--str-chat__image-attachment-box-shadow);border-radius:var(--str-chat__image-attachment-border-radius);border-block-start:var(--str-chat__image-attachment-border-block-start);border-block-end:var(--str-chat__image-attachment-border-block-end);border-inline-start:var(--str-chat__image-attachment-border-inline-start);border-inline-end:var(--str-chat__image-attachment-border-inline-end)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__gallery[_ngcontent-%COMP%]{background:var(--str-chat__image-gallery-attachment-background-color);color:var(--str-chat__image-gallery-attachment-color);box-shadow:var(--str-chat__image-gallery-attachment-box-shadow);border-radius:var(--str-chat__image-gallery-attachment-border-radius);border-block-start:var(--str-chat__image-gallery-attachment-border-block-start);border-block-end:var(--str-chat__image-gallery-attachment-border-block-end);border-inline-start:var(--str-chat__image-gallery-attachment-border-inline-start);border-inline-end:var(--str-chat__image-gallery-attachment-border-inline-end)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__gallery[_ngcontent-%COMP%]   .str-chat__gallery-image[_ngcontent-%COMP%]{background-color:var(--str-chat__image-attachment-background-color);border:0}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__gallery[_ngcontent-%COMP%]   .str-chat__gallery-placeholder[_ngcontent-%COMP%]{color:var(--str-chat__image-gallery-attachment-overlay-text-color);display:flex;border:none;font:var(--str-chat__headline2-text)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__gallery[_ngcontent-%COMP%]   .str-chat__gallery-placeholder[_ngcontent-%COMP%]:after{background-color:var(--str-chat__image-gallery-attachment-overlay)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--svg-image[_ngcontent-%COMP%]{background-image:repeating-conic-gradient(#d4d5d7 0% 25%,#f4f4f4 0% 50%);background-size:24px 24px}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-unsupported[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]{background:var(--str-chat__file-attachment-background-color);color:var(--str-chat__file-attachment-color);box-shadow:var(--str-chat__file-attachment-box-shadow);border-radius:var(--str-chat__file-attachment-border-radius);border-block-start:var(--str-chat__file-attachment-border-block-start);border-block-end:var(--str-chat__file-attachment-border-block-end);border-inline-start:var(--str-chat__file-attachment-border-inline-start);border-inline-end:var(--str-chat__file-attachment-border-inline-end)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-unsupported[_ngcontent-%COMP%]   .str-chat__message-attachment-unsupported__title[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-name[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--title[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-name[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--title[_ngcontent-%COMP%]{font:var(--str-chat__subtitle-medium-text);word-break:keep-all}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-size[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-size[_ngcontent-%COMP%]{color:var(--str-chat__file-attachment-secondary-color);font:var(--str-chat__body-text)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item[_ngcontent-%COMP%]   .str-chat__message-attachment-download-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-download-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__file-attachment-color)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget[_ngcontent-%COMP%]{background:var(--str-chat__audio-attachment-widget-background-color);color:var(--str-chat__audio-attachment-widget-color);box-shadow:var(--str-chat__audio-attachment-widget-box-shadow);border-radius:var(--str-chat__audio-attachment-widget-border-radius);border-block-start:var(--str-chat__audio-attachment-widget-border-block-start);border-block-end:var(--str-chat__audio-attachment-widget-border-block-end);border-inline-start:var(--str-chat__audio-attachment-widget-border-inline-start);border-inline-end:var(--str-chat__audio-attachment-widget-border-inline-end)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--progress-track[_ngcontent-%COMP%]{background:linear-gradient(to right,var(--str-chat__primary-color) var(--str-chat__message-attachment-audio-widget-progress),var(--str-chat__disabled-color) var(--str-chat__message-attachment-audio-widget-progress));border-radius:calc(var(--str-chat__spacing-px) * 5)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--progress-track[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--progress-indicator[_ngcontent-%COMP%]{background-color:var(--str-chat__primary-color);border-radius:inherit}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--play-button[_ngcontent-%COMP%]{background:var(--str-chat__audio-attachment-controls-button-background-color);color:var(--str-chat__audio-attachment-controls-button-color);box-shadow:var(--str-chat__audio-attachment-controls-button-box-shadow);border-radius:var(--str-chat__audio-attachment-controls-button-border-radius);border-block-start:var(--str-chat__audio-attachment-controls-button-border-block-start);border-block-end:var(--str-chat__audio-attachment-controls-button-border-block-end);border-inline-start:var(--str-chat__audio-attachment-controls-button-border-inline-start);border-inline-end:var(--str-chat__audio-attachment-controls-button-border-inline-end)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--play-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__audio-attachment-controls-button-color)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--play-button[_ngcontent-%COMP%]:active{background-color:var(--str-chat__audio-attachment-controls-button-pressed-background-color)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]{background:var(--str-chat__voice-recording-attachment-widget-background-color);color:var(--str-chat__voice-recording-attachment-widget-color);box-shadow:var(--str-chat__voice-recording-attachment-widget-box-shadow);border-radius:var(--str-chat__voice-recording-attachment-widget-border-radius);border-block-start:var(--str-chat__voice-recording-attachment-widget-border-block-start);border-block-end:var(--str-chat__voice-recording-attachment-widget-border-block-end);border-inline-start:var(--str-chat__voice-recording-attachment-widget-border-inline-start);border-inline-end:var(--str-chat__voice-recording-attachment-widget-border-inline-end)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--str-chat__voice-recording-attachment-widget-color)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__title[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis;font:var(--str-chat__subtitle-medium-text)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__timer[_ngcontent-%COMP%]{font:var(--str-chat__body-text);color:var(--str-chat__text-low-emphasis-color);white-space:nowrap}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__amplitude-bar[_ngcontent-%COMP%]{background:var(--str-chat__text-low-emphasis-color);border-radius:var(--str-chat__border-radius-circle)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__amplitude-bar--active[_ngcontent-%COMP%]{background:var(--str-chat__primary-color)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__progress-indicator[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--str-chat__border-radius-circle);border:1px solid var(--str-chat__secondary-overlay-color);cursor:grab}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__error-message[_ngcontent-%COMP%]{font:var(--str-chat__body-text);color:var(--str-chat__text-low-emphasis-color)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message_attachment__playback-rate-button[_ngcontent-%COMP%]{box-shadow:0 2px 4px #00000040;border-radius:var(--str-chat__border-radius-circle);background-color:#fff;cursor:pointer}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--card[_ngcontent-%COMP%]{background:var(--str-chat__card-attachment-background-color);color:var(--str-chat__card-attachment-color);box-shadow:var(--str-chat__card-attachment-box-shadow);border-radius:var(--str-chat__card-attachment-border-radius);border-block-start:var(--str-chat__card-attachment-border-block-start);border-block-end:var(--str-chat__card-attachment-border-block-end);border-inline-start:var(--str-chat__card-attachment-border-inline-start);border-inline-end:var(--str-chat__card-attachment-border-inline-end);font:var(--str-chat__body-text)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--card[_ngcontent-%COMP%]   .str-chat__message-attachment-card--source-link[_ngcontent-%COMP%], .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment--card[_ngcontent-%COMP%]   .str-chat__message-attachment-card--title[_ngcontent-%COMP%]{font:var(--str-chat__body-medium-text)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--audio[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--audio[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]   .str-chat__message-attachment-card--source-link[_ngcontent-%COMP%]{background-color:var(--str-chat__audio-attachment-widget-background-color)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--audio[_ngcontent-%COMP%]   .str-chat__message-attachment-card-audio-widget[_ngcontent-%COMP%]{background-color:var(--str-chat__audio-attachment-widget-background-color);border-radius:0 0 calc(var(--str-chat__spacing-px) * 14) calc(var(--str-chat__spacing-px) * 14)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-card--audio[_ngcontent-%COMP%]   .str-chat__message-attachment-card-audio-widget[_ngcontent-%COMP%]   .str-chat__message-attachment-audio-widget--title[_ngcontent-%COMP%]{color:var(--str-chat__text-color);font:var(--str-chat__body-medium-text)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-actions[_ngcontent-%COMP%]{background:var(--str-chat__attachment-actions-background-color);color:var(--str-chat__attachment-actions-color);box-shadow:var(--str-chat__attachment-actions-box-shadow);border-radius:var(--str-chat__attachment-actions-border-radius);border-block-start:var(--str-chat__attachment-actions-border-block-start);border-block-end:var(--str-chat__attachment-actions-border-block-end);border-inline-start:var(--str-chat__attachment-actions-border-inline-start);border-inline-end:var(--str-chat__attachment-actions-border-inline-end)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-actions[_ngcontent-%COMP%]   .str-chat__message-attachment-actions-button[_ngcontent-%COMP%]{background:var(--str-chat__attachment-action-background-color);color:var(--str-chat__attachment-action-color);box-shadow:var(--str-chat__attachment-action-box-shadow);border-radius:var(--str-chat__attachment-action-border-radius);border-block-start:var(--str-chat__attachment-action-border-block-start);border-block-end:var(--str-chat__attachment-action-border-block-end);border-inline-start:var(--str-chat__attachment-action-border-inline-start);border-inline-end:var(--str-chat__attachment-action-border-inline-end);font:var(--str-chat__subtitle-medium-text);border-collapse:collapse}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-actions[_ngcontent-%COMP%]   .str-chat__message-attachment-actions-button[_ngcontent-%COMP%]:active{color:var(--str-chat__attachment-action-active-color)}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-actions[_ngcontent-%COMP%]   .str-chat__message-attachment-actions-button[_ngcontent-%COMP%]:not(:last-of-type){border-inline-end:none}.str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__message-attachment-with-actions.str-chat__message-attachment--giphy[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]{border-end-start-radius:0;border-end-end-radius:0}.str-chat__message-attachment-audio-widget--play-button[_ngcontent-%COMP%]{background:var(--str-chat__audio-attachment-controls-button-background-color);color:var(--str-chat__audio-attachment-controls-button-color);box-shadow:var(--str-chat__audio-attachment-controls-button-box-shadow);border-radius:var(--str-chat__audio-attachment-controls-button-border-radius);border-block-start:var(--str-chat__audio-attachment-controls-button-border-block-start);border-block-end:var(--str-chat__audio-attachment-controls-button-border-block-end);border-inline-start:var(--str-chat__audio-attachment-controls-button-border-inline-start);border-inline-end:var(--str-chat__audio-attachment-controls-button-border-inline-end)}.str-chat__message-attachment-audio-widget--play-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__audio-attachment-controls-button-color)}.str-chat__message-attachment-audio-widget--play-button[_ngcontent-%COMP%]:active{background-color:var(--str-chat__audio-attachment-controls-button-pressed-background-color)}.str-chat__message-attachment-card.str-chat__message-attachment-card--audio[_ngcontent-%COMP%]   .str-chat__message-attachment-card--header[_ngcontent-%COMP%]{border-end-start-radius:0;border-end-end-radius:0}.str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]{background:var(--str-chat__voice-recording-attachment-widget-background-color);color:var(--str-chat__voice-recording-attachment-widget-color);box-shadow:var(--str-chat__voice-recording-attachment-widget-box-shadow);border-radius:var(--str-chat__voice-recording-attachment-widget-border-radius);border-block-start:var(--str-chat__voice-recording-attachment-widget-border-block-start);border-block-end:var(--str-chat__voice-recording-attachment-widget-border-block-end);border-inline-start:var(--str-chat__voice-recording-attachment-widget-border-inline-start);border-inline-end:var(--str-chat__voice-recording-attachment-widget-border-inline-end)}.str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__title[_ngcontent-%COMP%]{white-space:nowrap;overflow-y:visible;overflow-x:hidden;overflow-x:clip;text-overflow:ellipsis;word-break:keep-all;font:var(--str-chat__subtitle-medium-text)}.str-chat__message-attachment__voice-recording-widget[_ngcontent-%COMP%]   .str-chat__message-attachment__voice-recording-widget__timer[_ngcontent-%COMP%]{font:var(--str-chat__body-text);color:var(--str-chat__text-low-emphasis-color);white-space:nowrap}.str-chat__audio_recorder__waveform-box[_ngcontent-%COMP%], .str-chat__wave-progress-bar__track[_ngcontent-%COMP%]{cursor:pointer}.str-chat__audio_recorder__waveform-box[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__amplitude-bar[_ngcontent-%COMP%], .str-chat__wave-progress-bar__track[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__amplitude-bar[_ngcontent-%COMP%]{background:var(--str-chat__text-low-emphasis-color);border-radius:var(--str-chat__border-radius-circle)}.str-chat__audio_recorder__waveform-box[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__amplitude-bar--active[_ngcontent-%COMP%], .str-chat__wave-progress-bar__track[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__amplitude-bar--active[_ngcontent-%COMP%]{background:var(--str-chat__primary-color)}.str-chat__audio_recorder__waveform-box[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__progress-indicator[_ngcontent-%COMP%], .str-chat__wave-progress-bar__track[_ngcontent-%COMP%]   .str-chat__wave-progress-bar__progress-indicator[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--str-chat__border-radius-circle);border:1px solid var(--str-chat__secondary-overlay-color);cursor:grab}.str-chat-angular__message-attachment-file-single[_ngcontent-%COMP%]   .str-chat__message-attachment-file--item-first-row[_ngcontent-%COMP%]{color:var(--str-chat__attachment-list-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__attachment-preview-list-border-radius: var(--str-chat__border-radius-sm);--str-chat__attachment-preview-list-color: var(--str-chat__text-color);--str-chat__attachment-preview-list-background-color: transparent;--str-chat__attachment-preview-list-border-block-start: none;--str-chat__attachment-preview-list-border-block-end: none;--str-chat__attachment-preview-list-border-inline-start: none;--str-chat__attachment-preview-list-border-inline-end: none;--str-chat__attachment-preview-list-box-shadow: none;--str-chat__attachment-preview-close-icon-background: var(--str-chat__secondary-overlay-color);--str-chat__attachment-preview-close-icon-color: var(--str-chat__secondary-overlay-text-color);--str-chat__attachment-preview-retry-icon-color: var(--str-chat__primary-color);--str-chat__attachment-preview-download-icon-color: var(--str-chat__text-low-emphasis-color);--str-chat__attachment-preview-overlay-color: var(--str-chat__overlay-color);--str-chat__attachment-preview-image-border-radius: var(--str-chat__border-radius-sm);--str-chat__attachment-preview-image-color: var(--str-chat__text-color);--str-chat__attachment-preview-image-background-color: transparent;--str-chat__attachment-preview-image-border-block-start: none;--str-chat__attachment-preview-image-border-block-end: none;--str-chat__attachment-preview-image-border-inline-start: none;--str-chat__attachment-preview-image-border-inline-end: none;--str-chat__attachment-preview-image-box-shadow: none;--str-chat__attachment-preview-file-border-radius: var(--str-chat__border-radius-md);--str-chat__attachment-preview-file-color: var(--str-chat__text-color);--str-chat__attachment-preview-file-background-color: transparent;--str-chat__attachment-preview-file-border-block-start: 1px solid var(--str-chat__surface-color);--str-chat__attachment-preview-file-border-block-end: 1px solid var(--str-chat__surface-color);--str-chat__attachment-preview-file-border-inline-start: 1px solid var(--str-chat__surface-color);--str-chat__attachment-preview-file-border-inline-end: 1px solid var(--str-chat__surface-color);--str-chat__attachment-preview-file-box-shadow: none}.str-chat__attachment-preview-list[_ngcontent-%COMP%]{background:var(--str-chat__attachment-preview-list-background-color);color:var(--str-chat__attachment-preview-list-color);box-shadow:var(--str-chat__attachment-preview-list-box-shadow);border-radius:var(--str-chat__attachment-preview-list-border-radius);border-block-start:var(--str-chat__attachment-preview-list-border-block-start);border-block-end:var(--str-chat__attachment-preview-list-border-block-end);border-inline-start:var(--str-chat__attachment-preview-list-border-inline-start);border-inline-end:var(--str-chat__attachment-preview-list-border-inline-end)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-list-scroll-container[_ngcontent-%COMP%]{border-radius:inherit}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-image[_ngcontent-%COMP%]{background:var(--str-chat__attachment-preview-image-background-color);color:var(--str-chat__attachment-preview-image-color);box-shadow:var(--str-chat__attachment-preview-image-box-shadow);border-radius:var(--str-chat__attachment-preview-image-border-radius);border-block-start:var(--str-chat__attachment-preview-image-border-block-start);border-block-end:var(--str-chat__attachment-preview-image-border-block-end);border-inline-start:var(--str-chat__attachment-preview-image-border-inline-start);border-inline-end:var(--str-chat__attachment-preview-image-border-inline-end)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-image[_ngcontent-%COMP%]   .str-chat__attachment-preview-thumbnail[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-image[_ngcontent-%COMP%]   .str-chat__attachment-preview-image-loading[_ngcontent-%COMP%]{border-radius:var(--str-chat__attachment-preview-image-border-radius);background-color:var(--str-chat__attachment-preview-overlay-color)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]{background:var(--str-chat__attachment-preview-file-background-color);color:var(--str-chat__attachment-preview-file-color);box-shadow:var(--str-chat__attachment-preview-file-box-shadow);border-radius:var(--str-chat__attachment-preview-file-border-radius);border-block-start:var(--str-chat__attachment-preview-file-border-block-start);border-block-end:var(--str-chat__attachment-preview-file-border-block-end);border-inline-start:var(--str-chat__attachment-preview-file-border-inline-start);border-inline-end:var(--str-chat__attachment-preview-file-border-inline-end)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%]   .str-chat__attachment-preview-title[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-name[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%]   .str-chat__attachment-preview-title[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-name[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-title[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-name[_ngcontent-%COMP%]{font:var(--str-chat__subtitle-medium-text)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-download[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-download[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-download[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__attachment-preview-download-icon-color);text-decoration:none}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-unsupported[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-download[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-download[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-download[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__attachment-preview-download-icon-color)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-file[_ngcontent-%COMP%]   .str-chat__attachment-preview-file-download[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__attachment-preview-download-icon-color)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-voice-recording[_ngcontent-%COMP%]   .str-chat__recording-timer[_ngcontent-%COMP%]{color:var(--str-chat__text-low-emphasis-color);font:var(--str-chat__caption-medium-text)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-delete[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__attachment-preview-close-icon-color)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-delete[_ngcontent-%COMP%]   .str-chat__icon[_ngcontent-%COMP%]{background-color:var(--str-chat__attachment-preview-close-icon-background);border-radius:999px}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-delete[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{background-color:var(--str-chat__attachment-preview-close-icon-background);border-radius:999px}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-delete[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__attachment-preview-close-icon-color)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-error[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__attachment-preview-retry-icon-color);background-color:var(--str-chat__attachment-preview-overlay-color)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-error[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__attachment-preview-retry-icon-color)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-error.str-chat__attachment-preview-error-image[_ngcontent-%COMP%]{border-radius:var(--str-chat__attachment-preview-image-border-radius)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-error.str-chat__attachment-preview-error-file[_ngcontent-%COMP%]{border-radius:var(--str-chat__attachment-preview-file-border-radius)}.str-chat__audio_recorder-container[_ngcontent-%COMP%]{background-color:var(--str-chat__background-color)}.str-chat__audio_recorder[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer}.str-chat__audio_recorder[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{cursor:default}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__cancel-button[_ngcontent-%COMP%], .str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__toggle-playback-button[_ngcontent-%COMP%]{color:var(--str-chat__text-low-emphasis-color)}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__pause-recording-button[_ngcontent-%COMP%], .str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__resume-recording-button[_ngcontent-%COMP%]{color:var(--str-chat__danger-color)}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__pause-recording-button[_ngcontent-%COMP%]{border:3px solid var(--str-chat__danger-color);border-radius:var(--str-chat__border-radius-circle)}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__stop-button[_ngcontent-%COMP%], .str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__complete-button[_ngcontent-%COMP%]{border-radius:var(--str-chat__border-radius-circle);color:var(--str-chat__on-primary-color);background-color:var(--str-chat__primary-color)}.str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__stop-button[_ngcontent-%COMP%]   .str-chat__loading-indicator[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   linearGradient[_ngcontent-%COMP%]   stop[_ngcontent-%COMP%]:last-child, .str-chat__audio_recorder[_ngcontent-%COMP%]   .str-chat__audio_recorder__complete-button[_ngcontent-%COMP%]   .str-chat__loading-indicator[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   linearGradient[_ngcontent-%COMP%]   stop[_ngcontent-%COMP%]:last-child{stop-color:var(--str-chat__background-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__autocomplete-menu-border-radius: var(--str-chat__border-radius-xs);--str-chat__autocomplete-menu-color: var(--str-chat__text-color);--str-chat__autocomplete-menu-background-color: var(--str-chat__secondary-background-color);--str-chat__autocomplete-menu-border-block-start: none;--str-chat__autocomplete-menu-border-block-end: none;--str-chat__autocomplete-menu-border-inline-start: none;--str-chat__autocomplete-menu-border-inline-end: none;--str-chat__autocomplete-menu-box-shadow: 0 0 8px rgba(0, 0, 0, .15);--str-chat__autocomplete-active-background-color: var(--str-chat__surface-color);--str-chat__suggestion-list-container-border-radius: var(--str-chat__border-radius-xs);--str-chat__suggestion-list-container-color: var(--str-chat__text-color);--str-chat__suggestion-list-container-background-color: var( --str-chat__secondary-background-color );--str-chat__suggestion-list-container-border-block-start: none;--str-chat__suggestion-list-container-border-block-end: none;--str-chat__suggestion-list-container-border-inline-start: none;--str-chat__suggestion-list-container-border-inline-end: none;--str-chat__suggestion-list-container-box-shadow: 0 0 8px rgba(0, 0, 0, .15);--str-chat__suggestion-list-item--selected-background-color: var(--str-chat__surface-color);--str-chat__slash-command-border-radius: 0;--str-chat__slash-command-color: var(--str-chat__text-color);--str-chat__slash-command-background-color: transparent;--str-chat__slash-command-border-block-start: none;--str-chat__slash-command-border-block-end: none;--str-chat__slash-command-border-inline-start: none;--str-chat__slash-command-border-inline-end: none;--str-chat__slash-command-box-shadow: none;--str-chat__slash-command-args-color: var(--str-chat__text-low-emphasis-color);--str-chat__mention-list-user-item-border-radius: 0;--str-chat__mention-list-user-item-color: var(--str-chat__text-color);--str-chat__mention-list-user-item-background-color: transparent;--str-chat__mention-list-user-item-border-block-start: none;--str-chat__mention-list-user-item-border-block-end: none;--str-chat__mention-list-user-item-border-inline-start: none;--str-chat__mention-list-user-item-border-inline-end: none;--str-chat__mention-list-user-item-box-shadow: none;--str-chat__mention-list-user-item-at-sign-color: var(--str-chat__primary-color);--str-chat__mention-list-emoji-item-font-family: var(--str-chat__font-family);--str-chat__mention-list-emoji-item-border-radius: 0;--str-chat__mention-list-emoji-item-color: var(--str-chat__text-color);--str-chat__mention-list-emoji-item-background-color: transparent;--str-chat__mention-list-emoji-item-border-block-start: none;--str-chat__mention-list-emoji-item-border-block-end: none;--str-chat__mention-list-emoji-item-border-inline-start: none;--str-chat__mention-list-emoji-item-border-inline-end: none;--str-chat__mention-list-emoji-item-box-shadow: none}.mention-menu[_ngcontent-%COMP%]{background:var(--str-chat__autocomplete-menu-background-color)!important;color:var(--str-chat__autocomplete-menu-color)!important;box-shadow:var(--str-chat__autocomplete-menu-box-shadow)!important;border-radius:var(--str-chat__autocomplete-menu-border-radius)!important;border-block-start:var(--str-chat__autocomplete-menu-border-block-start)!important;border-block-end:var(--str-chat__autocomplete-menu-border-block-end)!important;border-inline-start:var(--str-chat__autocomplete-menu-border-inline-start)!important;border-inline-end:var(--str-chat__autocomplete-menu-border-inline-end)!important}.mention-menu[_ngcontent-%COMP%]   .active.mention-active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background-color:var(--str-chat__autocomplete-active-background-color)!important}.mention-menu[_ngcontent-%COMP%]   .mention-item[_ngcontent-%COMP%]{color:var(--str-chat__autocomplete-menu-color)!important;background-color:transparent!important}.str-chat__slash-command[_ngcontent-%COMP%]{background:var(--str-chat__slash-command-background-color);color:var(--str-chat__slash-command-color);box-shadow:var(--str-chat__slash-command-box-shadow);border-radius:var(--str-chat__slash-command-border-radius);border-block-start:var(--str-chat__slash-command-border-block-start);border-block-end:var(--str-chat__slash-command-border-block-end);border-inline-start:var(--str-chat__slash-command-border-inline-start);border-inline-end:var(--str-chat__slash-command-border-inline-end)}.str-chat__slash-command[_ngcontent-%COMP%]   .str-chat__slash-command-header[_ngcontent-%COMP%]   .str-chat__slash-command-name[_ngcontent-%COMP%]{text-transform:capitalize;font:var(--str-chat__subtitle2-text)}.str-chat__slash-command[_ngcontent-%COMP%]   .str-chat__slash-command-header[_ngcontent-%COMP%]   .str-chat__slash-command-args[_ngcontent-%COMP%]{color:var(--str-chat__slash-command-args-color);font:var(--str-chat__subtitle-text)}.str-chat__user-item[_ngcontent-%COMP%]{background:var(--str-chat__mention-list-user-item-background-color);color:var(--str-chat__mention-list-user-item-color);box-shadow:var(--str-chat__mention-list-user-item-box-shadow);border-radius:var(--str-chat__mention-list-user-item-border-radius);border-block-start:var(--str-chat__mention-list-user-item-border-block-start);border-block-end:var(--str-chat__mention-list-user-item-border-block-end);border-inline-start:var(--str-chat__mention-list-user-item-border-inline-start);border-inline-end:var(--str-chat__mention-list-user-item-border-inline-end)}.str-chat__user-item[_ngcontent-%COMP%]   .str-chat__user-item--name[_ngcontent-%COMP%]{font:var(--str-chat__subtitle-text)}.str-chat__user-item[_ngcontent-%COMP%]   .str-chat__user-item-at[_ngcontent-%COMP%]{font:var(--str-chat__subtitle2-text);color:var(--str-chat__mention-list-user-item-at-sign-color)}.str-chat__emoji-item[_ngcontent-%COMP%]{background:var(--str-chat__mention-list-emoji-item-background-color);color:var(--str-chat__mention-list-emoji-item-color);box-shadow:var(--str-chat__mention-list-emoji-item-box-shadow);border-radius:var(--str-chat__mention-list-emoji-item-border-radius);border-block-start:var(--str-chat__mention-list-emoji-item-border-block-start);border-block-end:var(--str-chat__mention-list-emoji-item-border-block-end);border-inline-start:var(--str-chat__mention-list-emoji-item-border-inline-start);border-inline-end:var(--str-chat__mention-list-emoji-item-border-inline-end)}.str-chat__emoji-item[_ngcontent-%COMP%]   .str-chat__emoji-item--name[_ngcontent-%COMP%]{font:var(--str-chat__subtitle-text)}.str-chat__suggestion-list-container[_ngcontent-%COMP%]{background:var(--str-chat__suggestion-list-container-background-color);color:var(--str-chat__suggestion-list-container-color);box-shadow:var(--str-chat__suggestion-list-container-box-shadow);border-radius:var(--str-chat__suggestion-list-container-border-radius);border-block-start:var(--str-chat__suggestion-list-container-border-block-start);border-block-end:var(--str-chat__suggestion-list-container-border-block-end);border-inline-start:var(--str-chat__suggestion-list-container-border-inline-start);border-inline-end:var(--str-chat__suggestion-list-container-border-inline-end)}.str-chat__suggestion-list-container[_ngcontent-%COMP%]   .str-chat__suggestion-list[_ngcontent-%COMP%]   .str-chat__suggestion-list-item[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none}.str-chat__suggestion-list-container[_ngcontent-%COMP%]   .str-chat__suggestion-list[_ngcontent-%COMP%]   .str-chat__suggestion-item--selected[_ngcontent-%COMP%]{background-color:var(--str-chat__suggestion-list-item--selected-background-color)}.str-chat__base-image[_ngcontent-%COMP%]{color:transparent}.str-chat__base-image--load-failed[_ngcontent-%COMP%]{mask-image:var(--str-chat__image-fallback-icon);-webkit-mask-image:var(--str-chat__image-fallback-icon);mask-repeat:no-repeat;-webkit-mask-repeat:no-repeat;mask-position:center;-webkit-mask-position:center;mask-size:5rem 5rem;-webkit-mask-size:5rem 5rem;background-color:var(--str-chat__disabled-color)}.str-chat__base-image--load-failed[_ngcontent-%COMP%] ~ .str-chat__message-attachment-file--item-download[_ngcontent-%COMP%]   .str-chat__message-attachment-download-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__text-color)}.str-chat__attachment-preview-image[_ngcontent-%COMP%]   .str-chat__base-image--load-failed[_ngcontent-%COMP%]{mask-size:1.5rem 1.5rem;-webkit-mask-size:1.5rem 1.5rem}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-image--error[_ngcontent-%COMP%]{background-color:var(--str-chat__secondary-surface-color)}.str-chat__attachment-preview-list[_ngcontent-%COMP%]   .str-chat__attachment-preview-image--error[_ngcontent-%COMP%]   .str-chat__attachment-preview-thumbnail.str-chat__base-image--load-failed[_ngcontent-%COMP%]{background-color:var(--str-chat__disabled-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__channel-border-radius: 0;--str-chat__channel-color: var(--str-chat__text-color);--str-chat__channel-background-color: var(--str-chat__background-color);--str-chat__channel-box-shadow: none;--str-chat__channel-border-block-start: none;--str-chat__channel-border-block-end: none;--str-chat__channel-border-inline-start: none;--str-chat__channel-border-inline-end: none;--str-chat__channel-empty-indicator-color: var(--str-chat__disabled-color);--str-chat__channel-empty-color: var(--str-chat__text-low-emphasis-color);--str-chat__channel-loading-state-color: var(--str-chat__disabled-color)}.str-chat__channel[_ngcontent-%COMP%]{background:var(--str-chat__channel-background-color);color:var(--str-chat__channel-color);box-shadow:var(--str-chat__channel-box-shadow);border-radius:var(--str-chat__channel-border-radius);border-block-start:var(--str-chat__channel-border-block-start);border-block-end:var(--str-chat__channel-border-block-end);border-inline-start:var(--str-chat__channel-border-inline-start);border-inline-end:var(--str-chat__channel-border-inline-end)}.str-chat__empty-channel[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__channel-empty-color);background:var(--str-chat__channel-background-color);color:var(--str-chat__channel-color);box-shadow:var(--str-chat__channel-box-shadow);border-radius:var(--str-chat__channel-border-radius);border-block-start:var(--str-chat__channel-border-block-start);border-block-end:var(--str-chat__channel-border-block-end);border-inline-start:var(--str-chat__channel-border-inline-start);border-inline-end:var(--str-chat__channel-border-inline-end);font:var(--str-chat__headline-text);text-align:center}.str-chat__empty-channel[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__channel-empty-indicator-color)}.str-chat__empty-channel[_ngcontent-%COMP%]   .str-chat__empty-channel-text[_ngcontent-%COMP%]{color:var(--str-chat__channel-empty-color)}.str-chat__loading-channel[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulsate 1s linear 0s infinite alternate}.str-chat__loading-channel[_ngcontent-%COMP%]:nth-of-type(2){animation:_ngcontent-%COMP%_pulsate 1s linear .3334s infinite alternate}.str-chat__loading-channel[_ngcontent-%COMP%]:last-of-type{animation:_ngcontent-%COMP%_pulsate 1s linear .6667s infinite alternate}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-header[_ngcontent-%COMP%]{background-color:var(--str-chat__channel-header-background-color)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-header[_ngcontent-%COMP%]   .str-chat__loading-channel-header-avatar[_ngcontent-%COMP%]{background-image:linear-gradient(-90deg,var(--str-chat__channel-loading-state-color) 0%,var(--str-chat__channel-loading-state-color) 100%);border-radius:var(--str-chat__avatar-border-radius)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-header[_ngcontent-%COMP%]   .str-chat__loading-channel-header-name[_ngcontent-%COMP%], .str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-header[_ngcontent-%COMP%]   .str-chat__loading-channel-header-info[_ngcontent-%COMP%]{background-image:linear-gradient(-90deg,var(--str-chat__channel-loading-state-color) 0%,var(--str-chat__channel-loading-state-color) 100%);border-radius:var(--str-chat__border-radius-xs)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]{background-color:var(--str-chat__message-list-background-color)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message-avatar[_ngcontent-%COMP%]{background-image:linear-gradient(-90deg,var(--str-chat__channel-loading-state-color) 0%,var(--str-chat__channel-loading-state-color) 100%);border-radius:var(--str-chat__avatar-border-radius)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message-sender[_ngcontent-%COMP%], .str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message-text[_ngcontent-%COMP%], .str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-list[_ngcontent-%COMP%]   .str-chat__loading-channel-message-date[_ngcontent-%COMP%]{background-image:linear-gradient(-90deg,var(--str-chat__channel-loading-state-color) 0%,var(--str-chat__channel-loading-state-color) 100%);border-radius:var(--str-chat__message-bubble-border-radius)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-input-row[_ngcontent-%COMP%]   .str-chat__loading-channel-message-input[_ngcontent-%COMP%], .str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-input-row[_ngcontent-%COMP%]   .str-chat__loading-channel-message-send[_ngcontent-%COMP%]{background-image:linear-gradient(-90deg,var(--str-chat__channel-loading-state-color) 0%,var(--str-chat__channel-loading-state-color) 100%)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-input-row[_ngcontent-%COMP%]   .str-chat__loading-channel-message-input[_ngcontent-%COMP%]{border-radius:var(--str-chat__message-textarea-border-radius)}.str-chat__loading-channel[_ngcontent-%COMP%]   .str-chat__loading-channel-message-input-row[_ngcontent-%COMP%]   .str-chat__loading-channel-message-send[_ngcontent-%COMP%]{border-radius:var(--str-chat__message-send-border-radius)}.str-chat[_ngcontent-%COMP%]{--str-chat__channel-header-border-radius: 0;--str-chat__channel-header-color: 0;--str-chat__channel-header-background-color: var(--str-chat__secondary-background-color);--str-chat__channel-header-border-block-start: none;--str-chat__channel-header-border-block-end: none;--str-chat__channel-header-border-inline-start: none;--str-chat__channel-header-border-inline-end: none;--str-chat__channel-header-box-shadow: none;--str-chat__channel-header-info-color: var(--str-chat__text-low-emphasis-color)}.str-chat__channel-header[_ngcontent-%COMP%]{background:var(--str-chat__channel-header-background-color);color:var(--str-chat__channel-header-color);box-shadow:var(--str-chat__channel-header-box-shadow);border-radius:var(--str-chat__channel-header-border-radius);border-block-start:var(--str-chat__channel-header-border-block-start);border-block-end:var(--str-chat__channel-header-border-block-end);border-inline-start:var(--str-chat__channel-header-border-inline-start);border-inline-end:var(--str-chat__channel-header-border-inline-end)}.str-chat__channel-header[_ngcontent-%COMP%]   .str-chat__channel-header-title[_ngcontent-%COMP%]{font:var(--str-chat__subtitle-medium-text)}.str-chat__channel-header[_ngcontent-%COMP%]   .str-chat__channel-header-info[_ngcontent-%COMP%]{font:var(--str-chat__body-text);color:var(--str-chat__channel-header-info-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__channel-list-border-radius: 0;--str-chat__channel-list-color: var(--str-chat__text-color);--str-chat__channel-list-background-color: var(--str-chat__secondary-background-color);--str-chat__channel-list-box-shadow: none;--str-chat__channel-list-border-block-start: none;--str-chat__channel-list-border-block-end: none;--str-chat__channel-list-border-inline-start: none;--str-chat__channel-list-border-inline-end: 1px solid var(--str-chat__surface-color);--str-chat__channel-list-load-more-border-radius: var(--str-chat__cta-button-border-radius);--str-chat__channel-list-load-more-color: var(--str-chat__cta-button-color);--str-chat__channel-list-load-more-background-color: var(--str-chat__cta-button-background-color);--str-chat__channel-list-load-more-box-shadow: var(--str-chat__cta-button-box-shadow);--str-chat__channel-list-load-more-border-block-start: var( --str-chat__cta-button-border-block-start );--str-chat__channel-list-load-more-border-block-end: var(--str-chat__cta-button-border-block-end);--str-chat__channel-list-load-more-border-inline-start: var( --str-chat__cta-button-border-inline-start );--str-chat__channel-list-load-more-border-inline-end: var( --str-chat__cta-button-border-inline-end );--str-chat__channel-list-load-more-pressed-background-color: var( --str-chat__cta-button-pressed-background-color );--str-chat__channel-list-load-more-disabled-background-color: var( --str-chat__cta-button-disabled-background-color );--str-chat__channel-list-load-more-disabled-color: var(--str-chat__cta-button-disabled-color);--str-chat__channel-list-empty-indicator-color: var(--str-chat__text-low-emphasis-color)}.str-chat__channel-list[_ngcontent-%COMP%]{background:var(--str-chat__channel-list-background-color);color:var(--str-chat__channel-list-color);box-shadow:var(--str-chat__channel-list-box-shadow);border-radius:var(--str-chat__channel-list-border-radius);border-block-start:var(--str-chat__channel-list-border-block-start);border-block-end:var(--str-chat__channel-list-border-block-end);border-inline-start:var(--str-chat__channel-list-border-inline-start);border-inline-end:var(--str-chat__channel-list-border-inline-end)}.str-chat__channel-list[_ngcontent-%COMP%]   .str-chat__load-more-button__button[_ngcontent-%COMP%]{background:var(--str-chat__channel-list-load-more-background-color);color:var(--str-chat__channel-list-load-more-color);box-shadow:var(--str-chat__channel-list-load-more-box-shadow);border-radius:var(--str-chat__channel-list-load-more-border-radius);border-block-start:var(--str-chat__channel-list-load-more-border-block-start);border-block-end:var(--str-chat__channel-list-load-more-border-block-end);border-inline-start:var(--str-chat__channel-list-load-more-border-inline-start);border-inline-end:var(--str-chat__channel-list-load-more-border-inline-end);width:80%}.str-chat__channel-list[_ngcontent-%COMP%]   .str-chat__load-more-button__button[_ngcontent-%COMP%]:active{background-color:var(--str-chat__channel-list-load-more-pressed-background-color)}.str-chat__channel-list[_ngcontent-%COMP%]   .str-chat__load-more-button__button[_ngcontent-%COMP%]:disabled{background-color:var(--str-chat__channel-list-load-more-disabled-background-color);color:var(--str-chat__channel-list-load-more-disabled-color)}.str-chat__channel-list[_ngcontent-%COMP%]   .str-chat__channel-list-empty[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__channel-list-empty-indicator-color);font:var(--str-chat__headline-text);text-align:center;color:var(--str-chat__channel-list-empty-indicator-color)}.str-chat__channel-list[_ngcontent-%COMP%]   .str-chat__channel-list-empty[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__channel-list-empty-indicator-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__channel-preview-border-radius: 0;--str-chat__channel-preview-color: var(--str-chat__text-color);--str-chat__channel-preview-background-color: transparent;--str-chat__channel-preview-border-block-start: none;--str-chat__channel-preview-border-block-end: none;--str-chat__channel-preview-border-inline-start: none;--str-chat__channel-preview-border-inline-end: none;--str-chat__channel-preview-active-background-color: var(--str-chat__surface-color);--str-chat__channel-preview-hover-background-color: var(--str-chat__secondary-surface-color);--str-chat__channel-preview-latest-message-secondary-color: var( --str-chat__text-low-emphasis-color );--str-chat__channel-preview-loading-state-color: var(--str-chat__disabled-color);--str-chat__channel-preview-unread-badge-background-color: var(--str-chat__unread-badge-color);--str-chat__channel-preview-unread-badge-color: var(--str-chat__on-unread-badge-color);--str-chat__channel-preview-unread-badge-border-radius: var(--str-chat__border-radius-circle);--str-chat__channel-preview-unread-badge-border-block-start: none;--str-chat__channel-preview-unread-badge-border-block-end: none;--str-chat__channel-preview-unread-badge-border-inline-start: none;--str-chat__channel-preview-unread-badge-border-inline-end: none;--str-chat__channel-preview-message-status-color: var(--str-chat__primary-color);--str-chat__channel-preview-message-time-color: var(--str-chat__message-secondary-color)}.str-chat__channel-preview[_ngcontent-%COMP%]{background:var(--str-chat__channel-preview-background-color);color:var(--str-chat__channel-preview-color);box-shadow:var(--str-chat__channel-preview-box-shadow);border-radius:var(--str-chat__channel-preview-border-radius);border-block-start:var(--str-chat__channel-preview-border-block-start);border-block-end:var(--str-chat__channel-preview-border-block-end);border-inline-start:var(--str-chat__channel-preview-border-inline-start);border-inline-end:var(--str-chat__channel-preview-border-inline-end)}.str-chat__channel-preview--active[_ngcontent-%COMP%], .str-chat__channel-preview-messenger--active[_ngcontent-%COMP%]{background-color:var(--str-chat__channel-preview-active-background-color)}.str-chat__channel-preview[_ngcontent-%COMP%]:hover{background-color:var(--str-chat__channel-preview-hover-background-color)}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end-first-row[_ngcontent-%COMP%]{font:var(--str-chat__subtitle-medium-text)}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end-first-row[_ngcontent-%COMP%]   .str-chat__channel-preview-unread-badge[_ngcontent-%COMP%]{background:var(--str-chat__channel-preview-unread-badge-background-color);color:var(--str-chat__channel-preview-unread-badge-color);box-shadow:var(--str-chat__channel-preview-unread-badge-box-shadow);border-radius:var(--str-chat__channel-preview-unread-badge-border-radius);border-block-start:var(--str-chat__channel-preview-unread-badge-border-block-start);border-block-end:var(--str-chat__channel-preview-unread-badge-border-block-end);border-inline-start:var(--str-chat__channel-preview-unread-badge-border-inline-start);border-inline-end:var(--str-chat__channel-preview-unread-badge-border-inline-end);font-size:80%}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end-first-row[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--last-message[_ngcontent-%COMP%]{font:var(--str-chat__body-text);color:var(--str-chat__channel-preview-latest-message-secondary-color)}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end-first-row--active[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--last-message[_ngcontent-%COMP%], .str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-end-first-row[_ngcontent-%COMP%]:hover   .str-chat__channel-preview-messenger--last-message[_ngcontent-%COMP%]{color:var(--str-chat__channel-preview-color)}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--status[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__channel-preview-message-status-color);color:var(--str-chat__channel-preview-message-status-color)}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--status[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__channel-preview-message-status-color)}.str-chat__channel-preview[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--time[_ngcontent-%COMP%]{color:var(--str-chat__channel-preview-message-time-color);font:var(--str-chat__caption-text)}.str-chat__channel-preview-loading[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulsate 1s linear 0s infinite alternate}.str-chat__channel-preview-loading[_ngcontent-%COMP%]:nth-of-type(2){animation:_ngcontent-%COMP%_pulsate 1s linear .3334s infinite alternate}.str-chat__channel-preview-loading[_ngcontent-%COMP%]:last-of-type{animation:_ngcontent-%COMP%_pulsate 1s linear .6667s infinite alternate}@keyframes _ngcontent-%COMP%_pulsate{0%{opacity:.5}to{opacity:1}}.str-chat__channel-preview-loading[_ngcontent-%COMP%]   .str-chat__loading-channels-avatar[_ngcontent-%COMP%], .str-chat__channel-preview-loading[_ngcontent-%COMP%]   .str-chat__loading-channels-username[_ngcontent-%COMP%], .str-chat__channel-preview-loading[_ngcontent-%COMP%]   .str-chat__loading-channels-status[_ngcontent-%COMP%]{background-image:linear-gradient(-90deg,var(--str-chat__channel-preview-loading-state-color) 0%,var(--str-chat__channel-preview-loading-state-color) 100%)}.str-chat__channel-preview-loading[_ngcontent-%COMP%]   .str-chat__loading-channels-username[_ngcontent-%COMP%], .str-chat__channel-preview-loading[_ngcontent-%COMP%]   .str-chat__loading-channels-status[_ngcontent-%COMP%]{border-radius:var(--str-chat__border-radius-xs)}.str-chat[_ngcontent-%COMP%]{--str-chat__channel-search-input-color: var(--str-chat__text-color);--str-chat__channel-search-input-placeholder-color: var(--str-chat__text-low-emphasis-color);--str-chat__channel-search-input-icon-color: var(--str-chat__text-low-emphasis-color);--str-chat__channel-search-input-border-block-start: none;--str-chat__channel-search-input-border-block-end: none;--str-chat__channel-search-input-border-inline-start: none;--str-chat__channel-search-input-border-inline-end: none;--str-chat__channel-search-input-wrapper-border-radius: var(--str-chat__border-radius-lg);--str-chat__channel-search-input-wrapper-background-color: transparent;--str-chat__channel-search-input-wrapper-border-block-start: var(--str-chat__surface-color) 1px solid;--str-chat__channel-search-input-wrapper-border-block-end: var(--str-chat__surface-color) 1px solid;--str-chat__channel-search-input-wrapper-border-inline-start: var(--str-chat__surface-color) 1px solid;--str-chat__channel-search-input-wrapper-border-inline-end: var(--str-chat__surface-color) 1px solid;--str-chat__channel-search-input-wrapper-active-border-radius: var(--str-chat__border-radius-lg);--str-chat__channel-search-input-wrapper-active-background-color: transparent;--str-chat__channel-search-input-wrapper-active-border-block-start: var(--str-chat__primary-color) 1px solid;--str-chat__channel-search-input-wrapper-active-border-block-end: var(--str-chat__primary-color) 1px solid;--str-chat__channel-search-input-wrapper-active-border-inline-start: var( --str-chat__primary-color ) 1px solid;--str-chat__channel-search-input-wrapper-active-border-inline-end: var(--str-chat__primary-color) 1px solid;--str-chat__channel-search-result-background-color: transparent;--str-chat__channel-search-result-border-block-start: none;--str-chat__channel-search-result-border-block-end: none;--str-chat__channel-search-result-border-inline-start: none;--str-chat__channel-search-result-border-inline-end: none;--str-chat__channel-search-result-hover-background-color: var( --str-chat__secondary-surface-color );--str-chat__channel-search-result-list-color: var(--str-chat__text-color);--str-chat__channel-search-result-list-background-color: var(--str-chat__secondary-background-color);--str-chat__channel-search-result-list-border-block-start: none;--str-chat__channel-search-result-list-border-block-end: none;--str-chat__channel-search-result-list-border-inline-start: none;--str-chat__channel-search-result-list-border-inline-end: none;--str-chat__channel-search-result-list-popup-box-shadow: 0 4px 4px var(--str-chat__box-shadow-color);--str-chat__channel-search-results-header-color: var(--str-chat__text-low-emphasis-color);--str-chat__channel-search-results-header-background-color: var(--str-chat__background-color);--str-chat__channel-search-results-header-border-block-start: none;--str-chat__channel-search-results-header-border-block-end: var(--str-chat__surface-color) 1px solid;--str-chat__channel-search-results-header-border-inline-start: none;--str-chat__channel-search-results-header-border-inline-end: none;--str-chat__channel-search-results-loading-indicator-color: var(--str-chat__text-low-emphasis-color);--str-chat__channel-search-results-loading-indicator-background-color: var(--str-chat__background-color);--str-chat__channel-search-results-loading-indicator-border-block-start: none;--str-chat__channel-search-results-loading-indicator-border-block-end: var(--str-chat__surface-color) 1px solid;--str-chat__channel-search-results-loading-indicator-border-inline-start: none;--str-chat__channel-search-results-loading-indicator-border-inline-end: none;--str-chat__channel-search-results-empty-color: var(--str-chat__text-low-emphasis-color);--str-chat__channel-search-results-empty-icon-color: var(--str-chat__disabled-color);--str-chat__channel-search-results-empty-background-color: var(--str-chat__background-color);--str-chat__channel-search-results-empty-border-block-start: none;--str-chat__channel-search-results-empty-border-block-end: none;--str-chat__channel-search-results-empty-border-inline-start: none;--str-chat__channel-search-results-empty-border-inline-end: none}.str-chat__channel-search-input--wrapper[_ngcontent-%COMP%]{background:var(--str-chat__channel-search-input-wrapper-background-color);color:var(--str-chat__channel-search-input-wrapper-color);box-shadow:var(--str-chat__channel-search-input-wrapper-box-shadow);border-radius:var(--str-chat__channel-search-input-wrapper-border-radius);border-block-start:var(--str-chat__channel-search-input-wrapper-border-block-start);border-block-end:var(--str-chat__channel-search-input-wrapper-border-block-end);border-inline-start:var(--str-chat__channel-search-input-wrapper-border-inline-start);border-inline-end:var(--str-chat__channel-search-input-wrapper-border-inline-end)}.str-chat__channel-search-input--wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:var(--str-chat__channel-search-input-background-color);color:var(--str-chat__channel-search-input-color);box-shadow:var(--str-chat__channel-search-input-box-shadow);border-radius:var(--str-chat__channel-search-input-border-radius);border-block-start:var(--str-chat__channel-search-input-border-block-start);border-block-end:var(--str-chat__channel-search-input-border-block-end);border-inline-start:var(--str-chat__channel-search-input-border-inline-start);border-inline-end:var(--str-chat__channel-search-input-border-inline-end);outline:none;font:var(--str-chat__subtitle-text)}.str-chat__channel-search-input--wrapper[_ngcontent-%COMP%]   .str-chat__channel-search-input--clear-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:transparent}.str-chat__channel-search-input--wrapper-active[_ngcontent-%COMP%]{background:var(--str-chat__channel-search-input-wrapper-active-background-color);color:var(--str-chat__channel-search-input-wrapper-active-color);box-shadow:var(--str-chat__channel-search-input-wrapper-active-box-shadow);border-radius:var(--str-chat__channel-search-input-wrapper-active-border-radius);border-block-start:var(--str-chat__channel-search-input-wrapper-active-border-block-start);border-block-end:var(--str-chat__channel-search-input-wrapper-active-border-block-end);border-inline-start:var(--str-chat__channel-search-input-wrapper-active-border-inline-start);border-inline-end:var(--str-chat__channel-search-input-wrapper-active-border-inline-end)}.str-chat__channel-search-input--wrapper-active[_ngcontent-%COMP%]   .str-chat__channel-search-input--icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__primary-color)}.str-chat__channel-search-input--wrapper-active[_ngcontent-%COMP%]   .str-chat__channel-search-input--clear-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__text-low-emphasis-color)}.str-chat__channel-search-results-header[_ngcontent-%COMP%]{background:var(--str-chat__channel-search-results-header-background-color);color:var(--str-chat__channel-search-results-header-color);box-shadow:var(--str-chat__channel-search-results-header-box-shadow);border-radius:var(--str-chat__channel-search-results-header-border-radius);border-block-start:var(--str-chat__channel-search-results-header-border-block-start);border-block-end:var(--str-chat__channel-search-results-header-border-block-end);border-inline-start:var(--str-chat__channel-search-results-header-border-inline-start);border-inline-end:var(--str-chat__channel-search-results-header-border-inline-end);font:var(--str-chat__subtitle-text)}.str-chat__channel-search-result-list[_ngcontent-%COMP%]{background:var(--str-chat__channel-search-result-list-background-color);color:var(--str-chat__channel-search-result-list-color);box-shadow:var(--str-chat__channel-search-result-list-box-shadow);border-radius:var(--str-chat__channel-search-result-list-border-radius);border-block-start:var(--str-chat__channel-search-result-list-border-block-start);border-block-end:var(--str-chat__channel-search-result-list-border-block-end);border-inline-start:var(--str-chat__channel-search-result-list-border-inline-start);border-inline-end:var(--str-chat__channel-search-result-list-border-inline-end)}.str-chat__channel-search-result-list.popup[_ngcontent-%COMP%]{box-shadow:var(--str-chat__channel-search-result-list-popup-box-shadow)}.str-chat__channel-search-result-list[_ngcontent-%COMP%]   .str-chat__channel-search-container-searching[_ngcontent-%COMP%]{background:var(--str-chat__channel-search-results-loading-indicator-background-color);color:var(--str-chat__channel-search-results-loading-indicator-color);box-shadow:var(--str-chat__channel-search-results-loading-indicator-box-shadow);border-radius:var(--str-chat__channel-search-results-loading-indicator-border-radius);border-block-start:var(--str-chat__channel-search-results-loading-indicator-border-block-start);border-block-end:var(--str-chat__channel-search-results-loading-indicator-border-block-end);border-inline-start:var(--str-chat__channel-search-results-loading-indicator-border-inline-start);border-inline-end:var(--str-chat__channel-search-results-loading-indicator-border-inline-end)}.str-chat__channel-search-result-list[_ngcontent-%COMP%]   .str-chat__channel-search-container-empty[_ngcontent-%COMP%]{background:var(--str-chat__channel-search-results-empty-background-color);color:var(--str-chat__channel-search-results-empty-color);box-shadow:var(--str-chat__channel-search-results-empty-box-shadow);border-radius:var(--str-chat__channel-search-results-empty-border-radius);border-block-start:var(--str-chat__channel-search-results-empty-border-block-start);border-block-end:var(--str-chat__channel-search-results-empty-border-block-end);border-inline-start:var(--str-chat__channel-search-results-empty-border-inline-start);border-inline-end:var(--str-chat__channel-search-results-empty-border-inline-end);font:var(--str-chat__subtitle2-medium-text)}.str-chat__channel-search-result-list[_ngcontent-%COMP%]   .str-chat__channel-search-container-empty[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__channel-search-results-empty-icon-color)}.str-chat__channel-search-result-list[_ngcontent-%COMP%]   .str-chat__channel-search-result[_ngcontent-%COMP%]{background:var(--str-chat__channel-search-result-background-color);color:var(--str-chat__channel-search-result-color);box-shadow:var(--str-chat__channel-search-result-box-shadow);border-radius:var(--str-chat__channel-search-result-border-radius);border-block-start:var(--str-chat__channel-search-result-border-block-start);border-block-end:var(--str-chat__channel-search-result-border-block-end);border-inline-start:var(--str-chat__channel-search-result-border-inline-start);border-inline-end:var(--str-chat__channel-search-result-border-inline-end)}.str-chat__channel-search-result-list[_ngcontent-%COMP%]   .str-chat__channel-search-result[_ngcontent-%COMP%]   .str-chat__channel-search-result--display-name[_ngcontent-%COMP%]{font:var(--str-chat__subtitle-medium-text)}.str-chat__channel-search-result-list[_ngcontent-%COMP%]   .str-chat__channel-preview-messenger--active[_ngcontent-%COMP%]{background-color:var(--str-chat__channel-preview-active-background-color)}.str-chat__channel-search-result-list[_ngcontent-%COMP%]   .str-chat__channel-search-result[_ngcontent-%COMP%]:hover, .str-chat__channel-search-result-list[_ngcontent-%COMP%]   .str-chat__channel-search-result--focused[_ngcontent-%COMP%]{background-color:var(--str-chat__channel-search-result-hover-background-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__edit-message-modal-button-border-radius: none;--str-chat__edit-message-modal-send-button-color: var(--str-chat__primary-color);--str-chat__edit-message-modal-cancel-button-color: var(--str-chat__text-low-emphasis-color);--str-chat__edit-message-modal-button-background-color: transparent;--str-chat__edit-message-modal-button-border-block-start: none;--str-chat__edit-message-modal-button-border-block-end: none;--str-chat__edit-message-modal-button-border-inline-start: none;--str-chat__edit-message-modal-button-border-inline-end: none;--str-chat__edit-message-modal-button-box-shadow: none}.str-chat__edit-message-form[_ngcontent-%COMP%]   .str-chat__edit-message-form-options[_ngcontent-%COMP%]   .str-chat__edit-message-cancel[_ngcontent-%COMP%], .str-chat__edit-message-form[_ngcontent-%COMP%]   .str-chat__edit-message-form-options[_ngcontent-%COMP%]   .str-chat__edit-message-send[_ngcontent-%COMP%]{background:var(--str-chat__edit-message-modal-button-background-color);color:var(--str-chat__edit-message-modal-button-color);box-shadow:var(--str-chat__edit-message-modal-button-box-shadow);border-radius:var(--str-chat__edit-message-modal-button-border-radius);border-block-start:var(--str-chat__edit-message-modal-button-border-block-start);border-block-end:var(--str-chat__edit-message-modal-button-border-block-end);border-inline-start:var(--str-chat__edit-message-modal-button-border-inline-start);border-inline-end:var(--str-chat__edit-message-modal-button-border-inline-end);font:var(--str-chat__body-medium-text)}.str-chat__edit-message-form[_ngcontent-%COMP%]   .str-chat__edit-message-form-options[_ngcontent-%COMP%]   .str-chat__edit-message-cancel[_ngcontent-%COMP%]{text-transform:capitalize;color:var(--str-chat__edit-message-modal-cancel-button-color)}.str-chat__edit-message-form[_ngcontent-%COMP%]   .str-chat__edit-message-form-options[_ngcontent-%COMP%]   .str-chat__edit-message-send[_ngcontent-%COMP%]{text-transform:uppercase;color:var(--str-chat__edit-message-modal-send-button-color)}.str-chat[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__text-color)}.str-chat__icon[_ngcontent-%COMP%]{color:var(--str-chat-icon-color)}.str-chat__icon--error[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__danger-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__image-carousel-stepper-color: var(--str-chat__text-color)}@media only screen and (max-device-width: 768px){.str-chat__message[_ngcontent-%COMP%]   .str-chat__attachment-list[_ngcontent-%COMP%]   .str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner[_ngcontent-%COMP%]{border-radius:0}}.str-chat__image-carousel[_ngcontent-%COMP%]   .str-chat__image-carousel-stepper[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__image-carousel-stepper-color);cursor:pointer}.str-chat__image-carousel[_ngcontent-%COMP%]   .str-chat__image-carousel-stepper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__image-carousel-stepper-color)}.str-chat__link-preview-card[_ngcontent-%COMP%]   .str-chat__link-preview-card__content[_ngcontent-%COMP%]{border-left:2px solid var(--str-chat__primary-color)}.str-chat__link-preview-card[_ngcontent-%COMP%]   .str-chat__link-preview-card__content[_ngcontent-%COMP%]   .str-chat__link-preview-card__content-title[_ngcontent-%COMP%]{font:var(--str-chat__body-medium-text)}.str-chat__link-preview-card[_ngcontent-%COMP%]   .str-chat__link-preview-card__content[_ngcontent-%COMP%]   .str-chat__link-preview-card__content-description[_ngcontent-%COMP%]{font:var(--str-chat__caption-text)}.str-chat__link-preview-card[_ngcontent-%COMP%]   .str-chat__link-preview-card__dismiss-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__text-low-emphasis-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__loading-indicator-color: var(--str-chat__primary-color)}.str-chat__loading-indicator[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   linearGradient[_ngcontent-%COMP%]   stop[_ngcontent-%COMP%]:last-child{stop-color:var(--str-chat__loading-indicator-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__message-border-radius: none;--str-chat__message-color: var(--str-chat__text-color);--str-chat__message-error-message-color: var(--str-chat__danger-color);--str-chat__message-secondary-color: var(--str-chat__text-low-emphasis-color);--str-chat__message-link-color: var(--str-chat__primary-color);--str-chat__message-mention-color: var(--str-chat__primary-color);--str-chat__message-status-color: var(--str-chat__primary-color);--str-chat__message-replies-count-color: var(--str-chat__primary-color);--str-chat__message-background-color: transparent;--str-chat__message-highlighted-background-color: var(--str-chat__message-highlight-color);--str-chat__message-border-block-start: none;--str-chat__message-border-block-end: none;--str-chat__message-border-inline-start: none;--str-chat__message-border-inline-end: none;--str-chat__message-box-shadow: none;--str-chat__message-active-bacground-color: transparent;--str-chat__message-options-color: var(--str-chat__text-low-emphasis-color);--str-chat__message-options-hover-background-color: var(--str-chat__tertiary-surface-color);--str-chat__message-options-border-radius: var(--str-chat__border-radius-circle);--str-chat__message-options-active-color: var(--str-chat__primary-color);--str-chat__message-bubble-border-radius: var(--str-chat__border-radius-md);--str-chat__message-bubble-color: var(--str-chat__text-color);--str-chat__message-bubble-background-color: var(--str-chat__secondary-surface-color);--str-chat__own-message-bubble-color: var(--str-chat__message-bubble-color);--str-chat__own-message-bubble-background-color: var(--str-chat__primary-surface-color);--str-chat__quoted-message-bubble-background-color: var(--str-chat__secondary-background-color);--str-chat__message-bubble-border-block-start: none;--str-chat__message-bubble-border-block-end: none;--str-chat__message-bubble-border-inline-start: none;--str-chat__message-bubble-border-inline-end: none;--str-chat__message-bubble-box-shadow: none;--str-chat__deleted-message-border-radius: var(--str-chat__border-radius-md);--str-chat__deleted-message-color: var(--str-chat__text-low-emphasis-color);--str-chat__deleted-message-background-color: var(--str-chat__secondary-surface-color);--str-chat__deleted-message-border-block-start: none;--str-chat__deleted-message-border-block-end: none;--str-chat__deleted-message-border-inline-start: none;--str-chat__deleted-message-border-inline-end: none;--str-chat__deleted-message-box-shadow: none;--str-chat__system-message-border-radius: 0;--str-chat__system-message-color: var(--str-chat__text-low-emphasis-color);--str-chat__system-message-background-color: transparent;--str-chat__system-message-border-block-start: none;--str-chat__system-message-border-block-end: none;--str-chat__system-message-border-inline-start: none;--str-chat__system-message-border-inline-end: none;--str-chat__system-message-box-shadow: none;--str-chat__date-separator-color: var(--str-chat__text-low-emphasis-color);--str-chat__date-separator-line-color: var(--str-chat__disabled-color);--str-chat__date-separator-border-radius: 0;--str-chat__date-separator-background-color: transparent;--str-chat__date-separator-border-block-start: none;--str-chat__date-separator-border-block-end: none;--str-chat__date-separator-border-inline-start: none;--str-chat__date-separator-border-inline-end: none;--str-chat__date-separator-box-shadow: none;--str-chat__translation-notice-color: var(--str-chat__text-low-emphasis-color);--str-chat__translation-notice-active-background-color: var(--str-chat__tertiary-surface-color)}.str-chat__message--system[_ngcontent-%COMP%]{background:var(--str-chat__system-message-background-color);color:var(--str-chat__system-message-color);box-shadow:var(--str-chat__system-message-box-shadow);border-radius:var(--str-chat__system-message-border-radius);border-block-start:var(--str-chat__system-message-border-block-start);border-block-end:var(--str-chat__system-message-border-block-end);border-inline-start:var(--str-chat__system-message-border-inline-start);border-inline-end:var(--str-chat__system-message-border-inline-end);font:var(--str-chat__caption-text)}.str-chat__date-separator[_ngcontent-%COMP%]{background:var(--str-chat__date-separator-background-color);color:var(--str-chat__date-separator-color);box-shadow:var(--str-chat__date-separator-box-shadow);border-radius:var(--str-chat__date-separator-border-radius);border-block-start:var(--str-chat__date-separator-border-block-start);border-block-end:var(--str-chat__date-separator-border-block-end);border-inline-start:var(--str-chat__date-separator-border-inline-start);border-inline-end:var(--str-chat__date-separator-border-inline-end);font:var(--str-chat__body-text)}.str-chat__date-separator-line[_ngcontent-%COMP%]{background-color:var(--str-chat__date-separator-line-color);border:none}.str-chat__message[_ngcontent-%COMP%]{background:var(--str-chat__message-background-color);color:var(--str-chat__message-color);box-shadow:var(--str-chat__message-box-shadow);border-radius:var(--str-chat__message-border-radius);border-block-start:var(--str-chat__message-border-block-start);border-block-end:var(--str-chat__message-border-block-end);border-inline-start:var(--str-chat__message-border-inline-start);border-inline-end:var(--str-chat__message-border-inline-end)}.str-chat__message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--str-chat__message-link-color)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-mention[_ngcontent-%COMP%]{color:var(--str-chat__message-mention-color);font:var(--str-chat__body2-medium-text)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]{background:var(--str-chat__message-bubble-background-color);color:var(--str-chat__message-bubble-color);box-shadow:var(--str-chat__message-bubble-box-shadow);border-radius:var(--str-chat__message-bubble-border-radius);border-block-start:var(--str-chat__message-bubble-border-block-start);border-block-end:var(--str-chat__message-bubble-border-block-end);border-inline-start:var(--str-chat__message-bubble-border-inline-start);border-inline-end:var(--str-chat__message-bubble-border-inline-end);font:var(--str-chat__body2-text)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message--deleted-inner[_ngcontent-%COMP%]{background:var(--str-chat__deleted-message-background-color);color:var(--str-chat__deleted-message-color);box-shadow:var(--str-chat__deleted-message-box-shadow);border-radius:var(--str-chat__deleted-message-border-radius);border-block-start:var(--str-chat__deleted-message-border-block-start);border-block-end:var(--str-chat__deleted-message-border-block-end);border-inline-start:var(--str-chat__deleted-message-border-inline-start);border-inline-end:var(--str-chat__deleted-message-border-inline-end);font:var(--str-chat__body2-text)}.str-chat__message.str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]{color:var(--str-chat__own-message-bubble-color);background-color:var(--str-chat__own-message-bubble-background-color)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__message-options-color)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-actions-box-button[_ngcontent-%COMP%], .str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-reply-in-thread-button[_ngcontent-%COMP%], .str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-reactions-button[_ngcontent-%COMP%]{background:none;border:none;border-radius:var(--str-chat__message-options-border-radius);color:var(--str-chat__message-options-color)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-actions-box-button[_ngcontent-%COMP%]   .str-chat__message-action-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-reply-in-thread-button[_ngcontent-%COMP%]   .str-chat__message-action-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-reactions-button[_ngcontent-%COMP%]   .str-chat__message-action-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__message-options-color)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-actions-box-button[_ngcontent-%COMP%]:hover, .str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-reply-in-thread-button[_ngcontent-%COMP%]:hover, .str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-reactions-button[_ngcontent-%COMP%]:hover{background-color:var(--str-chat__message-options-hover-background-color)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-actions-box-button[_ngcontent-%COMP%]:active   .str-chat__message-action-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-reply-in-thread-button[_ngcontent-%COMP%]:active   .str-chat__message-action-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .str-chat__message[_ngcontent-%COMP%]   .str-chat__message-options[_ngcontent-%COMP%]   .str-chat__message-reactions-button[_ngcontent-%COMP%]:active   .str-chat__message-action-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__message-options-active-color)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__translation-notice[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font:var(--str-chat__body2-text);color:var(--str-chat__translation-notice-color);border:none;background:none}.str-chat__message[_ngcontent-%COMP%]   .str-chat__translation-notice[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .str-chat__message[_ngcontent-%COMP%]   .str-chat__translation-notice[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--str-chat__translation-notice-active-background-color)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%], .str-chat__message[_ngcontent-%COMP%]   .str-chat__custom-message-metadata[_ngcontent-%COMP%]{color:var(--str-chat__message-secondary-color);font:var(--str-chat__caption-text)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-metadata[_ngcontent-%COMP%]   .str-chat__message-sender-name[_ngcontent-%COMP%], .str-chat__message[_ngcontent-%COMP%]   .str-chat__custom-message-metadata[_ngcontent-%COMP%]   .str-chat__message-sender-name[_ngcontent-%COMP%]{font:var(--str-chat__caption-medium-text)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-status[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__message-status-color);color:var(--str-chat__message-status-color);font:var(--str-chat__body-text)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-status[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__message-status-color)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-replies-count-button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:transparent;font:var(--str-chat__body-medium-text);color:var(--str-chat__message-replies-count-color)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message--error-message[_ngcontent-%COMP%]{color:var(--str-chat__message-error-message-color);font:var(--str-chat__caption-text)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-error-icon[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__message-error-message-color)}.str-chat__message[_ngcontent-%COMP%]   .str-chat__message-error-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   #background[_ngcontent-%COMP%]{fill:var(--str-chat__message-error-message-color)}.str-chat__message--highlighted[_ngcontent-%COMP%]{transition:background-color .1s ease-out;background-color:var(--str-chat__message-highlighted-background-color)}.str-chat__li[_ngcontent-%COMP%]:hover:not(:has(.str-chat__reaction-list:hover, .str-chat__modal--open))[_ngcontent-%COMP%]{background-color:var(--str-chat__message-active-bacground-color)}@supports not selector(:has(a,b)){.str-chat__li[_ngcontent-%COMP%]:hover{background-color:var(--str-chat__message-active-bacground-color)}}.str-chat__li--top[_ngcontent-%COMP%]   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%], .str-chat__li--single[_ngcontent-%COMP%]   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]{border-end-start-radius:calc(var(--str-chat__message-bubble-border-radius) / 6)}.str-chat__li--top[_ngcontent-%COMP%]   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%], .str-chat__li--single[_ngcontent-%COMP%]   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]{border-end-end-radius:calc(var(--str-chat__message-bubble-border-radius) / 6)}.str-chat__li--middle[_ngcontent-%COMP%]   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%], .str-chat__li--bottom[_ngcontent-%COMP%]   .str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]{border-start-start-radius:calc(var(--str-chat__message-bubble-border-radius) / 6);border-end-start-radius:calc(var(--str-chat__message-bubble-border-radius) / 6)}.str-chat__li--middle[_ngcontent-%COMP%]   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%], .str-chat__li--bottom[_ngcontent-%COMP%]   .str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]{border-start-end-radius:calc(var(--str-chat__message-bubble-border-radius) / 6);border-end-end-radius:calc(var(--str-chat__message-bubble-border-radius) / 6)}.str-chat__message-with-thread-link.str-chat__message--other[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]{border-end-start-radius:calc(var(--str-chat__message-bubble-border-radius) / 6)}.str-chat__message-with-thread-link.str-chat__message--me[_ngcontent-%COMP%]   .str-chat__message-bubble[_ngcontent-%COMP%]{border-end-end-radius:calc(var(--str-chat__message-bubble-border-radius) / 6)}.str-chat__quoted-message-preview[_ngcontent-%COMP%]{background:var(--str-chat__message-background-color);color:var(--str-chat__message-color);box-shadow:var(--str-chat__message-box-shadow);border-radius:var(--str-chat__message-border-radius);border-block-start:var(--str-chat__message-border-block-start);border-block-end:var(--str-chat__message-border-block-end);border-inline-start:var(--str-chat__message-border-inline-start);border-inline-end:var(--str-chat__message-border-inline-end)}.str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__quoted-message-bubble[_ngcontent-%COMP%]{background:var(--str-chat__message-bubble-background-color);color:var(--str-chat__message-bubble-color);box-shadow:var(--str-chat__message-bubble-box-shadow);border-radius:var(--str-chat__message-bubble-border-radius);border-block-start:var(--str-chat__message-bubble-border-block-start);border-block-end:var(--str-chat__message-bubble-border-block-end);border-inline-start:var(--str-chat__message-bubble-border-inline-start);border-inline-end:var(--str-chat__message-bubble-border-inline-end);background-color:var(--str-chat__quoted-message-bubble-background-color);border-end-start-radius:calc(var(--str-chat__message-bubble-border-radius) / 6)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__quoted-message-preview[_ngcontent-%COMP%]   .str-chat__quoted-message-bubble[_ngcontent-%COMP%]{background-color:var(--str-chat__message-bubble-background-color)}.str-chat__unread-messages-separator[_ngcontent-%COMP%]{background-color:var(--str-chat__secondary-surface-color);color:var(--str-chat__text-low-emphasis-color);text-transform:uppercase;font:var(--str-chat__caption-strong-text)}.str-chat__unread-messages-notification[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__on-primary-color);background-color:var(--str-chat__text-low-emphasis-color);border-radius:1.125rem}.str-chat__unread-messages-notification[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;color:var(--str-chat__on-primary-color);border:none;background-color:transparent}.str-chat__unread-messages-notification[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{font:var(--str-chat__caption-text)}.str-chat[_ngcontent-%COMP%]{--str-chat__message-actions-box-border-radius: var(--str-chat__border-radius-sm);--str-chat__message-actions-box-color: var(--str-chat__text-color);--str-chat__message-actions-box-background-color: var(--str-chat__secondary-background-color);--str-chat__message-actions-box-border-block-start: none;--str-chat__message-actions-box-border-block-end: none;--str-chat__message-actions-box-border-inline-start: none;--str-chat__message-actions-box-border-inline-end: none;--str-chat__message-actions-box-box-shadow: 0 0 8px var(--str-chat__box-shadow-color);--str-chat__message-actions-box-item-border-radius: 0;--str-chat__message-actions-box-item-color: var(--str-chat__text-color);--str-chat__message-actions-box-item-background-color: transparent;--str-chat__message-actions-box-item-hover-background-color: var( --str-chat__secondary-surface-color );--str-chat__message-actions-box-item-border-block-start: none;--str-chat__message-actions-box-item-border-block-end: none;--str-chat__message-actions-box-item-border-inline-start: none;--str-chat__message-actions-box-item-border-inline-end: none;--str-chat__message-actions-box-item-box-shadow: none}.str-chat__message-actions-box[_ngcontent-%COMP%]{background:var(--str-chat__message-actions-box-background-color);color:var(--str-chat__message-actions-box-color);box-shadow:var(--str-chat__message-actions-box-box-shadow);border-radius:var(--str-chat__message-actions-box-border-radius);border-block-start:var(--str-chat__message-actions-box-border-block-start);border-block-end:var(--str-chat__message-actions-box-border-block-end);border-inline-start:var(--str-chat__message-actions-box-border-inline-start);border-inline-end:var(--str-chat__message-actions-box-border-inline-end)}.str-chat__message-actions-box[_ngcontent-%COMP%]   .str-chat__message-actions-list-item-button[_ngcontent-%COMP%]{background:var(--str-chat__message-actions-box-item-background-color);color:var(--str-chat__message-actions-box-item-color);box-shadow:var(--str-chat__message-actions-box-item-box-shadow);border-radius:var(--str-chat__message-actions-box-item-border-radius);border-block-start:var(--str-chat__message-actions-box-item-border-block-start);border-block-end:var(--str-chat__message-actions-box-item-border-block-end);border-inline-start:var(--str-chat__message-actions-box-item-border-inline-start);border-inline-end:var(--str-chat__message-actions-box-item-border-inline-end);font:var(--str-chat__subtitle-text)}.str-chat__message-actions-box[_ngcontent-%COMP%]   .str-chat__message-actions-list-item-button[_ngcontent-%COMP%]:hover{background-color:var(--str-chat__message-actions-box-item-hover-background-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__message-bounce-edit-button-color: var(--str-chat__primary-color);--str-chat__message-bounce-send-button-color: var(--str-chat__primary-color);--str-chat__message-bounce-delete-button-color: var(--str-chat__primary-color);--str-chat__message-bounce-button-background-color: transparent;--str-chat__message-bounce-button-border-block-start: none;--str-chat__message-bounce-button-border-block-end: none;--str-chat__message-bounce-button-border-inline-start: none;--str-chat__message-bounce-button-border-inline-end: none;--str-chat__message-bounce-button-box-shadow: none}.str-chat__message-bounce-prompt[_ngcontent-%COMP%]   .str-chat__message-bounce-edit[_ngcontent-%COMP%], .str-chat__message-bounce-prompt[_ngcontent-%COMP%]   .str-chat__message-bounce-send[_ngcontent-%COMP%], .str-chat__message-bounce-prompt[_ngcontent-%COMP%]   .str-chat__message-bounce-delete[_ngcontent-%COMP%]{background:var(--str-chat__message-bounce-button-background-color);color:var(--str-chat__message-bounce-button-color);box-shadow:var(--str-chat__message-bounce-button-box-shadow);border-radius:var(--str-chat__message-bounce-button-border-radius);border-block-start:var(--str-chat__message-bounce-button-border-block-start);border-block-end:var(--str-chat__message-bounce-button-border-block-end);border-inline-start:var(--str-chat__message-bounce-button-border-inline-start);border-inline-end:var(--str-chat__message-bounce-button-border-inline-end);font:var(--str-chat__body-medium-text)}.str-chat__message-bounce-prompt[_ngcontent-%COMP%]   .str-chat__message-bounce-edit[_ngcontent-%COMP%]{color:var(--str-chat__message-bounce-edit-button-color)}.str-chat__message-bounce-prompt[_ngcontent-%COMP%]   .str-chat__message-bounce-send[_ngcontent-%COMP%]{color:var(--str-chat__message-bounce-send-button-color)}.str-chat__message-bounce-prompt[_ngcontent-%COMP%]   .str-chat__message-bounce-delete[_ngcontent-%COMP%]{color:var(--str-chat__message-bounce-delete-button-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__message-input-border-radius: 0;--str-chat__message-input-color: var(--str-chat__text-color);--str-chat__message-input-background-color: var(--str-chat__secondary-background-color);--str-chat__message-input-border-block-start: none;--str-chat__message-input-border-block-end: none;--str-chat__message-input-border-inline-start: none;--str-chat__message-input-border-inline-end: none;--str-chat__message-input-box-shadow: none;--str-chat__dropzone-container-color: var(--str-chat__on-primary-color);--str-chat__dropzone-container-background-color: var(--str-chat__primary-overlay-color);--str-chat__dropzone-container-backdrop-filter: blur(3px);--str-chat__message-textarea-border-radius: var(--str-chat__border-radius-md);--str-chat__message-textarea-color: var(--str-chat__text-color);--str-chat__message-textarea-background-color: transparent;--str-chat__message-textarea-border-block-start: 1px solid var(--str-chat__surface-color);--str-chat__message-textarea-border-block-end: 1px solid var(--str-chat__surface-color);--str-chat__message-textarea-border-inline-start: 1px solid var(--str-chat__surface-color);--str-chat__message-textarea-border-inline-end: 1px solid var(--str-chat__surface-color);--str-chat__message-textarea-box-shadow: none;--str-chat__message-send-border-radius: var(--str-chat__border-radius-circle);--str-chat__message-send-color: var(--str-chat__primary-color);--str-chat__message-send-background-color: transparent;--str-chat__message-send-border-block-start: 0;--str-chat__message-send-border-block-end: 0;--str-chat__message-send-border-inline-start: 0;--str-chat__message-send-border-inline-end: 0;--str-chat__message-send-box-shadow: none;--str-chat__message-send-disabled-color: var(--str-chat__disabled-color);--str-chat__message-send-disabled-background-color: var(--str-chat__disabled-color);--str-chat__start-recording-audio-button-border-radius: var(--str-chat__border-radius-circle);--str-chat__start-recording-audio-button-color: var(--str-chat__text-low-emphasis-color);--str-chat__start-recording-audio-button-background-color: transparent;--str-chat__start-recording-audio-button-border-block-start: 0;--str-chat__start-recording-audio-button-border-block-end: 0;--str-chat__start-recording-audio-button-border-inline-start: 0;--str-chat__start-recording-audio-button-border-inline-end: 0;--str-chat__start-recording-audio-button-box-shadow: none;--str-chat__start-recording-audio-button-disabled-color: var(--str-chat__disabled-color);--str-chat__start-recording-audio-button-disabled-background-color: transparent;--str-chat__message-input-tools-border-radius: var(--str-chat__border-radius-circle);--str-chat__message-input-tools-color: var(--str-chat__text-low-emphasis-color);--str-chat__message-input-tools-background-color: transparent;--str-chat__message-input-tools-border-block-start: 0;--str-chat__message-input-tools-border-block-end: 0;--str-chat__message-input-tools-border-inline-start: 0;--str-chat__message-input-tools-border-inline-end: 0;--str-chat__message-input-tools-box-shadow: none;--str-chat__message-input-not-allowed-color: var(--str-chat__disabled-color);--str-chat__cooldown-border-radius: var(--str-chat__border-radius-circle);--str-chat__cooldown-color: var(--str-chat__on-disabled-color);--str-chat__cooldown-background-color: var(--str-chat__disabled-color);--str-chat__cooldown-border-block-start: 0;--str-chat__cooldown-border-block-end: 0;--str-chat__cooldown-border-inline-start: 0;--str-chat__cooldown-border-inline-end: 0;--str-chat__cooldown-box-shadow: none}.str-chat__message-input[_ngcontent-%COMP%]{background:var(--str-chat__message-input-background-color);color:var(--str-chat__message-input-color);box-shadow:var(--str-chat__message-input-box-shadow);border-radius:var(--str-chat__message-input-border-radius);border-block-start:var(--str-chat__message-input-border-block-start);border-block-end:var(--str-chat__message-input-border-block-end);border-inline-start:var(--str-chat__message-input-border-inline-start);border-inline-end:var(--str-chat__message-input-border-inline-end)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__dropzone-container[_ngcontent-%COMP%]{background-color:var(--str-chat__dropzone-container-background-color);color:var(--str-chat__dropzone-container-color);-webkit-backdrop-filter:var(--str-chat__dropzone-container-backdrop-filter);backdrop-filter:var(--str-chat__dropzone-container-backdrop-filter);font:var(--str-chat__subtitle-text)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__file-input-container[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__message-input-tools-color);background:var(--str-chat__message-input-tools-background-color);color:var(--str-chat__message-input-tools-color);box-shadow:var(--str-chat__message-input-tools-box-shadow);border-radius:var(--str-chat__message-input-tools-border-radius);border-block-start:var(--str-chat__message-input-tools-border-block-start);border-block-end:var(--str-chat__message-input-tools-border-block-end);border-inline-start:var(--str-chat__message-input-tools-border-inline-start);border-inline-end:var(--str-chat__message-input-tools-border-inline-end)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__file-input-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__message-input-tools-color)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__attachment-preview-image-error[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__primary-color)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-textarea-container[_ngcontent-%COMP%]{background:var(--str-chat__message-textarea-background-color);color:var(--str-chat__message-textarea-color);box-shadow:var(--str-chat__message-textarea-box-shadow);border-radius:var(--str-chat__message-textarea-border-radius);border-block-start:var(--str-chat__message-textarea-border-block-start);border-block-end:var(--str-chat__message-textarea-border-block-end);border-inline-start:var(--str-chat__message-textarea-border-inline-start);border-inline-end:var(--str-chat__message-textarea-border-inline-end)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-textarea-container[_ngcontent-%COMP%]   .str-chat__message-textarea[_ngcontent-%COMP%]{resize:none;border:none;color:var(--str-chat__message-textarea-color);background-color:transparent;box-shadow:none;outline:none;font:var(--str-chat__subtitle-text)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__send-button[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__message-send-color);background:var(--str-chat__message-send-background-color);color:var(--str-chat__message-send-color);box-shadow:var(--str-chat__message-send-box-shadow);border-radius:var(--str-chat__message-send-border-radius);border-block-start:var(--str-chat__message-send-border-block-start);border-block-end:var(--str-chat__message-send-border-block-end);border-inline-start:var(--str-chat__message-send-border-inline-start);border-inline-end:var(--str-chat__message-send-border-inline-end)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__send-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__message-send-color)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__send-button[_ngcontent-%COMP%]:disabled{--str-chat-icon-color: var(--str-chat__message-send-disabled-color);background-color:transparent}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__send-button[_ngcontent-%COMP%]:disabled   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__message-send-disabled-color)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__start-recording-audio-button[_ngcontent-%COMP%]{background:var(--str-chat__start-recording-audio-button-background-color);color:var(--str-chat__start-recording-audio-button-color);box-shadow:var(--str-chat__start-recording-audio-button-box-shadow);border-radius:var(--str-chat__start-recording-audio-button-border-radius);border-block-start:var(--str-chat__start-recording-audio-button-border-block-start);border-block-end:var(--str-chat__start-recording-audio-button-border-block-end);border-inline-start:var(--str-chat__start-recording-audio-button-border-inline-start);border-inline-end:var(--str-chat__start-recording-audio-button-border-inline-end)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__start-recording-audio-button[_ngcontent-%COMP%]:disabled{background-color:var(--str-chat__message-send-disabled-background-color)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-cooldown[_ngcontent-%COMP%]{background:var(--str-chat__cooldown-background-color);color:var(--str-chat__cooldown-color);box-shadow:var(--str-chat__cooldown-box-shadow);border-radius:var(--str-chat__cooldown-border-radius);border-block-start:var(--str-chat__cooldown-border-block-start);border-block-end:var(--str-chat__cooldown-border-block-end);border-inline-start:var(--str-chat__cooldown-border-inline-start);border-inline-end:var(--str-chat__cooldown-border-inline-end);font:var(--str-chat__subtitle-medium-text)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__message-input-not-allowed[_ngcontent-%COMP%]{color:var(--str-chat__message-input-not-allowed-color);font:var(--str-chat__subtitle-text)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__quoted-message-preview-header[_ngcontent-%COMP%]   .str-chat__quoted-message-reply-to-message[_ngcontent-%COMP%]{font:var(--str-chat__subtitle-medium-text)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__quoted-message-preview-header[_ngcontent-%COMP%]   .str-chat__quoted-message-remove[_ngcontent-%COMP%]{background-color:transparent;border:none}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__quoted-message-preview-header[_ngcontent-%COMP%]   .str-chat__quoted-message-remove[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__message-input-tools-color)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__recording-permission-denied-notification[_ngcontent-%COMP%]{background-color:var(--str-chat__text-color);border-radius:var(--str-chat__border-radius-md);color:var(--str-chat__background-color)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__recording-permission-denied-notification[_ngcontent-%COMP%]   .str-chat__recording-permission-denied-notification__heading[_ngcontent-%COMP%], .str-chat__message-input[_ngcontent-%COMP%]   .str-chat__recording-permission-denied-notification[_ngcontent-%COMP%]   .str-chat__recording-permission-denied-notification__dismiss-button[_ngcontent-%COMP%]{font:var(--str-chat__subtitle2-medium-text)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__recording-permission-denied-notification[_ngcontent-%COMP%]   .str-chat__recording-permission-denied-notification__message[_ngcontent-%COMP%]{font:var(--str-chat__subtitle-text)}.str-chat__message-input[_ngcontent-%COMP%]   .str-chat__recording-permission-denied-notification[_ngcontent-%COMP%]   .str-chat__recording-permission-denied-notification__dismiss-button[_ngcontent-%COMP%]{background:none;border:none;color:var(--str-chat__background-color);cursor:pointer;text-transform:uppercase}.str-chat[_ngcontent-%COMP%]{--str-chat__message-list-border-radius: 0;--str-chat__message-list-color: var(--str-chat__text-color);--str-chat__message-list-background-color: var(--str-chat__background-color);--str-chat__message-list-box-shadow: none;--str-chat__message-list-border-block-start: none;--str-chat__message-list-border-block-end: none;--str-chat__message-list-border-inline-start: none;--str-chat__message-list-border-inline-end: none;--str-chat__jump-to-latest-message-border-radius: var(--str-chat__circle-fab-border-radius);--str-chat__jump-to-latest-message-color: var(--str-chat__circle-fab-color);--str-chat__jump-to-latest-message-background-color: var(--str-chat__circle-fab-background-color);--str-chat__jump-to-latest-message-pressed-background-color: var( --str-chat__circle-fab-pressed-background-color );--str-chat__jump-to-latest-message-box-shadow: var(--str-chat__circle-fab-box-shadow);--str-chat__jump-to-latest-message-border-block-start: var( --str-chat__circle-fab-border-block-start );--str-chat__jump-to-latest-message-border-block-end: var(--str-chat__circle-fab-border-block-end);--str-chat__jump-to-latest-message-border-inline-start: var( --str-chat__circle-fab-border-inline-start );--str-chat__jump-to-latest-message-border-inline-end: var( --str-chat__circle-fab-border-inline-end );--str-chat__jump-to-latest-message-unread-count-background-color: var( --str-chat__jump-to-latest-message-color );--str-chat__jump-to-latest-message-unread-count-color: var( --str-chat__jump-to-latest-message-background-color );--str-chat__thread-head-start-color: var(--str-chat__text-low-emphasis-color);--str-chat__thread-head-start-border-block-end-color: var(--str-chat__surface-color)}.str-chat__list[_ngcontent-%COMP%]{background:var(--str-chat__message-list-background-color);color:var(--str-chat__message-list-color);box-shadow:var(--str-chat__message-list-box-shadow);border-radius:var(--str-chat__message-list-border-radius);border-block-start:var(--str-chat__message-list-border-block-start);border-block-end:var(--str-chat__message-list-border-block-end);border-inline-start:var(--str-chat__message-list-border-inline-start);border-inline-end:var(--str-chat__message-list-border-inline-end)}.str-chat__list[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]{border-block-end:1px solid var(--str-chat__thread-head-start-border-block-end-color)}.str-chat__list[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]   .str-chat__thread-start[_ngcontent-%COMP%]{color:var(--str-chat__thread-head-start-color);font:var(--str-chat__subtitle-text)}.str-chat__jump-to-latest-message[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__jump-to-latest-message-unread-count-background-color)}.str-chat__jump-to-latest-message[_ngcontent-%COMP%]   .str-chat__circle-fab[_ngcontent-%COMP%]{background:var(--str-chat__jump-to-latest-message-background-color);color:var(--str-chat__jump-to-latest-message-color);box-shadow:var(--str-chat__jump-to-latest-message-box-shadow);border-radius:var(--str-chat__jump-to-latest-message-border-radius);border-block-start:var(--str-chat__jump-to-latest-message-border-block-start);border-block-end:var(--str-chat__jump-to-latest-message-border-block-end);border-inline-start:var(--str-chat__jump-to-latest-message-border-inline-start);border-inline-end:var(--str-chat__jump-to-latest-message-border-inline-end)}.str-chat__jump-to-latest-message[_ngcontent-%COMP%]   .str-chat__circle-fab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__jump-to-latest-message-color)}.str-chat__jump-to-latest-message[_ngcontent-%COMP%]   .str-chat__circle-fab[_ngcontent-%COMP%]:active{background-color:var(--str-chat__jump-to-latest-message-pressed-background-color)}.str-chat__jump-to-latest-message[_ngcontent-%COMP%]   .str-chat__circle-fab[_ngcontent-%COMP%]   .str-chat__jump-to-latest-unread-count[_ngcontent-%COMP%]{background-color:var(--str-chat__jump-to-latest-message-unread-count-background-color);color:var(--str-chat__jump-to-latest-message-unread-count-color);border-radius:var(--str-chat__jump-to-latest-message-border-radius);font:var(--str-chat__caption-text)}.str-chat[_ngcontent-%COMP%]{--str-chat__virtual-list-border-radius: 0;--str-chat__virtual-list-color: var(--str-chat__text-color);--str-chat__virtual-list-background-color: var(--str-chat__background-color);--str-chat__virtual-list-box-shadow: none;--str-chat__virtual-list-border-block-start: none;--str-chat__virtual-list-border-block-end: none;--str-chat__virtual-list-border-inline-start: none;--str-chat__virtual-list-border-inline-end: none}.str-chat__virtual-list[_ngcontent-%COMP%]{background:var(--str-chat__virtual-list-background-color);color:var(--str-chat__virtual-list-color);box-shadow:var(--str-chat__virtual-list-box-shadow);border-radius:var(--str-chat__virtual-list-border-radius);border-block-start:var(--str-chat__virtual-list-border-block-start);border-block-end:var(--str-chat__virtual-list-border-block-end);border-inline-start:var(--str-chat__virtual-list-border-inline-start);border-inline-end:var(--str-chat__virtual-list-border-inline-end)}.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]{border-block-end:1px solid var(--str-chat__thread-head-start-border-block-end-color)}.str-chat__virtual-list[_ngcontent-%COMP%]   .str-chat__parent-message-li[_ngcontent-%COMP%]   .str-chat__thread-start[_ngcontent-%COMP%]{color:var(--str-chat__thread-head-start-color);font:var(--str-chat__subtitle-text)}.str-chat[_ngcontent-%COMP%]{--str-chat__message-reactions-border-radius: none;--str-chat__message-reactions-color: var(--str-chat__text-color);--str-chat__message-reactions-background-color: transparent;--str-chat__message-reactions-border-block-start: none;--str-chat__message-reactions-border-block-end: none;--str-chat__message-reactions-border-inline-start: none;--str-chat__message-reactions-border-inline-end: none;--str-chat__message-reactions-box-shadow: none;--str-chat__message-reaction-border-radius: var(--str-chat__border-radius-xs);--str-chat__message-reaction-color: var(--str-chat__text-color);--str-chat__message-reaction-background-color: var(--str-chat__tertiary-surface-color);--str-chat__message-reaction-border-block-start: none;--str-chat__message-reaction-border-block-end: none;--str-chat__message-reaction-border-inline-start: none;--str-chat__message-reaction-border-inline-end: none;--str-chat__message-reaction-box-shadow: none;--str-chat__own-message-reaction-color: var(--str-chat__text-color);--str-chat__own-message-reaction-background-color: var( --str-chat__primary-surface-color-low-emphasis );--str-chat__messsage-reactions-details--selected-color: solid var(--str-chat__primary-color)}.str-chat__message-reactions-container[_ngcontent-%COMP%]   .str-chat__message-reactions[_ngcontent-%COMP%]{background:var(--str-chat__message-reactions-background-color);color:var(--str-chat__message-reactions-color);box-shadow:var(--str-chat__message-reactions-box-shadow);border-radius:var(--str-chat__message-reactions-border-radius);border-block-start:var(--str-chat__message-reactions-border-block-start);border-block-end:var(--str-chat__message-reactions-border-block-end);border-inline-start:var(--str-chat__message-reactions-border-inline-start);border-inline-end:var(--str-chat__message-reactions-border-inline-end)}.str-chat__message-reactions-container[_ngcontent-%COMP%]   .str-chat__message-reactions[_ngcontent-%COMP%]   .str-chat__message-reaction[_ngcontent-%COMP%]{background:var(--str-chat__message-reaction-background-color);color:var(--str-chat__message-reaction-color);box-shadow:var(--str-chat__message-reaction-box-shadow);border-radius:var(--str-chat__message-reaction-border-radius);border-block-start:var(--str-chat__message-reaction-border-block-start);border-block-end:var(--str-chat__message-reaction-border-block-end);border-inline-start:var(--str-chat__message-reaction-border-inline-start);border-inline-end:var(--str-chat__message-reaction-border-inline-end);font:var(--str-chat__caption-text)}.str-chat__message-reactions-container[_ngcontent-%COMP%]   .str-chat__message-reactions[_ngcontent-%COMP%]   .str-chat__message-reaction.str-chat__message-reaction-own[_ngcontent-%COMP%]{color:var(--str-chat__own-message-reaction-color);background-color:var(--str-chat__own-message-reaction-background-color)}.str-chat__message-reactions-details[_ngcontent-%COMP%]   .str-chat__message-reactions-details-reaction-type[_ngcontent-%COMP%]{border-block-end:solid transparent}.str-chat__message-reactions-details[_ngcontent-%COMP%]   .str-chat__message-reactions-details-reaction-type--selected[_ngcontent-%COMP%]{border-block-end:var(--str-chat__messsage-reactions-details--selected-color)}.str-chat__message-reactions-details[_ngcontent-%COMP%]   .str-chat__message-reactions-details-reacting-user[_ngcontent-%COMP%]{font:var(--str-chat__subtitle-text)}.str-chat[_ngcontent-%COMP%]{--str-chat__message-reactions-options-border-radius: var(--str-chat__border-radius-circle);--str-chat__message-reactions-options-color: var(--str-chat__text-color);--str-chat__message-reactions-options-background-color: var( --str-chat__secondary-background-color );--str-chat__message-reactions-options-border-block-start: none;--str-chat__message-reactions-options-border-block-end: none;--str-chat__message-reactions-options-border-inline-start: none;--str-chat__message-reactions-options-border-inline-end: none;--str-chat__message-reactions-options-box-shadow: 0 0 8px var(--str-chat__box-shadow-color);--str-chat__message-reactions-option-border-radius: var(--str-chat__border-radius-md);--str-chat__message-reactions-option-color: var(--str-chat__text-color);--str-chat__message-reactions-option-background-color: var( --str-chat__secondary-background-color );--str-chat__message-reactions-option-hover-background-color: var( --str-chat__primary-surface-color );--str-chat__message-reactions-option-selected-background-color: var( --str-chat__primary-color-low-emphasis );--str-chat__message-reactions-option-border-block-start: none;--str-chat__message-reactions-option-border-block-end: none;--str-chat__message-reactions-option-border-inline-start: none;--str-chat__message-reactions-option-border-inline-end: none;--str-chat__message-reactions-option-box-shadow: none}.str-chat__reaction-selector[_ngcontent-%COMP%]   .str-chat__message-reactions-options[_ngcontent-%COMP%]{background:var(--str-chat__message-reactions-options-background-color);color:var(--str-chat__message-reactions-options-color);box-shadow:var(--str-chat__message-reactions-options-box-shadow);border-radius:var(--str-chat__message-reactions-options-border-radius);border-block-start:var(--str-chat__message-reactions-options-border-block-start);border-block-end:var(--str-chat__message-reactions-options-border-block-end);border-inline-start:var(--str-chat__message-reactions-options-border-inline-start);border-inline-end:var(--str-chat__message-reactions-options-border-inline-end)}.str-chat__reaction-selector[_ngcontent-%COMP%]   .str-chat__message-reactions-options[_ngcontent-%COMP%]   .str-chat__message-reactions-option[_ngcontent-%COMP%]{background:var(--str-chat__message-reactions-option-background-color);color:var(--str-chat__message-reactions-option-color);box-shadow:var(--str-chat__message-reactions-option-box-shadow);border-radius:var(--str-chat__message-reactions-option-border-radius);border-block-start:var(--str-chat__message-reactions-option-border-block-start);border-block-end:var(--str-chat__message-reactions-option-border-block-end);border-inline-start:var(--str-chat__message-reactions-option-border-inline-start);border-inline-end:var(--str-chat__message-reactions-option-border-inline-end)}.str-chat__reaction-selector[_ngcontent-%COMP%]   .str-chat__message-reactions-options[_ngcontent-%COMP%]   .str-chat__message-reactions-option[_ngcontent-%COMP%]:hover{background-color:var(--str-chat__message-reactions-option-hover-background-color)}.str-chat__reaction-selector[_ngcontent-%COMP%]   .str-chat__message-reactions-options[_ngcontent-%COMP%]   .str-chat__message-reactions-option.str-chat__message-reactions-option-selected[_ngcontent-%COMP%]{background-color:var(--str-chat__message-reactions-option-selected-background-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__modal-border-radius: var(--str-chat__border-radius-sm);--str-chat__modal-color: var(--str-chat__text-color);--str-chat__modal-background-color: var(--str-chat__secondary-background-color);--str-chat__modal-overlay-color: var(--str-chat__secondary-overlay-color);--str-chat__modal-overlay-backdrop-filter: blur(3px);--str-chat__modal-border-block-start: none;--str-chat__modal-border-block-end: none;--str-chat__modal-border-inline-start: none;--str-chat__modal-border-inline-end: none;--str-chat__modal-box-shadow: none;--str-chat__modal-close-icon-background: var(--str-chat__text-low-emphasis-color);--str-chat__modal-close-icon-color: var(--str-chat__on-disabled-color)}.str-chat__modal[_ngcontent-%COMP%]{background-color:var(--str-chat__modal-overlay-color);-webkit-backdrop-filter:var(--str-chat__modal-overlay-backdrop-filter);backdrop-filter:var(--str-chat__modal-overlay-backdrop-filter)}.str-chat__modal[_ngcontent-%COMP%]   .str-chat__modal__inner[_ngcontent-%COMP%]{background:var(--str-chat__modal-background-color);color:var(--str-chat__modal-color);box-shadow:var(--str-chat__modal-box-shadow);border-radius:var(--str-chat__modal-border-radius);border-block-start:var(--str-chat__modal-border-block-start);border-block-end:var(--str-chat__modal-border-block-end);border-inline-start:var(--str-chat__modal-border-inline-start);border-inline-end:var(--str-chat__modal-border-inline-end)}.str-chat__modal[_ngcontent-%COMP%]   .str-chat__modal__close-button[_ngcontent-%COMP%]{--str-chat-icon-color: var(--str-chat__modal-close-icon-color);background:none;border:none}.str-chat__modal[_ngcontent-%COMP%]   .str-chat__modal__close-button[_ngcontent-%COMP%]   .str-chat__icon[_ngcontent-%COMP%]{background-color:var(--str-chat__modal-close-icon-background);border-radius:999px}.str-chat__modal[_ngcontent-%COMP%]   .str-chat__modal__close-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__modal-close-icon-color)}.str-chat__modal[_ngcontent-%COMP%]   .str-chat__modal__close-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%], .str-chat__modal[_ngcontent-%COMP%]   .str-chat__modal__close-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:var(--str-chat__modal-close-icon-background)}.str-chat__message-attachment--card[_ngcontent-%COMP%]   .str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner.str-chat-react__modal__inner[_ngcontent-%COMP%], .str-chat__message-attachment--image[_ngcontent-%COMP%]   .str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner.str-chat-react__modal__inner[_ngcontent-%COMP%], .str-chat__message-attachment--gallery[_ngcontent-%COMP%]   .str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner.str-chat-react__modal__inner[_ngcontent-%COMP%]{background-color:transparent;width:unset;height:unset;padding:0}.str-chat__message-attachment--card[_ngcontent-%COMP%]   .str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner.str-chat-react__modal__inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .str-chat__message-attachment--image[_ngcontent-%COMP%]   .str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner.str-chat-react__modal__inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .str-chat__message-attachment--gallery[_ngcontent-%COMP%]   .str-chat__modal--open[_ngcontent-%COMP%]   .str-chat__modal__inner.str-chat-react__modal__inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;max-height:calc(100vh - 80px);cursor:default}.str-chat[_ngcontent-%COMP%]{--str-chat__message-notification-background-color: var(--str-chat__primary-color);--str-chat__message-notification-border-block-start: none;--str-chat__message-notification-border-block-end: none;--str-chat__message-notification-border-inline-start: none;--str-chat__message-notification-border-inline-end: none;--str-chat__message-notification-border-radius: 50px;--str-chat__message-notification-box-shadow: none;--str-chat__message-notification-color: var(--str-chat__on-primary-color)}.str-chat__message-notification[_ngcontent-%COMP%]{background:var(--str-chat__message-notification-background-color);color:var(--str-chat__message-notification-color);box-shadow:var(--str-chat__message-notification-box-shadow);border-radius:var(--str-chat__message-notification-border-radius);border-block-start:var(--str-chat__message-notification-border-block-start);border-block-end:var(--str-chat__message-notification-border-block-end);border-inline-start:var(--str-chat__message-notification-border-inline-start);border-inline-end:var(--str-chat__message-notification-border-inline-end);font:var(--str-chat__caption-text);cursor:pointer}.str-chat[_ngcontent-%COMP%]{--str-chat__notification-list-border-radius: none;--str-chat__notification-list-color: var(--str-chat__notification-list-text-color);--str-chat__notification-list-background-color: transparent;--str-chat__notification-list-border-block-start: none;--str-chat__notification-list-border-block-end: none;--str-chat__notification-list-border-inline-start: none;--str-chat__notification-list-border-inline-end: none;--str-chat__notification-list-box-shadow: none}.str-chat__list-notifications[_ngcontent-%COMP%]{background:var(--str-chat__notification-list-background-color);color:var(--str-chat__notification-list-color);box-shadow:var(--str-chat__notification-list-box-shadow);border-radius:var(--str-chat__notification-list-border-radius);border-block-start:var(--str-chat__notification-list-border-block-start);border-block-end:var(--str-chat__notification-list-border-block-end);border-inline-start:var(--str-chat__notification-list-border-inline-start);border-inline-end:var(--str-chat__notification-list-border-inline-end)}.str-chat[_ngcontent-%COMP%]{--str-chat__notification-border-radius: var(--str-chat__border-radius-sm);--str-chat__notification-color: var(--str-chat__opaque-surface-text-color);--str-chat__notification-background-color: var(--str-chat__opaque-surface-background-color);--str-chat__notification-border-block-start: none;--str-chat__notification-border-block-end: none;--str-chat__notification-border-inline-start: none;--str-chat__notification-border-inline-end: none;--str-chat__notification-box-shadow: 0 0 8px var(--str-chat__box-shadow-color)}.str-chat__notification[_ngcontent-%COMP%]{background:var(--str-chat__notification-background-color);color:var(--str-chat__notification-color);box-shadow:var(--str-chat__notification-box-shadow);border-radius:var(--str-chat__notification-border-radius);border-block-start:var(--str-chat__notification-border-block-start);border-block-end:var(--str-chat__notification-border-block-end);border-inline-start:var(--str-chat__notification-border-inline-start);border-inline-end:var(--str-chat__notification-border-inline-end);font:var(--str-chat__subtitle-text)}.str-chat[_ngcontent-%COMP%]{--str-chat__thread-border-radius: 0;--str-chat__thread-color: var(--str-chat__text-color);--str-chat__thread-background-color: var(--str-chat__secondary-background-color);--str-chat__thread-border-block-start: none;--str-chat__thread-border-block-end: none;--str-chat__thread-border-inline-start: 1px solid var(--str-chat__surface-color);--str-chat__thread-border-inline-end: none;--str-chat__thread-box-shadow: none;--str-chat__thread-header-border-radius: 0;--str-chat__thread-header-color: var(--str-chat__text-color);--str-chat__thread-header-background-color: var(--str-chat__secondary-background-color);--str-chat__thread-header-border-block-start: none;--str-chat__thread-header-border-block-end: none;--str-chat__thread-header-border-inline-start: none;--str-chat__thread-header-border-inline-end: none;--str-chat__thread-header-box-shadow: none;--str-chat__thread-header-info-color: var(--str-chat__text-low-emphasis-color)}.str-chat__thread-container[_ngcontent-%COMP%]{background:var(--str-chat__thread-background-color);color:var(--str-chat__thread-color);box-shadow:var(--str-chat__thread-box-shadow);border-radius:var(--str-chat__thread-border-radius);border-block-start:var(--str-chat__thread-border-block-start);border-block-end:var(--str-chat__thread-border-block-end);border-inline-start:var(--str-chat__thread-border-inline-start);border-inline-end:var(--str-chat__thread-border-inline-end)}.str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]{background:var(--str-chat__thread-header-background-color);color:var(--str-chat__thread-header-color);box-shadow:var(--str-chat__thread-header-box-shadow);border-radius:var(--str-chat__thread-header-border-radius);border-block-start:var(--str-chat__thread-header-border-block-start);border-block-end:var(--str-chat__thread-header-border-block-end);border-inline-start:var(--str-chat__thread-header-border-inline-start);border-inline-end:var(--str-chat__thread-header-border-inline-end)}.str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__thread-header-name[_ngcontent-%COMP%], .str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__thread-header-title[_ngcontent-%COMP%]{font:var(--str-chat__subtitle-medium-text)}.str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__thread-header-channel-name[_ngcontent-%COMP%], .str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__thread-header-subtitle[_ngcontent-%COMP%]{font:var(--str-chat__body-text);color:var(--str-chat__thread-header-info-color)}.str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__close-thread-button[_ngcontent-%COMP%]{background-color:transparent;border:none}.str-chat__thread-container[_ngcontent-%COMP%]   .str-chat__thread-header[_ngcontent-%COMP%]   .str-chat__close-thread-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__thread-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__tooltip-border-radius: var(--str-chat__border-radius-xs);--str-chat__tooltip-color: var(--str-chat__text-color);--str-chat__tooltip-background-color: var(--str-chat__secondary-background-color);--str-chat__tooltip-border-block-start: none;--str-chat__tooltip-border-block-end: none;--str-chat__tooltip-border-inline-start: none;--str-chat__tooltip-border-inline-end: none;--str-chat__tooltip-box-shadow: 0 0 20px var(--str-chat__box-shadow-color)}.str-chat__tooltip[_ngcontent-%COMP%]{background:var(--str-chat__tooltip-background-color);color:var(--str-chat__tooltip-color);box-shadow:var(--str-chat__tooltip-box-shadow);border-radius:var(--str-chat__tooltip-border-radius);border-block-start:var(--str-chat__tooltip-border-block-start);border-block-end:var(--str-chat__tooltip-border-block-end);border-inline-start:var(--str-chat__tooltip-border-inline-start);border-inline-end:var(--str-chat__tooltip-border-inline-end);font:var(--str-chat__caption-text)}.str-chat__tooltip[_ngcontent-%COMP%]:after{background-color:var(--str-chat__tooltip-background-color)}.str-chat[_ngcontent-%COMP%]{--str-chat__typing-indicator-border-radius: none;--str-chat__typing-indicator-color: var(--str-chat__text-low-emphasis-color);--str-chat__typing-indicator-background-color: var(--str-chat__overlay-color);--str-chat__typing-indicator-border-block-start: none;--str-chat__typing-indicator-border-block-end: none;--str-chat__typing-indicator-border-inline-start: none;--str-chat__typing-indicator-border-inline-end: none;--str-chat__typing-indicator-box-shadow: none;--str-chat__typing-indicator-dot-background-color: var(--str-chat__text-color)}.str-chat__typing-indicator[_ngcontent-%COMP%]{background:var(--str-chat__typing-indicator-background-color);color:var(--str-chat__typing-indicator-color);box-shadow:var(--str-chat__typing-indicator-box-shadow);border-radius:var(--str-chat__typing-indicator-border-radius);border-block-start:var(--str-chat__typing-indicator-border-block-start);border-block-end:var(--str-chat__typing-indicator-border-block-end);border-inline-start:var(--str-chat__typing-indicator-border-inline-start);border-inline-end:var(--str-chat__typing-indicator-border-inline-end)}.str-chat__typing-indicator[_ngcontent-%COMP%]   .str-chat__typing-indicator__dots[_ngcontent-%COMP%]   .str-chat__typing-indicator__dot[_ngcontent-%COMP%]{border-radius:999px;animation:_ngcontent-%COMP%_dotFlashing 1s infinite alternate;background-color:var(--str-chat__typing-indicator-dot-background-color)}.str-chat__typing-indicator[_ngcontent-%COMP%]   .str-chat__typing-indicator__dots[_ngcontent-%COMP%]   .str-chat__typing-indicator__dot[_ngcontent-%COMP%]:nth-child(1){animation-delay:0s}.str-chat__typing-indicator[_ngcontent-%COMP%]   .str-chat__typing-indicator__dots[_ngcontent-%COMP%]   .str-chat__typing-indicator__dot[_ngcontent-%COMP%]:nth-child(2){animation-delay:.5s}.str-chat__typing-indicator[_ngcontent-%COMP%]   .str-chat__typing-indicator__dots[_ngcontent-%COMP%]   .str-chat__typing-indicator__dot[_ngcontent-%COMP%]:nth-child(3){animation-delay:1s}@keyframes _ngcontent-%COMP%_dotFlashing{0%{opacity:1}50%{opacity:.6}to{opacity:.2}}html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;height:100%}#root[_ngcontent-%COMP%]{display:flex;height:100%}#root[_ngcontent-%COMP%]   stream-channel-list[_ngcontent-%COMP%]{width:30%}#root[_ngcontent-%COMP%]   stream-channel[_ngcontent-%COMP%]{width:100%}#root[_ngcontent-%COMP%]   stream-thread[_ngcontent-%COMP%]{width:45%}']});let e=n;return e})();var Bp=(()=>{let n=class n{constructor(i){this.http=i}addPayment(i){return this.http.post("http://localhost:3000/api/payment/",i)}getAllPayments(){return this.http.get("http://localhost:3000/api/payment/")}};n.\u0275fac=function(r){return new(r||n)(xt(Pc))},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var j3=(()=>{let n=class n{constructor(i,r){this.router=i,this.paymentService=r}navigateTo(i){this.router.navigateByUrl(`/${i}`)}};n.\u0275fac=function(r){return new(r||n)(Ce(es),Ce(Bp))},n.\u0275cmp=Wt({type:n,selectors:[["app-home"]],decls:7,vars:0,consts:[[1,"d-flex","justify-content-evenly","align-items-center","mt-5"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(r,s){r&1&&(K(0,"div",0)(1,"button",1),nt("click",function(){return s.navigateTo("locations")}),je(2,"Open Locations"),Q(),K(3,"button",2),nt("click",function(){return s.navigateTo("chats")}),je(4,"Open Chats"),Q(),K(5,"button",3),nt("click",function(){return s.navigateTo("payments")}),je(6,"Add Payment"),Q()())}});let e=n;return e})();var V3=(()=>{let n=class n{constructor(i,r){this.router=i,this.mapService=r}navigateToLocation(i){this.router.navigateByUrl("/locations/"+i)}deleteLocation(i){this.mapService.deleteLocation(i).subscribe({next:r=>{this.mapService.fetchLocations.next(r),console.log(r)},error:r=>{throw new Error(r)}})}};n.\u0275fac=function(r){return new(r||n)(Ce(es),Ce(lp))},n.\u0275cmp=Wt({type:n,selectors:[["app-location-list"]],inputs:{data:"data"},decls:7,vars:3,consts:[[1,"card",2,"width","18rem",3,"click"],[1,"card-body"],[1,"d-flex","justify-content-between"],[1,"card-subtitle","mb-2","text-body-secondary"],["height","24","width","24","alt","delete",1,"delete-icon",3,"click","src"],["height","24","width","24","alt","location",3,"src"]],template:function(r,s){r&1&&(K(0,"div",0),nt("click",function(){return s.navigateToLocation(s.data._id)}),K(1,"div",1)(2,"div",2)(3,"h6",3),je(4),Q(),K(5,"img",4),nt("click",function(d){return s.deleteLocation(s.data._id),d.stopImmediatePropagation()}),Q()(),Me(6,"img",5),Q()()),r&2&&(V(4),hi(s.data.locationName),V(),H("src","assets/icons/trash-outline.svg",vr),V(),H("src","assets/icons/location-outline.svg",vr))},styles:[".card[_ngcontent-%COMP%]{margin-bottom:1rem}.card[_ngcontent-%COMP%]:hover{box-shadow:#00000059 0 5px 15px;cursor:pointer}.card[_ngcontent-%COMP%]:hover   .delete-icon[_ngcontent-%COMP%]{display:block}.delete-icon[_ngcontent-%COMP%]{display:none}"]});let e=n;return e})();function nne(e,n){if(e&1&&Me(0,"app-location-list",5),e&2){let t=n.$implicit;H("data",t)}}var z3=(()=>{let n=class n{constructor(i,r){this.router=i,this.mapService=r,this.locations=[]}ngOnInit(){this.mapService.fetchLocations.subscribe(()=>{this.getAllLocations()})}addNewLocation(){this.router.navigateByUrl("/locations/add-class")}getAllLocations(){this.mapService.getLocations().subscribe({next:i=>{if(i.status==="success")this.locations=i.data;else throw new Error(i.status)},error:i=>{throw i}})}};n.\u0275fac=function(r){return new(r||n)(Ce(es),Ce(lp))},n.\u0275cmp=Wt({type:n,selectors:[["app-location"]],decls:8,vars:1,consts:[[1,"p-3"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-danger",3,"click"],[1,"location-list"],[3,"data",4,"ngFor","ngForOf"],[3,"data"]],template:function(r,s){r&1&&(K(0,"div",0)(1,"div",1)(2,"h2"),je(3,"Locations"),Q(),K(4,"button",2),nt("click",function(){return s.addNewLocation()}),je(5,"New Location"),Q()(),K(6,"div",3),de(7,nne,1,1,"app-location-list",4),Q()()),r&2&&(V(7),H("ngForOf",s.locations))},dependencies:[ys,V3]});let e=n;return e})();var U3=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Wt({type:n,selectors:[["app-payments"]],decls:1,vars:0,template:function(r,s){r&1&&Me(0,"router-outlet")},dependencies:[$u]});let e=n;return e})();var $3=(()=>{let n=class n{constructor(i){this.paymentService=i}ngOnInit(){this.fetchPaymentsList()}fetchPaymentsList(){this.paymentService.getAllPayments().subscribe({next:i=>{console.log(i)},error:i=>{throw i}})}};n.\u0275fac=function(r){return new(r||n)(Ce(Bp))},n.\u0275cmp=Wt({type:n,selectors:[["app-payments-list"]],decls:2,vars:0,template:function(r,s){r&1&&(K(0,"p"),je(1,"payments-list works!"),Q())}});let e=n;return e})();var H3=(()=>{let n=class n{constructor(i){this.http=i}getAllClasses(){return this.http.get("http://localhost:3000/api/class/")}};n.\u0275fac=function(r){return new(r||n)(xt(Pc))},n.\u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function rne(e,n){if(e&1){let t=kt();Nt(0),K(1,"div",4)(2,"div",5),Me(3,"img",6),K(4,"div",7)(5,"h4"),je(6),Q(),K(7,"p",8),je(8),Q()()(),K(9,"div")(10,"span",9),je(11),Q(),K(12,"span",10),nt("click",function(){let r=Le(t).$implicit,s=Y();return Ne(s.bookClass(r._id))}),je(13,"BUY"),Q()()(),Bt()}if(e&2){let t=n.$implicit,i=n.index;V(3),Iv("alt","img-",i,""),H("src",t.classImage,vr),V(3),hi(t.className),V(2),hi(t.tutorName),V(3),Rt("$",t.classFee,"")}}var q3=(()=>{let n=class n{constructor(i,r,s){this.paymentService=i,this.classService=r,this.router=s}ngOnInit(){this.fetchClasses()}fetchClasses(){this.classService.getAllClasses().subscribe({next:i=>{this.data=i.data},error:i=>{throw i}})}bookClass(i){this.addPayment(i)}addPayment(i){console.log(i),this.paymentService.addPayment({classId:i}).subscribe({next:r=>{window.location=r.url},error:r=>{console.log(r)}})}navigateTo(i){this.router.navigate(["payments",i])}};n.\u0275fac=function(r){return new(r||n)(Ce(Bp),Ce(H3),Ce(es))},n.\u0275cmp=Wt({type:n,selectors:[["app-payments-cart"]],decls:7,vars:1,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-outline-success",3,"click"],[4,"ngFor","ngForOf"],[1,"d-flex","p-3","border-bottom","justify-content-between"],[1,"d-flex"],["height","60","width","100",3,"src","alt"],[1,"ms-3"],[1,"mb-0"],[1,"text-danger","fw-semibold","me-3"],[1,"badge","rounded-pill","text-bg-danger","pointer",3,"click"]],template:function(r,s){r&1&&(K(0,"div",0)(1,"div",1)(2,"h3"),je(3,"Classes"),Q(),K(4,"button",2),nt("click",function(){return s.navigateTo("payments-list")}),je(5,"Check Payments"),Q()(),de(6,rne,14,6,"ng-container",3),Q()),r&2&&(V(6),H("ngForOf",s.data))},dependencies:[ys],styles:[".pointer[_ngcontent-%COMP%]{cursor:pointer}"]});let e=n;return e})();var sne=[{path:"",component:j3},{path:"locations",component:wR,children:[{path:"",component:z3},{path:"add-class",component:mD},{path:":id",component:mD}]},{path:"chats",component:B3},{path:"payments",component:U3,children:[{path:"",component:q3},{path:"payments-list",component:$3}]},{path:"**",redirectTo:""}],G3=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=_n({imports:[AM.forRoot(sne),AM]});let e=n;return e})();var W3=(()=>{let n=class n{constructor(){this.title="client"}};n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Wt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,s){r&1&&Me(0,"router-outlet")},dependencies:[$u]});let e=n;return e})();var Z3=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=vn({type:n,bootstrap:[W3]}),n.\u0275inj=_n({imports:[Na,ek,G3,qP,IA,bR,EA,Ep.forRoot(),R3,A3]});let e=n;return e})();XP().bootstrapModule(Z3).catch(e=>console.error(e));
